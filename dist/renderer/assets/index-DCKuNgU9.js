const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DHsgoODe.js","./index-DwUFM_Bl.js","./index-Cz9f_FiJ.js","./index-nGS5OfXi.js","./index-C2rqtGAT.js","./index-YGlbzJ-E.js","./index-DDBdpbcw.js","./index-Rz7Fc2yB.js","./index-7T-kSdKA.js","./index-B92fcfR5.js","./index-meqCNPAc.js","./index-xzEkjeFd.js","./index-iZQ0uvtM.js","./index-D9AVU4TJ.js","./index-QUA0BMfw.js","./index-Dq3ztgvg.js","./index-DuakhLYG.js","./index-xVTCmqNr.js","./index-DVPnvN3T.js","./index-Cu4sRNhv.js","./dockerfile-BKs6k2Af.js","./simple-mode-GW_nhZxv.js","./factor-kuTfRLto.js","./nsis-LdVXkNf5.js","./pug-DeIclll2.js","./javascript-iXu5QeM3.js","./index-Bv1EcC7f.js","./index-BzJSCMvL.js"])))=>i.map(i=>d[i]);
function N1e(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function Ia(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var c_={exports:{}},Y1={},u_={exports:{}},Jt={};var W$;function j1e(){if(W$)return Jt;W$=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function f(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(G,re,V){this.props=G,this.context=re,this.refs=x,this.updater=V||m}b.prototype.isReactComponent={},b.prototype.setState=function(G,re){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,re,"setState")},b.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function w(){}w.prototype=b.prototype;function S(G,re,V){this.props=G,this.context=re,this.refs=x,this.updater=V||m}var _=S.prototype=new w;_.constructor=S,v(_,b.prototype),_.isPureReactComponent=!0;var P=Array.isArray,A=Object.prototype.hasOwnProperty,T={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function L(G,re,V){var ve,ke={},pe=null,me=null;if(re!=null)for(ve in re.ref!==void 0&&(me=re.ref),re.key!==void 0&&(pe=""+re.key),re)A.call(re,ve)&&!E.hasOwnProperty(ve)&&(ke[ve]=re[ve]);var Me=arguments.length-2;if(Me===1)ke.children=V;else if(1<Me){for(var le=Array(Me),ze=0;ze<Me;ze++)le[ze]=arguments[ze+2];ke.children=le}if(G&&G.defaultProps)for(ve in Me=G.defaultProps,Me)ke[ve]===void 0&&(ke[ve]=Me[ve]);return{$$typeof:n,type:G,key:pe,ref:me,props:ke,_owner:T.current}}function $(G,re){return{$$typeof:n,type:G.type,key:re,ref:G.ref,props:G.props,_owner:G._owner}}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function B(G){var re={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(V){return re[V]})}var D=/\/+/g;function Y(G,re){return typeof G=="object"&&G!==null&&G.key!=null?B(""+G.key):re.toString(36)}function I(G,re,V,ve,ke){var pe=typeof G;(pe==="undefined"||pe==="boolean")&&(G=null);var me=!1;if(G===null)me=!0;else switch(pe){case"string":case"number":me=!0;break;case"object":switch(G.$$typeof){case n:case e:me=!0}}if(me)return me=G,ke=ke(me),G=ve===""?"."+Y(me,0):ve,P(ke)?(V="",G!=null&&(V=G.replace(D,"$&/")+"/"),I(ke,re,V,"",function(ze){return ze})):ke!=null&&(z(ke)&&(ke=$(ke,V+(!ke.key||me&&me.key===ke.key?"":(""+ke.key).replace(D,"$&/")+"/")+G)),re.push(ke)),1;if(me=0,ve=ve===""?".":ve+":",P(G))for(var Me=0;Me<G.length;Me++){pe=G[Me];var le=ve+Y(pe,Me);me+=I(pe,re,V,le,ke)}else if(le=f(G),typeof le=="function")for(G=le.call(G),Me=0;!(pe=G.next()).done;)pe=pe.value,le=ve+Y(pe,Me++),me+=I(pe,re,V,le,ke);else if(pe==="object")throw re=String(G),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return me}function U(G,re,V){if(G==null)return G;var ve=[],ke=0;return I(G,ve,"","",function(pe){return re.call(V,pe,ke++)}),ve}function Z(G){if(G._status===-1){var re=G._result;re=re(),re.then(function(V){(G._status===0||G._status===-1)&&(G._status=1,G._result=V)},function(V){(G._status===0||G._status===-1)&&(G._status=2,G._result=V)}),G._status===-1&&(G._status=0,G._result=re)}if(G._status===1)return G._result.default;throw G._result}var te={current:null},J={transition:null},oe={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:J,ReactCurrentOwner:T};function q(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:U,forEach:function(G,re,V){U(G,function(){re.apply(this,arguments)},V)},count:function(G){var re=0;return U(G,function(){re++}),re},toArray:function(G){return U(G,function(re){return re})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Jt.Component=b,Jt.Fragment=r,Jt.Profiler=o,Jt.PureComponent=S,Jt.StrictMode=i,Jt.Suspense=c,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Jt.act=q,Jt.cloneElement=function(G,re,V){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var ve=v({},G.props),ke=G.key,pe=G.ref,me=G._owner;if(re!=null){if(re.ref!==void 0&&(pe=re.ref,me=T.current),re.key!==void 0&&(ke=""+re.key),G.type&&G.type.defaultProps)var Me=G.type.defaultProps;for(le in re)A.call(re,le)&&!E.hasOwnProperty(le)&&(ve[le]=re[le]===void 0&&Me!==void 0?Me[le]:re[le])}var le=arguments.length-2;if(le===1)ve.children=V;else if(1<le){Me=Array(le);for(var ze=0;ze<le;ze++)Me[ze]=arguments[ze+2];ve.children=Me}return{$$typeof:n,type:G.type,key:ke,ref:pe,props:ve,_owner:me}},Jt.createContext=function(G){return G={$$typeof:a,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:s,_context:G},G.Consumer=G},Jt.createElement=L,Jt.createFactory=function(G){var re=L.bind(null,G);return re.type=G,re},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(G){return{$$typeof:l,render:G}},Jt.isValidElement=z,Jt.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:Z}},Jt.memo=function(G,re){return{$$typeof:u,type:G,compare:re===void 0?null:re}},Jt.startTransition=function(G){var re=J.transition;J.transition={};try{G()}finally{J.transition=re}},Jt.unstable_act=q,Jt.useCallback=function(G,re){return te.current.useCallback(G,re)},Jt.useContext=function(G){return te.current.useContext(G)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(G){return te.current.useDeferredValue(G)},Jt.useEffect=function(G,re){return te.current.useEffect(G,re)},Jt.useId=function(){return te.current.useId()},Jt.useImperativeHandle=function(G,re,V){return te.current.useImperativeHandle(G,re,V)},Jt.useInsertionEffect=function(G,re){return te.current.useInsertionEffect(G,re)},Jt.useLayoutEffect=function(G,re){return te.current.useLayoutEffect(G,re)},Jt.useMemo=function(G,re){return te.current.useMemo(G,re)},Jt.useReducer=function(G,re,V){return te.current.useReducer(G,re,V)},Jt.useRef=function(G){return te.current.useRef(G)},Jt.useState=function(G){return te.current.useState(G)},Jt.useSyncExternalStore=function(G,re,V){return te.current.useSyncExternalStore(G,re,V)},Jt.useTransition=function(){return te.current.useTransition()},Jt.version="18.3.1",Jt}var U$;function Fg(){return U$||(U$=1,u_.exports=j1e()),u_.exports}var K$;function O1e(){if(K$)return Y1;K$=1;var n=Fg(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,u){var d,h={},f=null,m=null;u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(m=c.ref);for(d in c)i.call(c,d)&&!s.hasOwnProperty(d)&&(h[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:l,key:f,ref:m,props:h,_owner:o.current}}return Y1.Fragment=r,Y1.jsx=a,Y1.jsxs=a,Y1}var G$;function D1e(){return G$||(G$=1,c_.exports=O1e()),c_.exports}var p=D1e(),d_={};const t0={log:console.log.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),debug:console.debug.bind(console)};function I1e(){return typeof process<"u"}function R1e(){return typeof process<"u"?d_.CLIODESK_DEBUG==="1"||d_.DEBUG==="1"||d_.CLIODESK_LOG_LEVEL==="debug":!1}function L1e(){const n=I1e(),e=R1e();return!n||e?{filterLog:!1,filterInfo:!1,filterWarn:!1,filterError:!1}:{filterLog:!0,filterInfo:!0,filterWarn:!1,filterError:!1}}function h_(n,e){return e?(...r)=>{}:n}function z1e(){const n=L1e();console.log=h_(t0.log,n.filterLog),console.info=h_(t0.info,n.filterInfo),console.debug=h_(t0.log,n.filterLog),console.warn=t0.warn,console.error=t0.error,n.filterLog&&t0.info("[ClioDesk] Production mode: console.log/info filtered. Set CLIODESK_DEBUG=1 to enable.")}z1e();var M=Fg();const _a=Ia(M),yQ=N1e({__proto__:null,default:_a},[M]);var H2={},f_={exports:{}},Yo={},p_={exports:{}},m_={};var Y$;function F1e(){return Y$||(Y$=1,(function(n){function e(J,oe){var q=J.length;J.push(oe);e:for(;0<q;){var G=q-1>>>1,re=J[G];if(0<o(re,oe))J[G]=oe,J[q]=re,q=G;else break e}}function r(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var oe=J[0],q=J.pop();if(q!==oe){J[0]=q;e:for(var G=0,re=J.length,V=re>>>1;G<V;){var ve=2*(G+1)-1,ke=J[ve],pe=ve+1,me=J[pe];if(0>o(ke,q))pe<re&&0>o(me,ke)?(J[G]=me,J[pe]=q,G=pe):(J[G]=ke,J[ve]=q,G=ve);else if(pe<re&&0>o(me,q))J[G]=me,J[pe]=q,G=pe;else break e}}return oe}function o(J,oe){var q=J.sortIndex-oe.sortIndex;return q!==0?q:J.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(J){for(var oe=r(u);oe!==null;){if(oe.callback===null)i(u);else if(oe.startTime<=J)i(u),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=r(u)}}function P(J){if(x=!1,_(J),!v)if(r(c)!==null)v=!0,Z(A);else{var oe=r(u);oe!==null&&te(P,oe.startTime-J)}}function A(J,oe){v=!1,x&&(x=!1,w(L),L=-1),m=!0;var q=f;try{for(_(oe),h=r(c);h!==null&&(!(h.expirationTime>oe)||J&&!B());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var re=G(h.expirationTime<=oe);oe=n.unstable_now(),typeof re=="function"?h.callback=re:h===r(c)&&i(c),_(oe)}else i(c);h=r(c)}if(h!==null)var V=!0;else{var ve=r(u);ve!==null&&te(P,ve.startTime-oe),V=!1}return V}finally{h=null,f=q,m=!1}}var T=!1,E=null,L=-1,$=5,z=-1;function B(){return!(n.unstable_now()-z<$)}function D(){if(E!==null){var J=n.unstable_now();z=J;var oe=!0;try{oe=E(!0,J)}finally{oe?Y():(T=!1,E=null)}}else T=!1}var Y;if(typeof S=="function")Y=function(){S(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,U=I.port2;I.port1.onmessage=D,Y=function(){U.postMessage(null)}}else Y=function(){b(D,0)};function Z(J){E=J,T||(T=!0,Y())}function te(J,oe){L=b(function(){J(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Z(A))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(J){switch(f){case 1:case 2:case 3:var oe=3;break;default:oe=f}var q=f;f=oe;try{return J()}finally{f=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var q=f;f=J;try{return oe()}finally{f=q}},n.unstable_scheduleCallback=function(J,oe,q){var G=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?G+q:G):q=G,J){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=q+re,J={id:d++,callback:oe,priorityLevel:J,startTime:q,expirationTime:re,sortIndex:-1},q>G?(J.sortIndex=q,e(u,J),r(c)===null&&J===r(u)&&(x?(w(L),L=-1):x=!0,te(P,q-G))):(J.sortIndex=re,e(c,J),v||m||(v=!0,Z(A))),J},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(J){var oe=f;return function(){var q=f;f=oe;try{return J.apply(this,arguments)}finally{f=q}}}})(m_)),m_}var Z$;function $1e(){return Z$||(Z$=1,p_.exports=F1e()),p_.exports}var X$;function B1e(){if(X$)return Yo;X$=1;var n=Fg(),e=$1e();function r(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,k=1;k<arguments.length;k++)y+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function s(g,y){a(g,y),a(g+"Capture",y)}function a(g,y){for(o[g]=y,g=0;g<y.length;g++)i.add(y[g])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function f(g){return c.call(h,g)?!0:c.call(d,g)?!1:u.test(g)?h[g]=!0:(d[g]=!0,!1)}function m(g,y,k,C){if(k!==null&&k.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return C?!1:k!==null?!k.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function v(g,y,k,C){if(y===null||typeof y>"u"||m(g,y,k,C))return!0;if(C)return!1;if(k!==null)switch(k.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function x(g,y,k,C,N,O,W){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=C,this.attributeNamespace=N,this.mustUseProperty=k,this.propertyName=g,this.type=y,this.sanitizeURL=O,this.removeEmptyString=W}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){b[g]=new x(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var y=g[0];b[y]=new x(y,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){b[g]=new x(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){b[g]=new x(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){b[g]=new x(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){b[g]=new x(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){b[g]=new x(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){b[g]=new x(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){b[g]=new x(g,5,!1,g.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function S(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var y=g.replace(w,S);b[y]=new x(y,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var y=g.replace(w,S);b[y]=new x(y,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var y=g.replace(w,S);b[y]=new x(y,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){b[g]=new x(g,1,!1,g.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){b[g]=new x(g,1,!1,g.toLowerCase(),null,!0,!0)});function _(g,y,k,C){var N=b.hasOwnProperty(y)?b[y]:null;(N!==null?N.type!==0:C||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(v(y,k,N,C)&&(k=null),C||N===null?f(y)&&(k===null?g.removeAttribute(y):g.setAttribute(y,""+k)):N.mustUseProperty?g[N.propertyName]=k===null?N.type===3?!1:"":k:(y=N.attributeName,C=N.attributeNamespace,k===null?g.removeAttribute(y):(N=N.type,k=N===3||N===4&&k===!0?"":""+k,C?g.setAttributeNS(C,y,k):g.setAttribute(y,k))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),J=Symbol.iterator;function oe(g){return g===null||typeof g!="object"?null:(g=J&&g[J]||g["@@iterator"],typeof g=="function"?g:null)}var q=Object.assign,G;function re(g){if(G===void 0)try{throw Error()}catch(k){var y=k.stack.trim().match(/\n( *(at )?)/);G=y&&y[1]||""}return`
`+G+g}var V=!1;function ve(g,y){if(!g||V)return"";V=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Se){var C=Se}Reflect.construct(g,[],y)}else{try{y.call()}catch(Se){C=Se}g.call(y.prototype)}else{try{throw Error()}catch(Se){C=Se}g()}}catch(Se){if(Se&&C&&typeof Se.stack=="string"){for(var N=Se.stack.split(`
`),O=C.stack.split(`
`),W=N.length-1,Q=O.length-1;1<=W&&0<=Q&&N[W]!==O[Q];)Q--;for(;1<=W&&0<=Q;W--,Q--)if(N[W]!==O[Q]){if(W!==1||Q!==1)do if(W--,Q--,0>Q||N[W]!==O[Q]){var se=`
`+N[W].replace(" at new "," at ");return g.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",g.displayName)),se}while(1<=W&&0<=Q);break}}}finally{V=!1,Error.prepareStackTrace=k}return(g=g?g.displayName||g.name:"")?re(g):""}function ke(g){switch(g.tag){case 5:return re(g.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return g=ve(g.type,!1),g;case 11:return g=ve(g.type.render,!1),g;case 1:return g=ve(g.type,!0),g;default:return""}}function pe(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case E:return"Fragment";case T:return"Portal";case $:return"Profiler";case L:return"StrictMode";case Y:return"Suspense";case I:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case B:return(g.displayName||"Context")+".Consumer";case z:return(g._context.displayName||"Context")+".Provider";case D:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case U:return y=g.displayName||null,y!==null?y:pe(g.type)||"Memo";case Z:y=g._payload,g=g._init;try{return pe(g(y))}catch{}}return null}function me(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(y);case 8:return y===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function Me(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function le(g){var y=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function ze(g){var y=le(g)?"checked":"value",k=Object.getOwnPropertyDescriptor(g.constructor.prototype,y),C=""+g[y];if(!g.hasOwnProperty(y)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var N=k.get,O=k.set;return Object.defineProperty(g,y,{configurable:!0,get:function(){return N.call(this)},set:function(W){C=""+W,O.call(this,W)}}),Object.defineProperty(g,y,{enumerable:k.enumerable}),{getValue:function(){return C},setValue:function(W){C=""+W},stopTracking:function(){g._valueTracker=null,delete g[y]}}}}function nt(g){g._valueTracker||(g._valueTracker=ze(g))}function F(g){if(!g)return!1;var y=g._valueTracker;if(!y)return!0;var k=y.getValue(),C="";return g&&(C=le(g)?g.checked?"true":"false":g.value),g=C,g!==k?(y.setValue(g),!0):!1}function X(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function ie(g,y){var k=y.checked;return q({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??g._wrapperState.initialChecked})}function de(g,y){var k=y.defaultValue==null?"":y.defaultValue,C=y.checked!=null?y.checked:y.defaultChecked;k=Me(y.value!=null?y.value:k),g._wrapperState={initialChecked:C,initialValue:k,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function fe(g,y){y=y.checked,y!=null&&_(g,"checked",y,!1)}function be(g,y){fe(g,y);var k=Me(y.value),C=y.type;if(k!=null)C==="number"?(k===0&&g.value===""||g.value!=k)&&(g.value=""+k):g.value!==""+k&&(g.value=""+k);else if(C==="submit"||C==="reset"){g.removeAttribute("value");return}y.hasOwnProperty("value")?Ie(g,y.type,k):y.hasOwnProperty("defaultValue")&&Ie(g,y.type,Me(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(g.defaultChecked=!!y.defaultChecked)}function Pe(g,y,k){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var C=y.type;if(!(C!=="submit"&&C!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+g._wrapperState.initialValue,k||y===g.value||(g.value=y),g.defaultValue=y}k=g.name,k!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,k!==""&&(g.name=k)}function Ie(g,y,k){(y!=="number"||X(g.ownerDocument)!==g)&&(k==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+k&&(g.defaultValue=""+k))}var Le=Array.isArray;function Ne(g,y,k,C){if(g=g.options,y){y={};for(var N=0;N<k.length;N++)y["$"+k[N]]=!0;for(k=0;k<g.length;k++)N=y.hasOwnProperty("$"+g[k].value),g[k].selected!==N&&(g[k].selected=N),N&&C&&(g[k].defaultSelected=!0)}else{for(k=""+Me(k),y=null,N=0;N<g.length;N++){if(g[N].value===k){g[N].selected=!0,C&&(g[N].defaultSelected=!0);return}y!==null||g[N].disabled||(y=g[N])}y!==null&&(y.selected=!0)}}function at(g,y){if(y.dangerouslySetInnerHTML!=null)throw Error(r(91));return q({},y,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function Ze(g,y){var k=y.value;if(k==null){if(k=y.children,y=y.defaultValue,k!=null){if(y!=null)throw Error(r(92));if(Le(k)){if(1<k.length)throw Error(r(93));k=k[0]}y=k}y==null&&(y=""),k=y}g._wrapperState={initialValue:Me(k)}}function ct(g,y){var k=Me(y.value),C=Me(y.defaultValue);k!=null&&(k=""+k,k!==g.value&&(g.value=k),y.defaultValue==null&&g.defaultValue!==k&&(g.defaultValue=k)),C!=null&&(g.defaultValue=""+C)}function bt(g){var y=g.textContent;y===g._wrapperState.initialValue&&y!==""&&y!==null&&(g.value=y)}function ge(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ee(g,y){return g==null||g==="http://www.w3.org/1999/xhtml"?ge(y):g==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var Xe,Ct=(function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,k,C,N){MSApp.execUnsafeLocalFunction(function(){return g(y,k,C,N)})}:g})(function(g,y){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=y;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=Xe.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;y.firstChild;)g.appendChild(y.firstChild)}});function Mt(g,y){if(y){var k=g.firstChild;if(k&&k===g.lastChild&&k.nodeType===3){k.nodeValue=y;return}}g.textContent=y}var an={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vn=["Webkit","ms","Moz","O"];Object.keys(an).forEach(function(g){Vn.forEach(function(y){y=y+g.charAt(0).toUpperCase()+g.substring(1),an[y]=an[g]})});function Wn(g,y,k){return y==null||typeof y=="boolean"||y===""?"":k||typeof y!="number"||y===0||an.hasOwnProperty(g)&&an[g]?(""+y).trim():y+"px"}function Yr(g,y){g=g.style;for(var k in y)if(y.hasOwnProperty(k)){var C=k.indexOf("--")===0,N=Wn(k,y[k],C);k==="float"&&(k="cssFloat"),C?g.setProperty(k,N):g[k]=N}}var dn=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xt(g,y){if(y){if(dn[g]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(r(137,g));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(r(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(r(61))}if(y.style!=null&&typeof y.style!="object")throw Error(r(62))}}function Rr(g,y){if(g.indexOf("-")===-1)return typeof y.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yr=null;function Md(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var $a=null,$o=null,Ba=null;function Ha(g){if(g=D1(g)){if(typeof $a!="function")throw Error(r(280));var y=g.stateNode;y&&(y=r2(y),$a(g.stateNode,g.type,y))}}function vf(g){$o?Ba?Ba.push(g):Ba=[g]:$o=g}function xf(){if($o){var g=$o,y=Ba;if(Ba=$o=null,Ha(g),y)for(g=0;g<y.length;g++)Ha(y[g])}}function Qn(g,y){return g(y)}function Xs(){}var Ed=!1;function Nd(g,y,k){if(Ed)return g(y,k);Ed=!0;try{return Qn(g,y,k)}finally{Ed=!1,($o!==null||Ba!==null)&&(Xs(),xf())}}function Js(g,y){var k=g.stateNode;if(k===null)return null;var C=r2(k);if(C===null)return null;k=C[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(g=g.type,C=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!C;break e;default:g=!1}if(g)return null;if(k&&typeof k!="function")throw Error(r(231,y,typeof k));return k}var Zc=!1;if(l)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{Zc=!1}function Nm(g,y,k,C,N,O,W,Q,se){var Se=Array.prototype.slice.call(arguments,3);try{y.apply(k,Se)}catch(Be){this.onError(Be)}}var Zr=!1,lo=null,$l=!1,Xc=null,jd={onError:function(g){Zr=!0,lo=g}};function bf(g,y,k,C,N,O,W,Q,se){Zr=!1,lo=null,Nm.apply(jd,arguments)}function Bo(g,y,k,C,N,O,W,Q,se){if(bf.apply(this,arguments),Zr){if(Zr){var Se=lo;Zr=!1,lo=null}else throw Error(r(198));$l||($l=!0,Xc=Se)}}function xs(g){var y=g,k=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,(y.flags&4098)!==0&&(k=y.return),g=y.return;while(g)}return y.tag===3?k:null}function Od(g){if(g.tag===13){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function Dd(g){if(xs(g)!==g)throw Error(r(188))}function wf(g){var y=g.alternate;if(!y){if(y=xs(g),y===null)throw Error(r(188));return y!==g?null:g}for(var k=g,C=y;;){var N=k.return;if(N===null)break;var O=N.alternate;if(O===null){if(C=N.return,C!==null){k=C;continue}break}if(N.child===O.child){for(O=N.child;O;){if(O===k)return Dd(N),g;if(O===C)return Dd(N),y;O=O.sibling}throw Error(r(188))}if(k.return!==C.return)k=N,C=O;else{for(var W=!1,Q=N.child;Q;){if(Q===k){W=!0,k=N,C=O;break}if(Q===C){W=!0,C=N,k=O;break}Q=Q.sibling}if(!W){for(Q=O.child;Q;){if(Q===k){W=!0,k=O,C=N;break}if(Q===C){W=!0,C=O,k=N;break}Q=Q.sibling}if(!W)throw Error(r(189))}}if(k.alternate!==C)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?g:y}function kf(g){return g=wf(g),g!==null?wt(g):null}function wt(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=wt(g);if(y!==null)return y;g=g.sibling}return null}var ae=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,ut=e.unstable_shouldYield,An=e.unstable_requestPaint,Wt=e.unstable_now,er=e.unstable_getCurrentPriorityLevel,Er=e.unstable_ImmediatePriority,co=e.unstable_UserBlockingPriority,Ho=e.unstable_NormalPriority,Id=e.unstable_LowPriority,vr=e.unstable_IdlePriority,Bl=null,Vi=null;function zw(g){if(Vi&&typeof Vi.onCommitFiberRoot=="function")try{Vi.onCommitFiberRoot(Bl,g,void 0,(g.current.flags&128)===128)}catch{}}var qo=Math.clz32?Math.clz32:Bw,Fw=Math.log,$w=Math.LN2;function Bw(g){return g>>>=0,g===0?32:31-(Fw(g)/$w|0)|0}var Sf=64,Va=4194304;function Cf(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function jm(g,y){var k=g.pendingLanes;if(k===0)return 0;var C=0,N=g.suspendedLanes,O=g.pingedLanes,W=k&268435455;if(W!==0){var Q=W&~N;Q!==0?C=Cf(Q):(O&=W,O!==0&&(C=Cf(O)))}else W=k&~N,W!==0?C=Cf(W):O!==0&&(C=Cf(O));if(C===0)return 0;if(y!==0&&y!==C&&(y&N)===0&&(N=C&-C,O=y&-y,N>=O||N===16&&(O&4194240)!==0))return y;if((C&4)!==0&&(C|=k&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=C;0<y;)k=31-qo(y),N=1<<k,C|=g[k],y&=~N;return C}function j7(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _f(g,y){for(var k=g.suspendedLanes,C=g.pingedLanes,N=g.expirationTimes,O=g.pendingLanes;0<O;){var W=31-qo(O),Q=1<<W,se=N[W];se===-1?((Q&k)===0||(Q&C)!==0)&&(N[W]=j7(Q,y)):se<=y&&(g.expiredLanes|=Q),O&=~Q}}function Jc(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function y1(){var g=Sf;return Sf<<=1,(Sf&4194240)===0&&(Sf=64),g}function hn(g){for(var y=[],k=0;31>k;k++)y.push(g);return y}function kt(g,y,k){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-qo(y),g[y]=k}function Pt(g,y){var k=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var C=g.eventTimes;for(g=g.expirationTimes;0<k;){var N=31-qo(k),O=1<<N;y[N]=0,C[N]=-1,g[N]=-1,k&=~O}}function ln(g,y){var k=g.entangledLanes|=y;for(g=g.entanglements;k;){var C=31-qo(k),N=1<<C;N&y|g[C]&y&&(g[C]|=y),k&=~N}}var bn=0;function Sz(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var Cz,O7,_z,Az,Tz,D7=!1,Hw=[],Rd=null,Ld=null,zd=null,v1=new Map,x1=new Map,Fd=[],Q0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pz(g,y){switch(g){case"focusin":case"focusout":Rd=null;break;case"dragenter":case"dragleave":Ld=null;break;case"mouseover":case"mouseout":zd=null;break;case"pointerover":case"pointerout":v1.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":x1.delete(y.pointerId)}}function b1(g,y,k,C,N,O){return g===null||g.nativeEvent!==O?(g={blockedOn:y,domEventName:k,eventSystemFlags:C,nativeEvent:O,targetContainers:[N]},y!==null&&(y=D1(y),y!==null&&O7(y)),g):(g.eventSystemFlags|=C,y=g.targetContainers,N!==null&&y.indexOf(N)===-1&&y.push(N),g)}function ege(g,y,k,C,N){switch(y){case"focusin":return Rd=b1(Rd,g,y,k,C,N),!0;case"dragenter":return Ld=b1(Ld,g,y,k,C,N),!0;case"mouseover":return zd=b1(zd,g,y,k,C,N),!0;case"pointerover":var O=N.pointerId;return v1.set(O,b1(v1.get(O)||null,g,y,k,C,N)),!0;case"gotpointercapture":return O=N.pointerId,x1.set(O,b1(x1.get(O)||null,g,y,k,C,N)),!0}return!1}function Mz(g){var y=Af(g.target);if(y!==null){var k=xs(y);if(k!==null){if(y=k.tag,y===13){if(y=Od(k),y!==null){g.blockedOn=y,Tz(g.priority,function(){_z(k)});return}}else if(y===3&&k.stateNode.current.memoizedState.isDehydrated){g.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}g.blockedOn=null}function qw(g){if(g.blockedOn!==null)return!1;for(var y=g.targetContainers;0<y.length;){var k=R7(g.domEventName,g.eventSystemFlags,y[0],g.nativeEvent);if(k===null){k=g.nativeEvent;var C=new k.constructor(k.type,k);yr=C,k.target.dispatchEvent(C),yr=null}else return y=D1(k),y!==null&&O7(y),g.blockedOn=k,!1;y.shift()}return!0}function Ez(g,y,k){qw(g)&&k.delete(y)}function tge(){D7=!1,Rd!==null&&qw(Rd)&&(Rd=null),Ld!==null&&qw(Ld)&&(Ld=null),zd!==null&&qw(zd)&&(zd=null),v1.forEach(Ez),x1.forEach(Ez)}function w1(g,y){g.blockedOn===y&&(g.blockedOn=null,D7||(D7=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tge)))}function k1(g){function y(N){return w1(N,g)}if(0<Hw.length){w1(Hw[0],g);for(var k=1;k<Hw.length;k++){var C=Hw[k];C.blockedOn===g&&(C.blockedOn=null)}}for(Rd!==null&&w1(Rd,g),Ld!==null&&w1(Ld,g),zd!==null&&w1(zd,g),v1.forEach(y),x1.forEach(y),k=0;k<Fd.length;k++)C=Fd[k],C.blockedOn===g&&(C.blockedOn=null);for(;0<Fd.length&&(k=Fd[0],k.blockedOn===null);)Mz(k),k.blockedOn===null&&Fd.shift()}var Om=P.ReactCurrentBatchConfig,Vw=!0;function nge(g,y,k,C){var N=bn,O=Om.transition;Om.transition=null;try{bn=1,I7(g,y,k,C)}finally{bn=N,Om.transition=O}}function rge(g,y,k,C){var N=bn,O=Om.transition;Om.transition=null;try{bn=4,I7(g,y,k,C)}finally{bn=N,Om.transition=O}}function I7(g,y,k,C){if(Vw){var N=R7(g,y,k,C);if(N===null)Q7(g,y,C,Ww,k),Pz(g,C);else if(ege(N,g,y,k,C))C.stopPropagation();else if(Pz(g,C),y&4&&-1<Q0e.indexOf(g)){for(;N!==null;){var O=D1(N);if(O!==null&&Cz(O),O=R7(g,y,k,C),O===null&&Q7(g,y,C,Ww,k),O===N)break;N=O}N!==null&&C.stopPropagation()}else Q7(g,y,C,null,k)}}var Ww=null;function R7(g,y,k,C){if(Ww=null,g=Md(C),g=Af(g),g!==null)if(y=xs(g),y===null)g=null;else if(k=y.tag,k===13){if(g=Od(y),g!==null)return g;g=null}else if(k===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;g=null}else y!==g&&(g=null);return Ww=g,null}function Nz(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(er()){case Er:return 1;case co:return 4;case Ho:case Id:return 16;case vr:return 536870912;default:return 16}default:return 16}}var $d=null,L7=null,Uw=null;function jz(){if(Uw)return Uw;var g,y=L7,k=y.length,C,N="value"in $d?$d.value:$d.textContent,O=N.length;for(g=0;g<k&&y[g]===N[g];g++);var W=k-g;for(C=1;C<=W&&y[k-C]===N[O-C];C++);return Uw=N.slice(g,1<C?1-C:void 0)}function Kw(g){var y=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&y===13&&(g=13)):g=y,g===10&&(g=13),32<=g||g===13?g:0}function Gw(){return!0}function Oz(){return!1}function bs(g){function y(k,C,N,O,W){this._reactName=k,this._targetInst=N,this.type=C,this.nativeEvent=O,this.target=W,this.currentTarget=null;for(var Q in g)g.hasOwnProperty(Q)&&(k=g[Q],this[Q]=k?k(O):O[Q]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Gw:Oz,this.isPropagationStopped=Oz,this}return q(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Gw)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Gw)},persist:function(){},isPersistent:Gw}),y}var Dm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z7=bs(Dm),S1=q({},Dm,{view:0,detail:0}),ige=bs(S1),F7,$7,C1,Yw=q({},S1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H7,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==C1&&(C1&&g.type==="mousemove"?(F7=g.screenX-C1.screenX,$7=g.screenY-C1.screenY):$7=F7=0,C1=g),F7)},movementY:function(g){return"movementY"in g?g.movementY:$7}}),Dz=bs(Yw),oge=q({},Yw,{dataTransfer:0}),sge=bs(oge),age=q({},S1,{relatedTarget:0}),B7=bs(age),lge=q({},Dm,{animationName:0,elapsedTime:0,pseudoElement:0}),cge=bs(lge),uge=q({},Dm,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),dge=bs(uge),hge=q({},Dm,{data:0}),Iz=bs(hge),fge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gge(g){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(g):(g=mge[g])?!!y[g]:!1}function H7(){return gge}var yge=q({},S1,{key:function(g){if(g.key){var y=fge[g.key]||g.key;if(y!=="Unidentified")return y}return g.type==="keypress"?(g=Kw(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?pge[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H7,charCode:function(g){return g.type==="keypress"?Kw(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Kw(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),vge=bs(yge),xge=q({},Yw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rz=bs(xge),bge=q({},S1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H7}),wge=bs(bge),kge=q({},Dm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sge=bs(kge),Cge=q({},Yw,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),_ge=bs(Cge),Age=[9,13,27,32],q7=l&&"CompositionEvent"in window,_1=null;l&&"documentMode"in document&&(_1=document.documentMode);var Tge=l&&"TextEvent"in window&&!_1,Lz=l&&(!q7||_1&&8<_1&&11>=_1),zz=" ",Fz=!1;function $z(g,y){switch(g){case"keyup":return Age.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bz(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Im=!1;function Pge(g,y){switch(g){case"compositionend":return Bz(y);case"keypress":return y.which!==32?null:(Fz=!0,zz);case"textInput":return g=y.data,g===zz&&Fz?null:g;default:return null}}function Mge(g,y){if(Im)return g==="compositionend"||!q7&&$z(g,y)?(g=jz(),Uw=L7=$d=null,Im=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return Lz&&y.locale!=="ko"?null:y.data;default:return null}}var Ege={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hz(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y==="input"?!!Ege[g.type]:y==="textarea"}function qz(g,y,k,C){vf(C),y=e2(y,"onChange"),0<y.length&&(k=new z7("onChange","change",null,k,C),g.push({event:k,listeners:y}))}var A1=null,T1=null;function Nge(g){aF(g,0)}function Zw(g){var y=$m(g);if(F(y))return g}function jge(g,y){if(g==="change")return y}var Vz=!1;if(l){var V7;if(l){var W7="oninput"in document;if(!W7){var Wz=document.createElement("div");Wz.setAttribute("oninput","return;"),W7=typeof Wz.oninput=="function"}V7=W7}else V7=!1;Vz=V7&&(!document.documentMode||9<document.documentMode)}function Uz(){A1&&(A1.detachEvent("onpropertychange",Kz),T1=A1=null)}function Kz(g){if(g.propertyName==="value"&&Zw(T1)){var y=[];qz(y,T1,g,Md(g)),Nd(Nge,y)}}function Oge(g,y,k){g==="focusin"?(Uz(),A1=y,T1=k,A1.attachEvent("onpropertychange",Kz)):g==="focusout"&&Uz()}function Dge(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Zw(T1)}function Ige(g,y){if(g==="click")return Zw(y)}function Rge(g,y){if(g==="input"||g==="change")return Zw(y)}function Lge(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Wa=typeof Object.is=="function"?Object.is:Lge;function P1(g,y){if(Wa(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var k=Object.keys(g),C=Object.keys(y);if(k.length!==C.length)return!1;for(C=0;C<k.length;C++){var N=k[C];if(!c.call(y,N)||!Wa(g[N],y[N]))return!1}return!0}function Gz(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function Yz(g,y){var k=Gz(g);g=0;for(var C;k;){if(k.nodeType===3){if(C=g+k.textContent.length,g<=y&&C>=y)return{node:k,offset:y-g};g=C}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Gz(k)}}function Zz(g,y){return g&&y?g===y?!0:g&&g.nodeType===3?!1:y&&y.nodeType===3?Zz(g,y.parentNode):"contains"in g?g.contains(y):g.compareDocumentPosition?!!(g.compareDocumentPosition(y)&16):!1:!1}function Xz(){for(var g=window,y=X();y instanceof g.HTMLIFrameElement;){try{var k=typeof y.contentWindow.location.href=="string"}catch{k=!1}if(k)g=y.contentWindow;else break;y=X(g.document)}return y}function U7(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y&&(y==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||y==="textarea"||g.contentEditable==="true")}function zge(g){var y=Xz(),k=g.focusedElem,C=g.selectionRange;if(y!==k&&k&&k.ownerDocument&&Zz(k.ownerDocument.documentElement,k)){if(C!==null&&U7(k)){if(y=C.start,g=C.end,g===void 0&&(g=y),"selectionStart"in k)k.selectionStart=y,k.selectionEnd=Math.min(g,k.value.length);else if(g=(y=k.ownerDocument||document)&&y.defaultView||window,g.getSelection){g=g.getSelection();var N=k.textContent.length,O=Math.min(C.start,N);C=C.end===void 0?O:Math.min(C.end,N),!g.extend&&O>C&&(N=C,C=O,O=N),N=Yz(k,O);var W=Yz(k,C);N&&W&&(g.rangeCount!==1||g.anchorNode!==N.node||g.anchorOffset!==N.offset||g.focusNode!==W.node||g.focusOffset!==W.offset)&&(y=y.createRange(),y.setStart(N.node,N.offset),g.removeAllRanges(),O>C?(g.addRange(y),g.extend(W.node,W.offset)):(y.setEnd(W.node,W.offset),g.addRange(y)))}}for(y=[],g=k;g=g.parentNode;)g.nodeType===1&&y.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<y.length;k++)g=y[k],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var Fge=l&&"documentMode"in document&&11>=document.documentMode,Rm=null,K7=null,M1=null,G7=!1;function Jz(g,y,k){var C=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;G7||Rm==null||Rm!==X(C)||(C=Rm,"selectionStart"in C&&U7(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),M1&&P1(M1,C)||(M1=C,C=e2(K7,"onSelect"),0<C.length&&(y=new z7("onSelect","select",null,y,k),g.push({event:y,listeners:C}),y.target=Rm)))}function Xw(g,y){var k={};return k[g.toLowerCase()]=y.toLowerCase(),k["Webkit"+g]="webkit"+y,k["Moz"+g]="moz"+y,k}var Lm={animationend:Xw("Animation","AnimationEnd"),animationiteration:Xw("Animation","AnimationIteration"),animationstart:Xw("Animation","AnimationStart"),transitionend:Xw("Transition","TransitionEnd")},Y7={},Qz={};l&&(Qz=document.createElement("div").style,"AnimationEvent"in window||(delete Lm.animationend.animation,delete Lm.animationiteration.animation,delete Lm.animationstart.animation),"TransitionEvent"in window||delete Lm.transitionend.transition);function Jw(g){if(Y7[g])return Y7[g];if(!Lm[g])return g;var y=Lm[g],k;for(k in y)if(y.hasOwnProperty(k)&&k in Qz)return Y7[g]=y[k];return g}var eF=Jw("animationend"),tF=Jw("animationiteration"),nF=Jw("animationstart"),rF=Jw("transitionend"),iF=new Map,oF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bd(g,y){iF.set(g,y),s(y,[g])}for(var Z7=0;Z7<oF.length;Z7++){var X7=oF[Z7],$ge=X7.toLowerCase(),Bge=X7[0].toUpperCase()+X7.slice(1);Bd($ge,"on"+Bge)}Bd(eF,"onAnimationEnd"),Bd(tF,"onAnimationIteration"),Bd(nF,"onAnimationStart"),Bd("dblclick","onDoubleClick"),Bd("focusin","onFocus"),Bd("focusout","onBlur"),Bd(rF,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var E1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hge=new Set("cancel close invalid load scroll toggle".split(" ").concat(E1));function sF(g,y,k){var C=g.type||"unknown-event";g.currentTarget=k,Bo(C,y,void 0,g),g.currentTarget=null}function aF(g,y){y=(y&4)!==0;for(var k=0;k<g.length;k++){var C=g[k],N=C.event;C=C.listeners;e:{var O=void 0;if(y)for(var W=C.length-1;0<=W;W--){var Q=C[W],se=Q.instance,Se=Q.currentTarget;if(Q=Q.listener,se!==O&&N.isPropagationStopped())break e;sF(N,Q,Se),O=se}else for(W=0;W<C.length;W++){if(Q=C[W],se=Q.instance,Se=Q.currentTarget,Q=Q.listener,se!==O&&N.isPropagationStopped())break e;sF(N,Q,Se),O=se}}}if($l)throw g=Xc,$l=!1,Xc=null,g}function tr(g,y){var k=y[o8];k===void 0&&(k=y[o8]=new Set);var C=g+"__bubble";k.has(C)||(lF(y,g,2,!1),k.add(C))}function J7(g,y,k){var C=0;y&&(C|=4),lF(k,g,C,y)}var Qw="_reactListening"+Math.random().toString(36).slice(2);function N1(g){if(!g[Qw]){g[Qw]=!0,i.forEach(function(k){k!=="selectionchange"&&(Hge.has(k)||J7(k,!1,g),J7(k,!0,g))});var y=g.nodeType===9?g:g.ownerDocument;y===null||y[Qw]||(y[Qw]=!0,J7("selectionchange",!1,y))}}function lF(g,y,k,C){switch(Nz(y)){case 1:var N=nge;break;case 4:N=rge;break;default:N=I7}k=N.bind(null,y,k,g),N=void 0,!Zc||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(N=!0),C?N!==void 0?g.addEventListener(y,k,{capture:!0,passive:N}):g.addEventListener(y,k,!0):N!==void 0?g.addEventListener(y,k,{passive:N}):g.addEventListener(y,k,!1)}function Q7(g,y,k,C,N){var O=C;if((y&1)===0&&(y&2)===0&&C!==null)e:for(;;){if(C===null)return;var W=C.tag;if(W===3||W===4){var Q=C.stateNode.containerInfo;if(Q===N||Q.nodeType===8&&Q.parentNode===N)break;if(W===4)for(W=C.return;W!==null;){var se=W.tag;if((se===3||se===4)&&(se=W.stateNode.containerInfo,se===N||se.nodeType===8&&se.parentNode===N))return;W=W.return}for(;Q!==null;){if(W=Af(Q),W===null)return;if(se=W.tag,se===5||se===6){C=O=W;continue e}Q=Q.parentNode}}C=C.return}Nd(function(){var Se=O,Be=Md(k),qe=[];e:{var Fe=iF.get(g);if(Fe!==void 0){var ot=z7,gt=g;switch(g){case"keypress":if(Kw(k)===0)break e;case"keydown":case"keyup":ot=vge;break;case"focusin":gt="focus",ot=B7;break;case"focusout":gt="blur",ot=B7;break;case"beforeblur":case"afterblur":ot=B7;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Dz;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=sge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=wge;break;case eF:case tF:case nF:ot=cge;break;case rF:ot=Sge;break;case"scroll":ot=ige;break;case"wheel":ot=_ge;break;case"copy":case"cut":case"paste":ot=dge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Rz}var vt=(y&4)!==0,Nr=!vt&&g==="scroll",ye=vt?Fe!==null?Fe+"Capture":null:Fe;vt=[];for(var he=Se,we;he!==null;){we=he;var Ke=we.stateNode;if(we.tag===5&&Ke!==null&&(we=Ke,ye!==null&&(Ke=Js(he,ye),Ke!=null&&vt.push(j1(he,Ke,we)))),Nr)break;he=he.return}0<vt.length&&(Fe=new ot(Fe,gt,null,k,Be),qe.push({event:Fe,listeners:vt}))}}if((y&7)===0){e:{if(Fe=g==="mouseover"||g==="pointerover",ot=g==="mouseout"||g==="pointerout",Fe&&k!==yr&&(gt=k.relatedTarget||k.fromElement)&&(Af(gt)||gt[Qc]))break e;if((ot||Fe)&&(Fe=Be.window===Be?Be:(Fe=Be.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,ot?(gt=k.relatedTarget||k.toElement,ot=Se,gt=gt?Af(gt):null,gt!==null&&(Nr=xs(gt),gt!==Nr||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ot=null,gt=Se),ot!==gt)){if(vt=Dz,Ke="onMouseLeave",ye="onMouseEnter",he="mouse",(g==="pointerout"||g==="pointerover")&&(vt=Rz,Ke="onPointerLeave",ye="onPointerEnter",he="pointer"),Nr=ot==null?Fe:$m(ot),we=gt==null?Fe:$m(gt),Fe=new vt(Ke,he+"leave",ot,k,Be),Fe.target=Nr,Fe.relatedTarget=we,Ke=null,Af(Be)===Se&&(vt=new vt(ye,he+"enter",gt,k,Be),vt.target=we,vt.relatedTarget=Nr,Ke=vt),Nr=Ke,ot&&gt)t:{for(vt=ot,ye=gt,he=0,we=vt;we;we=zm(we))he++;for(we=0,Ke=ye;Ke;Ke=zm(Ke))we++;for(;0<he-we;)vt=zm(vt),he--;for(;0<we-he;)ye=zm(ye),we--;for(;he--;){if(vt===ye||ye!==null&&vt===ye.alternate)break t;vt=zm(vt),ye=zm(ye)}vt=null}else vt=null;ot!==null&&cF(qe,Fe,ot,vt,!1),gt!==null&&Nr!==null&&cF(qe,Nr,gt,vt,!0)}}e:{if(Fe=Se?$m(Se):window,ot=Fe.nodeName&&Fe.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Fe.type==="file")var St=jge;else if(Hz(Fe))if(Vz)St=Rge;else{St=Dge;var jt=Oge}else(ot=Fe.nodeName)&&ot.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(St=Ige);if(St&&(St=St(g,Se))){qz(qe,St,k,Be);break e}jt&&jt(g,Fe,Se),g==="focusout"&&(jt=Fe._wrapperState)&&jt.controlled&&Fe.type==="number"&&Ie(Fe,"number",Fe.value)}switch(jt=Se?$m(Se):window,g){case"focusin":(Hz(jt)||jt.contentEditable==="true")&&(Rm=jt,K7=Se,M1=null);break;case"focusout":M1=K7=Rm=null;break;case"mousedown":G7=!0;break;case"contextmenu":case"mouseup":case"dragend":G7=!1,Jz(qe,k,Be);break;case"selectionchange":if(Fge)break;case"keydown":case"keyup":Jz(qe,k,Be)}var Ot;if(q7)e:{switch(g){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else Im?$z(g,k)&&(Ft="onCompositionEnd"):g==="keydown"&&k.keyCode===229&&(Ft="onCompositionStart");Ft&&(Lz&&k.locale!=="ko"&&(Im||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Im&&(Ot=jz()):($d=Be,L7="value"in $d?$d.value:$d.textContent,Im=!0)),jt=e2(Se,Ft),0<jt.length&&(Ft=new Iz(Ft,g,null,k,Be),qe.push({event:Ft,listeners:jt}),Ot?Ft.data=Ot:(Ot=Bz(k),Ot!==null&&(Ft.data=Ot)))),(Ot=Tge?Pge(g,k):Mge(g,k))&&(Se=e2(Se,"onBeforeInput"),0<Se.length&&(Be=new Iz("onBeforeInput","beforeinput",null,k,Be),qe.push({event:Be,listeners:Se}),Be.data=Ot))}aF(qe,y)})}function j1(g,y,k){return{instance:g,listener:y,currentTarget:k}}function e2(g,y){for(var k=y+"Capture",C=[];g!==null;){var N=g,O=N.stateNode;N.tag===5&&O!==null&&(N=O,O=Js(g,k),O!=null&&C.unshift(j1(g,O,N)),O=Js(g,y),O!=null&&C.push(j1(g,O,N))),g=g.return}return C}function zm(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function cF(g,y,k,C,N){for(var O=y._reactName,W=[];k!==null&&k!==C;){var Q=k,se=Q.alternate,Se=Q.stateNode;if(se!==null&&se===C)break;Q.tag===5&&Se!==null&&(Q=Se,N?(se=Js(k,O),se!=null&&W.unshift(j1(k,se,Q))):N||(se=Js(k,O),se!=null&&W.push(j1(k,se,Q)))),k=k.return}W.length!==0&&g.push({event:y,listeners:W})}var qge=/\r\n?/g,Vge=/\u0000|\uFFFD/g;function uF(g){return(typeof g=="string"?g:""+g).replace(qge,`
`).replace(Vge,"")}function t2(g,y,k){if(y=uF(y),uF(g)!==y&&k)throw Error(r(425))}function n2(){}var e8=null,t8=null;function n8(g,y){return g==="textarea"||g==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var r8=typeof setTimeout=="function"?setTimeout:void 0,Wge=typeof clearTimeout=="function"?clearTimeout:void 0,dF=typeof Promise=="function"?Promise:void 0,Uge=typeof queueMicrotask=="function"?queueMicrotask:typeof dF<"u"?function(g){return dF.resolve(null).then(g).catch(Kge)}:r8;function Kge(g){setTimeout(function(){throw g})}function i8(g,y){var k=y,C=0;do{var N=k.nextSibling;if(g.removeChild(k),N&&N.nodeType===8)if(k=N.data,k==="/$"){if(C===0){g.removeChild(N),k1(y);return}C--}else k!=="$"&&k!=="$?"&&k!=="$!"||C++;k=N}while(k);k1(y)}function Hd(g){for(;g!=null;g=g.nextSibling){var y=g.nodeType;if(y===1||y===3)break;if(y===8){if(y=g.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return g}function hF(g){g=g.previousSibling;for(var y=0;g;){if(g.nodeType===8){var k=g.data;if(k==="$"||k==="$!"||k==="$?"){if(y===0)return g;y--}else k==="/$"&&y++}g=g.previousSibling}return null}var Fm=Math.random().toString(36).slice(2),Hl="__reactFiber$"+Fm,O1="__reactProps$"+Fm,Qc="__reactContainer$"+Fm,o8="__reactEvents$"+Fm,Gge="__reactListeners$"+Fm,Yge="__reactHandles$"+Fm;function Af(g){var y=g[Hl];if(y)return y;for(var k=g.parentNode;k;){if(y=k[Qc]||k[Hl]){if(k=y.alternate,y.child!==null||k!==null&&k.child!==null)for(g=hF(g);g!==null;){if(k=g[Hl])return k;g=hF(g)}return y}g=k,k=g.parentNode}return null}function D1(g){return g=g[Hl]||g[Qc],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function $m(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(r(33))}function r2(g){return g[O1]||null}var s8=[],Bm=-1;function qd(g){return{current:g}}function nr(g){0>Bm||(g.current=s8[Bm],s8[Bm]=null,Bm--)}function Un(g,y){Bm++,s8[Bm]=g.current,g.current=y}var Vd={},Wi=qd(Vd),Vo=qd(!1),Tf=Vd;function Hm(g,y){var k=g.type.contextTypes;if(!k)return Vd;var C=g.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===y)return C.__reactInternalMemoizedMaskedChildContext;var N={},O;for(O in k)N[O]=y[O];return C&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=N),N}function Wo(g){return g=g.childContextTypes,g!=null}function i2(){nr(Vo),nr(Wi)}function fF(g,y,k){if(Wi.current!==Vd)throw Error(r(168));Un(Wi,y),Un(Vo,k)}function pF(g,y,k){var C=g.stateNode;if(y=y.childContextTypes,typeof C.getChildContext!="function")return k;C=C.getChildContext();for(var N in C)if(!(N in y))throw Error(r(108,me(g)||"Unknown",N));return q({},k,C)}function o2(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Vd,Tf=Wi.current,Un(Wi,g),Un(Vo,Vo.current),!0}function mF(g,y,k){var C=g.stateNode;if(!C)throw Error(r(169));k?(g=pF(g,y,Tf),C.__reactInternalMemoizedMergedChildContext=g,nr(Vo),nr(Wi),Un(Wi,g)):nr(Vo),Un(Vo,k)}var eu=null,s2=!1,a8=!1;function gF(g){eu===null?eu=[g]:eu.push(g)}function Zge(g){s2=!0,gF(g)}function Wd(){if(!a8&&eu!==null){a8=!0;var g=0,y=bn;try{var k=eu;for(bn=1;g<k.length;g++){var C=k[g];do C=C(!0);while(C!==null)}eu=null,s2=!1}catch(N){throw eu!==null&&(eu=eu.slice(g+1)),ae(Er,Wd),N}finally{bn=y,a8=!1}}return null}var qm=[],Vm=0,a2=null,l2=0,Qs=[],ea=0,Pf=null,tu=1,nu="";function Mf(g,y){qm[Vm++]=l2,qm[Vm++]=a2,a2=g,l2=y}function yF(g,y,k){Qs[ea++]=tu,Qs[ea++]=nu,Qs[ea++]=Pf,Pf=g;var C=tu;g=nu;var N=32-qo(C)-1;C&=~(1<<N),k+=1;var O=32-qo(y)+N;if(30<O){var W=N-N%5;O=(C&(1<<W)-1).toString(32),C>>=W,N-=W,tu=1<<32-qo(y)+N|k<<N|C,nu=O+g}else tu=1<<O|k<<N|C,nu=g}function l8(g){g.return!==null&&(Mf(g,1),yF(g,1,0))}function c8(g){for(;g===a2;)a2=qm[--Vm],qm[Vm]=null,l2=qm[--Vm],qm[Vm]=null;for(;g===Pf;)Pf=Qs[--ea],Qs[ea]=null,nu=Qs[--ea],Qs[ea]=null,tu=Qs[--ea],Qs[ea]=null}var ws=null,ks=null,cr=!1,Ua=null;function vF(g,y){var k=ia(5,null,null,0);k.elementType="DELETED",k.stateNode=y,k.return=g,y=g.deletions,y===null?(g.deletions=[k],g.flags|=16):y.push(k)}function xF(g,y){switch(g.tag){case 5:var k=g.type;return y=y.nodeType!==1||k.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(g.stateNode=y,ws=g,ks=Hd(y.firstChild),!0):!1;case 6:return y=g.pendingProps===""||y.nodeType!==3?null:y,y!==null?(g.stateNode=y,ws=g,ks=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(k=Pf!==null?{id:tu,overflow:nu}:null,g.memoizedState={dehydrated:y,treeContext:k,retryLane:1073741824},k=ia(18,null,null,0),k.stateNode=y,k.return=g,g.child=k,ws=g,ks=null,!0):!1;default:return!1}}function u8(g){return(g.mode&1)!==0&&(g.flags&128)===0}function d8(g){if(cr){var y=ks;if(y){var k=y;if(!xF(g,y)){if(u8(g))throw Error(r(418));y=Hd(k.nextSibling);var C=ws;y&&xF(g,y)?vF(C,k):(g.flags=g.flags&-4097|2,cr=!1,ws=g)}}else{if(u8(g))throw Error(r(418));g.flags=g.flags&-4097|2,cr=!1,ws=g}}}function bF(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;ws=g}function c2(g){if(g!==ws)return!1;if(!cr)return bF(g),cr=!0,!1;var y;if((y=g.tag!==3)&&!(y=g.tag!==5)&&(y=g.type,y=y!=="head"&&y!=="body"&&!n8(g.type,g.memoizedProps)),y&&(y=ks)){if(u8(g))throw wF(),Error(r(418));for(;y;)vF(g,y),y=Hd(y.nextSibling)}if(bF(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));e:{for(g=g.nextSibling,y=0;g;){if(g.nodeType===8){var k=g.data;if(k==="/$"){if(y===0){ks=Hd(g.nextSibling);break e}y--}else k!=="$"&&k!=="$!"&&k!=="$?"||y++}g=g.nextSibling}ks=null}}else ks=ws?Hd(g.stateNode.nextSibling):null;return!0}function wF(){for(var g=ks;g;)g=Hd(g.nextSibling)}function Wm(){ks=ws=null,cr=!1}function h8(g){Ua===null?Ua=[g]:Ua.push(g)}var Xge=P.ReactCurrentBatchConfig;function I1(g,y,k){if(g=k.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var C=k.stateNode}if(!C)throw Error(r(147,g));var N=C,O=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===O?y.ref:(y=function(W){var Q=N.refs;W===null?delete Q[O]:Q[O]=W},y._stringRef=O,y)}if(typeof g!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,g))}return g}function u2(g,y){throw g=Object.prototype.toString.call(y),Error(r(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function kF(g){var y=g._init;return y(g._payload)}function SF(g){function y(ye,he){if(g){var we=ye.deletions;we===null?(ye.deletions=[he],ye.flags|=16):we.push(he)}}function k(ye,he){if(!g)return null;for(;he!==null;)y(ye,he),he=he.sibling;return null}function C(ye,he){for(ye=new Map;he!==null;)he.key!==null?ye.set(he.key,he):ye.set(he.index,he),he=he.sibling;return ye}function N(ye,he){return ye=Qd(ye,he),ye.index=0,ye.sibling=null,ye}function O(ye,he,we){return ye.index=we,g?(we=ye.alternate,we!==null?(we=we.index,we<he?(ye.flags|=2,he):we):(ye.flags|=2,he)):(ye.flags|=1048576,he)}function W(ye){return g&&ye.alternate===null&&(ye.flags|=2),ye}function Q(ye,he,we,Ke){return he===null||he.tag!==6?(he=r_(we,ye.mode,Ke),he.return=ye,he):(he=N(he,we),he.return=ye,he)}function se(ye,he,we,Ke){var St=we.type;return St===E?Be(ye,he,we.props.children,Ke,we.key):he!==null&&(he.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Z&&kF(St)===he.type)?(Ke=N(he,we.props),Ke.ref=I1(ye,he,we),Ke.return=ye,Ke):(Ke=D2(we.type,we.key,we.props,null,ye.mode,Ke),Ke.ref=I1(ye,he,we),Ke.return=ye,Ke)}function Se(ye,he,we,Ke){return he===null||he.tag!==4||he.stateNode.containerInfo!==we.containerInfo||he.stateNode.implementation!==we.implementation?(he=i_(we,ye.mode,Ke),he.return=ye,he):(he=N(he,we.children||[]),he.return=ye,he)}function Be(ye,he,we,Ke,St){return he===null||he.tag!==7?(he=Lf(we,ye.mode,Ke,St),he.return=ye,he):(he=N(he,we),he.return=ye,he)}function qe(ye,he,we){if(typeof he=="string"&&he!==""||typeof he=="number")return he=r_(""+he,ye.mode,we),he.return=ye,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case A:return we=D2(he.type,he.key,he.props,null,ye.mode,we),we.ref=I1(ye,null,he),we.return=ye,we;case T:return he=i_(he,ye.mode,we),he.return=ye,he;case Z:var Ke=he._init;return qe(ye,Ke(he._payload),we)}if(Le(he)||oe(he))return he=Lf(he,ye.mode,we,null),he.return=ye,he;u2(ye,he)}return null}function Fe(ye,he,we,Ke){var St=he!==null?he.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return St!==null?null:Q(ye,he,""+we,Ke);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case A:return we.key===St?se(ye,he,we,Ke):null;case T:return we.key===St?Se(ye,he,we,Ke):null;case Z:return St=we._init,Fe(ye,he,St(we._payload),Ke)}if(Le(we)||oe(we))return St!==null?null:Be(ye,he,we,Ke,null);u2(ye,we)}return null}function ot(ye,he,we,Ke,St){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return ye=ye.get(we)||null,Q(he,ye,""+Ke,St);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case A:return ye=ye.get(Ke.key===null?we:Ke.key)||null,se(he,ye,Ke,St);case T:return ye=ye.get(Ke.key===null?we:Ke.key)||null,Se(he,ye,Ke,St);case Z:var jt=Ke._init;return ot(ye,he,we,jt(Ke._payload),St)}if(Le(Ke)||oe(Ke))return ye=ye.get(we)||null,Be(he,ye,Ke,St,null);u2(he,Ke)}return null}function gt(ye,he,we,Ke){for(var St=null,jt=null,Ot=he,Ft=he=0,ci=null;Ot!==null&&Ft<we.length;Ft++){Ot.index>Ft?(ci=Ot,Ot=null):ci=Ot.sibling;var gn=Fe(ye,Ot,we[Ft],Ke);if(gn===null){Ot===null&&(Ot=ci);break}g&&Ot&&gn.alternate===null&&y(ye,Ot),he=O(gn,he,Ft),jt===null?St=gn:jt.sibling=gn,jt=gn,Ot=ci}if(Ft===we.length)return k(ye,Ot),cr&&Mf(ye,Ft),St;if(Ot===null){for(;Ft<we.length;Ft++)Ot=qe(ye,we[Ft],Ke),Ot!==null&&(he=O(Ot,he,Ft),jt===null?St=Ot:jt.sibling=Ot,jt=Ot);return cr&&Mf(ye,Ft),St}for(Ot=C(ye,Ot);Ft<we.length;Ft++)ci=ot(Ot,ye,Ft,we[Ft],Ke),ci!==null&&(g&&ci.alternate!==null&&Ot.delete(ci.key===null?Ft:ci.key),he=O(ci,he,Ft),jt===null?St=ci:jt.sibling=ci,jt=ci);return g&&Ot.forEach(function(eh){return y(ye,eh)}),cr&&Mf(ye,Ft),St}function vt(ye,he,we,Ke){var St=oe(we);if(typeof St!="function")throw Error(r(150));if(we=St.call(we),we==null)throw Error(r(151));for(var jt=St=null,Ot=he,Ft=he=0,ci=null,gn=we.next();Ot!==null&&!gn.done;Ft++,gn=we.next()){Ot.index>Ft?(ci=Ot,Ot=null):ci=Ot.sibling;var eh=Fe(ye,Ot,gn.value,Ke);if(eh===null){Ot===null&&(Ot=ci);break}g&&Ot&&eh.alternate===null&&y(ye,Ot),he=O(eh,he,Ft),jt===null?St=eh:jt.sibling=eh,jt=eh,Ot=ci}if(gn.done)return k(ye,Ot),cr&&Mf(ye,Ft),St;if(Ot===null){for(;!gn.done;Ft++,gn=we.next())gn=qe(ye,gn.value,Ke),gn!==null&&(he=O(gn,he,Ft),jt===null?St=gn:jt.sibling=gn,jt=gn);return cr&&Mf(ye,Ft),St}for(Ot=C(ye,Ot);!gn.done;Ft++,gn=we.next())gn=ot(Ot,ye,Ft,gn.value,Ke),gn!==null&&(g&&gn.alternate!==null&&Ot.delete(gn.key===null?Ft:gn.key),he=O(gn,he,Ft),jt===null?St=gn:jt.sibling=gn,jt=gn);return g&&Ot.forEach(function(E1e){return y(ye,E1e)}),cr&&Mf(ye,Ft),St}function Nr(ye,he,we,Ke){if(typeof we=="object"&&we!==null&&we.type===E&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case A:e:{for(var St=we.key,jt=he;jt!==null;){if(jt.key===St){if(St=we.type,St===E){if(jt.tag===7){k(ye,jt.sibling),he=N(jt,we.props.children),he.return=ye,ye=he;break e}}else if(jt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Z&&kF(St)===jt.type){k(ye,jt.sibling),he=N(jt,we.props),he.ref=I1(ye,jt,we),he.return=ye,ye=he;break e}k(ye,jt);break}else y(ye,jt);jt=jt.sibling}we.type===E?(he=Lf(we.props.children,ye.mode,Ke,we.key),he.return=ye,ye=he):(Ke=D2(we.type,we.key,we.props,null,ye.mode,Ke),Ke.ref=I1(ye,he,we),Ke.return=ye,ye=Ke)}return W(ye);case T:e:{for(jt=we.key;he!==null;){if(he.key===jt)if(he.tag===4&&he.stateNode.containerInfo===we.containerInfo&&he.stateNode.implementation===we.implementation){k(ye,he.sibling),he=N(he,we.children||[]),he.return=ye,ye=he;break e}else{k(ye,he);break}else y(ye,he);he=he.sibling}he=i_(we,ye.mode,Ke),he.return=ye,ye=he}return W(ye);case Z:return jt=we._init,Nr(ye,he,jt(we._payload),Ke)}if(Le(we))return gt(ye,he,we,Ke);if(oe(we))return vt(ye,he,we,Ke);u2(ye,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,he!==null&&he.tag===6?(k(ye,he.sibling),he=N(he,we),he.return=ye,ye=he):(k(ye,he),he=r_(we,ye.mode,Ke),he.return=ye,ye=he),W(ye)):k(ye,he)}return Nr}var Um=SF(!0),CF=SF(!1),d2=qd(null),h2=null,Km=null,f8=null;function p8(){f8=Km=h2=null}function m8(g){var y=d2.current;nr(d2),g._currentValue=y}function g8(g,y,k){for(;g!==null;){var C=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,C!==null&&(C.childLanes|=y)):C!==null&&(C.childLanes&y)!==y&&(C.childLanes|=y),g===k)break;g=g.return}}function Gm(g,y){h2=g,f8=Km=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&y)!==0&&(Uo=!0),g.firstContext=null)}function ta(g){var y=g._currentValue;if(f8!==g)if(g={context:g,memoizedValue:y,next:null},Km===null){if(h2===null)throw Error(r(308));Km=g,h2.dependencies={lanes:0,firstContext:g}}else Km=Km.next=g;return y}var Ef=null;function y8(g){Ef===null?Ef=[g]:Ef.push(g)}function _F(g,y,k,C){var N=y.interleaved;return N===null?(k.next=k,y8(y)):(k.next=N.next,N.next=k),y.interleaved=k,ru(g,C)}function ru(g,y){g.lanes|=y;var k=g.alternate;for(k!==null&&(k.lanes|=y),k=g,g=g.return;g!==null;)g.childLanes|=y,k=g.alternate,k!==null&&(k.childLanes|=y),k=g,g=g.return;return k.tag===3?k.stateNode:null}var Ud=!1;function v8(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AF(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function iu(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function Kd(g,y,k){var C=g.updateQueue;if(C===null)return null;if(C=C.shared,(pn&2)!==0){var N=C.pending;return N===null?y.next=y:(y.next=N.next,N.next=y),C.pending=y,ru(g,k)}return N=C.interleaved,N===null?(y.next=y,y8(C)):(y.next=N.next,N.next=y),C.interleaved=y,ru(g,k)}function f2(g,y,k){if(y=y.updateQueue,y!==null&&(y=y.shared,(k&4194240)!==0)){var C=y.lanes;C&=g.pendingLanes,k|=C,y.lanes=k,ln(g,k)}}function TF(g,y){var k=g.updateQueue,C=g.alternate;if(C!==null&&(C=C.updateQueue,k===C)){var N=null,O=null;if(k=k.firstBaseUpdate,k!==null){do{var W={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};O===null?N=O=W:O=O.next=W,k=k.next}while(k!==null);O===null?N=O=y:O=O.next=y}else N=O=y;k={baseState:C.baseState,firstBaseUpdate:N,lastBaseUpdate:O,shared:C.shared,effects:C.effects},g.updateQueue=k;return}g=k.lastBaseUpdate,g===null?k.firstBaseUpdate=y:g.next=y,k.lastBaseUpdate=y}function p2(g,y,k,C){var N=g.updateQueue;Ud=!1;var O=N.firstBaseUpdate,W=N.lastBaseUpdate,Q=N.shared.pending;if(Q!==null){N.shared.pending=null;var se=Q,Se=se.next;se.next=null,W===null?O=Se:W.next=Se,W=se;var Be=g.alternate;Be!==null&&(Be=Be.updateQueue,Q=Be.lastBaseUpdate,Q!==W&&(Q===null?Be.firstBaseUpdate=Se:Q.next=Se,Be.lastBaseUpdate=se))}if(O!==null){var qe=N.baseState;W=0,Be=Se=se=null,Q=O;do{var Fe=Q.lane,ot=Q.eventTime;if((C&Fe)===Fe){Be!==null&&(Be=Be.next={eventTime:ot,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var gt=g,vt=Q;switch(Fe=y,ot=k,vt.tag){case 1:if(gt=vt.payload,typeof gt=="function"){qe=gt.call(ot,qe,Fe);break e}qe=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=vt.payload,Fe=typeof gt=="function"?gt.call(ot,qe,Fe):gt,Fe==null)break e;qe=q({},qe,Fe);break e;case 2:Ud=!0}}Q.callback!==null&&Q.lane!==0&&(g.flags|=64,Fe=N.effects,Fe===null?N.effects=[Q]:Fe.push(Q))}else ot={eventTime:ot,lane:Fe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Be===null?(Se=Be=ot,se=qe):Be=Be.next=ot,W|=Fe;if(Q=Q.next,Q===null){if(Q=N.shared.pending,Q===null)break;Fe=Q,Q=Fe.next,Fe.next=null,N.lastBaseUpdate=Fe,N.shared.pending=null}}while(!0);if(Be===null&&(se=qe),N.baseState=se,N.firstBaseUpdate=Se,N.lastBaseUpdate=Be,y=N.shared.interleaved,y!==null){N=y;do W|=N.lane,N=N.next;while(N!==y)}else O===null&&(N.shared.lanes=0);Of|=W,g.lanes=W,g.memoizedState=qe}}function PF(g,y,k){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var C=g[y],N=C.callback;if(N!==null){if(C.callback=null,C=k,typeof N!="function")throw Error(r(191,N));N.call(C)}}}var R1={},ql=qd(R1),L1=qd(R1),z1=qd(R1);function Nf(g){if(g===R1)throw Error(r(174));return g}function x8(g,y){switch(Un(z1,y),Un(L1,g),Un(ql,R1),g=y.nodeType,g){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:Ee(null,"");break;default:g=g===8?y.parentNode:y,y=g.namespaceURI||null,g=g.tagName,y=Ee(y,g)}nr(ql),Un(ql,y)}function Ym(){nr(ql),nr(L1),nr(z1)}function MF(g){Nf(z1.current);var y=Nf(ql.current),k=Ee(y,g.type);y!==k&&(Un(L1,g),Un(ql,k))}function b8(g){L1.current===g&&(nr(ql),nr(L1))}var xr=qd(0);function m2(g){for(var y=g;y!==null;){if(y.tag===13){var k=y.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var w8=[];function k8(){for(var g=0;g<w8.length;g++)w8[g]._workInProgressVersionPrimary=null;w8.length=0}var g2=P.ReactCurrentDispatcher,S8=P.ReactCurrentBatchConfig,jf=0,br=null,Xr=null,ai=null,y2=!1,F1=!1,$1=0,Jge=0;function Ui(){throw Error(r(321))}function C8(g,y){if(y===null)return!1;for(var k=0;k<y.length&&k<g.length;k++)if(!Wa(g[k],y[k]))return!1;return!0}function _8(g,y,k,C,N,O){if(jf=O,br=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,g2.current=g===null||g.memoizedState===null?n1e:r1e,g=k(C,N),F1){O=0;do{if(F1=!1,$1=0,25<=O)throw Error(r(301));O+=1,ai=Xr=null,y.updateQueue=null,g2.current=i1e,g=k(C,N)}while(F1)}if(g2.current=b2,y=Xr!==null&&Xr.next!==null,jf=0,ai=Xr=br=null,y2=!1,y)throw Error(r(300));return g}function A8(){var g=$1!==0;return $1=0,g}function Vl(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?br.memoizedState=ai=g:ai=ai.next=g,ai}function na(){if(Xr===null){var g=br.alternate;g=g!==null?g.memoizedState:null}else g=Xr.next;var y=ai===null?br.memoizedState:ai.next;if(y!==null)ai=y,Xr=g;else{if(g===null)throw Error(r(310));Xr=g,g={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ai===null?br.memoizedState=ai=g:ai=ai.next=g}return ai}function B1(g,y){return typeof y=="function"?y(g):y}function T8(g){var y=na(),k=y.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=g;var C=Xr,N=C.baseQueue,O=k.pending;if(O!==null){if(N!==null){var W=N.next;N.next=O.next,O.next=W}C.baseQueue=N=O,k.pending=null}if(N!==null){O=N.next,C=C.baseState;var Q=W=null,se=null,Se=O;do{var Be=Se.lane;if((jf&Be)===Be)se!==null&&(se=se.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),C=Se.hasEagerState?Se.eagerState:g(C,Se.action);else{var qe={lane:Be,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};se===null?(Q=se=qe,W=C):se=se.next=qe,br.lanes|=Be,Of|=Be}Se=Se.next}while(Se!==null&&Se!==O);se===null?W=C:se.next=Q,Wa(C,y.memoizedState)||(Uo=!0),y.memoizedState=C,y.baseState=W,y.baseQueue=se,k.lastRenderedState=C}if(g=k.interleaved,g!==null){N=g;do O=N.lane,br.lanes|=O,Of|=O,N=N.next;while(N!==g)}else N===null&&(k.lanes=0);return[y.memoizedState,k.dispatch]}function P8(g){var y=na(),k=y.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=g;var C=k.dispatch,N=k.pending,O=y.memoizedState;if(N!==null){k.pending=null;var W=N=N.next;do O=g(O,W.action),W=W.next;while(W!==N);Wa(O,y.memoizedState)||(Uo=!0),y.memoizedState=O,y.baseQueue===null&&(y.baseState=O),k.lastRenderedState=O}return[O,C]}function EF(){}function NF(g,y){var k=br,C=na(),N=y(),O=!Wa(C.memoizedState,N);if(O&&(C.memoizedState=N,Uo=!0),C=C.queue,M8(DF.bind(null,k,C,g),[g]),C.getSnapshot!==y||O||ai!==null&&ai.memoizedState.tag&1){if(k.flags|=2048,H1(9,OF.bind(null,k,C,N,y),void 0,null),li===null)throw Error(r(349));(jf&30)!==0||jF(k,y,N)}return N}function jF(g,y,k){g.flags|=16384,g={getSnapshot:y,value:k},y=br.updateQueue,y===null?(y={lastEffect:null,stores:null},br.updateQueue=y,y.stores=[g]):(k=y.stores,k===null?y.stores=[g]:k.push(g))}function OF(g,y,k,C){y.value=k,y.getSnapshot=C,IF(y)&&RF(g)}function DF(g,y,k){return k(function(){IF(y)&&RF(g)})}function IF(g){var y=g.getSnapshot;g=g.value;try{var k=y();return!Wa(g,k)}catch{return!0}}function RF(g){var y=ru(g,1);y!==null&&Za(y,g,1,-1)}function LF(g){var y=Vl();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:B1,lastRenderedState:g},y.queue=g,g=g.dispatch=t1e.bind(null,br,g),[y.memoizedState,g]}function H1(g,y,k,C){return g={tag:g,create:y,destroy:k,deps:C,next:null},y=br.updateQueue,y===null?(y={lastEffect:null,stores:null},br.updateQueue=y,y.lastEffect=g.next=g):(k=y.lastEffect,k===null?y.lastEffect=g.next=g:(C=k.next,k.next=g,g.next=C,y.lastEffect=g)),g}function zF(){return na().memoizedState}function v2(g,y,k,C){var N=Vl();br.flags|=g,N.memoizedState=H1(1|y,k,void 0,C===void 0?null:C)}function x2(g,y,k,C){var N=na();C=C===void 0?null:C;var O=void 0;if(Xr!==null){var W=Xr.memoizedState;if(O=W.destroy,C!==null&&C8(C,W.deps)){N.memoizedState=H1(y,k,O,C);return}}br.flags|=g,N.memoizedState=H1(1|y,k,O,C)}function FF(g,y){return v2(8390656,8,g,y)}function M8(g,y){return x2(2048,8,g,y)}function $F(g,y){return x2(4,2,g,y)}function BF(g,y){return x2(4,4,g,y)}function HF(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function qF(g,y,k){return k=k!=null?k.concat([g]):null,x2(4,4,HF.bind(null,y,g),k)}function E8(){}function VF(g,y){var k=na();y=y===void 0?null:y;var C=k.memoizedState;return C!==null&&y!==null&&C8(y,C[1])?C[0]:(k.memoizedState=[g,y],g)}function WF(g,y){var k=na();y=y===void 0?null:y;var C=k.memoizedState;return C!==null&&y!==null&&C8(y,C[1])?C[0]:(g=g(),k.memoizedState=[g,y],g)}function UF(g,y,k){return(jf&21)===0?(g.baseState&&(g.baseState=!1,Uo=!0),g.memoizedState=k):(Wa(k,y)||(k=y1(),br.lanes|=k,Of|=k,g.baseState=!0),y)}function Qge(g,y){var k=bn;bn=k!==0&&4>k?k:4,g(!0);var C=S8.transition;S8.transition={};try{g(!1),y()}finally{bn=k,S8.transition=C}}function KF(){return na().memoizedState}function e1e(g,y,k){var C=Xd(g);if(k={lane:C,action:k,hasEagerState:!1,eagerState:null,next:null},GF(g))YF(y,k);else if(k=_F(g,y,k,C),k!==null){var N=ho();Za(k,g,C,N),ZF(k,y,C)}}function t1e(g,y,k){var C=Xd(g),N={lane:C,action:k,hasEagerState:!1,eagerState:null,next:null};if(GF(g))YF(y,N);else{var O=g.alternate;if(g.lanes===0&&(O===null||O.lanes===0)&&(O=y.lastRenderedReducer,O!==null))try{var W=y.lastRenderedState,Q=O(W,k);if(N.hasEagerState=!0,N.eagerState=Q,Wa(Q,W)){var se=y.interleaved;se===null?(N.next=N,y8(y)):(N.next=se.next,se.next=N),y.interleaved=N;return}}catch{}k=_F(g,y,N,C),k!==null&&(N=ho(),Za(k,g,C,N),ZF(k,y,C))}}function GF(g){var y=g.alternate;return g===br||y!==null&&y===br}function YF(g,y){F1=y2=!0;var k=g.pending;k===null?y.next=y:(y.next=k.next,k.next=y),g.pending=y}function ZF(g,y,k){if((k&4194240)!==0){var C=y.lanes;C&=g.pendingLanes,k|=C,y.lanes=k,ln(g,k)}}var b2={readContext:ta,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},n1e={readContext:ta,useCallback:function(g,y){return Vl().memoizedState=[g,y===void 0?null:y],g},useContext:ta,useEffect:FF,useImperativeHandle:function(g,y,k){return k=k!=null?k.concat([g]):null,v2(4194308,4,HF.bind(null,y,g),k)},useLayoutEffect:function(g,y){return v2(4194308,4,g,y)},useInsertionEffect:function(g,y){return v2(4,2,g,y)},useMemo:function(g,y){var k=Vl();return y=y===void 0?null:y,g=g(),k.memoizedState=[g,y],g},useReducer:function(g,y,k){var C=Vl();return y=k!==void 0?k(y):y,C.memoizedState=C.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},C.queue=g,g=g.dispatch=e1e.bind(null,br,g),[C.memoizedState,g]},useRef:function(g){var y=Vl();return g={current:g},y.memoizedState=g},useState:LF,useDebugValue:E8,useDeferredValue:function(g){return Vl().memoizedState=g},useTransition:function(){var g=LF(!1),y=g[0];return g=Qge.bind(null,g[1]),Vl().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,k){var C=br,N=Vl();if(cr){if(k===void 0)throw Error(r(407));k=k()}else{if(k=y(),li===null)throw Error(r(349));(jf&30)!==0||jF(C,y,k)}N.memoizedState=k;var O={value:k,getSnapshot:y};return N.queue=O,FF(DF.bind(null,C,O,g),[g]),C.flags|=2048,H1(9,OF.bind(null,C,O,k,y),void 0,null),k},useId:function(){var g=Vl(),y=li.identifierPrefix;if(cr){var k=nu,C=tu;k=(C&~(1<<32-qo(C)-1)).toString(32)+k,y=":"+y+"R"+k,k=$1++,0<k&&(y+="H"+k.toString(32)),y+=":"}else k=Jge++,y=":"+y+"r"+k.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},r1e={readContext:ta,useCallback:VF,useContext:ta,useEffect:M8,useImperativeHandle:qF,useInsertionEffect:$F,useLayoutEffect:BF,useMemo:WF,useReducer:T8,useRef:zF,useState:function(){return T8(B1)},useDebugValue:E8,useDeferredValue:function(g){var y=na();return UF(y,Xr.memoizedState,g)},useTransition:function(){var g=T8(B1)[0],y=na().memoizedState;return[g,y]},useMutableSource:EF,useSyncExternalStore:NF,useId:KF,unstable_isNewReconciler:!1},i1e={readContext:ta,useCallback:VF,useContext:ta,useEffect:M8,useImperativeHandle:qF,useInsertionEffect:$F,useLayoutEffect:BF,useMemo:WF,useReducer:P8,useRef:zF,useState:function(){return P8(B1)},useDebugValue:E8,useDeferredValue:function(g){var y=na();return Xr===null?y.memoizedState=g:UF(y,Xr.memoizedState,g)},useTransition:function(){var g=P8(B1)[0],y=na().memoizedState;return[g,y]},useMutableSource:EF,useSyncExternalStore:NF,useId:KF,unstable_isNewReconciler:!1};function Ka(g,y){if(g&&g.defaultProps){y=q({},y),g=g.defaultProps;for(var k in g)y[k]===void 0&&(y[k]=g[k]);return y}return y}function N8(g,y,k,C){y=g.memoizedState,k=k(C,y),k=k==null?y:q({},y,k),g.memoizedState=k,g.lanes===0&&(g.updateQueue.baseState=k)}var w2={isMounted:function(g){return(g=g._reactInternals)?xs(g)===g:!1},enqueueSetState:function(g,y,k){g=g._reactInternals;var C=ho(),N=Xd(g),O=iu(C,N);O.payload=y,k!=null&&(O.callback=k),y=Kd(g,O,N),y!==null&&(Za(y,g,N,C),f2(y,g,N))},enqueueReplaceState:function(g,y,k){g=g._reactInternals;var C=ho(),N=Xd(g),O=iu(C,N);O.tag=1,O.payload=y,k!=null&&(O.callback=k),y=Kd(g,O,N),y!==null&&(Za(y,g,N,C),f2(y,g,N))},enqueueForceUpdate:function(g,y){g=g._reactInternals;var k=ho(),C=Xd(g),N=iu(k,C);N.tag=2,y!=null&&(N.callback=y),y=Kd(g,N,C),y!==null&&(Za(y,g,C,k),f2(y,g,C))}};function XF(g,y,k,C,N,O,W){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(C,O,W):y.prototype&&y.prototype.isPureReactComponent?!P1(k,C)||!P1(N,O):!0}function JF(g,y,k){var C=!1,N=Vd,O=y.contextType;return typeof O=="object"&&O!==null?O=ta(O):(N=Wo(y)?Tf:Wi.current,C=y.contextTypes,O=(C=C!=null)?Hm(g,N):Vd),y=new y(k,O),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=w2,g.stateNode=y,y._reactInternals=g,C&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=N,g.__reactInternalMemoizedMaskedChildContext=O),y}function QF(g,y,k,C){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(k,C),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(k,C),y.state!==g&&w2.enqueueReplaceState(y,y.state,null)}function j8(g,y,k,C){var N=g.stateNode;N.props=k,N.state=g.memoizedState,N.refs={},v8(g);var O=y.contextType;typeof O=="object"&&O!==null?N.context=ta(O):(O=Wo(y)?Tf:Wi.current,N.context=Hm(g,O)),N.state=g.memoizedState,O=y.getDerivedStateFromProps,typeof O=="function"&&(N8(g,y,O,k),N.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(y=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),y!==N.state&&w2.enqueueReplaceState(N,N.state,null),p2(g,k,N,C),N.state=g.memoizedState),typeof N.componentDidMount=="function"&&(g.flags|=4194308)}function Zm(g,y){try{var k="",C=y;do k+=ke(C),C=C.return;while(C);var N=k}catch(O){N=`
Error generating stack: `+O.message+`
`+O.stack}return{value:g,source:y,stack:N,digest:null}}function O8(g,y,k){return{value:g,source:null,stack:k??null,digest:y??null}}function D8(g,y){try{console.error(y.value)}catch(k){setTimeout(function(){throw k})}}var o1e=typeof WeakMap=="function"?WeakMap:Map;function e$(g,y,k){k=iu(-1,k),k.tag=3,k.payload={element:null};var C=y.value;return k.callback=function(){P2||(P2=!0,Y8=C),D8(g,y)},k}function t$(g,y,k){k=iu(-1,k),k.tag=3;var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var N=y.value;k.payload=function(){return C(N)},k.callback=function(){D8(g,y)}}var O=g.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(k.callback=function(){D8(g,y),typeof C!="function"&&(Yd===null?Yd=new Set([this]):Yd.add(this));var W=y.stack;this.componentDidCatch(y.value,{componentStack:W!==null?W:""})}),k}function n$(g,y,k){var C=g.pingCache;if(C===null){C=g.pingCache=new o1e;var N=new Set;C.set(y,N)}else N=C.get(y),N===void 0&&(N=new Set,C.set(y,N));N.has(k)||(N.add(k),g=x1e.bind(null,g,y,k),y.then(g,g))}function r$(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function i$(g,y,k,C,N){return(g.mode&1)===0?(g===y?g.flags|=65536:(g.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(y=iu(-1,1),y.tag=2,Kd(k,y,1))),k.lanes|=1),g):(g.flags|=65536,g.lanes=N,g)}var s1e=P.ReactCurrentOwner,Uo=!1;function uo(g,y,k,C){y.child=g===null?CF(y,null,k,C):Um(y,g.child,k,C)}function o$(g,y,k,C,N){k=k.render;var O=y.ref;return Gm(y,N),C=_8(g,y,k,C,O,N),k=A8(),g!==null&&!Uo?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~N,ou(g,y,N)):(cr&&k&&l8(y),y.flags|=1,uo(g,y,C,N),y.child)}function s$(g,y,k,C,N){if(g===null){var O=k.type;return typeof O=="function"&&!n_(O)&&O.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(y.tag=15,y.type=O,a$(g,y,O,C,N)):(g=D2(k.type,null,C,y,y.mode,N),g.ref=y.ref,g.return=y,y.child=g)}if(O=g.child,(g.lanes&N)===0){var W=O.memoizedProps;if(k=k.compare,k=k!==null?k:P1,k(W,C)&&g.ref===y.ref)return ou(g,y,N)}return y.flags|=1,g=Qd(O,C),g.ref=y.ref,g.return=y,y.child=g}function a$(g,y,k,C,N){if(g!==null){var O=g.memoizedProps;if(P1(O,C)&&g.ref===y.ref)if(Uo=!1,y.pendingProps=C=O,(g.lanes&N)!==0)(g.flags&131072)!==0&&(Uo=!0);else return y.lanes=g.lanes,ou(g,y,N)}return I8(g,y,k,C,N)}function l$(g,y,k){var C=y.pendingProps,N=C.children,O=g!==null?g.memoizedState:null;if(C.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Un(Jm,Ss),Ss|=k;else{if((k&1073741824)===0)return g=O!==null?O.baseLanes|k:k,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null,transitions:null},y.updateQueue=null,Un(Jm,Ss),Ss|=g,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=O!==null?O.baseLanes:k,Un(Jm,Ss),Ss|=C}else O!==null?(C=O.baseLanes|k,y.memoizedState=null):C=k,Un(Jm,Ss),Ss|=C;return uo(g,y,N,k),y.child}function c$(g,y){var k=y.ref;(g===null&&k!==null||g!==null&&g.ref!==k)&&(y.flags|=512,y.flags|=2097152)}function I8(g,y,k,C,N){var O=Wo(k)?Tf:Wi.current;return O=Hm(y,O),Gm(y,N),k=_8(g,y,k,C,O,N),C=A8(),g!==null&&!Uo?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~N,ou(g,y,N)):(cr&&C&&l8(y),y.flags|=1,uo(g,y,k,N),y.child)}function u$(g,y,k,C,N){if(Wo(k)){var O=!0;o2(y)}else O=!1;if(Gm(y,N),y.stateNode===null)S2(g,y),JF(y,k,C),j8(y,k,C,N),C=!0;else if(g===null){var W=y.stateNode,Q=y.memoizedProps;W.props=Q;var se=W.context,Se=k.contextType;typeof Se=="object"&&Se!==null?Se=ta(Se):(Se=Wo(k)?Tf:Wi.current,Se=Hm(y,Se));var Be=k.getDerivedStateFromProps,qe=typeof Be=="function"||typeof W.getSnapshotBeforeUpdate=="function";qe||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Q!==C||se!==Se)&&QF(y,W,C,Se),Ud=!1;var Fe=y.memoizedState;W.state=Fe,p2(y,C,W,N),se=y.memoizedState,Q!==C||Fe!==se||Vo.current||Ud?(typeof Be=="function"&&(N8(y,k,Be,C),se=y.memoizedState),(Q=Ud||XF(y,k,Q,C,Fe,se,Se))?(qe||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(y.flags|=4194308)):(typeof W.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=C,y.memoizedState=se),W.props=C,W.state=se,W.context=Se,C=Q):(typeof W.componentDidMount=="function"&&(y.flags|=4194308),C=!1)}else{W=y.stateNode,AF(g,y),Q=y.memoizedProps,Se=y.type===y.elementType?Q:Ka(y.type,Q),W.props=Se,qe=y.pendingProps,Fe=W.context,se=k.contextType,typeof se=="object"&&se!==null?se=ta(se):(se=Wo(k)?Tf:Wi.current,se=Hm(y,se));var ot=k.getDerivedStateFromProps;(Be=typeof ot=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Q!==qe||Fe!==se)&&QF(y,W,C,se),Ud=!1,Fe=y.memoizedState,W.state=Fe,p2(y,C,W,N);var gt=y.memoizedState;Q!==qe||Fe!==gt||Vo.current||Ud?(typeof ot=="function"&&(N8(y,k,ot,C),gt=y.memoizedState),(Se=Ud||XF(y,k,Se,C,Fe,gt,se)||!1)?(Be||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(C,gt,se),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(C,gt,se)),typeof W.componentDidUpdate=="function"&&(y.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof W.componentDidUpdate!="function"||Q===g.memoizedProps&&Fe===g.memoizedState||(y.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||Q===g.memoizedProps&&Fe===g.memoizedState||(y.flags|=1024),y.memoizedProps=C,y.memoizedState=gt),W.props=C,W.state=gt,W.context=se,C=Se):(typeof W.componentDidUpdate!="function"||Q===g.memoizedProps&&Fe===g.memoizedState||(y.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||Q===g.memoizedProps&&Fe===g.memoizedState||(y.flags|=1024),C=!1)}return R8(g,y,k,C,O,N)}function R8(g,y,k,C,N,O){c$(g,y);var W=(y.flags&128)!==0;if(!C&&!W)return N&&mF(y,k,!1),ou(g,y,O);C=y.stateNode,s1e.current=y;var Q=W&&typeof k.getDerivedStateFromError!="function"?null:C.render();return y.flags|=1,g!==null&&W?(y.child=Um(y,g.child,null,O),y.child=Um(y,null,Q,O)):uo(g,y,Q,O),y.memoizedState=C.state,N&&mF(y,k,!0),y.child}function d$(g){var y=g.stateNode;y.pendingContext?fF(g,y.pendingContext,y.pendingContext!==y.context):y.context&&fF(g,y.context,!1),x8(g,y.containerInfo)}function h$(g,y,k,C,N){return Wm(),h8(N),y.flags|=256,uo(g,y,k,C),y.child}var L8={dehydrated:null,treeContext:null,retryLane:0};function z8(g){return{baseLanes:g,cachePool:null,transitions:null}}function f$(g,y,k){var C=y.pendingProps,N=xr.current,O=!1,W=(y.flags&128)!==0,Q;if((Q=W)||(Q=g!==null&&g.memoizedState===null?!1:(N&2)!==0),Q?(O=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(N|=1),Un(xr,N&1),g===null)return d8(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((y.mode&1)===0?y.lanes=1:g.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(W=C.children,g=C.fallback,O?(C=y.mode,O=y.child,W={mode:"hidden",children:W},(C&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=W):O=I2(W,C,0,null),g=Lf(g,C,k,null),O.return=y,g.return=y,O.sibling=g,y.child=O,y.child.memoizedState=z8(k),y.memoizedState=L8,g):F8(y,W));if(N=g.memoizedState,N!==null&&(Q=N.dehydrated,Q!==null))return a1e(g,y,W,C,Q,N,k);if(O){O=C.fallback,W=y.mode,N=g.child,Q=N.sibling;var se={mode:"hidden",children:C.children};return(W&1)===0&&y.child!==N?(C=y.child,C.childLanes=0,C.pendingProps=se,y.deletions=null):(C=Qd(N,se),C.subtreeFlags=N.subtreeFlags&14680064),Q!==null?O=Qd(Q,O):(O=Lf(O,W,k,null),O.flags|=2),O.return=y,C.return=y,C.sibling=O,y.child=C,C=O,O=y.child,W=g.child.memoizedState,W=W===null?z8(k):{baseLanes:W.baseLanes|k,cachePool:null,transitions:W.transitions},O.memoizedState=W,O.childLanes=g.childLanes&~k,y.memoizedState=L8,C}return O=g.child,g=O.sibling,C=Qd(O,{mode:"visible",children:C.children}),(y.mode&1)===0&&(C.lanes=k),C.return=y,C.sibling=null,g!==null&&(k=y.deletions,k===null?(y.deletions=[g],y.flags|=16):k.push(g)),y.child=C,y.memoizedState=null,C}function F8(g,y){return y=I2({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function k2(g,y,k,C){return C!==null&&h8(C),Um(y,g.child,null,k),g=F8(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function a1e(g,y,k,C,N,O,W){if(k)return y.flags&256?(y.flags&=-257,C=O8(Error(r(422))),k2(g,y,W,C)):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):(O=C.fallback,N=y.mode,C=I2({mode:"visible",children:C.children},N,0,null),O=Lf(O,N,W,null),O.flags|=2,C.return=y,O.return=y,C.sibling=O,y.child=C,(y.mode&1)!==0&&Um(y,g.child,null,W),y.child.memoizedState=z8(W),y.memoizedState=L8,O);if((y.mode&1)===0)return k2(g,y,W,null);if(N.data==="$!"){if(C=N.nextSibling&&N.nextSibling.dataset,C)var Q=C.dgst;return C=Q,O=Error(r(419)),C=O8(O,C,void 0),k2(g,y,W,C)}if(Q=(W&g.childLanes)!==0,Uo||Q){if(C=li,C!==null){switch(W&-W){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(C.suspendedLanes|W))!==0?0:N,N!==0&&N!==O.retryLane&&(O.retryLane=N,ru(g,N),Za(C,g,N,-1))}return t_(),C=O8(Error(r(421))),k2(g,y,W,C)}return N.data==="$?"?(y.flags|=128,y.child=g.child,y=b1e.bind(null,g),N._reactRetry=y,null):(g=O.treeContext,ks=Hd(N.nextSibling),ws=y,cr=!0,Ua=null,g!==null&&(Qs[ea++]=tu,Qs[ea++]=nu,Qs[ea++]=Pf,tu=g.id,nu=g.overflow,Pf=y),y=F8(y,C.children),y.flags|=4096,y)}function p$(g,y,k){g.lanes|=y;var C=g.alternate;C!==null&&(C.lanes|=y),g8(g.return,y,k)}function $8(g,y,k,C,N){var O=g.memoizedState;O===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:C,tail:k,tailMode:N}:(O.isBackwards=y,O.rendering=null,O.renderingStartTime=0,O.last=C,O.tail=k,O.tailMode=N)}function m$(g,y,k){var C=y.pendingProps,N=C.revealOrder,O=C.tail;if(uo(g,y,C.children,k),C=xr.current,(C&2)!==0)C=C&1|2,y.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&p$(g,k,y);else if(g.tag===19)p$(g,k,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}C&=1}if(Un(xr,C),(y.mode&1)===0)y.memoizedState=null;else switch(N){case"forwards":for(k=y.child,N=null;k!==null;)g=k.alternate,g!==null&&m2(g)===null&&(N=k),k=k.sibling;k=N,k===null?(N=y.child,y.child=null):(N=k.sibling,k.sibling=null),$8(y,!1,N,k,O);break;case"backwards":for(k=null,N=y.child,y.child=null;N!==null;){if(g=N.alternate,g!==null&&m2(g)===null){y.child=N;break}g=N.sibling,N.sibling=k,k=N,N=g}$8(y,!0,k,null,O);break;case"together":$8(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function S2(g,y){(y.mode&1)===0&&g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2)}function ou(g,y,k){if(g!==null&&(y.dependencies=g.dependencies),Of|=y.lanes,(k&y.childLanes)===0)return null;if(g!==null&&y.child!==g.child)throw Error(r(153));if(y.child!==null){for(g=y.child,k=Qd(g,g.pendingProps),y.child=k,k.return=y;g.sibling!==null;)g=g.sibling,k=k.sibling=Qd(g,g.pendingProps),k.return=y;k.sibling=null}return y.child}function l1e(g,y,k){switch(y.tag){case 3:d$(y),Wm();break;case 5:MF(y);break;case 1:Wo(y.type)&&o2(y);break;case 4:x8(y,y.stateNode.containerInfo);break;case 10:var C=y.type._context,N=y.memoizedProps.value;Un(d2,C._currentValue),C._currentValue=N;break;case 13:if(C=y.memoizedState,C!==null)return C.dehydrated!==null?(Un(xr,xr.current&1),y.flags|=128,null):(k&y.child.childLanes)!==0?f$(g,y,k):(Un(xr,xr.current&1),g=ou(g,y,k),g!==null?g.sibling:null);Un(xr,xr.current&1);break;case 19:if(C=(k&y.childLanes)!==0,(g.flags&128)!==0){if(C)return m$(g,y,k);y.flags|=128}if(N=y.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Un(xr,xr.current),C)break;return null;case 22:case 23:return y.lanes=0,l$(g,y,k)}return ou(g,y,k)}var g$,B8,y$,v$;g$=function(g,y){for(var k=y.child;k!==null;){if(k.tag===5||k.tag===6)g.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===y)break;for(;k.sibling===null;){if(k.return===null||k.return===y)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},B8=function(){},y$=function(g,y,k,C){var N=g.memoizedProps;if(N!==C){g=y.stateNode,Nf(ql.current);var O=null;switch(k){case"input":N=ie(g,N),C=ie(g,C),O=[];break;case"select":N=q({},N,{value:void 0}),C=q({},C,{value:void 0}),O=[];break;case"textarea":N=at(g,N),C=at(g,C),O=[];break;default:typeof N.onClick!="function"&&typeof C.onClick=="function"&&(g.onclick=n2)}Xt(k,C);var W;k=null;for(Se in N)if(!C.hasOwnProperty(Se)&&N.hasOwnProperty(Se)&&N[Se]!=null)if(Se==="style"){var Q=N[Se];for(W in Q)Q.hasOwnProperty(W)&&(k||(k={}),k[W]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(o.hasOwnProperty(Se)?O||(O=[]):(O=O||[]).push(Se,null));for(Se in C){var se=C[Se];if(Q=N?.[Se],C.hasOwnProperty(Se)&&se!==Q&&(se!=null||Q!=null))if(Se==="style")if(Q){for(W in Q)!Q.hasOwnProperty(W)||se&&se.hasOwnProperty(W)||(k||(k={}),k[W]="");for(W in se)se.hasOwnProperty(W)&&Q[W]!==se[W]&&(k||(k={}),k[W]=se[W])}else k||(O||(O=[]),O.push(Se,k)),k=se;else Se==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,Q=Q?Q.__html:void 0,se!=null&&Q!==se&&(O=O||[]).push(Se,se)):Se==="children"?typeof se!="string"&&typeof se!="number"||(O=O||[]).push(Se,""+se):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(o.hasOwnProperty(Se)?(se!=null&&Se==="onScroll"&&tr("scroll",g),O||Q===se||(O=[])):(O=O||[]).push(Se,se))}k&&(O=O||[]).push("style",k);var Se=O;(y.updateQueue=Se)&&(y.flags|=4)}},v$=function(g,y,k,C){k!==C&&(y.flags|=4)};function q1(g,y){if(!cr)switch(g.tailMode){case"hidden":y=g.tail;for(var k=null;y!==null;)y.alternate!==null&&(k=y),y=y.sibling;k===null?g.tail=null:k.sibling=null;break;case"collapsed":k=g.tail;for(var C=null;k!==null;)k.alternate!==null&&(C=k),k=k.sibling;C===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:C.sibling=null}}function Ki(g){var y=g.alternate!==null&&g.alternate.child===g.child,k=0,C=0;if(y)for(var N=g.child;N!==null;)k|=N.lanes|N.childLanes,C|=N.subtreeFlags&14680064,C|=N.flags&14680064,N.return=g,N=N.sibling;else for(N=g.child;N!==null;)k|=N.lanes|N.childLanes,C|=N.subtreeFlags,C|=N.flags,N.return=g,N=N.sibling;return g.subtreeFlags|=C,g.childLanes=k,y}function c1e(g,y,k){var C=y.pendingProps;switch(c8(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(y),null;case 1:return Wo(y.type)&&i2(),Ki(y),null;case 3:return C=y.stateNode,Ym(),nr(Vo),nr(Wi),k8(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(g===null||g.child===null)&&(c2(y)?y.flags|=4:g===null||g.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Ua!==null&&(J8(Ua),Ua=null))),B8(g,y),Ki(y),null;case 5:b8(y);var N=Nf(z1.current);if(k=y.type,g!==null&&y.stateNode!=null)y$(g,y,k,C,N),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!C){if(y.stateNode===null)throw Error(r(166));return Ki(y),null}if(g=Nf(ql.current),c2(y)){C=y.stateNode,k=y.type;var O=y.memoizedProps;switch(C[Hl]=y,C[O1]=O,g=(y.mode&1)!==0,k){case"dialog":tr("cancel",C),tr("close",C);break;case"iframe":case"object":case"embed":tr("load",C);break;case"video":case"audio":for(N=0;N<E1.length;N++)tr(E1[N],C);break;case"source":tr("error",C);break;case"img":case"image":case"link":tr("error",C),tr("load",C);break;case"details":tr("toggle",C);break;case"input":de(C,O),tr("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!O.multiple},tr("invalid",C);break;case"textarea":Ze(C,O),tr("invalid",C)}Xt(k,O),N=null;for(var W in O)if(O.hasOwnProperty(W)){var Q=O[W];W==="children"?typeof Q=="string"?C.textContent!==Q&&(O.suppressHydrationWarning!==!0&&t2(C.textContent,Q,g),N=["children",Q]):typeof Q=="number"&&C.textContent!==""+Q&&(O.suppressHydrationWarning!==!0&&t2(C.textContent,Q,g),N=["children",""+Q]):o.hasOwnProperty(W)&&Q!=null&&W==="onScroll"&&tr("scroll",C)}switch(k){case"input":nt(C),Pe(C,O,!0);break;case"textarea":nt(C),bt(C);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(C.onclick=n2)}C=N,y.updateQueue=C,C!==null&&(y.flags|=4)}else{W=N.nodeType===9?N:N.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=ge(k)),g==="http://www.w3.org/1999/xhtml"?k==="script"?(g=W.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof C.is=="string"?g=W.createElement(k,{is:C.is}):(g=W.createElement(k),k==="select"&&(W=g,C.multiple?W.multiple=!0:C.size&&(W.size=C.size))):g=W.createElementNS(g,k),g[Hl]=y,g[O1]=C,g$(g,y,!1,!1),y.stateNode=g;e:{switch(W=Rr(k,C),k){case"dialog":tr("cancel",g),tr("close",g),N=C;break;case"iframe":case"object":case"embed":tr("load",g),N=C;break;case"video":case"audio":for(N=0;N<E1.length;N++)tr(E1[N],g);N=C;break;case"source":tr("error",g),N=C;break;case"img":case"image":case"link":tr("error",g),tr("load",g),N=C;break;case"details":tr("toggle",g),N=C;break;case"input":de(g,C),N=ie(g,C),tr("invalid",g);break;case"option":N=C;break;case"select":g._wrapperState={wasMultiple:!!C.multiple},N=q({},C,{value:void 0}),tr("invalid",g);break;case"textarea":Ze(g,C),N=at(g,C),tr("invalid",g);break;default:N=C}Xt(k,N),Q=N;for(O in Q)if(Q.hasOwnProperty(O)){var se=Q[O];O==="style"?Yr(g,se):O==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&Ct(g,se)):O==="children"?typeof se=="string"?(k!=="textarea"||se!=="")&&Mt(g,se):typeof se=="number"&&Mt(g,""+se):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(o.hasOwnProperty(O)?se!=null&&O==="onScroll"&&tr("scroll",g):se!=null&&_(g,O,se,W))}switch(k){case"input":nt(g),Pe(g,C,!1);break;case"textarea":nt(g),bt(g);break;case"option":C.value!=null&&g.setAttribute("value",""+Me(C.value));break;case"select":g.multiple=!!C.multiple,O=C.value,O!=null?Ne(g,!!C.multiple,O,!1):C.defaultValue!=null&&Ne(g,!!C.multiple,C.defaultValue,!0);break;default:typeof N.onClick=="function"&&(g.onclick=n2)}switch(k){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Ki(y),null;case 6:if(g&&y.stateNode!=null)v$(g,y,g.memoizedProps,C);else{if(typeof C!="string"&&y.stateNode===null)throw Error(r(166));if(k=Nf(z1.current),Nf(ql.current),c2(y)){if(C=y.stateNode,k=y.memoizedProps,C[Hl]=y,(O=C.nodeValue!==k)&&(g=ws,g!==null))switch(g.tag){case 3:t2(C.nodeValue,k,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&t2(C.nodeValue,k,(g.mode&1)!==0)}O&&(y.flags|=4)}else C=(k.nodeType===9?k:k.ownerDocument).createTextNode(C),C[Hl]=y,y.stateNode=C}return Ki(y),null;case 13:if(nr(xr),C=y.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(cr&&ks!==null&&(y.mode&1)!==0&&(y.flags&128)===0)wF(),Wm(),y.flags|=98560,O=!1;else if(O=c2(y),C!==null&&C.dehydrated!==null){if(g===null){if(!O)throw Error(r(318));if(O=y.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(r(317));O[Hl]=y}else Wm(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Ki(y),O=!1}else Ua!==null&&(J8(Ua),Ua=null),O=!0;if(!O)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=k,y):(C=C!==null,C!==(g!==null&&g.memoizedState!==null)&&C&&(y.child.flags|=8192,(y.mode&1)!==0&&(g===null||(xr.current&1)!==0?Jr===0&&(Jr=3):t_())),y.updateQueue!==null&&(y.flags|=4),Ki(y),null);case 4:return Ym(),B8(g,y),g===null&&N1(y.stateNode.containerInfo),Ki(y),null;case 10:return m8(y.type._context),Ki(y),null;case 17:return Wo(y.type)&&i2(),Ki(y),null;case 19:if(nr(xr),O=y.memoizedState,O===null)return Ki(y),null;if(C=(y.flags&128)!==0,W=O.rendering,W===null)if(C)q1(O,!1);else{if(Jr!==0||g!==null&&(g.flags&128)!==0)for(g=y.child;g!==null;){if(W=m2(g),W!==null){for(y.flags|=128,q1(O,!1),C=W.updateQueue,C!==null&&(y.updateQueue=C,y.flags|=4),y.subtreeFlags=0,C=k,k=y.child;k!==null;)O=k,g=C,O.flags&=14680066,W=O.alternate,W===null?(O.childLanes=0,O.lanes=g,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=W.childLanes,O.lanes=W.lanes,O.child=W.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=W.memoizedProps,O.memoizedState=W.memoizedState,O.updateQueue=W.updateQueue,O.type=W.type,g=W.dependencies,O.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),k=k.sibling;return Un(xr,xr.current&1|2),y.child}g=g.sibling}O.tail!==null&&Wt()>Qm&&(y.flags|=128,C=!0,q1(O,!1),y.lanes=4194304)}else{if(!C)if(g=m2(W),g!==null){if(y.flags|=128,C=!0,k=g.updateQueue,k!==null&&(y.updateQueue=k,y.flags|=4),q1(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!cr)return Ki(y),null}else 2*Wt()-O.renderingStartTime>Qm&&k!==1073741824&&(y.flags|=128,C=!0,q1(O,!1),y.lanes=4194304);O.isBackwards?(W.sibling=y.child,y.child=W):(k=O.last,k!==null?k.sibling=W:y.child=W,O.last=W)}return O.tail!==null?(y=O.tail,O.rendering=y,O.tail=y.sibling,O.renderingStartTime=Wt(),y.sibling=null,k=xr.current,Un(xr,C?k&1|2:k&1),y):(Ki(y),null);case 22:case 23:return e_(),C=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==C&&(y.flags|=8192),C&&(y.mode&1)!==0?(Ss&1073741824)!==0&&(Ki(y),y.subtreeFlags&6&&(y.flags|=8192)):Ki(y),null;case 24:return null;case 25:return null}throw Error(r(156,y.tag))}function u1e(g,y){switch(c8(y),y.tag){case 1:return Wo(y.type)&&i2(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return Ym(),nr(Vo),nr(Wi),k8(),g=y.flags,(g&65536)!==0&&(g&128)===0?(y.flags=g&-65537|128,y):null;case 5:return b8(y),null;case 13:if(nr(xr),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Wm()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return nr(xr),null;case 4:return Ym(),null;case 10:return m8(y.type._context),null;case 22:case 23:return e_(),null;case 24:return null;default:return null}}var C2=!1,Gi=!1,d1e=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Xm(g,y){var k=g.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(C){_r(g,y,C)}else k.current=null}function H8(g,y,k){try{k()}catch(C){_r(g,y,C)}}var x$=!1;function h1e(g,y){if(e8=Vw,g=Xz(),U7(g)){if("selectionStart"in g)var k={start:g.selectionStart,end:g.selectionEnd};else e:{k=(k=g.ownerDocument)&&k.defaultView||window;var C=k.getSelection&&k.getSelection();if(C&&C.rangeCount!==0){k=C.anchorNode;var N=C.anchorOffset,O=C.focusNode;C=C.focusOffset;try{k.nodeType,O.nodeType}catch{k=null;break e}var W=0,Q=-1,se=-1,Se=0,Be=0,qe=g,Fe=null;t:for(;;){for(var ot;qe!==k||N!==0&&qe.nodeType!==3||(Q=W+N),qe!==O||C!==0&&qe.nodeType!==3||(se=W+C),qe.nodeType===3&&(W+=qe.nodeValue.length),(ot=qe.firstChild)!==null;)Fe=qe,qe=ot;for(;;){if(qe===g)break t;if(Fe===k&&++Se===N&&(Q=W),Fe===O&&++Be===C&&(se=W),(ot=qe.nextSibling)!==null)break;qe=Fe,Fe=qe.parentNode}qe=ot}k=Q===-1||se===-1?null:{start:Q,end:se}}else k=null}k=k||{start:0,end:0}}else k=null;for(t8={focusedElem:g,selectionRange:k},Vw=!1,dt=y;dt!==null;)if(y=dt,g=y.child,(y.subtreeFlags&1028)!==0&&g!==null)g.return=y,dt=g;else for(;dt!==null;){y=dt;try{var gt=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var vt=gt.memoizedProps,Nr=gt.memoizedState,ye=y.stateNode,he=ye.getSnapshotBeforeUpdate(y.elementType===y.type?vt:Ka(y.type,vt),Nr);ye.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var we=y.stateNode.containerInfo;we.nodeType===1?we.textContent="":we.nodeType===9&&we.documentElement&&we.removeChild(we.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ke){_r(y,y.return,Ke)}if(g=y.sibling,g!==null){g.return=y.return,dt=g;break}dt=y.return}return gt=x$,x$=!1,gt}function V1(g,y,k){var C=y.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var N=C=C.next;do{if((N.tag&g)===g){var O=N.destroy;N.destroy=void 0,O!==void 0&&H8(y,k,O)}N=N.next}while(N!==C)}}function _2(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var k=y=y.next;do{if((k.tag&g)===g){var C=k.create;k.destroy=C()}k=k.next}while(k!==y)}}function q8(g){var y=g.ref;if(y!==null){var k=g.stateNode;g.tag,g=k,typeof y=="function"?y(g):y.current=g}}function b$(g){var y=g.alternate;y!==null&&(g.alternate=null,b$(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&(delete y[Hl],delete y[O1],delete y[o8],delete y[Gge],delete y[Yge])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function w$(g){return g.tag===5||g.tag===3||g.tag===4}function k$(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||w$(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function V8(g,y,k){var C=g.tag;if(C===5||C===6)g=g.stateNode,y?k.nodeType===8?k.parentNode.insertBefore(g,y):k.insertBefore(g,y):(k.nodeType===8?(y=k.parentNode,y.insertBefore(g,k)):(y=k,y.appendChild(g)),k=k._reactRootContainer,k!=null||y.onclick!==null||(y.onclick=n2));else if(C!==4&&(g=g.child,g!==null))for(V8(g,y,k),g=g.sibling;g!==null;)V8(g,y,k),g=g.sibling}function W8(g,y,k){var C=g.tag;if(C===5||C===6)g=g.stateNode,y?k.insertBefore(g,y):k.appendChild(g);else if(C!==4&&(g=g.child,g!==null))for(W8(g,y,k),g=g.sibling;g!==null;)W8(g,y,k),g=g.sibling}var Si=null,Ga=!1;function Gd(g,y,k){for(k=k.child;k!==null;)S$(g,y,k),k=k.sibling}function S$(g,y,k){if(Vi&&typeof Vi.onCommitFiberUnmount=="function")try{Vi.onCommitFiberUnmount(Bl,k)}catch{}switch(k.tag){case 5:Gi||Xm(k,y);case 6:var C=Si,N=Ga;Si=null,Gd(g,y,k),Si=C,Ga=N,Si!==null&&(Ga?(g=Si,k=k.stateNode,g.nodeType===8?g.parentNode.removeChild(k):g.removeChild(k)):Si.removeChild(k.stateNode));break;case 18:Si!==null&&(Ga?(g=Si,k=k.stateNode,g.nodeType===8?i8(g.parentNode,k):g.nodeType===1&&i8(g,k),k1(g)):i8(Si,k.stateNode));break;case 4:C=Si,N=Ga,Si=k.stateNode.containerInfo,Ga=!0,Gd(g,y,k),Si=C,Ga=N;break;case 0:case 11:case 14:case 15:if(!Gi&&(C=k.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){N=C=C.next;do{var O=N,W=O.destroy;O=O.tag,W!==void 0&&((O&2)!==0||(O&4)!==0)&&H8(k,y,W),N=N.next}while(N!==C)}Gd(g,y,k);break;case 1:if(!Gi&&(Xm(k,y),C=k.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=k.memoizedProps,C.state=k.memoizedState,C.componentWillUnmount()}catch(Q){_r(k,y,Q)}Gd(g,y,k);break;case 21:Gd(g,y,k);break;case 22:k.mode&1?(Gi=(C=Gi)||k.memoizedState!==null,Gd(g,y,k),Gi=C):Gd(g,y,k);break;default:Gd(g,y,k)}}function C$(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var k=g.stateNode;k===null&&(k=g.stateNode=new d1e),y.forEach(function(C){var N=w1e.bind(null,g,C);k.has(C)||(k.add(C),C.then(N,N))})}}function Ya(g,y){var k=y.deletions;if(k!==null)for(var C=0;C<k.length;C++){var N=k[C];try{var O=g,W=y,Q=W;e:for(;Q!==null;){switch(Q.tag){case 5:Si=Q.stateNode,Ga=!1;break e;case 3:Si=Q.stateNode.containerInfo,Ga=!0;break e;case 4:Si=Q.stateNode.containerInfo,Ga=!0;break e}Q=Q.return}if(Si===null)throw Error(r(160));S$(O,W,N),Si=null,Ga=!1;var se=N.alternate;se!==null&&(se.return=null),N.return=null}catch(Se){_r(N,y,Se)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)_$(y,g),y=y.sibling}function _$(g,y){var k=g.alternate,C=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(Ya(y,g),Wl(g),C&4){try{V1(3,g,g.return),_2(3,g)}catch(vt){_r(g,g.return,vt)}try{V1(5,g,g.return)}catch(vt){_r(g,g.return,vt)}}break;case 1:Ya(y,g),Wl(g),C&512&&k!==null&&Xm(k,k.return);break;case 5:if(Ya(y,g),Wl(g),C&512&&k!==null&&Xm(k,k.return),g.flags&32){var N=g.stateNode;try{Mt(N,"")}catch(vt){_r(g,g.return,vt)}}if(C&4&&(N=g.stateNode,N!=null)){var O=g.memoizedProps,W=k!==null?k.memoizedProps:O,Q=g.type,se=g.updateQueue;if(g.updateQueue=null,se!==null)try{Q==="input"&&O.type==="radio"&&O.name!=null&&fe(N,O),Rr(Q,W);var Se=Rr(Q,O);for(W=0;W<se.length;W+=2){var Be=se[W],qe=se[W+1];Be==="style"?Yr(N,qe):Be==="dangerouslySetInnerHTML"?Ct(N,qe):Be==="children"?Mt(N,qe):_(N,Be,qe,Se)}switch(Q){case"input":be(N,O);break;case"textarea":ct(N,O);break;case"select":var Fe=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!O.multiple;var ot=O.value;ot!=null?Ne(N,!!O.multiple,ot,!1):Fe!==!!O.multiple&&(O.defaultValue!=null?Ne(N,!!O.multiple,O.defaultValue,!0):Ne(N,!!O.multiple,O.multiple?[]:"",!1))}N[O1]=O}catch(vt){_r(g,g.return,vt)}}break;case 6:if(Ya(y,g),Wl(g),C&4){if(g.stateNode===null)throw Error(r(162));N=g.stateNode,O=g.memoizedProps;try{N.nodeValue=O}catch(vt){_r(g,g.return,vt)}}break;case 3:if(Ya(y,g),Wl(g),C&4&&k!==null&&k.memoizedState.isDehydrated)try{k1(y.containerInfo)}catch(vt){_r(g,g.return,vt)}break;case 4:Ya(y,g),Wl(g);break;case 13:Ya(y,g),Wl(g),N=g.child,N.flags&8192&&(O=N.memoizedState!==null,N.stateNode.isHidden=O,!O||N.alternate!==null&&N.alternate.memoizedState!==null||(G8=Wt())),C&4&&C$(g);break;case 22:if(Be=k!==null&&k.memoizedState!==null,g.mode&1?(Gi=(Se=Gi)||Be,Ya(y,g),Gi=Se):Ya(y,g),Wl(g),C&8192){if(Se=g.memoizedState!==null,(g.stateNode.isHidden=Se)&&!Be&&(g.mode&1)!==0)for(dt=g,Be=g.child;Be!==null;){for(qe=dt=Be;dt!==null;){switch(Fe=dt,ot=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:V1(4,Fe,Fe.return);break;case 1:Xm(Fe,Fe.return);var gt=Fe.stateNode;if(typeof gt.componentWillUnmount=="function"){C=Fe,k=Fe.return;try{y=C,gt.props=y.memoizedProps,gt.state=y.memoizedState,gt.componentWillUnmount()}catch(vt){_r(C,k,vt)}}break;case 5:Xm(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){P$(qe);continue}}ot!==null?(ot.return=Fe,dt=ot):P$(qe)}Be=Be.sibling}e:for(Be=null,qe=g;;){if(qe.tag===5){if(Be===null){Be=qe;try{N=qe.stateNode,Se?(O=N.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(Q=qe.stateNode,se=qe.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null,Q.style.display=Wn("display",W))}catch(vt){_r(g,g.return,vt)}}}else if(qe.tag===6){if(Be===null)try{qe.stateNode.nodeValue=Se?"":qe.memoizedProps}catch(vt){_r(g,g.return,vt)}}else if((qe.tag!==22&&qe.tag!==23||qe.memoizedState===null||qe===g)&&qe.child!==null){qe.child.return=qe,qe=qe.child;continue}if(qe===g)break e;for(;qe.sibling===null;){if(qe.return===null||qe.return===g)break e;Be===qe&&(Be=null),qe=qe.return}Be===qe&&(Be=null),qe.sibling.return=qe.return,qe=qe.sibling}}break;case 19:Ya(y,g),Wl(g),C&4&&C$(g);break;case 21:break;default:Ya(y,g),Wl(g)}}function Wl(g){var y=g.flags;if(y&2){try{e:{for(var k=g.return;k!==null;){if(w$(k)){var C=k;break e}k=k.return}throw Error(r(160))}switch(C.tag){case 5:var N=C.stateNode;C.flags&32&&(Mt(N,""),C.flags&=-33);var O=k$(g);W8(g,O,N);break;case 3:case 4:var W=C.stateNode.containerInfo,Q=k$(g);V8(g,Q,W);break;default:throw Error(r(161))}}catch(se){_r(g,g.return,se)}g.flags&=-3}y&4096&&(g.flags&=-4097)}function f1e(g,y,k){dt=g,A$(g)}function A$(g,y,k){for(var C=(g.mode&1)!==0;dt!==null;){var N=dt,O=N.child;if(N.tag===22&&C){var W=N.memoizedState!==null||C2;if(!W){var Q=N.alternate,se=Q!==null&&Q.memoizedState!==null||Gi;Q=C2;var Se=Gi;if(C2=W,(Gi=se)&&!Se)for(dt=N;dt!==null;)W=dt,se=W.child,W.tag===22&&W.memoizedState!==null?M$(N):se!==null?(se.return=W,dt=se):M$(N);for(;O!==null;)dt=O,A$(O),O=O.sibling;dt=N,C2=Q,Gi=Se}T$(g)}else(N.subtreeFlags&8772)!==0&&O!==null?(O.return=N,dt=O):T$(g)}}function T$(g){for(;dt!==null;){var y=dt;if((y.flags&8772)!==0){var k=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Gi||_2(5,y);break;case 1:var C=y.stateNode;if(y.flags&4&&!Gi)if(k===null)C.componentDidMount();else{var N=y.elementType===y.type?k.memoizedProps:Ka(y.type,k.memoizedProps);C.componentDidUpdate(N,k.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var O=y.updateQueue;O!==null&&PF(y,O,C);break;case 3:var W=y.updateQueue;if(W!==null){if(k=null,y.child!==null)switch(y.child.tag){case 5:k=y.child.stateNode;break;case 1:k=y.child.stateNode}PF(y,W,k)}break;case 5:var Q=y.stateNode;if(k===null&&y.flags&4){k=Q;var se=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&k.focus();break;case"img":se.src&&(k.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var Se=y.alternate;if(Se!==null){var Be=Se.memoizedState;if(Be!==null){var qe=Be.dehydrated;qe!==null&&k1(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Gi||y.flags&512&&q8(y)}catch(Fe){_r(y,y.return,Fe)}}if(y===g){dt=null;break}if(k=y.sibling,k!==null){k.return=y.return,dt=k;break}dt=y.return}}function P$(g){for(;dt!==null;){var y=dt;if(y===g){dt=null;break}var k=y.sibling;if(k!==null){k.return=y.return,dt=k;break}dt=y.return}}function M$(g){for(;dt!==null;){var y=dt;try{switch(y.tag){case 0:case 11:case 15:var k=y.return;try{_2(4,y)}catch(se){_r(y,k,se)}break;case 1:var C=y.stateNode;if(typeof C.componentDidMount=="function"){var N=y.return;try{C.componentDidMount()}catch(se){_r(y,N,se)}}var O=y.return;try{q8(y)}catch(se){_r(y,O,se)}break;case 5:var W=y.return;try{q8(y)}catch(se){_r(y,W,se)}}}catch(se){_r(y,y.return,se)}if(y===g){dt=null;break}var Q=y.sibling;if(Q!==null){Q.return=y.return,dt=Q;break}dt=y.return}}var p1e=Math.ceil,A2=P.ReactCurrentDispatcher,U8=P.ReactCurrentOwner,ra=P.ReactCurrentBatchConfig,pn=0,li=null,Lr=null,Ci=0,Ss=0,Jm=qd(0),Jr=0,W1=null,Of=0,T2=0,K8=0,U1=null,Ko=null,G8=0,Qm=1/0,su=null,P2=!1,Y8=null,Yd=null,M2=!1,Zd=null,E2=0,K1=0,Z8=null,N2=-1,j2=0;function ho(){return(pn&6)!==0?Wt():N2!==-1?N2:N2=Wt()}function Xd(g){return(g.mode&1)===0?1:(pn&2)!==0&&Ci!==0?Ci&-Ci:Xge.transition!==null?(j2===0&&(j2=y1()),j2):(g=bn,g!==0||(g=window.event,g=g===void 0?16:Nz(g.type)),g)}function Za(g,y,k,C){if(50<K1)throw K1=0,Z8=null,Error(r(185));kt(g,k,C),((pn&2)===0||g!==li)&&(g===li&&((pn&2)===0&&(T2|=k),Jr===4&&Jd(g,Ci)),Go(g,C),k===1&&pn===0&&(y.mode&1)===0&&(Qm=Wt()+500,s2&&Wd()))}function Go(g,y){var k=g.callbackNode;_f(g,y);var C=jm(g,g===li?Ci:0);if(C===0)k!==null&&He(k),g.callbackNode=null,g.callbackPriority=0;else if(y=C&-C,g.callbackPriority!==y){if(k!=null&&He(k),y===1)g.tag===0?Zge(N$.bind(null,g)):gF(N$.bind(null,g)),Uge(function(){(pn&6)===0&&Wd()}),k=null;else{switch(Sz(C)){case 1:k=Er;break;case 4:k=co;break;case 16:k=Ho;break;case 536870912:k=vr;break;default:k=Ho}k=F$(k,E$.bind(null,g))}g.callbackPriority=y,g.callbackNode=k}}function E$(g,y){if(N2=-1,j2=0,(pn&6)!==0)throw Error(r(327));var k=g.callbackNode;if(e0()&&g.callbackNode!==k)return null;var C=jm(g,g===li?Ci:0);if(C===0)return null;if((C&30)!==0||(C&g.expiredLanes)!==0||y)y=O2(g,C);else{y=C;var N=pn;pn|=2;var O=O$();(li!==g||Ci!==y)&&(su=null,Qm=Wt()+500,If(g,y));do try{y1e();break}catch(Q){j$(g,Q)}while(!0);p8(),A2.current=O,pn=N,Lr!==null?y=0:(li=null,Ci=0,y=Jr)}if(y!==0){if(y===2&&(N=Jc(g),N!==0&&(C=N,y=X8(g,N))),y===1)throw k=W1,If(g,0),Jd(g,C),Go(g,Wt()),k;if(y===6)Jd(g,C);else{if(N=g.current.alternate,(C&30)===0&&!m1e(N)&&(y=O2(g,C),y===2&&(O=Jc(g),O!==0&&(C=O,y=X8(g,O))),y===1))throw k=W1,If(g,0),Jd(g,C),Go(g,Wt()),k;switch(g.finishedWork=N,g.finishedLanes=C,y){case 0:case 1:throw Error(r(345));case 2:Rf(g,Ko,su);break;case 3:if(Jd(g,C),(C&130023424)===C&&(y=G8+500-Wt(),10<y)){if(jm(g,0)!==0)break;if(N=g.suspendedLanes,(N&C)!==C){ho(),g.pingedLanes|=g.suspendedLanes&N;break}g.timeoutHandle=r8(Rf.bind(null,g,Ko,su),y);break}Rf(g,Ko,su);break;case 4:if(Jd(g,C),(C&4194240)===C)break;for(y=g.eventTimes,N=-1;0<C;){var W=31-qo(C);O=1<<W,W=y[W],W>N&&(N=W),C&=~O}if(C=N,C=Wt()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*p1e(C/1960))-C,10<C){g.timeoutHandle=r8(Rf.bind(null,g,Ko,su),C);break}Rf(g,Ko,su);break;case 5:Rf(g,Ko,su);break;default:throw Error(r(329))}}}return Go(g,Wt()),g.callbackNode===k?E$.bind(null,g):null}function X8(g,y){var k=U1;return g.current.memoizedState.isDehydrated&&(If(g,y).flags|=256),g=O2(g,y),g!==2&&(y=Ko,Ko=k,y!==null&&J8(y)),g}function J8(g){Ko===null?Ko=g:Ko.push.apply(Ko,g)}function m1e(g){for(var y=g;;){if(y.flags&16384){var k=y.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var C=0;C<k.length;C++){var N=k[C],O=N.getSnapshot;N=N.value;try{if(!Wa(O(),N))return!1}catch{return!1}}}if(k=y.child,y.subtreeFlags&16384&&k!==null)k.return=y,y=k;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Jd(g,y){for(y&=~K8,y&=~T2,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var k=31-qo(y),C=1<<k;g[k]=-1,y&=~C}}function N$(g){if((pn&6)!==0)throw Error(r(327));e0();var y=jm(g,0);if((y&1)===0)return Go(g,Wt()),null;var k=O2(g,y);if(g.tag!==0&&k===2){var C=Jc(g);C!==0&&(y=C,k=X8(g,C))}if(k===1)throw k=W1,If(g,0),Jd(g,y),Go(g,Wt()),k;if(k===6)throw Error(r(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,Rf(g,Ko,su),Go(g,Wt()),null}function Q8(g,y){var k=pn;pn|=1;try{return g(y)}finally{pn=k,pn===0&&(Qm=Wt()+500,s2&&Wd())}}function Df(g){Zd!==null&&Zd.tag===0&&(pn&6)===0&&e0();var y=pn;pn|=1;var k=ra.transition,C=bn;try{if(ra.transition=null,bn=1,g)return g()}finally{bn=C,ra.transition=k,pn=y,(pn&6)===0&&Wd()}}function e_(){Ss=Jm.current,nr(Jm)}function If(g,y){g.finishedWork=null,g.finishedLanes=0;var k=g.timeoutHandle;if(k!==-1&&(g.timeoutHandle=-1,Wge(k)),Lr!==null)for(k=Lr.return;k!==null;){var C=k;switch(c8(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&i2();break;case 3:Ym(),nr(Vo),nr(Wi),k8();break;case 5:b8(C);break;case 4:Ym();break;case 13:nr(xr);break;case 19:nr(xr);break;case 10:m8(C.type._context);break;case 22:case 23:e_()}k=k.return}if(li=g,Lr=g=Qd(g.current,null),Ci=Ss=y,Jr=0,W1=null,K8=T2=Of=0,Ko=U1=null,Ef!==null){for(y=0;y<Ef.length;y++)if(k=Ef[y],C=k.interleaved,C!==null){k.interleaved=null;var N=C.next,O=k.pending;if(O!==null){var W=O.next;O.next=N,C.next=W}k.pending=C}Ef=null}return g}function j$(g,y){do{var k=Lr;try{if(p8(),g2.current=b2,y2){for(var C=br.memoizedState;C!==null;){var N=C.queue;N!==null&&(N.pending=null),C=C.next}y2=!1}if(jf=0,ai=Xr=br=null,F1=!1,$1=0,U8.current=null,k===null||k.return===null){Jr=1,W1=y,Lr=null;break}e:{var O=g,W=k.return,Q=k,se=y;if(y=Ci,Q.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var Se=se,Be=Q,qe=Be.tag;if((Be.mode&1)===0&&(qe===0||qe===11||qe===15)){var Fe=Be.alternate;Fe?(Be.updateQueue=Fe.updateQueue,Be.memoizedState=Fe.memoizedState,Be.lanes=Fe.lanes):(Be.updateQueue=null,Be.memoizedState=null)}var ot=r$(W);if(ot!==null){ot.flags&=-257,i$(ot,W,Q,O,y),ot.mode&1&&n$(O,Se,y),y=ot,se=Se;var gt=y.updateQueue;if(gt===null){var vt=new Set;vt.add(se),y.updateQueue=vt}else gt.add(se);break e}else{if((y&1)===0){n$(O,Se,y),t_();break e}se=Error(r(426))}}else if(cr&&Q.mode&1){var Nr=r$(W);if(Nr!==null){(Nr.flags&65536)===0&&(Nr.flags|=256),i$(Nr,W,Q,O,y),h8(Zm(se,Q));break e}}O=se=Zm(se,Q),Jr!==4&&(Jr=2),U1===null?U1=[O]:U1.push(O),O=W;do{switch(O.tag){case 3:O.flags|=65536,y&=-y,O.lanes|=y;var ye=e$(O,se,y);TF(O,ye);break e;case 1:Q=se;var he=O.type,we=O.stateNode;if((O.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Yd===null||!Yd.has(we)))){O.flags|=65536,y&=-y,O.lanes|=y;var Ke=t$(O,Q,y);TF(O,Ke);break e}}O=O.return}while(O!==null)}I$(k)}catch(St){y=St,Lr===k&&k!==null&&(Lr=k=k.return);continue}break}while(!0)}function O$(){var g=A2.current;return A2.current=b2,g===null?b2:g}function t_(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),li===null||(Of&268435455)===0&&(T2&268435455)===0||Jd(li,Ci)}function O2(g,y){var k=pn;pn|=2;var C=O$();(li!==g||Ci!==y)&&(su=null,If(g,y));do try{g1e();break}catch(N){j$(g,N)}while(!0);if(p8(),pn=k,A2.current=C,Lr!==null)throw Error(r(261));return li=null,Ci=0,Jr}function g1e(){for(;Lr!==null;)D$(Lr)}function y1e(){for(;Lr!==null&&!ut();)D$(Lr)}function D$(g){var y=z$(g.alternate,g,Ss);g.memoizedProps=g.pendingProps,y===null?I$(g):Lr=y,U8.current=null}function I$(g){var y=g;do{var k=y.alternate;if(g=y.return,(y.flags&32768)===0){if(k=c1e(k,y,Ss),k!==null){Lr=k;return}}else{if(k=u1e(k,y),k!==null){k.flags&=32767,Lr=k;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Jr=6,Lr=null;return}}if(y=y.sibling,y!==null){Lr=y;return}Lr=y=g}while(y!==null);Jr===0&&(Jr=5)}function Rf(g,y,k){var C=bn,N=ra.transition;try{ra.transition=null,bn=1,v1e(g,y,k,C)}finally{ra.transition=N,bn=C}return null}function v1e(g,y,k,C){do e0();while(Zd!==null);if((pn&6)!==0)throw Error(r(327));k=g.finishedWork;var N=g.finishedLanes;if(k===null)return null;if(g.finishedWork=null,g.finishedLanes=0,k===g.current)throw Error(r(177));g.callbackNode=null,g.callbackPriority=0;var O=k.lanes|k.childLanes;if(Pt(g,O),g===li&&(Lr=li=null,Ci=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||M2||(M2=!0,F$(Ho,function(){return e0(),null})),O=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||O){O=ra.transition,ra.transition=null;var W=bn;bn=1;var Q=pn;pn|=4,U8.current=null,h1e(g,k),_$(k,g),zge(t8),Vw=!!e8,t8=e8=null,g.current=k,f1e(k),An(),pn=Q,bn=W,ra.transition=O}else g.current=k;if(M2&&(M2=!1,Zd=g,E2=N),O=g.pendingLanes,O===0&&(Yd=null),zw(k.stateNode),Go(g,Wt()),y!==null)for(C=g.onRecoverableError,k=0;k<y.length;k++)N=y[k],C(N.value,{componentStack:N.stack,digest:N.digest});if(P2)throw P2=!1,g=Y8,Y8=null,g;return(E2&1)!==0&&g.tag!==0&&e0(),O=g.pendingLanes,(O&1)!==0?g===Z8?K1++:(K1=0,Z8=g):K1=0,Wd(),null}function e0(){if(Zd!==null){var g=Sz(E2),y=ra.transition,k=bn;try{if(ra.transition=null,bn=16>g?16:g,Zd===null)var C=!1;else{if(g=Zd,Zd=null,E2=0,(pn&6)!==0)throw Error(r(331));var N=pn;for(pn|=4,dt=g.current;dt!==null;){var O=dt,W=O.child;if((dt.flags&16)!==0){var Q=O.deletions;if(Q!==null){for(var se=0;se<Q.length;se++){var Se=Q[se];for(dt=Se;dt!==null;){var Be=dt;switch(Be.tag){case 0:case 11:case 15:V1(8,Be,O)}var qe=Be.child;if(qe!==null)qe.return=Be,dt=qe;else for(;dt!==null;){Be=dt;var Fe=Be.sibling,ot=Be.return;if(b$(Be),Be===Se){dt=null;break}if(Fe!==null){Fe.return=ot,dt=Fe;break}dt=ot}}}var gt=O.alternate;if(gt!==null){var vt=gt.child;if(vt!==null){gt.child=null;do{var Nr=vt.sibling;vt.sibling=null,vt=Nr}while(vt!==null)}}dt=O}}if((O.subtreeFlags&2064)!==0&&W!==null)W.return=O,dt=W;else e:for(;dt!==null;){if(O=dt,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:V1(9,O,O.return)}var ye=O.sibling;if(ye!==null){ye.return=O.return,dt=ye;break e}dt=O.return}}var he=g.current;for(dt=he;dt!==null;){W=dt;var we=W.child;if((W.subtreeFlags&2064)!==0&&we!==null)we.return=W,dt=we;else e:for(W=he;dt!==null;){if(Q=dt,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:_2(9,Q)}}catch(St){_r(Q,Q.return,St)}if(Q===W){dt=null;break e}var Ke=Q.sibling;if(Ke!==null){Ke.return=Q.return,dt=Ke;break e}dt=Q.return}}if(pn=N,Wd(),Vi&&typeof Vi.onPostCommitFiberRoot=="function")try{Vi.onPostCommitFiberRoot(Bl,g)}catch{}C=!0}return C}finally{bn=k,ra.transition=y}}return!1}function R$(g,y,k){y=Zm(k,y),y=e$(g,y,1),g=Kd(g,y,1),y=ho(),g!==null&&(kt(g,1,y),Go(g,y))}function _r(g,y,k){if(g.tag===3)R$(g,g,k);else for(;y!==null;){if(y.tag===3){R$(y,g,k);break}else if(y.tag===1){var C=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Yd===null||!Yd.has(C))){g=Zm(k,g),g=t$(y,g,1),y=Kd(y,g,1),g=ho(),y!==null&&(kt(y,1,g),Go(y,g));break}}y=y.return}}function x1e(g,y,k){var C=g.pingCache;C!==null&&C.delete(y),y=ho(),g.pingedLanes|=g.suspendedLanes&k,li===g&&(Ci&k)===k&&(Jr===4||Jr===3&&(Ci&130023424)===Ci&&500>Wt()-G8?If(g,0):K8|=k),Go(g,y)}function L$(g,y){y===0&&((g.mode&1)===0?y=1:(y=Va,Va<<=1,(Va&130023424)===0&&(Va=4194304)));var k=ho();g=ru(g,y),g!==null&&(kt(g,y,k),Go(g,k))}function b1e(g){var y=g.memoizedState,k=0;y!==null&&(k=y.retryLane),L$(g,k)}function w1e(g,y){var k=0;switch(g.tag){case 13:var C=g.stateNode,N=g.memoizedState;N!==null&&(k=N.retryLane);break;case 19:C=g.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(y),L$(g,k)}var z$;z$=function(g,y,k){if(g!==null)if(g.memoizedProps!==y.pendingProps||Vo.current)Uo=!0;else{if((g.lanes&k)===0&&(y.flags&128)===0)return Uo=!1,l1e(g,y,k);Uo=(g.flags&131072)!==0}else Uo=!1,cr&&(y.flags&1048576)!==0&&yF(y,l2,y.index);switch(y.lanes=0,y.tag){case 2:var C=y.type;S2(g,y),g=y.pendingProps;var N=Hm(y,Wi.current);Gm(y,k),N=_8(null,y,C,g,N,k);var O=A8();return y.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Wo(C)?(O=!0,o2(y)):O=!1,y.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,v8(y),N.updater=w2,y.stateNode=N,N._reactInternals=y,j8(y,C,g,k),y=R8(null,y,C,!0,O,k)):(y.tag=0,cr&&O&&l8(y),uo(null,y,N,k),y=y.child),y;case 16:C=y.elementType;e:{switch(S2(g,y),g=y.pendingProps,N=C._init,C=N(C._payload),y.type=C,N=y.tag=S1e(C),g=Ka(C,g),N){case 0:y=I8(null,y,C,g,k);break e;case 1:y=u$(null,y,C,g,k);break e;case 11:y=o$(null,y,C,g,k);break e;case 14:y=s$(null,y,C,Ka(C.type,g),k);break e}throw Error(r(306,C,""))}return y;case 0:return C=y.type,N=y.pendingProps,N=y.elementType===C?N:Ka(C,N),I8(g,y,C,N,k);case 1:return C=y.type,N=y.pendingProps,N=y.elementType===C?N:Ka(C,N),u$(g,y,C,N,k);case 3:e:{if(d$(y),g===null)throw Error(r(387));C=y.pendingProps,O=y.memoizedState,N=O.element,AF(g,y),p2(y,C,null,k);var W=y.memoizedState;if(C=W.element,O.isDehydrated)if(O={element:C,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},y.updateQueue.baseState=O,y.memoizedState=O,y.flags&256){N=Zm(Error(r(423)),y),y=h$(g,y,C,k,N);break e}else if(C!==N){N=Zm(Error(r(424)),y),y=h$(g,y,C,k,N);break e}else for(ks=Hd(y.stateNode.containerInfo.firstChild),ws=y,cr=!0,Ua=null,k=CF(y,null,C,k),y.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Wm(),C===N){y=ou(g,y,k);break e}uo(g,y,C,k)}y=y.child}return y;case 5:return MF(y),g===null&&d8(y),C=y.type,N=y.pendingProps,O=g!==null?g.memoizedProps:null,W=N.children,n8(C,N)?W=null:O!==null&&n8(C,O)&&(y.flags|=32),c$(g,y),uo(g,y,W,k),y.child;case 6:return g===null&&d8(y),null;case 13:return f$(g,y,k);case 4:return x8(y,y.stateNode.containerInfo),C=y.pendingProps,g===null?y.child=Um(y,null,C,k):uo(g,y,C,k),y.child;case 11:return C=y.type,N=y.pendingProps,N=y.elementType===C?N:Ka(C,N),o$(g,y,C,N,k);case 7:return uo(g,y,y.pendingProps,k),y.child;case 8:return uo(g,y,y.pendingProps.children,k),y.child;case 12:return uo(g,y,y.pendingProps.children,k),y.child;case 10:e:{if(C=y.type._context,N=y.pendingProps,O=y.memoizedProps,W=N.value,Un(d2,C._currentValue),C._currentValue=W,O!==null)if(Wa(O.value,W)){if(O.children===N.children&&!Vo.current){y=ou(g,y,k);break e}}else for(O=y.child,O!==null&&(O.return=y);O!==null;){var Q=O.dependencies;if(Q!==null){W=O.child;for(var se=Q.firstContext;se!==null;){if(se.context===C){if(O.tag===1){se=iu(-1,k&-k),se.tag=2;var Se=O.updateQueue;if(Se!==null){Se=Se.shared;var Be=Se.pending;Be===null?se.next=se:(se.next=Be.next,Be.next=se),Se.pending=se}}O.lanes|=k,se=O.alternate,se!==null&&(se.lanes|=k),g8(O.return,k,y),Q.lanes|=k;break}se=se.next}}else if(O.tag===10)W=O.type===y.type?null:O.child;else if(O.tag===18){if(W=O.return,W===null)throw Error(r(341));W.lanes|=k,Q=W.alternate,Q!==null&&(Q.lanes|=k),g8(W,k,y),W=O.sibling}else W=O.child;if(W!==null)W.return=O;else for(W=O;W!==null;){if(W===y){W=null;break}if(O=W.sibling,O!==null){O.return=W.return,W=O;break}W=W.return}O=W}uo(g,y,N.children,k),y=y.child}return y;case 9:return N=y.type,C=y.pendingProps.children,Gm(y,k),N=ta(N),C=C(N),y.flags|=1,uo(g,y,C,k),y.child;case 14:return C=y.type,N=Ka(C,y.pendingProps),N=Ka(C.type,N),s$(g,y,C,N,k);case 15:return a$(g,y,y.type,y.pendingProps,k);case 17:return C=y.type,N=y.pendingProps,N=y.elementType===C?N:Ka(C,N),S2(g,y),y.tag=1,Wo(C)?(g=!0,o2(y)):g=!1,Gm(y,k),JF(y,C,N),j8(y,C,N,k),R8(null,y,C,!0,g,k);case 19:return m$(g,y,k);case 22:return l$(g,y,k)}throw Error(r(156,y.tag))};function F$(g,y){return ae(g,y)}function k1e(g,y,k,C){this.tag=g,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(g,y,k,C){return new k1e(g,y,k,C)}function n_(g){return g=g.prototype,!(!g||!g.isReactComponent)}function S1e(g){if(typeof g=="function")return n_(g)?1:0;if(g!=null){if(g=g.$$typeof,g===D)return 11;if(g===U)return 14}return 2}function Qd(g,y){var k=g.alternate;return k===null?(k=ia(g.tag,y,g.key,g.mode),k.elementType=g.elementType,k.type=g.type,k.stateNode=g.stateNode,k.alternate=g,g.alternate=k):(k.pendingProps=y,k.type=g.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=g.flags&14680064,k.childLanes=g.childLanes,k.lanes=g.lanes,k.child=g.child,k.memoizedProps=g.memoizedProps,k.memoizedState=g.memoizedState,k.updateQueue=g.updateQueue,y=g.dependencies,k.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},k.sibling=g.sibling,k.index=g.index,k.ref=g.ref,k}function D2(g,y,k,C,N,O){var W=2;if(C=g,typeof g=="function")n_(g)&&(W=1);else if(typeof g=="string")W=5;else e:switch(g){case E:return Lf(k.children,N,O,y);case L:W=8,N|=8;break;case $:return g=ia(12,k,y,N|2),g.elementType=$,g.lanes=O,g;case Y:return g=ia(13,k,y,N),g.elementType=Y,g.lanes=O,g;case I:return g=ia(19,k,y,N),g.elementType=I,g.lanes=O,g;case te:return I2(k,N,O,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case z:W=10;break e;case B:W=9;break e;case D:W=11;break e;case U:W=14;break e;case Z:W=16,C=null;break e}throw Error(r(130,g==null?g:typeof g,""))}return y=ia(W,k,y,N),y.elementType=g,y.type=C,y.lanes=O,y}function Lf(g,y,k,C){return g=ia(7,g,C,y),g.lanes=k,g}function I2(g,y,k,C){return g=ia(22,g,C,y),g.elementType=te,g.lanes=k,g.stateNode={isHidden:!1},g}function r_(g,y,k){return g=ia(6,g,null,y),g.lanes=k,g}function i_(g,y,k){return y=ia(4,g.children!==null?g.children:[],g.key,y),y.lanes=k,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function C1e(g,y,k,C,N){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hn(0),this.expirationTimes=hn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.identifierPrefix=C,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function o_(g,y,k,C,N,O,W,Q,se){return g=new C1e(g,y,k,Q,se),y===1?(y=1,O===!0&&(y|=8)):y=0,O=ia(3,null,null,y),g.current=O,O.stateNode=g,O.memoizedState={element:C,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},v8(O),g}function _1e(g,y,k){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:C==null?null:""+C,children:g,containerInfo:y,implementation:k}}function $$(g){if(!g)return Vd;g=g._reactInternals;e:{if(xs(g)!==g||g.tag!==1)throw Error(r(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Wo(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(r(171))}if(g.tag===1){var k=g.type;if(Wo(k))return pF(g,k,y)}return y}function B$(g,y,k,C,N,O,W,Q,se){return g=o_(k,C,!0,g,N,O,W,Q,se),g.context=$$(null),k=g.current,C=ho(),N=Xd(k),O=iu(C,N),O.callback=y??null,Kd(k,O,N),g.current.lanes=N,kt(g,N,C),Go(g,C),g}function R2(g,y,k,C){var N=y.current,O=ho(),W=Xd(N);return k=$$(k),y.context===null?y.context=k:y.pendingContext=k,y=iu(O,W),y.payload={element:g},C=C===void 0?null:C,C!==null&&(y.callback=C),g=Kd(N,y,W),g!==null&&(Za(g,N,W,O),f2(g,N,W)),W}function L2(g){return g=g.current,g.child?(g.child.tag===5,g.child.stateNode):null}function H$(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var k=g.retryLane;g.retryLane=k!==0&&k<y?k:y}}function s_(g,y){H$(g,y),(g=g.alternate)&&H$(g,y)}function A1e(){return null}var q$=typeof reportError=="function"?reportError:function(g){console.error(g)};function a_(g){this._internalRoot=g}z2.prototype.render=a_.prototype.render=function(g){var y=this._internalRoot;if(y===null)throw Error(r(409));R2(g,y,null,null)},z2.prototype.unmount=a_.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var y=g.containerInfo;Df(function(){R2(null,g,null,null)}),y[Qc]=null}};function z2(g){this._internalRoot=g}z2.prototype.unstable_scheduleHydration=function(g){if(g){var y=Az();g={blockedOn:null,target:g,priority:y};for(var k=0;k<Fd.length&&y!==0&&y<Fd[k].priority;k++);Fd.splice(k,0,g),k===0&&Mz(g)}};function l_(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function F2(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function V$(){}function T1e(g,y,k,C,N){if(N){if(typeof C=="function"){var O=C;C=function(){var Se=L2(W);O.call(Se)}}var W=B$(y,C,g,0,null,!1,!1,"",V$);return g._reactRootContainer=W,g[Qc]=W.current,N1(g.nodeType===8?g.parentNode:g),Df(),W}for(;N=g.lastChild;)g.removeChild(N);if(typeof C=="function"){var Q=C;C=function(){var Se=L2(se);Q.call(Se)}}var se=o_(g,0,!1,null,null,!1,!1,"",V$);return g._reactRootContainer=se,g[Qc]=se.current,N1(g.nodeType===8?g.parentNode:g),Df(function(){R2(y,se,k,C)}),se}function $2(g,y,k,C,N){var O=k._reactRootContainer;if(O){var W=O;if(typeof N=="function"){var Q=N;N=function(){var se=L2(W);Q.call(se)}}R2(y,W,g,N)}else W=T1e(k,y,g,N,C);return L2(W)}Cz=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var k=Cf(y.pendingLanes);k!==0&&(ln(y,k|1),Go(y,Wt()),(pn&6)===0&&(Qm=Wt()+500,Wd()))}break;case 13:Df(function(){var C=ru(g,1);if(C!==null){var N=ho();Za(C,g,1,N)}}),s_(g,1)}},O7=function(g){if(g.tag===13){var y=ru(g,134217728);if(y!==null){var k=ho();Za(y,g,134217728,k)}s_(g,134217728)}},_z=function(g){if(g.tag===13){var y=Xd(g),k=ru(g,y);if(k!==null){var C=ho();Za(k,g,y,C)}s_(g,y)}},Az=function(){return bn},Tz=function(g,y){var k=bn;try{return bn=g,y()}finally{bn=k}},$a=function(g,y,k){switch(y){case"input":if(be(g,k),y=k.name,k.type==="radio"&&y!=null){for(k=g;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<k.length;y++){var C=k[y];if(C!==g&&C.form===g.form){var N=r2(C);if(!N)throw Error(r(90));F(C),be(C,N)}}}break;case"textarea":ct(g,k);break;case"select":y=k.value,y!=null&&Ne(g,!!k.multiple,y,!1)}},Qn=Q8,Xs=Df;var P1e={usingClientEntryPoint:!1,Events:[D1,$m,r2,vf,xf,Q8]},G1={findFiberByHostInstance:Af,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M1e={bundleType:G1.bundleType,version:G1.version,rendererPackageName:G1.rendererPackageName,rendererConfig:G1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=kf(g),g===null?null:g.stateNode},findFiberByHostInstance:G1.findFiberByHostInstance||A1e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B2.isDisabled&&B2.supportsFiber)try{Bl=B2.inject(M1e),Vi=B2}catch{}}return Yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P1e,Yo.createPortal=function(g,y){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l_(y))throw Error(r(200));return _1e(g,y,null,k)},Yo.createRoot=function(g,y){if(!l_(g))throw Error(r(299));var k=!1,C="",N=q$;return y!=null&&(y.unstable_strictMode===!0&&(k=!0),y.identifierPrefix!==void 0&&(C=y.identifierPrefix),y.onRecoverableError!==void 0&&(N=y.onRecoverableError)),y=o_(g,1,!1,null,null,k,!1,C,N),g[Qc]=y.current,N1(g.nodeType===8?g.parentNode:g),new a_(y)},Yo.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(r(188)):(g=Object.keys(g).join(","),Error(r(268,g)));return g=kf(y),g=g===null?null:g.stateNode,g},Yo.flushSync=function(g){return Df(g)},Yo.hydrate=function(g,y,k){if(!F2(y))throw Error(r(200));return $2(null,g,y,!0,k)},Yo.hydrateRoot=function(g,y,k){if(!l_(g))throw Error(r(405));var C=k!=null&&k.hydratedSources||null,N=!1,O="",W=q$;if(k!=null&&(k.unstable_strictMode===!0&&(N=!0),k.identifierPrefix!==void 0&&(O=k.identifierPrefix),k.onRecoverableError!==void 0&&(W=k.onRecoverableError)),y=B$(y,null,g,1,k??null,N,!1,O,W),g[Qc]=y.current,N1(g),C)for(g=0;g<C.length;g++)k=C[g],N=k._getVersion,N=N(k._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[k,N]:y.mutableSourceEagerHydrationData.push(k,N);return new z2(y)},Yo.render=function(g,y,k){if(!F2(y))throw Error(r(200));return $2(null,g,y,!1,k)},Yo.unmountComponentAtNode=function(g){if(!F2(g))throw Error(r(40));return g._reactRootContainer?(Df(function(){$2(null,null,g,!1,function(){g._reactRootContainer=null,g[Qc]=null})}),!0):!1},Yo.unstable_batchedUpdates=Q8,Yo.unstable_renderSubtreeIntoContainer=function(g,y,k,C){if(!F2(k))throw Error(r(200));if(g==null||g._reactInternals===void 0)throw Error(r(38));return $2(g,y,k,!1,C)},Yo.version="18.3.1-next-f1338f8080-20240426",Yo}var J$;function vQ(){if(J$)return f_.exports;J$=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),f_.exports=B1e(),f_.exports}var Q$;function H1e(){if(Q$)return H2;Q$=1;var n=vQ();return H2.createRoot=n.createRoot,H2.hydrateRoot=n.hydrateRoot,H2}var q1e=H1e();const V1e=Ia(q1e),W1e=M.createContext(null),g_={didCatch:!1,error:null};let U1e=class extends M.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=g_}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(...e){const{error:r}=this.state;r!==null&&(this.props.onReset?.({args:e,reason:"imperative-api"}),this.setState(g_))}componentDidCatch(e,r){this.props.onError?.(e,r)}componentDidUpdate(e,r){const{didCatch:i}=this.state,{resetKeys:o}=this.props;i&&r.error!==null&&K1e(e.resetKeys,o)&&(this.props.onReset?.({next:o,prev:e.resetKeys,reason:"keys"}),this.setState(g_))}render(){const{children:e,fallbackRender:r,FallbackComponent:i,fallback:o}=this.props,{didCatch:s,error:a}=this.state;let l=e;if(s){const c={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(c);else if(i)l=M.createElement(i,c);else if(o!==void 0)l=o;else throw a}return M.createElement(W1e.Provider,{value:{didCatch:s,error:a,resetErrorBoundary:this.resetErrorBoundary}},l)}};function K1e(n=[],e=[]){return n.length!==e.length||n.some((r,i)=>!Object.is(r,e[i]))}const Bt=n=>typeof n=="string",Z1=()=>{let n,e;const r=new Promise((i,o)=>{n=i,e=o});return r.resolve=n,r.reject=e,r},eB=n=>n==null?"":""+n,G1e=(n,e,r)=>{n.forEach(i=>{e[i]&&(r[i]=e[i])})},Y1e=/###/g,tB=n=>n&&n.indexOf("###")>-1?n.replace(Y1e,"."):n,nB=n=>!n||Bt(n),Tv=(n,e,r)=>{const i=Bt(e)?e.split("."):e;let o=0;for(;o<i.length-1;){if(nB(n))return{};const s=tB(i[o]);!n[s]&&r&&(n[s]=new r),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++o}return nB(n)?{}:{obj:n,k:tB(i[o])}},rB=(n,e,r)=>{const{obj:i,k:o}=Tv(n,e,Object);if(i!==void 0||e.length===1){i[o]=r;return}let s=e[e.length-1],a=e.slice(0,e.length-1),l=Tv(n,a,Object);for(;l.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),l=Tv(n,a,Object),l?.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=r},Z1e=(n,e,r,i)=>{const{obj:o,k:s}=Tv(n,e,Object);o[s]=o[s]||[],o[s].push(r)},OS=(n,e)=>{const{obj:r,k:i}=Tv(n,e);if(r&&Object.prototype.hasOwnProperty.call(r,i))return r[i]},X1e=(n,e,r)=>{const i=OS(n,r);return i!==void 0?i:OS(e,r)},xQ=(n,e,r)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Bt(n[i])||n[i]instanceof String||Bt(e[i])||e[i]instanceof String?r&&(n[i]=e[i]):xQ(n[i],e[i],r):n[i]=e[i]);return n},n0=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var J1e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Q1e=n=>Bt(n)?n.replace(/[&<>"'\/]/g,e=>J1e[e]):n;class eye{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const tye=[" ",",","?","!",";"],nye=new eye(20),rye=(n,e,r)=>{e=e||"",r=r||"";const i=tye.filter(a=>e.indexOf(a)<0&&r.indexOf(a)<0);if(i.length===0)return!0;const o=nye.getRegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!o.test(n);if(!s){const a=n.indexOf(r);a>0&&!o.test(n.substring(0,a))&&(s=!0)}return s},v9=(n,e,r=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(r);let o=n;for(let s=0;s<i.length;){if(!o||typeof o!="object")return;let a,l="";for(let c=s;c<i.length;++c)if(c!==s&&(l+=r),l+=i[c],a=o[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<i.length-1)continue;s+=c-s+1;break}o=a}return o},px=n=>n?.replace("_","-"),iye={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class DS{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||iye,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,i,o){return o&&!this.debug?null:(Bt(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new DS(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new DS(this.logger,e)}}var fc=new DS;let XC=class{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const o=this.observers[i].get(r)||0;this.observers[i].set(r,o+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([o,s])=>{for(let a=0;a<s;a++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,s])=>{for(let a=0;a<s;a++)o.apply(o,[e,...r])})}};class iB extends XC{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,i,o={}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],i&&(Array.isArray(i)?l.push(...i):Bt(i)&&s?l.push(...i.split(s)):l.push(i)));const c=OS(this.data,l);return!c&&!r&&!i&&e.indexOf(".")>-1&&(e=l[0],r=l[1],i=l.slice(2).join(".")),c||!a||!Bt(i)?c:v9(this.data?.[e]?.[r],i,s)}addResource(e,r,i,o,s={silent:!1}){const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[e,r];i&&(l=l.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(l=e.split("."),o=r,r=l[1]),this.addNamespaces(r),rB(this.data,l,o),s.silent||this.emit("added",e,r,i,o)}addResources(e,r,i,o={silent:!1}){for(const s in i)(Bt(i[s])||Array.isArray(i[s]))&&this.addResource(e,r,s,i[s],{silent:!0});o.silent||this.emit("added",e,r,i)}addResourceBundle(e,r,i,o,s,a={silent:!1,skipCopy:!1}){let l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),o=i,i=r,r=l[1]),this.addNamespaces(r);let c=OS(this.data,l)||{};a.skipCopy||(i=JSON.parse(JSON.stringify(i))),o?xQ(c,i,s):c={...c,...i},rB(this.data,l,c),a.silent||this.emit("added",e,r,i)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}}var bQ={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,r,i,o){return n.forEach(s=>{e=this.processors[s]?.process(e,r,i,o)??e}),e}};const wQ=Symbol("i18next/PATH_KEY");function oye(){const n=[],e=Object.create(null);let r;return e.get=(i,o)=>(r?.revoke?.(),o===wQ?n:(n.push(o),r=Proxy.revocable(i,e),r.proxy)),Proxy.revocable(Object.create(null),e).proxy}function x9(n,e){const{[wQ]:r}=n(oye());return r.join(e?.keySeparator??".")}const oB={},y_=n=>!Bt(n)&&typeof n!="boolean"&&typeof n!="number";class IS extends XC{constructor(e,r={}){super(),G1e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const i={...r};if(e==null)return!1;const o=this.resolve(e,i);if(o?.res===void 0)return!1;const s=y_(o.res);return!(i.returnObjects===!1&&s)}extractFromKey(e,r){let i=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let s=r.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!rye(e,i,o);if(a&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Bt(s)?[s]:s};const u=e.split(i);(i!==o||i===o&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(o)}return{key:e,namespaces:Bt(s)?[s]:s}}translate(e,r,i){let o=typeof r=="object"?{...r}:r;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),e==null)return"";typeof e=="function"&&(e=x9(e,{...this.options,...o})),Array.isArray(e)||(e=[String(e)]);const s=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],o),u=c[c.length-1];let d=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=o.lng||this.language,f=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return f?s?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(o)}:`${u}${d}${l}`:s?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(o)}:l;const m=this.resolve(e,o);let v=m?.res;const x=m?.usedKey||l,b=m?.exactUsedKey||l,w=["[object Number]","[object Function]","[object RegExp]"],S=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,P=o.count!==void 0&&!Bt(o.count),A=IS.hasDefaultValue(o),T=P?this.pluralResolver.getSuffix(h,o.count,o):"",E=o.ordinal&&P?this.pluralResolver.getSuffix(h,o.count,{ordinal:!1}):"",L=P&&!o.ordinal&&o.count===0,$=L&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${T}`]||o[`defaultValue${E}`]||o.defaultValue;let z=v;_&&!v&&A&&(z=$);const B=y_(z),D=Object.prototype.toString.apply(z);if(_&&z&&B&&w.indexOf(D)<0&&!(Bt(S)&&Array.isArray(z))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Y=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,z,{...o,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(m.res=Y,m.usedParams=this.getUsedParamsDetails(o),m):Y}if(a){const Y=Array.isArray(z),I=Y?[]:{},U=Y?b:x;for(const Z in z)if(Object.prototype.hasOwnProperty.call(z,Z)){const te=`${U}${a}${Z}`;A&&!v?I[Z]=this.translate(te,{...o,defaultValue:y_($)?$[Z]:void 0,joinArrays:!1,ns:c}):I[Z]=this.translate(te,{...o,joinArrays:!1,ns:c}),I[Z]===te&&(I[Z]=z[Z])}v=I}}else if(_&&Bt(S)&&Array.isArray(v))v=v.join(S),v&&(v=this.extendTranslation(v,e,o,i));else{let Y=!1,I=!1;!this.isValidLookup(v)&&A&&(Y=!0,v=$),this.isValidLookup(v)||(I=!0,v=l);const Z=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:v,te=A&&$!==v&&this.options.updateMissing;if(I||Y||te){if(this.logger.log(te?"updateKey":"missingKey",h,u,l,te?$:v),a){const G=this.resolve(l,{...o,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let J=[];const oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(let G=0;G<oe.length;G++)J.push(oe[G]);else this.options.saveMissingTo==="all"?J=this.languageUtils.toResolveHierarchy(o.lng||this.language):J.push(o.lng||this.language);const q=(G,re,V)=>{const ve=A&&V!==v?V:Z;this.options.missingKeyHandler?this.options.missingKeyHandler(G,u,re,ve,te,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(G,u,re,ve,te,o),this.emit("missingKey",G,u,re,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?J.forEach(G=>{const re=this.pluralResolver.getSuffixes(G,o);L&&o[`defaultValue${this.options.pluralSeparator}zero`]&&re.indexOf(`${this.options.pluralSeparator}zero`)<0&&re.push(`${this.options.pluralSeparator}zero`),re.forEach(V=>{q([G],l+V,o[`defaultValue${V}`]||$)})}):q(J,l,$))}v=this.extendTranslation(v,e,o,m,i),I&&v===l&&this.options.appendNamespaceToMissingKey&&(v=`${u}${d}${l}`),(I||Y)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,Y?v:void 0,o))}return s?(m.res=v,m.usedParams=this.getUsedParamsDetails(o),m):v}extendTranslation(e,r,i,o,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Bt(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let d=i.replace&&!Bt(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,i.lng||this.language||o.usedLng,i),c){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;u<f&&(i.nest=!1)}!i.lng&&o&&o.res&&(i.lng=this.language||o.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>s?.[0]===h[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${r[0]}`),null):this.translate(...h,r),i)),i.interpolation&&this.interpolator.reset()}const a=i.postProcess||this.options.postProcess,l=Bt(a)?[a]:a;return e!=null&&l?.length&&i.applyPostProcessor!==!1&&(e=bQ.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,r={}){let i,o,s,a,l;return Bt(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(c,r),d=u.key;o=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=r.count!==void 0&&!Bt(r.count),m=f&&!r.ordinal&&r.count===0,v=r.context!==void 0&&(Bt(r.context)||typeof r.context=="number")&&r.context!=="",x=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(b=>{this.isValidLookup(i)||(l=b,!oB[`${x[0]}-${b}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(oB[`${x[0]}-${b}`]=!0,this.logger.warn(`key "${o}" for languages "${x.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(w=>{if(this.isValidLookup(i))return;a=w;const S=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(S,d,w,b,r);else{let P;f&&(P=this.pluralResolver.getSuffix(w,r.count,r));const A=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(r.ordinal&&P.indexOf(T)===0&&S.push(d+P.replace(T,this.options.pluralSeparator)),S.push(d+P),m&&S.push(d+A)),v){const E=`${d}${this.options.contextSeparator||"_"}${r.context}`;S.push(E),f&&(r.ordinal&&P.indexOf(T)===0&&S.push(E+P.replace(T,this.options.pluralSeparator)),S.push(E+P),m&&S.push(E+A))}}let _;for(;_=S.pop();)this.isValidLookup(i)||(s=_,i=this.getResource(w,b,_,r))}))})}),{res:i,usedKey:o,exactUsedKey:s,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,i,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,r,i,o):this.resourceStore.getResource(e,r,i,o)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Bt(e.replace);let o=i?e.replace:e;if(i&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!i){o={...o};for(const s of r)delete o[s]}return o}static hasDefaultValue(e){const r="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r===i.substring(0,r.length)&&e[i]!==void 0)return!0;return!1}}class sB{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fc.create("languageUtils")}getScriptPartFromCode(e){if(e=px(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=px(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Bt(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(i=>{if(r)return;const o=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&e.forEach(i=>{if(r)return;const o=this.getScriptPartFromCode(i);if(this.isSupportedCode(o))return r=o;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return r=s;r=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Bt(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let i=e[r];return i||(i=e[this.getScriptPartFromCode(r)]),i||(i=e[this.formatLanguageCode(r)]),i||(i=e[this.getLanguagePartFromCode(r)]),i||(i=e.default),i||[]}toResolveHierarchy(e,r){const i=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),o=[],s=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Bt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Bt(e)&&s(this.formatLanguageCode(e)),i.forEach(a=>{o.indexOf(a)<0&&s(this.formatLanguageCode(a))}),o}}const aB={zero:0,one:1,two:2,few:3,many:4,other:5},lB={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class sye{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=fc.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const i=px(e==="dev"?"en":e),o=r.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(i,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),lB;if(!e.match(/-|_/))return lB;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,r)}return this.pluralRulesCache[s]=a,a}needsPlural(e,r={}){let i=this.getRule(e,r);return i||(i=this.getRule("dev",r)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,r,i={}){return this.getSuffixes(e,i).map(o=>`${r}${o}`)}getSuffixes(e,r={}){let i=this.getRule(e,r);return i||(i=this.getRule("dev",r)),i?i.resolvedOptions().pluralCategories.sort((o,s)=>aB[o]-aB[s]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(e,r,i={}){const o=this.getRule(e,i);return o?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,i))}}const cB=(n,e,r,i=".",o=!0)=>{let s=X1e(n,e,r);return!s&&o&&Bt(r)&&(s=v9(n,r,i),s===void 0&&(s=v9(e,r,i))),s},v_=n=>n.replace(/\$/g,"$$$$");class uB{constructor(e={}){this.logger=fc.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:i,useRawValueToEscape:o,prefix:s,prefixEscaped:a,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:v,nestingSuffixEscaped:x,nestingOptionsSeparator:b,maxReplaces:w,alwaysFormat:S}=e.interpolation;this.escape=r!==void 0?r:Q1e,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?n0(s):a||"{{",this.suffix=l?n0(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=f?n0(f):m||n0("$t("),this.nestingSuffix=v?n0(v):x||n0(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=w||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,i)=>r?.source===i?(r.lastIndex=0,r):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,r,i,o){let s,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const w=cB(r,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,i,{...o,...r,interpolationkey:m}):w}const v=m.split(this.formatSeparator),x=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(cB(r,c,x,this.options.keySeparator,this.options.ignoreJSONStructure),b,i,{...o,...r,interpolationkey:x})};this.resetRegExp();const d=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>v_(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?v_(this.escape(m)):v_(m)}].forEach(m=>{for(l=0;s=m.regex.exec(e);){const v=s[1].trim();if(a=u(v),a===void 0)if(typeof d=="function"){const b=d(e,s,o);a=Bt(b)?b:""}else if(o&&Object.prototype.hasOwnProperty.call(o,v))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),a="";else!Bt(a)&&!this.useRawValueToEscape&&(a=eB(a));const x=m.safeValue(a);if(e=e.replace(s[0],x),h?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=s[0].length):m.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r,i={}){let o,s,a;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,a);const m=f.match(/'/g),v=f.match(/"/g);((m?.length??0)%2===0&&!v||v.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),u&&(a={...u,...a})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${d}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;o=this.nestingRegexp.exec(e);){let c=[];a={...i},a=a.replace&&!Bt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(u!==-1&&(c=o[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),o[1]=o[1].slice(0,u)),s=r(l.call(this,o[1].trim(),a),a),s&&o[0]===e&&!Bt(s))return s;Bt(s)||(s=eB(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),s=""),c.length&&(s=c.reduce((d,h)=>this.format(d,h,i.lng,{...i,interpolationkey:o[1].trim()}),s.trim())),e=e.replace(o[0],s),this.regexp.lastIndex=0}return e}}const aye=n=>{let e=n.toLowerCase().trim();const r={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const o=i[1].substring(0,i[1].length-1);e==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(a=>{if(a){const[l,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},dB=n=>{const e={};return(r,i,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const a=i+JSON.stringify(s);let l=e[a];return l||(l=n(px(i),o),e[a]=l),l(r)}},lye=n=>(e,r,i)=>n(px(r),i)(e);class cye{constructor(e={}){this.logger=fc.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const i=r.cacheInBuiltFormats?dB:lye;this.formats={number:i((o,s)=>{const a=new Intl.NumberFormat(o,{...s});return l=>a.format(l)}),currency:i((o,s)=>{const a=new Intl.NumberFormat(o,{...s,style:"currency"});return l=>a.format(l)}),datetime:i((o,s)=>{const a=new Intl.DateTimeFormat(o,{...s});return l=>a.format(l)}),relativetime:i((o,s)=>{const a=new Intl.RelativeTimeFormat(o,{...s});return l=>a.format(l,s.range||"day")}),list:i((o,s)=>{const a=new Intl.ListFormat(o,{...s});return l=>a.format(l)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=dB(r)}format(e,r,i,o={}){const s=r.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,c)=>{const{formatName:u,formatOptions:d}=aye(c);if(this.formats[u]){let h=l;try{const f=o?.formatParams?.[o.interpolationkey]||{},m=f.locale||f.lng||o.locale||o.lng||i;h=this.formats[u](l,m,{...d,...o,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const uye=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class dye extends XC{constructor(e,r,i,o={}){super(),this.backend=e,this.store=r,this.services=i,this.languageUtils=i.languageUtils,this.options=o,this.logger=fc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,o.backend,o)}queueLoad(e,r,i,o){const s={},a={},l={},c={};return e.forEach(u=>{let d=!0;r.forEach(h=>{const f=`${u}|${h}`;!i.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,d=!1,a[f]===void 0&&(a[f]=!0),s[f]===void 0&&(s[f]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,i){const o=e.split("|"),s=o[0],a=o[1];r&&this.emit("failedLoading",s,a,r),!r&&i&&this.store.addResourceBundle(s,a,i,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&i&&(this.state[e]=0);const l={};this.queue.forEach(c=>{Z1e(c.loaded,[s],a),uye(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,i,o=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:i,tried:o,wait:s,callback:a});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,i,o+1,s*2,a)},s);return}a(u,d)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r,i={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();Bt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Bt(r)&&(r=[r]);const s=this.queueLoad(e,r,i,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,r,i){this.prepareLoading(e,r,{},i)}reload(e,r,i){this.prepareLoading(e,r,{reload:!0},i)}loadOne(e,r=""){const i=e.split("|"),o=i[0],s=i[1];this.read(o,s,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${r}loading namespace ${s} for language ${o} failed`,a),!a&&l&&this.logger.log(`${r}loaded namespace ${s} for language ${o}`,l),this.loaded(e,a,l)})}saveMissing(e,r,i,o,s,a={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${i}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,r,i,o,c):d=u(e,r,i,o),d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}else u(e,r,i,o,l,c)}!e||!e[0]||this.store.addResource(e[0],r,i,o)}}}const x_=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Bt(n[1])&&(e.defaultValue=n[1]),Bt(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const r=n[3]||n[2];Object.keys(r).forEach(i=>{e[i]=r[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),hB=n=>(Bt(n.ns)&&(n.ns=[n.ns]),Bt(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Bt(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),q2=()=>{},hye=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(r=>{typeof n[r]=="function"&&(n[r]=n[r].bind(n))})};class Pv extends XC{constructor(e={},r){if(super(),this.options=hB(e),this.services={},this.logger=fc,this.modules={external:[]},hye(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(Bt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=x_();this.options={...i,...this.options,...hB(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=i.overloadTranslationOptionHandler);const o=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?fc.init(o(this.modules.logger),this.options):fc.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=cye;const d=new sB(this.options);this.store=new iB(this.options.resources,this.options);const h=this.services;h.logger=fc,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new sye(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(h.formatter=o(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new uB(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new dye(o(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(m,...v)=>{this.emit(m,...v)}),this.modules.languageDetector&&(h.languageDetector=o(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=o(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new IS(this.services,this.options),this.translator.on("*",(m,...v)=>{this.emit(m,...v)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,r||(r=q2),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=Z1(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,r=q2){let i=r;const o=Bt(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const s=[],a=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(l=>a(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(l)})}else i(null)}reloadResources(e,r,i){const o=Z1();return typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),i||(i=q2),this.services.backendConnector.reload(e,r,s=>{o.resolve(),i(s)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&bQ.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const i=this.languages[r];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const i=Z1();this.emit("languageChanging",e);const o=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},s=(l,c)=>{c?this.isLanguageChangingTo===e&&(o(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...u)=>this.t(...u)),r&&r(l,(...u)=>this.t(...u))},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=Bt(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Bt(l)?[l]:l);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,d=>{s(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,r,i){const o=(s,a,...l)=>{let c;typeof a!="object"?c=this.options.overloadTranslationOptionHandler([s,a].concat(l)):c={...a},c.lng=c.lng||o.lng,c.lngs=c.lngs||o.lngs,c.ns=c.ns||o.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||o.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(s)?d=s.map(h=>(typeof h=="function"&&(h=x9(h,{...this.options,...a})),`${c.keyPrefix}${u}${h}`)):(typeof s=="function"&&(s=x9(s,{...this.options,...a})),d=c.keyPrefix?`${c.keyPrefix}${u}${s}`:s),this.t(d,c)};return Bt(e)?o.lng=e:o.lngs=e,o.ns=r,o.keyPrefix=i,o}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,e)&&(!o||a(s,e)))}loadNamespaces(e,r){const i=Z1();return this.options.ns?(Bt(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{i.resolve(),r&&r(o)}),i):(r&&r(),Promise.resolve())}loadLanguages(e,r){const i=Z1();Bt(e)&&(e=[e]);const o=this.options.preload||[],s=e.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=o.concat(s),this.loadResources(a=>{i.resolve(),r&&r(a)}),i):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const s=o.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new sB(x_());return e.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){const i=new Pv(e,r);return i.createInstance=Pv.createInstance,i}cloneInstance(e={},r=q2){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},s=new Pv(o);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});s.store=new iB(l,o),s.services.resourceStore=s.store}if(e.interpolation){const c={...x_().interpolation,...this.options.interpolation,...e.interpolation},u={...o,interpolation:c};s.services.interpolator=new uB(u)}return s.translator=new IS(s.services,o),s.translator.on("*",(l,...c)=>{s.emit(l,...c)}),s.init(o,r),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Sr=Pv.createInstance();Sr.createInstance;Sr.dir;Sr.init;Sr.loadResources;Sr.reloadResources;Sr.use;Sr.changeLanguage;Sr.getFixedT;Sr.t;Sr.exists;Sr.setDefaultNamespace;Sr.hasLoadedNamespace;Sr.loadNamespaces;Sr.loadLanguages;const fye=(n,e,r,i)=>{const o=[r,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(o,"warn","react-i18next::",!0);qp(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...o):console?.warn&&console.warn(...o)},fB={},kQ=(n,e,r,i)=>{qp(r)&&fB[r]||(qp(r)&&(fB[r]=new Date),fye(n,e,r,i))},SQ=(n,e)=>()=>{if(n.isInitialized)e();else{const r=()=>{setTimeout(()=>{n.off("initialized",r)},0),e()};n.on("initialized",r)}},b9=(n,e,r)=>{n.loadNamespaces(e,SQ(n,r))},pB=(n,e,r,i)=>{if(qp(r)&&(r=[r]),n.options.preload&&n.options.preload.indexOf(e)>-1)return b9(n,r,i);r.forEach(o=>{n.options.ns.indexOf(o)<0&&n.options.ns.push(o)}),n.loadLanguages(e,SQ(n,i))},pye=(n,e,r={})=>!e.languages||!e.languages.length?(kQ(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:r.lng,precheck:(i,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,n))return!1}}),qp=n=>typeof n=="string",mye=n=>typeof n=="object"&&n!==null,gye=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,yye={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},vye=n=>yye[n],xye=n=>n.replace(gye,vye);let w9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:xye,transDefaultProps:void 0};const bye=(n={})=>{w9={...w9,...n}},wye=()=>w9;let CQ;const kye=n=>{CQ=n},Sye=()=>CQ,Cye={type:"3rdParty",init(n){bye(n.options.react),kye(n)}},_ye=M.createContext();class Aye{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var b_={exports:{}},w_={};var mB;function Tye(){if(mB)return w_;mB=1;var n=Fg();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:e,i=n.useState,o=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function l(h,f){var m=f(),v=i({inst:{value:m,getSnapshot:f}}),x=v[0].inst,b=v[1];return s(function(){x.value=m,x.getSnapshot=f,c(x)&&b({inst:x})},[h,m,f]),o(function(){return c(x)&&b({inst:x}),h(function(){c(x)&&b({inst:x})})},[h]),a(m),m}function c(h){var f=h.getSnapshot;h=h.value;try{var m=f();return!r(h,m)}catch{return!0}}function u(h,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return w_.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,w_}var gB;function _Q(){return gB||(gB=1,b_.exports=Tye()),b_.exports}var Pye=_Q();const Mye=(n,e)=>qp(e)?e:mye(e)&&qp(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,Eye={t:Mye,ready:!1},Nye=()=>()=>{},qt=(n,e={})=>{const{i18n:r}=e,{i18n:i,defaultNS:o}=M.useContext(_ye)||{},s=r||i||Sye();s&&!s.reportNamespaces&&(s.reportNamespaces=new Aye),s||kQ(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const a=M.useMemo(()=>({...wye(),...s?.options?.react,...e}),[s,e]),{useSuspense:l,keyPrefix:c}=a,u=n||o||s?.options?.defaultNS,d=qp(u)?[u]:u||["translation"],h=M.useMemo(()=>d,d);s?.reportNamespaces?.addUsedNamespaces?.(h);const f=M.useRef(0),m=M.useCallback($=>{if(!s)return Nye;const{bindI18n:z,bindI18nStore:B}=a,D=()=>{f.current+=1,$()};return z&&s.on(z,D),B&&s.store.on(B,D),()=>{z&&z.split(" ").forEach(Y=>s.off(Y,D)),B&&B.split(" ").forEach(Y=>s.store.off(Y,D))}},[s,a]),v=M.useRef(),x=M.useCallback(()=>{if(!s)return Eye;const $=!!(s.isInitialized||s.initializedStoreOnce)&&h.every(U=>pye(U,s,a)),z=e.lng||s.language,B=f.current,D=v.current;if(D&&D.ready===$&&D.lng===z&&D.keyPrefix===c&&D.revision===B)return D;const I={t:s.getFixedT(z,a.nsMode==="fallback"?h:h[0],c),ready:$,lng:z,keyPrefix:c,revision:B};return v.current=I,I},[s,h,c,a,e.lng]),[b,w]=M.useState(0),{t:S,ready:_}=Pye.useSyncExternalStore(m,x,x);M.useEffect(()=>{if(s&&!_&&!l){const $=()=>w(z=>z+1);e.lng?pB(s,e.lng,h,$):b9(s,h,$)}},[s,e.lng,h,_,l,b]);const P=s||{},A=M.useRef(null),T=M.useRef(),E=$=>{const z=Object.getOwnPropertyDescriptors($);z.__original&&delete z.__original;const B=Object.create(Object.getPrototypeOf($),z);if(!Object.prototype.hasOwnProperty.call(B,"__original"))try{Object.defineProperty(B,"__original",{value:$,writable:!1,enumerable:!1,configurable:!1})}catch{}return B},L=M.useMemo(()=>{const $=P,z=$?.language;let B=$;$&&(A.current&&A.current.__original===$?T.current!==z?(B=E($),A.current=B,T.current=z):B=A.current:(B=E($),A.current=B,T.current=z));const D=[S,B,_];return D.t=S,D.i18n=B,D.ready=_,D},[S,P,_,P.resolvedLanguage,P.language,P.languages]);if(s&&l&&!_)throw new Promise($=>{const z=()=>$();e.lng?pB(s,e.lng,h,z):b9(s,h,z)});return L};const jye=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oye=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,i)=>i?i.toUpperCase():r.toLowerCase()),yB=n=>{const e=Oye(n);return e.charAt(0).toUpperCase()+e.slice(1)},AQ=(...n)=>n.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim(),Dye=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Iye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rye=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:s,iconNode:a,...l},c)=>M.createElement("svg",{ref:c,...Iye,width:e,height:e,stroke:n,strokeWidth:i?Number(r)*24/Number(e):r,className:AQ("lucide",o),...!s&&!Dye(l)&&{"aria-hidden":"true"},...l},[...a.map(([u,d])=>M.createElement(u,d)),...Array.isArray(s)?s:[s]]));const pt=(n,e)=>{const r=M.forwardRef(({className:i,...o},s)=>M.createElement(Rye,{ref:s,iconNode:e,className:AQ(`lucide-${jye(yB(n))}`,`lucide-${n}`,i),...o}));return r.displayName=yB(n),r};const Lye=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ih=pt("archive",Lye);const zye=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Fye=pt("award",zye);const $ye=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Bye=pt("book-marked",$ye);const Hye=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ac=pt("book-open",Hye);const qye=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Vye=pt("book",qye);const Wye=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Uye=pt("building-2",Wye);const Kye=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Gye=pt("building",Kye);const Yye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],JC=pt("calendar",Yye);const Zye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gj=pt("chart-column",Zye);const Xye=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Jye=pt("chart-pie",Xye);const Qye=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],k9=pt("check",Qye);const eve=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vp=pt("chevron-down",eve);const tve=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],QC=pt("chevron-right",tve);const nve=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],TQ=pt("chevron-up",nve);const rve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ml=pt("circle-alert",rve);const ive=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fu=pt("circle-check-big",ive);const ove=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PQ=pt("circle-question-mark",ove);const sve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ave=pt("circle-x",sve);const lve=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],cve=pt("code-xml",lve);const uve=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MQ=pt("compass",uve);const dve=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hve=pt("copy",dve);const fve=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mx=pt("download",fve);const pve=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],z0=pt("external-link",pve);const mve=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gve=pt("eye-off",mve);const yve=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],e3=pt("eye",yve);const vve=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],t3=pt("file-down",vve);const xve=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],bve=pt("file-pen-line",xve);const wve=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],kve=pt("file-plus",wve);const Sve=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],EQ=pt("file-search",Sve);const Cve=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],_ve=pt("file-stack",Cve);const Ave=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Po=pt("file-text",Ave);const Tve=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],Pve=pt("file-type",Tve);const Mve=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$g=pt("folder-open",Mve);const Eve=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Nve=pt("folder",Eve);const jve=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],Ove=pt("git-compare",jve);const Dve=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ive=pt("hard-drive",Dve);const Rve=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Lve=pt("image",Rve);const zve=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],NQ=pt("languages",zve);const Fve=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],$ve=pt("lightbulb",Fve);const Bve=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hve=pt("loader-circle",Bve);const qve=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Vve=pt("message-circle",qve);const Wve=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],n3=pt("message-square",Wve);const Uve=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Kve=pt("network",Uve);const Gve=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],jQ=pt("pen-tool",Gve);const Yve=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Zve=pt("play",Yve);const Xve=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gx=pt("plus",Xve);const Jve=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],Qve=pt("presentation",Jve);const exe=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],txe=pt("quote",exe);const nxe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ul=pt("refresh-cw",nxe);const rxe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],OQ=pt("rotate-ccw",rxe);const ixe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],r3=pt("save",ixe);const oxe=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],vB=pt("scroll",oxe);const sxe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yj=pt("search",sxe);const axe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vj=pt("settings",axe);const lxe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],DQ=pt("sparkles",lxe);const cxe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xB=pt("square-pen",cxe);const uxe=[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]],dxe=pt("superscript",uxe);const hxe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],dl=pt("tag",hxe);const fxe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pxe=pt("target",fxe);const mxe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gu=pt("trash-2",mxe);const gxe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],IQ=pt("trending-up",gxe);const yxe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xj=pt("triangle-alert",yxe);const vxe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],S9=pt("upload",vxe);const xxe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bxe=pt("user",xxe);const wxe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RS=pt("users",wxe);const kxe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vr=pt("x",kxe),i3=M.createContext(null);i3.displayName="PanelGroupContext";const Tr={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},bj=10,Cp=M.useLayoutEffect,bB=yQ.useId,Sxe=typeof bB=="function"?bB:()=>null;let Cxe=0;function wj(n=null){const e=Sxe(),r=M.useRef(n||e||null);return r.current===null&&(r.current=""+Cxe++),n??r.current}function RQ({children:n,className:e="",collapsedSize:r,collapsible:i,defaultSize:o,forwardedRef:s,id:a,maxSize:l,minSize:c,onCollapse:u,onExpand:d,onResize:h,order:f,style:m,tagName:v="div",...x}){const b=M.useContext(i3);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:w,expandPanel:S,getPanelSize:_,getPanelStyle:P,groupId:A,isPanelCollapsed:T,reevaluatePanelConstraints:E,registerPanel:L,resizePanel:$,unregisterPanel:z}=b,B=wj(a),D=M.useRef({callbacks:{onCollapse:u,onExpand:d,onResize:h},constraints:{collapsedSize:r,collapsible:i,defaultSize:o,maxSize:l,minSize:c},id:B,idIsFromProps:a!==void 0,order:f});M.useRef({didLogMissingDefaultSizeWarning:!1}),Cp(()=>{const{callbacks:I,constraints:U}=D.current,Z={...U};D.current.id=B,D.current.idIsFromProps=a!==void 0,D.current.order=f,I.onCollapse=u,I.onExpand=d,I.onResize=h,U.collapsedSize=r,U.collapsible=i,U.defaultSize=o,U.maxSize=l,U.minSize=c,(Z.collapsedSize!==U.collapsedSize||Z.collapsible!==U.collapsible||Z.maxSize!==U.maxSize||Z.minSize!==U.minSize)&&E(D.current,Z)}),Cp(()=>{const I=D.current;return L(I),()=>{z(I)}},[f,B,L,z]),M.useImperativeHandle(s,()=>({collapse:()=>{w(D.current)},expand:I=>{S(D.current,I)},getId(){return B},getSize(){return _(D.current)},isCollapsed(){return T(D.current)},isExpanded(){return!T(D.current)},resize:I=>{$(D.current,I)}}),[w,S,_,T,B,$]);const Y=P(D.current,o);return M.createElement(v,{...x,children:n,className:e,id:B,style:{...Y,...m},[Tr.groupId]:A,[Tr.panel]:"",[Tr.panelCollapsible]:i||void 0,[Tr.panelId]:B,[Tr.panelSize]:parseFloat(""+Y.flexGrow).toFixed(1)})}const p4=M.forwardRef((n,e)=>M.createElement(RQ,{...n,forwardedRef:e}));RQ.displayName="Panel";p4.displayName="forwardRef(Panel)";let C9=null,m4=-1,Sh=null;function _xe(n,e){if(e){const r=(e&BQ)!==0,i=(e&HQ)!==0,o=(e&qQ)!==0,s=(e&VQ)!==0;if(r)return o?"se-resize":s?"ne-resize":"e-resize";if(i)return o?"sw-resize":s?"nw-resize":"w-resize";if(o)return"s-resize";if(s)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Axe(){Sh!==null&&(document.head.removeChild(Sh),C9=null,Sh=null,m4=-1)}function k_(n,e){var r,i;const o=_xe(n,e);if(C9!==o){if(C9=o,Sh===null&&(Sh=document.createElement("style"),document.head.appendChild(Sh)),m4>=0){var s;(s=Sh.sheet)===null||s===void 0||s.removeRule(m4)}m4=(r=(i=Sh.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function LQ(n){return n.type==="keydown"}function zQ(n){return n.type.startsWith("pointer")}function FQ(n){return n.type.startsWith("mouse")}function o3(n){if(zQ(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(FQ(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function Txe(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Pxe(n,e,r){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function Mxe(n,e){if(n===e)throw new Error("Cannot compare node with itself");const r={a:SB(n),b:SB(e)};let i;for(;r.a.at(-1)===r.b.at(-1);)n=r.a.pop(),e=r.b.pop(),i=n;Kt(i,"Stacking order can only be calculated for elements with a common ancestor");const o={a:kB(wB(r.a)),b:kB(wB(r.b))};if(o.a===o.b){const s=i.childNodes,a={a:r.a.at(-1),b:r.b.at(-1)};let l=s.length;for(;l--;){const c=s[l];if(c===a.a)return 1;if(c===a.b)return-1}}return Math.sign(o.a-o.b)}const Exe=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Nxe(n){var e;const r=getComputedStyle((e=$Q(n))!==null&&e!==void 0?e:n).display;return r==="flex"||r==="inline-flex"}function jxe(n){const e=getComputedStyle(n);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Nxe(n))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Exe.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function wB(n){let e=n.length;for(;e--;){const r=n[e];if(Kt(r,"Missing node"),jxe(r))return r}return null}function kB(n){return n&&Number(getComputedStyle(n).zIndex)||0}function SB(n){const e=[];for(;n;)e.push(n),n=$Q(n);return e}function $Q(n){const{parentNode:e}=n;return e&&e instanceof ShadowRoot?e.host:e}const BQ=1,HQ=2,qQ=4,VQ=8,Oxe=Txe()==="coarse";let gl=[],F0=!1,ap=new Map,s3=new Map;const yx=new Set;function Dxe(n,e,r,i,o){var s;const{ownerDocument:a}=e,l={direction:r,element:e,hitAreaMargins:i,setResizeHandlerState:o},c=(s=ap.get(a))!==null&&s!==void 0?s:0;return ap.set(a,c+1),yx.add(l),LS(),function(){var d;s3.delete(n),yx.delete(l);const h=(d=ap.get(a))!==null&&d!==void 0?d:1;if(ap.set(a,h-1),LS(),h===1&&ap.delete(a),gl.includes(l)){const f=gl.indexOf(l);f>=0&&gl.splice(f,1),Sj(),o("up",!0,null)}}}function Ixe(n){const{target:e}=n,{x:r,y:i}=o3(n);F0=!0,kj({target:e,x:r,y:i}),LS(),gl.length>0&&(zS("down",n),n.preventDefault(),WQ(e)||n.stopImmediatePropagation())}function S_(n){const{x:e,y:r}=o3(n);if(F0&&n.buttons===0&&(F0=!1,zS("up",n)),!F0){const{target:i}=n;kj({target:i,x:e,y:r})}zS("move",n),Sj(),gl.length>0&&n.preventDefault()}function C_(n){const{target:e}=n,{x:r,y:i}=o3(n);s3.clear(),F0=!1,gl.length>0&&(n.preventDefault(),WQ(e)||n.stopImmediatePropagation()),zS("up",n),kj({target:e,x:r,y:i}),Sj(),LS()}function WQ(n){let e=n;for(;e;){if(e.hasAttribute(Tr.resizeHandle))return!0;e=e.parentElement}return!1}function kj({target:n,x:e,y:r}){gl.splice(0);let i=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(i=n),yx.forEach(o=>{const{element:s,hitAreaMargins:a}=o,l=s.getBoundingClientRect(),{bottom:c,left:u,right:d,top:h}=l,f=Oxe?a.coarse:a.fine;if(e>=u-f&&e<=d+f&&r>=h-f&&r<=c+f){if(i!==null&&document.contains(i)&&s!==i&&!s.contains(i)&&!i.contains(s)&&Mxe(i,s)>0){let v=i,x=!1;for(;v&&!v.contains(s);){if(Pxe(v.getBoundingClientRect(),l)){x=!0;break}v=v.parentElement}if(x)return}gl.push(o)}})}function __(n,e){s3.set(n,e)}function Sj(){let n=!1,e=!1;gl.forEach(i=>{const{direction:o}=i;o==="horizontal"?n=!0:e=!0});let r=0;s3.forEach(i=>{r|=i}),n&&e?k_("intersection",r):n?k_("horizontal",r):e?k_("vertical",r):Axe()}let A_=new AbortController;function LS(){A_.abort(),A_=new AbortController;const n={capture:!0,signal:A_.signal};yx.size&&(F0?(gl.length>0&&ap.forEach((e,r)=>{const{body:i}=r;e>0&&(i.addEventListener("contextmenu",C_,n),i.addEventListener("pointerleave",S_,n),i.addEventListener("pointermove",S_,n))}),window.addEventListener("pointerup",C_,n),window.addEventListener("pointercancel",C_,n)):ap.forEach((e,r)=>{const{body:i}=r;e>0&&(i.addEventListener("pointerdown",Ixe,n),i.addEventListener("pointermove",S_,n))}))}function zS(n,e){yx.forEach(r=>{const{setResizeHandlerState:i}=r,o=gl.includes(r);i(n,o,e)})}function Rxe(){const[n,e]=M.useState(0);return M.useCallback(()=>e(r=>r+1),[])}function Kt(n,e){if(!n)throw console.error(e),Error(e)}function Wp(n,e,r=bj){return n.toFixed(r)===e.toFixed(r)?0:n>e?1:-1}function Au(n,e,r=bj){return Wp(n,e,r)===0}function Es(n,e,r){return Wp(n,e,r)===0}function Lxe(n,e,r){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){const o=n[i],s=e[i];if(!Es(o,s,r))return!1}return!0}function E0({panelConstraints:n,panelIndex:e,size:r}){const i=n[e];Kt(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:o=0,collapsible:s,maxSize:a=100,minSize:l=0}=i;if(Wp(r,l)<0)if(s){const c=(o+l)/2;Wp(r,c)<0?r=o:r=l}else r=l;return r=Math.min(a,r),r=parseFloat(r.toFixed(bj)),r}function jy({delta:n,initialLayout:e,panelConstraints:r,pivotIndices:i,prevLayout:o,trigger:s}){if(Es(n,0))return e;const a=[...e],[l,c]=i;Kt(l!=null,"Invalid first pivot index"),Kt(c!=null,"Invalid second pivot index");let u=0;if(s==="keyboard"){{const h=n<0?c:l,f=r[h];Kt(f,`Panel constraints not found for index ${h}`);const{collapsedSize:m=0,collapsible:v,minSize:x=0}=f;if(v){const b=e[h];if(Kt(b!=null,`Previous layout not found for panel index ${h}`),Es(b,m)){const w=x-b;Wp(w,Math.abs(n))>0&&(n=n<0?0-w:w)}}}{const h=n<0?l:c,f=r[h];Kt(f,`No panel constraints found for index ${h}`);const{collapsedSize:m=0,collapsible:v,minSize:x=0}=f;if(v){const b=e[h];if(Kt(b!=null,`Previous layout not found for panel index ${h}`),Es(b,x)){const w=b-m;Wp(w,Math.abs(n))>0&&(n=n<0?0-w:w)}}}}{const h=n<0?1:-1;let f=n<0?c:l,m=0;for(;;){const x=e[f];Kt(x!=null,`Previous layout not found for panel index ${f}`);const w=E0({panelConstraints:r,panelIndex:f,size:100})-x;if(m+=w,f+=h,f<0||f>=r.length)break}const v=Math.min(Math.abs(n),Math.abs(m));n=n<0?0-v:v}{let f=n<0?l:c;for(;f>=0&&f<r.length;){const m=Math.abs(n)-Math.abs(u),v=e[f];Kt(v!=null,`Previous layout not found for panel index ${f}`);const x=v-m,b=E0({panelConstraints:r,panelIndex:f,size:x});if(!Es(v,b)&&(u+=v-b,a[f]=b,u.toPrecision(3).localeCompare(Math.abs(n).toPrecision(3),void 0,{numeric:!0})>=0))break;n<0?f--:f++}}if(Lxe(o,a))return o;{const h=n<0?c:l,f=e[h];Kt(f!=null,`Previous layout not found for panel index ${h}`);const m=f+u,v=E0({panelConstraints:r,panelIndex:h,size:m});if(a[h]=v,!Es(v,m)){let x=m-v,w=n<0?c:l;for(;w>=0&&w<r.length;){const S=a[w];Kt(S!=null,`Previous layout not found for panel index ${w}`);const _=S+x,P=E0({panelConstraints:r,panelIndex:w,size:_});if(Es(S,P)||(x-=P-S,a[w]=P),Es(x,0))break;n>0?w--:w++}}}const d=a.reduce((h,f)=>f+h,0);return Es(d,100)?a:o}function zxe({layout:n,panelsArray:e,pivotIndices:r}){let i=0,o=100,s=0,a=0;const l=r[0];Kt(l!=null,"No pivot index found"),e.forEach((h,f)=>{const{constraints:m}=h,{maxSize:v=100,minSize:x=0}=m;f===l?(i=x,o=v):(s+=x,a+=v)});const c=Math.min(o,100-s),u=Math.max(i,100-a),d=n[l];return{valueMax:c,valueMin:u,valueNow:d}}function vx(n,e=document){return Array.from(e.querySelectorAll(`[${Tr.resizeHandleId}][data-panel-group-id="${n}"]`))}function UQ(n,e,r=document){const o=vx(n,r).findIndex(s=>s.getAttribute(Tr.resizeHandleId)===e);return o??null}function KQ(n,e,r){const i=UQ(n,e,r);return i!=null?[i,i+1]:[-1,-1]}function GQ(n,e=document){var r;if(e instanceof HTMLElement&&(e==null||(r=e.dataset)===null||r===void 0?void 0:r.panelGroupId)==n)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return i||null}function a3(n,e=document){const r=e.querySelector(`[${Tr.resizeHandleId}="${n}"]`);return r||null}function Fxe(n,e,r,i=document){var o,s,a,l;const c=a3(e,i),u=vx(n,i),d=c?u.indexOf(c):-1,h=(o=(s=r[d])===null||s===void 0?void 0:s.id)!==null&&o!==void 0?o:null,f=(a=(l=r[d+1])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null;return[h,f]}function $xe({committedValuesRef:n,eagerValuesRef:e,groupId:r,layout:i,panelDataArray:o,panelGroupElement:s,setLayout:a}){M.useRef({didWarnAboutMissingResizeHandle:!1}),Cp(()=>{if(!s)return;const l=vx(r,s);for(let c=0;c<o.length-1;c++){const{valueMax:u,valueMin:d,valueNow:h}=zxe({layout:i,panelsArray:o,pivotIndices:[c,c+1]}),f=l[c];if(f!=null){const m=o[c];Kt(m,`No panel data found for index "${c}"`),f.setAttribute("aria-controls",m.id),f.setAttribute("aria-valuemax",""+Math.round(u)),f.setAttribute("aria-valuemin",""+Math.round(d)),f.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{l.forEach((c,u)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[r,i,o,s]),M.useEffect(()=>{if(!s)return;const l=e.current;Kt(l,"Eager values not found");const{panelDataArray:c}=l,u=GQ(r,s);Kt(u!=null,`No group found for id "${r}"`);const d=vx(r,s);Kt(d,`No resize handles found for group id "${r}"`);const h=d.map(f=>{const m=f.getAttribute(Tr.resizeHandleId);Kt(m,"Resize handle element has no handle id attribute");const[v,x]=Fxe(r,m,c,s);if(v==null||x==null)return()=>{};const b=w=>{if(!w.defaultPrevented)switch(w.key){case"Enter":{w.preventDefault();const S=c.findIndex(_=>_.id===v);if(S>=0){const _=c[S];Kt(_,`No panel data found for index ${S}`);const P=i[S],{collapsedSize:A=0,collapsible:T,minSize:E=0}=_.constraints;if(P!=null&&T){const L=jy({delta:Es(P,A)?E-A:A-P,initialLayout:i,panelConstraints:c.map($=>$.constraints),pivotIndices:KQ(r,m,s),prevLayout:i,trigger:"keyboard"});i!==L&&a(L)}}break}}};return f.addEventListener("keydown",b),()=>{f.removeEventListener("keydown",b)}});return()=>{h.forEach(f=>f())}},[s,n,e,r,i,o,a])}function CB(n,e){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}function YQ(n,e){const r=n==="horizontal",{x:i,y:o}=o3(e);return r?i:o}function Bxe(n,e,r,i,o){const s=r==="horizontal",a=a3(e,o);Kt(a,`No resize handle element found for id "${e}"`);const l=a.getAttribute(Tr.groupId);Kt(l,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=i;const u=YQ(r,n),d=GQ(l,o);Kt(d,`No group element found for id "${l}"`);const h=d.getBoundingClientRect(),f=s?h.width:h.height;return(u-c)/f*100}function Hxe(n,e,r,i,o,s){if(LQ(n)){const a=r==="horizontal";let l=0;n.shiftKey?l=100:o!=null?l=o:l=10;let c=0;switch(n.key){case"ArrowDown":c=a?0:l;break;case"ArrowLeft":c=a?-l:0;break;case"ArrowRight":c=a?l:0;break;case"ArrowUp":c=a?0:-l;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return i==null?0:Bxe(n,e,r,i,s)}function qxe({panelDataArray:n}){const e=Array(n.length),r=n.map(s=>s.constraints);let i=0,o=100;for(let s=0;s<n.length;s++){const a=r[s];Kt(a,`Panel constraints not found for index ${s}`);const{defaultSize:l}=a;l!=null&&(i++,e[s]=l,o-=l)}for(let s=0;s<n.length;s++){const a=r[s];Kt(a,`Panel constraints not found for index ${s}`);const{defaultSize:l}=a;if(l!=null)continue;const c=n.length-i,u=o/c;i++,e[s]=u,o-=u}return e}function r0(n,e,r){e.forEach((i,o)=>{const s=n[o];Kt(s,`Panel data not found for index ${o}`);const{callbacks:a,constraints:l,id:c}=s,{collapsedSize:u=0,collapsible:d}=l,h=r[c];if(h==null||i!==h){r[c]=i;const{onCollapse:f,onExpand:m,onResize:v}=a;v&&v(i,h),d&&(f||m)&&(m&&(h==null||Au(h,u))&&!Au(i,u)&&m(),f&&(h==null||!Au(h,u))&&Au(i,u)&&f())}})}function V2(n,e){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!=e[r])return!1;return!0}function Vxe({defaultSize:n,dragState:e,layout:r,panelData:i,panelIndex:o,precision:s=3}){const a=r[o];let l;return a==null?l=n!=null?n.toPrecision(s):"1":i.length===1?l="1":l=a.toPrecision(s),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Wxe(n,e=10){let r=null;return(...o)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{n(...o)},e)}}function _B(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,r)=>{localStorage.setItem(e,r)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function ZQ(n){return`react-resizable-panels:${n}`}function XQ(n){return n.map(e=>{const{constraints:r,id:i,idIsFromProps:o,order:s}=e;return o?i:s?`${s}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((e,r)=>e.localeCompare(r)).join(",")}function JQ(n,e){try{const r=ZQ(n),i=e.getItem(r);if(i){const o=JSON.parse(i);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function Uxe(n,e,r){var i,o;const s=(i=JQ(n,r))!==null&&i!==void 0?i:{},a=XQ(e);return(o=s[a])!==null&&o!==void 0?o:null}function Kxe(n,e,r,i,o){var s;const a=ZQ(n),l=XQ(e),c=(s=JQ(n,o))!==null&&s!==void 0?s:{};c[l]={expandToSizes:Object.fromEntries(r.entries()),layout:i};try{o.setItem(a,JSON.stringify(c))}catch(u){console.error(u)}}function AB({layout:n,panelConstraints:e}){const r=[...n],i=r.reduce((s,a)=>s+a,0);if(r.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${r.map(s=>`${s}%`).join(", ")}`);if(!Es(i,100)&&r.length>0)for(let s=0;s<e.length;s++){const a=r[s];Kt(a!=null,`No layout data found for index ${s}`);const l=100/i*a;r[s]=l}let o=0;for(let s=0;s<e.length;s++){const a=r[s];Kt(a!=null,`No layout data found for index ${s}`);const l=E0({panelConstraints:e,panelIndex:s,size:a});a!=l&&(o+=a-l,r[s]=l)}if(!Es(o,0))for(let s=0;s<e.length;s++){const a=r[s];Kt(a!=null,`No layout data found for index ${s}`);const l=a+o,c=E0({panelConstraints:e,panelIndex:s,size:l});if(a!==c&&(o-=c-a,r[s]=c,Es(o,0)))break}return r}const Gxe=100,Oy={getItem:n=>(_B(Oy),Oy.getItem(n)),setItem:(n,e)=>{_B(Oy),Oy.setItem(n,e)}},TB={};function QQ({autoSaveId:n=null,children:e,className:r="",direction:i,forwardedRef:o,id:s=null,onLayout:a=null,keyboardResizeBy:l=null,storage:c=Oy,style:u,tagName:d="div",...h}){const f=wj(s),m=M.useRef(null),[v,x]=M.useState(null),[b,w]=M.useState([]),S=Rxe(),_=M.useRef({}),P=M.useRef(new Map),A=M.useRef(0),T=M.useRef({autoSaveId:n,direction:i,dragState:v,id:f,keyboardResizeBy:l,onLayout:a,storage:c}),E=M.useRef({layout:b,panelDataArray:[],panelDataArrayChanged:!1});M.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),M.useImperativeHandle(o,()=>({getId:()=>T.current.id,getLayout:()=>{const{layout:V}=E.current;return V},setLayout:V=>{const{onLayout:ve}=T.current,{layout:ke,panelDataArray:pe}=E.current,me=AB({layout:V,panelConstraints:pe.map(Me=>Me.constraints)});CB(ke,me)||(w(me),E.current.layout=me,ve&&ve(me),r0(pe,me,_.current))}}),[]),Cp(()=>{T.current.autoSaveId=n,T.current.direction=i,T.current.dragState=v,T.current.id=f,T.current.onLayout=a,T.current.storage=c}),$xe({committedValuesRef:T,eagerValuesRef:E,groupId:f,layout:b,panelDataArray:E.current.panelDataArray,setLayout:w,panelGroupElement:m.current}),M.useEffect(()=>{const{panelDataArray:V}=E.current;if(n){if(b.length===0||b.length!==V.length)return;let ve=TB[n];ve==null&&(ve=Wxe(Kxe,Gxe),TB[n]=ve);const ke=[...V],pe=new Map(P.current);ve(n,ke,pe,b,c)}},[n,b,c]),M.useEffect(()=>{});const L=M.useCallback(V=>{const{onLayout:ve}=T.current,{layout:ke,panelDataArray:pe}=E.current;if(V.constraints.collapsible){const me=pe.map(nt=>nt.constraints),{collapsedSize:Me=0,panelSize:le,pivotIndices:ze}=zf(pe,V,ke);if(Kt(le!=null,`Panel size not found for panel "${V.id}"`),!Au(le,Me)){P.current.set(V.id,le);const F=p0(pe,V)===pe.length-1?le-Me:Me-le,X=jy({delta:F,initialLayout:ke,panelConstraints:me,pivotIndices:ze,prevLayout:ke,trigger:"imperative-api"});V2(ke,X)||(w(X),E.current.layout=X,ve&&ve(X),r0(pe,X,_.current))}}},[]),$=M.useCallback((V,ve)=>{const{onLayout:ke}=T.current,{layout:pe,panelDataArray:me}=E.current;if(V.constraints.collapsible){const Me=me.map(ie=>ie.constraints),{collapsedSize:le=0,panelSize:ze=0,minSize:nt=0,pivotIndices:F}=zf(me,V,pe),X=ve??nt;if(Au(ze,le)){const ie=P.current.get(V.id),de=ie!=null&&ie>=X?ie:X,be=p0(me,V)===me.length-1?ze-de:de-ze,Pe=jy({delta:be,initialLayout:pe,panelConstraints:Me,pivotIndices:F,prevLayout:pe,trigger:"imperative-api"});V2(pe,Pe)||(w(Pe),E.current.layout=Pe,ke&&ke(Pe),r0(me,Pe,_.current))}}},[]),z=M.useCallback(V=>{const{layout:ve,panelDataArray:ke}=E.current,{panelSize:pe}=zf(ke,V,ve);return Kt(pe!=null,`Panel size not found for panel "${V.id}"`),pe},[]),B=M.useCallback((V,ve)=>{const{panelDataArray:ke}=E.current,pe=p0(ke,V);return Vxe({defaultSize:ve,dragState:v,layout:b,panelData:ke,panelIndex:pe})},[v,b]),D=M.useCallback(V=>{const{layout:ve,panelDataArray:ke}=E.current,{collapsedSize:pe=0,collapsible:me,panelSize:Me}=zf(ke,V,ve);return Kt(Me!=null,`Panel size not found for panel "${V.id}"`),me===!0&&Au(Me,pe)},[]),Y=M.useCallback(V=>{const{layout:ve,panelDataArray:ke}=E.current,{collapsedSize:pe=0,collapsible:me,panelSize:Me}=zf(ke,V,ve);return Kt(Me!=null,`Panel size not found for panel "${V.id}"`),!me||Wp(Me,pe)>0},[]),I=M.useCallback(V=>{const{panelDataArray:ve}=E.current;ve.push(V),ve.sort((ke,pe)=>{const me=ke.order,Me=pe.order;return me==null&&Me==null?0:me==null?-1:Me==null?1:me-Me}),E.current.panelDataArrayChanged=!0,S()},[S]);Cp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:V,onLayout:ve,storage:ke}=T.current,{layout:pe,panelDataArray:me}=E.current;let Me=null;if(V){const ze=Uxe(V,me,ke);ze&&(P.current=new Map(Object.entries(ze.expandToSizes)),Me=ze.layout)}Me==null&&(Me=qxe({panelDataArray:me}));const le=AB({layout:Me,panelConstraints:me.map(ze=>ze.constraints)});CB(pe,le)||(w(le),E.current.layout=le,ve&&ve(le),r0(me,le,_.current))}}),Cp(()=>{const V=E.current;return()=>{V.layout=[]}},[]);const U=M.useCallback(V=>{let ve=!1;const ke=m.current;return ke&&window.getComputedStyle(ke,null).getPropertyValue("direction")==="rtl"&&(ve=!0),function(me){me.preventDefault();const Me=m.current;if(!Me)return()=>null;const{direction:le,dragState:ze,id:nt,keyboardResizeBy:F,onLayout:X}=T.current,{layout:ie,panelDataArray:de}=E.current,{initialLayout:fe}=ze??{},be=KQ(nt,V,Me);let Pe=Hxe(me,V,le,ze,F,Me);const Ie=le==="horizontal";Ie&&ve&&(Pe=-Pe);const Le=de.map(Ze=>Ze.constraints),Ne=jy({delta:Pe,initialLayout:fe??ie,panelConstraints:Le,pivotIndices:be,prevLayout:ie,trigger:LQ(me)?"keyboard":"mouse-or-touch"}),at=!V2(ie,Ne);(zQ(me)||FQ(me))&&A.current!=Pe&&(A.current=Pe,!at&&Pe!==0?Ie?__(V,Pe<0?BQ:HQ):__(V,Pe<0?qQ:VQ):__(V,0)),at&&(w(Ne),E.current.layout=Ne,X&&X(Ne),r0(de,Ne,_.current))}},[]),Z=M.useCallback((V,ve)=>{const{onLayout:ke}=T.current,{layout:pe,panelDataArray:me}=E.current,Me=me.map(ie=>ie.constraints),{panelSize:le,pivotIndices:ze}=zf(me,V,pe);Kt(le!=null,`Panel size not found for panel "${V.id}"`);const F=p0(me,V)===me.length-1?le-ve:ve-le,X=jy({delta:F,initialLayout:pe,panelConstraints:Me,pivotIndices:ze,prevLayout:pe,trigger:"imperative-api"});V2(pe,X)||(w(X),E.current.layout=X,ke&&ke(X),r0(me,X,_.current))},[]),te=M.useCallback((V,ve)=>{const{layout:ke,panelDataArray:pe}=E.current,{collapsedSize:me=0,collapsible:Me}=ve,{collapsedSize:le=0,collapsible:ze,maxSize:nt=100,minSize:F=0}=V.constraints,{panelSize:X}=zf(pe,V,ke);X!=null&&(Me&&ze&&Au(X,me)?Au(me,le)||Z(V,le):X<F?Z(V,F):X>nt&&Z(V,nt))},[Z]),J=M.useCallback((V,ve)=>{const{direction:ke}=T.current,{layout:pe}=E.current;if(!m.current)return;const me=a3(V,m.current);Kt(me,`Drag handle element not found for id "${V}"`);const Me=YQ(ke,ve);x({dragHandleId:V,dragHandleRect:me.getBoundingClientRect(),initialCursorPosition:Me,initialLayout:pe})},[]),oe=M.useCallback(()=>{x(null)},[]),q=M.useCallback(V=>{const{panelDataArray:ve}=E.current,ke=p0(ve,V);ke>=0&&(ve.splice(ke,1),delete _.current[V.id],E.current.panelDataArrayChanged=!0,S())},[S]),G=M.useMemo(()=>({collapsePanel:L,direction:i,dragState:v,expandPanel:$,getPanelSize:z,getPanelStyle:B,groupId:f,isPanelCollapsed:D,isPanelExpanded:Y,reevaluatePanelConstraints:te,registerPanel:I,registerResizeHandle:U,resizePanel:Z,startDragging:J,stopDragging:oe,unregisterPanel:q,panelGroupElement:m.current}),[L,v,i,$,z,B,f,D,Y,te,I,U,Z,J,oe,q]),re={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return M.createElement(i3.Provider,{value:G},M.createElement(d,{...h,children:e,className:r,id:s,ref:m,style:{...re,...u},[Tr.group]:"",[Tr.groupDirection]:i,[Tr.groupId]:f}))}const eee=M.forwardRef((n,e)=>M.createElement(QQ,{...n,forwardedRef:e}));QQ.displayName="PanelGroup";eee.displayName="forwardRef(PanelGroup)";function p0(n,e){return n.findIndex(r=>r===e||r.id===e.id)}function zf(n,e,r){const i=p0(n,e),s=i===n.length-1?[i-1,i]:[i,i+1],a=r[i];return{...e.constraints,panelSize:a,pivotIndices:s}}function Yxe({disabled:n,handleId:e,resizeHandler:r,panelGroupElement:i}){M.useEffect(()=>{if(n||r==null||i==null)return;const o=a3(e,i);if(o==null)return;const s=a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{a.preventDefault(),r(a);break}case"F6":{a.preventDefault();const l=o.getAttribute(Tr.groupId);Kt(l,`No group element found for id "${l}"`);const c=vx(l,i),u=UQ(l,e,i);Kt(u!==null,`No resize element found for id "${e}"`);const d=a.shiftKey?u>0?u-1:c.length-1:u+1<c.length?u+1:0;c[d].focus();break}}};return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}},[i,n,e,r])}function _9({children:n=null,className:e="",disabled:r=!1,hitAreaMargins:i,id:o,onBlur:s,onClick:a,onDragging:l,onFocus:c,onPointerDown:u,onPointerUp:d,style:h={},tabIndex:f=0,tagName:m="div",...v}){var x,b;const w=M.useRef(null),S=M.useRef({onClick:a,onDragging:l,onPointerDown:u,onPointerUp:d});M.useEffect(()=>{S.current.onClick=a,S.current.onDragging=l,S.current.onPointerDown=u,S.current.onPointerUp=d});const _=M.useContext(i3);if(_===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:P,groupId:A,registerResizeHandle:T,startDragging:E,stopDragging:L,panelGroupElement:$}=_,z=wj(o),[B,D]=M.useState("inactive"),[Y,I]=M.useState(!1),[U,Z]=M.useState(null),te=M.useRef({state:B});Cp(()=>{te.current.state=B}),M.useEffect(()=>{if(r)Z(null);else{const G=T(z);Z(()=>G)}},[r,z,T]);const J=(x=i?.coarse)!==null&&x!==void 0?x:15,oe=(b=i?.fine)!==null&&b!==void 0?b:5;M.useEffect(()=>{if(r||U==null)return;const G=w.current;Kt(G,"Element ref not attached");let re=!1;return Dxe(z,G,P,{coarse:J,fine:oe},(ve,ke,pe)=>{if(!ke){D("inactive");return}switch(ve){case"down":{D("drag"),re=!1,Kt(pe,'Expected event to be defined for "down" action'),E(z,pe);const{onDragging:me,onPointerDown:Me}=S.current;me?.(!0),Me?.();break}case"move":{const{state:me}=te.current;re=!0,me!=="drag"&&D("hover"),Kt(pe,'Expected event to be defined for "move" action'),U(pe);break}case"up":{D("hover"),L();const{onClick:me,onDragging:Me,onPointerUp:le}=S.current;Me?.(!1),le?.(),re||me?.();break}}})},[J,P,r,oe,T,z,U,E,L]),Yxe({disabled:r,handleId:z,resizeHandler:U,panelGroupElement:$});const q={touchAction:"none",userSelect:"none"};return M.createElement(m,{...v,children:n,className:e,id:o,onBlur:()=>{I(!1),s?.()},onFocus:()=>{I(!0),c?.()},ref:w,role:"separator",style:{...q,...h},tabIndex:f,[Tr.groupDirection]:P,[Tr.groupId]:A,[Tr.resizeHandle]:"",[Tr.resizeHandleActive]:B==="drag"?"pointer":Y?"keyboard":void 0,[Tr.resizeHandleEnabled]:!r,[Tr.resizeHandleId]:z,[Tr.resizeHandleState]:B})}_9.displayName="PanelResizeHandle";const Zxe={},PB=n=>{let e;const r=new Set,i=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),r.forEach(v=>v(e,m))}},o=()=>e,c={setState:i,getState:o,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Zxe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=n(i,o,c);return c},Xxe=n=>n?PB(n):PB;var T_={exports:{}},P_={};var MB;function Jxe(){if(MB)return P_;MB=1;var n=Fg(),e=_Q();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var i=typeof Object.is=="function"?Object.is:r,o=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,l=n.useMemo,c=n.useDebugValue;return P_.useSyncExternalStoreWithSelector=function(u,d,h,f,m){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function w(T){if(!S){if(S=!0,_=T,T=f(T),m!==void 0&&x.hasValue){var E=x.value;if(m(E,T))return P=E}return P=T}if(E=P,i(_,T))return E;var L=f(T);return m!==void 0&&m(E,L)?(_=T,E):(_=T,P=L)}var S=!1,_,P,A=h===void 0?null:h;return[function(){return w(d())},A===null?void 0:function(){return w(A())}]},[d,h,f,m]);var b=o(u,v[0],v[1]);return a(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},P_}var EB;function Qxe(){return EB||(EB=1,T_.exports=Jxe()),T_.exports}var tee=Qxe();const ebe=Ia(tee),nee={},{useDebugValue:tbe}=_a,{useSyncExternalStoreWithSelector:nbe}=ebe;let NB=!1;const rbe=n=>n;function ibe(n,e=rbe,r){(nee?"production":void 0)!=="production"&&r&&!NB&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),NB=!0);const i=nbe(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,r);return tbe(i),i}const jB=n=>{(nee?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Xxe(n):n,r=(i,o)=>ibe(e,i,o);return Object.assign(r,e),r},El=n=>n?jB(n):jB,pi=El((n,e)=>({citations:[],filteredCitations:[],selectedCitationId:null,indexedFilePaths:new Set,indexedBibtexKeys:new Set,batchIndexing:{isIndexing:!1,current:0,total:0,skipped:0,indexed:0,errors:[]},searchQuery:"",sortBy:"author",sortOrder:"asc",selectedTags:[],loadBibliography:async r=>{try{const i=await window.electron.bibliography.load(r);if(i.success&&Array.isArray(i.citations))n({citations:i.citations,filteredCitations:i.citations}),e().applyFilters(),await e().refreshIndexedPDFs();else throw console.error("Invalid response from bibliography.load:",i),new Error(i.error||"Failed to load bibliography")}catch(i){throw console.error("Failed to load bibliography:",i),i}},loadBibliographyWithMetadata:async(r,i)=>{try{const o=await window.electron.bibliography.loadWithMetadata({filePath:r,projectPath:i});if(o.success&&Array.isArray(o.citations)){const s=o.citations.filter(a=>a.zoteroAttachments&&a.zoteroAttachments.length>0).length;console.log(` Loaded ${o.citations.length} citations (${s} with Zotero metadata)`),n({citations:o.citations,filteredCitations:o.citations}),e().applyFilters();try{console.log(" About to call refreshIndexedPDFs from loadBibliographyWithMetadata..."),await e().refreshIndexedPDFs(),console.log(" refreshIndexedPDFs completed")}catch(a){console.error(" refreshIndexedPDFs failed (non-blocking):",a)}}else throw console.error("Invalid response from bibliography.loadWithMetadata:",o),new Error(o.error||"Failed to load bibliography with metadata")}catch(o){throw console.error("Failed to load bibliography with metadata:",o),o}},mergeBibliography:async r=>{try{const i=await window.electron.bibliography.load(r);if(!i.success||!Array.isArray(i.citations))throw console.error("Invalid response from bibliography.load:",i),new Error(i.error||"Failed to load bibliography");const{citations:o}=e(),s=i.citations,a=new Set(o.map(d=>d.id)),l=[];let c=0;s.forEach(d=>{a.has(d.id)?(c++,console.log(` Duplicate found: ${d.id} - ${d.title}`)):l.push(d)});const u=[...o,...l];return console.log(" Bibliography merge complete:",{existing:o.length,fromFile:s.length,newAdded:l.length,duplicates:c,total:u.length}),n({citations:u,filteredCitations:u}),e().applyFilters(),{newCitations:l.length,duplicates:c,total:u.length}}catch(i){throw console.error("Failed to merge bibliography:",i),i}},searchCitations:r=>{n({searchQuery:r}),e().applyFilters()},setSortBy:r=>{n({sortBy:r}),e().applyFilters()},toggleSortOrder:()=>{n(r=>({sortOrder:r.sortOrder==="asc"?"desc":"asc"})),e().applyFilters()},applyFilters:()=>{const{citations:r,searchQuery:i,sortBy:o,sortOrder:s,selectedTags:a}=e();let l=r;if(i.trim()){const c=i.toLowerCase();l=r.filter(u=>u.author.toLowerCase().includes(c)||u.title.toLowerCase().includes(c)||u.year.includes(c)||u.tags&&u.tags.some(d=>d.toLowerCase().includes(c))||u.keywords&&u.keywords.toLowerCase().includes(c)||u.notes&&u.notes.toLowerCase().includes(c))}a.length>0&&(l=l.filter(c=>c.tags&&c.tags.some(u=>a.includes(u)))),l=[...l].sort((c,u)=>{let d=0;switch(o){case"author":d=c.author.localeCompare(u.author);break;case"year":d=c.year.localeCompare(u.year);break;case"title":d=c.title.localeCompare(u.title);break}return s==="asc"?d:-d}),n({filteredCitations:l})},selectCitation:r=>{n({selectedCitationId:r})},insertCitation:r=>{const{citations:i}=e(),o=i.find(a=>a.id===r);if(!o)return;const s=`[@${o.id}]`;console.log(" Inserting citation:",s,"for",o.title),window.electron.editor.insertText(s)},updateCitationMetadata:(r,i)=>{n(o=>({citations:o.citations.map(s=>s.id===r?{...s,...i}:s)})),e().applyFilters()},getAllTags:()=>{const{citations:r}=e(),i=new Set;return r.forEach(o=>{o.tags&&o.tags.forEach(s=>i.add(s))}),Array.from(i).sort()},setTagsFilter:r=>{n({selectedTags:r}),e().applyFilters()},clearTagsFilter:()=>{n({selectedTags:[]}),e().applyFilters()},indexPDFFromCitation:async r=>{try{const{citations:i,indexedFilePaths:o}=e(),s=i.find(c=>c.id===r);if(!s||!s.file)throw new Error("No PDF file associated with this citation");if(o.has(s.file))return console.log(` PDF already indexed: ${s.title}`),{alreadyIndexed:!0};console.log(` Indexing PDF for citation: ${s.title}`),console.log(` PDF file path: ${s.file}`),window.dispatchEvent(new CustomEvent("bibliography:indexing-start",{detail:{citationId:r,title:s.title,filePath:s.file}}));const a={title:s.title,author:s.author,year:s.year},l=await window.electron.pdf.index(s.file,r,a);if(!l.success)throw window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:r,success:!1,error:l.error}})),new Error(l.error||"Failed to index PDF");return n(c=>({indexedFilePaths:new Set([...c.indexedFilePaths,s.file])})),window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:r,success:!0}})),console.log(` PDF indexed from citation: ${s.title}`),{alreadyIndexed:!1}}catch(i){throw console.error(" Failed to index PDF from citation:",i),i}},getDocumentIdForCitation:async r=>{try{const i=await window.electron.pdf.getAll();return i.success&&Array.isArray(i.documents)&&i.documents.find(s=>s.bibtexKey===r)?.id||null}catch(i){return console.error("Failed to get document ID for citation:",i),null}},reindexPDFFromCitation:async r=>{try{const{citations:i}=e(),o=i.find(c=>c.id===r);if(!o||!o.file)throw new Error("No PDF file associated with this citation");const s=await e().getDocumentIdForCitation(r);s&&(console.log(` Deleting existing indexed PDF for: ${o.title}`),await window.electron.pdf.delete(s),n(c=>{const u=new Set(c.indexedFilePaths);return u.delete(o.file),{indexedFilePaths:u}})),console.log(` Re-indexing PDF for citation: ${o.title}`),window.dispatchEvent(new CustomEvent("bibliography:indexing-start",{detail:{citationId:r,title:o.title,filePath:o.file}}));const a={title:o.title,author:o.author,year:o.year},l=await window.electron.pdf.index(o.file,r,a);if(!l.success)throw window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:r,success:!1,error:l.error}})),new Error(l.error||"Failed to re-index PDF");n(c=>({indexedFilePaths:new Set([...c.indexedFilePaths,o.file])})),window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:r,success:!0}})),console.log(` PDF re-indexed from citation: ${o.title}`)}catch(i){throw console.error(" Failed to re-index PDF from citation:",i),i}},indexAllPDFs:async()=>{const{citations:r}=e();await e().refreshIndexedPDFs();const i=r.filter(l=>l.file&&!e().indexedFilePaths.has(l.file));if(i.length===0)return{indexed:0,skipped:0,errors:[]};const o=[];let s=0,a=0;n({batchIndexing:{isIndexing:!0,current:0,total:i.length,skipped:0,indexed:0,errors:[]}});for(let l=0;l<i.length;l++){const c=i[l];n(u=>({batchIndexing:{...u.batchIndexing,current:l+1,currentCitation:{citationId:c.id,title:c.title,progress:0,stage:"Initialisation..."}}}));try{if(e().indexedFilePaths.has(c.file)){a++,n(h=>({batchIndexing:{...h.batchIndexing,skipped:a}}));continue}window.dispatchEvent(new CustomEvent("bibliography:indexing-start",{detail:{citationId:c.id,title:c.title,filePath:c.file}}));const u={title:c.title,author:c.author,year:c.year},d=await window.electron.pdf.index(c.file,c.id,u);d.success?(s++,n(h=>({indexedFilePaths:new Set([...h.indexedFilePaths,c.file]),batchIndexing:{...h.batchIndexing,indexed:s}}))):o.push(`${c.title}: ${d.error}`),window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:c.id,success:d.success,error:d.error}}))}catch(u){const d=u instanceof Error?u.message:String(u);o.push(`${c.title}: ${d}`),window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:c.id,success:!1,error:d}}))}}return n({batchIndexing:{isIndexing:!1,current:i.length,total:i.length,skipped:a,indexed:s,errors:o}}),{indexed:s,skipped:a,errors:o}},refreshIndexedPDFs:async()=>{console.log(" refreshIndexedPDFs called...");try{const r=await window.electron.pdf.getAll();if(console.log(" pdf.getAll result:",{success:r.success,documentCount:r.documents?.length}),r.success&&Array.isArray(r.documents)){const i=new Set,o=new Set;r.documents.length>0&&console.log(" Sample document structure:",JSON.stringify(r.documents[0],null,2)),r.documents.forEach(c=>{c.fileURL&&i.add(c.fileURL),c.bibtexKey&&o.add(c.bibtexKey)});const s=Array.from(o).slice(0,5);console.log(" Sample indexed bibtexKeys:",s);const{citations:a}=e();console.log(` Matching ${o.size} bibtexKeys against ${a.length} citations`);const l=a.slice(0,5).map(c=>c.id);console.log(" Sample citation IDs:",l),a.forEach(c=>{c.file&&o.has(c.id)&&i.add(c.file)}),n({indexedFilePaths:i,indexedBibtexKeys:o}),console.log(` Refreshed indexed PDFs: ${i.size} files, ${o.size} bibtexKeys`)}else console.warn(" refreshIndexedPDFs: pdf.getAll returned no documents or failed",r)}catch(r){console.error(" Failed to refresh indexed PDFs:",r)}},isFileIndexed:r=>e().indexedFilePaths.has(r),isBibtexKeyIndexed:r=>e().indexedBibtexKeys.has(r),downloadAndIndexZoteroPDF:async(r,i,o)=>{try{const{citations:s}=e(),a=s.find(v=>v.id===r);if(!a)throw new Error("Citation not found");const l=a.zoteroAttachments?.find(v=>v.key===i);if(!l)throw new Error("Attachment not found in citation");const c=await window.electron.config.get("zotero");if(!c||!c.userId||!c.apiKey)throw new Error("Zotero not configured. Please configure Zotero in Settings.");let u;try{u=(await window.electron.project.getConfig(`${o}/project.json`))?.zotero?.groupId||void 0,console.log(` Using project groupId for download: ${u||"(personal library)"}`)}catch(v){console.warn(" Could not load project config for groupId:",v)}console.log(` Downloading PDF from Zotero: ${l.filename}`);const d=await window.electron.zotero.downloadPDF({userId:c.userId,apiKey:c.apiKey,groupId:u,attachmentKey:l.key,filename:l.filename,targetDirectory:o});if(!d.success||!d.filePath)throw new Error(d.error||"Failed to download PDF");console.log(` PDF downloaded to: ${d.filePath}`);const h=s.map(v=>{if(v.id===r){const x=v.zoteroAttachments?.map(b=>b.key===i?{...b,downloaded:!0,localPath:d.filePath}:b);return{...v,file:d.filePath,zoteroAttachments:x}}return v});n({citations:h}),e().applyFilters();try{await window.electron.bibliography.saveMetadata({projectPath:o,citations:h}),console.log(" Metadata saved after PDF download")}catch(v){console.error(" Failed to save metadata after PDF download:",v)}console.log(` Indexing downloaded PDF for citation: ${a.title}`),window.dispatchEvent(new CustomEvent("bibliography:indexing-start",{detail:{citationId:r,title:a.title,filePath:d.filePath}}));const f={title:a.title,author:a.author,year:a.year},m=await window.electron.pdf.index(d.filePath,r,f);if(!m.success)throw window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:r,success:!1,error:m.error}})),new Error(m.error||"Failed to index PDF");n(v=>({indexedFilePaths:new Set([...v.indexedFilePaths,d.filePath])})),window.dispatchEvent(new CustomEvent("bibliography:indexing-end",{detail:{citationId:r,success:!0}})),console.log(` PDF downloaded and indexed from Zotero: ${a.title}`)}catch(s){throw console.error(" Failed to download and index PDF from Zotero:",s),s}},downloadAllMissingPDFs:async r=>{try{const{citations:i}=e(),o=await window.electron.config.get("zotero");if(!o||!o.userId||!o.apiKey)throw new Error("Zotero not configured. Please configure Zotero in Settings.");let s;try{s=(await window.electron.project.getConfig(`${r}/project.json`))?.zotero?.groupId||void 0,console.log(` Using project groupId for batch download: ${s||"(personal library)"}`)}catch(d){console.warn(" Could not load project config for groupId:",d)}const a=i.filter(d=>!d.file&&d.zoteroAttachments&&d.zoteroAttachments.length>0);if(a.length===0)return{downloaded:0,skipped:0,errors:[]};const l=[];let c=0,u=0;n({batchIndexing:{isIndexing:!0,current:0,total:a.length,skipped:0,indexed:0,errors:[]}});for(let d=0;d<a.length;d++){const h=a[d];n(f=>({batchIndexing:{...f.batchIndexing,current:d+1,currentCitation:{citationId:h.id,title:h.title,progress:0,stage:"Downloading PDF..."}}}));try{const f=h.zoteroAttachments[0];console.log(` Downloading PDF for: ${h.title}`);const m=await window.electron.zotero.downloadPDF({userId:o.userId,apiKey:o.apiKey,groupId:s,attachmentKey:f.key,filename:f.filename,targetDirectory:r});if(!m.success||!m.filePath){l.push(`${h.title}: ${m.error||"Failed to download"}`);continue}const v=e().citations.map(w=>w.id===h.id?{...w,file:m.filePath}:w);n({citations:v}),e().applyFilters(),n(w=>({batchIndexing:{...w.batchIndexing,currentCitation:{citationId:h.id,title:h.title,progress:50,stage:"Indexing PDF..."}}}));const x={title:h.title,author:h.author,year:h.year},b=await window.electron.pdf.index(m.filePath,h.id,x);b.success?(c++,n(w=>({indexedFilePaths:new Set([...w.indexedFilePaths,m.filePath]),batchIndexing:{...w.batchIndexing,indexed:c}}))):l.push(`${h.title}: ${b.error||"Failed to index"}`)}catch(f){const m=f instanceof Error?f.message:String(f);l.push(`${h.title}: ${m}`)}}return n({batchIndexing:{isIndexing:!1,current:a.length,total:a.length,skipped:u,indexed:c,errors:l}}),console.log(` Batch download complete: ${c} downloaded, ${l.length} errors`),{downloaded:c,skipped:u,errors:l}}catch(i){throw console.error(" Failed to download all missing PDFs:",i),i}}})),OB=Object.freeze(Object.defineProperty({__proto__:null,useBibliographyStore:pi},Symbol.toStringTag,{value:"Module"})),obe="modulepreload",sbe=function(n,e){return new URL(n,e).href},DB={},_e=function(e,r,i){let o=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");o=u(r.map(d=>{if(d=sbe(d,i),d in DB)return;DB[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(i)for(let v=a.length-1;v>=0;v--){const x=a[v];if(x.href===d&&(!h||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":obe,h||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((v,x)=>{m.addEventListener("load",v),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},zc=El((n,e)=>({currentProject:null,chapters:[],currentChapterId:null,isLoading:!1,recentProjects:[],loadProject:async r=>{n({isLoading:!0});try{const i=await window.electron.project.load(r);if(!i.success||!i.project)throw new Error(i.error||"Failed to load project");const o=i.project;if(console.log(" Raw project data from backend:",{project:o,bibliography:o.bibliography,bibliographySource:o.bibliographySource}),n({currentProject:{...o,createdAt:new Date(o.createdAt),lastOpenedAt:new Date(o.lastOpenedAt||o.createdAt)}}),o.type==="book"){const a=await window.electron.project.getChapters(o.id);a.success&&n({chapters:a.chapters})}console.log(" Project data received:",{hasBibliography:!!o.bibliography,bibliographyPath:o.bibliography,hasBibliographySource:!!o.bibliographySource});let s=null;if(o.bibliographySource?.filePath?(s=`${o.path}/${o.bibliographySource.filePath}`,console.log(" Using bibliographySource:",o.bibliographySource)):o.bibliography&&(s=o.bibliography,console.log(" Using legacy bibliography path")),s)try{const{useBibliographyStore:a}=await _e(async()=>{const{useBibliographyStore:l}=await Promise.resolve().then(()=>OB);return{useBibliographyStore:l}},void 0,import.meta.url);console.log(" Loading bibliography from:",s),await a.getState().loadBibliographyWithMetadata(s,o.path),console.log(" Bibliography loaded for project (with metadata)"),await a.getState().refreshIndexedPDFs(),console.log(" Indexed PDFs refreshed")}catch(a){console.error(" Failed to load project bibliography:",a)}else{console.log(" No bibliography to load");try{const{useBibliographyStore:a}=await _e(async()=>{const{useBibliographyStore:l}=await Promise.resolve().then(()=>OB);return{useBibliographyStore:l}},void 0,import.meta.url);await a.getState().refreshIndexedPDFs()}catch(a){console.error(" Failed to refresh indexed PDFs:",a)}}try{const{useEditorStore:a}=await _e(async()=>{const{useEditorStore:c}=await Promise.resolve().then(()=>gq);return{useEditorStore:c}},void 0,import.meta.url),l=o.type==="presentation"?`${o.path}/slides.md`:`${o.path}/document.md`;await a.getState().loadFile(l),console.log(" Document loaded into editor with path tracking")}catch(a){console.error("Failed to load document into editor:",a);try{const{useEditorStore:l}=await _e(async()=>{const{useEditorStore:u}=await Promise.resolve().then(()=>gq);return{useEditorStore:u}},void 0,import.meta.url),c=o.type==="presentation"?`${o.path}/slides.md`:`${o.path}/document.md`;await window.electron.fs.writeFile(c,`# ${o.name}
`),await l.getState().loadFile(c),console.log(" Created and loaded document")}catch(l){console.error("Failed to create document:",l)}}await e().loadRecentProjects()}catch(i){throw console.error("Failed to load project:",i),i}finally{n({isLoading:!1})}},createProject:async(r,i,o)=>{try{const s=await window.electron.project.create({name:r,type:i,path:o});if(!s.success||!s.project)throw new Error(s.error||"Failed to create project");const a=s.project;n({currentProject:{...a,createdAt:new Date(a.createdAt),lastOpenedAt:new Date(a.lastOpenedAt||a.createdAt)},chapters:[],currentChapterId:null}),await e().loadRecentProjects()}catch(s){throw console.error("Failed to create project:",s),s}},closeProject:async()=>{try{await window.electron.project.close(),console.log(" Backend resources closed")}catch(r){console.error(" Failed to close backend resources:",r)}n({currentProject:null,chapters:[],currentChapterId:null})},setCurrentChapter:r=>{n({currentChapterId:r})},addChapter:(r,i)=>{const{chapters:o}=e(),s={id:crypto.randomUUID(),title:r,filePath:i,order:o.length};n({chapters:[...o,s]})},deleteChapter:r=>{const{chapters:i}=e();n({chapters:i.filter(o=>o.id!==r),currentChapterId:null})},reorderChapters:r=>{n({chapters:r})},loadRecentProjects:async()=>{try{const r=await window.electron.project.getRecent(),i=[],o=await Promise.all(r.map(async s=>{try{const a=await window.electron.project.getMetadata(s);if(!a.success||!a.project)return i.push(s),null;const l=a.project;return{...l,createdAt:new Date(l.createdAt),lastOpenedAt:new Date(l.lastOpenedAt||l.createdAt)}}catch{return i.push(s),null}}));if(i.length>0){console.log(` Removing ${i.length} non-existent project(s) from recent list`);for(const s of i)await window.electron.project.removeRecent(s)}n({recentProjects:o.filter(s=>s!==null)})}catch(r){console.error("Failed to load recent projects:",r)}}})),abe=({citationTitle:n,attachments:e,onSelect:r,onCancel:i})=>{const{t:o}=qt("common");return p.jsx("div",{className:"pdf-selection-overlay",onClick:i,children:p.jsxs("div",{className:"pdf-selection-dialog",onClick:s=>s.stopPropagation(),children:[p.jsxs("div",{className:"pdf-selection-header",children:[p.jsx("h3",{children:o("bibliography.selectPDF")}),p.jsx("button",{className:"close-btn",onClick:i,children:""})]}),p.jsx("div",{className:"pdf-selection-citation",children:p.jsx("strong",{children:n})}),p.jsx("div",{className:"pdf-selection-list",children:e.map(s=>p.jsxs("button",{className:"pdf-selection-item",onClick:()=>r(s.key),children:[p.jsx("div",{className:"pdf-item-icon",children:""}),p.jsxs("div",{className:"pdf-item-info",children:[p.jsx("div",{className:"pdf-item-filename",children:s.filename}),s.dateModified&&p.jsxs("div",{className:"pdf-item-date",children:[o("bibliography.modified"),": ",new Date(s.dateModified).toLocaleDateString()]})]}),p.jsx("div",{className:"pdf-item-action",children:""})]},s.key))}),p.jsx("div",{className:"pdf-selection-footer",children:p.jsx("button",{className:"btn-cancel",onClick:i,children:o("common.cancel")})})]})})},ree=({tags:n=[],onTagsChange:e,allTags:r=[],readOnly:i=!1})=>{const[o,s]=M.useState(""),[a,l]=M.useState(!1),c=M.useRef(null),u=o.trim()?r.filter(b=>b.toLowerCase().includes(o.toLowerCase())&&!n.includes(b)):[],d=b=>{const w=b.trim();w&&!n.includes(w)&&(e([...n,w]),s(""),l(!1))},h=b=>{e(n.filter(w=>w!==b))},f=b=>{b.key==="Enter"?(b.preventDefault(),u.length>0?d(u[0]):d(o)):b.key==="Escape"?(l(!1),s("")):b.key==="Backspace"&&o===""&&n.length>0&&h(n[n.length-1])},m=b=>{s(b.target.value),l(!0)},v=()=>{o&&l(!0)},x=()=>{setTimeout(()=>{l(!1)},200)};return i?p.jsx("div",{className:"tag-manager read-only",children:n.length===0?p.jsx("span",{className:"no-tags",children:"No tags"}):p.jsx("div",{className:"tag-list",children:n.map(b=>p.jsxs("span",{className:"tag",children:[p.jsx(dl,{size:12}),b]},b))})}):p.jsxs("div",{className:"tag-manager",children:[p.jsxs("div",{className:"tag-input-container",children:[p.jsxs("div",{className:"tag-list",children:[n.map(b=>p.jsxs("span",{className:"tag",children:[p.jsx(dl,{size:12}),b,p.jsx("button",{className:"remove-tag",onClick:()=>h(b),title:"Remove tag",children:p.jsx(Vr,{size:12})})]},b)),p.jsx("input",{ref:c,type:"text",className:"tag-input",placeholder:n.length===0?"Add tags...":"",value:o,onChange:m,onKeyDown:f,onFocus:v,onBlur:x})]}),o&&p.jsx("button",{className:"add-tag-button",onClick:()=>d(o),title:"Add tag",children:p.jsx(gx,{size:16})})]}),a&&u.length>0&&p.jsx("div",{className:"tag-suggestions",children:u.slice(0,5).map(b=>p.jsxs("button",{className:"tag-suggestion",onClick:()=>d(b),children:[p.jsx(dl,{size:12}),b]},b))})]})},lbe=({selectedTags:n,allTags:e,onTagsChange:r,onClear:i})=>{const o=l=>{n.includes(l)?r(n.filter(c=>c!==l)):r([...n,l])},s=e.reduce((l,c)=>(l[c]=(l[c]||0)+1,l),{}),a=Object.keys(s).sort();return a.length===0?p.jsx("div",{className:"tag-filter-empty",children:p.jsx("p",{children:"No tags available"})}):p.jsxs("div",{className:"tag-filter",children:[p.jsxs("div",{className:"tag-filter-header",children:[p.jsxs("span",{className:"tag-filter-title",children:[p.jsx(dl,{size:16}),"Filter by tags"]}),n.length>0&&p.jsxs("button",{className:"clear-tags",onClick:i,children:["Clear (",n.length,")"]})]}),p.jsx("div",{className:"tag-filter-list",children:a.map(l=>p.jsxs("button",{className:`tag-filter-item ${n.includes(l)?"selected":""}`,onClick:()=>o(l),children:[p.jsx(dl,{size:12}),p.jsx("span",{className:"tag-name",children:l}),p.jsx("span",{className:"tag-count",children:s[l]})]},l))})]})},cbe=({isOpen:n,onClose:e,citation:r,allTags:i,onSave:o})=>{const[s,a]=M.useState(r),[l,c]=M.useState(""),[u,d]=M.useState("");if(M.useEffect(()=>{a(r)},[r]),!n)return null;const h=S=>{a({...s,tags:S})},f=S=>{a({...s,notes:S.target.value})},m=S=>{a({...s,keywords:S.target.value})},v=()=>{if(l.trim()&&u.trim()){const S={...s.customFields};S[l]=u,a({...s,customFields:S}),c(""),d("")}},x=S=>{const _={...s.customFields};delete _[S],a({...s,customFields:_})},b=(S,_)=>{const P={...s.customFields};P[S]=_,a({...s,customFields:P})},w=()=>{o({...s,dateModified:new Date().toISOString()}),e()};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content citation-metadata-modal",onClick:S=>S.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:[p.jsx(Po,{size:20}),"Edit Citation Metadata"]}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"citation-info-section",children:[p.jsx("div",{className:"citation-title",children:s.title}),p.jsxs("div",{className:"citation-author",children:[s.author," (",s.year,")"]})]}),p.jsxs("div",{className:"metadata-section",children:[p.jsx("label",{className:"section-label",children:"Tags"}),p.jsx(ree,{tags:s.tags||[],onTagsChange:h,allTags:i}),p.jsx("p",{className:"section-hint",children:"Tags help organize and filter your citations"})]}),p.jsxs("div",{className:"metadata-section",children:[p.jsx("label",{className:"section-label",children:"Keywords"}),p.jsx("input",{type:"text",className:"metadata-input",placeholder:"Separate keywords with commas",value:s.keywords||"",onChange:m}),p.jsx("p",{className:"section-hint",children:"BibTeX keywords field (comma-separated)"})]}),p.jsxs("div",{className:"metadata-section",children:[p.jsx("label",{className:"section-label",children:"Notes"}),p.jsx("textarea",{className:"metadata-textarea",placeholder:"Add your notes about this citation...",rows:4,value:s.notes||"",onChange:f}),p.jsx("p",{className:"section-hint",children:"Personal notes and comments about this citation"})]}),p.jsxs("div",{className:"metadata-section",children:[p.jsx("label",{className:"section-label",children:"Custom Fields"}),s.customFields&&Object.keys(s.customFields).length>0&&p.jsx("div",{className:"custom-fields-list",children:Object.entries(s.customFields).map(([S,_])=>p.jsxs("div",{className:"custom-field-item",children:[p.jsxs("div",{className:"custom-field-content",children:[p.jsx("input",{type:"text",className:"custom-field-key",value:S,readOnly:!0}),p.jsx("input",{type:"text",className:"custom-field-value",value:_,onChange:P=>b(S,P.target.value),placeholder:"Value"})]}),p.jsx("button",{className:"remove-field-button",onClick:()=>x(S),title:"Remove field",children:p.jsx(Gu,{size:16})})]},S))}),p.jsxs("div",{className:"add-custom-field",children:[p.jsx("input",{type:"text",className:"custom-field-key",placeholder:"Field name",value:l,onChange:S=>c(S.target.value)}),p.jsx("input",{type:"text",className:"custom-field-value",placeholder:"Field value",value:u,onChange:S=>d(S.target.value),onKeyDown:S=>{S.key==="Enter"&&v()}}),p.jsx("button",{className:"add-field-button",onClick:v,disabled:!l.trim()||!u.trim(),title:"Add custom field",children:p.jsx(gx,{size:16})})]}),p.jsx("p",{className:"section-hint",children:"Add custom metadata fields for specialized information"})]}),(s.dateAdded||s.dateModified)&&p.jsxs("div",{className:"metadata-section",children:[p.jsx("label",{className:"section-label",children:"Timestamps"}),p.jsxs("div",{className:"timestamp-info",children:[s.dateAdded&&p.jsxs("div",{className:"timestamp-item",children:[p.jsx("span",{className:"timestamp-label",children:"Added:"}),p.jsx("span",{className:"timestamp-value",children:new Date(s.dateAdded).toLocaleString()})]}),s.dateModified&&p.jsxs("div",{className:"timestamp-item",children:[p.jsx("span",{className:"timestamp-label",children:"Modified:"}),p.jsx("span",{className:"timestamp-value",children:new Date(s.dateModified).toLocaleString()})]})]})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{className:"btn-secondary",onClick:e,children:"Cancel"}),p.jsxs("button",{className:"btn-primary",onClick:w,children:[p.jsx(r3,{size:16}),"Save Changes"]})]})]})})},ube=({citation:n})=>{const{t:e}=qt("common"),[r,i]=M.useState(!1),[o,s]=M.useState(!1),[a,l]=M.useState(!1),[c,u]=M.useState(!1),{selectCitation:d,insertCitation:h,indexPDFFromCitation:f,reindexPDFFromCitation:m,downloadAndIndexZoteroPDF:v,updateCitationMetadata:x,getAllTags:b,indexedFilePaths:w,indexedBibtexKeys:S}=pi(),{currentProject:_}=zc(),P=!!n.file,A=!!n.zoteroAttachments&&n.zoteroAttachments.length>0,T=n.zoteroAttachments?.length||0,E=P&&w.has(n.file),L=S.has(n.id),$=E||L;n.id==="unesco_ai_2025"&&console.log(` CitationCard[${n.id}]: indexedBibtexKeys.size=${S.size}, isIndexedByKey=${L}, isIndexed=${$}`);const z=()=>{h(n.id)},B=async()=>{if(!o){if($){if(!window.confirm(e("bibliography.reindexConfirm",{title:n.title})))return;s(!0);try{await m(n.id),alert(e("bibliography.pdfReindexed",{title:n.title}))}catch(I){alert(`${e("bibliography.indexError")} ${I}`)}finally{s(!1)}return}if(P){s(!0);try{(await f(n.id)).alreadyIndexed?window.confirm(e("bibliography.reindexConfirm",{title:n.title}))&&(await m(n.id),alert(e("bibliography.pdfReindexed",{title:n.title}))):alert(`${e("bibliography.pdfIndexed")} ${n.title}`)}catch(Y){alert(`${e("bibliography.indexError")} ${Y}`)}finally{s(!1)}return}A&&(n.zoteroAttachments.length===1?D(n.zoteroAttachments[0].key):l(!0))}},D=async Y=>{if(l(!1),!_?.path){alert(e("bibliography.noProjectOpen"));return}s(!0);try{await v(n.id,Y,_.path),alert(e("bibliography.pdfDownloadedAndIndexed",{title:n.title}))}catch(I){alert(`${e("bibliography.downloadError")} ${I}`)}finally{s(!1)}};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"citation-card",onClick:()=>d(n.id),children:[p.jsxs("div",{className:"citation-header",onClick:Y=>{Y.stopPropagation(),i(!r)},children:[p.jsxs("div",{className:"citation-main",children:[p.jsx("div",{className:"citation-author",children:n.author}),p.jsxs("div",{className:"citation-year",children:["(",n.year,")"]}),(P||L)&&p.jsx("span",{className:"pdf-badge",title:e($?"bibliography.indexed":"bibliography.notIndexed"),children:$?"":""}),A&&p.jsxs("span",{className:"zotero-pdf-badge",title:`${T} PDF${T>1?"s":""} ${e("bibliography.availableInZotero")}`,children:[" ",T]})]}),p.jsx("button",{className:"expand-btn",children:r?"":""})]}),p.jsx("div",{className:"citation-title",children:n.title}),r&&p.jsxs("div",{className:"citation-details",children:[n.journal&&p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:e("bibliography.journal")}),p.jsx("span",{className:"detail-value",children:n.journal})]}),n.publisher&&p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:e("bibliography.publisher")}),p.jsx("span",{className:"detail-value",children:n.publisher})]}),n.booktitle&&p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:e("bibliography.booktitle")}),p.jsx("span",{className:"detail-value",children:n.booktitle})]}),n.tags&&n.tags.length>0&&p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Tags:"}),p.jsx("div",{className:"detail-value",children:p.jsx(ree,{tags:n.tags,onTagsChange:()=>{},allTags:[],readOnly:!0})})]}),n.notes&&p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Notes:"}),p.jsx("span",{className:"detail-value",children:n.notes})]}),p.jsxs("div",{className:"citation-actions",children:[p.jsxs("button",{className:"action-btn primary",onClick:z,children:[" ",e("bibliography.insertCitation")]}),(P||A||L)&&p.jsxs("button",{className:`action-btn ${$?"indexed":"secondary"}`,onClick:B,disabled:o,children:[o?"":$?"":""," ",e(o?"bibliography.indexing":$?"bibliography.reindex":"bibliography.indexPDFButton")]}),p.jsxs("button",{className:"action-btn secondary",onClick:Y=>{Y.stopPropagation(),u(!0)},children:[" ",e("bibliography.editMetadata")]})]})]})]}),a&&n.zoteroAttachments&&p.jsx(abe,{citationTitle:n.title,attachments:n.zoteroAttachments,onSelect:D,onCancel:()=>l(!1)}),c&&p.jsx(cbe,{isOpen:c,onClose:()=>u(!1),citation:n,allTags:b(),onSave:Y=>{x(n.id,Y)}})]})},dbe=({citations:n})=>p.jsx("div",{className:"citation-list",children:n.map(e=>p.jsx(ube,{citation:e},e.id))}),On=({title:n,children:e,defaultExpanded:r=!0,onToggle:i})=>{const[o,s]=M.useState(r),a=()=>{const l=!o;s(l),i?.(l)};return p.jsxs("div",{className:"collapsible-section",children:[p.jsxs("button",{className:"collapsible-header",onClick:a,children:[p.jsx("span",{className:"collapsible-icon",children:o?p.jsx(Vp,{size:20,strokeWidth:1}):p.jsx(QC,{size:20,strokeWidth:1})}),p.jsx("span",{className:"collapsible-title",children:n})]}),o&&p.jsx("div",{className:"collapsible-content",children:e})]})},hbe=({isOpen:n,onClose:e,diff:r,onApplySync:i})=>{const[o,s]=M.useState("remote"),[a,l]=M.useState(new Set(r.added.map(T=>T.id))),[c,u]=M.useState(new Map(r.modified.map(T=>[T.local.id,!0]))),[d,h]=M.useState(new Set(r.deleted.map(T=>T.id))),[f,m]=M.useState(new Set);if(!n)return null;const v=r.added.length+r.modified.length+r.deleted.length,x=()=>{if(o==="manual"){const T={strategy:"manual",selectedChanges:{added:r.added.filter(E=>a.has(E.id)),modified:r.modified.map(E=>({local:E.local,remote:E.remote,useRemote:c.get(E.local.id)||!1})),deleted:r.deleted.filter(E=>d.has(E.id))}};i("manual",T)}else i(o)},b=T=>{const E=new Set(a);E.has(T)?E.delete(T):E.add(T),l(E)},w=T=>{const E=new Map(c),L=E.get(T);E.set(T,!L),u(E)},S=T=>{const E=new Set(d);E.has(T)?E.delete(T):E.add(T),h(E)},_=T=>{const E=new Set(f);E.has(T)?E.delete(T):E.add(T),m(E)},P=()=>{l(new Set(r.added.map(T=>T.id)))},A=()=>{l(new Set)};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content sync-preview-modal",onClick:T=>T.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"Zotero Sync Preview"}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsx("div",{className:"modal-body",children:v===0?p.jsxs("div",{className:"no-changes",children:[p.jsx(k9,{size:48,color:"var(--success-color)"}),p.jsx("p",{children:"Your bibliography is up to date!"}),p.jsx("p",{className:"text-muted",children:"No changes detected from Zotero."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"strategy-section",children:[p.jsx("label",{className:"section-label",children:"Conflict Resolution Strategy:"}),p.jsxs("div",{className:"strategy-options",children:[p.jsxs("label",{className:`strategy-option ${o==="remote"?"selected":""}`,children:[p.jsx("input",{type:"radio",name:"strategy",value:"remote",checked:o==="remote",onChange:()=>s("remote")}),p.jsxs("div",{className:"option-content",children:[p.jsx("div",{className:"option-title",children:"Remote Wins (Recommended)"}),p.jsx("div",{className:"option-description",children:"Accept all changes from Zotero. Local PDFs will be preserved."})]})]}),p.jsxs("label",{className:`strategy-option ${o==="local"?"selected":""}`,children:[p.jsx("input",{type:"radio",name:"strategy",value:"local",checked:o==="local",onChange:()=>s("local")}),p.jsxs("div",{className:"option-content",children:[p.jsx("div",{className:"option-title",children:"Local Wins"}),p.jsx("div",{className:"option-description",children:"Only add new citations. Keep local modifications and ignore deletions."})]})]}),p.jsxs("label",{className:`strategy-option ${o==="manual"?"selected":""}`,children:[p.jsx("input",{type:"radio",name:"strategy",value:"manual",checked:o==="manual",onChange:()=>s("manual")}),p.jsxs("div",{className:"option-content",children:[p.jsx("div",{className:"option-title",children:"Manual Selection"}),p.jsx("div",{className:"option-description",children:"Choose exactly which changes to apply."})]})]})]})]}),p.jsxs("div",{className:"summary-stats",children:[r.added.length>0&&p.jsxs("div",{className:"stat-item success",children:[p.jsx(gx,{size:20}),p.jsx("span",{className:"stat-value",children:r.added.length}),p.jsx("span",{className:"stat-label",children:"Added"})]}),r.modified.length>0&&p.jsxs("div",{className:"stat-item warning",children:[p.jsx(xB,{size:20}),p.jsx("span",{className:"stat-value",children:r.modified.length}),p.jsx("span",{className:"stat-label",children:"Modified"})]}),r.deleted.length>0&&p.jsxs("div",{className:"stat-item error",children:[p.jsx(Gu,{size:20}),p.jsx("span",{className:"stat-value",children:r.deleted.length}),p.jsx("span",{className:"stat-label",children:"Deleted"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx(k9,{size:20}),p.jsx("span",{className:"stat-value",children:r.unchanged.length}),p.jsx("span",{className:"stat-label",children:"Unchanged"})]})]}),p.jsxs("div",{className:"changes-section",children:[r.added.length>0&&p.jsxs("div",{className:"change-group",children:[p.jsxs("div",{className:"change-group-header added",children:[p.jsx(gx,{size:18}),p.jsxs("h4",{children:["New Citations (",r.added.length,")"]}),o==="manual"&&p.jsxs("div",{className:"bulk-actions",children:[p.jsx("button",{className:"link-button",onClick:P,children:"Select All"}),p.jsx("button",{className:"link-button",onClick:A,children:"Deselect All"})]})]}),p.jsx("div",{className:"change-list",children:r.added.map(T=>p.jsxs("div",{className:"change-item",children:[o==="manual"&&p.jsx("input",{type:"checkbox",checked:a.has(T.id),onChange:()=>b(T.id)}),p.jsxs("div",{className:"citation-info",children:[p.jsx("div",{className:"citation-title",children:T.title}),p.jsxs("div",{className:"citation-meta",children:[T.author," (",T.year,")"]})]})]},T.id))})]}),r.modified.length>0&&p.jsxs("div",{className:"change-group",children:[p.jsxs("div",{className:"change-group-header modified",children:[p.jsx(xB,{size:18}),p.jsxs("h4",{children:["Modified Citations (",r.modified.length,")"]})]}),p.jsx("div",{className:"change-list",children:r.modified.map(T=>p.jsxs("div",{className:"change-item expandable",children:[o==="manual"&&p.jsx("input",{type:"checkbox",checked:c.get(T.local.id)||!1,onChange:()=>w(T.local.id),title:c.get(T.local.id)?"Use remote version":"Keep local version"}),p.jsxs("div",{className:"citation-info",onClick:()=>_(T.local.id),children:[p.jsx("div",{className:"citation-title",children:T.local.title}),p.jsxs("div",{className:"citation-meta",children:["Modified fields: ",T.modifiedFields.join(", ")]})]}),f.has(T.local.id)&&p.jsx("div",{className:"change-details",children:p.jsxs("div",{className:"comparison",children:[p.jsxs("div",{className:"comparison-column",children:[p.jsx("h5",{children:"Local"}),p.jsx("div",{className:"field-list",children:T.modifiedFields.map(E=>p.jsxs("div",{className:"field-item",children:[p.jsxs("strong",{children:[E,":"]})," ",T.local[E]||"(empty)"]},E))})]}),p.jsxs("div",{className:"comparison-column",children:[p.jsx("h5",{children:"Remote (Zotero)"}),p.jsx("div",{className:"field-list",children:T.modifiedFields.map(E=>p.jsxs("div",{className:"field-item",children:[p.jsxs("strong",{children:[E,":"]})," ",T.remote[E]||"(empty)"]},E))})]})]})})]},T.local.id))})]}),r.deleted.length>0&&p.jsxs("div",{className:"change-group",children:[p.jsxs("div",{className:"change-group-header deleted",children:[p.jsx(Gu,{size:18}),p.jsxs("h4",{children:["Deleted from Zotero (",r.deleted.length,")"]}),p.jsx(ml,{size:16,className:"warning-icon"})]}),p.jsx("div",{className:"change-list",children:r.deleted.map(T=>p.jsxs("div",{className:"change-item",children:[o==="manual"&&p.jsx("input",{type:"checkbox",checked:d.has(T.id),onChange:()=>S(T.id)}),p.jsxs("div",{className:"citation-info",children:[p.jsx("div",{className:"citation-title",children:T.title}),p.jsxs("div",{className:"citation-meta",children:[T.author," (",T.year,")"]})]})]},T.id))})]})]})]})}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{className:"btn-secondary",onClick:e,children:"Cancel"}),v>0&&p.jsx("button",{className:"btn-primary",onClick:x,children:"Apply Changes"})]})]})})},fbe=()=>{const{t:n}=qt("common"),e=zc(D=>D.currentProject),[r,i]=M.useState(""),[o,s]=M.useState(""),[a,l]=M.useState(""),[c,u]=M.useState([]),[d,h]=M.useState(""),[f,m]=M.useState(!1),[v,x]=M.useState(!1),[b,w]=M.useState(!1),[S,_]=M.useState(!1),[P,A]=M.useState(null),T=D=>{const Y=c.find(I=>I.key===D);return!Y||!Y.parentCollection?0:1+T(Y.parentCollection)};M.useEffect(()=>{E()},[e]);const E=async()=>{try{const D=await window.electron.config.get("zotero");if(D&&(i(D.userId||""),s(D.apiKey||"")),e?.path){const Y=`${e.path}/project.json`,I=await window.electron.project.getConfig(Y);I?.zotero?.groupId?(l(I.zotero.groupId),console.log(" Using project groupId:",I.zotero.groupId)):l(""),I?.zotero?.collectionKey?(h(I.zotero.collectionKey),console.log(" Using project collectionKey:",I.zotero.collectionKey)):h("")}else l(""),h("")}catch(D){console.error("Failed to load Zotero config:",D)}},L=async()=>{if(!r||!o){alert(n("zotero.import.configureFirst"));return}m(!0);try{const D=await window.electron.zotero.listCollections(r,o,a||void 0);D.success&&D.collections?u(D.collections):alert(n("zotero.import.loadCollectionsError"))}catch(D){console.error("Failed to load collections:",D),alert(n("zotero.import.loadCollectionsError"))}finally{m(!1)}},$=async()=>{if(!r||!o){alert(n("zotero.import.configureFirst"));return}x(!0);try{let D,Y;e&&(D=e.path,Y=`${e.path}/project.json`),console.log(" Zotero import - Project paths:",{currentProjectPath:e?.path,targetDirectory:D,projectJsonPath:Y});const I=await window.electron.zotero.sync({userId:r,apiKey:o,groupId:a||void 0,collectionKey:d||void 0,downloadPDFs:!1,exportBibTeX:!0,targetDirectory:D});if(I.success&&I.bibtexPath){await pi.getState().loadBibliography(I.bibtexPath);const U=pi.getState().citations,Z=U.length;console.log(" Enriching citations with Zotero attachment info...");const te=await window.electron.zotero.enrichCitations({userId:r,apiKey:o,groupId:a||void 0,citations:U,collectionKey:d||void 0});if(te.success&&te.citations){pi.setState({citations:te.citations}),console.log(` Enriched ${te.citations.length} citations with attachment info`);const J=te.citations.filter(oe=>oe.zoteroAttachments&&oe.zoteroAttachments.length>0).length;if(console.log(` ${J} citations have PDF attachments available in Zotero`),D)try{await window.electron.bibliography.saveMetadata({projectPath:D,citations:te.citations}),console.log(" Bibliography metadata saved for persistence")}catch(oe){console.error(" Failed to save bibliography metadata:",oe)}}else console.warn(" Failed to enrich citations with attachment info:",te.error);if(Y&&e){const J=I.bibtexPath.split("/").pop()||"bibliography.bib";await window.electron.project.setBibliographySource({projectPath:Y,type:"zotero",filePath:J,zoteroCollection:d||void 0}),console.log(" Bibliography source saved to project")}alert(n("zotero.import.success",{count:Z})),h("")}else alert(n("zotero.import.error",{error:I.error}))}catch(D){console.error("Import failed:",D),alert(n("zotero.import.genericError"))}finally{x(!1)}},z=async()=>{if(!r||!o){alert(n("zotero.import.configureFirst"));return}const D=pi.getState().citations;if(D.length===0){alert("No citations in bibliography. Please import first.");return}w(!0);try{const Y=await window.electron.zotero.checkUpdates({userId:r,apiKey:o,groupId:a||void 0,localCitations:D,collectionKey:d||void 0});Y.success&&Y.diff?Y.hasChanges?(A(Y.diff),_(!0)):alert("Your bibliography is up to date! No changes detected."):alert(`Failed to check updates: ${Y.error}`)}catch(Y){console.error("Failed to check updates:",Y),alert(`Error checking updates: ${Y}`)}finally{w(!1)}},B=async(D,Y)=>{if(P){_(!1);try{const I=pi.getState().citations,U=await window.electron.zotero.applyUpdates({userId:r,apiKey:o,groupId:a||void 0,currentCitations:I,diff:P,strategy:D,resolution:Y});if(U.success&&U.finalCitations){if(pi.setState({citations:U.finalCitations}),e?.path)try{await window.electron.bibliography.saveMetadata({projectPath:e.path,citations:U.finalCitations}),console.log(" Bibliography metadata saved after sync")}catch(Z){console.error(" Failed to save bibliography metadata:",Z)}alert(`Sync complete!

Added: ${U.addedCount}
Modified: ${U.modifiedCount}
Deleted: ${U.deletedCount}
`+(U.skippedCount?`Skipped: ${U.skippedCount}
`:"")),A(null)}else alert(`Failed to apply updates: ${U.error}`)}catch(I){console.error("Failed to apply sync:",I),alert(`Error applying sync: ${I}`)}}};return p.jsxs("div",{className:"zotero-import",children:[p.jsxs("div",{className:"zotero-import-header",children:[p.jsx("h4",{children:n("zotero.import.title")}),(!r||!o)&&p.jsx("p",{className:"zotero-warning",children:n("zotero.import.configWarning")}),!e&&p.jsx("p",{className:"zotero-info",children:n("zotero.import.projectInfo")})]}),p.jsxs("div",{className:"zotero-import-controls",children:[p.jsxs("div",{className:"zotero-collection-selector",children:[p.jsxs("select",{value:d,onChange:D=>h(D.target.value),disabled:!r||!o||c.length===0,className:"zotero-select",children:[p.jsx("option",{value:"",children:c.length===0?n("zotero.import.loadCollections"):n("zotero.import.allCollections")}),c.map(D=>{const Y=T(D.key),I="".repeat(Y),U=Y>0?" ":"";return p.jsxs("option",{value:D.key,children:[I,U,D.name]},D.key)})]}),p.jsx("button",{className:"toolbar-btn",onClick:L,disabled:!r||!o||f,title:n("zotero.import.loadCollectionsButton"),children:p.jsx(ul,{size:16,className:f?"spinning":""})})]}),p.jsxs("button",{className:"zotero-import-btn",onClick:$,disabled:!r||!o||v,children:[p.jsx(mx,{size:16}),n(v?"zotero.import.importing":"zotero.import.importButton")]}),p.jsxs("button",{className:"zotero-update-btn",onClick:z,disabled:!r||!o||b,title:n("zotero.import.checkUpdatesButton"),children:[p.jsx(Ove,{size:16}),n(b?"zotero.import.checking":"zotero.import.updateButton")]})]}),P&&p.jsx(hbe,{isOpen:S,onClose:()=>{_(!1),A(null)},diff:P,onApplySync:B})]})},pbe=({isOpen:n,onClose:e,onReplace:r,onMerge:i,currentCitationCount:o})=>{if(!n)return null;const s=o>0;return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content bib-import-mode-modal",onClick:a=>a.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"Import Bibliography"}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsx("div",{className:"modal-body",children:s?p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"modal-info",children:["You currently have ",p.jsxs("strong",{children:[o," citation",o!==1?"s":""]})," in your bibliography."]}),p.jsx("p",{className:"modal-question",children:"How would you like to import the new file?"}),p.jsxs("div",{className:"import-options",children:[p.jsxs("button",{className:"import-option-btn replace-btn",onClick:r,children:[p.jsx("div",{className:"option-icon",children:""}),p.jsxs("div",{className:"option-content",children:[p.jsx("h4",{children:"Replace"}),p.jsx("p",{children:"Remove all current citations and replace with the new file"})]})]}),p.jsxs("button",{className:"import-option-btn merge-btn",onClick:i,children:[p.jsx("div",{className:"option-icon",children:""}),p.jsxs("div",{className:"option-content",children:[p.jsx("h4",{children:"Merge"}),p.jsx("p",{children:"Add new citations to the existing ones (duplicates will be detected)"})]})]})]})]}):p.jsxs("div",{className:"first-import",children:[p.jsx("p",{children:"You don't have any citations yet. The file will be loaded into your bibliography."}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"btn-cancel",onClick:e,children:"Cancel"}),p.jsx("button",{className:"btn-primary",onClick:r,children:"Import"})]})]})})]})})},mbe=({isOpen:n,onClose:e,mode:r,totalCitations:i,newCitations:o,duplicates:s})=>n?p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content bib-import-summary-modal",onClick:a=>a.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"Import Complete"}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsx("div",{className:"success-icon",children:p.jsx(Fu,{size:48,color:"var(--success-color)"})}),p.jsx("div",{className:"summary-content",children:r==="replace"?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"summary-main",children:"Bibliography replaced successfully!"}),p.jsx("div",{className:"summary-stats",children:p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-value",children:i}),p.jsx("span",{className:"stat-label",children:"Total citations"})]})})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"summary-main",children:"Bibliography merged successfully!"}),p.jsxs("div",{className:"summary-stats",children:[p.jsxs("div",{className:"stat-item success",children:[p.jsx("span",{className:"stat-value",children:o}),p.jsx("span",{className:"stat-label",children:"New citations added"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-value",children:i}),p.jsx("span",{className:"stat-label",children:"Total citations"})]}),s>0&&p.jsxs("div",{className:"stat-item warning",children:[p.jsx("span",{className:"stat-value",children:s}),p.jsx("span",{className:"stat-label",children:"Duplicates ignored"})]})]})]})}),p.jsx("div",{className:"modal-actions",children:p.jsx("button",{className:"btn-primary",onClick:e,children:"OK"})})]})]})}):null,gbe=({citations:n,onClose:e})=>{const[r,i]=M.useState(null),[o,s]=M.useState(!0),[a,l]=M.useState("overview");M.useEffect(()=>{c()},[n]);const c=async()=>{s(!0);try{const u=await window.electron.bibliography.getStatistics(n);u.success&&u.statistics&&i(u.statistics)}catch(u){console.error("Failed to load statistics:",u)}finally{s(!1)}};return o?p.jsxs("div",{className:"bibliography-stats-loading",children:[p.jsx("div",{className:"spinner"}),p.jsx("p",{children:"Analyzing bibliography..."})]}):r?p.jsxs("div",{className:"bibliography-stats",children:[p.jsxs("div",{className:"stats-header",children:[p.jsx("h2",{children:"Bibliography Statistics"}),e&&p.jsx("button",{className:"close-button",onClick:e,children:""})]}),p.jsxs("div",{className:"stats-tabs",children:[p.jsxs("button",{className:`tab-button ${a==="overview"?"active":""}`,onClick:()=>l("overview"),children:[p.jsx(gj,{size:16}),"Overview"]}),p.jsxs("button",{className:`tab-button ${a==="authors"?"active":""}`,onClick:()=>l("authors"),children:[p.jsx(RS,{size:16}),"Authors"]}),p.jsxs("button",{className:`tab-button ${a==="publications"?"active":""}`,onClick:()=>l("publications"),children:[p.jsx(Ac,{size:16}),"Publications"]}),p.jsxs("button",{className:`tab-button ${a==="tags"?"active":""}`,onClick:()=>l("tags"),children:[p.jsx(dl,{size:16}),"Tags"]}),p.jsxs("button",{className:`tab-button ${a==="timeline"?"active":""}`,onClick:()=>l("timeline"),children:[p.jsx(IQ,{size:16}),"Timeline"]})]}),p.jsxs("div",{className:"stats-content",children:[a==="overview"&&p.jsx(ybe,{statistics:r}),a==="authors"&&p.jsx(vbe,{statistics:r}),a==="publications"&&p.jsx(xbe,{statistics:r}),a==="tags"&&p.jsx(bbe,{statistics:r}),a==="timeline"&&p.jsx(wbe,{statistics:r})]})]}):p.jsx("div",{className:"bibliography-stats-error",children:p.jsx("p",{children:"Failed to load statistics"})})},ybe=({statistics:n})=>p.jsxs("div",{className:"overview-tab",children:[p.jsxs("div",{className:"stats-grid",children:[p.jsxs("div",{className:"stat-card primary",children:[p.jsx("div",{className:"stat-icon",children:p.jsx(Po,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsx("div",{className:"stat-value",children:n.totalCitations}),p.jsx("div",{className:"stat-label",children:"Total Citations"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:p.jsx(RS,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsx("div",{className:"stat-value",children:n.totalAuthors}),p.jsx("div",{className:"stat-label",children:"Unique Authors"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:p.jsx(Ac,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsx("div",{className:"stat-value",children:n.totalJournals}),p.jsx("div",{className:"stat-label",children:"Journals"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:p.jsx(JC,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsxs("div",{className:"stat-value",children:[n.yearRange.min," - ",n.yearRange.max]}),p.jsx("div",{className:"stat-label",children:"Year Range"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:p.jsx(RS,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsx("div",{className:"stat-value",children:n.averageAuthorsPerPaper}),p.jsx("div",{className:"stat-label",children:"Avg Authors/Paper"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:p.jsx(Po,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsxs("div",{className:"stat-value",children:[n.pdfCoverage,"%"]}),p.jsx("div",{className:"stat-label",children:"PDF Coverage"}),p.jsxs("div",{className:"stat-subtitle",children:[n.citationsWithPDFs," / ",n.totalCitations," with PDFs"]})]})]})]}),p.jsxs("div",{className:"chart-section",children:[p.jsxs("h3",{children:[p.jsx(Jye,{size:18})," Publications by Type"]}),p.jsx("div",{className:"type-chart",children:n.publicationsByType.map((e,r)=>p.jsxs("div",{className:"type-item",children:[p.jsx("div",{className:"type-bar-container",children:p.jsx("div",{className:"type-bar",style:{width:`${e.percentage}%`}})}),p.jsxs("div",{className:"type-info",children:[p.jsx("span",{className:"type-name",children:e.type}),p.jsxs("span",{className:"type-count",children:[e.count," (",e.percentage,"%)"]})]})]},r))})]})]}),vbe=({statistics:n})=>p.jsxs("div",{className:"authors-tab",children:[p.jsxs("div",{className:"section-header",children:[p.jsxs("h3",{children:[p.jsx(Fye,{size:18})," Top Authors"]}),p.jsx("p",{className:"section-subtitle",children:"Most prolific authors in your bibliography"})]}),p.jsx("div",{className:"authors-list",children:n.topAuthors.slice(0,15).map((e,r)=>p.jsxs("div",{className:"author-card",children:[p.jsxs("div",{className:"author-rank",children:["#",r+1]}),p.jsxs("div",{className:"author-info",children:[p.jsx("div",{className:"author-name",children:e.name}),p.jsxs("div",{className:"author-meta",children:[p.jsxs("span",{className:"meta-item",children:[p.jsx(Po,{size:14}),e.publicationCount," publication",e.publicationCount>1?"s":""]}),p.jsxs("span",{className:"meta-item",children:[p.jsx(RS,{size:14}),e.coauthors.length," coauthor",e.coauthors.length!==1?"s":""]}),p.jsxs("span",{className:"meta-item",children:[p.jsx(JC,{size:14}),e.years.length>1?`${e.years[0]} - ${e.years[e.years.length-1]}`:e.years[0]]})]})]}),p.jsx("div",{className:"author-bar",children:p.jsx("div",{className:"author-bar-fill",style:{width:`${e.publicationCount/n.topAuthors[0].publicationCount*100}%`}})})]},r))})]}),xbe=({statistics:n})=>p.jsxs("div",{className:"publications-tab",children:[p.jsxs("div",{className:"section",children:[p.jsxs("div",{className:"section-header",children:[p.jsxs("h3",{children:[p.jsx(Ac,{size:18})," Top Journals"]}),p.jsx("p",{className:"section-subtitle",children:"Most frequent publication venues"})]}),p.jsx("div",{className:"journals-list",children:n.topJournals.slice(0,10).map((e,r)=>p.jsxs("div",{className:"journal-item",children:[p.jsxs("div",{className:"journal-rank",children:["#",r+1]}),p.jsxs("div",{className:"journal-info",children:[p.jsx("div",{className:"journal-name",children:e.name}),p.jsxs("div",{className:"journal-stats",children:[e.publicationCount," publication",e.publicationCount>1?"s":""," (",e.percentage,"%)"]})]}),p.jsx("div",{className:"journal-bar",children:p.jsx("div",{className:"journal-bar-fill",style:{width:`${e.publicationCount/n.topJournals[0].publicationCount*100}%`}})})]},r))})]}),p.jsxs("div",{className:"section",children:[p.jsx("div",{className:"section-header",children:p.jsxs("h3",{children:[p.jsx(JC,{size:18})," Publications by Year"]})}),p.jsx("div",{className:"year-chart",children:n.publicationsByYear.map((e,r)=>{const i=Math.max(...n.publicationsByYear.map(o=>o.count));return p.jsxs("div",{className:"year-item",children:[p.jsx("div",{className:"year-label",children:e.year}),p.jsxs("div",{className:"year-bar-container",children:[p.jsx("div",{className:"year-bar",style:{width:`${e.count/i*100}%`}}),p.jsx("span",{className:"year-count",children:e.count})]})]},r)})})]})]}),bbe=({statistics:n})=>!n.topTags||n.topTags.length===0?p.jsx("div",{className:"tags-tab",children:p.jsxs("div",{className:"section-header",children:[p.jsxs("h3",{children:[p.jsx(dl,{size:18})," No Tags Available"]}),p.jsx("p",{className:"section-subtitle",children:"Add tags to your citations to see tag statistics"})]})}):p.jsxs("div",{className:"tags-tab",children:[p.jsxs("div",{className:"section-header",children:[p.jsxs("h3",{children:[p.jsx(dl,{size:18})," Tag Statistics"]}),p.jsx("p",{className:"section-subtitle",children:"Most frequently used tags in your bibliography"})]}),p.jsxs("div",{className:"stat-card primary",style:{marginBottom:"1.5rem"},children:[p.jsx("div",{className:"stat-icon",children:p.jsx(dl,{size:24})}),p.jsxs("div",{className:"stat-info",children:[p.jsxs("div",{className:"stat-value",children:[n.tagCoverage,"%"]}),p.jsx("div",{className:"stat-label",children:"Tag Coverage"}),p.jsxs("div",{className:"stat-subtitle",children:[n.citationsWithTags," / ",n.totalCitations," citations have tags"]})]})]}),p.jsx("div",{className:"section",children:p.jsx("div",{className:"tags-list",children:n.topTags.map((e,r)=>{const i=n.topTags[0].count;return p.jsxs("div",{className:"tag-stat-item",children:[p.jsxs("div",{className:"tag-stat-rank",children:["#",r+1]}),p.jsxs("div",{className:"tag-stat-info",children:[p.jsxs("div",{className:"tag-stat-name",children:[p.jsx(dl,{size:14}),e.tag]}),p.jsxs("div",{className:"tag-stat-details",children:[e.count," citation",e.count>1?"s":""," (",e.percentage,"%)"]})]}),p.jsx("div",{className:"tag-stat-bar",children:p.jsx("div",{className:"tag-stat-bar-fill",style:{width:`${e.count/i*100}%`}})})]},r)})})})]}),wbe=({statistics:n})=>{const e=Math.max(...n.timelineData.map(i=>i.cumulative)),r=Math.max(...n.timelineData.map(i=>i.annual));return p.jsxs("div",{className:"timeline-tab",children:[p.jsxs("div",{className:"section-header",children:[p.jsxs("h3",{children:[p.jsx(IQ,{size:18})," Bibliography Growth Over Time"]}),p.jsx("p",{className:"section-subtitle",children:"Cumulative and annual publication trends"})]}),p.jsxs("div",{className:"timeline-chart",children:[p.jsxs("div",{className:"chart-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color cumulative"}),"Cumulative"]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color annual"}),"Annual"]})]}),p.jsx("div",{className:"timeline-items",children:n.timelineData.map((i,o)=>p.jsxs("div",{className:"timeline-item",children:[p.jsx("div",{className:"timeline-year",children:i.year}),p.jsxs("div",{className:"timeline-bars",children:[p.jsxs("div",{className:"bar-row",children:[p.jsx("div",{className:"bar-label",children:"Cumulative"}),p.jsxs("div",{className:"bar-container",children:[p.jsx("div",{className:"bar cumulative",style:{width:`${i.cumulative/e*100}%`}}),p.jsx("span",{className:"bar-value",children:i.cumulative})]})]}),p.jsxs("div",{className:"bar-row",children:[p.jsx("div",{className:"bar-label",children:"Annual"}),p.jsxs("div",{className:"bar-container",children:[p.jsx("div",{className:"bar annual",style:{width:`${i.annual/r*100}%`}}),p.jsx("span",{className:"bar-value",children:i.annual})]})]})]})]},o))})]})]})},kbe=({isOpen:n,onClose:e,projectPath:r,citations:i})=>{const{t:o}=qt("common"),[s,a]=M.useState(!1),[l,c]=M.useState(null),[u,d]=M.useState(new Set),[h,f]=M.useState(!1),[m,v]=M.useState(null);M.useEffect(()=>{n?x():(c(null),d(new Set),f(!1),v(null))},[n]);const x=async()=>{a(!0);try{const E=await window.electron.bibliography.detectOrphanPDFs({projectPath:r,citations:i,includeSubdirectories:!0});if(E.success&&E.data){c(E.data);const L=new Set(E.data.orphans?.map($=>$.filePath)||[]);d(L)}else console.error("Failed to scan for orphan PDFs:",E.error),alert(`${o("bibliography.orphanPDFScanError")}: ${E.error}`)}catch(E){console.error("Error scanning for orphan PDFs:",E),alert(`${o("bibliography.orphanPDFScanError")}: ${E}`)}finally{a(!1)}},b=E=>{const L=new Set(u);L.has(E)?L.delete(E):L.add(E),d(L)},w=()=>{if(l)if(u.size===l.orphans.length)d(new Set);else{const E=new Set(l.orphans.map(L=>L.filePath));d(E)}},S=async()=>{if(u.size===0){alert(o("bibliography.noOrphansSelected"));return}if(window.confirm(o("bibliography.confirmDeleteOrphans",{count:u.size}))){f(!0),v("delete");try{const L=await window.electron.bibliography.deleteOrphanPDFs(Array.from(u));L.success?(alert(o("bibliography.orphanPDFsDeleted",{deleted:L.data.deleted,failed:L.data.failed.length})),await x()):alert(`${o("bibliography.orphanPDFDeleteError")}: ${L.error}`)}catch(L){console.error("Error deleting orphan PDFs:",L),alert(`${o("bibliography.orphanPDFDeleteError")}: ${L}`)}finally{f(!1),v(null)}}},_=async()=>{if(u.size===0){alert(o("bibliography.noOrphansSelected"));return}if(window.confirm(o("bibliography.confirmArchiveOrphans",{count:u.size}))){f(!0),v("archive");try{const L=await window.electron.bibliography.archiveOrphanPDFs({filePaths:Array.from(u),projectPath:r,archiveSubdir:"orphan_pdfs"});L.success?(alert(o("bibliography.orphanPDFsArchived",{archived:L.data.archived,failed:L.data.failed.length,path:L.data.archivePath})),await x()):alert(`${o("bibliography.orphanPDFArchiveError")}: ${L.error}`)}catch(L){console.error("Error archiving orphan PDFs:",L),alert(`${o("bibliography.orphanPDFArchiveError")}: ${L}`)}finally{f(!1),v(null)}}},P=E=>{if(E===0)return"0 B";const L=["B","KB","MB","GB"],$=1024,z=Math.floor(Math.log(E)/Math.log($));return`${(E/Math.pow($,z)).toFixed(2)} ${L[z]}`},A=E=>new Date(E).toLocaleString(),T=l?l.orphans.filter(E=>u.has(E.filePath)).reduce((E,L)=>E+L.size,0):0;return n?p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content orphan-pdf-modal",onClick:E=>E.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:o("bibliography.orphanPDFCleanup")}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"modal-body",children:[!s&&l&&p.jsxs("div",{className:"orphan-summary",children:[p.jsxs("div",{className:"summary-stat",children:[p.jsxs("span",{className:"stat-label",children:[o("bibliography.scannedFiles"),":"]}),p.jsx("span",{className:"stat-value",children:l.scannedFiles})]}),p.jsxs("div",{className:"summary-stat",children:[p.jsxs("span",{className:"stat-label",children:[o("bibliography.linkedFiles"),":"]}),p.jsx("span",{className:"stat-value",children:l.linkedFiles})]}),p.jsxs("div",{className:"summary-stat highlight",children:[p.jsxs("span",{className:"stat-label",children:[o("bibliography.orphanFiles"),":"]}),p.jsx("span",{className:"stat-value",children:l.totalOrphans})]}),p.jsxs("div",{className:"summary-stat",children:[p.jsxs("span",{className:"stat-label",children:[o("bibliography.totalSize"),":"]}),p.jsx("span",{className:"stat-value",children:P(l.totalSize)})]})]}),s&&p.jsxs("div",{className:"scanning-state",children:[p.jsx(ul,{className:"spinning",size:32}),p.jsx("p",{children:o("bibliography.scanningForOrphans")})]}),!s&&l&&l.totalOrphans===0&&p.jsxs("div",{className:"no-orphans-state",children:[p.jsx($g,{size:48,strokeWidth:1}),p.jsx("h3",{children:o("bibliography.noOrphansFound")}),p.jsx("p",{children:o("bibliography.noOrphansFoundDesc")})]}),!s&&l&&l.totalOrphans>0&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"orphan-actions",children:[p.jsx("button",{className:"btn-secondary btn-small",onClick:w,disabled:h,children:u.size===l.orphans.length?o("bibliography.deselectAll"):o("bibliography.selectAll")}),p.jsxs("div",{className:"selection-info",children:[o("bibliography.selectedOrphans",{count:u.size}),u.size>0&&` (${P(T)})`]}),p.jsxs("button",{className:"btn-secondary btn-small",onClick:x,disabled:h,children:[p.jsx(ul,{size:16}),o("bibliography.rescan")]})]}),p.jsx("div",{className:"orphan-list",children:l.orphans.map(E=>p.jsxs("div",{className:`orphan-item ${u.has(E.filePath)?"selected":""}`,onClick:()=>b(E.filePath),children:[p.jsx("div",{className:"orphan-checkbox",children:p.jsx("input",{type:"checkbox",checked:u.has(E.filePath),onChange:()=>b(E.filePath),onClick:L=>L.stopPropagation()})}),p.jsxs("div",{className:"orphan-info",children:[p.jsx("div",{className:"orphan-filename",children:E.fileName}),p.jsxs("div",{className:"orphan-meta",children:[p.jsx("span",{className:"orphan-size",children:P(E.size)}),p.jsx("span",{className:"orphan-separator",children:""}),p.jsx("span",{className:"orphan-date",children:A(E.lastModified)})]}),p.jsx("div",{className:"orphan-path",children:E.filePath})]})]},E.filePath))}),p.jsxs("div",{className:"orphan-warning",children:[p.jsx(xj,{size:20}),p.jsxs("div",{className:"warning-text",children:[p.jsxs("strong",{children:[o("bibliography.orphanWarningTitle"),":"]})," ",o("bibliography.orphanWarningMessage")]})]})]}),p.jsxs("div",{className:"modal-footer orphan-footer",children:[p.jsxs("button",{className:"btn-secondary",onClick:e,disabled:h,children:[p.jsx(Vr,{size:20}),o("common.close")]}),l&&l.totalOrphans>0&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{className:"btn-warning",onClick:_,disabled:h||u.size===0,children:[p.jsx(Ih,{size:20}),o(h&&m==="archive"?"bibliography.archiving":"bibliography.archiveSelected")]}),p.jsxs("button",{className:"btn-danger",onClick:S,disabled:h||u.size===0,children:[p.jsx(Gu,{size:20}),o(h&&m==="delete"?"bibliography.deleting":"bibliography.deleteSelected")]})]})]})]})]})}):null},Sbe=({modifiedPDFs:n,onReindexAll:e,onReindexSingle:r,onDismiss:i})=>{const{t:o}=qt("common"),[s,a]=M.useState(!1);return n.length===0?null:p.jsxs("div",{className:"pdf-modification-notification",children:[p.jsxs("div",{className:"notification-header",children:[p.jsx("div",{className:"notification-icon",children:p.jsx(ml,{size:20})}),p.jsxs("div",{className:"notification-content",children:[p.jsx("div",{className:"notification-title",children:o("bibliography.modifiedPDFsDetected",{count:n.length})}),p.jsx("div",{className:"notification-message",children:o("bibliography.modifiedPDFsMessage")})]}),p.jsxs("div",{className:"notification-actions",children:[p.jsxs("button",{className:"notification-btn notification-btn-primary",onClick:e,title:o("bibliography.reindexAll"),children:[p.jsx(ul,{size:16}),o("bibliography.reindexAll")]}),n.length>1&&p.jsx("button",{className:"notification-btn notification-btn-secondary",onClick:()=>a(!s),children:o(s?"common.showLess":"common.showMore")}),p.jsx("button",{className:"notification-btn notification-btn-close",onClick:i,title:o("common.dismiss"),children:p.jsx(Vr,{size:16})})]})]}),s&&p.jsx("div",{className:"notification-details",children:p.jsx("ul",{className:"modified-pdfs-list",children:n.map(l=>p.jsxs("li",{className:"modified-pdf-item",children:[p.jsxs("div",{className:"modified-pdf-info",children:[p.jsx("div",{className:"modified-pdf-title",children:l.citationTitle}),p.jsx("div",{className:"modified-pdf-path",children:l.filePath})]}),p.jsxs("button",{className:"notification-btn notification-btn-small",onClick:()=>r(l.citationId),children:[p.jsx(ul,{size:14}),o("bibliography.reindex")]})]},l.citationId))})})]})},Cbe=(n,e)=>{const[r,i]=M.useState([]),o=async()=>{if(!(!e||n.length===0))try{const a=await window.electron.pdf.checkModifiedPDFs({citations:n,projectPath:e});a.success&&a.data?.modifiedPDFs&&a.data.modifiedPDFs.length>0&&i(a.data.modifiedPDFs)}catch(a){console.error("Failed to check for modified PDFs:",a)}},s=()=>{i([])};return M.useEffect(()=>{o();const a=setInterval(()=>{o()},300*1e3);return()=>clearInterval(a)},[n,e]),{modifiedPDFs:r,checkForModifications:o,dismissNotification:s}},_be=()=>{const{t:n}=qt("common"),e=zc(pe=>pe.currentProject),{citations:r,filteredCitations:i,searchQuery:o,searchCitations:s,sortBy:a,setSortBy:l,toggleSortOrder:c,sortOrder:u,batchIndexing:d,indexAllPDFs:h,refreshIndexedPDFs:f,downloadAllMissingPDFs:m,getAllTags:v,selectedTags:x,setTagsFilter:b,clearTagsFilter:w}=pi(),{modifiedPDFs:S,dismissNotification:_}=Cbe(r,e?.path);M.useEffect(()=>{f()},[]);const P=r.filter(pe=>pe.file).length,A=r.filter(pe=>!pe.file&&pe.zoteroAttachments&&pe.zoteroAttachments.length>0).length,[T,E]=M.useState(!1),[L,$]=M.useState(!1),[z,B]=M.useState(!1),[D,Y]=M.useState(!1),[I,U]=M.useState({mode:"replace",totalCitations:0,newCitations:0,duplicates:0}),[Z,te]=M.useState(null),J=async()=>{try{const pe=await window.electron.dialog.openFile({filters:[{name:"BibTeX",extensions:["bib"]}]});if(!pe.canceled&&pe.filePaths&&pe.filePaths.length>0){const me=pe.filePaths[0];te(me),r.length>0?E(!0):await oe(me,"replace")}}catch(pe){console.error("Failed to import BibTeX:",pe)}},oe=async(pe,me)=>{try{let Me=0,le=0,ze=0;if(me==="replace")await pi.getState().loadBibliography(pe),ze=pi.getState().citations.length;else{const nt=await pi.getState().mergeBibliography(pe);Me=nt.newCitations,le=nt.duplicates,ze=nt.total}if(e){const nt=pe.split("/").pop()||"bibliography.bib",F=`${e.path}/${nt}`;await window.electron.fs.copyFile(pe,F);const X=`${e.path}/project.json`;await window.electron.project.setBibliographySource({projectPath:X,type:"file",filePath:nt}),console.log(" Bibliography source saved to project")}U({mode:me,totalCitations:ze,newCitations:Me,duplicates:le}),$(!0)}catch(Me){console.error("Failed to import BibTeX:",Me),alert(`Failed to import bibliography: ${Me instanceof Error?Me.message:String(Me)}`)}},q=async()=>{E(!1),Z&&(await oe(Z,"replace"),te(null))},G=async()=>{E(!1),Z&&(await oe(Z,"merge"),te(null))},re=async()=>{if(d.isIndexing)return;if(P===0){alert(n("bibliography.noPDFsToIndex"));return}if(window.confirm(n("bibliography.confirmIndexAll",{count:P})))try{const me=await h();alert(n("bibliography.indexAllComplete",{indexed:me.indexed,skipped:me.skipped,errors:me.errors.length}))}catch(me){console.error("Failed to index all PDFs:",me),alert(`${n("bibliography.indexError")} ${me}`)}},V=async()=>{if(d.isIndexing)return;if(!e){alert(n("bibliography.noProjectOpen"));return}if(A===0){alert(n("bibliography.noMissingPDFs"));return}if(window.confirm(n("bibliography.confirmDownloadAll",{count:A})))try{const me=await m(e.path);alert(n("bibliography.downloadAllComplete",{downloaded:me.downloaded,skipped:me.skipped,errors:me.errors.length}))}catch(me){console.error("Failed to download all PDFs:",me),alert(`${n("bibliography.downloadError")} ${me}`)}},ve=async()=>{if(r.length===0){alert(n("bibliography.noCitationsToExport"));return}try{const pe=await window.electron.dialog.saveFile({defaultPath:"bibliography.bib",filters:[{name:"BibTeX",extensions:["bib"]}]});if(!pe.canceled&&pe.filePath){const me=await window.electron.bibliography.export({citations:r,filePath:pe.filePath,format:"modern"});me.success?alert(n("bibliography.exportSuccess",{count:r.length})):alert(`${n("bibliography.exportError")}: ${me.error}`)}}catch(pe){console.error("Failed to export BibTeX:",pe),alert(`${n("bibliography.exportError")}: ${pe}`)}},ke=async pe=>{if(!e){alert(n("bibliography.noProjectOpen"));return}const me=pe?r.filter(le=>pe.includes(le.id)&&le.file):S.map(le=>r.find(ze=>ze.id===le.citationId)).filter(le=>le&&le.file);if(me.length===0){alert(n("bibliography.noPDFsToReindex"));return}if(window.confirm(n("bibliography.confirmReindexModified",{count:me.length})))try{for(const le of me)le.file&&await window.electron.pdf.index(le.file,le.key,{title:le.title,author:le.author,year:le.year});await f(),_(),alert(n("bibliography.reindexComplete",{count:me.length}))}catch(le){console.error("Failed to re-index modified PDFs:",le),alert(`${n("bibliography.reindexError")}: ${le}`)}};return p.jsxs("div",{className:"bibliography-panel",children:[p.jsxs("div",{className:"bibliography-header",children:[p.jsx("button",{className:"toolbar-btn",onClick:J,title:n("bibliography.import"),children:p.jsx(gx,{size:20,strokeWidth:1})}),r.length>0&&p.jsx("button",{className:"toolbar-btn",onClick:ve,title:n("bibliography.exportBibTeX"),children:p.jsx(t3,{size:20,strokeWidth:1})}),P>0&&p.jsx("button",{className:"toolbar-btn",onClick:re,disabled:d.isIndexing,title:n("bibliography.indexAllPDFs"),children:p.jsx(_ve,{size:20,strokeWidth:1})}),A>0&&p.jsx("button",{className:"toolbar-btn",onClick:V,disabled:d.isIndexing,title:n("bibliography.downloadAllMissing"),children:p.jsx(mx,{size:20,strokeWidth:1})}),r.length>0&&p.jsx("button",{className:"toolbar-btn",onClick:()=>B(!z),title:n("bibliography.viewStatistics"),children:p.jsx(gj,{size:20,strokeWidth:1})}),e&&r.length>0&&p.jsx("button",{className:"toolbar-btn",onClick:()=>Y(!0),title:n("bibliography.cleanupOrphanPDFs"),children:p.jsx(Gu,{size:20,strokeWidth:1})})]}),d.isIndexing&&p.jsxs("div",{className:"batch-indexing-progress",children:[p.jsx("div",{className:"batch-progress-header",children:n("bibliography.indexingProgress",{current:d.current,total:d.total})}),d.currentCitation&&p.jsx("div",{className:"batch-progress-current",children:d.currentCitation.title}),p.jsx("div",{className:"batch-progress-bar",children:p.jsx("div",{className:"batch-progress-fill",style:{width:`${d.current/d.total*100}%`}})}),p.jsxs("div",{className:"batch-progress-stats",children:[" ",d.indexed," |  ",d.skipped]})]}),p.jsx(fbe,{}),z&&r.length>0&&p.jsx(On,{title:n("bibliography.statistics"),defaultExpanded:!0,children:p.jsx(gbe,{citations:r})}),p.jsxs(On,{title:n("bibliography.searchAndFilters"),defaultExpanded:!0,children:[p.jsxs("div",{className:"bibliography-controls",children:[p.jsxs("div",{className:"search-box",children:[p.jsx("span",{className:"search-icon",children:""}),p.jsx("input",{type:"text",className:"search-input",placeholder:n("bibliography.searchPlaceholder"),value:o,onChange:pe=>s(pe.target.value)})]}),p.jsxs("div",{className:"sort-controls",children:[p.jsx("label",{className:"sort-label",children:n("bibliography.sortBy")}),p.jsxs("select",{className:"sort-select",value:a,onChange:pe=>l(pe.target.value),children:[p.jsx("option",{value:"author",children:n("bibliography.author")}),p.jsx("option",{value:"year",children:n("bibliography.year")}),p.jsx("option",{value:"title",children:n("bibliography.titleField")})]}),p.jsx("button",{className:"sort-order-btn",onClick:c,title:n("bibliography.sortBy"),children:u==="asc"?"":""})]})]}),p.jsxs("div",{className:"citation-count",children:[i.length," citation",i.length!==1?"s":""]}),v().length>0&&p.jsx(lbe,{selectedTags:x,allTags:v(),onTagsChange:b,onClear:w})]}),p.jsx(On,{title:n("bibliography.title"),defaultExpanded:!0,children:p.jsx("div",{className:"bibliography-content",children:i.length===0?p.jsxs("div",{className:"bibliography-empty",children:[p.jsx("h4",{children:n("bibliography.noCitations")}),p.jsx("p",{children:n("bibliography.importPrompt")})]}):p.jsx(dbe,{citations:i})})}),p.jsx(pbe,{isOpen:T,onClose:()=>{E(!1),te(null)},onReplace:q,onMerge:G,currentCitationCount:r.length}),p.jsx(mbe,{isOpen:L,onClose:()=>$(!1),mode:I.mode,totalCitations:I.totalCitations,newCitations:I.newCitations,duplicates:I.duplicates}),e&&p.jsx(kbe,{isOpen:D,onClose:()=>Y(!1),projectPath:e.path,citations:r}),p.jsx(Sbe,{modifiedPDFs:S,onReindexAll:()=>ke(),onReindexSingle:pe=>ke([pe]),onDismiss:_})]})},Ye={ipc:(n,...e)=>{console.log(`[IPC] ${n}`,...e)},store:(n,e,...r)=>{console.log(`[Store:${n}] ${e}`,...r)},component:(n,e,...r)=>{console.log(`[${n}] ${e}`,...r)},error:(n,e)=>{console.error(`[ERROR:${n}]`,e)}},iee=El((n,e)=>({messages:[],isProcessing:!1,currentStreamingMessage:"",selectedDocumentIds:[],addUserMessage:r=>{let i;try{const{useModeStore:s}=require("./modeStore");i=s.getState().activeModeId}catch{}const o={id:crypto.randomUUID(),role:"user",content:r,timestamp:new Date,modeId:i};n(s=>({messages:[...s.messages,o]}))},addAssistantMessage:(r,i,o,s,a)=>{let l;try{const{useModeStore:u}=require("./modeStore");l=u.getState().activeModeId}catch{}const c={id:crypto.randomUUID(),role:"assistant",content:r,sources:i,timestamp:new Date,ragUsed:o,isError:s,explanation:a,modeId:l};n(u=>({messages:[...u.messages,c],isProcessing:!1,currentStreamingMessage:""}))},sendMessage:async r=>{Ye.store("Chat","sendMessage called",{query:r});const{addUserMessage:i,addAssistantMessage:o}=e();Ye.store("Chat","Adding user message"),i(r),n({isProcessing:!0});try{const{useRAGQueryStore:s}=await _e(async()=>{const{useRAGQueryStore:b}=await Promise.resolve().then(()=>yee);return{useRAGQueryStore:b}},void 0,import.meta.url),a=s.getState().params;let l="";Ye.store("Chat","Setting up stream listener"),window.electron.chat.onStream(b=>{Ye.store("Chat","Received stream chunk",{chunkLength:b.length}),l+=b,n({currentStreamingMessage:l})});const{useModeStore:c}=await _e(async()=>{const{useModeStore:b}=await Promise.resolve().then(()=>pwe);return{useModeStore:b}},void 0,import.meta.url),u=c.getState().activeMode,d=c.getState().activeModeId,{selectedCollectionKeys:h,selectedDocumentIds:f,...m}=a,v={context:!0,...m,collectionKeys:h?.length>0?h:void 0,documentIds:f?.length>0?f:void 0,modeId:d};if(u&&d==="free-mode")v.noSystemPrompt=!0;else if(u&&d!=="default-assistant"){const b=a.systemPromptLanguage||"fr",w=u.systemPrompt[b];w&&(v.useCustomSystemPrompt=!0,v.customSystemPrompt=w)}if(u){const b=u.ragOverrides;b.useGraphContext!==void 0&&(v.useGraphContext=b.useGraphContext),b.enableContextCompression!==void 0&&(v.enableContextCompression=b.enableContextCompression)}Ye.ipc("chat.send",{query:r,ipcOptions:v});const x=await window.electron.chat.send(r,v);Ye.ipc("chat.send response",x),x.success&&x.response?(Ye.store("Chat","Adding assistant response",{responseLength:x.response.length,ragUsed:x.ragUsed}),o(x.response,void 0,x.ragUsed,!1,x.explanation)):(Ye.error("Chat","No response or error: "+(x.error||"Rponse vide")),o(`Erreur: ${x.error||"Rponse vide"}`,void 0,void 0,!0,void 0))}catch(s){Ye.error("Chat",s),o(`Erreur: ${s.message||s}`,void 0,void 0,!0)}finally{n({isProcessing:!1,currentStreamingMessage:""})}},cancelGeneration:async()=>{try{await window.electron.chat.cancel(),n({isProcessing:!1,currentStreamingMessage:""})}catch(r){console.error("Failed to cancel generation:",r)}},clearChat:()=>{n({messages:[],isProcessing:!1,currentStreamingMessage:""})},setSelectedDocuments:r=>{n({selectedDocumentIds:r})}}));function Cj(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var xm=Cj();function oee(n){xm=n}var Mv={exec:()=>null};function vn(n,e=""){let r=typeof n=="string"?n:n.source,i={replace:(o,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(ko.caret,"$1"),r=r.replace(o,a),i},getRegex:()=>new RegExp(r,e)};return i}var Abe=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),ko={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Tbe=/^(?:[ \t]*(?:\n|$))+/,Pbe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Mbe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Mb=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ebe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_j=/(?:[*+-]|\d{1,9}[.)])/,see=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,aee=vn(see).replace(/bull/g,_j).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Nbe=vn(see).replace(/bull/g,_j).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Aj=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,jbe=/^[^\n]+/,Tj=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Obe=vn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Tj).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Dbe=vn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_j).getRegex(),l3="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pj=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ibe=vn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Pj).replace("tag",l3).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),lee=vn(Aj).replace("hr",Mb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",l3).getRegex(),Rbe=vn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",lee).getRegex(),Mj={blockquote:Rbe,code:Pbe,def:Obe,fences:Mbe,heading:Ebe,hr:Mb,html:Ibe,lheading:aee,list:Dbe,newline:Tbe,paragraph:lee,table:Mv,text:jbe},IB=vn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Mb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",l3).getRegex(),Lbe={...Mj,lheading:Nbe,table:IB,paragraph:vn(Aj).replace("hr",Mb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",IB).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",l3).getRegex()},zbe={...Mj,html:vn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Pj).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mv,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:vn(Aj).replace("hr",Mb).replace("heading",` *#{1,6} *[^
]`).replace("lheading",aee).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Fbe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$be=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,cee=/^( {2,}|\\)\n(?!\s*$)/,Bbe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,c3=/[\p{P}\p{S}]/u,Ej=/[\s\p{P}\p{S}]/u,uee=/[^\s\p{P}\p{S}]/u,Hbe=vn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ej).getRegex(),dee=/(?!~)[\p{P}\p{S}]/u,qbe=/(?!~)[\s\p{P}\p{S}]/u,Vbe=/(?:[^\s\p{P}\p{S}]|~)/u,Wbe=vn(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Abe?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),hee=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ube=vn(hee,"u").replace(/punct/g,c3).getRegex(),Kbe=vn(hee,"u").replace(/punct/g,dee).getRegex(),fee="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Gbe=vn(fee,"gu").replace(/notPunctSpace/g,uee).replace(/punctSpace/g,Ej).replace(/punct/g,c3).getRegex(),Ybe=vn(fee,"gu").replace(/notPunctSpace/g,Vbe).replace(/punctSpace/g,qbe).replace(/punct/g,dee).getRegex(),Zbe=vn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,uee).replace(/punctSpace/g,Ej).replace(/punct/g,c3).getRegex(),Xbe=vn(/\\(punct)/,"gu").replace(/punct/g,c3).getRegex(),Jbe=vn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Qbe=vn(Pj).replace("(?:-->|$)","-->").getRegex(),ewe=vn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Qbe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),FS=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,twe=vn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",FS).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pee=vn(/^!?\[(label)\]\[(ref)\]/).replace("label",FS).replace("ref",Tj).getRegex(),mee=vn(/^!?\[(ref)\](?:\[\])?/).replace("ref",Tj).getRegex(),nwe=vn("reflink|nolink(?!\\()","g").replace("reflink",pee).replace("nolink",mee).getRegex(),RB=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Nj={_backpedal:Mv,anyPunctuation:Xbe,autolink:Jbe,blockSkip:Wbe,br:cee,code:$be,del:Mv,emStrongLDelim:Ube,emStrongRDelimAst:Gbe,emStrongRDelimUnd:Zbe,escape:Fbe,link:twe,nolink:mee,punctuation:Hbe,reflink:pee,reflinkSearch:nwe,tag:ewe,text:Bbe,url:Mv},rwe={...Nj,link:vn(/^!?\[(label)\]\((.*?)\)/).replace("label",FS).getRegex(),reflink:vn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",FS).getRegex()},A9={...Nj,emStrongRDelimAst:Ybe,emStrongLDelim:Kbe,url:vn(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",RB).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:vn(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",RB).getRegex()},iwe={...A9,br:vn(cee).replace("{2,}","*").getRegex(),text:vn(A9.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},W2={normal:Mj,gfm:Lbe,pedantic:zbe},X1={normal:Nj,gfm:A9,breaks:iwe,pedantic:rwe},owe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},LB=n=>owe[n];function mu(n,e){if(e){if(ko.escapeTest.test(n))return n.replace(ko.escapeReplace,LB)}else if(ko.escapeTestNoEncode.test(n))return n.replace(ko.escapeReplaceNoEncode,LB);return n}function zB(n){try{n=encodeURI(n).replace(ko.percentDecode,"%")}catch{return null}return n}function FB(n,e){let r=n.replace(ko.findPipe,(s,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),i=r.split(ko.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(ko.slashPipe,"|");return i}function J1(n,e,r){let i=n.length;if(i===0)return"";let o=0;for(;o<i&&n.charAt(i-o-1)===e;)o++;return n.slice(0,i-o)}function swe(n,e){if(n.indexOf(e[1])===-1)return-1;let r=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return r>0?-2:-1}function $B(n,e,r,i,o){let s=e.href,a=e.title||null,l=n[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let c={type:n[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:a,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,c}function awe(n,e,r){let i=n.match(r.other.indentCodeCompensation);if(i===null)return e;let o=i[1];return e.split(`
`).map(s=>{let a=s.match(r.other.beginningSpace);if(a===null)return s;let[l]=a;return l.length>=o.length?s.slice(o.length):s}).join(`
`)}var $S=class{options;rules;lexer;constructor(e){this.options=e||xm}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let i=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:J1(i,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let i=r[0],o=awe(i,r[3]||"",this.rules);return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:o}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let i=r[2].trim();if(this.rules.other.endingHash.test(i)){let o=J1(i,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(i=o.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:J1(r[0],`
`)}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let i=J1(r[0],`
`).split(`
`),o="",s="",a=[];for(;i.length>0;){let l=!1,c=[],u;for(u=0;u<i.length;u++)if(this.rules.other.blockquoteStart.test(i[u]))c.push(i[u]),l=!0;else if(!l)c.push(i[u]);else break;i=i.slice(u);let d=c.join(`
`),h=d.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");o=o?`${o}
${d}`:d,s=s?`${s}
${h}`:h;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,a,!0),this.lexer.state.top=f,i.length===0)break;let m=a.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){let v=m,x=v.raw+`
`+i.join(`
`),b=this.blockquote(x);a[a.length-1]=b,o=o.substring(0,o.length-v.raw.length)+b.raw,s=s.substring(0,s.length-v.text.length)+b.text;break}else if(m?.type==="list"){let v=m,x=v.raw+`
`+i.join(`
`),b=this.list(x);a[a.length-1]=b,o=o.substring(0,o.length-m.raw.length)+b.raw,s=s.substring(0,s.length-v.raw.length)+b.raw,i=x.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:a,text:s}}}list(e){let r=this.rules.block.list.exec(e);if(r){let i=r[1].trim(),o=i.length>1,s={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");let a=this.rules.other.listItemRegex(i),l=!1;for(;e;){let u=!1,d="",h="";if(!(r=a.exec(e))||this.rules.block.hr.test(e))break;d=r[0],e=e.substring(d.length);let f=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),m=e.split(`
`,1)[0],v=!f.trim(),x=0;if(this.options.pedantic?(x=2,h=f.trimStart()):v?x=r[1].length+1:(x=r[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,h=f.slice(x),x+=r[1].length),v&&this.rules.other.blankLine.test(m)&&(d+=m+`
`,e=e.substring(m.length+1),u=!0),!u){let b=this.rules.other.nextBulletRegex(x),w=this.rules.other.hrRegex(x),S=this.rules.other.fencesBeginRegex(x),_=this.rules.other.headingBeginRegex(x),P=this.rules.other.htmlBeginRegex(x);for(;e;){let A=e.split(`
`,1)[0],T;if(m=A,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),T=m):T=m.replace(this.rules.other.tabCharGlobal,"    "),S.test(m)||_.test(m)||P.test(m)||b.test(m)||w.test(m))break;if(T.search(this.rules.other.nonSpaceChar)>=x||!m.trim())h+=`
`+T.slice(x);else{if(v||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(f)||_.test(f)||w.test(f))break;h+=`
`+m}!v&&!m.trim()&&(v=!0),d+=A+`
`,e=e.substring(A.length+1),f=T.slice(x)}}s.loose||(l?s.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(l=!0)),s.items.push({type:"list_item",raw:d,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),s.raw+=d}let c=s.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let u of s.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),u.tokens[0]?.type==="text"||u.tokens[0]?.type==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let d=this.rules.other.listTaskCheckbox.exec(u.raw);if(d){let h={type:"checkbox",raw:d[0]+" ",checked:d[0]!=="[ ]"};u.checked=h.checked,s.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=h.raw+u.tokens[0].raw,u.tokens[0].text=h.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(h)):u.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):u.tokens.unshift(h)}}if(!s.loose){let d=u.tokens.filter(f=>f.type==="space"),h=d.length>0&&d.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=h}}if(s.loose)for(let u of s.items){u.loose=!0;for(let d of u.tokens)d.type==="text"&&(d.type="paragraph")}return s}}html(e){let r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){let r=this.rules.block.def.exec(e);if(r){let i=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:o,title:s}}}table(e){let r=this.rules.block.table.exec(e);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let i=FB(r[1]),o=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===o.length){for(let l of o)this.rules.other.tableAlignRight.test(l)?a.align.push("right"):this.rules.other.tableAlignCenter.test(l)?a.align.push("center"):this.rules.other.tableAlignLeft.test(l)?a.align.push("left"):a.align.push(null);for(let l=0;l<i.length;l++)a.header.push({text:i[l],tokens:this.lexer.inline(i[l]),header:!0,align:a.align[l]});for(let l of s)a.rows.push(FB(l,a.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:a.align[u]})));return a}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let i=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let a=J1(i.slice(0,-1),"\\");if((i.length-a.length)%2===0)return}else{let a=swe(r[2],"()");if(a===-2)return;if(a>-1){let l=(r[0].indexOf("!")===0?5:4)+r[1].length+a;r[2]=r[2].substring(0,a),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let o=r[2],s="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(o);a&&(o=a[1],s=a[3])}else s=r[3]?r[3].slice(1,-1):"";return o=o.trim(),this.rules.other.startAngleBracket.test(o)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?o=o.slice(1):o=o.slice(1,-1)),$B(r,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(e,r){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let o=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=r[o.toLowerCase()];if(!s){let a=i[0].charAt(0);return{type:"text",raw:a,text:a}}return $B(i,s,i[0],this.lexer,this.rules)}}emStrong(e,r,i=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!(!o||o[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(o[1]||o[2])||!i||this.rules.inline.punctuation.exec(i))){let s=[...o[0]].length-1,a,l,c=s,u=0,d=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,r=r.slice(-1*e.length+s);(o=d.exec(r))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=[...a].length,o[3]||o[4]){c+=l;continue}else if((o[5]||o[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);let h=[...o[0]][0].length,f=e.slice(0,s+o.index+h+l);if(Math.min(s,l)%2){let v=f.slice(1,-1);return{type:"em",raw:f,text:v,tokens:this.lexer.inlineTokens(v)}}let m=f.slice(2,-2);return{type:"strong",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let i=r[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(i),s=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return o&&s&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:r[0],text:i}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){let r=this.rules.inline.autolink.exec(e);if(r){let i,o;return r[2]==="@"?(i=r[1],o="mailto:"+i):(i=r[1],o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let r;if(r=this.rules.inline.url.exec(e)){let i,o;if(r[2]==="@")i=r[0],o="mailto:"+i;else{let s;do s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(s!==r[0]);i=r[0],r[1]==="www."?o="http://"+r[0]:o=r[0]}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let r=this.rules.inline.text.exec(e);if(r){let i=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:i}}}},nl=class T9{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xm,this.options.tokenizer=this.options.tokenizer||new $S,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:ko,block:W2.normal,inline:X1.normal};this.options.pedantic?(r.block=W2.pedantic,r.inline=X1.pedantic):this.options.gfm&&(r.block=W2.gfm,this.options.breaks?r.inline=X1.breaks:r.inline=X1.gfm),this.tokenizer.rules=r}static get rules(){return{block:W2,inline:X1}}static lex(e,r){return new T9(r).lex(e)}static lexInline(e,r){return new T9(r).inlineTokens(e)}lex(e){e=e.replace(ko.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],i=!1){for(this.options.pedantic&&(e=e.replace(ko.tabCharGlobal,"    ").replace(ko.spaceLine,""));e;){let o;if(this.options.extensions?.block?.some(a=>(o=a.call({lexer:this},e,r))?(e=e.substring(o.raw.length),r.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let a=r.at(-1);o.raw.length===1&&a!==void 0?a.raw+=`
`:r.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let a=r.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.text,this.inlineQueue.at(-1).src=a.text):r.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let a=r.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},r.push(o));continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),r.push(o);continue}let s=e;if(this.options.extensions?.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let a=r.at(-1);i&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):r.push(o),i=s.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let a=r.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):r.push(o);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i=e,o=null;if(this.tokens.links){let c=Object.keys(this.tokens.links);if(c.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)c.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)s=o[2]?o[2].length:0,i=i.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let a=!1,l="";for(;e;){a||(l=""),a=!1;let c;if(this.options.extensions?.inline?.some(d=>(c=d.call({lexer:this},e,r))?(e=e.substring(c.raw.length),r.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);let d=r.at(-1);c.type==="text"&&d?.type==="text"?(d.raw+=c.raw,d.text+=c.text):r.push(c);continue}if(c=this.tokenizer.emStrong(e,i,l)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),r.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),r.push(c);continue}let u=e;if(this.options.extensions?.startInline){let d=1/0,h=e.slice(1),f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},h),typeof f=="number"&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(u=e.substring(0,d+1))}if(c=this.tokenizer.inlineText(u)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(l=c.raw.slice(-1)),a=!0;let d=r.at(-1);d?.type==="text"?(d.raw+=c.raw,d.text+=c.text):r.push(c);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},BS=class{options;parser;constructor(e){this.options=e||xm}space(e){return""}code({text:e,lang:r,escaped:i}){let o=(r||"").match(ko.notSpaceStart)?.[0],s=e.replace(ko.endingNewline,"")+`
`;return o?'<pre><code class="language-'+mu(o)+'">'+(i?s:mu(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:mu(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:r}){return`<h${r}>${this.parser.parseInline(e)}</h${r}>
`}hr(e){return`<hr>
`}list(e){let r=e.ordered,i=e.start,o="";for(let l=0;l<e.items.length;l++){let c=e.items[l];o+=this.listitem(c)}let s=r?"ol":"ul",a=r&&i!==1?' start="'+i+'"':"";return"<"+s+a+`>
`+o+"</"+s+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let r="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);r+=this.tablerow({text:i});let o="";for(let s=0;s<e.rows.length;s++){let a=e.rows[s];i="";for(let l=0;l<a.length;l++)i+=this.tablecell(a[l]);o+=this.tablerow({text:i})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+o+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let r=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+r+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${mu(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:r,tokens:i}){let o=this.parser.parseInline(i),s=zB(e);if(s===null)return o;e=s;let a='<a href="'+e+'"';return r&&(a+=' title="'+mu(r)+'"'),a+=">"+o+"</a>",a}image({href:e,title:r,text:i,tokens:o}){o&&(i=this.parser.parseInline(o,this.parser.textRenderer));let s=zB(e);if(s===null)return mu(i);e=s;let a=`<img src="${e}" alt="${i}"`;return r&&(a+=` title="${mu(r)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:mu(e.text)}},jj=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},rl=class P9{options;renderer;textRenderer;constructor(e){this.options=e||xm,this.options.renderer=this.options.renderer||new BS,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new jj}static parse(e,r){return new P9(r).parse(e)}static parseInline(e,r){return new P9(r).parseInline(e)}parse(e){let r="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions?.renderers?.[o.type]){let a=o,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){r+=l||"";continue}}let s=o;switch(s.type){case"space":{r+=this.renderer.space(s);break}case"hr":{r+=this.renderer.hr(s);break}case"heading":{r+=this.renderer.heading(s);break}case"code":{r+=this.renderer.code(s);break}case"table":{r+=this.renderer.table(s);break}case"blockquote":{r+=this.renderer.blockquote(s);break}case"list":{r+=this.renderer.list(s);break}case"checkbox":{r+=this.renderer.checkbox(s);break}case"html":{r+=this.renderer.html(s);break}case"def":{r+=this.renderer.def(s);break}case"paragraph":{r+=this.renderer.paragraph(s);break}case"text":{r+=this.renderer.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,r=this.renderer){let i="";for(let o=0;o<e.length;o++){let s=e[o];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=l||"";continue}}let a=s;switch(a.type){case"escape":{i+=r.text(a);break}case"html":{i+=r.html(a);break}case"link":{i+=r.link(a);break}case"image":{i+=r.image(a);break}case"checkbox":{i+=r.checkbox(a);break}case"strong":{i+=r.strong(a);break}case"em":{i+=r.em(a);break}case"codespan":{i+=r.codespan(a);break}case"br":{i+=r.br(a);break}case"del":{i+=r.del(a);break}case"text":{i+=r.text(a);break}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},Dy=class{options;block;constructor(e){this.options=e||xm}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?nl.lex:nl.lexInline}provideParser(){return this.block?rl.parse:rl.parseInline}},lwe=class{defaults=Cj();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=rl;Renderer=BS;TextRenderer=jj;Lexer=nl;Tokenizer=$S;Hooks=Dy;constructor(...e){this.use(...e)}walkTokens(e,r){let i=[];for(let o of e)switch(i=i.concat(r.call(this,o)),o.type){case"table":{let s=o;for(let a of s.header)i=i.concat(this.walkTokens(a.tokens,r));for(let a of s.rows)for(let l of a)i=i.concat(this.walkTokens(l.tokens,r));break}case"list":{let s=o;i=i.concat(this.walkTokens(s.items,r));break}default:{let s=o;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(a=>{let l=s[a].flat(1/0);i=i.concat(this.walkTokens(l,r))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,r)))}}return i}use(...e){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{let o={...i};if(o.async=this.defaults.async||o.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let a=r.renderers[s.name];a?r.renderers[s.name]=function(...l){let c=s.renderer.apply(this,l);return c===!1&&(c=a.apply(this,l)),c}:r.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=r[s.level];a?a.unshift(s.tokenizer):r[s.level]=[s.tokenizer],s.start&&(s.level==="block"?r.startBlock?r.startBlock.push(s.start):r.startBlock=[s.start]:s.level==="inline"&&(r.startInline?r.startInline.push(s.start):r.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(r.childTokens[s.name]=s.childTokens)}),o.extensions=r),i.renderer){let s=this.defaults.renderer||new BS(this.defaults);for(let a in i.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let l=a,c=i.renderer[l],u=s[l];s[l]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=u.apply(s,d)),h||""}}o.renderer=s}if(i.tokenizer){let s=this.defaults.tokenizer||new $S(this.defaults);for(let a in i.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let l=a,c=i.tokenizer[l],u=s[l];s[l]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=u.apply(s,d)),h}}o.tokenizer=s}if(i.hooks){let s=this.defaults.hooks||new Dy;for(let a in i.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let l=a,c=i.hooks[l],u=s[l];Dy.passThroughHooks.has(a)?s[l]=d=>{if(this.defaults.async&&Dy.passThroughHooksRespectAsync.has(a))return(async()=>{let f=await c.call(s,d);return u.call(s,f)})();let h=c.call(s,d);return u.call(s,h)}:s[l]=(...d)=>{if(this.defaults.async)return(async()=>{let f=await c.apply(s,d);return f===!1&&(f=await u.apply(s,d)),f})();let h=c.apply(s,d);return h===!1&&(h=u.apply(s,d)),h}}o.hooks=s}if(i.walkTokens){let s=this.defaults.walkTokens,a=i.walkTokens;o.walkTokens=function(l){let c=[];return c.push(a.call(this,l)),s&&(c=c.concat(s.call(this,l))),c}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return nl.lex(e,r??this.defaults)}parser(e,r){return rl.parse(e,r??this.defaults)}parseMarkdown(e){return(r,i)=>{let o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let l=s.hooks?await s.hooks.preprocess(r):r,c=await(s.hooks?await s.hooks.provideLexer():e?nl.lex:nl.lexInline)(l,s),u=s.hooks?await s.hooks.processAllTokens(c):c;s.walkTokens&&await Promise.all(this.walkTokens(u,s.walkTokens));let d=await(s.hooks?await s.hooks.provideParser():e?rl.parse:rl.parseInline)(u,s);return s.hooks?await s.hooks.postprocess(d):d})().catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let l=(s.hooks?s.hooks.provideLexer():e?nl.lex:nl.lexInline)(r,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let c=(s.hooks?s.hooks.provideParser():e?rl.parse:rl.parseInline)(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return a(l)}}}onError(e,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let o="<p>An error occurred:</p><pre>"+mu(i.message+"",!0)+"</pre>";return r?Promise.resolve(o):o}if(r)return Promise.reject(i);throw i}}},Up=new lwe;function Mn(n,e){return Up.parse(n,e)}Mn.options=Mn.setOptions=function(n){return Up.setOptions(n),Mn.defaults=Up.defaults,oee(Mn.defaults),Mn};Mn.getDefaults=Cj;Mn.defaults=xm;Mn.use=function(...n){return Up.use(...n),Mn.defaults=Up.defaults,oee(Mn.defaults),Mn};Mn.walkTokens=function(n,e){return Up.walkTokens(n,e)};Mn.parseInline=Up.parseInline;Mn.Parser=rl;Mn.parser=rl.parse;Mn.Renderer=BS;Mn.TextRenderer=jj;Mn.Lexer=nl;Mn.lexer=nl.lex;Mn.Tokenizer=$S;Mn.Hooks=Dy;Mn.parse=Mn;Mn.options;Mn.setOptions;Mn.use;Mn.walkTokens;Mn.parseInline;rl.parse;nl.lex;const cwe={};function uwe(n,e){let r;try{r=n()}catch{return}return{getItem:o=>{var s;const a=c=>c===null?null:JSON.parse(c,void 0),l=(s=r.getItem(o))!=null?s:null;return l instanceof Promise?l.then(a):a(l)},setItem:(o,s)=>r.setItem(o,JSON.stringify(s,void 0)),removeItem:o=>r.removeItem(o)}}const xx=n=>e=>{try{const r=n(e);return r instanceof Promise?r:{then(i){return xx(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return xx(i)(r)}}}},dwe=(n,e)=>(r,i,o)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,w)=>({...w,...b}),...e},a=!1;const l=new Set,c=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...b)},i,o);const d=xx(s.serialize),h=()=>{const b=s.partialize({...i()});let w;const S=d({state:b,version:s.version}).then(_=>u.setItem(s.name,_)).catch(_=>{w=_});if(w)throw w;return S},f=o.setState;o.setState=(b,w)=>{f(b,w),h()};const m=n((...b)=>{r(...b),h()},i,o);let v;const x=()=>{var b;if(!u)return;a=!1,l.forEach(S=>S(i()));const w=((b=s.onRehydrateStorage)==null?void 0:b.call(s,i()))||void 0;return xx(u.getItem.bind(u))(s.name).then(S=>{if(S)return s.deserialize(S)}).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate)return s.migrate(S.state,S.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return S.state}).then(S=>{var _;return v=s.merge(S,(_=i())!=null?_:m),r(v,!0),h()}).then(()=>{w?.(v,void 0),a=!0,c.forEach(S=>S(v))}).catch(S=>{w?.(void 0,S)})};return o.persist={setOptions:b=>{s={...s,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},x(),v||m},hwe=(n,e)=>(r,i,o)=>{let s={storage:uwe(()=>localStorage),partialize:x=>x,version:0,merge:(x,b)=>({...b,...x}),...e},a=!1;const l=new Set,c=new Set;let u=s.storage;if(!u)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...x)},i,o);const d=()=>{const x=s.partialize({...i()});return u.setItem(s.name,{state:x,version:s.version})},h=o.setState;o.setState=(x,b)=>{h(x,b),d()};const f=n((...x)=>{r(...x),d()},i,o);o.getInitialState=()=>f;let m;const v=()=>{var x,b;if(!u)return;a=!1,l.forEach(S=>{var _;return S((_=i())!=null?_:f)});const w=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(x=i())!=null?x:f))||void 0;return xx(u.getItem.bind(u))(s.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate)return[!0,s.migrate(S.state,S.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var _;const[P,A]=S;if(m=s.merge(A,(_=i())!=null?_:f),r(m,!0),P)return d()}).then(()=>{w?.(m,void 0),m=i(),a=!0,c.forEach(S=>S(m))}).catch(S=>{w?.(void 0,S)})};return o.persist={setOptions:x=>{s={...s,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},s.skipHydration||v(),m||f},fwe=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((cwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),dwe(n,e)):hwe(n,e),gee=fwe,u3=El()(gee((n,e)=>({activeModeId:"default-assistant",activeMode:null,modes:[],isLoadingModes:!1,categoryFilter:"all",loadModes:async()=>{n({isLoadingModes:!0});try{const r=await window.electron.mode.getAll();if(r.success&&r.modes){const i=r.modes,o=i.find(s=>s.metadata.id===e().activeModeId)||i[0]||null;n({modes:i,activeMode:o,isLoadingModes:!1})}else console.warn(" Failed to load modes:",r.error),n({isLoadingModes:!1})}catch(r){console.warn(" Could not load modes:",r),n({isLoadingModes:!1})}},setActiveMode:async r=>{try{await window.electron.mode.setActive(r);const i=e().modes.find(o=>o.metadata.id===r)||null;if(n({activeModeId:r,activeMode:i}),i){const{useRAGQueryStore:o}=await _e(async()=>{const{useRAGQueryStore:l}=await Promise.resolve().then(()=>yee);return{useRAGQueryStore:l}},void 0,import.meta.url),s={temperature:i.generationParams.temperature,top_p:i.generationParams.top_p,top_k:i.generationParams.top_k,repeat_penalty:i.generationParams.repeat_penalty},a=i.ragOverrides;a.topK!==void 0&&(s.topK=a.topK),a.sourceType!==void 0&&(s.sourceType=a.sourceType),a.numCtx!==void 0&&(s.numCtx=a.numCtx),o.getState().setParams(s),console.log(` Mode activated: ${r}`,s)}}catch(i){console.error(" Failed to set active mode:",i)}},setCategoryFilter:r=>{n({categoryFilter:r})},getFilteredModes:()=>{const{modes:r,categoryFilter:i}=e();return i==="all"?r:r.filter(o=>o.metadata.category===i)},checkModelCompatibility:r=>{const{activeMode:i}=e();if(!i||!i.modelRecommendation)return{compatible:!0};const o=i.modelRecommendation;if((r.includes("qwen2.5-0.5b")||r.includes("embedded"))&&!o.embeddedCompatible){const s=document.documentElement.lang||"fr";return{compatible:!1,warning:o.warningMessage?.[s]||o.warningMessage?.fr}}return{compatible:!0}},saveCustomMode:async(r,i)=>{try{await window.electron.mode.save(r,i),await e().loadModes(),console.log(` Custom mode saved: ${r.metadata?.id}`)}catch(o){throw console.error(" Failed to save custom mode:",o),o}},deleteCustomMode:async(r,i)=>{try{await window.electron.mode.delete(r,i),e().activeModeId===r&&await e().setActiveMode("default-assistant"),await e().loadModes(),console.log(` Custom mode deleted: ${r}`)}catch(o){throw console.error(" Failed to delete custom mode:",o),o}},importMode:async r=>{try{const i=await window.electron.dialog.openFile({filters:[{name:"Mode JSON",extensions:["json"]}],properties:["openFile"]});if(i.canceled||!i.filePaths?.[0])return;await window.electron.mode.import(i.filePaths[0],r),await e().loadModes(),console.log(` Mode imported from: ${i.filePaths[0]}`)}catch(i){throw console.error(" Failed to import mode:",i),i}},exportMode:async r=>{try{const i=await window.electron.dialog.saveFile({defaultPath:`${r}.json`,filters:[{name:"Mode JSON",extensions:["json"]}]});if(i.canceled||!i.filePath)return;await window.electron.mode.export(r,i.filePath),console.log(` Mode exported to: ${i.filePath}`)}catch(i){throw console.error(" Failed to export mode:",i),i}}}),{name:"cliodeck-active-mode",partialize:n=>({activeModeId:n.activeModeId})})),pwe=Object.freeze(Object.defineProperty({__proto__:null,useModeStore:u3},Symbol.toStringTag,{value:"Module"})),mwe=({source:n,index:e})=>{const{t:r}=qt("common"),[i,o]=M.useState(!1),s=()=>{window.electron.pdf.openAtPage(n.documentId,n.pageNumber)},a=()=>n.author&&n.year?`${n.author} (${n.year})`:n.documentTitle,l=()=>`${Math.round(n.similarity*100)}%`;return p.jsxs("div",{className:"source-card",children:[p.jsxs("div",{className:"source-header",onClick:()=>o(!i),children:[p.jsxs("div",{className:"source-index",children:[r("chat.source")," ",e]}),p.jsxs("div",{className:"source-info",children:[p.jsx("div",{className:"source-title",children:a()}),p.jsxs("div",{className:"source-meta",children:[r("chat.page")," ",n.pageNumber,"  ",r("chat.similarity")," ",l()]})]}),p.jsx("button",{className:"source-expand-btn",children:i?"":""})]}),i&&p.jsxs("div",{className:"source-content",children:[p.jsxs("div",{className:"source-excerpt",children:[p.jsx("div",{className:"excerpt-label",children:r("chat.excerpt")}),p.jsx("p",{className:"excerpt-text",children:n.chunkContent})]}),p.jsx("div",{className:"source-actions",children:p.jsxs("button",{className:"source-action-btn",onClick:s,children:[" ",r("chat.openPDF")]})})]})]})},BB=({message:n,isStreaming:e=!1})=>{const{t:r,i18n:i}=qt("common"),o=i.language?.substring(0,2)||"fr",s=n.role==="user",[a,l]=M.useState(!1),{modes:c}=u3(),u=M.useMemo(()=>!n.modeId||n.modeId==="default-assistant"?null:c.find(m=>m.metadata.id===n.modeId)?.metadata.name[o]||n.modeId,[n.modeId,c,o]),d=M.useMemo(()=>{if(s)return null;try{return Mn.parse(n.content,{breaks:!0,gfm:!0})}catch(f){return console.error("Markdown parsing error:",f),n.content}},[n.content,s]),h=f=>new Intl.DateTimeFormat("fr-FR",{hour:"2-digit",minute:"2-digit"}).format(f);return p.jsxs("div",{className:`message-bubble ${s?"user":"assistant"}`,children:[p.jsxs("div",{className:"message-header",children:[p.jsx("span",{className:"message-avatar",children:s?"":""}),p.jsx("span",{className:"message-role",children:r(s?"chat.you":"chat.assistant")}),p.jsx("span",{className:"message-time",children:h(n.timestamp)}),e&&p.jsx("span",{className:"streaming-indicator",children:""}),!s&&u&&p.jsx("span",{className:"message-mode-badge",children:u})]}),p.jsx("div",{className:"message-content",children:s?p.jsx("p",{children:n.content}):p.jsx("div",{className:"message-markdown",dangerouslySetInnerHTML:{__html:d||n.content}})}),!s&&n.ragUsed===!1&&!n.isError&&p.jsxs("div",{className:"message-no-context-warning",children:[p.jsx("span",{className:"warning-icon",children:""}),p.jsx("span",{className:"warning-text",children:r("chat.noContextWarning")})]}),n.sources&&n.sources.length>0&&p.jsxs("div",{className:"message-sources",children:[p.jsxs("div",{className:"sources-header",children:[p.jsx("span",{className:"sources-icon",children:""}),p.jsxs("span",{className:"sources-title",children:[r("chat.sources")," (",n.sources.length,")"]})]}),p.jsx("div",{className:"sources-list",children:n.sources.map((f,m)=>p.jsx(mwe,{source:f,index:m+1},m))})]}),!s&&n.explanation&&p.jsxs("div",{className:"message-explanation",children:[p.jsxs("button",{className:"explanation-toggle",onClick:()=>l(!a),children:[p.jsx("span",{className:"explanation-icon",children:""}),p.jsx("span",{className:"explanation-title",children:a?r("chat.hideExplanation","Masquer les dtails"):r("chat.showExplanation","Comment cette rponse a t gnre")}),p.jsx("span",{className:`explanation-chevron ${a?"open":""}`,children:""})]}),a&&p.jsxs("div",{className:"explanation-content",children:[p.jsxs("div",{className:"explanation-section",children:[p.jsx("h4",{children:" Recherche"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Rsultats trouvs:"})," ",n.explanation.search.totalResults," chunks"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Dure:"})," ",n.explanation.search.searchDurationMs,"ms ",n.explanation.search.cacheHit&&"(cache)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Type de sources:"})," ",n.explanation.search.sourceType==="primary"?"Archives (Tropy)":n.explanation.search.sourceType==="secondary"?"Bibliographie (PDFs)":"Toutes"]})]}),n.explanation.search.documents.length>0&&p.jsxs("details",{className:"explanation-documents",children:[p.jsxs("summary",{children:["Documents consults (",n.explanation.search.documents.length,")"]}),p.jsx("ul",{children:n.explanation.search.documents.map((f,m)=>p.jsxs("li",{children:[p.jsx("strong",{children:f.title}),p.jsxs("span",{className:"doc-meta",children:[" (",f.chunkCount," chunks, score: ",(f.similarity*100).toFixed(1),"%)"]})]},m))})]})]}),n.explanation.compression&&p.jsxs("div",{className:"explanation-section",children:[p.jsx("h4",{children:" Compression"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"tat:"})," ",n.explanation.compression.enabled?"Active":"Dsactive"]}),n.explanation.compression.enabled&&p.jsxs(p.Fragment,{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Chunks:"})," ",n.explanation.compression.originalChunks,"  ",n.explanation.compression.finalChunks]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Taille:"})," ",(n.explanation.compression.originalSize/1e3).toFixed(1),"k  ",(n.explanation.compression.finalSize/1e3).toFixed(1),"k caractres"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Rduction:"})," ",n.explanation.compression.reductionPercent.toFixed(1),"%"]}),n.explanation.compression.strategy&&p.jsxs("li",{children:[p.jsx("strong",{children:"Stratgie:"})," ",n.explanation.compression.strategy]})]})]})]}),n.explanation.graph?.enabled&&p.jsxs("div",{className:"explanation-section",children:[p.jsx("h4",{children:" Graphe de connaissances"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Documents lis:"})," ",n.explanation.graph.relatedDocsFound]}),n.explanation.graph.documentTitles.length>0&&p.jsxs("li",{children:[p.jsx("strong",{children:"Titres:"})," ",n.explanation.graph.documentTitles.join(", ")]})]})]}),p.jsxs("div",{className:"explanation-section",children:[p.jsx("h4",{children:" Gnration"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Fournisseur:"})," ",n.explanation.llm.provider]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Modle:"})," ",n.explanation.llm.model]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Fentre de contexte:"})," ",n.explanation.llm.contextWindow," tokens"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Temprature:"})," ",n.explanation.llm.temperature]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Taille du prompt:"})," ",(n.explanation.llm.promptSize/1e3).toFixed(1),"k caractres"]})]})]}),p.jsxs("div",{className:"explanation-section",children:[p.jsx("h4",{children:" Temps d'excution"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Recherche:"})," ",n.explanation.timing.searchMs,"ms"]}),n.explanation.timing.compressionMs&&p.jsxs("li",{children:[p.jsx("strong",{children:"Compression:"})," ",n.explanation.timing.compressionMs,"ms"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Gnration:"})," ",n.explanation.timing.generationMs,"ms"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Total:"})," ",n.explanation.timing.totalMs,"ms"]})]})]})]})]})]})},gwe=M.memo(({messages:n})=>{const e=M.useRef(null),{isProcessing:r,currentStreamingMessage:i}=iee();return M.useEffect(()=>{e.current?.scrollIntoView({behavior:"smooth"})},[n,i]),p.jsxs("div",{className:"message-list",children:[n.map(o=>p.jsx(BB,{message:o},o.id)),r&&i&&p.jsx(BB,{message:{id:"streaming",role:"assistant",content:i,timestamp:new Date},isStreaming:!0}),r&&!i&&p.jsxs("div",{className:"typing-indicator",children:[p.jsx("div",{className:"typing-dot"}),p.jsx("div",{className:"typing-dot"}),p.jsx("div",{className:"typing-dot"})]}),p.jsx("div",{ref:e})]})},(n,e)=>n.messages===e.messages),ywe=({value:n,onChange:e,onSend:r,onCancel:i,isProcessing:o})=>{const{t:s}=qt("common"),a=M.useRef(null);M.useEffect(()=>{a.current&&(a.current.style.height="auto",a.current.style.height=`${Math.min(a.current.scrollHeight,120)}px`)},[n]);const l=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),!o&&n.trim()&&r())};return p.jsxs("div",{className:"message-input",children:[p.jsxs("div",{className:"input-container",children:[p.jsx("textarea",{ref:a,className:"input-textarea",placeholder:s("chat.placeholder"),value:n,onChange:c=>e(c.target.value),onKeyDown:l,disabled:o,rows:1}),p.jsx("div",{className:"input-actions",children:o?p.jsx("button",{className:"input-btn cancel-btn",onClick:i,title:s("chat.cancel"),children:""}):p.jsx("button",{className:"input-btn send-btn",onClick:r,disabled:!n.trim(),title:s("chat.send"),children:""})})]}),p.jsx("div",{className:"input-hint",children:s(o?"chat.generating":"chat.newLineHint")})]})},Yi={provider:"auto",model:"gemma2:2b",topK:10,timeout:6e5,numCtx:4096,sourceType:"both",selectedCollectionKeys:[],selectedDocumentIds:[],temperature:.1,top_p:.85,top_k:40,repeat_penalty:1.1,systemPromptLanguage:"fr",useCustomSystemPrompt:!1};function vwe(n){const e=[],r=(o,s=0)=>{e.push({...o,level:s}),n.filter(l=>l.parentKey===o.key).forEach(l=>r(l,s+1))};return n.filter(o=>!o.parentKey).forEach(o=>r(o)),e}const Eb=El()(gee((n,e)=>({params:Yi,availableModels:[],isLoadingModels:!1,availableCollections:[],isLoadingCollections:!1,availableDocuments:[],isLoadingDocuments:!1,isSettingsPanelOpen:!1,setParams:r=>{n(i=>({params:{...i.params,...r}}))},resetToDefaults:async()=>{try{const r=await window.electron.config.getAll(),i=r.llm,o=r.rag;n({params:{provider:i.generationProvider||Yi.provider,model:i.ollamaChatModel||Yi.model,topK:o.topK||Yi.topK,timeout:Yi.timeout,numCtx:o.numCtx||Yi.numCtx,sourceType:Yi.sourceType,selectedCollectionKeys:Yi.selectedCollectionKeys,selectedDocumentIds:Yi.selectedDocumentIds,temperature:Yi.temperature,top_p:Yi.top_p,top_k:Yi.top_k,repeat_penalty:Yi.repeat_penalty,systemPromptLanguage:o.systemPromptLanguage||Yi.systemPromptLanguage,customSystemPrompt:o.customSystemPrompt,useCustomSystemPrompt:o.useCustomSystemPrompt||Yi.useCustomSystemPrompt}}),console.log(" RAG query params reset to config defaults")}catch{n({params:Yi})}},loadAvailableModels:async()=>{n({isLoadingModels:!0});try{console.log(" Loading available Ollama models...");const r=await window.electron.ollama.listModels();if(console.log(" Ollama API response:",r),r.success&&r.models){console.log(` All models from Ollama (${r.models.length}):`,r.models.map(o=>o.id));const i=r.models.filter(o=>!o.id.includes("embed")&&!o.id.includes("embedding"));console.log(` Chat models after filtering (${i.length}):`,i.map(o=>o.id)),n({availableModels:i,isLoadingModels:!1}),console.log(` Loaded ${i.length} chat models from Ollama`)}else throw new Error(r.error||"Failed to load models")}catch(r){console.warn("  Could not load Ollama models:",r),n({availableModels:[],isLoadingModels:!1})}},loadAvailableCollections:async()=>{n({isLoadingCollections:!0});try{console.log(" Loading available Zotero collections...");const r=await window.electron.corpus.getCollections();if(r.success&&r.collections){const i=vwe(r.collections);n({availableCollections:i,isLoadingCollections:!1}),console.log(` Loaded ${i.length} collections`)}else console.warn("  No collections found:",r.error),n({availableCollections:[],isLoadingCollections:!1})}catch(r){console.warn("  Could not load collections:",r),n({availableCollections:[],isLoadingCollections:!1})}},setSelectedCollections:r=>{n(i=>({params:{...i.params,selectedCollectionKeys:r}}))},loadAvailableDocuments:async()=>{n({isLoadingDocuments:!0});try{console.log(" Loading available documents...");const r=await window.electron.pdf.getAll();if(r.success&&r.documents){const i=r.documents.map(o=>({id:o.id,title:o.title||"Untitled",author:o.author,year:o.year}));i.sort((o,s)=>{const a=o.author||"",l=s.author||"";return a!==l?a.localeCompare(l):o.title.localeCompare(s.title)}),n({availableDocuments:i,isLoadingDocuments:!1}),console.log(` Loaded ${i.length} documents`)}else console.warn("  No documents found:",r.error),n({availableDocuments:[],isLoadingDocuments:!1})}catch(r){console.warn("  Could not load documents:",r),n({availableDocuments:[],isLoadingDocuments:!1})}},setSelectedDocuments:r=>{n(i=>({params:{...i.params,selectedDocumentIds:r}}))},toggleSettingsPanel:()=>{n(r=>({isSettingsPanelOpen:!r.isSettingsPanelOpen}))}}),{name:"rag-query-params",partialize:n=>({params:n.params})}));typeof window<"u"&&Eb.getState().resetToDefaults();const yee=Object.freeze(Object.defineProperty({__proto__:null,useRAGQueryStore:Eb},Symbol.toStringTag,{value:"Module"})),xwe=({collections:n,selectedKeys:e,onChange:r,placeholder:i="All collections",disabled:o=!1})=>{const[s,a]=M.useState(!1),l=M.useRef(null);M.useEffect(()=>{const h=f=>{l.current&&!l.current.contains(f.target)&&a(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=h=>{e.includes(h)?r(e.filter(f=>f!==h)):r([...e,h])},u=h=>{h.stopPropagation(),r([])},d=n.filter(h=>e.includes(h.key)).map(h=>h.name);return p.jsxs("div",{className:`collection-multiselect ${o?"disabled":""}`,ref:l,children:[p.jsxs("div",{className:"multiselect-trigger",onClick:()=>!o&&a(!s),tabIndex:o?-1:0,onKeyDown:h=>{!o&&(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),a(!s))},children:[p.jsx("span",{className:"selected-text",children:e.length===0?i:e.length===1?d[0]:`${e.length} collection(s)`}),e.length>0&&!o&&p.jsx("button",{className:"clear-btn",onClick:u,title:"Clear selection",type:"button",children:p.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),p.jsx("svg",{className:`chevron ${s?"rotated":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&!o&&p.jsx("div",{className:"multiselect-dropdown",children:n.length===0?p.jsx("div",{className:"no-collections",children:"No collections found"}):n.map(h=>p.jsxs("div",{className:`collection-option ${e.includes(h.key)?"selected":""}`,style:{paddingLeft:`${12+(h.level||0)*16}px`},onClick:()=>c(h.key),onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),c(h.key))},tabIndex:0,role:"option","aria-selected":e.includes(h.key),children:[p.jsx("span",{className:"collection-name",children:h.name}),e.includes(h.key)&&p.jsx("svg",{className:"check-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("polyline",{points:"20 6 9 17 4 12"})})]},h.key))})]})},bwe=({documents:n,selectedIds:e,onChange:r,placeholder:i="All documents",disabled:o=!1})=>{const[s,a]=M.useState(!1),[l,c]=M.useState(""),u=M.useRef(null),d=M.useRef(null);M.useEffect(()=>{const b=w=>{u.current&&!u.current.contains(w.target)&&(a(!1),c(""))};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),M.useEffect(()=>{s&&d.current&&d.current.focus()},[s]);const h=b=>{e.includes(b)?r(e.filter(w=>w!==b)):r([...e,b])},f=b=>{b.stopPropagation(),r([])},m=n.filter(b=>e.includes(b.id)),v=n.filter(b=>{if(!l)return!0;const w=l.toLowerCase();return b.title.toLowerCase().includes(w)||b.author&&b.author.toLowerCase().includes(w)||b.year&&b.year.includes(l)}),x=b=>b.author&&b.year?`${b.author} (${b.year})`:b.author?b.author:b.title.length>40?b.title.substring(0,37)+"...":b.title;return p.jsxs("div",{className:`collection-multiselect ${o?"disabled":""}`,ref:u,children:[p.jsxs("div",{className:"multiselect-trigger",onClick:()=>!o&&a(!s),tabIndex:o?-1:0,onKeyDown:b=>{!o&&(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),a(!s))},children:[p.jsx("span",{className:"selected-text",children:e.length===0?i:e.length===1?x(m[0]):`${e.length} document(s)`}),e.length>0&&!o&&p.jsx("button",{className:"clear-btn",onClick:f,title:"Clear selection",type:"button",children:p.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),p.jsx("svg",{className:`chevron ${s?"rotated":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&!o&&p.jsxs("div",{className:"multiselect-dropdown",style:{maxHeight:"300px"},children:[p.jsx("div",{style:{padding:"8px",borderBottom:"1px solid var(--border-color)"},children:p.jsx("input",{ref:d,type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Search documents...",onClick:b=>b.stopPropagation(),style:{width:"100%",padding:"6px 8px",fontSize:"12px",border:"1px solid var(--border-color)",borderRadius:"4px",background:"var(--surface-variant)",color:"var(--text-color)"}})}),p.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:v.length===0?p.jsx("div",{className:"no-collections",children:n.length===0?"No documents found":"No matching documents"}):v.map(b=>p.jsxs("div",{className:`collection-option ${e.includes(b.id)?"selected":""}`,style:{paddingLeft:"12px"},onClick:()=>h(b.id),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),h(b.id))},tabIndex:0,role:"option","aria-selected":e.includes(b.id),children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[p.jsx("span",{className:"collection-name",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:b.title}),(b.author||b.year)&&p.jsxs("span",{style:{fontSize:"10px",color:"var(--text-muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[b.author,b.author&&b.year&&" - ",b.year]})]}),e.includes(b.id)&&p.jsx("svg",{className:"check-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("polyline",{points:"20 6 9 17 4 12"})})]},b.id))})]})]})},Q1={"gemma2:2b":{maxContext:8192,recommended:4096},"gemma2:9b":{maxContext:8192,recommended:8192},"gemma:2b":{maxContext:8192,recommended:4096},"gemma:7b":{maxContext:8192,recommended:8192},"llama3.2:1b":{maxContext:131072,recommended:32768},"llama3.2:3b":{maxContext:131072,recommended:32768},"llama3.1:8b":{maxContext:131072,recommended:32768},"llama3:8b":{maxContext:8192,recommended:8192},"mistral:7b":{maxContext:32768,recommended:16384},"mistral:7b-instruct":{maxContext:32768,recommended:16384},"mistral:7b-instruct-q4_0":{maxContext:32768,recommended:16384},"ministral:3b":{maxContext:131072,recommended:32768},"ministral:8b":{maxContext:131072,recommended:32768},"phi3:mini":{maxContext:131072,recommended:16384},"phi3:medium":{maxContext:131072,recommended:16384},"phi4:mini":{maxContext:131072,recommended:32768},"qwen2.5:3b":{maxContext:32768,recommended:16384},"qwen2.5:7b":{maxContext:131072,recommended:32768},"smollm2:1.7b":{maxContext:8192,recommended:4096},"deepseek-r1:1.5b":{maxContext:65536,recommended:16384},"deepseek-r1:7b":{maxContext:65536,recommended:32768},"deepseek-r1:8b":{maxContext:65536,recommended:32768}};function wwe(n){if(Q1[n])return Q1[n];const e=n.split("-")[0];if(Q1[e])return Q1[e];const r=n.split(":")[0],i=Object.entries(Q1).find(([o])=>o.startsWith(r+":"));return i?i[1]:{maxContext:4096,recommended:2048}}function M_(n){return n>=1024?`${Math.round(n/1024)}K`:n.toString()}const kwe=()=>{const{t:n}=qt("common"),{params:e,availableModels:r,isLoadingModels:i,availableCollections:o,isLoadingCollections:s,availableDocuments:a,isLoadingDocuments:l,isSettingsPanelOpen:c,setParams:u,resetToDefaults:d,toggleSettingsPanel:h,loadAvailableModels:f,loadAvailableCollections:m,setSelectedCollections:v,loadAvailableDocuments:x,setSelectedDocuments:b}=Eb(),[w,S]=M.useState(!1),[_,P]=M.useState(!1),A=M.useRef(!1),T=M.useMemo(()=>wwe(e.model),[e.model]);M.useEffect(()=>{(async()=>{try{const Y=await window.electron.embeddedLLM.isDownloaded();Y?.success&&P(Y.downloaded)}catch(Y){console.warn("Could not check embedded model status:",Y)}})()},[]),M.useEffect(()=>{c&&r.length===0&&!i&&!A.current&&(A.current=!0,console.log(" Auto-loading models because panel is open and no models available..."),f())},[c,r.length,i]);const E=()=>{h(),!c&&r.length===0&&setTimeout(()=>{f()},100)},L=async()=>{await d()},$=()=>{A.current=!1,f()},z=()=>{m()},B=()=>{x()};return M.useEffect(()=>{c&&o.length===0&&!s&&m()},[c]),M.useEffect(()=>{c&&a.length===0&&!l&&x()},[c]),p.jsxs("div",{className:"rag-settings-panel",children:[p.jsxs("button",{className:"settings-toggle",onClick:E,children:[p.jsx(vj,{size:14}),p.jsx("span",{children:"RAG Settings"}),c?p.jsx(TQ,{size:16}):p.jsx(Vp,{size:16})]}),c&&p.jsxs("div",{className:"settings-content",children:[p.jsxs("div",{className:"setting-group",children:[p.jsx("label",{htmlFor:"provider-select",children:n("ragSettings.provider")}),p.jsxs("select",{id:"provider-select",value:e.provider,onChange:D=>u({provider:D.target.value}),children:[p.jsx("option",{value:"auto",children:n("ragSettings.providerAuto")}),p.jsx("option",{value:"ollama",children:n("ragSettings.providerOllama")}),p.jsxs("option",{value:"embedded",disabled:!_,children:[n("ragSettings.providerEmbedded"),!_&&` (${n("ragSettings.notDownloaded")})`]})]}),p.jsxs("small",{className:"setting-hint",children:[e.provider==="auto"&&n("ragSettings.providerAutoDesc"),e.provider==="ollama"&&n("ragSettings.providerOllamaDesc"),e.provider==="embedded"&&n("ragSettings.providerEmbeddedDesc")]})]}),(e.provider==="ollama"||e.provider==="auto")&&p.jsxs("div",{className:"setting-group",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("label",{htmlFor:"model-select",children:["Model",i&&p.jsx("span",{className:"loading-indicator",children:" (loading...)"})]}),p.jsx("button",{onClick:$,disabled:i,title:"Refresh models",style:{padding:"4px 6px",fontSize:"11px",background:"var(--surface-variant)",border:"1px solid var(--border-color)",borderRadius:"3px",cursor:i?"not-allowed":"pointer",opacity:i?.5:1,display:"flex",alignItems:"center",color:"var(--text-secondary)"},children:p.jsx(ul,{size:12})})]}),p.jsx("select",{id:"model-select",value:e.model,onChange:D=>u({model:D.target.value}),disabled:i,children:r.length===0&&!i?p.jsxs("option",{value:e.model,children:[e.model," (current)"]}):r.map(D=>p.jsxs("option",{value:D.id,children:[D.name," (",D.size,")"]},D.id))}),p.jsx("small",{className:"setting-hint",children:r.length===0&&!i?p.jsxs(p.Fragment,{children:[p.jsx(xj,{size:12})," No models loaded. Load a project first, then click ",p.jsx(ul,{size:10,style:{verticalAlign:"middle"}}),"."]}):`${r.length} models available. Larger models are slower but better.`})]}),p.jsxs("div",{className:"setting-group",children:[p.jsx("label",{htmlFor:"source-type-select",children:n("ragSettings.sourceType","Source Type")}),p.jsxs("div",{className:"source-type-selector",children:[p.jsxs("button",{className:`source-type-btn secondary ${e.sourceType==="secondary"?"active":""}`,onClick:()=>u({sourceType:"secondary"}),title:n("ragSettings.secondaryDesc","Bibliography (PDFs from Zotero)"),children:[p.jsx("span",{className:"source-icon",children:p.jsx(Ac,{size:16})}),p.jsx("span",{children:n("ragSettings.secondary","Bibliography")})]}),p.jsxs("button",{className:`source-type-btn primary ${e.sourceType==="primary"?"active":""}`,onClick:()=>u({sourceType:"primary"}),title:n("ragSettings.primaryDesc","Primary Sources (Tropy archives)"),children:[p.jsx("span",{className:"source-icon",children:p.jsx(vB,{size:16})}),p.jsx("span",{children:n("ragSettings.primary","Archives")})]}),p.jsxs("button",{className:`source-type-btn both ${e.sourceType==="both"?"active":""}`,onClick:()=>u({sourceType:"both"}),title:n("ragSettings.bothDesc","Search in both sources"),children:[p.jsxs("span",{className:"source-icon",children:[p.jsx(Ac,{size:14}),p.jsx(vB,{size:14})]}),p.jsx("span",{children:n("ragSettings.both","Both")})]})]}),p.jsxs("small",{className:"setting-hint",children:[e.sourceType==="secondary"&&n("ragSettings.secondaryHint","Search only in bibliography (PDFs)"),e.sourceType==="primary"&&n("ragSettings.primaryHint","Search only in primary sources (Tropy)"),e.sourceType==="both"&&n("ragSettings.bothHint","Search in all sources")]})]}),(e.sourceType==="secondary"||e.sourceType==="both")&&p.jsxs("div",{className:"setting-group",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("label",{htmlFor:"collection-filter",children:["Filter by Collection",s&&p.jsx("span",{className:"loading-indicator",children:" (loading...)"})]}),p.jsx("button",{onClick:z,disabled:s,title:"Refresh collections",style:{padding:"4px 6px",fontSize:"11px",background:"var(--surface-variant)",border:"1px solid var(--border-color)",borderRadius:"3px",cursor:s?"not-allowed":"pointer",opacity:s?.5:1,display:"flex",alignItems:"center",color:"var(--text-secondary)"},children:p.jsx(ul,{size:12})})]}),p.jsx(xwe,{collections:o,selectedKeys:e.selectedCollectionKeys,onChange:v,placeholder:"All collections (no filter)",disabled:s}),p.jsx("small",{className:"setting-hint",children:e.selectedCollectionKeys.length===0?"Search will include all documents":`Search limited to ${e.selectedCollectionKeys.length} collection(s)`})]}),(e.sourceType==="secondary"||e.sourceType==="both")&&p.jsxs("div",{className:"setting-group",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("label",{htmlFor:"document-filter",children:["Filter by Document",l&&p.jsx("span",{className:"loading-indicator",children:" (loading...)"})]}),p.jsx("button",{onClick:B,disabled:l,title:"Refresh documents",style:{padding:"4px 6px",fontSize:"11px",background:"var(--surface-variant)",border:"1px solid var(--border-color)",borderRadius:"3px",cursor:l?"not-allowed":"pointer",opacity:l?.5:1,display:"flex",alignItems:"center",color:"var(--text-secondary)"},children:p.jsx(ul,{size:12})})]}),p.jsx(bwe,{documents:a,selectedIds:e.selectedDocumentIds,onChange:b,placeholder:"All documents (no filter)",disabled:l}),p.jsx("small",{className:"setting-hint",children:e.selectedDocumentIds.length===0?"Search will include all indexed documents":`Search limited to ${e.selectedDocumentIds.length} document(s)`})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"topk-slider",children:["Sources (Top-K): ",p.jsx("strong",{children:e.topK})]}),p.jsx("input",{id:"topk-slider",type:"range",min:"5",max:"30",step:"1",value:e.topK,onChange:D=>u({topK:parseInt(D.target.value)})}),p.jsx("small",{className:"setting-hint",children:"Number of document chunks to retrieve"})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"timeout-slider",children:["Timeout: ",p.jsxs("strong",{children:[Math.floor(e.timeout/6e4)," min"]})]}),p.jsx("input",{id:"timeout-slider",type:"range",min:"60000",max:"900000",step:"60000",value:e.timeout,onChange:D=>u({timeout:parseInt(D.target.value)})}),p.jsx("small",{className:"setting-hint",children:"Maximum wait time for response"})]}),p.jsxs("button",{className:"advanced-toggle",onClick:()=>S(!w),children:[w?p.jsx(Vp,{size:14}):p.jsx(QC,{size:14}),p.jsx("span",{children:"Advanced Parameters"})]}),w&&p.jsxs("div",{className:"advanced-settings",children:[p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"context-slider",children:["Context Window: ",p.jsx("strong",{children:M_(e.numCtx)})," tokens"]}),p.jsx("input",{id:"context-slider",type:"range",min:"2048",max:T.maxContext,step:"1024",value:e.numCtx,onChange:D=>u({numCtx:parseInt(D.target.value)})}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"var(--text-muted)"},children:[p.jsx("span",{children:"2K"}),p.jsxs("span",{children:["Max: ",M_(T.maxContext)]})]}),p.jsxs("small",{className:"setting-hint",children:[p.jsx($ve,{size:12})," Recommended for ",e.model,": ",p.jsx("strong",{children:M_(T.recommended)}),p.jsx("button",{onClick:()=>u({numCtx:T.recommended}),style:{marginLeft:"8px",padding:"2px 6px",fontSize:"10px",background:"var(--surface-variant)",border:"1px solid var(--border-color)",borderRadius:"3px",cursor:"pointer",color:"var(--text-secondary)"},children:"Use recommended"})]})]}),p.jsxs("div",{className:"setting-group",children:[p.jsx("label",{htmlFor:"system-prompt-lang",children:"System Prompt Language"}),p.jsxs("select",{id:"system-prompt-lang",value:e.systemPromptLanguage,onChange:D=>u({systemPromptLanguage:D.target.value}),children:[p.jsx("option",{value:"fr",children:" French (Franais)"}),p.jsx("option",{value:"en",children:" English"})]}),p.jsx("small",{className:"setting-hint",children:"Language for the default system prompt (instructs the AI how to respond)"})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[p.jsx("input",{type:"checkbox",checked:e.useCustomSystemPrompt,onChange:D=>u({useCustomSystemPrompt:D.target.checked})}),p.jsx("span",{children:"Use Custom System Prompt"})]}),p.jsx("small",{className:"setting-hint",children:"Override the default system prompt with a custom one"})]}),e.useCustomSystemPrompt&&p.jsxs("div",{className:"setting-group",children:[p.jsx("label",{htmlFor:"custom-prompt",children:"Custom System Prompt"}),p.jsx("textarea",{id:"custom-prompt",rows:6,value:e.customSystemPrompt||"",onChange:D=>u({customSystemPrompt:D.target.value}),placeholder:"Enter your custom system prompt here...",style:{width:"100%",padding:"8px",fontSize:"12px",fontFamily:"monospace",resize:"vertical",borderRadius:"4px",border:"1px solid var(--border-color)",background:"var(--surface-variant)",color:"var(--text-color)"}}),p.jsx("small",{className:"setting-hint",children:"This prompt instructs the AI how to respond to your queries"})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"temperature-slider",children:["Temperature: ",p.jsx("strong",{children:e.temperature.toFixed(2)})]}),p.jsx("input",{id:"temperature-slider",type:"range",min:"0",max:"1",step:"0.05",value:e.temperature,onChange:D=>u({temperature:parseFloat(D.target.value)})}),p.jsx("small",{className:"setting-hint",children:"Lower = more focused, higher = more creative"})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"topp-slider",children:["Top-P: ",p.jsx("strong",{children:e.top_p.toFixed(2)})]}),p.jsx("input",{id:"topp-slider",type:"range",min:"0.1",max:"1",step:"0.05",value:e.top_p,onChange:D=>u({top_p:parseFloat(D.target.value)})}),p.jsx("small",{className:"setting-hint",children:"Nucleus sampling threshold"})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"llm-topk-slider",children:["Top-K (LLM): ",p.jsx("strong",{children:e.top_k})]}),p.jsx("input",{id:"llm-topk-slider",type:"range",min:"1",max:"100",step:"1",value:e.top_k,onChange:D=>u({top_k:parseInt(D.target.value)})}),p.jsx("small",{className:"setting-hint",children:"Number of tokens to consider"})]}),p.jsxs("div",{className:"setting-group",children:[p.jsxs("label",{htmlFor:"repeat-penalty-slider",children:["Repeat Penalty: ",p.jsx("strong",{children:e.repeat_penalty.toFixed(2)})]}),p.jsx("input",{id:"repeat-penalty-slider",type:"range",min:"1",max:"2",step:"0.05",value:e.repeat_penalty,onChange:D=>u({repeat_penalty:parseFloat(D.target.value)})}),p.jsx("small",{className:"setting-hint",children:"Penalize repetitive text"})]})]}),p.jsxs("button",{className:"reset-button",onClick:L,children:[p.jsx(OQ,{size:14}),p.jsx("span",{children:"Reset to Config Defaults"})]})]})]})},Swe={MessageSquare:n3,BookOpen:Ac,FileSearch:EQ,Eye:e3,PenTool:jQ,Compass:MQ,Sparkles:DQ},Cwe=["all","general","research","writing","review","analysis","methodology"],_we=()=>{const{t:n,i18n:e}=qt("common"),r=e.language?.substring(0,2)||"fr",{modes:i,activeMode:o,activeModeId:s,isLoadingModes:a,loadModes:l,setActiveMode:c,categoryFilter:u,setCategoryFilter:d,getFilteredModes:h,checkModelCompatibility:f}=u3(),{params:m}=Eb(),[v,x]=M.useState(!1),b=M.useRef(null);M.useEffect(()=>{l()},[l]),M.useEffect(()=>{const E=L=>{b.current&&!b.current.contains(L.target)&&x(!1)};return v&&document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[v]);const w=f(m.model),S=h(),_=(E,L=14)=>{const $=Swe[E];return $?p.jsx($,{size:L}):p.jsx(n3,{size:L})},P=E=>({all:{fr:"Tous",en:"All"},general:{fr:"Gnral",en:"General"},research:{fr:"Recherche",en:"Research"},writing:{fr:"criture",en:"Writing"},review:{fr:"Relecture",en:"Review"},analysis:{fr:"Analyse",en:"Analysis"},methodology:{fr:"Mthodo",en:"Method."}})[E]?.[r]||E,A=E=>E==="builtin"?null:p.jsx("span",{className:`mode-source-badge mode-source-${E}`,children:E==="global"?"G":"P"}),T=async E=>{await c(E),x(!1)};return a&&i.length===0?null:p.jsxs("div",{className:"mode-selector",ref:b,children:[p.jsxs("button",{className:"mode-selector-trigger",onClick:()=>x(!v),title:r==="fr"?"Changer de mode":"Change mode",children:[o&&_(o.metadata.icon),p.jsx("span",{className:"mode-selector-name",children:o?.metadata.name[r]||"Default"}),p.jsx(Vp,{size:12,className:`mode-chevron ${v?"open":""}`})]}),!w.compatible&&p.jsxs("div",{className:"mode-compatibility-warning",children:[p.jsx(xj,{size:12}),p.jsx("span",{children:w.warning})]}),v&&p.jsxs("div",{className:"mode-dropdown",children:[p.jsx("div",{className:"mode-categories",children:Cwe.map(E=>p.jsx("button",{className:`mode-category-tab ${u===E?"active":""}`,onClick:()=>d(E),children:P(E)},E))}),p.jsx("div",{className:"mode-list",children:S.map(E=>p.jsxs("button",{className:`mode-item ${E.metadata.id===s?"active":""}`,onClick:()=>T(E.metadata.id),children:[p.jsx("span",{className:"mode-item-icon",children:_(E.metadata.icon,16)}),p.jsxs("div",{className:"mode-item-text",children:[p.jsx("div",{className:"mode-item-name",children:E.metadata.name[r]}),p.jsx("div",{className:"mode-item-description",children:E.metadata.description[r]})]}),A(E.source)]},E.metadata.id))})]})]})},sc=({content:n,onLearnMore:e})=>{const[r,i]=M.useState(!1);return p.jsxs("div",{className:"helper-tooltip",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[p.jsx(PQ,{size:14,className:"help-icon"}),r&&p.jsxs("div",{className:"tooltip-content",children:[p.jsx("p",{children:n}),e&&p.jsx("button",{className:"learn-more-btn",onClick:e,children:"En savoir plus "})]})]})},Awe=()=>{const{t:n}=qt("common"),{messages:e,isProcessing:r,sendMessage:i,cancelGeneration:o,clearChat:s}=iee(),{indexedFilePaths:a,refreshIndexedPDFs:l}=pi(),[c,u]=M.useState(""),[d,h]=M.useState(null),f=a.size;M.useEffect(()=>{l()},[l]),M.useEffect(()=>{const w=(S,_)=>{h({message:_.message,isError:_.stage==="error"})};return window.electron?.ipcRenderer?.on("chat:status",w),()=>{window.electron?.ipcRenderer?.removeListener("chat:status",w)}},[]),M.useEffect(()=>{if(!r&&d){const w=d.isError?5e3:0,S=setTimeout(()=>h(null),w);return()=>clearTimeout(S)}},[r,d]);const m=async()=>{if(Ye.component("ChatInterface","handleSend called",{inputValue:c,isProcessing:r}),!c.trim()||r){Ye.component("ChatInterface","Send blocked - empty input or processing");return}const w=c.trim();u("");try{Ye.component("ChatInterface","Calling sendMessage",{query:w}),await i(w)}catch(S){Ye.error("ChatInterface",S)}},v=()=>{Ye.component("ChatInterface","handleCancel called"),o()},x=()=>{Ye.component("ChatInterface","handleClear called"),window.confirm(n("chat.clearConfirm"))&&s()},b=()=>{window.dispatchEvent(new CustomEvent("show-methodology-modal",{detail:{feature:"chat"}}))};return p.jsxs("div",{className:"chat-interface",children:[p.jsxs("div",{className:"chat-header",children:[p.jsxs("div",{className:"chat-title",children:[p.jsx("h3",{children:n("chat.aiAssistant")}),p.jsx(sc,{content:n("chat.helpText"),onLearnMore:b})]}),p.jsx(_we,{}),p.jsx("button",{className:"toolbar-btn",onClick:x,title:n("chat.clearHistory"),disabled:e.length===0,children:p.jsx(Gu,{size:20,strokeWidth:1})})]}),p.jsxs("div",{className:"chat-messages",children:[e.length===0?p.jsx("div",{className:"chat-empty",children:f>0?p.jsxs(p.Fragment,{children:[p.jsx("h4",{children:n("chat.readyState.title")}),p.jsx("p",{children:n("chat.readyState.message",{count:f})})]}):p.jsxs(p.Fragment,{children:[p.jsx("h4",{children:n("chat.emptyState.title")}),p.jsx("p",{children:n("chat.emptyState.message")})]})}):p.jsx(gwe,{messages:e}),d&&(r||d.isError)&&p.jsx("div",{className:`rag-status-indicator ${d.isError?"rag-status-error":""}`,children:d.message})]}),p.jsx(ywe,{value:c,onChange:u,onSend:m,onCancel:v,isProcessing:r}),p.jsx(kwe,{})]})},Twe=({config:n,onChange:e})=>{const r=I=>{e({...n,topK:I})},i=I=>{e({...n,similarityThreshold:I})},o=I=>{e({...n,chunkingConfig:I})},s=I=>{e({...n,summaryGeneration:I})},a=I=>{e({...n,summaryMaxLength:I})},l=I=>{e({...n,useGraphContext:I})},c=I=>{e({...n,graphSimilarityThreshold:I})},u=I=>{e({...n,additionalGraphDocs:I})},d=I=>{e({...n,includeSummaries:I})},h=I=>{e({...n,enableTopicModeling:I})},f=I=>{e({...n,explorationSimilarityThreshold:I})},m=I=>{e({...n,customChunkingEnabled:I})},v=I=>{e({...n,customMaxChunkSize:I})},x=I=>{e({...n,customMinChunkSize:I})},b=I=>{e({...n,customOverlapSize:I})},w=I=>{e({...n,enableQualityFiltering:I})},S=I=>{e({...n,minChunkEntropy:I})},_=I=>{e({...n,minUniqueWordRatio:I})},P=I=>{e({...n,enablePreprocessing:I})},A=I=>{e({...n,enableOCRCleanup:I})},T=I=>{e({...n,enableHeaderFooterRemoval:I})},E=I=>{e({...n,enableDeduplication:I})},L=I=>{e({...n,enableSimilarityDedup:I})},$=I=>{e({...n,dedupSimilarityThreshold:I})},z=I=>{e({...n,useSemanticChunking:I})},B=I=>{e({...n,semanticSimilarityThreshold:I})},D=I=>{e({...n,semanticWindowSize:I})},Y=I=>{e({...n,enableContextCompression:I})};return p.jsx(On,{title:"Configuration RAG",defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Nombre de chunks (topK)",p.jsx("span",{className:"config-help",children:"Nombre maximum de chunks rcuprs pour rpondre  une question"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"1",max:"20",value:n.topK,onChange:I=>r(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"1",max:"20",value:n.topK,onChange:I=>r(parseInt(I.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Valeur actuelle: ",n.topK," chunks",p.jsx("br",{}),p.jsxs("small",{children:[" 1-5: Rponses rapides, contexte limit",p.jsx("br",{})," 6-10: quilibre vitesse/contexte (recommand)",p.jsx("br",{})," 11-20: Maximum de contexte, plus lent"]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Seuil de similarit",p.jsx("span",{className:"config-help",children:"Score minimum de similarit pour inclure un chunk (0.0 - 1.0)"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:n.similarityThreshold,onChange:I=>i(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0",max:"1",step:"0.05",value:n.similarityThreshold,onChange:I=>i(parseFloat(I.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Valeur actuelle: ",n.similarityThreshold.toFixed(2),p.jsx("br",{}),p.jsxs("small",{children:[" 0.0-0.2: Plus de rsultats, moins prcis",p.jsx("br",{})," 0.2-0.4: quilibre (recommand)",p.jsx("br",{})," 0.4-1.0: Trs prcis, risque de ne rien trouver"]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Stratgie de dcoupage",p.jsx("span",{className:"config-help",children:"Taille des chunks lors de l'indexation"})]}),p.jsxs("select",{value:n.chunkingConfig,onChange:I=>o(I.target.value),className:"config-select",children:[p.jsx("option",{value:"cpuOptimized",children:"Optimis CPU (petits chunks, rapide)"}),p.jsx("option",{value:"standard",children:"Standard (quilibr)"}),p.jsx("option",{value:"large",children:"Large (gros chunks, plus de contexte)"})]}),p.jsx("div",{className:"config-description",children:p.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",marginTop:"8px"},children:[p.jsx("strong",{children:" Attention :"})," Changer cette option ncessite de r-indexer tous les PDFs.",p.jsx("br",{}),p.jsx("small",{children:"Les chunks existants ne seront pas mis  jour automatiquement."})]})})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Gnration de rsums",p.jsx("span",{className:"config-help",children:"Mthode pour gnrer des rsums de documents"})]}),p.jsxs("select",{value:n.summaryGeneration,onChange:I=>s(I.target.value),className:"config-select",children:[p.jsx("option",{value:"disabled",children:"Dsactiv"}),p.jsx("option",{value:"extractive",children:"Extractif (slection de phrases cls)"}),p.jsx("option",{value:"abstractive",children:"Abstractif (gnration via LLM)"})]}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:[" Extractif: Rapide, slectionne les phrases importantes",p.jsx("br",{})," Abstractif: Plus lent, gnre un rsum original (ncessite LLM)"]})})]}),n.summaryGeneration!=="disabled"&&p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Longueur maximale des rsums",p.jsx("span",{className:"config-help",children:"Nombre maximum de mots dans le rsum"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"100",max:"1000",step:"50",value:n.summaryMaxLength,onChange:I=>a(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"100",max:"1000",step:"50",value:n.summaryMaxLength,onChange:I=>a(parseInt(I.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Valeur actuelle: ",n.summaryMaxLength," mots"]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Utiliser le graphe de connaissances",p.jsx("span",{className:"config-help",children:"Enrichir les rsultats avec des documents lis (citations, similarit)"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.useGraphContext,onChange:I=>l(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.useGraphContext?"Activ":"Dsactiv"})]}),p.jsx("div",{className:"config-description",children:p.jsx("small",{children:"Active la recherche de documents lis via citations et similarit smantique"})})]}),n.useGraphContext&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Documents lis  inclure",p.jsx("span",{className:"config-help",children:"Nombre de documents lis  ajouter au contexte"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"1",max:"10",value:n.additionalGraphDocs,onChange:I=>u(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"1",max:"10",value:n.additionalGraphDocs,onChange:I=>u(parseInt(I.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Valeur actuelle: ",n.additionalGraphDocs," documents"]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Seuil de similarit pour le graphe",p.jsx("span",{className:"config-help",children:"Score minimum de similarit pour inclure un document li"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:n.graphSimilarityThreshold,onChange:I=>c(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0.5",max:"1",step:"0.05",value:n.graphSimilarityThreshold,onChange:I=>c(parseFloat(I.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Valeur actuelle: ",n.graphSimilarityThreshold.toFixed(2)]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Utiliser rsums dans le RAG",p.jsx("span",{className:"config-help",children:"Utiliser les rsums au lieu des chunks pour le contexte"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.includeSummaries,onChange:I=>d(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.includeSummaries?"Activ":"Dsactiv"})]}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:["Si activ, utilise les rsums de documents au lieu des chunks dtaills",p.jsx("br",{})," Ncessite que la gnration de rsums soit active"]})})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Seuil de similarit (Exploration)",p.jsx("span",{className:"config-help",children:"Score minimum pour crer des liens de similarit dans le graphe d'exploration"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0.5",max:"0.95",step:"0.05",value:n.explorationSimilarityThreshold,onChange:I=>f(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0.5",max:"0.95",step:"0.05",value:n.explorationSimilarityThreshold,onChange:I=>f(parseFloat(I.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Valeur actuelle: ",n.explorationSimilarityThreshold.toFixed(2),p.jsx("br",{}),p.jsxs("small",{children:[" 0.5-0.6: Plus de connexions, graphe dense",p.jsx("br",{})," 0.7: quilibre (recommand)",p.jsx("br",{})," 0.8-0.95: Connexions trs fortes uniquement"]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Modlisation de topics",p.jsx("span",{className:"config-help",children:"Activer l'analyse thmatique automatique du corpus"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableTopicModeling,onChange:I=>h(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableTopicModeling?"Activ":"Dsactiv"})]}),p.jsx("div",{className:"config-description",children:p.jsx("small",{children:"Active BERTopic pour identifier automatiquement les thmes du corpus"})})]}),p.jsx("div",{className:"config-field",style:{marginTop:"24px",borderTop:"1px solid #ddd",paddingTop:"16px"},children:p.jsx("h4",{style:{margin:"0 0 16px 0",color:"#666"},children:" Optimisation qualit des chunks"})}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Paramtres personnaliss",p.jsx("span",{className:"config-help",children:"Dfinir manuellement la taille des chunks"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.customChunkingEnabled??!1,onChange:I=>m(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.customChunkingEnabled?"Activ":"Dsactiv"})]})]}),n.customChunkingEnabled&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Taille max (mots)"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"100",max:"1500",step:"50",value:n.customMaxChunkSize??500,onChange:I=>v(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"100",max:"1500",value:n.customMaxChunkSize??500,onChange:I=>v(parseInt(I.target.value)),className:"config-number"})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Taille min (mots)"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"20",max:"200",step:"10",value:n.customMinChunkSize??100,onChange:I=>x(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"20",max:"200",value:n.customMinChunkSize??100,onChange:I=>x(parseInt(I.target.value)),className:"config-number"})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Chevauchement (mots)"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:n.customOverlapSize??75,onChange:I=>b(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0",max:"200",value:n.customOverlapSize??75,onChange:I=>b(parseInt(I.target.value)),className:"config-number"})]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Filtrage qualit",p.jsx("span",{className:"config-help",children:"Filtrer les chunks de faible qualit (entropie, rptition)"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableQualityFiltering??!0,onChange:I=>w(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableQualityFiltering!==!1?"Activ":"Dsactiv"})]})]}),n.enableQualityFiltering!==!1&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Entropie minimale"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0",max:"0.8",step:"0.05",value:n.minChunkEntropy??.3,onChange:I=>S(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0",max:"0.8",step:"0.05",value:n.minChunkEntropy??.3,onChange:I=>S(parseFloat(I.target.value)),className:"config-number"})]}),p.jsx("div",{className:"config-description",children:p.jsx("small",{children:"Plus lev = filtre les chunks rptitifs"})})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Ratio mots uniques min"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0.2",max:"0.8",step:"0.05",value:n.minUniqueWordRatio??.4,onChange:I=>_(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0.2",max:"0.8",step:"0.05",value:n.minUniqueWordRatio??.4,onChange:I=>_(parseFloat(I.target.value)),className:"config-number"})]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Prtraitement texte",p.jsx("span",{className:"config-help",children:"Nettoyer le texte avant dcoupage (OCR, headers/footers)"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enablePreprocessing??!0,onChange:I=>P(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enablePreprocessing!==!1?"Activ":"Dsactiv"})]})]}),n.enablePreprocessing!==!1&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Nettoyage OCR"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableOCRCleanup??!0,onChange:I=>A(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableOCRCleanup!==!1?"Oui":"Non"})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Supprimer en-ttes/pieds"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableHeaderFooterRemoval??!0,onChange:I=>T(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableHeaderFooterRemoval!==!1?"Oui":"Non"})]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Dduplication",p.jsx("span",{className:"config-help",children:"Supprimer les chunks en double"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableDeduplication??!0,onChange:I=>E(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableDeduplication!==!1?"Activ":"Dsactiv"})]})]}),n.enableDeduplication!==!1&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Dduplication par similarit"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableSimilarityDedup??!1,onChange:I=>L(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableSimilarityDedup?"Oui (plus lent)":"Non"})]})]}),n.enableSimilarityDedup&&p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Seuil similarit"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0.7",max:"0.95",step:"0.05",value:n.dedupSimilarityThreshold??.85,onChange:I=>$(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0.7",max:"0.95",step:"0.05",value:n.dedupSimilarityThreshold??.85,onChange:I=>$(parseFloat(I.target.value)),className:"config-number"})]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Chunking smantique",p.jsx("span",{className:"config-help",children:"Utiliser les embeddings pour dtecter les frontires (exprimental)"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.useSemanticChunking??!1,onChange:I=>z(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.useSemanticChunking?"Activ":"Dsactiv"})]}),p.jsx("div",{className:"config-description",children:p.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"4px",marginTop:"8px"},children:[p.jsx("strong",{children:" Info :"})," Augmente le temps d'indexation (~3x)"]})})]}),n.useSemanticChunking&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Sensibilit smantique"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"0.5",max:"0.9",step:"0.05",value:n.semanticSimilarityThreshold??.7,onChange:I=>B(parseFloat(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"0.5",max:"0.9",step:"0.05",value:n.semanticSimilarityThreshold??.7,onChange:I=>B(parseFloat(I.target.value)),className:"config-number"})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:"Taille fentre (phrases)"}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"2",max:"5",value:n.semanticWindowSize??3,onChange:I=>D(parseInt(I.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"2",max:"5",value:n.semanticWindowSize??3,onChange:I=>D(parseInt(I.target.value)),className:"config-number"})]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:["Compression du contexte",p.jsx("span",{className:"config-help",children:"Rduit le contexte envoy au LLM pour amliorer les performances"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:n.enableContextCompression??!0,onChange:I=>Y(I.target.checked),className:"config-checkbox"}),p.jsx("span",{children:n.enableContextCompression!==!1?"Activ":"Dsactiv"})]}),p.jsx("div",{className:"config-description",children:p.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#fff3e0",border:"1px solid #ff9800",borderRadius:"4px",marginTop:"8px"},children:[p.jsx("strong",{children:" Note :"})," Dsactiver la compression envoie plus de contexte au LLM, ce qui peut amliorer la prcision des rponses pour les documents avec des structures standardises (ex: procs-verbaux, archives) mais augmente la latence et le cot."]})})]})]})})})},Pwe=({config:n,onChange:e,availableModels:r,onRefreshModels:i})=>{const{t:o}=qt("common"),s=(a,l)=>{e({...n,[a]:l})};return p.jsx(On,{title:o("llm.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[o("llm.ollamaURL"),p.jsx("span",{className:"config-help",children:o("llm.ollamaURLHelp")})]}),p.jsx("input",{type:"text",value:n.ollamaURL,onChange:a=>s("ollamaURL",a.target.value),className:"config-input",placeholder:"http://127.0.0.1:11434"})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[o("llm.chatModel"),p.jsx("span",{className:"config-help",children:o("llm.chatModelHelp")})]}),p.jsxs("div",{className:"config-input-group",children:[r.length>0?p.jsxs("select",{value:n.ollamaChatModel,onChange:a=>s("ollamaChatModel",a.target.value),className:"config-input",children:[!r.includes(n.ollamaChatModel)&&n.ollamaChatModel&&p.jsx("option",{value:n.ollamaChatModel,children:n.ollamaChatModel}),r.map(a=>p.jsx("option",{value:a,children:a},a))]}):p.jsx("input",{type:"text",value:n.ollamaChatModel,onChange:a=>s("ollamaChatModel",a.target.value),className:"config-input",placeholder:"gemma2:2b"}),p.jsx("button",{className:"config-btn-small",onClick:i,title:o("llm.refreshModels"),children:""})]}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:[r.length>0?`${r.length} ${o("llm.modelsAvailable")}`:o("llm.noModelsLoaded"),p.jsx("br",{})," gemma2:2b (rapide, CPU)",p.jsx("br",{})," phi3:mini (quilibr)",p.jsx("br",{})," mistral:7b-instruct (qualit, franais)"]})})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[o("llm.embeddingModel"),p.jsx("span",{className:"config-help",children:o("llm.embeddingModelHelp")})]}),p.jsx("input",{type:"text",value:n.ollamaEmbeddingModel,onChange:a=>s("ollamaEmbeddingModel",a.target.value),className:"config-input",placeholder:"nomic-embed-text"}),p.jsxs("div",{className:"config-description",children:[p.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",marginTop:"8px"},children:[p.jsx("strong",{children:o("llm.embeddingStrategyWarning")}),p.jsx("br",{}),p.jsx("small",{children:o("llm.embeddingStrategyWarningDetails")})]}),p.jsxs("small",{style:{display:"block",marginTop:"8px"},children:[p.jsx("strong",{children:o("llm.embeddingStrategyRecommended")}),p.jsx("br",{})," ",p.jsx("code",{children:"nomic-embed-text"})," - 768 dim, multilingue, recommand",p.jsx("br",{})," ",p.jsx("code",{children:"mxbai-embed-large"})," - 1024 dim, trs performant",p.jsx("br",{})," ",p.jsx("code",{children:"all-minilm"})," - 384 dim, lger et rapide"]})]})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[o("llm.embeddingStrategy"),p.jsx("span",{className:"config-help",children:o("llm.embeddingStrategyHelp")})]}),p.jsxs("select",{value:n.embeddingStrategy||"nomic-fallback",onChange:a=>s("embeddingStrategy",a.target.value),className:"config-input",children:[p.jsx("option",{value:"nomic-fallback",children:o("llm.embeddingStrategyOptions.nomicFallback")}),p.jsx("option",{value:"mxbai-only",children:o("llm.embeddingStrategyOptions.mxbaiOnly")}),p.jsx("option",{value:"custom",children:o("llm.embeddingStrategyOptions.custom")})]}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:[p.jsx("strong",{children:o("llm.embeddingStrategyRecommended")}),p.jsx("br",{})," ",p.jsx("strong",{children:"nomic-fallback"})," : ",o("llm.embeddingStrategyDescriptions.nomicFallback"),p.jsx("br",{})," ",p.jsx("strong",{children:"mxbai-only"})," : ",o("llm.embeddingStrategyDescriptions.mxbaiOnly"),p.jsx("br",{})," ",p.jsx("strong",{children:"custom"})," : ",o("llm.embeddingStrategyDescriptions.custom")]})})]})]})})})},Mwe=()=>{const{t:n}=qt("common"),[e,r]=M.useState([]),[i,o]=M.useState(null),[s,a]=M.useState(null),[l,c]=M.useState("0 MB"),[u,d]=M.useState(""),[h,f]=M.useState(null),[m,v]=M.useState(!0);M.useEffect(()=>{x();const _=window.electron.embeddedLLM.onDownloadProgress(P=>{o(P),(P.status==="complete"||P.status==="error"||P.status==="cancelled")&&(a(null),x())});return()=>{_()}},[]);const x=async()=>{try{v(!0),f(null);const[_,P,A,T]=await Promise.all([window.electron.embeddedLLM.listModels(),window.electron.embeddedLLM.getUsedSpace(),window.electron.embeddedLLM.getModelsDirectory(),window.electron.embeddedLLM.isDownloading()]);if(_?.success&&_.models&&r(_.models),P?.success){const E=P.totalMB||0;c(E>0?`${E.toFixed(1)} MB`:"0 MB")}A?.success&&d(A.directory||""),T?.success&&T.downloading&&T.modelId&&a(T.modelId)}catch(_){console.error("Failed to load embedded LLM data:",_),f(n("embeddedLLM.loadError"))}finally{v(!1)}},b=async _=>{try{f(null),a(_),o({percent:0,downloadedMB:0,totalMB:0,speed:"",eta:"",status:"pending",message:n("embeddedLLM.startingDownload")}),await window.electron.embeddedLLM.download(_)}catch(P){console.error("Download failed:",P),f(P.message||n("embeddedLLM.downloadError")),a(null)}},w=async()=>{try{await window.electron.embeddedLLM.cancelDownload()}catch(_){console.error("Failed to cancel download:",_)}},S=async _=>{if(window.confirm(n("embeddedLLM.deleteConfirm")))try{await window.electron.embeddedLLM.deleteModel(_),await x()}catch(P){console.error("Failed to delete model:",P),f(n("embeddedLLM.deleteError"))}};return m?p.jsx(On,{title:n("embeddedLLM.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",style:{display:"flex",alignItems:"center",gap:"8px",padding:"16px"},children:[p.jsx(Hve,{className:"animate-spin",size:20}),p.jsx("span",{children:n("embeddedLLM.loading")})]})})}):p.jsx(On,{title:n("embeddedLLM.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[h&&p.jsxs("div",{className:"config-error",style:{padding:"12px",backgroundColor:"var(--error-bg, #fee2e2)",color:"var(--error-text, #dc2626)",borderRadius:"4px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx(ml,{size:16}),h]}),p.jsx("div",{className:"config-field",children:p.jsx("div",{className:"config-description",style:{marginBottom:"12px"},children:p.jsx("small",{children:n("embeddedLLM.providerNote")})})}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[n("embeddedLLM.modelsLabel"),p.jsx("span",{className:"config-help",children:n("embeddedLLM.modelsHelp")})]}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.map(_=>p.jsxs("div",{style:{padding:"12px",border:"1px solid var(--border-color, #333)",borderRadius:"6px",backgroundColor:"var(--bg-secondary, #1e1e1e)"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:_.name}),p.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary, #888)"},children:_.description}),p.jsxs("div",{style:{fontSize:"12px",color:"var(--text-tertiary, #666)",marginTop:"4px"},children:[_.sizeMB," MB"]})]}),p.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:_.downloaded?p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"var(--success-color, #22c55e)",fontSize:"13px"},children:[p.jsx(k9,{size:16}),n("embeddedLLM.downloaded")]}),p.jsx("button",{onClick:()=>S(_.id),className:"config-btn-small",title:n("embeddedLLM.delete"),style:{color:"var(--error-text, #dc2626)",padding:"6px",display:"flex",alignItems:"center"},children:p.jsx(Gu,{size:16})})]}):s===_.id?p.jsx("button",{onClick:w,className:"config-btn-small",style:{padding:"6px 12px"},children:n("embeddedLLM.cancel")}):s!==null?p.jsxs("button",{className:"config-btn-small",disabled:!0,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",opacity:.5},children:[p.jsx(mx,{size:16}),n("embeddedLLM.download")]}):p.jsxs("button",{onClick:()=>b(_.id),className:"config-btn-small",title:n("embeddedLLM.download"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px"},children:[p.jsx(mx,{size:16}),n("embeddedLLM.download")]})})]}),s===_.id&&i&&p.jsxs("div",{style:{marginTop:"12px"},children:[p.jsx("div",{style:{height:"6px",backgroundColor:"var(--bg-tertiary, #333)",borderRadius:"3px",overflow:"hidden"},children:p.jsx("div",{style:{width:`${i.percent}%`,height:"100%",backgroundColor:"var(--primary-color, #3b82f6)",transition:"width 0.3s ease"}})}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"6px",fontSize:"12px",color:"var(--text-secondary, #888)"},children:[p.jsx("span",{children:i.message}),p.jsxs("span",{children:[i.downloadedMB.toFixed(1)," / ",i.totalMB.toFixed(1)," MB",i.speed&&` - ${i.speed}`,i.eta&&` - ${i.eta}`]})]})]})]},_.id))})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[p.jsx(Ive,{size:16,style:{marginRight:"6px",verticalAlign:"middle"}}),n("embeddedLLM.storageLabel")]}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:[n("embeddedLLM.usedSpace"),": ",l,p.jsx("br",{}),n("embeddedLLM.location"),": ",u]})})]})]})})})},Ewe=({config:n,onChange:e})=>{const{t:r}=qt("common"),i=(o,s)=>{e({...n,[o]:s})};return p.jsx(On,{title:r("editor.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[r("editor.fontSize"),p.jsx("span",{className:"config-help",children:"Taille du texte dans l'diteur Markdown (Monaco Editor)"})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"range",min:"10",max:"24",value:n.fontSize,onChange:o=>i("fontSize",parseInt(o.target.value)),className:"config-slider"}),p.jsx("input",{type:"number",min:"10",max:"24",value:n.fontSize,onChange:o=>i("fontSize",parseInt(o.target.value)),className:"config-number"})]}),p.jsxs("div",{className:"config-description",children:["Taille actuelle: ",n.fontSize,"px",p.jsx("br",{}),p.jsx("small",{children:"S'applique uniquement  l'diteur de texte principal"})]})]}),p.jsx("div",{className:"config-field",children:p.jsxs("label",{className:"config-label",children:[p.jsx("input",{type:"checkbox",checked:n.wordWrap,onChange:o=>i("wordWrap",o.target.checked),style:{marginRight:"8px"}}),r("editor.wordWrap"),p.jsx("span",{className:"config-help",children:"Les longues lignes sont automatiquement coupes pour rester visibles"})]})}),p.jsx("div",{className:"config-field",children:p.jsxs("label",{className:"config-label",children:[p.jsx("input",{type:"checkbox",checked:n.showMinimap,onChange:o=>i("showMinimap",o.target.checked),style:{marginRight:"8px"}}),r("editor.minimap"),p.jsx("span",{className:"config-help",children:"Barre de dfilement avec aperu miniature du document (comme dans VS Code)"})]})}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[r("editor.fontFamily"),p.jsx("span",{className:"config-help",children:"Choisissez la police pour l'diteur de code"})]}),p.jsxs("select",{value:n.fontFamily,onChange:o=>i("fontFamily",o.target.value),className:"config-select",children:[p.jsx("option",{value:"system",children:"Polices systme (SF Mono, Monaco, Consolas)"}),p.jsx("option",{value:"jetbrains",children:"JetBrains Mono"}),p.jsx("option",{value:"fira",children:"Fira Code"}),p.jsx("option",{value:"source",children:"Source Code Pro"}),p.jsx("option",{value:"cascadia",children:"Cascadia Code"})]}),p.jsx("div",{className:"config-description",children:p.jsx("small",{children:"Les polices systme sont toujours disponibles. Les autres ncessitent d'tre installes sur votre systme."})})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[r("editor.defaultEditorMode"),p.jsx("span",{className:"config-help",children:r("editor.defaultEditorModeHelp")})]}),p.jsxs("select",{value:n.defaultEditorMode||"wysiwyg",onChange:o=>i("defaultEditorMode",o.target.value),className:"config-select",children:[p.jsx("option",{value:"wysiwyg",children:r("editor.modeWysiwyg")}),p.jsx("option",{value:"source",children:r("editor.modeSource")})]})]})]})})})},Nwe={mode:"dark",autoSwitchEnabled:!1,lightModeStart:"06:00",darkModeStart:"20:00"},jwe=()=>{try{const n=localStorage.getItem("theme-config");if(n)return JSON.parse(n)}catch(n){console.error("Failed to parse theme config:",n)}return Nwe},d3=()=>{const[n,e]=M.useState(jwe),[r,i]=M.useState("dark");return M.useEffect(()=>{const s=()=>{if(n.mode==="light")return"light";if(n.mode==="dark"||!n.autoSwitchEnabled)return"dark";const l=new Date,c=l.getHours(),u=l.getMinutes(),d=c*60+u,[h,f]=n.lightModeStart.split(":").map(Number),m=h*60+f,[v,x]=n.darkModeStart.split(":").map(Number),b=v*60+x;return m<b?d>=m&&d<b?"light":"dark":d>=m||d<b?"light":"dark"},a=s();if(i(a),n.mode==="auto"&&n.autoSwitchEnabled){const l=setInterval(()=>{const c=s();i(c)},6e4);return()=>clearInterval(l)}},[n]),M.useEffect(()=>{r==="light"?(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")):(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light"))},[r]),{config:n,setConfig:s=>{e(s),localStorage.setItem("theme-config",JSON.stringify(s))},currentTheme:r}},Owe=()=>{const{t:n}=qt("common"),{config:e,setConfig:r,currentTheme:i}=d3(),o=c=>{r({...e,mode:c})},s=c=>{r({...e,autoSwitchEnabled:c})},a=c=>{r({...e,lightModeStart:c})},l=c=>{r({...e,darkModeStart:c})};return p.jsx(On,{title:n("ui.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[n("ui.theme.title"),p.jsx("span",{className:"config-help",children:n("ui.theme.description")})]}),p.jsxs("select",{value:e.mode,onChange:c=>o(c.target.value),className:"config-select",children:[p.jsx("option",{value:"light",children:n("ui.theme.light")}),p.jsx("option",{value:"dark",children:n("ui.theme.dark")}),p.jsx("option",{value:"auto",children:n("ui.theme.auto")})]}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:[n("ui.theme.currentTheme"),": ",n(i==="light"?"ui.theme.light":"ui.theme.dark")]})})]}),e.mode==="auto"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[n("ui.theme.autoSwitch.title"),p.jsx("span",{className:"config-help",children:n("ui.theme.autoSwitch.description")})]}),p.jsxs("div",{className:"config-input-group",children:[p.jsx("input",{type:"checkbox",checked:e.autoSwitchEnabled,onChange:c=>s(c.target.checked),className:"config-checkbox"}),p.jsx("span",{children:e.autoSwitchEnabled?n("ui.theme.enabled"):n("ui.theme.disabled")})]})]}),e.autoSwitchEnabled&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[n("ui.theme.lightModeStart"),p.jsx("span",{className:"config-help",children:n("ui.theme.lightModeStartDescription")})]}),p.jsx("input",{type:"time",value:e.lightModeStart,onChange:c=>a(c.target.value),className:"config-input"})]}),p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[n("ui.theme.darkModeStart"),p.jsx("span",{className:"config-help",children:n("ui.theme.darkModeStartDescription")})]}),p.jsx("input",{type:"time",value:e.darkModeStart,onChange:c=>l(c.target.value),className:"config-input"})]})]})]})]})})})},Dwe={name:"ClioDeck"},Iwe={save:"Sauvegarder",cancel:"Annuler",close:"Fermer",export:"Exporter",import:"Importer",browse:"Parcourir",reset:"Rinitialiser",delete:"Supprimer",edit:"diter",create:"Crer",open:"Ouvrir",search:"Rechercher",refresh:"Rafrachir",test:"Tester",sync:"Synchroniser",title:"Actions",dangerZone:"Zone dangereuse",purgeDatabase:{title:"Purger la base de donnes",description:"Supprime tous les chunks vectoriels et rinitialise les index. Les PDFs devront tre rindexs.",button:"Purger la base",confirmTitle:" ATTENTION - Action irrversible",confirmMessage:`Cette action va :

 Supprimer TOUS les embeddings vectoriels
 Supprimer TOUS les chunks de texte
 Dtruire les index HNSW et BM25
 Rinitialiser compltement la base vectorielle

Vous devrez rindexer TOUS vos PDFs.

Tapez 'PURGER' pour confirmer :`,finalConfirm:"Dernire confirmation: Cette action est IRRVERSIBLE. Continuer ?",purging:"Purge en cours...",success:"Base de donnes purge avec succs",error:"Erreur lors de la purge",cancelledNoMatch:"Purge annule (texte de confirmation incorrect)",cancelled:"Purge annule",warning:" Cette action est irrversible !",inProgress:"Purge en cours..."},rebuildIndexes:{title:"Reconstruire les index",description:"Reconstruit les index HNSW et BM25 depuis la base SQLite existante. Utile si les index sont corrompus.",button:"Reconstruire",rebuilding:"Reconstruction...",success:"Index reconstruits avec succs",error:"Erreur lors de la reconstruction"},optimizeDatabase:{title:"Optimiser la base de donnes",description:"Compacte la base SQLite et optimise les performances. Recommand aprs suppression de nombreux documents.",button:"Optimiser",optimizing:"Optimisation...",success:"Base optimise. Gain: {{saved}}",error:"Erreur lors de l'optimisation"},exportData:{title:"Exporter les donnes",description:"Exporte la configuration et les mtadonnes du projet (pas les PDFs).",button:"Exporter"},importData:{title:"Importer les donnes",description:"Importe une configuration depuis un export prcdent.",button:"Importer"},databaseInfo:{title:"Informations base de donnes",documentsIndexed:"Documents indexs",chunksStored:"Chunks stocks",path:"Chemin",loading:"Chargement..."},copyPath:{button:"Copier le chemin",success:"Chemin copi dans le presse-papiers !"},openFolder:{button:"Ouvrir le dossier"},primaryDatabaseInfo:{title:"Base de donnes Sources Primaires (Tropy)",sourcesIndexed:"Sources indexes",chunksStored:"Chunks stocks"},purgePrimaryDatabase:{title:"Purger la base Sources Primaires",description:"Supprime toutes les sources Tropy indexes et leurs embeddings vectoriels.",button:"Purger Sources Primaires",confirmMessage:`Cette action va supprimer {{sourceCount}} sources primaires et {{chunkCount}} chunks.

Vous devrez re-synchroniser votre projet Tropy.

Continuer ?`,finalConfirm:"Dernire confirmation: Cette action est IRRVERSIBLE. Continuer ?",success:"Base de donnes des sources primaires purge avec succs",error:"Erreur lors de la purge: {{error}}",inProgress:"Purge en cours...",warning:" Cette action est irrversible !"}},Rwe={title:"Paramtres",save:"Enregistrer",saved:"Configuration sauvegarde",saveError:"Erreur lors de la sauvegarde",resetConfirm:"Rinitialiser la configuration aux valeurs par dfaut ?",language:"Langue",selectLanguage:"Slectionner la langue",tooltipSave:"Sauvegarder",tooltipReset:"Rinitialiser",saving:"Sauvegarde...",languageSelector:{label:"Choisir la langue de l'interface",changeWarning:"La langue sera applique au prochain redmarrage de l'application.",fr:"Franais",en:"Anglais",de:"Allemand"}},Lwe={title:"diteur",fontSize:"Taille de police",fontSizeHelp:"Taille du texte dans l'diteur Markdown (Monaco Editor)",currentSize:"Taille actuelle: {{size}}px",appliesToEditor:"S'applique uniquement  l'diteur de texte principal",wordWrap:"Retour  la ligne automatique",wordWrapHelp:"Les longues lignes sont automatiquement coupes pour rester visibles",minimap:"Afficher la minimap",minimapHelp:"Barre de dfilement avec aperu miniature du document (comme dans VS Code)",fontFamily:"Police de caractres",fontFamilyHelp:"Choisissez la police pour l'diteur de code",fontSystem:"Polices systme (SF Mono, Monaco, Consolas)",fontNote:"Les polices systme sont toujours disponibles. Les autres ncessitent d'tre installes sur votre systme.",noCitations:"Aucune citation",importBibliography:"Importez votre bibliographie...",autoSave:"Sauvegarde automatique",autoSaveHelp:"Sauvegarde automatiquement le document aprs une priode d'inactivit",autoSaveDelay:"Dlai de sauvegarde automatique",autoSaveDelayHelp:"Temps en secondes avant la sauvegarde automatique aprs la dernire modification",autoSaveDelaySeconds:"{{seconds}} secondes",defaultEditorMode:"diteur par dfaut",defaultEditorModeHelp:"Choisissez l'diteur affich  l'ouverture d'un document",modeWysiwyg:"Visuel (Milkdown)",modeSource:"Source (Monaco)"},zwe={title:"Apparence",theme:{title:"Thme",description:"Choisir l'apparence de l'application",light:"Clair",dark:"Fonc",auto:"Auto (par heure)",currentTheme:"Thme actuel",enabled:"Activ",disabled:"Dsactiv",autoSwitch:{title:"Basculement automatique",description:"Basculer automatiquement entre mode clair et fonc selon l'heure"},lightModeStart:"Mode clair commence ",lightModeStartDescription:"Heure de dbut du mode clair (par dfaut: 06:00)",darkModeStart:"Mode fonc commence ",darkModeStartDescription:"Heure de dbut du mode fonc (par dfaut: 20:00)"}},Fwe={title:"Bibliographie",import:"Importer fichier BibTeX",searchAndFilters:"Recherche et filtres",searchPlaceholder:"Rechercher auteur, titre, anne...",sortBy:"Trier par:",author:"Auteur",year:"Anne",titleField:"Titre",noCitations:"Aucune citation disponible",importPrompt:"Importez un fichier BibTeX pour commencer",pdfIndexed:"PDF index:",indexError:"Erreur:",viewDetails:"Voir dtails",copyKey:"Copier la cl",indexPDF:"Indexer le PDF",openPDF:"Ouvrir le PDF",keyCopied:"Cl copie!",journal:"Journal:",publisher:"diteur:",booktitle:"Ouvrage:",insertCitation:"Insrer citation",indexPDFButton:"Indexer PDF",indexed:"Index",notIndexed:"Non index",indexing:"Indexation...",alreadyIndexed:"Ce PDF est dj index: {{title}}",reindex:"R-indexer",reindexConfirm:`Ce PDF est dj index. Voulez-vous le supprimer et le r-indexer ?

{{title}}`,pdfReindexed:"PDF r-index : {{title}}",indexAllPDFs:"Indexer tous les PDFs",noPDFsToIndex:"Aucun PDF  indexer dans la bibliographie",confirmIndexAll:"Indexer {{count}} PDFs de la bibliographie ?",indexAllComplete:"Indexation termine: {{indexed}} indexs, {{skipped}} ignors, {{errors}} erreurs",indexingProgress:"Indexation {{current}}/{{total}}",availableInZotero:"disponible(s) dans Zotero",selectPDF:"Slectionnez le PDF  tlcharger",modified:"Modifi",zoteroNotConfigured:"Zotero n'est pas configur. Veuillez le configurer dans les Paramtres.",pdfDownloadedAndIndexed:"PDF tlcharg et index",downloadError:"Erreur de tlchargement :",noProjectOpen:"Aucun projet n'est actuellement ouvert",downloadAllMissing:"Tlcharger tous les PDFs manquants depuis Zotero",noMissingPDFs:"Aucun PDF manquant  tlcharger. Toutes les citations avec des PDFs Zotero ont dj des copies locales.",confirmDownloadAll:"Tlcharger et indexer {{count}} PDFs depuis Zotero ?",downloadAllComplete:"Tlchargement termin : {{downloaded}} tlchargs et indexs, {{skipped}} ignors, {{errors}} erreurs",viewStatistics:"Afficher les statistiques de la bibliographie",statistics:"Statistiques",editMetadata:"Modifier les mtadonnes",exportBibTeX:"Exporter la bibliographie en BibTeX",noCitationsToExport:"Aucune citation  exporter",exportSuccess:"{{count}} citation(s) exporte(s) avec succs",exportError:"chec de l'export de la bibliographie",modifiedPDFsDetected:"{{count}} PDF(s) modifi(s) dtect(s)",modifiedPDFsMessage:"Des PDFs ont t modifis depuis la dernire indexation. R-indexez-les pour mettre  jour l'index de recherche.",reindexAll:"Tout r-indexer",noPDFsToReindex:"Aucun PDF  r-indexer",confirmReindexModified:"R-indexer {{count}} PDF(s) modifi(s) ?",reindexComplete:"{{count}} PDF(s) r-index(s) avec succs",reindexError:"chec de la r-indexation des PDFs",cleanupOrphanPDFs:"Nettoyer les PDFs orphelins",orphanPDFCleanup:"Nettoyage des PDFs orphelins",scannedFiles:"Fichiers scanns",linkedFiles:"Fichiers lis",orphanFiles:"Fichiers orphelins",totalSize:"Taille totale",scanningForOrphans:"Recherche des PDFs orphelins...",noOrphansFound:"Aucun PDF orphelin trouv",noOrphansFoundDesc:"Tous les fichiers PDF de votre projet sont lis  des citations.",selectAll:"Tout slectionner",deselectAll:"Tout dslectionner",selectedOrphans:"{{count}} slectionn(s)",rescan:"Re-scanner",archiveSelected:"Archiver la slection",deleteSelected:"Supprimer la slection",archiving:"Archivage...",deleting:"Suppression...",noOrphansSelected:"Veuillez slectionner au moins un fichier  supprimer ou archiver.",confirmDeleteOrphans:"Supprimer {{count}} PDF(s) orphelin(s) ? Cette action est irrversible.",confirmArchiveOrphans:"Archiver {{count}} PDF(s) orphelin(s) ? Les fichiers seront dplacs dans le dossier 'orphan_pdfs'.",orphanPDFsDeleted:"{{deleted}} fichier(s) supprim(s) avec succs. {{failed}} chec(s).",orphanPDFsArchived:"{{archived}} fichier(s) archiv(s) dans {{path}}. {{failed}} chec(s).",orphanPDFScanError:"chec du scan des PDFs orphelins",orphanPDFDeleteError:"chec de la suppression des PDFs orphelins",orphanPDFArchiveError:"chec de l'archivage des PDFs orphelins",orphanWarningTitle:"Attention",orphanWarningMessage:"Les PDFs orphelins sont des fichiers non lis  une citation. Assurez-vous que ces fichiers ne sont pas ncessaires avant de les supprimer. L'archivage est une option plus sre."},$we={title:"Projet",fillAllFields:"Veuillez remplir tous les champs",createError:"Erreur lors de la cration du projet",openError:"Erreur lors de l'ouverture du projet",newProject:"Nouveau projet",openProject:"Ouvrir un projet",closeProject:"Fermer le projet",currentProject:"Projet actuel",recentProjects:"Projets rcents",noProjectOpen:"Aucun projet ouvert",createOrOpen:"Crez un nouveau projet ou ouvrez un projet existant",createNewProject:"Crer un nouveau projet",projectType:"Type de projet",projectName:"Nom du projet",projectLocation:"Emplacement",notesFolder:"Dossier de notes",notesFolderHelp:"Slectionnez un dossier existant contenant vos fichiers Markdown",creating:"Cration...",projectFiles:"Fichiers du projet",appearance:"Apparence",removeFromRecent:"Retirer des projets rcents",dialogTitle:"Projet ClioDeck",allFiles:"Tous les fichiers",name:"Nom",type:"Type",path:"Chemin",createdAt:"Cr le",types:{article:"Article",book:"Livre",presentation:"Prsentation",notes:"Notes",notesExisting:"Notes (dossier existant)"},settings:"Paramtres du projet",citationStyle:"Style de citation (CSL)",selectCSL:"Slectionner un fichier .csl",noCslSelected:"Aucun style de citation slectionn",cslSelected:"Style CSL:",cslHelp:"Le fichier CSL dfinit le format des citations et de la bibliographie dans les exports PDF et Word",cslSelectError:"Erreur lors de la slection du fichier CSL",cslSaveError:"Erreur lors de la sauvegarde du chemin CSL",cslRemoveError:"Erreur lors de la suppression du chemin CSL",openInFinder:"Ouvrir dans le gestionnaire de fichiers",openFolderError:"Erreur lors de l'ouverture du dossier du projet",zoteroSettings:"Paramtres Zotero",zoteroSettingsHelp:"Configurez le groupe et la collection Zotero spcifiques  ce projet. Ces paramtres remplacent la configuration globale de Zotero.",zoteroGroupId:"ID du groupe",zoteroGroupIdPlaceholder:"Entrez l'ID du groupe Zotero",zoteroGroupIdHelp:"L'identifiant numrique de votre groupe Zotero (visible dans l'URL du groupe)",zoteroCollectionKey:"Cl de collection",zoteroCollectionKeyPlaceholder:"Entrez la cl de collection (optionnel)",zoteroCollectionKeyHelp:"La cl d'une collection spcifique dans le groupe (optionnel)",loading:"Ouverture du projet..."},Bwe={title:"Configuration RAG",topK:"Nombre de chunks (topK)",topKHelp:"Nombre de passages de texte  rcuprer",similarityThreshold:"Seuil de similarit",similarityThresholdHelp:"Score minimum de similarit (0.0  1.0)",chunkingConfig:"Configuration chunking",chunkingHelp:"Taille des chunks de texte",cpuOptimized:"Optimis CPU (par dfaut)",standard:"Standard",large:"Large",summaryGeneration:"Gnration de rsums",summaryGenerationHelp:"Comment gnrer les rsums",extractive:"Extractif (rapide)",abstractive:"Abstractif (qualit)",disabled:"Dsactiv",summaryMaxLength:"Longueur max rsum",summaryMaxLengthHelp:"Nombre maximum de mots",useGraphContext:"Utiliser contexte graphe",graphSimilarityThreshold:"Seuil similarit graphe",additionalGraphDocs:"Documents graphe additionnels",includeSummaries:"Inclure rsums dans RAG",enableTopicModeling:"Activer modlisation thmatique",explorationSimilarityThreshold:"Seuil de similarit (Exploration)",explorationSimilarityThresholdHelp:"Score minimum pour crer des liens de similarit dans le graphe d'exploration"},Hwe={title:"Configuration LLM",backend:"Backend",backendHelp:"Service LLM  utiliser",ollamaURL:"URL Ollama",ollamaURLHelp:"Adresse du serveur Ollama",embeddingModel:"Modle d'embedding",embeddingModelHelp:"Modle pour les embeddings vectoriels",chatModel:"Modle de chat",chatModelHelp:"Modle pour la gnration de texte",embeddingStrategy:"Stratgie d'embeddings",embeddingStrategyHelp:"Choix du modle et comportement en cas d'erreur",embeddingStrategyWarning:" Attention : Changer ce modle ncessite de r-indexer tous les PDFs.",embeddingStrategyWarningDetails:"Les embeddings ne sont pas compatibles entre modles diffrents. Vous devrez supprimer tous les PDFs indexs et les r-indexer aprs le changement.",embeddingStrategyRecommended:"Modles recommands :",embeddingStrategyOptions:{nomicFallback:"nomic-embed-text avec fallback vers mxbai-embed-large",mxbaiOnly:"mxbai-embed-large uniquement (pas de fallback)",custom:"Modle personnalis (pas de fallback)"},embeddingStrategyDescriptions:{nomicFallback:"Utilise nomic-embed-text, bascule automatiquement vers mxbai-embed-large en cas d'erreur (recommand)",mxbaiOnly:"Utilise uniquement mxbai-embed-large, pas de fallback (pour la cohrence)",custom:"Utilise le modle personnalis ci-dessus, pas de fallback (pour utilisateurs avancs)"},availableModels:"Modles disponibles",modelsAvailable:"modles disponibles",noModelsLoaded:"Cliquez  pour charger les modles depuis Ollama",refreshModels:"Rafrachir les modles",testConnection:"Tester la connexion",connectionSuccess:"Connexion russie !",connectionError:"Erreur de connexion"},qwe={title:"Modle embarqu (Qwen)",loading:"Chargement...",loadError:"Erreur lors du chargement des informations",providerNote:"Le choix du provider (Ollama ou embarqu) se fait dans les paramtres RAG du chatbot.",modelsLabel:"Modles disponibles",modelsHelp:"Tlchargez un modle pour l'utiliser hors ligne",downloaded:"Tlcharg",download:"Tlcharger",delete:"Supprimer",cancel:"Annuler",deleteConfirm:"Voulez-vous vraiment supprimer ce modle ?",deleteError:"Erreur lors de la suppression du modle",downloadError:"Erreur lors du tlchargement",startingDownload:"Prparation du tlchargement...",storageLabel:"Stockage",usedSpace:"Espace utilis",location:"Emplacement"},Vwe={title:"Configuration Zotero",userId:"ID utilisateur",userIdHelp:"Votre identifiant utilisateur Zotero",apiKey:"Cl API",apiKeyHelp:"Votre cl API Zotero",apiKeyPlaceholder:"Votre cl API Zotero",autoSync:"Synchronisation automatique",testConnection:"Tester la connexion",testing:"Test en cours...",connectionOk:"Connexion OK",connectionFailed:"chec de connexion",connectionSuccess:"Connexion Zotero russie !",connectionError:"Impossible de se connecter  Zotero",enterCredentials:"Veuillez entrer votre ID utilisateur et votre cl API",getApiKey:"Obtenir une cl API",configDescription:"Connectez votre compte Zotero pour importer vos rfrences bibliographiques.",projectNote:"Le groupe et la collection Zotero sont configurs dans les paramtres de chaque projet.",import:{title:"Import depuis Zotero",notConfigured:"Zotero n'est pas configur",configureFirst:"Veuillez d'abord configurer votre connexion Zotero dans les paramtres.",goToSettings:"Aller aux paramtres",loading:"Chargement des collections Zotero...",loadError:"Erreur lors du chargement des collections Zotero",loadCollections:"Charger les collections",loadCollectionsButton:"Charger les collections",loadCollectionsError:"Erreur lors du chargement des collections",allCollections:"Toutes les collections",selectCollection:"Slectionner une collection",selectPlaceholder:"Choisir une collection...",options:"Options d'import",downloadPDFs:"Tlcharger les PDFs attachs",indexPDFs:"Indexer automatiquement les PDFs",mergeBibliography:"Fusionner avec la bibliographie existante",startImport:"Dmarrer l'import",importing:"Import en cours...",importButton:"Importer",updateButton:"Mettre  jour depuis Zotero",checkUpdatesButton:"Vrifier les mises  jour depuis Zotero",checking:"Vrification...",configWarning:"Veuillez d'abord configurer votre connexion Zotero",projectInfo:"Aucun projet ouvert. Les rfrences seront importes temporairement.",fetchingMetadata:"Rcupration des mtadonnes ({{current}}/{{total}})",downloadingPDFs:"Tlchargement des PDFs ({{current}}/{{total}})",indexingPDFs:"Indexation des PDFs ({{current}}/{{total}})",successTitle:" Import russi!",successMessage:`**{{items}} rfrences** importes
**{{pdfs}} PDFs** tlchargs
**{{indexed}} documents** indexs`,success:"{{count}} rfrences importes avec succs",error:"Erreur lors de l'import: {{error}}",genericError:"Une erreur s'est produite lors de l'import",errorTitle:" Erreur lors de l'import",close:"Fermer"}},Wwe={title:"Suggestions",enableCitations:"Activer suggestions de citations",citationDelay:"Dlai suggestions (ms)",maxCitations:"Nombre max de suggestions",enableReformulation:"Activer suggestions de reformulation",reformulationDelay:"Dlai reformulation (ms)",reformulationMinWords:"Mots minimum",showInline:"Afficher suggestions en ligne"},Uwe={title:"Chat",askQuestion:"Posez une question",placeholder:"Posez une question sur vos documents...",send:"Envoyer (Enter)",cancel:"Annuler",clearHistory:"Effacer l'historique",clearConfirm:"Effacer tout l'historique de conversation ?",generating:"Gnration en cours...",newLineHint:"Shift + Enter pour nouvelle ligne",you:"Vous",assistant:"Assistant",noContextWarning:"Cette rponse n'est pas base sur vos documents. Aucun passage pertinent n'a t trouv dans votre corpus.",sources:"Sources",source:"Source",excerpt:"Extrait:",page:"Page",similarity:"Similarit",openPDF:"Ouvrir le PDF",aiAssistant:"Assistant IA",helpText:"L'assistant utilise RAG (Retrieval-Augmented Generation) pour rpondre  vos questions en se basant sur les documents PDF indexs.",emptyState:{title:"Aucun document index",message:`L'assistant recherchera dans vos PDFs indexs pour rpondre  vos questions.

Indexez des PDFs pour commencer.`},readyState:{title:"Prt  vous aider",message:`{{count}} document(s) index(s) disponible(s).

Posez une question pour commencer.`}},Kwe={title:"Corpus",loading:"Chargement du corpus...",error:"Erreur",retry:"Ressayer",empty:"Corpus vide",filters:"Filtres",year:"Anne:",allYears:"Toutes",author:"Auteur:",allAuthors:"Tous",language:"Langue:",allLanguages:"Toutes",noTemporalData:"Aucune donne temporelle disponible. Les documents doivent avoir des mtadonnes d'anne.",topicAnalysisError:"Erreur lors de l'analyse des topics",exploration:"Exploration de Corpus",tooltipHelp:"Topic modeling et analyse thmatique. Ncessite un corpus d'au moins 15-20 documents pour tre pertinent.",noProject:"Aucun projet",openOrCreateProject:"Ouvrez ou crez un projet pour explorer le corpus.",emptyCorpus:"Corpus vide",indexDocuments:"Indexez au moins 2 documents PDF pour visualiser le graphe de connaissances.",resetFilters:"Rinitialiser filtres",topic:"Topic:",allTopics:"Tous",statistics:"Statistiques",documents:"Documents",extractedCitations:"Citations extraites",internalCitations:"internes",authors:"Auteurs",languages:"Langues",period:"Priode:",textometrics:"Textomtrie",topicAnalysis:"Analyse thmatique (BERTopic)",noTopicAnalysis:"Aucune analyse thmatique disponible.",numTopics:"Nombre de topics:",analyzeTopics:"Analyser les topics",analyzing:"Analyse en cours...",topicHelp:"L'analyse thmatique ncessite au moins 5 documents indexs.",topicsIdentified:"{{count}} topics identifis",documentsAnalyzed:"{{analyzed}}/{{total}} documents analyss",outliers:"outliers",nbTopics:"Nb topics:",reanalyze:"Ranalyser",topicTimeline:"volution temporelle des topics",topicDocuments:"documents",hideDocuments:"Masquer documents",showDocuments:"Voir {{count}} documents",knowledgeGraph:"Graphe de connaissances",similarityThreshold:"Seuil de similarit:",regenerateGraph:"Regnrer le graphe",regenerating:"Gnration...",citations:"Citations",similarity:"Similarit",coCitations:"Co-citations",exportGEXF:"Exporter GEXF",nodeDetails:"Dtails du nud",nodeTitle:"Titre:",nodeAuthor:"Auteur:",nodeYear:"Anne:",nodeCentrality:"Centralit:",nodeCommunity:"Communaut:",close:"Fermer",nodes:"Nuds:",links:"Liens:",graphRegenerateError:"Erreur lors de la regnration du graphe",topicServiceUnavailable:`Le service de topic modeling n'est pas disponible.

Pour l'activer, ouvrez les Paramtres et installez l'environnement Python dans la section "Topic Modeling".`,topicAnalysisErrorGeneric:"Erreur lors de l'analyse des topics"},Gwe={loading:"Analyse textomtrique en cours...",retry:"Ressayer",noStatistics:"Aucune statistique textomtrique disponible.",analyze:"Lancer l'analyse",totalWordsNoStopwords:"Mots totaux (sans stopwords)",totalWordsWithStopwords:"Mots totaux (avec stopwords)",uniqueVocabulary:"Vocabulaire unique",lexicalRichness:"Richesse lexicale",lexicalRichnessDesc:"Ratio mots uniques / mots totaux",avgWordsPerDoc:"Mots moyen / document",avgVocabPerDoc:"Vocabulaire moyen / document",refresh:"Actualiser",frequentWords:"Mots frquents",bigrams:"Bigrammes",trigrams:"Trigrammes",topWords:"Top {{count}} mots les plus frquents (hors stopwords)",topBigrams:"Top {{count}} bigrammes les plus frquents",topTrigrams:"Top {{count}} trigrammes les plus frquents",rank:"Rang",word:"Mot",occurrences:"Occurrences",frequency:"Frquence",bar:"Barre",bigram:"Bigramme",trigram:"Trigramme"},Ywe={newFile:"Nouveau fichier",open:"Ouvrir",save:"Enregistrer",bold:"Gras (Ctrl+B)",italic:"Italique (Ctrl+I)",link:"Lien (Ctrl+L)",citation:"Citation (Ctrl+')",table:"Insrer un tableau (Ctrl+Shift+T)",footnote:"Note de bas de page (Ctrl+Shift+F)",blockquote:"Bloc citation",checkCitations:"Vrifier les citations",newFileConfirm:"Crer un nouveau fichier ? Les modifications non sauvegardes seront perdues.",markdown:"Markdown",openError:"Erreur lors de l'ouverture du fichier",saveError:"Erreur lors de la sauvegarde du fichier",wysiwygMode:"Mode visuel (WYSIWYG)",sourceMode:"Mode source (Markdown)"},Zwe={provider:"Provider LLM",providerAuto:"Auto (Ollama puis embarqu)",providerOllama:"Ollama uniquement",providerEmbedded:"Qwen embarqu",providerAutoDesc:"Essaie d'abord Ollama, utilise le modle embarqu si Ollama n'est pas disponible",providerOllamaDesc:"Utilise exclusivement Ollama pour la gnration (ncessite Ollama actif)",providerEmbeddedDesc:"Utilise le modle embarqu Qwen (ncessite le tlchargement dans les paramtres)",notDownloaded:"non tlcharg"},Xwe={title:"Configuration Beamer",appearance:"Apparence",mainTheme:"Thme principal",colorTheme:"Thme de couleur",fontTheme:"Thme de police",aspectRatio:"Format d'cran",titlePage:"Page de titre",institution:"Institution (optionnel)",institutionPlaceholder:"Universit de...",logo:"Logo (chemin relatif, optionnel)",logoPlaceholder:"logo.png",toc:"Table des matires",showToc:"Afficher la table des matires au dbut",tocBeforeSection:"Afficher la TOC avant chaque section",numberSectionsInToc:"Numroter les sections dans la TOC",numbering:"Numrotation",showFrameNumber:"Afficher les numros de slides",numberingStyle:"Style de numrotation",numberingWithTotal:"Avec total (ex: 5/20)",numberingSimple:"Simple (ex: 5)",numberingNone:"Aucun",numberSections:"Numroter les sections",footer:"Pied de page",showAuthor:"Afficher l'auteur",showTitle:"Afficher le titre",showDate:"Afficher la date",advanced:"Options avances",showNavigation:"Afficher les symboles de navigation",showNotes:"Inclure les notes de prsentation dans le PDF",incrementalLists:"Listes incrmentales (apparition progressive des items)",overlays:"Activer les overlays et animations",saving:"Sauvegarde...",saveError:"Erreur lors de la sauvegarde de la configuration",guide:"Guide de configuration",guideThemes:"Thmes",guideThemesDesc1:"Madrid, Berlin, Copenhagen : Professionnels avec barre latrale",guideThemesDesc2:"Singapore, Montpellier : Minimalistes et lgants",guideThemesDesc3:"CambridgeUS, Berkeley : Style acadmique classique",guideThemesDesc4:"Warsaw : Moderne avec gradients",guideLogo:"Logo et images",guideLogoDesc1:"Placez vos images dans le dossier du projet",guideLogoDesc2:"Utilisez des chemins relatifs",guideLogoDesc3:"Formats supports : PNG, JPG, PDF",guideToc:"Table des matires",guideTocDesc1:"TOC au dbut : Une page rcapitulative de toutes les sections",guideTocDesc2:"TOC avant chaque section : Rappel du plan  chaque nouvelle section",guideTocDesc3:"Numrotation optionnelle des sections",guideAdvanced:"Options avances",guideAdvancedDesc1:"Listes incrmentales : Les items apparaissent un par un lors de la prsentation",guideAdvancedDesc2:"Overlays : Active les commandes \\pause et les animations",guideAdvancedDesc3:"Notes : Syntaxe ::: notes ... ::: pour notes de prsentateur"},Jwe={title:"Guide Mthodologique",overview:"Vue d'ensemble",features:"Fonctionnalits",faq:"FAQ",glossary:"Glossaire",searchPlaceholder:"Rechercher...",welcome:"Bienvenue dans ClioDeck",intro:"ClioDeck est un outil d'criture acadmique assiste par IA, conu pour les chercheurs en sciences humaines. Ce guide vous aide  comprendre les capacits, limitations et bonnes pratiques de chaque fonctionnalit.",importantWarning:"Important :",importantWarningText:"L'IA est un outil d'exploration et d'assistance, pas un remplacement de votre analyse critique. Vrifiez toujours les sources et documentez votre mthodologie.",mainFeatures:"Fonctionnalits Principales",faqTitle:"Questions Frquentes",glossaryTitle:"Glossaire",noResults:"Aucun rsultat pour",capabilities:"Capacits",limitations:"Limitations",bestPractices:"Bonnes Pratiques",academicContext:"Contexte Acadmique"},Qwe={title:" propos de ClioDeck",license:"Licence",description:"Cette application a t conue par",developedWith:`et dveloppe grce  Claude Code. C'est une exprience de vibe coding et est fournie "en l'tat", utilisez-la  vos propres risques.`,githubRepo:"Dpt GitHub",openSourceCredits:"Logiciels open source utiliss",libraries:"bibliothques",creditsIntro:"ClioDeck est rendu possible grce aux projets open source suivants :"},e2e={title:"Journal de Recherche",loading:"Chargement du journal...",sessions:"sessions",events:"vnements",aiOperations:"oprations IA",close:"Fermer",bySession:"Par session",projectOverview:"Vue d'ensemble du projet",hideEmptySessions:"Masquer les sessions vides",sessionsTab:"Sessions",timelineTab:"Timeline",aiOpsTab:"Oprations IA",chatHistory:"Historique Chat",allSessionsEmpty:"Toutes les sessions sont vides",uncheckHideEmpty:'Dcochez "Masquer les sessions vides" pour voir toutes les sessions.',noSessionsRecorded:"Aucune session enregistre",sessionsAutoCreated:"Les sessions sont cres automatiquement lorsque vous ouvrez un projet.",active:"Active",exportMD:"Export MD",exportJSON:"Export JSON",exportLaTeX:"Export LaTeX",selectViewAbove:"Slectionnez une vue ci-dessus",projectOverviewHelp:`En mode "Vue d'ensemble du projet", vous pouvez voir la timeline, les oprations IA et l'historique de chat agrgs pour toutes les sessions.`,sessionTimeline:"Timeline de la session",fullProjectTimeline:"Timeline complte du projet",tooltipHelp:"Traabilit complte de votre processus de recherche. Exportable pour annexes acadmiques."},t2e={title:"Export Prsentation reveal.js",info:"La prsentation sera exporte en HTML avec reveal.js. Le fichier s'ouvrira automatiquement dans votre navigateur.",controls:"Contrles :",controlArrows:"Flches : Navigation",controlS:"Touche S : Mode prsentateur avec notes",controlF:"Touche F : Plein cran",controlESC:"Touche ESC : Vue d'ensemble",presentationTitle:"Titre de la prsentation",titlePlaceholder:"Ma prsentation",author:"Auteur (optionnel)",authorPlaceholder:"Votre nom",outputFile:"Fichier de sortie",outputPlaceholder:"/chemin/vers/fichier.html",noProjectOpen:"Aucun projet ouvert",enterTitle:"Veuillez entrer un titre",unknownError:"Erreur inconnue lors de l'export",exportError:"Erreur lors de l'export",exportSuccess:"Export russi! Prsentation cre :",exporting:"Export en cours...",export:"Exporter",allFiles:"Tous les fichiers"},n2e={welcome:"Bienvenue",startWriting:"Commencez  crire...",placeholder:"Commencez  crire...",noCitationFound:"Aucune citation trouve"},r2e={unknownAuthor:"Auteur inconnu",bibtexKey:"Cl BibTeX",pages:"Pages",chunks:"Chunks",indexedAt:"Index le",delete:"Supprimer",title:"PDFs indexs",statistics:"Statistiques",documents:"Documents",addPDF:"Ajouter PDF",dropzone:"Glissez-dposez des PDFs ici ou cliquez sur + pour en ajouter",noDocuments:"Aucun document",cleanOrphanedChunks:"Nettoyer les chunks orphelins",cleaning:"Nettoyage en cours...",cleanSuccess:"Chunks orphelins nettoys avec succs !",cleanError:"Erreur lors du nettoyage",noProjectOpen:"Aucun projet ouvert. Veuillez d'abord ouvrir ou crer un projet.",indexingError:"Erreur lors de l'indexation",deleteConfirm:"Supprimer ce document et tous ses chunks ?",cleanOrphanedConfirm:`Nettoyer les chunks orphelins (sans document parent) ?

Cette action supprimera les chunks dont le document a t supprim.`,searchAndFilters:"Recherche et filtres",searchPlaceholder:"Rechercher auteur, titre, anne...",filtered:"filtr",noResults:"Aucun rsultat",tryDifferentSearch:"Essayez un autre terme de recherche"},i2e={cancel:"Annuler",close:"Fermer",done:"Termin",dismiss:"Ignorer",showMore:"Voir plus",showLess:"Voir moins"},o2e={title:"Topic Modeling (Optionnel)",description:"Le topic modeling utilise BERTopic (Python) pour identifier les thmes principaux dans votre corpus. Cette fonctionnalit est optionnelle et ncessite l'installation d'un environnement Python.",loading:"Chargement...",installed:"Install",notInstalled:"Non install",pythonVersion:"Version Python",venvPath:"Venv",installButton:"Installer l'environnement Python",installingButton:"Installation en cours...",reinstallButton:"Rinstaller",reinstallingButton:"Rinstallation en cours...",checkButton:"Vrifier",clearLog:"Effacer le log",installSuccess:"Installation termine avec succs",installError:"Erreur"},s2e={title:"Trouver des similarits",analyze:"Analyser le document",analyzing:"Analyse en cours...",emptyDocument:"Le document est vide. Rdigez du contenu avant de lancer l'analyse.",emptyState:"Analysez votre document pour trouver des sources bibliographiques pertinentes pour chaque section.",summary:"{{segments}} segments analyss, {{recommendations}} recommandations",segments:"segments",options:"Options",optionsTitle:"Options d'analyse",clear:"Effacer",clearConfirm:"Effacer les rsultats de similarit ?",refresh:"Ranalyser",granularity:"Granularit",granularityDescription:"Choisissez comment dcouper votre texte pour l'analyse","granularity.section":"Section","granularity.paragraph":"Paragraphe","granularity.sentence":"Phrase",sourceType:"Type de sources",sourceTypeDescription:"Choisissez dans quelles sources rechercher","sourceType.secondary":"Secondaires","sourceType.primary":"Primaires","sourceType.both":"Les deux","help.sourceType":"Choisissez les sources  interroger : sources secondaires (PDFs de la bibliographie) ou sources primaires (archives Tropy).","badge.primary":"Primaire","badge.secondary":"Secondaire",openSource:"Ouvrir",maxResults:"Rsultats par segment",maxResultsDescription:"Nombre maximum de PDFs recommands par segment",threshold:"Seuil de similarit",thresholdDescription:"Score minimum pour qu'un PDF soit recommand (0 = aucun filtre)",noFilter:"Auto",reranking:"Reranking intelligent",rerankingDescription:"Utilise l'IA pour rordonner les rsultats par pertinence (plus lent mais plus prcis)",rerankingEnabled:"Activ",rerankingDisabled:"Dsactiv",contextualEmbedding:"Embeddings contextuels",contextualEmbeddingDescription:"Ajoute le titre et la section du document pour amliorer la pertinence des recherches",contextualEnabled:"Activ",contextualDisabled:"Dsactiv",help:"Analyse votre texte et trouve des sources bibliographiques similaires dans vos PDFs indexs. Utilise une recherche hybride (smantique + mots-cls) combine  un reranking par IA pour des rsultats plus pertinents.","help.granularity":"Dtermine comment votre texte est dcoup pour l'analyse. 'Section' analyse par titres, 'Paragraphe' par blocs de texte, 'Phrase' pour une analyse fine.","help.maxResults":"Limite le nombre de PDFs suggrs par segment de texte. Un nombre plus lev donne plus de choix mais peut inclure des rsultats moins pertinents.","help.threshold":"Filtre les rsultats en dessous d'un certain score de similarit. 'Auto' laisse le systme dcider automatiquement.","help.reranking":"Aprs la recherche initiale, l'IA rordonne les rsultats en comparant le sens de votre texte avec chaque source. Plus lent mais plus prcis.","help.contextualEmbedding":"Enrichit la recherche avec le contexte du document (titre, section actuelle) pour trouver des sources plus pertinentes au sujet trait.",type:{section:"Section",paragraph:"Paragraphe",sentence:"Phrase"},lines:"Lignes {{start}}-{{end}}",noRecommendations:"Aucune source similaire trouve pour ce segment",openPDF:"Ouvrir",insertCitation:"Citer",showPreview:"Voir l'extrait",hidePreview:"Masquer l'extrait",page:"Page {{page}}"},a2e={noClioDeckProject:"Aucun projet ouvert",openClioDeckFirst:"Ouvrez ou crez d'abord un projet ClioDeck pour utiliser les sources primaires.",selectTropyProject:"Slectionner un projet Tropy",selectTropyMessage:"Choisissez un package .tropy ou un fichier .tpy",invalidProject:"Veuillez slectionner un package .tropy ou un fichier .tpy",openProject:"Ouvrir un projet Tropy",sync:"Synchroniser",stopWatching:"Arrter la synchronisation automatique",startWatching:"Activer la synchronisation automatique",ocr:"Paramtres OCR",importTranscription:"Importer une transcription",statistics:"Statistiques",reading:"Lecture du projet...",processing:"Traitement",indexing:"Indexation...",autoSync:"Sync auto",searchAndFilters:"Recherche et filtres",searchPlaceholder:"Rechercher dans les sources...",withTranscription:"avec transcription",withoutTranscription:"sans transcription",sources:"Sources primaires",noProject:"Aucun projet Tropy",openPrompt:"Cliquez sur l'icne dossier pour ouvrir un projet Tropy (.tropy ou .tpy)",noSources:"Aucune source",syncPrompt:"Cliquez sur synchroniser pour importer les sources depuis Tropy"},l2e={selector:{changeMode:"Changer de mode"},category:{all:"Tous",general:"Gnral",research:"Recherche",writing:"criture",review:"Relecture",analysis:"Analyse",methodology:"Mthodo"},source:{builtin:"Intgrs",global:"Globaux",project:"Projet"},manager:{title:"Modes",loading:"Chargement des modes...",duplicate:"Dupliquer",import:"Importer un mode",export:"Exporter",delete:"Supprimer",confirmDelete:"Cliquer pour confirmer la suppression",noCustom:"Aucun mode personnalis"},warning:{modelTooSmall:"Le modle actuel pourrait tre trop petit pour ce mode",contextTooSmall:"La fentre de contexte pourrait tre insuffisante"}},c2e={app:Dwe,actions:Iwe,settings:Rwe,editor:Lwe,ui:zwe,bibliography:Fwe,project:$we,export:{pdf:{title:"Export PDF",documentTitle:"Titre du document",author:"Auteur (optionnel)",missingDeps:"Dpendances manquantes:",pandoc:"Pandoc",xelatex:"XeLaTeX",abstractNote:"Le rsum sera automatiquement lu depuis...",beamer:"Prsentation Beamer",outputFile:"Fichier de sortie",exporting:"Export en cours...",success:"Export russi! PDF cr :",error:"Erreur lors de l'export"},word:{title:"Export Word (.docx)",documentTitle:"Titre du document",author:"Auteur (optionnel)",templateDetected:"Modle Word dtect:",abstractNote:"Le rsum sera automatiquement lu depuis...",outputFile:"Fichier de sortie",exporting:"Export en cours...",success:"Export russi! Document Word cr :",error:"Erreur lors de l'export"},exportToPDF:"Exporter en PDF",exportToWord:"Exporter en Word"},rag:Bwe,llm:Hwe,embeddedLLM:qwe,zotero:Vwe,suggestions:Wwe,chat:Uwe,corpus:Kwe,textometrics:Gwe,toolbar:Ywe,ragSettings:Zwe,beamer:Xwe,methodology:Jwe,about:Qwe,journal:e2e,presentation:t2e,milkdownEditor:n2e,pdfIndex:r2e,common:i2e,topicModeling:o2e,similarity:s2e,primarySources:a2e,modes:l2e},u2e="Fichier",d2e="dition",h2e="Affichage",f2e="Bibliographie",p2e="Fentre",m2e="Aide",g2e="Paramtres",y2e="Nouveau fichier",v2e="Nouveau projet",x2e="Ouvrir fichier",b2e="Ouvrir projet",w2e="Sauvegarder",k2e="Sauvegarder sous...",S2e="Exporter PDF",C2e="Exporter en Reveal.js",_2e="Quitter",A2e="Annuler",T2e="Refaire",P2e="Couper",M2e="Copier",E2e="Coller",N2e="Tout slectionner",j2e="Gras",O2e="Italique",D2e="Insrer lien",I2e="Insrer citation",R2e="Insrer image",L2e="Insrer tableau",z2e="Note de bas de page",F2e="Bloc citation",$2e="Statistiques du document",B2e="Suggestions de citations",H2e="Vrifier les citations",q2e="Basculer aperu",V2e="Panneau Projects",W2e="Panneau Bibliography",U2e="Panneau Chat",K2e="Panneau Corpus",G2e="Basculer bibliographie",Y2e="Basculer chat",Z2e="Recharger bibliographie",X2e="Importer fichier BibTeX",J2e="Rechercher citations",Q2e="Connecter Zotero",eke="Rduire",tke="Zoom",nke="Fermer",rke=" propos de ClioDeck",ike="Documentation",oke="Signaler un problme",ske={file:u2e,edit:d2e,view:h2e,bibliography:f2e,window:p2e,help:m2e,settings:g2e,newFile:y2e,newProject:v2e,openFile:x2e,openProject:b2e,save:w2e,saveAs:k2e,exportPDF:S2e,exportRevealJS:C2e,quit:_2e,undo:A2e,redo:T2e,cut:P2e,copy:M2e,paste:E2e,delete:"Supprimer",selectAll:N2e,bold:j2e,italic:O2e,insertLink:D2e,insertCitation:I2e,insertImage:R2e,insertTable:L2e,insertFootnote:z2e,insertBlockquote:F2e,documentStats:$2e,citationSuggestions:B2e,checkCitations:H2e,togglePreview:q2e,panelProjects:V2e,panelBibliography:W2e,panelChat:U2e,panelCorpus:K2e,toggleBibliography:G2e,toggleChat:Y2e,reloadBibliography:Z2e,importBibTeX:X2e,searchCitations:J2e,connectZotero:Q2e,minimize:eke,zoom:tke,close:nke,about:rke,documentation:ike,reportIssue:oke},ake={name:"ClioDeck"},lke={save:"Save",cancel:"Cancel",close:"Close",export:"Export",import:"Import",browse:"Browse",reset:"Reset",delete:"Delete",edit:"Edit",create:"Create",open:"Open",search:"Search",refresh:"Refresh",test:"Test",sync:"Sync",title:"Actions",dangerZone:"Danger zone",purgeDatabase:{title:"Purge database",description:"Deletes all vector chunks and resets indexes. PDFs will need to be reindexed.",button:"Purge database",confirmTitle:" WARNING - Irreversible action",confirmMessage:`This action will:

 Delete ALL vector embeddings
 Delete ALL text chunks
 Destroy HNSW and BM25 indexes
 Completely reset the vector database

You will need to reindex ALL your PDFs.

Type 'PURGE' to confirm:`,finalConfirm:"Final confirmation: This action is IRREVERSIBLE. Continue?",purging:"Purging...",success:"Database purged successfully",error:"Error during purge",cancelledNoMatch:"Purge cancelled (incorrect confirmation text)",cancelled:"Purge cancelled",warning:" This action is irreversible!",inProgress:"Purging..."},rebuildIndexes:{title:"Rebuild indexes",description:"Rebuilds HNSW and BM25 indexes from existing SQLite database. Useful if indexes are corrupted.",button:"Rebuild",rebuilding:"Rebuilding...",success:"Indexes rebuilt successfully",error:"Error during rebuild"},optimizeDatabase:{title:"Optimize database",description:"Compacts SQLite database and optimizes performance. Recommended after deleting many documents.",button:"Optimize",optimizing:"Optimizing...",success:"Database optimized. Saved: {{saved}}",error:"Error during optimization"},exportData:{title:"Export data",description:"Exports project configuration and metadata (not PDFs).",button:"Export"},importData:{title:"Import data",description:"Imports configuration from a previous export.",button:"Import"},databaseInfo:{title:"Database information",documentsIndexed:"Documents indexed",chunksStored:"Chunks stored",path:"Path",loading:"Loading..."},copyPath:{button:"Copy path",success:"Path copied to clipboard!"},openFolder:{button:"Open folder"},primaryDatabaseInfo:{title:"Primary Sources Database (Tropy)",sourcesIndexed:"Sources indexed",chunksStored:"Chunks stored"},purgePrimaryDatabase:{title:"Purge Primary Sources Database",description:"Deletes all indexed Tropy sources and their vector embeddings.",button:"Purge Primary Sources",confirmMessage:`This action will delete {{sourceCount}} primary sources and {{chunkCount}} chunks.

You will need to re-sync your Tropy project.

Continue?`,finalConfirm:"Final confirmation: This action is IRREVERSIBLE. Continue?",success:"Primary sources database purged successfully",error:"Error during purge: {{error}}",inProgress:"Purging...",warning:" This action is irreversible!"}},cke={title:"Settings",save:"Save",saved:"Configuration saved",saveError:"Error saving configuration",resetConfirm:"Reset configuration to default values?",language:"Language",selectLanguage:"Select language",tooltipSave:"Save",tooltipReset:"Reset",saving:"Saving...",languageSelector:{label:"Choose interface language",changeWarning:"Language will be applied on next application restart.",fr:"French",en:"English",de:"German"}},uke={title:"Editor",fontSize:"Font size",wordWrap:"Word wrap",minimap:"Show minimap",fontFamily:"Font family",noCitations:"No citations",importBibliography:"Import your bibliography...",fontSizeHelp:"Text size in the Markdown editor (Monaco Editor)",currentSize:"Current size: {{size}}px",appliesToEditor:"Applies only to the main text editor",wordWrapHelp:"Long lines are automatically wrapped to stay visible",minimapHelp:"Scrollbar with miniature document preview (like in VS Code)",fontFamilyHelp:"Choose the font for the code editor",fontSystem:"System fonts (SF Mono, Monaco, Consolas)",fontNote:"System fonts are always available. Others require installation on your system.",autoSave:"Auto-save",autoSaveHelp:"Automatically saves the document after a period of inactivity",autoSaveDelay:"Auto-save delay",autoSaveDelayHelp:"Time in seconds before auto-saving after the last edit",autoSaveDelaySeconds:"{{seconds}} seconds",defaultEditorMode:"Default editor",defaultEditorModeHelp:"Choose the editor displayed when opening a document",modeWysiwyg:"Visual (Milkdown)",modeSource:"Source (Monaco)"},dke={title:"Appearance",theme:{title:"Theme",description:"Choose application appearance",light:"Light",dark:"Dark",auto:"Auto (by time)",currentTheme:"Current theme",enabled:"Enabled",disabled:"Disabled",autoSwitch:{title:"Auto switch",description:"Automatically switch between light and dark mode based on time"},lightModeStart:"Light mode starts at",lightModeStartDescription:"Time when light mode begins (default: 06:00)",darkModeStart:"Dark mode starts at",darkModeStartDescription:"Time when dark mode begins (default: 20:00)"}},hke={title:"Bibliography",import:"Import BibTeX file",searchAndFilters:"Search and filters",searchPlaceholder:"Search author, title, year...",sortBy:"Sort by:",author:"Author",year:"Year",titleField:"Title",noCitations:"No citations available",importPrompt:"Import a BibTeX file to get started",pdfIndexed:"PDF indexed:",indexError:"Error:",viewDetails:"View details",copyKey:"Copy key",indexPDF:"Index PDF",openPDF:"Open PDF",keyCopied:"Key copied!",journal:"Journal:",publisher:"Publisher:",booktitle:"Book title:",insertCitation:"Insert citation",indexPDFButton:"Index PDF",indexed:"Indexed",notIndexed:"Not indexed",indexing:"Indexing...",alreadyIndexed:"This PDF is already indexed: {{title}}",reindex:"Re-index",reindexConfirm:`This PDF is already indexed. Do you want to delete it and re-index it?

{{title}}`,pdfReindexed:"PDF re-indexed: {{title}}",indexAllPDFs:"Index all PDFs",noPDFsToIndex:"No PDFs to index in bibliography",confirmIndexAll:"Index {{count}} PDFs from bibliography?",indexAllComplete:"Indexing complete: {{indexed}} indexed, {{skipped}} skipped, {{errors}} errors",indexingProgress:"Indexing {{current}}/{{total}}",availableInZotero:"available in Zotero",selectPDF:"Select PDF to download",modified:"Modified",zoteroNotConfigured:"Zotero is not configured. Please configure it in Settings.",pdfDownloadedAndIndexed:"PDF downloaded and indexed",downloadError:"Download error:",noProjectOpen:"No project is currently open",downloadAllMissing:"Download all missing PDFs from Zotero",noMissingPDFs:"No missing PDFs to download. All citations with Zotero PDFs already have local copies.",confirmDownloadAll:"Download and index {{count}} PDFs from Zotero?",downloadAllComplete:"Download complete: {{downloaded}} downloaded and indexed, {{skipped}} skipped, {{errors}} errors",viewStatistics:"View bibliography statistics",statistics:"Statistics",editMetadata:"Edit Metadata",exportBibTeX:"Export bibliography to BibTeX",noCitationsToExport:"No citations to export",exportSuccess:"{{count}} citation(s) exported successfully",exportError:"Failed to export bibliography",modifiedPDFsDetected:"{{count}} modified PDF(s) detected",modifiedPDFsMessage:"PDFs have been modified since last indexation. Re-index them to update the search index.",reindexAll:"Re-index all",noPDFsToReindex:"No PDFs to re-index",confirmReindexModified:"Re-index {{count}} modified PDF(s)?",reindexComplete:"{{count}} PDF(s) re-indexed successfully",reindexError:"Failed to re-index PDFs",cleanupOrphanPDFs:"Cleanup orphan PDFs",orphanPDFCleanup:"Orphan PDF Cleanup",scannedFiles:"Scanned files",linkedFiles:"Linked files",orphanFiles:"Orphan files",totalSize:"Total size",scanningForOrphans:"Scanning for orphan PDFs...",noOrphansFound:"No orphan PDFs found",noOrphansFoundDesc:"All PDF files in your project are linked to citations.",selectAll:"Select all",deselectAll:"Deselect all",selectedOrphans:"{{count}} selected",rescan:"Rescan",archiveSelected:"Archive selected",deleteSelected:"Delete selected",archiving:"Archiving...",deleting:"Deleting...",noOrphansSelected:"Please select at least one file to delete or archive.",confirmDeleteOrphans:"Delete {{count}} orphan PDF(s)? This action cannot be undone.",confirmArchiveOrphans:"Archive {{count}} orphan PDF(s)? Files will be moved to 'orphan_pdfs' folder.",orphanPDFsDeleted:"{{deleted}} file(s) deleted successfully. {{failed}} failed.",orphanPDFsArchived:"{{archived}} file(s) archived to {{path}}. {{failed}} failed.",orphanPDFScanError:"Failed to scan for orphan PDFs",orphanPDFDeleteError:"Failed to delete orphan PDFs",orphanPDFArchiveError:"Failed to archive orphan PDFs",orphanWarningTitle:"Caution",orphanWarningMessage:"Orphan PDFs are files not linked to any citation. Make sure these files are not needed before deleting them. Archiving is a safer option."},fke={title:"Project",fillAllFields:"Please fill all fields",createError:"Error creating project",openError:"Error opening project",newProject:"New project",openProject:"Open a project",closeProject:"Close project",currentProject:"Current project",recentProjects:"Recent projects",noProjectOpen:"No project open",createOrOpen:"Create a new project or open an existing one",createNewProject:"Create a new project",projectType:"Project type",projectName:"Project name",projectLocation:"Location",notesFolder:"Notes folder",notesFolderHelp:"Select an existing folder containing your Markdown files",creating:"Creating...",projectFiles:"Project files",appearance:"Appearance",removeFromRecent:"Remove from recent projects",dialogTitle:"ClioDeck Project",allFiles:"All files",name:"Name",type:"Type",path:"Path",createdAt:"Created on",types:{article:"Article",book:"Book",presentation:"Presentation",notes:"Notes",notesExisting:"Notes (existing folder)"},settings:"Project Settings",citationStyle:"Citation Style (CSL)",selectCSL:"Select a .csl file",noCslSelected:"No citation style selected",cslSelected:"CSL Style:",cslHelp:"The CSL file defines the citation and bibliography format in PDF and Word exports",cslSelectError:"Error selecting CSL file",cslSaveError:"Error saving CSL path",cslRemoveError:"Error removing CSL path",openInFinder:"Open in file manager",openFolderError:"Error opening project folder",zoteroSettings:"Zotero Settings",zoteroSettingsHelp:"Configure Zotero group and collection specific to this project. These settings override global Zotero configuration.",zoteroGroupId:"Group ID",zoteroGroupIdPlaceholder:"Enter Zotero group ID",zoteroGroupIdHelp:"The numeric ID of your Zotero group (found in the group URL)",zoteroCollectionKey:"Collection Key",zoteroCollectionKeyPlaceholder:"Enter collection key (optional)",zoteroCollectionKeyHelp:"The key of a specific collection within the group (optional)",loading:"Opening project..."},pke={title:"RAG Configuration",topK:"Number of chunks (topK)",topKHelp:"Number of text passages to retrieve",similarityThreshold:"Similarity threshold",similarityThresholdHelp:"Minimum similarity score (0.0 to 1.0)",chunkingConfig:"Chunking configuration",chunkingHelp:"Text chunk size",cpuOptimized:"CPU Optimized (default)",standard:"Standard",large:"Large",summaryGeneration:"Summary generation",summaryGenerationHelp:"How to generate summaries",extractive:"Extractive (fast)",abstractive:"Abstractive (quality)",disabled:"Disabled",summaryMaxLength:"Max summary length",summaryMaxLengthHelp:"Maximum number of words",useGraphContext:"Use graph context",graphSimilarityThreshold:"Graph similarity threshold",additionalGraphDocs:"Additional graph documents",includeSummaries:"Include summaries in RAG",enableTopicModeling:"Enable topic modeling",explorationSimilarityThreshold:"Similarity threshold (Exploration)",explorationSimilarityThresholdHelp:"Minimum score to create similarity links in the exploration graph"},mke={title:"LLM Configuration",backend:"Backend",backendHelp:"LLM service to use",ollamaURL:"Ollama URL",ollamaURLHelp:"Ollama server address",embeddingModel:"Embedding model",embeddingModelHelp:"Model for vector embeddings",chatModel:"Chat model",chatModelHelp:"Model for text generation",embeddingStrategy:"Embedding strategy",embeddingStrategyHelp:"Model choice and fallback behavior on error",embeddingStrategyWarning:" Warning: Changing this model requires re-indexing all PDFs.",embeddingStrategyWarningDetails:"Embeddings are not compatible between different models. You will need to delete all indexed PDFs and re-index them after the change.",embeddingStrategyRecommended:"Recommended models:",embeddingStrategyOptions:{nomicFallback:"nomic-embed-text with fallback to mxbai-embed-large",mxbaiOnly:"mxbai-embed-large only (no fallback)",custom:"Custom model (no fallback)"},embeddingStrategyDescriptions:{nomicFallback:"Uses nomic-embed-text, automatically switches to mxbai-embed-large on error (recommended)",mxbaiOnly:"Uses only mxbai-embed-large, no fallback (for consistency)",custom:"Uses the custom model above, no fallback (for advanced users)"},availableModels:"Available models",modelsAvailable:"models available",noModelsLoaded:"Click  to load models from Ollama",refreshModels:"Refresh models",testConnection:"Test connection",connectionSuccess:"Connection successful!",connectionError:"Connection error"},gke={title:"Embedded Model (Qwen)",loading:"Loading...",loadError:"Error loading information",providerNote:"Provider selection (Ollama or embedded) is done in the chatbot's RAG settings.",modelsLabel:"Available models",modelsHelp:"Download a model to use it offline",downloaded:"Downloaded",download:"Download",delete:"Delete",cancel:"Cancel",deleteConfirm:"Do you really want to delete this model?",deleteError:"Error deleting model",downloadError:"Error downloading",startingDownload:"Preparing download...",storageLabel:"Storage",usedSpace:"Used space",location:"Location"},yke={title:"Zotero Configuration",userId:"User ID",userIdHelp:"Your Zotero user ID",apiKey:"API Key",apiKeyHelp:"Your Zotero API key",apiKeyPlaceholder:"Your Zotero API key",autoSync:"Auto-sync",testConnection:"Test connection",testing:"Testing...",connectionOk:"Connection OK",connectionFailed:"Connection failed",connectionSuccess:"Zotero connection successful!",connectionError:"Unable to connect to Zotero",enterCredentials:"Please enter your user ID and API key",getApiKey:"Get API key",configDescription:"Connect your Zotero account to import your bibliographic references.",projectNote:"Zotero group and collection are configured in each project's settings.",import:{title:"Import from Zotero",notConfigured:"Zotero is not configured",configureFirst:"Please configure your Zotero connection in settings first.",goToSettings:"Go to settings",loading:"Loading Zotero collections...",loadError:"Error loading Zotero collections",loadCollections:"Load collections",loadCollectionsButton:"Load collections",loadCollectionsError:"Error loading collections",allCollections:"All collections",selectCollection:"Select a collection",selectPlaceholder:"Choose a collection...",options:"Import options",downloadPDFs:"Download attached PDFs",indexPDFs:"Automatically index PDFs",mergeBibliography:"Merge with existing bibliography",startImport:"Start import",importing:"Importing...",importButton:"Import",updateButton:"Update from Zotero",checkUpdatesButton:"Check for updates from Zotero",checking:"Checking...",configWarning:"Please configure your Zotero connection first",projectInfo:"No project open. References will be imported temporarily.",fetchingMetadata:"Fetching metadata ({{current}}/{{total}})",downloadingPDFs:"Downloading PDFs ({{current}}/{{total}})",indexingPDFs:"Indexing PDFs ({{current}}/{{total}})",successTitle:" Import successful!",successMessage:`**{{items}} references** imported
**{{pdfs}} PDFs** downloaded
**{{indexed}} documents** indexed`,success:"{{count}} references imported successfully",error:"Import error: {{error}}",genericError:"An error occurred during import",errorTitle:" Import error",close:"Close"}},vke={title:"Suggestions",enableCitations:"Enable citation suggestions",citationDelay:"Suggestion delay (ms)",maxCitations:"Max number of suggestions",enableReformulation:"Enable reformulation suggestions",reformulationDelay:"Reformulation delay (ms)",reformulationMinWords:"Minimum words",showInline:"Show inline suggestions"},xke={title:"Chat",askQuestion:"Ask a question",placeholder:"Ask a question about your documents...",send:"Send (Enter)",cancel:"Cancel",clearHistory:"Clear history",clearConfirm:"Clear all conversation history?",generating:"Generating...",newLineHint:"Shift + Enter for new line",you:"You",assistant:"Assistant",noContextWarning:"This response is not based on your documents. No relevant passages were found in your corpus.",sources:"Sources",source:"Source",excerpt:"Excerpt:",page:"Page",similarity:"Similarity",openPDF:"Open PDF",aiAssistant:"AI Assistant",helpText:"The assistant uses RAG (Retrieval-Augmented Generation) to answer your questions based on indexed PDF documents.",emptyState:{title:"No indexed documents",message:`The assistant will search through your indexed PDFs to answer your questions.

Index PDFs to get started.`},readyState:{title:"Ready to assist",message:`{{count}} indexed document(s) available.

Ask a question to get started.`}},bke={title:"Corpus",loading:"Loading corpus...",error:"Error",retry:"Retry",empty:"Empty corpus",filters:"Filters",year:"Year:",allYears:"All",author:"Author:",allAuthors:"All",language:"Language:",allLanguages:"All",noTemporalData:"No temporal data available. Documents must have year metadata.",topicAnalysisError:"Error analyzing topics",exploration:"Corpus Exploration",tooltipHelp:"Topic modeling and thematic analysis. Requires a corpus of at least 15-20 documents to be relevant.",noProject:"No project",openOrCreateProject:"Open or create a project to explore the corpus.",emptyCorpus:"Empty corpus",indexDocuments:"Index at least 2 PDF documents to visualize the knowledge graph.",resetFilters:"Reset filters",topic:"Topic:",allTopics:"All",statistics:"Statistics",documents:"Documents",extractedCitations:"Extracted citations",internalCitations:"internal",authors:"Authors",languages:"Languages",period:"Period:",textometrics:"Textometrics",topicAnalysis:"Topic Analysis (BERTopic)",noTopicAnalysis:"No topic analysis available.",numTopics:"Number of topics:",analyzeTopics:"Analyze topics",analyzing:"Analyzing...",topicHelp:"Topic analysis requires at least 5 indexed documents.",topicsIdentified:"{{count}} topics identified",documentsAnalyzed:"{{analyzed}}/{{total}} documents analyzed",outliers:"outliers",nbTopics:"Nb topics:",reanalyze:"Reanalyze",topicTimeline:"Topic temporal evolution",topicDocuments:"documents",hideDocuments:"Hide documents",showDocuments:"Show {{count}} documents",knowledgeGraph:"Knowledge Graph",similarityThreshold:"Similarity threshold:",regenerateGraph:"Regenerate graph",regenerating:"Generating...",citations:"Citations",similarity:"Similarity",coCitations:"Co-citations",exportGEXF:"Export GEXF",nodeDetails:"Node details",nodeTitle:"Title:",nodeAuthor:"Author:",nodeYear:"Year:",nodeCentrality:"Centrality:",nodeCommunity:"Community:",close:"Close",nodes:"Nodes:",links:"Links:",graphRegenerateError:"Error regenerating graph",topicServiceUnavailable:`The topic modeling service is not available.

To enable it, open Settings and install the Python environment in the "Topic Modeling" section.`,topicAnalysisErrorGeneric:"Error analyzing topics"},wke={loading:"Textometric analysis in progress...",retry:"Retry",noStatistics:"No textometric statistics available.",analyze:"Run analysis",totalWordsNoStopwords:"Total words (without stopwords)",totalWordsWithStopwords:"Total words (with stopwords)",uniqueVocabulary:"Unique vocabulary",lexicalRichness:"Lexical richness",lexicalRichnessDesc:"Unique words / total words ratio",avgWordsPerDoc:"Avg words / document",avgVocabPerDoc:"Avg vocabulary / document",refresh:"Refresh",frequentWords:"Frequent words",bigrams:"Bigrams",trigrams:"Trigrams",topWords:"Top {{count}} most frequent words (excluding stopwords)",topBigrams:"Top {{count}} most frequent bigrams",topTrigrams:"Top {{count}} most frequent trigrams",rank:"Rank",word:"Word",occurrences:"Occurrences",frequency:"Frequency",bar:"Bar",bigram:"Bigram",trigram:"Trigram"},kke={newFile:"New file",open:"Open",save:"Save",bold:"Bold (Ctrl+B)",italic:"Italic (Ctrl+I)",link:"Link (Ctrl+L)",citation:"Citation (Ctrl+')",table:"Insert table (Ctrl+Shift+T)",footnote:"Footnote (Ctrl+Shift+F)",blockquote:"Block quote",checkCitations:"Check citations",newFileConfirm:"Create a new file? Unsaved changes will be lost.",markdown:"Markdown",openError:"Error opening file",saveError:"Error saving file",wysiwygMode:"Visual mode (WYSIWYG)",sourceMode:"Source mode (Markdown)"},Ske={provider:"LLM Provider",providerAuto:"Auto (Ollama then embedded)",providerOllama:"Ollama only",providerEmbedded:"Embedded Qwen",providerAutoDesc:"Tries Ollama first, uses embedded model if Ollama is not available",providerOllamaDesc:"Uses Ollama exclusively for generation (requires Ollama running)",providerEmbeddedDesc:"Uses the embedded Qwen model (requires download in settings)",notDownloaded:"not downloaded"},Cke={title:"Beamer Configuration",appearance:"Appearance",mainTheme:"Main theme",colorTheme:"Color theme",fontTheme:"Font theme",aspectRatio:"Aspect ratio",titlePage:"Title page",institution:"Institution (optional)",institutionPlaceholder:"University of...",logo:"Logo (relative path, optional)",logoPlaceholder:"logo.png",toc:"Table of contents",showToc:"Show table of contents at the beginning",tocBeforeSection:"Show TOC before each section",numberSectionsInToc:"Number sections in TOC",numbering:"Numbering",showFrameNumber:"Show slide numbers",numberingStyle:"Numbering style",numberingWithTotal:"With total (e.g. 5/20)",numberingSimple:"Simple (e.g. 5)",numberingNone:"None",numberSections:"Number sections",footer:"Footer",showAuthor:"Show author",showTitle:"Show title",showDate:"Show date",advanced:"Advanced options",showNavigation:"Show navigation symbols",showNotes:"Include presentation notes in PDF",incrementalLists:"Incremental lists (items appear progressively)",overlays:"Enable overlays and animations",saving:"Saving...",saveError:"Error saving configuration",guide:"Configuration guide",guideThemes:"Themes",guideThemesDesc1:"Madrid, Berlin, Copenhagen: Professional with sidebar",guideThemesDesc2:"Singapore, Montpellier: Minimalist and elegant",guideThemesDesc3:"CambridgeUS, Berkeley: Classic academic style",guideThemesDesc4:"Warsaw: Modern with gradients",guideLogo:"Logo and images",guideLogoDesc1:"Place your images in the project folder",guideLogoDesc2:"Use relative paths",guideLogoDesc3:"Supported formats: PNG, JPG, PDF",guideToc:"Table of contents",guideTocDesc1:"TOC at the start: Summary page of all sections",guideTocDesc2:"TOC before each section: Plan reminder at each new section",guideTocDesc3:"Optional section numbering",guideAdvanced:"Advanced options",guideAdvancedDesc1:"Incremental lists: Items appear one by one during presentation",guideAdvancedDesc2:"Overlays: Enables \\pause commands and animations",guideAdvancedDesc3:"Notes: Use ::: notes ... ::: syntax for presenter notes"},_ke={title:"Methodology Guide",overview:"Overview",features:"Features",faq:"FAQ",glossary:"Glossary",searchPlaceholder:"Search...",welcome:"Welcome to ClioDeck",intro:"ClioDeck is an AI-assisted academic writing tool designed for humanities researchers. This guide helps you understand the capabilities, limitations, and best practices of each feature.",importantWarning:"Important:",importantWarningText:"AI is a tool for exploration and assistance, not a replacement for your critical analysis. Always verify sources and document your methodology.",mainFeatures:"Main Features",faqTitle:"Frequently Asked Questions",glossaryTitle:"Glossary",noResults:"No results for",capabilities:"Capabilities",limitations:"Limitations",bestPractices:"Best Practices",academicContext:"Academic Context"},Ake={title:"About ClioDeck",license:"License",description:"This app was designed by",developedWith:'and developed thanks to Claude Code. It is a vibe coding experiment and is delivered "as is", use it at your own risks.',githubRepo:"GitHub Repository",openSourceCredits:"Open source software used",libraries:"libraries",creditsIntro:"ClioDeck is made possible by the following open source projects:"},Tke={title:"Research Journal",loading:"Loading journal...",sessions:"sessions",events:"events",aiOperations:"AI operations",close:"Close",bySession:"By session",projectOverview:"Project overview",hideEmptySessions:"Hide empty sessions",sessionsTab:"Sessions",timelineTab:"Timeline",aiOpsTab:"AI Operations",chatHistory:"Chat History",allSessionsEmpty:"All sessions are empty",uncheckHideEmpty:'Uncheck "Hide empty sessions" to see all sessions.',noSessionsRecorded:"No sessions recorded",sessionsAutoCreated:"Sessions are created automatically when you open a project.",active:"Active",exportMD:"Export MD",exportJSON:"Export JSON",exportLaTeX:"Export LaTeX",selectViewAbove:"Select a view above",projectOverviewHelp:'In "Project overview" mode, you can see the timeline, AI operations and chat history aggregated for all sessions.',sessionTimeline:"Session Timeline",fullProjectTimeline:"Full Project Timeline",tooltipHelp:"Complete traceability of your research process. Exportable for academic appendices."},Pke={title:"reveal.js Presentation Export",info:"The presentation will be exported as HTML with reveal.js. The file will automatically open in your browser.",controls:"Controls:",controlArrows:"Arrows: Navigation",controlS:"S key: Presenter mode with notes",controlF:"F key: Fullscreen",controlESC:"ESC key: Overview",presentationTitle:"Presentation title",titlePlaceholder:"My presentation",author:"Author (optional)",authorPlaceholder:"Your name",outputFile:"Output file",outputPlaceholder:"/path/to/file.html",noProjectOpen:"No project open",enterTitle:"Please enter a title",unknownError:"Unknown error during export",exportError:"Export error",exportSuccess:"Export successful! Presentation created at:",exporting:"Exporting...",export:"Export",allFiles:"All files"},Mke={welcome:"Welcome",startWriting:"Start writing...",placeholder:"Start writing...",noCitationFound:"No citation found"},Eke={unknownAuthor:"Unknown author",bibtexKey:"BibTeX key",pages:"Pages",chunks:"Chunks",indexedAt:"Indexed on",delete:"Delete",title:"Indexed PDFs",statistics:"Statistics",documents:"Documents",addPDF:"Add PDF",dropzone:"Drag and drop PDFs here or click + to add",noDocuments:"No documents",cleanOrphanedChunks:"Clean orphaned chunks",cleaning:"Cleaning...",cleanSuccess:"Orphaned chunks cleaned successfully!",cleanError:"Error during cleanup",noProjectOpen:"No project open. Please open or create a project first.",indexingError:"Indexing error",deleteConfirm:"Delete this document and all its chunks?",cleanOrphanedConfirm:`Clean orphaned chunks (without parent document)?

This action will remove chunks whose document has been deleted.`,searchAndFilters:"Search and filters",searchPlaceholder:"Search author, title, year...",filtered:"filtered",noResults:"No results",tryDifferentSearch:"Try a different search term"},Nke={cancel:"Cancel",close:"Close",done:"Done",dismiss:"Dismiss",showMore:"Show more",showLess:"Show less"},jke={title:"Topic Modeling (Optional)",description:"Topic modeling uses BERTopic (Python) to identify the main themes in your corpus. This feature is optional and requires installing a Python environment.",loading:"Loading...",installed:"Installed",notInstalled:"Not installed",pythonVersion:"Python version",venvPath:"Venv",installButton:"Install Python environment",installingButton:"Installing...",reinstallButton:"Reinstall",reinstallingButton:"Reinstalling...",checkButton:"Check",clearLog:"Clear log",installSuccess:"Installation completed successfully",installError:"Error"},Oke={title:"Find Similarities",analyze:"Analyze Document",analyzing:"Analyzing...",emptyDocument:"The document is empty. Write some content before running the analysis.",emptyState:"Analyze your document to find relevant bibliographic sources for each section.",summary:"{{segments}} segments analyzed, {{recommendations}} recommendations",segments:"segments",options:"Options",optionsTitle:"Analysis Options",clear:"Clear",clearConfirm:"Clear similarity results?",refresh:"Re-analyze",granularity:"Granularity",granularityDescription:"Choose how to split your text for analysis","granularity.section":"Section","granularity.paragraph":"Paragraph","granularity.sentence":"Sentence",sourceType:"Source Type",sourceTypeDescription:"Select which type of sources to search","sourceType.secondary":"Secondary","sourceType.primary":"Primary","sourceType.both":"Both","help.sourceType":"Choose which sources to search: secondary sources (PDFs from bibliography) or primary sources (Tropy archives).","badge.primary":"Primary","badge.secondary":"Secondary",openSource:"Open",maxResults:"Results per segment",maxResultsDescription:"Maximum number of recommended PDFs per segment",threshold:"Similarity threshold",thresholdDescription:"Minimum score for a PDF to be recommended (0 = no filter)",noFilter:"Auto",reranking:"Smart reranking",rerankingDescription:"Uses AI to reorder results by relevance (slower but more accurate)",rerankingEnabled:"Enabled",rerankingDisabled:"Disabled",contextualEmbedding:"Contextual embeddings",contextualEmbeddingDescription:"Adds document title and section to improve search relevance",contextualEnabled:"Enabled",contextualDisabled:"Disabled",help:"Analyzes your text and finds similar bibliographic sources in your indexed PDFs. Uses hybrid search (semantic + keywords) combined with AI reranking for more relevant results.","help.granularity":"Determines how your text is split for analysis. 'Section' analyzes by headings, 'Paragraph' by text blocks, 'Sentence' for fine-grained analysis.","help.maxResults":"Limits the number of suggested PDFs per text segment. Higher numbers give more choices but may include less relevant results.","help.threshold":"Filters out results below a certain similarity score. 'Auto' lets the system decide automatically.","help.reranking":"After initial search, AI reorders results by comparing the meaning of your text with each source. Slower but more accurate.","help.contextualEmbedding":"Enriches the search with document context (title, current section) to find sources more relevant to the topic being discussed.",type:{section:"Section",paragraph:"Paragraph",sentence:"Sentence"},lines:"Lines {{start}}-{{end}}",noRecommendations:"No similar sources found for this segment",openPDF:"Open",insertCitation:"Cite",showPreview:"Show excerpt",hidePreview:"Hide excerpt",page:"Page {{page}}"},Dke={noClioDeckProject:"No Project Open",openClioDeckFirst:"Open or create a ClioDeck project first to use primary sources.",selectTropyProject:"Select Tropy Project",selectTropyMessage:"Choose a .tropy package or .tpy file",invalidProject:"Please select a .tropy package or .tpy file",openProject:"Open Tropy Project",sync:"Synchronize",stopWatching:"Stop auto-sync",startWatching:"Enable auto-sync",ocr:"OCR Settings",importTranscription:"Import Transcription",statistics:"Statistics",reading:"Reading project...",processing:"Processing",indexing:"Indexing...",autoSync:"Auto-sync",searchAndFilters:"Search & Filters",searchPlaceholder:"Search sources...",withTranscription:"with transcription",withoutTranscription:"without transcription",sources:"Primary Sources",noProject:"No Tropy Project",openPrompt:"Click the folder icon to open a Tropy project (.tropy or .tpy)",noSources:"No Sources",syncPrompt:"Click sync to import sources from Tropy"},Ike={selector:{changeMode:"Change mode"},category:{all:"All",general:"General",research:"Research",writing:"Writing",review:"Review",analysis:"Analysis",methodology:"Method."},source:{builtin:"Built-in",global:"Global",project:"Project"},manager:{title:"Modes",loading:"Loading modes...",duplicate:"Duplicate",import:"Import mode",export:"Export",delete:"Delete",confirmDelete:"Click to confirm deletion",noCustom:"No custom modes"},warning:{modelTooSmall:"Current model may be too small for this mode",contextTooSmall:"Context window may be insufficient"}},Rke={app:ake,actions:lke,settings:cke,editor:uke,ui:dke,bibliography:hke,project:fke,export:{pdf:{title:"PDF Export",documentTitle:"Document title",author:"Author (optional)",missingDeps:"Missing dependencies:",pandoc:"Pandoc",xelatex:"XeLaTeX",abstractNote:"The abstract will be automatically read from...",beamer:"Beamer presentation",outputFile:"Output file",exporting:"Exporting...",success:"Export successful! PDF created at:",error:"Export error"},word:{title:"Word Export (.docx)",documentTitle:"Document title",author:"Author (optional)",templateDetected:"Word template detected:",abstractNote:"The abstract will be automatically read from...",outputFile:"Output file",exporting:"Exporting...",success:"Export successful! Word document created at:",error:"Export error"},exportToPDF:"Export to PDF",exportToWord:"Export to Word"},rag:pke,llm:mke,embeddedLLM:gke,zotero:yke,suggestions:vke,chat:xke,corpus:bke,textometrics:wke,toolbar:kke,ragSettings:Ske,beamer:Cke,methodology:_ke,about:Ake,journal:Tke,presentation:Pke,milkdownEditor:Mke,pdfIndex:Eke,common:Nke,topicModeling:jke,similarity:Oke,primarySources:Dke,modes:Ike},Lke="File",zke="Edit",Fke="View",$ke="Bibliography",Bke="Window",Hke="Help",qke="Settings",Vke="New file",Wke="New project",Uke="Open file",Kke="Open project",Gke="Save",Yke="Save as...",Zke="Export PDF",Xke="Export to Reveal.js",Jke="Quit",Qke="Undo",e4e="Redo",t4e="Cut",n4e="Copy",r4e="Paste",i4e="Select all",o4e="Bold",s4e="Italic",a4e="Insert link",l4e="Insert citation",c4e="Insert image",u4e="Insert table",d4e="Footnote",h4e="Block quote",f4e="Document statistics",p4e="Citation suggestions",m4e="Check citations",g4e="Toggle preview",y4e="Projects Panel",v4e="Bibliography Panel",x4e="Chat Panel",b4e="Corpus Panel",w4e="Toggle bibliography",k4e="Toggle chat",S4e="Reload bibliography",C4e="Import BibTeX file",_4e="Search citations",A4e="Connect Zotero",T4e="Minimize",P4e="Zoom",M4e="Close",E4e="About ClioDeck",N4e="Documentation",j4e="Report an issue",O4e={file:Lke,edit:zke,view:Fke,bibliography:$ke,window:Bke,help:Hke,settings:qke,newFile:Vke,newProject:Wke,openFile:Uke,openProject:Kke,save:Gke,saveAs:Yke,exportPDF:Zke,exportRevealJS:Xke,quit:Jke,undo:Qke,redo:e4e,cut:t4e,copy:n4e,paste:r4e,delete:"Delete",selectAll:i4e,bold:o4e,italic:s4e,insertLink:a4e,insertCitation:l4e,insertImage:c4e,insertTable:u4e,insertFootnote:d4e,insertBlockquote:h4e,documentStats:f4e,citationSuggestions:p4e,checkCitations:m4e,togglePreview:g4e,panelProjects:y4e,panelBibliography:v4e,panelChat:x4e,panelCorpus:b4e,toggleBibliography:w4e,toggleChat:k4e,reloadBibliography:S4e,importBibTeX:C4e,searchCitations:_4e,connectZotero:A4e,minimize:T4e,zoom:P4e,close:M4e,about:E4e,documentation:N4e,reportIssue:j4e},D4e={name:"ClioDeck"},I4e={save:"Speichern",cancel:"Abbrechen",close:"Schlieen",export:"Exportieren",import:"Importieren",browse:"Durchsuchen",reset:"Zurcksetzen",delete:"Lschen",edit:"Bearbeiten",create:"Erstellen",open:"ffnen",search:"Suchen",refresh:"Aktualisieren",test:"Testen",sync:"Synchronisieren",title:"Aktionen",dangerZone:"Gefahrenzone",purgeDatabase:{title:"Datenbank bereinigen",description:"Lscht alle Vektor-Chunks und setzt die Indizes zurck. PDFs mssen neu indexiert werden.",button:"Datenbank bereinigen",confirmTitle:" WARNUNG - Unwiderrufliche Aktion",confirmMessage:`Diese Aktion wird:

 ALLE Vektor-Embeddings lschen
 ALLE Text-Chunks lschen
 HNSW- und BM25-Indizes zerstren
 Die Vektordatenbank vollstndig zurcksetzen

Sie mssen ALLE Ihre PDFs neu indexieren.

Geben Sie 'LSCHEN' ein, um zu besttigen:`,finalConfirm:"Letzte Besttigung: Diese Aktion ist UNWIDERRUFLICH. Fortfahren?",purging:"Bereinigung luft...",success:"Datenbank erfolgreich bereinigt",error:"Fehler bei der Bereinigung",cancelledNoMatch:"Bereinigung abgebrochen (falscher Besttigungstext)",cancelled:"Bereinigung abgebrochen",warning:" Diese Aktion ist unwiderruflich!",inProgress:"Bereinigung luft..."},rebuildIndexes:{title:"Indizes neu aufbauen",description:"Baut HNSW- und BM25-Indizes aus der vorhandenen SQLite-Datenbank neu auf. Ntzlich bei beschdigten Indizes.",button:"Neu aufbauen",rebuilding:"Wird neu aufgebaut...",success:"Indizes erfolgreich neu aufgebaut",error:"Fehler beim Neuaufbau"},optimizeDatabase:{title:"Datenbank optimieren",description:"Komprimiert die SQLite-Datenbank und optimiert die Leistung. Empfohlen nach dem Lschen vieler Dokumente.",button:"Optimieren",optimizing:"Wird optimiert...",success:"Datenbank optimiert. Gespart: {{saved}}",error:"Fehler bei der Optimierung"},exportData:{title:"Daten exportieren",description:"Exportiert Projektkonfiguration und Metadaten (keine PDFs).",button:"Exportieren"},importData:{title:"Daten importieren",description:"Importiert Konfiguration aus einem frheren Export.",button:"Importieren"},databaseInfo:{title:"Datenbankinformationen",documentsIndexed:"Indexierte Dokumente",chunksStored:"Gespeicherte Chunks",path:"Pfad",loading:"Laden..."},copyPath:{button:"Pfad kopieren",success:"Pfad in die Zwischenablage kopiert!"},openFolder:{button:"Ordner ffnen"},primaryDatabaseInfo:{title:"Primrquellen-Datenbank (Tropy)",sourcesIndexed:"Indexierte Quellen",chunksStored:"Gespeicherte Chunks"},purgePrimaryDatabase:{title:"Primrquellen-Datenbank bereinigen",description:"Lscht alle indexierten Tropy-Quellen und ihre Vektor-Embeddings.",button:"Primrquellen bereinigen",confirmMessage:`Diese Aktion wird {{sourceCount}} Primrquellen und {{chunkCount}} Chunks lschen.

Sie mssen Ihr Tropy-Projekt neu synchronisieren.

Fortfahren?`,finalConfirm:"Letzte Besttigung: Diese Aktion ist UNWIDERRUFLICH. Fortfahren?",success:"Primrquellen-Datenbank erfolgreich bereinigt",error:"Fehler beim Bereinigen: {{error}}",inProgress:"Bereinigung luft...",warning:" Diese Aktion ist unwiderruflich!"}},R4e={title:"Einstellungen",save:"Speichern",saved:"Konfiguration gespeichert",saveError:"Fehler beim Speichern",resetConfirm:"Konfiguration auf Standardwerte zurcksetzen?",language:"Sprache",selectLanguage:"Sprache auswhlen",tooltipSave:"Speichern",tooltipReset:"Zurcksetzen",saving:"Wird gespeichert...",languageSelector:{label:"Sprache der Benutzeroberflche auswhlen",changeWarning:"Die Sprache wird beim nchsten Neustart der Anwendung angewendet.",fr:"Franzsisch",en:"Englisch",de:"Deutsch"}},L4e={title:"Editor",fontSize:"Schriftgre",wordWrap:"Automatischer Zeilenumbruch",minimap:"Minimap anzeigen",fontFamily:"Schriftart",noCitations:"Keine Zitate",importBibliography:"Ihre Bibliographie importieren...",fontSizeHelp:"Textgre im Markdown-Editor (Monaco Editor)",currentSize:"Aktuelle Gre: {{size}}px",appliesToEditor:"Gilt nur fr den Haupttexteditor",wordWrapHelp:"Lange Zeilen werden automatisch umgebrochen",minimapHelp:"Scrollleiste mit Miniaturvorschau des Dokuments (wie in VS Code)",fontFamilyHelp:"Whlen Sie die Schriftart fr den Code-Editor",fontSystem:"Systemschriftarten (SF Mono, Monaco, Consolas)",fontNote:"Systemschriftarten sind immer verfgbar. Andere mssen auf Ihrem System installiert sein.",autoSave:"Automatisches Speichern",autoSaveHelp:"Speichert das Dokument automatisch nach einer Inaktivittsperiode",autoSaveDelay:"Verzgerung beim automatischen Speichern",autoSaveDelayHelp:"Zeit in Sekunden vor dem automatischen Speichern nach der letzten Bearbeitung",autoSaveDelaySeconds:"{{seconds}} Sekunden",defaultEditorMode:"Standard-Editor",defaultEditorModeHelp:"Whlen Sie den Editor, der beim ffnen eines Dokuments angezeigt wird",modeWysiwyg:"Visuell (Milkdown)",modeSource:"Quellcode (Monaco)"},z4e={title:"Benutzeroberflche",density:"Oberflchendichte",comfortable:"Komfortabel (Standard)",compact:"Kompakt (mehr sichtbare Elemente)",densityHelp:"Steuert Abstnde und Elementgre",comfortableDesc:"Grozgiger Abstand, leichter zu lesen",compactDesc:"Reduzierter Abstand, mehr Informationen angezeigt"},F4e={title:"Bibliographie",import:"BibTeX-Datei importieren",searchAndFilters:"Suche und Filter",searchPlaceholder:"Autor, Titel, Jahr suchen...",sortBy:"Sortieren nach:",author:"Autor",year:"Jahr",titleField:"Titel",noCitations:"Keine Zitate verfgbar",importPrompt:"Importieren Sie eine BibTeX-Datei, um zu beginnen",pdfIndexed:"PDF indexiert:",indexError:"Fehler:",viewDetails:"Details anzeigen",copyKey:"Schlssel kopieren",indexPDF:"PDF indexieren",openPDF:"PDF ffnen",keyCopied:"Schlssel kopiert!",journal:"Zeitschrift:",publisher:"Verlag:",booktitle:"Buchtitel:",insertCitation:"Zitat einfgen",indexPDFButton:"PDF indizieren",indexed:"Indexiert",notIndexed:"Nicht indexiert",indexing:"Indexierung...",alreadyIndexed:"Dieses PDF ist bereits indexiert: {{title}}",reindex:"Neu indexieren",reindexConfirm:`Dieses PDF ist bereits indexiert. Mchten Sie es lschen und neu indexieren?

{{title}}`,pdfReindexed:"PDF neu indexiert: {{title}}",indexAllPDFs:"Alle PDFs indexieren",noPDFsToIndex:"Keine PDFs zum Indexieren in der Bibliographie",confirmIndexAll:"{{count}} PDFs aus der Bibliographie indexieren?",indexAllComplete:"Indexierung abgeschlossen: {{indexed}} indexiert, {{skipped}} bersprungen, {{errors}} Fehler",indexingProgress:"Indexierung {{current}}/{{total}}"},$4e={title:"Projekt",fillAllFields:"Bitte alle Felder ausfllen",createError:"Fehler beim Erstellen des Projekts",openError:"Fehler beim ffnen des Projekts",newProject:"Neues Projekt",openProject:"Projekt ffnen",closeProject:"Projekt schlieen",currentProject:"Aktuelles Projekt",recentProjects:"Letzte Projekte",noProjectOpen:"Kein Projekt geffnet",createOrOpen:"Erstellen Sie ein neues Projekt oder ffnen Sie ein vorhandenes",createNewProject:"Neues Projekt erstellen",projectType:"Projekttyp",projectName:"Projektname",projectLocation:"Speicherort",notesFolder:"Notizen-Ordner",notesFolderHelp:"Whlen Sie einen vorhandenen Ordner mit Ihren Markdown-Dateien",creating:"Wird erstellt...",projectFiles:"Projektdateien",appearance:"Darstellung",removeFromRecent:"Aus letzten Projekten entfernen",dialogTitle:"ClioDeck-Projekt",allFiles:"Alle Dateien",name:"Name",type:"Typ",path:"Pfad",createdAt:"Erstellt am",types:{article:"Artikel",book:"Buch",presentation:"Prsentation",notes:"Notizen",notesExisting:"Notizen (vorhandener Ordner)"},settings:"Projekteinstellungen",citationStyle:"Zitierstil (CSL)",selectCSL:"Whlen Sie eine .csl-Datei",noCslSelected:"Kein Zitierstil ausgewhlt",cslSelected:"CSL-Stil:",cslHelp:"Die CSL-Datei definiert das Zitat- und Literaturverzeichnisformat in PDF- und Word-Exporten",cslSelectError:"Fehler beim Auswhlen der CSL-Datei",cslSaveError:"Fehler beim Speichern des CSL-Pfads",cslRemoveError:"Fehler beim Entfernen des CSL-Pfads",openInFinder:"Im Dateimanager ffnen",openFolderError:"Fehler beim ffnen des Projektordners",zoteroSettings:"Zotero-Einstellungen",zoteroSettingsHelp:"Konfigurieren Sie die projektspezifischen Zotero-Gruppe und Sammlung. Diese Einstellungen berschreiben die globale Zotero-Konfiguration.",zoteroGroupId:"Gruppen-ID",zoteroGroupIdPlaceholder:"Zotero Gruppen-ID eingeben",zoteroGroupIdHelp:"Die numerische ID Ihrer Zotero-Gruppe (in der Gruppen-URL zu finden)",zoteroCollectionKey:"Sammlungsschlssel",zoteroCollectionKeyPlaceholder:"Sammlungsschlssel eingeben (optional)",zoteroCollectionKeyHelp:"Der Schlssel einer bestimmten Sammlung innerhalb der Gruppe (optional)",loading:"Projekt wird geffnet..."},B4e={title:"RAG-Konfiguration",topK:"Anzahl der Chunks (topK)",topKHelp:"Anzahl der abzurufenden Textpassagen",similarityThreshold:"hnlichkeitsschwelle",similarityThresholdHelp:"Minimaler hnlichkeitswert (0.0 bis 1.0)",chunkingConfig:"Chunking-Konfiguration",chunkingHelp:"Textchunk-Gre",cpuOptimized:"CPU-optimiert (Standard)",standard:"Standard",large:"Gro",summaryGeneration:"Zusammenfassungsgenerierung",summaryGenerationHelp:"Wie Zusammenfassungen generiert werden",extractive:"Extraktiv (schnell)",abstractive:"Abstraktiv (Qualitt)",disabled:"Deaktiviert",summaryMaxLength:"Max. Zusammenfassungslnge",summaryMaxLengthHelp:"Maximale Anzahl von Wrtern",useGraphContext:"Graphkontext verwenden",graphSimilarityThreshold:"Graph-hnlichkeitsschwelle",additionalGraphDocs:"Zustzliche Graph-Dokumente",includeSummaries:"Zusammenfassungen in RAG einbeziehen",enableTopicModeling:"Themenmodellierung aktivieren",explorationSimilarityThreshold:"hnlichkeitsschwelle (Exploration)",explorationSimilarityThresholdHelp:"Mindestwert fr hnlichkeitsverbindungen im Explorationsgraphen"},H4e={title:"LLM-Konfiguration",backend:"Backend",backendHelp:"Zu verwendender LLM-Dienst",ollamaURL:"Ollama-URL",ollamaURLHelp:"Ollama-Serveradresse",embeddingModel:"Embedding-Modell",embeddingModelHelp:"Modell fr Vektor-Embeddings",chatModel:"Chat-Modell",chatModelHelp:"Modell fr Textgenerierung",embeddingStrategy:"Embedding-Strategie",embeddingStrategyHelp:"Modellauswahl und Fallback-Verhalten bei Fehlern",embeddingStrategyWarning:" Warnung: Das ndern dieses Modells erfordert eine Neuindizierung aller PDFs.",embeddingStrategyWarningDetails:"Embeddings sind zwischen verschiedenen Modellen nicht kompatibel. Sie mssen alle indizierten PDFs lschen und nach der nderung neu indizieren.",embeddingStrategyRecommended:"Empfohlene Modelle:",embeddingStrategyOptions:{nomicFallback:"nomic-embed-text mit Fallback auf mxbai-embed-large",mxbaiOnly:"nur mxbai-embed-large (kein Fallback)",custom:"Benutzerdefiniertes Modell (kein Fallback)"},embeddingStrategyDescriptions:{nomicFallback:"Verwendet nomic-embed-text, wechselt bei Fehlern automatisch zu mxbai-embed-large (empfohlen)",mxbaiOnly:"Verwendet nur mxbai-embed-large, kein Fallback (fr Konsistenz)",custom:"Verwendet das obige benutzerdefinierte Modell, kein Fallback (fr fortgeschrittene Benutzer)"},availableModels:"Verfgbare Modelle",refreshModels:"Modelle aktualisieren",testConnection:"Verbindung testen",connectionSuccess:"Verbindung erfolgreich!",connectionError:"Verbindungsfehler"},q4e={title:"Eingebettetes Modell (Qwen)",loading:"Wird geladen...",loadError:"Fehler beim Laden der Informationen",providerNote:"Die Anbieterauswahl (Ollama oder eingebettet) erfolgt in den RAG-Einstellungen des Chatbots.",modelsLabel:"Verfgbare Modelle",modelsHelp:"Laden Sie ein Modell herunter, um es offline zu verwenden",downloaded:"Heruntergeladen",download:"Herunterladen",delete:"Lschen",cancel:"Abbrechen",deleteConfirm:"Mchten Sie dieses Modell wirklich lschen?",deleteError:"Fehler beim Lschen des Modells",downloadError:"Fehler beim Herunterladen",startingDownload:"Download wird vorbereitet...",storageLabel:"Speicher",usedSpace:"Verwendeter Speicher",location:"Speicherort"},V4e={title:"Zotero-Konfiguration",userId:"Benutzer-ID",userIdHelp:"Ihre Zotero-Benutzer-ID",apiKey:"API-Schlssel",apiKeyHelp:"Ihr Zotero-API-Schlssel",autoSync:"Auto-Sync",testConnection:"Verbindung testen",connectionSuccess:"Zotero-Verbindung erfolgreich!",connectionError:"Verbindung zu Zotero nicht mglich",import:{title:"Import aus Zotero",notConfigured:"Zotero ist nicht konfiguriert",configureFirst:"Bitte konfigurieren Sie zuerst Ihre Zotero-Verbindung in den Einstellungen.",goToSettings:"Zu den Einstellungen",loading:"Zotero-Sammlungen werden geladen...",loadError:"Fehler beim Laden der Zotero-Sammlungen",loadCollections:"Sammlungen laden",loadCollectionsButton:"Sammlungen laden",loadCollectionsError:"Fehler beim Laden der Sammlungen",allCollections:"Alle Sammlungen",selectCollection:"Sammlung auswhlen",selectPlaceholder:"Sammlung whlen...",options:"Import-Optionen",downloadPDFs:"Angehngte PDFs herunterladen",indexPDFs:"PDFs automatisch indexieren",mergeBibliography:"Mit vorhandener Bibliographie zusammenfhren",startImport:"Import starten",importing:"Import luft...",importButton:"Importieren",updateButton:"Von Zotero aktualisieren",checkUpdatesButton:"Auf Zotero-Updates prfen",checking:"Prfung luft...",configWarning:"Bitte konfigurieren Sie zuerst Ihre Zotero-Verbindung",projectInfo:"Kein Projekt geffnet. Referenzen werden temporr importiert.",fetchingMetadata:"Metadaten werden abgerufen ({{current}}/{{total}})",downloadingPDFs:"PDFs werden heruntergeladen ({{current}}/{{total}})",indexingPDFs:"PDFs werden indexiert ({{current}}/{{total}})",successTitle:" Import erfolgreich!",successMessage:`**{{items}} Referenzen** importiert
**{{pdfs}} PDFs** heruntergeladen
**{{indexed}} Dokumente** indexiert`,success:"{{count}} Referenzen erfolgreich importiert",error:"Importfehler: {{error}}",genericError:"Beim Import ist ein Fehler aufgetreten",errorTitle:" Import-Fehler",close:"Schlieen"}},W4e={title:"Vorschlge",enableCitations:"Zitatvorschlge aktivieren",citationDelay:"Vorschlagsverzgerung (ms)",maxCitations:"Max. Anzahl von Vorschlgen",enableReformulation:"Umformulierungsvorschlge aktivieren",reformulationDelay:"Umformulierungsverzgerung (ms)",reformulationMinWords:"Minimale Wrter",showInline:"Inline-Vorschlge anzeigen"},U4e={title:"Chat",askQuestion:"Stellen Sie eine Frage",placeholder:"Stellen Sie eine Frage zu Ihren Dokumenten...",send:"Senden (Enter)",cancel:"Abbrechen",clearHistory:"Verlauf lschen",clearConfirm:"Gesamten Gesprchsverlauf lschen?",generating:"Wird generiert...",newLineHint:"Shift + Enter fr neue Zeile",you:"Sie",assistant:"Assistent",noContextWarning:"Diese Antwort basiert nicht auf Ihren Dokumenten. Es wurden keine relevanten Passagen in Ihrem Korpus gefunden.",sources:"Quellen",source:"Quelle",excerpt:"Auszug:",page:"Seite",similarity:"hnlichkeit",openPDF:"PDF ffnen",aiAssistant:"KI-Assistent",helpText:"Der Assistent verwendet RAG (Retrieval-Augmented Generation), um Ihre Fragen basierend auf indexierten PDF-Dokumenten zu beantworten.",emptyState:{title:"Keine indexierten Dokumente",message:`Der Assistent durchsucht Ihre indexierten PDFs, um Ihre Fragen zu beantworten.

Indexieren Sie PDFs, um zu beginnen.`},readyState:{title:"Bereit zu helfen",message:`{{count}} indexierte(s) Dokument(e) verfgbar.

Stellen Sie eine Frage, um zu beginnen.`}},K4e={title:"Korpus",loading:"Korpus wird geladen...",error:"Fehler",retry:"Erneut versuchen",empty:"Leerer Korpus",filters:"Filter",year:"Jahr:",allYears:"Alle",author:"Autor:",allAuthors:"Alle",language:"Sprache:",allLanguages:"Alle",noTemporalData:"Keine zeitlichen Daten verfgbar. Dokumente mssen Jahres-Metadaten haben.",topicAnalysisError:"Fehler bei der Themenanalyse",exploration:"Korpus-Exploration",tooltipHelp:"Topic-Modelling und thematische Analyse. Erfordert einen Korpus von mindestens 15-20 Dokumenten.",noProject:"Kein Projekt",openOrCreateProject:"ffnen oder erstellen Sie ein Projekt, um den Korpus zu erkunden.",emptyCorpus:"Leerer Korpus",indexDocuments:"Indexieren Sie mindestens 2 PDF-Dokumente, um den Wissensgraphen zu visualisieren.",resetFilters:"Filter zurcksetzen",topic:"Thema:",allTopics:"Alle",statistics:"Statistiken",documents:"Dokumente",extractedCitations:"Extrahierte Zitate",internalCitations:"intern",authors:"Autoren",languages:"Sprachen",period:"Zeitraum:",textometrics:"Textometrie",topicAnalysis:"Themenanalyse (BERTopic)",noTopicAnalysis:"Keine Themenanalyse verfgbar.",numTopics:"Anzahl der Themen:",analyzeTopics:"Themen analysieren",analyzing:"Analyse luft...",topicHelp:"Die Themenanalyse erfordert mindestens 5 indexierte Dokumente.",topicsIdentified:"{{count}} Themen identifiziert",documentsAnalyzed:"{{analyzed}}/{{total}} Dokumente analysiert",outliers:"Ausreier",nbTopics:"Anz. Themen:",reanalyze:"Neu analysieren",topicTimeline:"Zeitliche Entwicklung der Themen",topicDocuments:"Dokumente",hideDocuments:"Dokumente ausblenden",showDocuments:"{{count}} Dokumente anzeigen",knowledgeGraph:"Wissensgraph",similarityThreshold:"hnlichkeitsschwelle:",regenerateGraph:"Graph neu generieren",regenerating:"Wird generiert...",citations:"Zitate",similarity:"hnlichkeit",coCitations:"Ko-Zitationen",exportGEXF:"GEXF exportieren",nodeDetails:"Knotendetails",nodeTitle:"Titel:",nodeAuthor:"Autor:",nodeYear:"Jahr:",nodeCentrality:"Zentralitt:",nodeCommunity:"Community:",close:"Schlieen",nodes:"Knoten:",links:"Verbindungen:",graphRegenerateError:"Fehler beim Regenerieren des Graphen",topicServiceUnavailable:`Der Topic-Modelling-Dienst ist nicht verfgbar.

ffnen Sie die Einstellungen und installieren Sie die Python-Umgebung im Abschnitt "Topic Modeling", um ihn zu aktivieren.`,topicAnalysisErrorGeneric:"Fehler bei der Themenanalyse"},G4e={loading:"Textometrische Analyse luft...",retry:"Erneut versuchen",noStatistics:"Keine textometrischen Statistiken verfgbar.",analyze:"Analyse starten",totalWordsNoStopwords:"Gesamtwrter (ohne Stoppwrter)",totalWordsWithStopwords:"Gesamtwrter (mit Stoppwrtern)",uniqueVocabulary:"Einzigartiges Vokabular",lexicalRichness:"Lexikalische Reichhaltigkeit",lexicalRichnessDesc:"Verhltnis einzigartige Wrter / Gesamtwrter",avgWordsPerDoc:"Durchschn. Wrter / Dokument",avgVocabPerDoc:"Durchschn. Vokabular / Dokument",refresh:"Aktualisieren",frequentWords:"Hufige Wrter",bigrams:"Bigramme",trigrams:"Trigramme",topWords:"Top {{count}} hufigste Wrter (ohne Stoppwrter)",topBigrams:"Top {{count}} hufigste Bigramme",topTrigrams:"Top {{count}} hufigste Trigramme",rank:"Rang",word:"Wort",occurrences:"Vorkommen",frequency:"Hufigkeit",bar:"Balken",bigram:"Bigramm",trigram:"Trigramm"},Y4e={newFile:"Neue Datei",open:"ffnen",save:"Speichern",bold:"Fett (Strg+B)",italic:"Kursiv (Strg+I)",link:"Link (Strg+L)",citation:"Zitat (Strg+')",table:"Tabelle einfgen (Strg+Shift+T)",footnote:"Funote (Strg+Shift+F)",blockquote:"Blockzitat",checkCitations:"Zitate berprfen",newFileConfirm:"Neue Datei erstellen? Nicht gespeicherte nderungen gehen verloren.",markdown:"Markdown",openError:"Fehler beim ffnen der Datei",saveError:"Fehler beim Speichern der Datei",wysiwygMode:"Visueller Modus (WYSIWYG)",sourceMode:"Quellmodus (Markdown)"},Z4e={provider:"LLM-Anbieter",providerAuto:"Auto (Ollama dann eingebettet)",providerOllama:"Nur Ollama",providerEmbedded:"Eingebettetes Qwen",providerAutoDesc:"Versucht zuerst Ollama, verwendet das eingebettete Modell, wenn Ollama nicht verfgbar ist",providerOllamaDesc:"Verwendet ausschlielich Ollama fr die Generierung (erfordert laufendes Ollama)",providerEmbeddedDesc:"Verwendet das eingebettete Qwen-Modell (erfordert Download in den Einstellungen)",notDownloaded:"nicht heruntergeladen"},X4e={title:"Beamer-Konfiguration",appearance:"Erscheinungsbild",mainTheme:"Hauptthema",colorTheme:"Farbthema",fontTheme:"Schriftthema",aspectRatio:"Seitenverhltnis",titlePage:"Titelseite",institution:"Institution (optional)",institutionPlaceholder:"Universitt...",logo:"Logo (relativer Pfad, optional)",logoPlaceholder:"logo.png",toc:"Inhaltsverzeichnis",showToc:"Inhaltsverzeichnis am Anfang anzeigen",tocBeforeSection:"TOC vor jedem Abschnitt anzeigen",numberSectionsInToc:"Abschnitte im TOC nummerieren",numbering:"Nummerierung",showFrameNumber:"Foliennummern anzeigen",numberingStyle:"Nummerierungsstil",numberingWithTotal:"Mit Gesamtzahl (z.B. 5/20)",numberingSimple:"Einfach (z.B. 5)",numberingNone:"Keine",numberSections:"Abschnitte nummerieren",footer:"Fuzeile",showAuthor:"Autor anzeigen",showTitle:"Titel anzeigen",showDate:"Datum anzeigen",advanced:"Erweiterte Optionen",showNavigation:"Navigationssymbole anzeigen",showNotes:"Prsentationsnotizen im PDF einschlieen",incrementalLists:"Inkrementelle Listen (Elemente erscheinen nacheinander)",overlays:"Overlays und Animationen aktivieren",saving:"Speichern...",saveError:"Fehler beim Speichern der Konfiguration",guide:"Konfigurationsanleitung",guideThemes:"Themen",guideThemesDesc1:"Madrid, Berlin, Copenhagen: Professionell mit Seitenleiste",guideThemesDesc2:"Singapore, Montpellier: Minimalistisch und elegant",guideThemesDesc3:"CambridgeUS, Berkeley: Klassischer akademischer Stil",guideThemesDesc4:"Warsaw: Modern mit Farbverlufen",guideLogo:"Logo und Bilder",guideLogoDesc1:"Platzieren Sie Ihre Bilder im Projektordner",guideLogoDesc2:"Verwenden Sie relative Pfade",guideLogoDesc3:"Untersttzte Formate: PNG, JPG, PDF",guideToc:"Inhaltsverzeichnis",guideTocDesc1:"TOC am Anfang: bersichtsseite aller Abschnitte",guideTocDesc2:"TOC vor jedem Abschnitt: Planerinnerung bei jedem neuen Abschnitt",guideTocDesc3:"Optionale Abschnittsnummerierung",guideAdvanced:"Erweiterte Optionen",guideAdvancedDesc1:"Inkrementelle Listen: Elemente erscheinen einzeln whrend der Prsentation",guideAdvancedDesc2:"Overlays: Aktiviert \\pause-Befehle und Animationen",guideAdvancedDesc3:"Notizen: Verwenden Sie ::: notes ... ::: Syntax fr Prsentatornotizen"},J4e={title:"Methodenleitfaden",overview:"bersicht",features:"Funktionen",faq:"FAQ",glossary:"Glossar",searchPlaceholder:"Suchen...",welcome:"Willkommen bei ClioDeck",intro:"ClioDeck ist ein KI-gesttztes akademisches Schreibwerkzeug fr Geisteswissenschaftler. Dieser Leitfaden hilft Ihnen, die Fhigkeiten, Einschrnkungen und Best Practices jeder Funktion zu verstehen.",importantWarning:"Wichtig:",importantWarningText:"KI ist ein Werkzeug zur Erkundung und Untersttzung, kein Ersatz fr Ihre kritische Analyse. berprfen Sie immer die Quellen und dokumentieren Sie Ihre Methodik.",mainFeatures:"Hauptfunktionen",faqTitle:"Hufig gestellte Fragen",glossaryTitle:"Glossar",noResults:"Keine Ergebnisse fr",capabilities:"Fhigkeiten",limitations:"Einschrnkungen",bestPractices:"Best Practices",academicContext:"Akademischer Kontext"},Q4e={title:"ber ClioDeck",license:"Lizenz",description:"Diese App wurde entwickelt von",developedWith:'und dank Claude Code entwickelt. Es ist ein Vibe-Coding-Experiment und wird "so wie es ist" geliefert, verwenden Sie es auf eigenes Risiko.',githubRepo:"GitHub-Repository",openSourceCredits:"Verwendete Open-Source-Software",libraries:"Bibliotheken",creditsIntro:"ClioDeck wird durch die folgenden Open-Source-Projekte ermglicht:"},eSe={title:"Forschungstagebuch",loading:"Tagebuch wird geladen...",sessions:"Sitzungen",events:"Ereignisse",aiOperations:"KI-Operationen",close:"Schlieen",bySession:"Nach Sitzung",projectOverview:"Projektbersicht",hideEmptySessions:"Leere Sitzungen ausblenden",sessionsTab:"Sitzungen",timelineTab:"Zeitachse",aiOpsTab:"KI-Operationen",chatHistory:"Chat-Verlauf",allSessionsEmpty:"Alle Sitzungen sind leer",uncheckHideEmpty:'Deaktivieren Sie "Leere Sitzungen ausblenden", um alle Sitzungen anzuzeigen.',noSessionsRecorded:"Keine Sitzungen aufgezeichnet",sessionsAutoCreated:"Sitzungen werden automatisch erstellt, wenn Sie ein Projekt ffnen.",active:"Aktiv",exportMD:"Export MD",exportJSON:"Export JSON",exportLaTeX:"Export LaTeX",selectViewAbove:"Whlen Sie oben eine Ansicht",projectOverviewHelp:'Im Modus "Projektbersicht" knnen Sie die Zeitachse, KI-Operationen und den Chat-Verlauf fr alle Sitzungen aggregiert sehen.',sessionTimeline:"Sitzungs-Zeitachse",fullProjectTimeline:"Vollstndige Projekt-Zeitachse",tooltipHelp:"Vollstndige Nachverfolgbarkeit Ihres Forschungsprozesses. Exportierbar fr akademische Anhnge."},tSe={title:"reveal.js Prsentationsexport",info:"Die Prsentation wird als HTML mit reveal.js exportiert. Die Datei wird automatisch in Ihrem Browser geffnet.",controls:"Steuerung:",controlArrows:"Pfeiltasten: Navigation",controlS:"S-Taste: Prsentationsmodus mit Notizen",controlF:"F-Taste: Vollbild",controlESC:"ESC-Taste: bersicht",presentationTitle:"Prsentationstitel",titlePlaceholder:"Meine Prsentation",author:"Autor (optional)",authorPlaceholder:"Ihr Name",outputFile:"Ausgabedatei",outputPlaceholder:"/pfad/zur/datei.html",noProjectOpen:"Kein Projekt geffnet",enterTitle:"Bitte geben Sie einen Titel ein",unknownError:"Unbekannter Fehler beim Export",exportError:"Exportfehler",exportSuccess:"Export erfolgreich! Prsentation erstellt unter:",exporting:"Wird exportiert...",export:"Exportieren",allFiles:"Alle Dateien"},nSe={welcome:"Willkommen",startWriting:"Beginnen Sie zu schreiben...",placeholder:"Beginnen Sie zu schreiben...",noCitationFound:"Kein Zitat gefunden"},rSe={unknownAuthor:"Unbekannter Autor",bibtexKey:"BibTeX-Schlssel",pages:"Seiten",chunks:"Chunks",indexedAt:"Indexiert am",delete:"Lschen",title:"Indexierte PDFs",statistics:"Statistiken",documents:"Dokumente",addPDF:"PDF hinzufgen",dropzone:"PDFs hierher ziehen oder + klicken zum Hinzufgen",noDocuments:"Keine Dokumente",cleanOrphanedChunks:"Verwaiste Chunks bereinigen",cleaning:"Bereinigung luft...",cleanSuccess:"Verwaiste Chunks erfolgreich bereinigt!",cleanError:"Fehler bei der Bereinigung",noProjectOpen:"Kein Projekt geffnet. Bitte ffnen oder erstellen Sie zuerst ein Projekt.",indexingError:"Indexierungsfehler",deleteConfirm:"Dieses Dokument und alle seine Chunks lschen?",cleanOrphanedConfirm:`Verwaiste Chunks (ohne bergeordnetes Dokument) bereinigen?

Diese Aktion entfernt Chunks, deren Dokument gelscht wurde.`,searchAndFilters:"Suche und Filter",searchPlaceholder:"Autor, Titel, Jahr suchen...",filtered:"gefiltert",noResults:"Keine Ergebnisse",tryDifferentSearch:"Versuchen Sie einen anderen Suchbegriff"},iSe={cancel:"Abbrechen",close:"Schlieen",done:"Fertig",dismiss:"Verwerfen",showMore:"Mehr anzeigen",showLess:"Weniger anzeigen"},oSe={title:"Topic Modeling (Optional)",description:"Topic Modeling verwendet BERTopic (Python), um die Hauptthemen in Ihrem Korpus zu identifizieren. Diese Funktion ist optional und erfordert die Installation einer Python-Umgebung.",loading:"Laden...",installed:"Installiert",notInstalled:"Nicht installiert",pythonVersion:"Python-Version",venvPath:"Venv",installButton:"Python-Umgebung installieren",installingButton:"Installation luft...",reinstallButton:"Neu installieren",reinstallingButton:"Neuinstallation luft...",checkButton:"Prfen",clearLog:"Log lschen",installSuccess:"Installation erfolgreich abgeschlossen",installError:"Fehler"},sSe={title:"hnlichkeiten finden",analyze:"Dokument analysieren",analyzing:"Analyse luft...",emptyDocument:"Das Dokument ist leer. Schreiben Sie Inhalt, bevor Sie die Analyse starten.",emptyState:"Analysieren Sie Ihr Dokument, um relevante bibliographische Quellen fr jeden Abschnitt zu finden.",summary:"{{segments}} Segmente analysiert, {{recommendations}} Empfehlungen",segments:"Segmente",options:"Optionen",optionsTitle:"Analyseoptionen",clear:"Lschen",clearConfirm:"hnlichkeitsergebnisse lschen?",refresh:"Neu analysieren",granularity:"Granularitt",granularityDescription:"Whlen Sie, wie Ihr Text fr die Analyse aufgeteilt werden soll","granularity.section":"Abschnitt","granularity.paragraph":"Absatz","granularity.sentence":"Satz",sourceType:"Quellentyp",sourceTypeDescription:"Whlen Sie, in welchen Quellen gesucht werden soll","sourceType.secondary":"Sekundr","sourceType.primary":"Primr","sourceType.both":"Beide","help.sourceType":"Whlen Sie, welche Quellen durchsucht werden sollen: Sekundrquellen (PDFs aus der Bibliographie) oder Primrquellen (Tropy-Archive).","badge.primary":"Primr","badge.secondary":"Sekundr",openSource:"ffnen",maxResults:"Ergebnisse pro Segment",maxResultsDescription:"Maximale Anzahl empfohlener PDFs pro Segment",threshold:"hnlichkeitsschwelle",thresholdDescription:"Mindestpunktzahl, damit ein PDF empfohlen wird (0 = kein Filter)",noFilter:"Auto",reranking:"Intelligentes Reranking",rerankingDescription:"Verwendet KI, um Ergebnisse nach Relevanz neu zu ordnen (langsamer aber genauer)",rerankingEnabled:"Aktiviert",rerankingDisabled:"Deaktiviert",contextualEmbedding:"Kontextuelle Einbettungen",contextualEmbeddingDescription:"Fgt Dokumenttitel und Abschnitt hinzu, um die Suchrelevanz zu verbessern",contextualEnabled:"Aktiviert",contextualDisabled:"Deaktiviert",help:"Analysiert Ihren Text und findet hnliche bibliographische Quellen in Ihren indexierten PDFs. Verwendet hybride Suche (semantisch + Schlsselwrter) kombiniert mit KI-Reranking fr relevantere Ergebnisse.","help.granularity":"Bestimmt, wie Ihr Text fr die Analyse aufgeteilt wird. 'Abschnitt' analysiert nach berschriften, 'Absatz' nach Textblcken, 'Satz' fr feinkrnige Analyse.","help.maxResults":"Begrenzt die Anzahl der vorgeschlagenen PDFs pro Textsegment. Hhere Zahlen geben mehr Auswahl, knnen aber weniger relevante Ergebnisse enthalten.","help.threshold":"Filtert Ergebnisse unter einem bestimmten hnlichkeitswert heraus. 'Auto' lsst das System automatisch entscheiden.","help.reranking":"Nach der ersten Suche ordnet KI die Ergebnisse neu, indem sie den Sinn Ihres Textes mit jeder Quelle vergleicht. Langsamer aber genauer.","help.contextualEmbedding":"Reichert die Suche mit Dokumentkontext (Titel, aktueller Abschnitt) an, um Quellen zu finden, die relevanter fr das behandelte Thema sind.",type:{section:"Abschnitt",paragraph:"Absatz",sentence:"Satz"},lines:"Zeilen {{start}}-{{end}}",noRecommendations:"Keine hnlichen Quellen fr dieses Segment gefunden",openPDF:"ffnen",insertCitation:"Zitieren",showPreview:"Auszug anzeigen",hidePreview:"Auszug ausblenden",page:"Seite {{page}}"},aSe={noClioDeckProject:"Kein Projekt geffnet",openClioDeckFirst:"ffnen oder erstellen Sie zuerst ein ClioDeck-Projekt, um Primrquellen zu verwenden.",selectTropyProject:"Tropy-Projekt auswhlen",selectTropyMessage:"Whlen Sie ein .tropy-Paket oder eine .tpy-Datei",invalidProject:"Bitte whlen Sie ein .tropy-Paket oder eine .tpy-Datei",openProject:"Tropy-Projekt ffnen",sync:"Synchronisieren",stopWatching:"Auto-Sync stoppen",startWatching:"Auto-Sync aktivieren",ocr:"OCR-Einstellungen",importTranscription:"Transkription importieren",statistics:"Statistiken",reading:"Projekt wird gelesen...",processing:"Verarbeitung",indexing:"Indexierung...",autoSync:"Auto-Sync",searchAndFilters:"Suche & Filter",searchPlaceholder:"In Quellen suchen...",withTranscription:"mit Transkription",withoutTranscription:"ohne Transkription",sources:"Primrquellen",noProject:"Kein Tropy-Projekt",openPrompt:"Klicken Sie auf das Ordnersymbol, um ein Tropy-Projekt (.tropy oder .tpy) zu ffnen",noSources:"Keine Quellen",syncPrompt:"Klicken Sie auf Synchronisieren, um Quellen aus Tropy zu importieren"},lSe={selector:{changeMode:"Modus wechseln"},category:{all:"Alle",general:"Allgemein",research:"Forschung",writing:"Schreiben",review:"berprfung",analysis:"Analyse",methodology:"Methodik"},source:{builtin:"Integriert",global:"Global",project:"Projekt"},manager:{title:"Modi",loading:"Modi werden geladen...",duplicate:"Duplizieren",import:"Modus importieren",export:"Exportieren",delete:"Lschen",confirmDelete:"Zum Besttigen klicken",noCustom:"Keine benutzerdefinierten Modi"},warning:{modelTooSmall:"Das aktuelle Modell ist mglicherweise zu klein fr diesen Modus",contextTooSmall:"Das Kontextfenster knnte unzureichend sein"}},cSe={app:D4e,actions:I4e,settings:R4e,editor:L4e,ui:z4e,bibliography:F4e,project:$4e,export:{pdf:{title:"PDF-Export",documentTitle:"Dokumenttitel",author:"Autor (optional)",missingDeps:"Fehlende Abhngigkeiten:",pandoc:"Pandoc",xelatex:"XeLaTeX",abstractNote:"Die Zusammenfassung wird automatisch gelesen von...",beamer:"Beamer-Prsentation",outputFile:"Ausgabedatei",exporting:"Wird exportiert...",success:"Export erfolgreich! PDF erstellt unter:",error:"Exportfehler"},word:{title:"Word-Export (.docx)",documentTitle:"Dokumenttitel",author:"Autor (optional)",templateDetected:"Word-Vorlage erkannt:",abstractNote:"Die Zusammenfassung wird automatisch gelesen von...",outputFile:"Ausgabedatei",exporting:"Wird exportiert...",success:"Export erfolgreich! Word-Dokument erstellt unter:",error:"Exportfehler"},exportToPDF:"Als PDF exportieren",exportToWord:"Als Word exportieren"},rag:B4e,llm:H4e,embeddedLLM:q4e,zotero:V4e,suggestions:W4e,chat:U4e,corpus:K4e,textometrics:G4e,toolbar:Y4e,ragSettings:Z4e,beamer:X4e,methodology:J4e,about:Q4e,journal:eSe,presentation:tSe,milkdownEditor:nSe,pdfIndex:rSe,common:iSe,topicModeling:oSe,similarity:sSe,primarySources:aSe,modes:lSe},uSe="Datei",dSe="Bearbeiten",hSe="Ansicht",fSe="Bibliographie",pSe="Fenster",mSe="Hilfe",gSe="Einstellungen",ySe="Neue Datei",vSe="Neues Projekt",xSe="Datei ffnen",bSe="Projekt ffnen",wSe="Speichern",kSe="Speichern unter...",SSe="PDF exportieren",CSe="Als Reveal.js exportieren",_Se="Beenden",ASe="Rckgngig",TSe="Wiederholen",PSe="Ausschneiden",MSe="Kopieren",ESe="Einfgen",NSe="Alles auswhlen",jSe="Fett",OSe="Kursiv",DSe="Link einfgen",ISe="Zitat einfgen",RSe="Bild einfgen",LSe="Tabelle einfgen",zSe="Funote",FSe="Blockzitat",$Se="Dokumentstatistiken",BSe="Zitatvorschlge",HSe="Zitate berprfen",qSe="Vorschau umschalten",VSe="Projekte-Panel",WSe="Bibliographie-Panel",USe="Chat-Panel",KSe="Korpus-Panel",GSe="Bibliographie umschalten",YSe="Chat umschalten",ZSe="Bibliographie neu laden",XSe="BibTeX-Datei importieren",JSe="Zitate suchen",QSe="Mit Zotero verbinden",e5e="Minimieren",t5e="Zoom",n5e="Schlieen",r5e="ber ClioDeck",i5e="Dokumentation",o5e="Problem melden",s5e={file:uSe,edit:dSe,view:hSe,bibliography:fSe,window:pSe,help:mSe,settings:gSe,newFile:ySe,newProject:vSe,openFile:xSe,openProject:bSe,save:wSe,saveAs:kSe,exportPDF:SSe,exportRevealJS:CSe,quit:_Se,undo:ASe,redo:TSe,cut:PSe,copy:MSe,paste:ESe,delete:"Lschen",selectAll:NSe,bold:jSe,italic:OSe,insertLink:DSe,insertCitation:ISe,insertImage:RSe,insertTable:LSe,insertFootnote:zSe,insertBlockquote:FSe,documentStats:$Se,citationSuggestions:BSe,checkCitations:HSe,togglePreview:qSe,panelProjects:VSe,panelBibliography:WSe,panelChat:USe,panelCorpus:KSe,toggleBibliography:GSe,toggleChat:YSe,reloadBibliography:ZSe,importBibTeX:XSe,searchCitations:JSe,connectZotero:QSe,minimize:e5e,zoom:t5e,close:n5e,about:r5e,documentation:i5e,reportIssue:o5e},a5e={fr:"Franais",en:"English",de:"Deutsch"};Sr.use(Cye).init({resources:{fr:{common:c2e,menu:ske},en:{common:Rke,menu:O4e},de:{common:cSe,menu:s5e}},lng:"fr",fallbackLng:"fr",ns:["common","menu"],defaultNS:"common",interpolation:{escapeValue:!1},react:{useSuspense:!1}});const vee=El(n=>({currentLanguage:"fr",setLanguage:async e=>{try{console.log("[Language Store] Changing language to:",e),await Sr.changeLanguage(e),console.log("[Language Store] i18n language changed to:",Sr.language),window.electron?.config&&await window.electron.config.set("language",e),n({currentLanguage:e}),window.electron?.ipcRenderer&&window.electron.ipcRenderer.send("language-changed",e),console.log("[Language Store] Language change complete")}catch(r){console.error("Error changing language:",r)}},initializeLanguage:async()=>{try{if(console.log("[Language Store] Initializing language..."),console.log("[Language Store] Current i18n language:",Sr.language),!window.electron?.config){console.warn("[Language Store] Electron API not available, using system language");const r=navigator.language.split("-")[0],i=["fr","en","de"].includes(r)?r:"fr";await Sr.changeLanguage(i),n({currentLanguage:i});return}const e=await window.electron.config.get("language");if(console.log("[Language Store] Saved language from config:",e),e&&["fr","en","de"].includes(e))console.log("[Language Store] Applying saved language:",e),await Sr.changeLanguage(e),n({currentLanguage:e}),console.log("[Language Store] Language initialized to:",Sr.language);else{const r=navigator.language.split("-")[0],i=["fr","en","de"].includes(r)?r:"fr";console.log("[Language Store] Using detected language:",i),await Sr.changeLanguage(i),n({currentLanguage:i}),console.log("[Language Store] Language initialized to:",Sr.language)}}catch(e){console.error("Error initializing language:",e)}}})),l5e=()=>{const{t:n}=qt("common"),{currentLanguage:e,setLanguage:r}=vee(),i=Eb(s=>s.setParams),o=async s=>{const a=s.target.value;if(await r(a),a==="fr"||a==="en")try{const l=await window.electron.config.get("rag")||{};console.log("Syncing systemPromptLanguage to:",a,"current RAG config:",l),await window.electron.config.set("rag",{...l,systemPromptLanguage:a}),i({systemPromptLanguage:a}),console.log("systemPromptLanguage synced successfully (config + store)")}catch(l){console.error("Failed to sync systemPromptLanguage:",l)}};return p.jsx(On,{title:n("settings.language"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsx("div",{className:"config-section-content",children:p.jsxs("div",{className:"config-field",children:[p.jsxs("label",{className:"config-label",children:[n("settings.selectLanguage"),p.jsx("span",{className:"config-help",children:n("settings.languageSelector.label")})]}),p.jsx("select",{value:e,onChange:o,className:"config-select",children:Object.entries(a5e).map(([s,a])=>p.jsx("option",{value:s,children:a},s))}),p.jsx("div",{className:"config-description",children:p.jsxs("small",{children:[" ",n("settings.languageSelector.changeWarning")]})})]})})})})},c5e=()=>{const{t:n}=qt("common"),[e,r]=M.useState(null),[i,o]=M.useState(!1),[s,a]=M.useState(!1),[l,c]=M.useState([]);M.useEffect(()=>{u()},[]);const u=async()=>{o(!0);try{const h=await window.electron.topicModeling.checkStatus();console.log("Topic modeling status result:",h),h.success?r({installed:h.installed,venvPath:h.venvPath,pythonVersion:h.pythonVersion,error:h.error}):r({installed:!1,error:h.error})}catch(h){console.error("Failed to check topic modeling status:",h),r({installed:!1,error:h.message||n("topicModeling.installError")})}finally{o(!1)}},d=async()=>{a(!0),c([]);const h=window.electron.topicModeling.onSetupProgress(f=>{c(m=>[...m,f])});try{const f=await window.electron.topicModeling.setupEnvironment();f.success?(c(m=>[...m,` ${n("topicModeling.installSuccess")}`]),await u()):c(m=>[...m,` ${n("topicModeling.installError")}: ${f.error||"Unknown error"}`])}catch(f){console.error("Failed to setup environment:",f),c(m=>[...m,` ${n("topicModeling.installError")}: ${f.message}`])}finally{a(!1),h()}};return p.jsx(On,{title:n("topicModeling.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsx("p",{className:"config-help",children:n("topicModeling.description")}),i?p.jsx("p",{className:"config-help",children:n("topicModeling.loading")}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"topic-modeling-status",children:[p.jsxs("div",{className:`topic-status-indicator ${e?.installed?"topic-status-success":"topic-status-warning"}`,children:[p.jsx("span",{className:"topic-status-dot"}),p.jsx("span",{className:"topic-status-text",children:e?.installed?n("topicModeling.installed"):n("topicModeling.notInstalled")})]}),e?.installed&&e.pythonVersion&&p.jsxs("div",{className:"topic-status-details",children:[p.jsx("span",{children:e.pythonVersion}),p.jsx("span",{className:"topic-status-path",children:e.venvPath})]}),e?.error&&!e.installed&&p.jsx("div",{className:"topic-status-error",children:e.error})]}),p.jsxs("div",{className:"topic-modeling-actions",children:[(!e||!e.installed)&&p.jsx("button",{onClick:d,disabled:s,className:"config-btn primary",children:n(s?"topicModeling.installingButton":"topicModeling.installButton")}),e&&e.installed&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:d,disabled:s,className:"config-btn-small",children:n(s?"topicModeling.reinstallingButton":"topicModeling.reinstallButton")}),p.jsx("button",{onClick:u,disabled:i||s,className:"config-btn-small",children:n("topicModeling.checkButton")})]})]}),s&&l.length>0&&p.jsx("div",{className:"topic-install-progress",children:p.jsx("div",{className:"topic-progress-log",children:l.map((h,f)=>p.jsx("div",{className:"topic-progress-message",children:h},f))})}),!s&&l.length>0&&p.jsx("button",{onClick:()=>c([]),className:"config-btn-small",style:{marginTop:"8px"},children:n("topicModeling.clearLog")})]})]})})})},u5e={MessageSquare:n3,BookOpen:Ac,FileSearch:EQ,Eye:e3,PenTool:jQ,Compass:MQ,Sparkles:DQ},d5e=()=>{const{t:n,i18n:e}=qt("common"),r=e.language?.substring(0,2)||"fr",{modes:i,isLoadingModes:o,loadModes:s,deleteCustomMode:a,importMode:l,exportMode:c}=u3(),[u,d]=M.useState(null);M.useEffect(()=>{s()},[s]);const h=(A,T=14)=>{const E=u5e[A];return E?p.jsx(E,{size:T}):p.jsx(n3,{size:T})},f=A=>({builtin:{fr:"Intgr",en:"Built-in",de:"Integriert"},global:{fr:"Global",en:"Global",de:"Global"},project:{fr:"Projet",en:"Project",de:"Projekt"}})[A]?.[r]||A,m=i.filter(A=>A.source==="builtin"),v=i.filter(A=>A.source==="global"),x=i.filter(A=>A.source==="project"),b=async A=>{u===A.metadata.id?(await a(A.metadata.id,A.source),d(null)):(d(A.metadata.id),setTimeout(()=>d(null),3e3))},w=async A=>{await l(A)},S=async A=>{await c(A)},_=async A=>{try{const T={...JSON.parse(JSON.stringify(A)),metadata:{...A.metadata,id:`${A.metadata.id}-copy-${Date.now().toString(36)}`,name:{fr:`${A.metadata.name.fr} (copie)`,en:`${A.metadata.name.en} (copy)`}}};delete T.source,delete T.filePath,await window.electron.mode.save(T,"global"),await s()}catch(T){console.error("Failed to duplicate mode:",T)}},P=(A,T)=>p.jsxs("div",{className:"mode-manager-row",children:[p.jsx("span",{className:"mode-manager-icon",children:h(A.metadata.icon,16)}),p.jsxs("div",{className:"mode-manager-info",children:[p.jsx("span",{className:"mode-manager-name",children:A.metadata.name[r]}),p.jsx("span",{className:"mode-manager-desc",children:A.metadata.description[r]})]}),p.jsx("span",{className:`mode-manager-source mode-manager-source-${A.source}`,children:f(A.source)}),p.jsxs("div",{className:"mode-manager-actions",children:[p.jsx("button",{className:"mode-manager-btn",onClick:()=>_(A),title:n("modes.manager.duplicate","Dupliquer"),children:p.jsx(hve,{size:13})}),p.jsx("button",{className:"mode-manager-btn",onClick:()=>S(A.metadata.id),title:n("modes.manager.export","Exporter"),children:p.jsx(mx,{size:13})}),T&&p.jsx("button",{className:`mode-manager-btn mode-manager-btn-danger ${u===A.metadata.id?"confirming":""}`,onClick:()=>b(A),title:u===A.metadata.id?n("modes.manager.confirmDelete","Cliquer pour confirmer"):n("modes.manager.delete","Supprimer"),children:p.jsx(Gu,{size:13})})]})]},A.metadata.id);return p.jsx(On,{title:n("modes.manager.title","Modes"),defaultExpanded:!1,children:p.jsx("div",{className:"mode-manager-section",children:o?p.jsx("div",{className:"mode-manager-loading",children:n("modes.manager.loading","Chargement...")}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mode-manager-group",children:[p.jsxs("h4",{className:"mode-manager-group-title",children:[n("modes.source.builtin","Intgrs")," (",m.length,")"]}),m.map(A=>P(A,!1))]}),p.jsxs("div",{className:"mode-manager-group",children:[p.jsxs("div",{className:"mode-manager-group-header",children:[p.jsxs("h4",{className:"mode-manager-group-title",children:[n("modes.source.global","Globaux")," (",v.length,")"]}),p.jsxs("button",{className:"mode-manager-btn mode-manager-btn-import",onClick:()=>w("global"),title:n("modes.manager.import","Importer"),children:[p.jsx(S9,{size:13}),p.jsx("span",{children:n("actions.import")})]})]}),v.length===0?p.jsx("div",{className:"mode-manager-empty",children:n("modes.manager.noCustom","Aucun mode personnalis")}):v.map(A=>P(A,!0))]}),p.jsxs("div",{className:"mode-manager-group",children:[p.jsxs("div",{className:"mode-manager-group-header",children:[p.jsxs("h4",{className:"mode-manager-group-title",children:[n("modes.source.project","Projet")," (",x.length,")"]}),p.jsxs("button",{className:"mode-manager-btn mode-manager-btn-import",onClick:()=>w("project"),title:n("modes.manager.import","Importer"),children:[p.jsx(S9,{size:13}),p.jsx("span",{children:n("actions.import")})]})]}),x.length===0?p.jsx("div",{className:"mode-manager-empty",children:n("modes.manager.noCustom","Aucun mode personnalis")}):x.map(A=>P(A,!0))]})]})})})},h5e=({config:n,onChange:e})=>{const{t:r}=qt("common"),[i,o]=M.useState(!1),[s,a]=M.useState("idle"),l=async()=>{if(!n.userId||!n.apiKey){alert(r("zotero.enterCredentials"));return}o(!0),a("idle");try{const c=await window.electron.zotero.testConnection(n.userId,n.apiKey);a(c.success?"success":"error"),c.success&&setTimeout(()=>a("idle"),3e3)}catch{a("error")}finally{o(!1)}};return p.jsx(On,{title:"Zotero",defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsx("p",{className:"config-description",children:r("zotero.configDescription")}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{children:"User ID"}),p.jsx("input",{type:"text",value:n.userId,onChange:c=>e({...n,userId:c.target.value}),placeholder:"123456"})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{children:"API Key"}),p.jsx("input",{type:"password",value:n.apiKey,onChange:c=>e({...n,apiKey:c.target.value}),placeholder:r("zotero.apiKeyPlaceholder")})]}),p.jsx("p",{className:"config-help",style:{marginTop:"8px"},children:r("zotero.projectNote")}),p.jsxs("div",{className:"config-actions",children:[p.jsx("button",{className:"config-btn secondary",onClick:l,disabled:i||!n.userId||!n.apiKey,children:i?r("zotero.testing"):s==="success"?p.jsxs(p.Fragment,{children:[p.jsx(Fu,{size:16,style:{color:"#4caf50"}}),r("zotero.connectionOk")]}):s==="error"?p.jsxs(p.Fragment,{children:[p.jsx(ave,{size:16,style:{color:"#f44336"}}),r("zotero.connectionFailed")]}):r("zotero.testConnection")}),p.jsxs("a",{href:"https://www.zotero.org/settings/keys",target:"_blank",rel:"noopener noreferrer",className:"config-link",children:[p.jsx(z0,{size:14}),r("zotero.getApiKey")]})]})]})})})};var ds=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(ds||{});class Ys extends Error{constructor(e,r){super(r),this.name="MilkdownError",this.code=e}}const f5e=(n,e)=>typeof e=="function"?"[Function]":e,h3=n=>JSON.stringify(n,f5e);function p5e(n){return new Ys(ds.docTypeError,`Doc type error, unsupported type: ${h3(n)}`)}function m5e(n){return new Ys(ds.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function g5e(n){return new Ys(ds.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function f3(){return new Ys(ds.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function y5e(n,e,r){const o=`Cannot create node for ${"name"in n?n.name:n}`,s=d=>{if(d==null)return"null";if(Array.isArray(d))return`[${d.map(s).join(", ")}]`;if(typeof d=="object")return"toJSON"in d&&typeof d.toJSON=="function"?JSON.stringify(d.toJSON()):"spec"in d?JSON.stringify(d.spec):JSON.stringify(d);if(typeof d=="string"||typeof d=="number"||typeof d=="boolean")return JSON.stringify(d);if(typeof d=="function")return`[Function: ${d.name||"anonymous"}]`;try{return String(d)}catch{return"[Unserializable]"}},a=["[Description]",o],l=["[Attributes]",e],c=["[Content]",(r??[]).map(d=>d?typeof d=="object"&&"type"in d?`${d}`:s(d):"null")],u=[a,l,c].reduce((d,[h,f])=>{const m=`${h}: ${s(f)}.`;return d.concat(m)},[]);return new Ys(ds.createNodeInParserFail,u.join(`
`))}function xee(){return new Ys(ds.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function v5e(n){return new Ys(ds.parserMatchError,`Cannot match target parser for node: ${h3(n)}.`)}function x5e(n){return new Ys(ds.serializerMatchError,`Cannot match target serializer for node: ${h3(n)}.`)}function b5e(n,e){return new Ys(ds.getAtomFromSchemaFail,`Cannot get ${n}: ${e} from schema.`)}function Nl(n){return new Ys(ds.expectDomTypeError,`Expect to be a dom, but get: ${h3(n)}.`)}function E_(){return new Ys(ds.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function w5e(n){return new Ys(ds.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function k5e(n){return new Ys(ds.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}class bee{constructor(){this.sliceMap=new Map,this.get=e=>{const r=typeof e=="string"?[...this.sliceMap.values()].find(i=>i.type.name===e):this.sliceMap.get(e.id);if(!r){const i=typeof e=="string"?e:e.name;throw m5e(i)}return r},this.remove=e=>{const r=typeof e=="string"?[...this.sliceMap.values()].find(i=>i.type.name===e):this.sliceMap.get(e.id);r&&this.sliceMap.delete(r.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(r=>r.type.name===e):this.sliceMap.has(e.id)}}let S5e=class{constructor(e,r,i){this.#t=[],this.#r=()=>{this.#t.forEach(o=>o(this.#e))},this.set=o=>{this.#e=o,this.#r()},this.get=()=>this.#e,this.update=o=>{this.#e=o(this.#e),this.#r()},this.type=i,this.#e=r,e.set(i.id,this)}#t;#e;#r;on(e){return this.#t.push(e),()=>{this.#t=this.#t.filter(r=>r!==e)}}once(e){const r=this.on(i=>{e(i),r()});return r}off(e){this.#t=this.#t.filter(r=>r!==e)}offAll(){this.#t=[]}};class C5e{constructor(e,r){this.id=Symbol(`Context-${r}`),this.name=r,this._defaultValue=e,this._typeInfo=()=>{throw f3()}}create(e,r=this._defaultValue){return new S5e(e,r,this)}}const rn=(n,e)=>new C5e(n,e);class _5e{constructor(e,r,i){this.#n=new Set,this.#a=new Set,this.#i=new Map,this.#o=new Map,this.read=()=>({metadata:this.#t,injectedSlices:[...this.#n].map(o=>({name:typeof o=="string"?o:o.name,value:this.#s(o)})),consumedSlices:[...this.#a].map(o=>({name:typeof o=="string"?o:o.name,value:this.#s(o)})),recordedTimers:[...this.#i].map(([o,{duration:s}])=>({name:o.name,duration:s,status:this.#l(o)})),waitTimers:[...this.#o].map(([o,{duration:s}])=>({name:o.name,duration:s,status:this.#l(o)}))}),this.onRecord=o=>{this.#i.set(o,{start:Date.now(),duration:0})},this.onClear=o=>{this.#i.delete(o)},this.onDone=o=>{const s=this.#i.get(o);s&&(s.duration=Date.now()-s.start)},this.onWait=(o,s)=>{const a=Date.now();s.finally(()=>{this.#o.set(o,{duration:Date.now()-a})}).catch(console.error)},this.onInject=o=>{this.#n.add(o)},this.onRemove=o=>{this.#n.delete(o)},this.onUse=o=>{this.#a.add(o)},this.#s=o=>this.#e.get(o).get(),this.#l=o=>this.#r.get(o).status,this.#e=e,this.#r=r,this.#t=i}#t;#e;#r;#n;#a;#i;#o;#s;#l}class Oj{constructor(e,r,i){this.produce=o=>o&&Object.keys(o).length?new Oj(this.#t,this.#e,{...o}):this,this.inject=(o,s)=>{const a=o.create(this.#t.sliceMap);return s!=null&&a.set(s),this.#n?.onInject(o),this},this.remove=o=>(this.#t.remove(o),this.#n?.onRemove(o),this),this.record=o=>(o.create(this.#e.store),this.#n?.onRecord(o),this),this.clearTimer=o=>(this.#e.remove(o),this.#n?.onClear(o),this),this.isInjected=o=>this.#t.has(o),this.isRecorded=o=>this.#e.has(o),this.use=o=>(this.#n?.onUse(o),this.#t.get(o)),this.get=o=>this.use(o).get(),this.set=(o,s)=>this.use(o).set(s),this.update=(o,s)=>this.use(o).update(s),this.timer=o=>this.#e.get(o),this.done=o=>{this.timer(o).done(),this.#n?.onDone(o)},this.wait=o=>{const s=this.timer(o).start();return this.#n?.onWait(o,s),s},this.waitTimers=async o=>{await Promise.all(this.get(o).map(s=>this.wait(s)))},this.#t=e,this.#e=r,this.#r=i,i&&(this.#n=new _5e(e,r,i))}#t;#e;#r;#n;get meta(){return this.#r}get inspector(){return this.#n}}class A5e{constructor(){this.store=new Map,this.get=e=>{const r=this.store.get(e.id);if(!r)throw g5e(e.name);return r},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}let T5e=class{constructor(e,r){this.#t=null,this.#e=null,this.#n="pending",this.start=()=>(this.#t??=new Promise((i,o)=>{this.#e=s=>{s instanceof CustomEvent&&s.detail.id===this.#r&&(this.#n="resolved",this.#a(),s.stopImmediatePropagation(),i())},this.#i(()=>{this.#n==="pending"&&(this.#n="rejected"),this.#a(),o(new Error(`Timing ${this.type.name} timeout.`))}),this.#n="pending",addEventListener(this.type.name,this.#e)}),this.#t),this.done=()=>{const i=new CustomEvent(this.type.name,{detail:{id:this.#r}});dispatchEvent(i)},this.#a=()=>{this.#e&&removeEventListener(this.type.name,this.#e)},this.#i=i=>{setTimeout(()=>{i()},this.type.timeout)},this.#r=Symbol(r.name),this.type=r,e.set(r.id,this)}#t;#e;#r;#n;get status(){return this.#n}#a;#i};class P5e{constructor(e,r=3e3){this.create=i=>new T5e(i,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=r}}const Fc=(n,e=3e3)=>new P5e(n,e);function Ti(n){this.content=n}Ti.prototype={constructor:Ti,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,r){var i=r&&r!=n?this.remove(r):this,o=i.find(n),s=i.content.slice();return o==-1?s.push(r||n,e):(s[o+1]=e,r&&(s[o]=r)),new Ti(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Ti(r)},addToStart:function(n,e){return new Ti([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var r=this.remove(n).content.slice();return r.push(n,e),new Ti(r)},addBefore:function(n,e,r){var i=this.remove(e),o=i.content.slice(),s=i.find(n);return o.splice(s==-1?o.length:s,0,e,r),new Ti(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ti.from(n),n.size?new Ti(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ti.from(n),n.size?new Ti(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ti.from(n);for(var r=0;r<n.content.length;r+=2)e=e.remove(n.content[r]);return e},toObject:function(){var n={};return this.forEach(function(e,r){n[e]=r}),n},get size(){return this.content.length>>1}};Ti.from=function(n){if(n instanceof Ti)return n;var e=[];if(n)for(var r in n)e.push(r,n[r]);return new Ti(e)};function wee(n,e,r){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:r;let o=n.child(i),s=e.child(i);if(o==s){r+=o.nodeSize;continue}if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(let a=0;o.text[a]==s.text[a];a++)r++;return r}if(o.content.size||s.content.size){let a=wee(o.content,s.content,r+1);if(a!=null)return a}r+=o.nodeSize}}function kee(n,e,r,i){for(let o=n.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:r,b:i};let a=n.child(--o),l=e.child(--s),c=a.nodeSize;if(a==l){r-=c,i-=c;continue}if(!a.sameMarkup(l))return{a:r,b:i};if(a.isText&&a.text!=l.text){let u=0,d=Math.min(a.text.length,l.text.length);for(;u<d&&a.text[a.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,i--;return{a:r,b:i}}if(a.content.size||l.content.size){let u=kee(a.content,l.content,r-1,i-1);if(u)return u}r-=c,i-=c}}let Ue=class mo{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,r,i,o=0,s){for(let a=0,l=0;l<r;a++){let c=this.content[a],u=l+c.nodeSize;if(u>e&&i(c,o+l,s||null,a)!==!1&&c.content.size){let d=l+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,r-d),i,o+d)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,i,o){let s="",a=!0;return this.nodesBetween(e,r,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,r-c):l.isLeaf?o?typeof o=="function"?o(l):o:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&i&&(a?a=!1:s+=i),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,i=e.firstChild,o=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(i)&&(o[o.length-1]=r.withText(r.text+i.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new mo(o,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let i=[],o=0;if(r>e)for(let s=0,a=0;a<r;s++){let l=this.content[s],c=a+l.nodeSize;c>e&&((a<e||c>r)&&(l.isText?l=l.cut(Math.max(0,e-a),Math.min(l.text.length,r-a)):l=l.cut(Math.max(0,e-a-1),Math.min(l.content.size,r-a-1))),i.push(l),o+=l.nodeSize),a=c}return new mo(i,o)}cutByIndex(e,r){return e==r?mo.empty:e==0&&r==this.content.length?this:new mo(this.content.slice(e,r))}replaceChild(e,r){let i=this.content[e];if(i==r)return this;let o=this.content.slice(),s=this.size+r.nodeSize-i.nodeSize;return o[e]=r,new mo(o,s)}addToStart(e){return new mo([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new mo(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,i=0;r<this.content.length;r++){let o=this.content[r];e(o,i,r),i+=o.nodeSize}}findDiffStart(e,r=0){return wee(this,e,r)}findDiffEnd(e,r=this.size,i=e.size){return kee(this,e,r,i)}findIndex(e){if(e==0)return U2(0,e);if(e==this.size)return U2(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e?U2(r+1,s):U2(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return mo.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new mo(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return mo.empty;let r,i=0;for(let o=0;o<e.length;o++){let s=e[o];i+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(r||(r=e.slice(0,o)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new mo(r||e,i)}static from(e){if(!e)return mo.empty;if(e instanceof mo)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new mo([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ue.empty=new Ue([],0);const N_={index:0,offset:0};function U2(n,e){return N_.index=n,N_.offset=e,N_}function HS(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(n);if(Array.isArray(e)!=r)return!1;if(r){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!HS(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!HS(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}class Yt{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,i=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!i&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,o)),r.push(this),i=!0),r&&r.push(s)}}return r||(r=e.slice()),i||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&HS(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[r.type];if(!i)throw new RangeError(`There is no mark type ${r.type} in this schema`);let o=i.create(r.attrs);return i.checkAttrs(o.attrs),o}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(r[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Yt.none;if(e instanceof Yt)return[e];let r=e.slice();return r.sort((i,o)=>i.type.rank-o.type.rank),r}}Yt.none=[];class qS extends Error{}class Qe{constructor(e,r,i){this.content=e,this.openStart=r,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let i=Cee(this.content,e+this.openStart,r);return i&&new Qe(i,this.openStart,this.openEnd)}removeBetween(e,r){return new Qe(See(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return Qe.empty;let i=r.openStart||0,o=r.openEnd||0;if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Qe(Ue.fromJSON(e,r.content),i,o)}static maxOpen(e,r=!0){let i=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)o++;return new Qe(e,i,o)}}Qe.empty=new Qe(Ue.empty,0,0);function See(n,e,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i),{index:a,offset:l}=n.findIndex(r);if(o==e||s.isText){if(l!=r&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(r))}if(i!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(See(s.content,e-o-1,r-o-1)))}function Cee(n,e,r,i){let{index:o,offset:s}=n.findIndex(e),a=n.maybeChild(o);if(s==e||a.isText)return i&&!i.canReplace(o,o,r)?null:n.cut(0,e).append(r).append(n.cut(e));let l=Cee(a.content,e-s-1,r,a);return l&&n.replaceChild(o,a.copy(l))}function M5e(n,e,r){if(r.openStart>n.depth)throw new qS("Inserted content deeper than insertion position");if(n.depth-r.openStart!=e.depth-r.openEnd)throw new qS("Inconsistent open depths");return _ee(n,e,r,0)}function _ee(n,e,r,i){let o=n.index(i),s=n.node(i);if(o==e.index(i)&&i<n.depth-r.openStart){let a=_ee(n,e,r,i+1);return s.copy(s.content.replaceChild(o,a))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&n.depth==i&&e.depth==i){let a=n.parent,l=a.content;return Ap(a,l.cut(0,n.parentOffset).append(r.content).append(l.cut(e.parentOffset)))}else{let{start:a,end:l}=E5e(r,n);return Ap(s,Tee(n,a,l,e,i))}else return Ap(s,VS(n,e,i))}function Aee(n,e){if(!e.type.compatibleContent(n.type))throw new qS("Cannot join "+e.type.name+" onto "+n.type.name)}function M9(n,e,r){let i=n.node(r);return Aee(i,e.node(r)),i}function _p(n,e){let r=e.length-1;r>=0&&n.isText&&n.sameMarkup(e[r])?e[r]=n.withText(e[r].text+n.text):e.push(n)}function Ev(n,e,r,i){let o=(e||n).node(r),s=0,a=e?e.index(r):o.childCount;n&&(s=n.index(r),n.depth>r?s++:n.textOffset&&(_p(n.nodeAfter,i),s++));for(let l=s;l<a;l++)_p(o.child(l),i);e&&e.depth==r&&e.textOffset&&_p(e.nodeBefore,i)}function Ap(n,e){return n.type.checkContent(e),n.copy(e)}function Tee(n,e,r,i,o){let s=n.depth>o&&M9(n,e,o+1),a=i.depth>o&&M9(r,i,o+1),l=[];return Ev(null,n,o,l),s&&a&&e.index(o)==r.index(o)?(Aee(s,a),_p(Ap(s,Tee(n,e,r,i,o+1)),l)):(s&&_p(Ap(s,VS(n,e,o+1)),l),Ev(e,r,o,l),a&&_p(Ap(a,VS(r,i,o+1)),l)),Ev(i,null,o,l),new Ue(l)}function VS(n,e,r){let i=[];if(Ev(null,n,r,i),n.depth>r){let o=M9(n,e,r+1);_p(Ap(o,VS(n,e,r+1)),i)}return Ev(e,null,r,i),new Ue(i)}function E5e(n,e){let r=e.depth-n.openStart,o=e.node(r).copy(n.content);for(let s=r-1;s>=0;s--)o=e.node(s).copy(Ue.from(o));return{start:o.resolveNoCache(n.openStart+r),end:o.resolveNoCache(o.content.size-n.openEnd-r)}}class bx{constructor(e,r,i){this.pos=e,this.path=r,this.parentOffset=i,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],o=e.child(r);return i?e.child(r).cut(i):o}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let i=this.path[r*3],o=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)o+=i.child(s).nodeSize;return o}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Yt.none;if(this.textOffset)return e.child(r).marks;let i=e.maybeChild(r-1),o=e.maybeChild(r);if(!i){let l=i;i=o,o=l}let s=i.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let i=r.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!r||r(this.node(i))))return new Pee(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let i=[],o=0,s=r;for(let a=e;;){let{index:l,offset:c}=a.content.findIndex(s),u=s-c;if(i.push(a,l,o+c),!u||(a=a.child(l),a.isText))break;s=u-1,o+=c+1}return new bx(r,i,s)}static resolveCached(e,r){let i=HB.get(e);if(i)for(let s=0;s<i.elts.length;s++){let a=i.elts[s];if(a.pos==r)return a}else HB.set(e,i=new N5e);let o=i.elts[i.i]=bx.resolve(e,r);return i.i=(i.i+1)%j5e,o}}class N5e{constructor(){this.elts=[],this.i=0}}const j5e=12,HB=new WeakMap;class Pee{constructor(e,r,i){this.$from=e,this.$to=r,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const O5e=Object.create(null);let $u=class E9{constructor(e,r,i,o=Yt.none){this.type=e,this.attrs=r,this.marks=o,this.content=i||Ue.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,i,o=0){this.content.nodesBetween(e,r,i,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,i,o){return this.content.textBetween(e,r,i,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,i){return this.type==e&&HS(this.attrs,r||e.defaultAttrs||O5e)&&Yt.sameSet(this.marks,i||Yt.none)}copy(e=null){return e==this.content?this:new E9(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new E9(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,i=!1){if(e==r)return Qe.empty;let o=this.resolve(e),s=this.resolve(r),a=i?0:o.sharedDepth(r),l=o.start(a),u=o.node(a).content.cut(o.pos-l,s.pos-l);return new Qe(u,o.depth-a,s.depth-a)}replace(e,r,i){return M5e(this.resolve(e),this.resolve(r),i)}nodeAt(e){for(let r=this;;){let{index:i,offset:o}=r.content.findIndex(e);if(r=r.maybeChild(i),!r)return null;if(o==e||r.isText)return r;e-=o+1}}childAfter(e){let{index:r,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(r),index:r,offset:i};let o=this.content.child(r-1);return{node:o,index:r-1,offset:i-o.nodeSize}}resolve(e){return bx.resolveCached(this,e)}resolveNoCache(e){return bx.resolve(this,e)}rangeHasMark(e,r,i){let o=!1;return r>e&&this.nodesBetween(e,r,s=>(i.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Mee(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,i=Ue.empty,o=0,s=i.childCount){let a=this.contentMatchAt(e).matchFragment(i,o,s),l=a&&a.matchFragment(this.content,r);if(!l||!l.validEnd)return!1;for(let c=o;c<s;c++)if(!this.type.allowsMarks(i.child(c).marks))return!1;return!0}canReplaceWith(e,r,i,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(i),a=s&&s.matchFragment(this.content,r);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Yt.none;for(let r=0;r<this.marks.length;r++){let i=this.marks[r];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!Yt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let i;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,i)}let o=Ue.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,o,i);return s.type.checkAttrs(s.attrs),s}};$u.prototype.text=void 0;let D5e=class N9 extends $u{constructor(e,r,i,o){if(super(e,r,null,o),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Mee(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new N9(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new N9(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Mee(n,e){for(let r=n.length-1;r>=0;r--)e=n[r].type.name+"("+e+")";return e}class Kp{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let i=new I5e(e,r);if(i.next==null)return Kp.empty;let o=Eee(i);i.next&&i.err("Unexpected trailing text");let s=H5e(B5e(o));return q5e(s,i),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,i=e.childCount){let o=this;for(let s=r;o&&s<i;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let i=0;i<e.next.length;i++)if(this.next[r].type==e.next[i].type)return!0;return!1}fillBefore(e,r=!1,i=0){let o=[this];function s(a,l){let c=a.matchFragment(e,i);if(c&&(!r||c.validEnd))return Ue.from(l.map(u=>u.createAndFill()));for(let u=0;u<a.next.length;u++){let{type:d,next:h}=a.next[u];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(h)==-1){o.push(h);let f=s(h,l.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let o=i.shift(),s=o.match;if(s.matchType(e)){let a=[];for(let l=o;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in r)&&(!o.type||c.validEnd)&&(i.push({match:l.contentMatch,type:l,via:o}),r[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(i){e.push(i);for(let o=0;o<i.next.length;o++)e.indexOf(i.next[o].next)==-1&&r(i.next[o].next)}return r(this),e.map((i,o)=>{let s=o+(i.validEnd?"*":" ")+" ";for(let a=0;a<i.next.length;a++)s+=(a?", ":"")+i.next[a].type.name+"->"+e.indexOf(i.next[a].next);return s}).join(`
`)}}Kp.empty=new Kp(!0);class I5e{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Eee(n){let e=[];do e.push(R5e(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function R5e(n){let e=[];do e.push(L5e(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function L5e(n){let e=$5e(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=z5e(n,e);else break;return e}function qB(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function z5e(n,e){let r=qB(n),i=r;return n.eat(",")&&(n.next!="}"?i=qB(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:r,max:i,expr:e}}function F5e(n,e){let r=n.nodeTypes,i=r[e];if(i)return[i];let o=[];for(let s in r){let a=r[s];a.isInGroup(e)&&o.push(a)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function $5e(n){if(n.eat("(")){let e=Eee(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=F5e(n,n.next).map(r=>(n.inline==null?n.inline=r.isInline:n.inline!=r.isInline&&n.err("Mixing inline and block content"),{type:"name",value:r}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function B5e(n){let e=[[]];return o(s(n,0),r()),e;function r(){return e.push([])-1}function i(a,l,c){let u={term:c,to:l};return e[a].push(u),u}function o(a,l){a.forEach(c=>c.to=l)}function s(a,l){if(a.type=="choice")return a.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(a.type=="seq")for(let c=0;;c++){let u=s(a.exprs[c],l);if(c==a.exprs.length-1)return u;o(u,l=r())}else if(a.type=="star"){let c=r();return i(l,c),o(s(a.expr,c),c),[i(c)]}else if(a.type=="plus"){let c=r();return o(s(a.expr,l),c),o(s(a.expr,c),c),[i(c)]}else{if(a.type=="opt")return[i(l)].concat(s(a.expr,l));if(a.type=="range"){let c=l;for(let u=0;u<a.min;u++){let d=r();o(s(a.expr,c),d),c=d}if(a.max==-1)o(s(a.expr,c),c);else for(let u=a.min;u<a.max;u++){let d=r();i(c,d),o(s(a.expr,c),d),c=d}return[i(c)]}else{if(a.type=="name")return[i(l,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Nee(n,e){return e-n}function VB(n,e){let r=[];return i(e),r.sort(Nee);function i(o){let s=n[o];if(s.length==1&&!s[0].term)return i(s[0].to);r.push(o);for(let a=0;a<s.length;a++){let{term:l,to:c}=s[a];!l&&r.indexOf(c)==-1&&i(c)}}}function H5e(n){let e=Object.create(null);return r(VB(n,0));function r(i){let o=[];i.forEach(a=>{n[a].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let d=0;d<o.length;d++)o[d][0]==l&&(u=o[d][1]);VB(n,c).forEach(d=>{u||o.push([l,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[i.join(",")]=new Kp(i.indexOf(n.length-1)>-1);for(let a=0;a<o.length;a++){let l=o[a][1].sort(Nee);s.next.push({type:o[a][0],next:e[l.join(",")]||r(l)})}return s}}function q5e(n,e){for(let r=0,i=[n];r<i.length;r++){let o=i[r],s=!o.validEnd,a=[];for(let l=0;l<o.next.length;l++){let{type:c,next:u}=o.next[l];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),i.indexOf(u)==-1&&i.push(u)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jee(n){let e=Object.create(null);for(let r in n){let i=n[r];if(!i.hasDefault)return null;e[r]=i.default}return e}function Oee(n,e){let r=Object.create(null);for(let i in n){let o=e&&e[i];if(o===void 0){let s=n[i];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+i)}r[i]=o}return r}function Dee(n,e,r,i){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${r} of type ${o}`);for(let o in n){let s=n[o];s.validate&&s.validate(e[o])}}function Iee(n,e){let r=Object.create(null);if(e)for(let i in e)r[i]=new W5e(n,i,e[i]);return r}let WS=class Ree{constructor(e,r,i){this.name=e,this.schema=r,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=Iee(e,i.attrs),this.defaultAttrs=jee(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Kp.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Oee(this.attrs,e)}create(e=null,r,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $u(this,this.computeAttrs(e),Ue.from(r),Yt.setFrom(i))}createChecked(e=null,r,i){return r=Ue.from(r),this.checkContent(r),new $u(this,this.computeAttrs(e),r,Yt.setFrom(i))}createAndFill(e=null,r,i){if(e=this.computeAttrs(e),r=Ue.from(r),r.size){let a=this.contentMatch.fillBefore(r);if(!a)return null;r=a.append(r)}let o=this.contentMatch.matchFragment(r),s=o&&o.fillBefore(Ue.empty,!0);return s?new $u(this,e,r.append(s),Yt.setFrom(i)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Dee(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?r&&r.push(e[i]):r||(r=e.slice(0,i));return r?r.length?r:Yt.none:e}static compile(e,r){let i=Object.create(null);e.forEach((s,a)=>i[s]=new Ree(s,r,a));let o=r.spec.topNode||"doc";if(!i[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function V5e(n,e,r){let i=r.split("|");return o=>{let s=o===null?"null":typeof o;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${s}`)}}class W5e{constructor(e,r,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?V5e(e,r,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class p3{constructor(e,r,i,o){this.name=e,this.rank=r,this.schema=i,this.spec=o,this.attrs=Iee(e,o.attrs),this.excluded=null;let s=jee(this.attrs);this.instance=s?new Yt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Yt(this,Oee(this.attrs,e))}static compile(e,r){let i=Object.create(null),o=0;return e.forEach((s,a)=>i[s]=new p3(s,o++,r,a)),i}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){Dee(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Lee{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let o in e)r[o]=e[o];r.nodes=Ti.from(e.nodes),r.marks=Ti.from(e.marks||{}),this.nodes=WS.compile(this.spec.nodes,this),this.marks=p3.compile(this.spec.marks,this);let i=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],a=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=i[a]||(i[a]=Kp.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?WB(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:WB(this,a.split(" "))}this.nodeFromJSON=o=>$u.fromJSON(this,o),this.markFromJSON=o=>Yt.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,i,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof WS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,i,o)}text(e,r){let i=this.nodes.text;return new D5e(i,i.defaultAttrs,e,Yt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function WB(n,e){let r=[];for(let i=0;i<e.length;i++){let o=e[i],s=n.marks[o],a=s;if(s)r.push(s);else for(let l in n.marks){let c=n.marks[l];(o=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&r.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return r}function U5e(n){return n.tag!=null}function K5e(n){return n.style!=null}class Gp{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let i=this.matchedStyles=[];r.forEach(o=>{if(U5e(o))this.tags.push(o);else if(K5e(o)){let s=/[^=]*/.exec(o.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let i=new KB(this,r,!1);return i.addAll(e,Yt.none,r.from,r.to),i.finish()}parseSlice(e,r={}){let i=new KB(this,r,!0);return i.addAll(e,Yt.none,r.from,r.to),Qe.maxOpen(i.finish())}matchTag(e,r,i){for(let o=i?this.tags.indexOf(i)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(Z5e(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,r,i,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let a=this.styles[s],l=a.style;if(!(l.indexOf(e)!=0||a.context&&!i.matchesContext(a.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=r))){if(a.getAttrs){let c=a.getAttrs(r);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let r=[];function i(o){let s=o.priority==null?50:o.priority,a=0;for(;a<r.length;a++){let l=r[a];if((l.priority==null?50:l.priority)<s)break}r.splice(a,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(a=>{i(a=GB(a)),a.mark||a.ignore||a.clearMark||(a.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(a=>{i(a=GB(a)),a.node||a.ignore||a.mark||(a.node=o)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Gp(e,Gp.schemaRules(e)))}}const zee={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},G5e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Fee={ol:!0,ul:!0},wx=1,j9=2,Nv=4;function UB(n,e,r){return e!=null?(e?wx:0)|(e==="full"?j9:0):n&&n.whitespace=="pre"?wx|j9:r&~Nv}class K2{constructor(e,r,i,o,s,a){this.type=e,this.attrs=r,this.marks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=Yt.none,this.match=s||(a&Nv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Ue.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let i=this.type.contentMatch,o;return(o=i.findWrapping(e.type))?(this.match=i,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&wx)){let i=this.content[this.content.length-1],o;if(i&&i.isText&&(o=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let r=Ue.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Ue.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!zee.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}let KB=class{constructor(e,r,i){this.parser=e,this.options=r,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let o=r.topNode,s,a=UB(null,r.preserveWhitespace,0)|(i?Nv:0);o?s=new K2(o.type,o.attrs,Yt.none,!0,r.topMatch||o.type.contentMatch,a):i?s=new K2(null,null,Yt.none,!0,null,a):s=new K2(e.schema.topNodeType,null,Yt.none,!0,null,a),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let i=e.nodeValue,o=this.top,s=o.options&j9?"full":this.localPreserveWS||(o.options&wx)>0,{schema:a}=this.parser;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(s)if(s==="full")i=i.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(i)&&this.top.findWrapping(a.linebreakReplacement.create())){let l=i.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(a.linebreakReplacement.create(),r,!0),l[c]&&this.insertNode(a.text(l[c]),r,!/\S/.test(l[c]));i=""}else i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let l=o.content[o.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(i=i.slice(1))}i&&this.insertNode(a.text(i),r,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,r,i){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),l;Fee.hasOwnProperty(a)&&this.parser.normalizeLists&&Y5e(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,i));e:if(c?c.ignore:G5e.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,r);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,d=this.needsBlock;if(zee.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=c&&c.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=o}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let i=e.style;if(i&&i.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],a=i.getPropertyValue(s);if(a)for(let l=void 0;;){let c=this.parser.matchStyle(s,a,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?r=r.filter(u=>!c.clearMark(u)):r=r.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return r}addElementByRule(e,r,i,o){let s,a;if(r.node)if(a=this.parser.schema.nodes[r.node],a.isLeaf)this.insertNode(a.create(r.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let c=this.enter(a,r.attrs||null,i,r.preserveWhitespace);c&&(s=!0,i=c)}else{let c=this.parser.schema.marks[r.mark];i=i.concat(c.create(r.attrs))}let l=this.top;if(a&&a.isLeaf)this.findInside(e);else if(o)this.addElement(e,i,o);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,i,!1));else{let c=e;typeof r.contentElement=="string"?c=e.querySelector(r.contentElement):typeof r.contentElement=="function"?c=r.contentElement(e):r.contentElement&&(c=r.contentElement),this.findAround(e,c,!0),this.addAll(c,i),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,r,i,o){let s=i||0;for(let a=i?e.childNodes[i]:e.firstChild,l=o==null?null:e.childNodes[o];a!=l;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,r);this.findAtPoint(e,s)}findPlace(e,r,i){let o,s;for(let a=this.open,l=0;a>=0;a--){let c=this.nodes[a],u=c.findWrapping(e);if(u&&(!o||o.length>u.length+l)&&(o=u,s=c,!u.length))break;if(c.solid){if(i)break;l+=2}}if(!o)return null;this.sync(s);for(let a=0;a<o.length;a++)r=this.enterInner(o[a],null,r,!1);return r}insertNode(e,r,i){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let o=this.findPlace(e,r,i);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=Yt.none;for(let l of o.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):YB(l.type,e.type))&&(a=l.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,r,i,o){let s=this.findPlace(e.create(r),i,!1);return s&&(s=this.enterInner(e,r,i,!0,o)),s}enterInner(e,r,i,o=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let l=UB(e,s,a.options);a.options&Nv&&a.content.length==0&&(l|=Nv);let c=Yt.none;return i=i.filter(u=>(a.type?a.type.allowsMarkType(u.type):YB(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new K2(e,r,c,o,null,l)),this.open++,i}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=wx)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let i=this.nodes[r].content;for(let o=i.length-1;o>=0;o--)e+=i[o].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==r&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,i){if(e!=r&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&r.compareDocumentPosition(this.find[o].node)&(i?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),i=this.options.context,o=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(o?0:1),a=(l,c)=>{for(;l>=0;l--){let u=r[l];if(u==""){if(l==r.length-1||l==0)continue;for(;c>=s;c--)if(a(l-1,c))return!0;return!1}else{let d=c>0||c==0&&o?this.nodes[c].type:i&&c>=s?i.node(c-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return a(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let r in this.parser.schema.nodes){let i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}}};function Y5e(n){for(let e=n.firstChild,r=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&Fee.hasOwnProperty(i)&&r?(r.appendChild(e),e=r):i=="li"?r=e:i&&(r=null)}}function Z5e(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function GB(n){let e={};for(let r in n)e[r]=n[r];return e}function YB(n,e){let r=e.schema.nodes;for(let i in r){let o=r[i];if(!o.allowsMarkType(n))continue;let s=[],a=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:d}=l.edge(c);if(u==e||s.indexOf(d)<0&&a(d))return!0}};if(a(o.contentMatch))return!0}}class bm{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},i){i||(i=j_(r).createDocumentFragment());let o=i,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let l=0,c=0;for(;l<s.length&&c<a.marks.length;){let u=a.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)o=s.pop()[1];for(;c<a.marks.length;){let u=a.marks[c++],d=this.serializeMark(u,a.isInline,r);d&&(s.push([u,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(a,r))}),i}serializeNodeInner(e,r){let{dom:i,contentDOM:o}=g4(j_(r),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,o)}return i}serializeNode(e,r={}){let i=this.serializeNodeInner(e,r);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,r,i={}){let o=this.marks[e.type.name];return o&&g4(j_(i),o(e,r),null,e.attrs)}static renderSpec(e,r,i=null,o){return g4(e,r,i,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new bm(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=ZB(e.nodes);return r.text||(r.text=i=>i.text),r}static marksFromSchema(e){return ZB(e.marks)}}function ZB(n){let e={};for(let r in n){let i=n[r].spec.toDOM;i&&(e[r]=i)}return e}function j_(n){return n.document||window.document}const XB=new WeakMap;function X5e(n){let e=XB.get(n);return e===void 0&&XB.set(n,e=J5e(n)),e}function J5e(n){let e=null;function r(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let o=0;o<i.length;o++)r(i[o]);else for(let o in i)r(i[o])}return r(n),e}function g4(n,e,r,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=X5e(i))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=o.indexOf(" ");a>0&&(r=o.slice(0,a),o=o.slice(a+1));let l,c=r?n.createElementNS(r,o):n.createElement(o),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?c.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&c.style?c.style.cssText=u[h]:c.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:m,contentDOM:v}=g4(n,f,r,i);if(c.appendChild(m),v){if(l)throw new RangeError("Multiple content holes");l=v}}}return{dom:c,contentDOM:l}}const Q5e={};function Dj(n,e){const r=Q5e,i=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,o=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return $ee(n,i,o)}function $ee(n,e,r){if(eCe(n)){if("value"in n)return n.type==="html"&&!r?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return JB(n.children,e,r)}return Array.isArray(n)?JB(n,e,r):""}function JB(n,e,r){const i=[];let o=-1;for(;++o<n.length;)i[o]=$ee(n[o],e,r);return i.join("")}function eCe(n){return!!(n&&typeof n=="object")}const QB=document.createElement("i");function Ij(n){const e="&"+n+";";QB.innerHTML=e;const r=QB.textContent;return r.charCodeAt(r.length-1)===59&&n!=="semi"||r===e?!1:r}function Bs(n,e,r,i){const o=n.length;let s=0,a;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,r=r>0?r:0,i.length<1e4)a=Array.from(i),a.unshift(e,r),n.splice(...a);else for(r&&n.splice(e,r);s<i.length;)a=i.slice(s,s+1e4),a.unshift(e,0),n.splice(...a),s+=1e4,e+=1e4}function ha(n,e){return n.length>0?(Bs(n,n.length,0,e),n):e}const eH={}.hasOwnProperty;function Bee(n){const e={};let r=-1;for(;++r<n.length;)tCe(e,n[r]);return e}function tCe(n,e){let r;for(r in e){const o=(eH.call(n,r)?n[r]:void 0)||(n[r]={}),s=e[r];let a;if(s)for(a in s){eH.call(o,a)||(o[a]=[]);const l=s[a];nCe(o[a],Array.isArray(l)?l:l?[l]:[])}}}function nCe(n,e){let r=-1;const i=[];for(;++r<e.length;)(e[r].add==="after"?n:i).push(e[r]);Bs(n,0,0,i)}function Hee(n,e){const r=Number.parseInt(n,e);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function yl(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xo=sf(/[A-Za-z]/),is=sf(/[\dA-Za-z]/),rCe=sf(/[#-'*+\--9=?A-Z^-~]/);function US(n){return n!==null&&(n<32||n===127)}const O9=sf(/\d/),iCe=sf(/[\dA-Fa-f]/),oCe=sf(/[!-/:-@[-`{-~]/);function _t(n){return n!==null&&n<-2}function Bn(n){return n!==null&&(n<0||n===32)}function sn(n){return n===-2||n===-1||n===32}const m3=sf(new RegExp("\\p{P}|\\p{S}","u")),Yp=sf(/\s/);function sf(n){return e;function e(r){return r!==null&&r>-1&&n.test(String.fromCharCode(r))}}function tn(n,e,r,i){const o=i?i-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return sn(c)?(n.enter(r),l(c)):e(c)}function l(c){return sn(c)&&s++<o?(n.consume(c),l):(n.exit(r),e(c))}}const sCe={tokenize:aCe};function aCe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,o);let r;return e;function i(l){if(l===null){n.consume(l);return}return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),tn(n,e,"linePrefix")}function o(l){return n.enter("paragraph"),s(l)}function s(l){const c=n.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,a(l)}function a(l){if(l===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(l);return}return _t(l)?(n.consume(l),n.exit("chunkText"),s):(n.consume(l),a)}}const lCe={tokenize:cCe},tH={tokenize:uCe};function cCe(n){const e=this,r=[];let i=0,o,s,a;return l;function l(_){if(i<r.length){const P=r[i];return e.containerState=P[1],n.attempt(P[0].continuation,c,u)(_)}return u(_)}function c(_){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&S();const P=e.events.length;let A=P,T;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){T=e.events[A][1].end;break}w(i);let E=P;for(;E<e.events.length;)e.events[E][1].end={...T},E++;return Bs(e.events,A+1,0,e.events.slice(P)),e.events.length=E,u(_)}return l(_)}function u(_){if(i===r.length){if(!o)return f(_);if(o.currentConstruct&&o.currentConstruct.concrete)return v(_);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(tH,d,h)(_)}function d(_){return o&&S(),w(i),f(_)}function h(_){return e.parser.lazy[e.now().line]=i!==r.length,a=e.now().offset,v(_)}function f(_){return e.containerState={},n.attempt(tH,m,v)(_)}function m(_){return i++,r.push([e.currentConstruct,e.containerState]),f(_)}function v(_){if(_===null){o&&S(),w(0),n.consume(_);return}return o=o||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),x(_)}function x(_){if(_===null){b(n.exit("chunkFlow"),!0),w(0),n.consume(_);return}return _t(_)?(n.consume(_),b(n.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(n.consume(_),x)}function b(_,P){const A=e.sliceStream(_);if(P&&A.push(null),_.previous=s,s&&(s.next=_),s=_,o.defineSkip(_.start),o.write(A),e.parser.lazy[_.start.line]){let T=o.events.length;for(;T--;)if(o.events[T][1].start.offset<a&&(!o.events[T][1].end||o.events[T][1].end.offset>a))return;const E=e.events.length;let L=E,$,z;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if($){z=e.events[L][1].end;break}$=!0}for(w(i),T=E;T<e.events.length;)e.events[T][1].end={...z},T++;Bs(e.events,L+1,0,e.events.slice(E)),e.events.length=T}}function w(_){let P=r.length;for(;P-- >_;){const A=r[P];e.containerState=A[1],A[0].exit.call(e,n)}r.length=_}function S(){o.write([null]),s=void 0,o=void 0,e.containerState._closeFlow=void 0}}function uCe(n,e,r){return tn(n,n.attempt(this.parser.constructs.document,e,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function sg(n){if(n===null||Bn(n)||Yp(n))return 1;if(m3(n))return 2}function g3(n,e,r){const i=[];let o=-1;for(;++o<n.length;){const s=n[o].resolveAll;s&&!i.includes(s)&&(e=s(e,r),i.push(s))}return e}const D9={name:"attention",resolveAll:dCe,tokenize:hCe};function dCe(n,e){let r=-1,i,o,s,a,l,c,u,d;for(;++r<n.length;)if(n[r][0]==="enter"&&n[r][1].type==="attentionSequence"&&n[r][1]._close){for(i=r;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[r][1]).charCodeAt(0)){if((n[i][1]._close||n[r][1]._open)&&(n[r][1].end.offset-n[r][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[r][1].end.offset-n[r][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[r][1].end.offset-n[r][1].start.offset>1?2:1;const h={...n[i][1].end},f={...n[r][1].start};nH(h,-c),nH(f,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...n[i][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...n[r][1].start},end:f},s={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[r][1].start}},o={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},n[i][1].end={...a.start},n[r][1].start={...l.end},u=[],n[i][1].end.offset-n[i][1].start.offset&&(u=ha(u,[["enter",n[i][1],e],["exit",n[i][1],e]])),u=ha(u,[["enter",o,e],["enter",a,e],["exit",a,e],["enter",s,e]]),u=ha(u,g3(e.parser.constructs.insideSpan.null,n.slice(i+1,r),e)),u=ha(u,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",o,e]]),n[r][1].end.offset-n[r][1].start.offset?(d=2,u=ha(u,[["enter",n[r][1],e],["exit",n[r][1],e]])):d=0,Bs(n,i-1,r-i+3,u),r=i+u.length-d-2;break}}for(r=-1;++r<n.length;)n[r][1].type==="attentionSequence"&&(n[r][1].type="data");return n}function hCe(n,e){const r=this.parser.constructs.attentionMarkers.null,i=this.previous,o=sg(i);let s;return a;function a(c){return s=c,n.enter("attentionSequence"),l(c)}function l(c){if(c===s)return n.consume(c),l;const u=n.exit("attentionSequence"),d=sg(c),h=!d||d===2&&o||r.includes(c),f=!o||o===2&&d||r.includes(i);return u._open=!!(s===42?h:h&&(o||!f)),u._close=!!(s===42?f:f&&(d||!h)),e(c)}}function nH(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const fCe={name:"autolink",tokenize:pCe};function pCe(n,e,r){let i=0;return o;function o(m){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(m){return xo(m)?(n.consume(m),a):m===64?r(m):u(m)}function a(m){return m===43||m===45||m===46||is(m)?(i=1,l(m)):u(m)}function l(m){return m===58?(n.consume(m),i=0,c):(m===43||m===45||m===46||is(m))&&i++<32?(n.consume(m),l):(i=0,u(m))}function c(m){return m===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):m===null||m===32||m===60||US(m)?r(m):(n.consume(m),c)}function u(m){return m===64?(n.consume(m),d):rCe(m)?(n.consume(m),u):r(m)}function d(m){return is(m)?h(m):r(m)}function h(m){return m===46?(n.consume(m),i=0,d):m===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):f(m)}function f(m){if((m===45||is(m))&&i++<63){const v=m===45?f:h;return n.consume(m),v}return r(m)}}const Nb={partial:!0,tokenize:mCe};function mCe(n,e,r){return i;function i(s){return sn(s)?tn(n,o,"linePrefix")(s):o(s)}function o(s){return s===null||_t(s)?e(s):r(s)}}const qee={continuation:{tokenize:yCe},exit:vCe,name:"blockQuote",tokenize:gCe};function gCe(n,e,r){const i=this;return o;function o(a){if(a===62){const l=i.containerState;return l.open||(n.enter("blockQuote",{_container:!0}),l.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),s}return r(a)}function s(a){return sn(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(a))}}function yCe(n,e,r){const i=this;return o;function o(a){return sn(a)?tn(n,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return n.attempt(qee,e,r)(a)}}function vCe(n){n.exit("blockQuote")}const Vee={name:"characterEscape",tokenize:xCe};function xCe(n,e,r){return i;function i(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),o}function o(s){return oCe(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):r(s)}}const Wee={name:"characterReference",tokenize:bCe};function bCe(n,e,r){const i=this;let o=0,s,a;return l;function l(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),c}function c(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),s=31,a=is,d(h))}function u(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,a=iCe,d):(n.enter("characterReferenceValue"),s=7,a=O9,d(h))}function d(h){if(h===59&&o){const f=n.exit("characterReferenceValue");return a===is&&!Ij(i.sliceSerialize(f))?r(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return a(h)&&o++<s?(n.consume(h),d):r(h)}}const rH={partial:!0,tokenize:kCe},iH={concrete:!0,name:"codeFenced",tokenize:wCe};function wCe(n,e,r){const i=this,o={partial:!0,tokenize:A};let s=0,a=0,l;return c;function c(T){return u(T)}function u(T){const E=i.events[i.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,l=T,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(T)}function d(T){return T===l?(a++,n.consume(T),d):a<3?r(T):(n.exit("codeFencedFenceSequence"),sn(T)?tn(n,h,"whitespace")(T):h(T))}function h(T){return T===null||_t(T)?(n.exit("codeFencedFence"),i.interrupt?e(T):n.check(rH,x,P)(T)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(T))}function f(T){return T===null||_t(T)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(T)):sn(T)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),tn(n,m,"whitespace")(T)):T===96&&T===l?r(T):(n.consume(T),f)}function m(T){return T===null||_t(T)?h(T):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),v(T))}function v(T){return T===null||_t(T)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(T)):T===96&&T===l?r(T):(n.consume(T),v)}function x(T){return n.attempt(o,P,b)(T)}function b(T){return n.enter("lineEnding"),n.consume(T),n.exit("lineEnding"),w}function w(T){return s>0&&sn(T)?tn(n,S,"linePrefix",s+1)(T):S(T)}function S(T){return T===null||_t(T)?n.check(rH,x,P)(T):(n.enter("codeFlowValue"),_(T))}function _(T){return T===null||_t(T)?(n.exit("codeFlowValue"),S(T)):(n.consume(T),_)}function P(T){return n.exit("codeFenced"),e(T)}function A(T,E,L){let $=0;return z;function z(U){return T.enter("lineEnding"),T.consume(U),T.exit("lineEnding"),B}function B(U){return T.enter("codeFencedFence"),sn(U)?tn(T,D,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):D(U)}function D(U){return U===l?(T.enter("codeFencedFenceSequence"),Y(U)):L(U)}function Y(U){return U===l?($++,T.consume(U),Y):$>=a?(T.exit("codeFencedFenceSequence"),sn(U)?tn(T,I,"whitespace")(U):I(U)):L(U)}function I(U){return U===null||_t(U)?(T.exit("codeFencedFence"),E(U)):L(U)}}}function kCe(n,e,r){const i=this;return o;function o(a){return a===null?r(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?r(a):e(a)}}const O_={name:"codeIndented",tokenize:CCe},SCe={partial:!0,tokenize:_Ce};function CCe(n,e,r){const i=this;return o;function o(u){return n.enter("codeIndented"),tn(n,s,"linePrefix",5)(u)}function s(u){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):r(u)}function a(u){return u===null?c(u):_t(u)?n.attempt(SCe,a,c)(u):(n.enter("codeFlowValue"),l(u))}function l(u){return u===null||_t(u)?(n.exit("codeFlowValue"),a(u)):(n.consume(u),l)}function c(u){return n.exit("codeIndented"),e(u)}}function _Ce(n,e,r){const i=this;return o;function o(a){return i.parser.lazy[i.now().line]?r(a):_t(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),o):tn(n,s,"linePrefix",5)(a)}function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):_t(a)?o(a):r(a)}}const ACe={name:"codeText",previous:PCe,resolve:TCe,tokenize:MCe};function TCe(n){let e=n.length-4,r=3,i,o;if((n[r][1].type==="lineEnding"||n[r][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=r;++i<e;)if(n[i][1].type==="codeTextData"){n[r][1].type="codeTextPadding",n[e][1].type="codeTextPadding",r+=2,e-=2;break}}for(i=r-1,e++;++i<=e;)o===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(o=i):(i===e||n[i][1].type==="lineEnding")&&(n[o][1].type="codeTextData",i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),e-=i-o-2,i=o+2),o=void 0);return n}function PCe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function MCe(n,e,r){let i=0,o,s;return a;function a(h){return n.enter("codeText"),n.enter("codeTextSequence"),l(h)}function l(h){return h===96?(n.consume(h),i++,l):(n.exit("codeTextSequence"),c(h))}function c(h){return h===null?r(h):h===32?(n.enter("space"),n.consume(h),n.exit("space"),c):h===96?(s=n.enter("codeTextSequence"),o=0,d(h)):_t(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),c):(n.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||_t(h)?(n.exit("codeTextData"),c(h)):(n.consume(h),u)}function d(h){return h===96?(n.consume(h),o++,d):o===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class ECe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,r){const i=r??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,r,i){const o=r||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&ey(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ey(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ey(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const r=this.left.splice(e,Number.POSITIVE_INFINITY);ey(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ey(this.left,r.reverse())}}}function ey(n,e){let r=0;if(e.length<1e4)n.push(...e);else for(;r<e.length;)n.push(...e.slice(r,r+1e4)),r+=1e4}function Uee(n){const e={};let r=-1,i,o,s,a,l,c,u;const d=new ECe(n);for(;++r<d.length;){for(;r in e;)r=e[r];if(i=d.get(r),r&&i[1].type==="chunkFlow"&&d.get(r-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,NCe(d,r)),r=e[r],u=!0);else if(i[1]._container){for(s=r,o=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(o&&(d.get(o)[1].type="lineEndingBlank"),a[1].type="lineEnding",o=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;o&&(i[1].end={...d.get(o)[1].start},l=d.slice(o,r),l.unshift(i),d.splice(o,r-o+1,l))}}return Bs(n,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function NCe(n,e){const r=n.get(e)[1],i=n.get(e)[2];let o=e-1;const s=[];let a=r._tokenizer;a||(a=i.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let d,h,f=-1,m=r,v=0,x=0;const b=[x];for(;m;){for(;n.get(++o)[1]!==m;);s.push(o),m._tokenizer||(d=i.sliceStream(m),m.next||d.push(null),h&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=r;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(x=f+1,b.push(x),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):b.pop(),f=b.length;f--;){const w=l.slice(b[f],b[f+1]),S=s.pop();c.push([S,S+w.length-1]),n.splice(S,2,w)}for(c.reverse(),f=-1;++f<c.length;)u[v+c[f][0]]=v+c[f][1],v+=c[f][1]-c[f][0]-1;return u}const jCe={resolve:DCe,tokenize:ICe},OCe={partial:!0,tokenize:RCe};function DCe(n){return Uee(n),n}function ICe(n,e){let r;return i;function i(l){return n.enter("content"),r=n.enter("chunkContent",{contentType:"content"}),o(l)}function o(l){return l===null?s(l):_t(l)?n.check(OCe,a,s)(l):(n.consume(l),o)}function s(l){return n.exit("chunkContent"),n.exit("content"),e(l)}function a(l){return n.consume(l),n.exit("chunkContent"),r.next=n.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,o}}function RCe(n,e,r){const i=this;return o;function o(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),tn(n,s,"linePrefix")}function s(a){if(a===null||_t(a))return r(a);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):n.interrupt(i.parser.constructs.flow,r,e)(a)}}function Kee(n,e,r,i,o,s,a,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(w){return w===60?(n.enter(i),n.enter(o),n.enter(s),n.consume(w),n.exit(s),f):w===null||w===32||w===41||US(w)?r(w):(n.enter(i),n.enter(a),n.enter(l),n.enter("chunkString",{contentType:"string"}),x(w))}function f(w){return w===62?(n.enter(s),n.consume(w),n.exit(s),n.exit(o),n.exit(i),e):(n.enter(l),n.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===62?(n.exit("chunkString"),n.exit(l),f(w)):w===null||w===60||_t(w)?r(w):(n.consume(w),w===92?v:m)}function v(w){return w===60||w===62||w===92?(n.consume(w),m):m(w)}function x(w){return!d&&(w===null||w===41||Bn(w))?(n.exit("chunkString"),n.exit(l),n.exit(a),n.exit(i),e(w)):d<u&&w===40?(n.consume(w),d++,x):w===41?(n.consume(w),d--,x):w===null||w===32||w===40||US(w)?r(w):(n.consume(w),w===92?b:x)}function b(w){return w===40||w===41||w===92?(n.consume(w),x):x(w)}}function Gee(n,e,r,i,o,s){const a=this;let l=0,c;return u;function u(m){return n.enter(i),n.enter(o),n.consume(m),n.exit(o),n.enter(s),d}function d(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?r(m):m===93?(n.exit(s),n.enter(o),n.consume(m),n.exit(o),n.exit(i),e):_t(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||_t(m)||l++>999?(n.exit("chunkString"),d(m)):(n.consume(m),c||(c=!sn(m)),m===92?f:h)}function f(m){return m===91||m===92||m===93?(n.consume(m),l++,h):h(m)}}function Yee(n,e,r,i,o,s){let a;return l;function l(f){return f===34||f===39||f===40?(n.enter(i),n.enter(o),n.consume(f),n.exit(o),a=f===40?41:f,c):r(f)}function c(f){return f===a?(n.enter(o),n.consume(f),n.exit(o),n.exit(i),e):(n.enter(s),u(f))}function u(f){return f===a?(n.exit(s),c(a)):f===null?r(f):_t(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),tn(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===a||f===null||_t(f)?(n.exit("chunkString"),u(f)):(n.consume(f),f===92?h:d)}function h(f){return f===a||f===92?(n.consume(f),d):d(f)}}function jv(n,e){let r;return i;function i(o){return _t(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),r=!0,i):sn(o)?tn(n,i,r?"linePrefix":"lineSuffix")(o):e(o)}}const LCe={name:"definition",tokenize:FCe},zCe={partial:!0,tokenize:$Ce};function FCe(n,e,r){const i=this;let o;return s;function s(m){return n.enter("definition"),a(m)}function a(m){return Gee.call(i,n,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return o=yl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),m===58?(n.enter("definitionMarker"),n.consume(m),n.exit("definitionMarker"),c):r(m)}function c(m){return Bn(m)?jv(n,u)(m):u(m)}function u(m){return Kee(n,d,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return n.attempt(zCe,h,h)(m)}function h(m){return sn(m)?tn(n,f,"whitespace")(m):f(m)}function f(m){return m===null||_t(m)?(n.exit("definition"),i.parser.defined.push(o),e(m)):r(m)}}function $Ce(n,e,r){return i;function i(l){return Bn(l)?jv(n,o)(l):r(l)}function o(l){return Yee(n,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return sn(l)?tn(n,a,"whitespace")(l):a(l)}function a(l){return l===null||_t(l)?e(l):r(l)}}const BCe={name:"hardBreakEscape",tokenize:HCe};function HCe(n,e,r){return i;function i(s){return n.enter("hardBreakEscape"),n.consume(s),o}function o(s){return _t(s)?(n.exit("hardBreakEscape"),e(s)):r(s)}}const qCe={name:"headingAtx",resolve:VCe,tokenize:WCe};function VCe(n,e){let r=n.length-2,i=3,o,s;return n[i][1].type==="whitespace"&&(i+=2),r-2>i&&n[r][1].type==="whitespace"&&(r-=2),n[r][1].type==="atxHeadingSequence"&&(i===r-1||r-4>i&&n[r-2][1].type==="whitespace")&&(r-=i+1===r?2:4),r>i&&(o={type:"atxHeadingText",start:n[i][1].start,end:n[r][1].end},s={type:"chunkText",start:n[i][1].start,end:n[r][1].end,contentType:"text"},Bs(n,i,r-i+1,[["enter",o,e],["enter",s,e],["exit",s,e],["exit",o,e]])),n}function WCe(n,e,r){let i=0;return o;function o(d){return n.enter("atxHeading"),s(d)}function s(d){return n.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&i++<6?(n.consume(d),a):d===null||Bn(d)?(n.exit("atxHeadingSequence"),l(d)):r(d)}function l(d){return d===35?(n.enter("atxHeadingSequence"),c(d)):d===null||_t(d)?(n.exit("atxHeading"),e(d)):sn(d)?tn(n,l,"whitespace")(d):(n.enter("atxHeadingText"),u(d))}function c(d){return d===35?(n.consume(d),c):(n.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Bn(d)?(n.exit("atxHeadingText"),l(d)):(n.consume(d),u)}}const UCe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],oH=["pre","script","style","textarea"],KCe={concrete:!0,name:"htmlFlow",resolveTo:ZCe,tokenize:XCe},GCe={partial:!0,tokenize:QCe},YCe={partial:!0,tokenize:JCe};function ZCe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function XCe(n,e,r){const i=this;let o,s,a,l,c;return u;function u(V){return d(V)}function d(V){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(V),h}function h(V){return V===33?(n.consume(V),f):V===47?(n.consume(V),s=!0,x):V===63?(n.consume(V),o=3,i.interrupt?e:q):xo(V)?(n.consume(V),a=String.fromCharCode(V),b):r(V)}function f(V){return V===45?(n.consume(V),o=2,m):V===91?(n.consume(V),o=5,l=0,v):xo(V)?(n.consume(V),o=4,i.interrupt?e:q):r(V)}function m(V){return V===45?(n.consume(V),i.interrupt?e:q):r(V)}function v(V){const ve="CDATA[";return V===ve.charCodeAt(l++)?(n.consume(V),l===ve.length?i.interrupt?e:D:v):r(V)}function x(V){return xo(V)?(n.consume(V),a=String.fromCharCode(V),b):r(V)}function b(V){if(V===null||V===47||V===62||Bn(V)){const ve=V===47,ke=a.toLowerCase();return!ve&&!s&&oH.includes(ke)?(o=1,i.interrupt?e(V):D(V)):UCe.includes(a.toLowerCase())?(o=6,ve?(n.consume(V),w):i.interrupt?e(V):D(V)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?r(V):s?S(V):_(V))}return V===45||is(V)?(n.consume(V),a+=String.fromCharCode(V),b):r(V)}function w(V){return V===62?(n.consume(V),i.interrupt?e:D):r(V)}function S(V){return sn(V)?(n.consume(V),S):z(V)}function _(V){return V===47?(n.consume(V),z):V===58||V===95||xo(V)?(n.consume(V),P):sn(V)?(n.consume(V),_):z(V)}function P(V){return V===45||V===46||V===58||V===95||is(V)?(n.consume(V),P):A(V)}function A(V){return V===61?(n.consume(V),T):sn(V)?(n.consume(V),A):_(V)}function T(V){return V===null||V===60||V===61||V===62||V===96?r(V):V===34||V===39?(n.consume(V),c=V,E):sn(V)?(n.consume(V),T):L(V)}function E(V){return V===c?(n.consume(V),c=null,$):V===null||_t(V)?r(V):(n.consume(V),E)}function L(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Bn(V)?A(V):(n.consume(V),L)}function $(V){return V===47||V===62||sn(V)?_(V):r(V)}function z(V){return V===62?(n.consume(V),B):r(V)}function B(V){return V===null||_t(V)?D(V):sn(V)?(n.consume(V),B):r(V)}function D(V){return V===45&&o===2?(n.consume(V),Z):V===60&&o===1?(n.consume(V),te):V===62&&o===4?(n.consume(V),G):V===63&&o===3?(n.consume(V),q):V===93&&o===5?(n.consume(V),oe):_t(V)&&(o===6||o===7)?(n.exit("htmlFlowData"),n.check(GCe,re,Y)(V)):V===null||_t(V)?(n.exit("htmlFlowData"),Y(V)):(n.consume(V),D)}function Y(V){return n.check(YCe,I,re)(V)}function I(V){return n.enter("lineEnding"),n.consume(V),n.exit("lineEnding"),U}function U(V){return V===null||_t(V)?Y(V):(n.enter("htmlFlowData"),D(V))}function Z(V){return V===45?(n.consume(V),q):D(V)}function te(V){return V===47?(n.consume(V),a="",J):D(V)}function J(V){if(V===62){const ve=a.toLowerCase();return oH.includes(ve)?(n.consume(V),G):D(V)}return xo(V)&&a.length<8?(n.consume(V),a+=String.fromCharCode(V),J):D(V)}function oe(V){return V===93?(n.consume(V),q):D(V)}function q(V){return V===62?(n.consume(V),G):V===45&&o===2?(n.consume(V),q):D(V)}function G(V){return V===null||_t(V)?(n.exit("htmlFlowData"),re(V)):(n.consume(V),G)}function re(V){return n.exit("htmlFlow"),e(V)}}function JCe(n,e,r){const i=this;return o;function o(a){return _t(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s):r(a)}function s(a){return i.parser.lazy[i.now().line]?r(a):e(a)}}function QCe(n,e,r){return i;function i(o){return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),n.attempt(Nb,e,r)}}const e3e={name:"htmlText",tokenize:t3e};function t3e(n,e,r){const i=this;let o,s,a;return l;function l(q){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(q),c}function c(q){return q===33?(n.consume(q),u):q===47?(n.consume(q),A):q===63?(n.consume(q),_):xo(q)?(n.consume(q),L):r(q)}function u(q){return q===45?(n.consume(q),d):q===91?(n.consume(q),s=0,v):xo(q)?(n.consume(q),S):r(q)}function d(q){return q===45?(n.consume(q),m):r(q)}function h(q){return q===null?r(q):q===45?(n.consume(q),f):_t(q)?(a=h,te(q)):(n.consume(q),h)}function f(q){return q===45?(n.consume(q),m):h(q)}function m(q){return q===62?Z(q):q===45?f(q):h(q)}function v(q){const G="CDATA[";return q===G.charCodeAt(s++)?(n.consume(q),s===G.length?x:v):r(q)}function x(q){return q===null?r(q):q===93?(n.consume(q),b):_t(q)?(a=x,te(q)):(n.consume(q),x)}function b(q){return q===93?(n.consume(q),w):x(q)}function w(q){return q===62?Z(q):q===93?(n.consume(q),w):x(q)}function S(q){return q===null||q===62?Z(q):_t(q)?(a=S,te(q)):(n.consume(q),S)}function _(q){return q===null?r(q):q===63?(n.consume(q),P):_t(q)?(a=_,te(q)):(n.consume(q),_)}function P(q){return q===62?Z(q):_(q)}function A(q){return xo(q)?(n.consume(q),T):r(q)}function T(q){return q===45||is(q)?(n.consume(q),T):E(q)}function E(q){return _t(q)?(a=E,te(q)):sn(q)?(n.consume(q),E):Z(q)}function L(q){return q===45||is(q)?(n.consume(q),L):q===47||q===62||Bn(q)?$(q):r(q)}function $(q){return q===47?(n.consume(q),Z):q===58||q===95||xo(q)?(n.consume(q),z):_t(q)?(a=$,te(q)):sn(q)?(n.consume(q),$):Z(q)}function z(q){return q===45||q===46||q===58||q===95||is(q)?(n.consume(q),z):B(q)}function B(q){return q===61?(n.consume(q),D):_t(q)?(a=B,te(q)):sn(q)?(n.consume(q),B):$(q)}function D(q){return q===null||q===60||q===61||q===62||q===96?r(q):q===34||q===39?(n.consume(q),o=q,Y):_t(q)?(a=D,te(q)):sn(q)?(n.consume(q),D):(n.consume(q),I)}function Y(q){return q===o?(n.consume(q),o=void 0,U):q===null?r(q):_t(q)?(a=Y,te(q)):(n.consume(q),Y)}function I(q){return q===null||q===34||q===39||q===60||q===61||q===96?r(q):q===47||q===62||Bn(q)?$(q):(n.consume(q),I)}function U(q){return q===47||q===62||Bn(q)?$(q):r(q)}function Z(q){return q===62?(n.consume(q),n.exit("htmlTextData"),n.exit("htmlText"),e):r(q)}function te(q){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(q),n.exit("lineEnding"),J}function J(q){return sn(q)?tn(n,oe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):oe(q)}function oe(q){return n.enter("htmlTextData"),a(q)}}const Rj={name:"labelEnd",resolveAll:o3e,resolveTo:s3e,tokenize:a3e},n3e={tokenize:l3e},r3e={tokenize:c3e},i3e={tokenize:u3e};function o3e(n){let e=-1;const r=[];for(;++e<n.length;){const i=n[e][1];if(r.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",e+=o}}return n.length!==r.length&&Bs(n,0,n.length,r),n}function s3e(n,e){let r=n.length,i=0,o,s,a,l;for(;r--;)if(o=n[r][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;n[r][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(a){if(n[r][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=r,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(a=r);const c={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[s][1].start},end:{...n[a][1].end}},d={type:"labelText",start:{...n[s+i+2][1].end},end:{...n[a-2][1].start}};return l=[["enter",c,e],["enter",u,e]],l=ha(l,n.slice(s+1,s+i+3)),l=ha(l,[["enter",d,e]]),l=ha(l,g3(e.parser.constructs.insideSpan.null,n.slice(s+i+4,a-3),e)),l=ha(l,[["exit",d,e],n[a-2],n[a-1],["exit",u,e]]),l=ha(l,n.slice(a+1)),l=ha(l,[["exit",c,e]]),Bs(n,s,n.length,l),n}function a3e(n,e,r){const i=this;let o=i.events.length,s,a;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){s=i.events[o][1];break}return l;function l(f){return s?s._inactive?h(f):(a=i.parser.defined.includes(yl(i.sliceSerialize({start:s.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(f),n.exit("labelMarker"),n.exit("labelEnd"),c):r(f)}function c(f){return f===40?n.attempt(n3e,d,a?d:h)(f):f===91?n.attempt(r3e,d,a?u:h)(f):a?d(f):h(f)}function u(f){return n.attempt(i3e,d,h)(f)}function d(f){return e(f)}function h(f){return s._balanced=!0,r(f)}}function l3e(n,e,r){return i;function i(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),o}function o(h){return Bn(h)?jv(n,s)(h):s(h)}function s(h){return h===41?d(h):Kee(n,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return Bn(h)?jv(n,c)(h):d(h)}function l(h){return r(h)}function c(h){return h===34||h===39||h===40?Yee(n,u,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Bn(h)?jv(n,d)(h):d(h)}function d(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),e):r(h)}}function c3e(n,e,r){const i=this;return o;function o(l){return Gee.call(i,n,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(yl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):r(l)}function a(l){return r(l)}}function u3e(n,e,r){return i;function i(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),o}function o(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):r(s)}}const d3e={name:"labelStartImage",resolveAll:Rj.resolveAll,tokenize:h3e};function h3e(n,e,r){const i=this;return o;function o(l){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(l),n.exit("labelImageMarker"),s}function s(l){return l===91?(n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelImage"),a):r(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?r(l):e(l)}}const f3e={name:"labelStartLink",resolveAll:Rj.resolveAll,tokenize:p3e};function p3e(n,e,r){const i=this;return o;function o(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?r(a):e(a)}}const D_={name:"lineEnding",tokenize:m3e};function m3e(n,e){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),tn(n,e,"linePrefix")}}const y4={name:"thematicBreak",tokenize:g3e};function g3e(n,e,r){let i=0,o;return s;function s(u){return n.enter("thematicBreak"),a(u)}function a(u){return o=u,l(u)}function l(u){return u===o?(n.enter("thematicBreakSequence"),c(u)):i>=3&&(u===null||_t(u))?(n.exit("thematicBreak"),e(u)):r(u)}function c(u){return u===o?(n.consume(u),i++,c):(n.exit("thematicBreakSequence"),sn(u)?tn(n,l,"whitespace")(u):l(u))}}const Xo={continuation:{tokenize:b3e},exit:k3e,name:"list",tokenize:x3e},y3e={partial:!0,tokenize:S3e},v3e={partial:!0,tokenize:w3e};function x3e(n,e,r){const i=this,o=i.events[i.events.length-1];let s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,a=0;return l;function l(m){const v=i.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!i.containerState.marker||m===i.containerState.marker:O9(m)){if(i.containerState.type||(i.containerState.type=v,n.enter(v,{_container:!0})),v==="listUnordered")return n.enter("listItemPrefix"),m===42||m===45?n.check(y4,r,u)(m):u(m);if(!i.interrupt||m===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(m)}return r(m)}function c(m){return O9(m)&&++a<10?(n.consume(m),c):(!i.interrupt||a<2)&&(i.containerState.marker?m===i.containerState.marker:m===41||m===46)?(n.exit("listItemValue"),u(m)):r(m)}function u(m){return n.enter("listItemMarker"),n.consume(m),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||m,n.check(Nb,i.interrupt?r:d,n.attempt(y3e,f,h))}function d(m){return i.containerState.initialBlankLine=!0,s++,f(m)}function h(m){return sn(m)?(n.enter("listItemPrefixWhitespace"),n.consume(m),n.exit("listItemPrefixWhitespace"),f):r(m)}function f(m){return i.containerState.size=s+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(m)}}function b3e(n,e,r){const i=this;return i.containerState._closeFlow=void 0,n.check(Nb,o,s);function o(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,tn(n,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!sn(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(v3e,e,a)(l))}function a(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,tn(n,n.attempt(Xo,e,r),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function w3e(n,e,r){const i=this;return tn(n,o,"listItemIndent",i.containerState.size+1);function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?e(s):r(s)}}function k3e(n){n.exit(this.containerState.type)}function S3e(n,e,r){const i=this;return tn(n,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){const a=i.events[i.events.length-1];return!sn(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):r(s)}}const sH={name:"setextUnderline",resolveTo:C3e,tokenize:_3e};function C3e(n,e){let r=n.length,i,o,s;for(;r--;)if(n[r][0]==="enter"){if(n[r][1].type==="content"){i=r;break}n[r][1].type==="paragraph"&&(o=r)}else n[r][1].type==="content"&&n.splice(r,1),!s&&n[r][1].type==="definition"&&(s=r);const a={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[o][1].type="setextHeadingText",s?(n.splice(o,0,["enter",a,e]),n.splice(s+1,0,["exit",n[i][1],e]),n[i][1].end={...n[s][1].end}):n[i][1]=a,n.push(["exit",a,e]),n}function _3e(n,e,r){const i=this;let o;return s;function s(u){let d=i.events.length,h;for(;d--;)if(i.events[d][1].type!=="lineEnding"&&i.events[d][1].type!=="linePrefix"&&i.events[d][1].type!=="content"){h=i.events[d][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||h)?(n.enter("setextHeadingLine"),o=u,a(u)):r(u)}function a(u){return n.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===o?(n.consume(u),l):(n.exit("setextHeadingLineSequence"),sn(u)?tn(n,c,"lineSuffix")(u):c(u))}function c(u){return u===null||_t(u)?(n.exit("setextHeadingLine"),e(u)):r(u)}}const A3e={tokenize:T3e};function T3e(n){const e=this,r=n.attempt(Nb,i,n.attempt(this.parser.constructs.flowInitial,o,tn(n,n.attempt(this.parser.constructs.flow,o,n.attempt(jCe,o)),"linePrefix")));return r;function i(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,r}function o(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,r}}const P3e={resolveAll:Xee()},M3e=Zee("string"),E3e=Zee("text");function Zee(n){return{resolveAll:Xee(n==="text"?N3e:void 0),tokenize:e};function e(r){const i=this,o=this.parser.constructs[n],s=r.attempt(o,a,l);return a;function a(d){return u(d)?s(d):l(d)}function l(d){if(d===null){r.consume(d);return}return r.enter("data"),r.consume(d),c}function c(d){return u(d)?(r.exit("data"),s(d)):(r.consume(d),c)}function u(d){if(d===null)return!0;const h=o[d];let f=-1;if(h)for(;++f<h.length;){const m=h[f];if(!m.previous||m.previous.call(i,i.previous))return!0}return!1}}}function Xee(n){return e;function e(r,i){let o=-1,s;for(;++o<=r.length;)s===void 0?r[o]&&r[o][1].type==="data"&&(s=o,o++):(!r[o]||r[o][1].type!=="data")&&(o!==s+2&&(r[s][1].end=r[o-1][1].end,r.splice(s+2,o-s-2),o=s+2),s=void 0);return n?n(r,i):r}}function N3e(n,e){let r=0;for(;++r<=n.length;)if((r===n.length||n[r][1].type==="lineEnding")&&n[r-1][1].type==="data"){const i=n[r-1][1],o=e.sliceStream(i);let s=o.length,a=-1,l=0,c;for(;s--;){const u=o[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&r===n.length&&(l=0),l){const u={type:r===n.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:i.start._bufferIndex+a,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(n.splice(r,0,["enter",u,e],["exit",u,e]),r+=2)}r++}return n}const j3e={42:Xo,43:Xo,45:Xo,48:Xo,49:Xo,50:Xo,51:Xo,52:Xo,53:Xo,54:Xo,55:Xo,56:Xo,57:Xo,62:qee},O3e={91:LCe},D3e={[-2]:O_,[-1]:O_,32:O_},I3e={35:qCe,42:y4,45:[sH,y4],60:KCe,61:sH,95:y4,96:iH,126:iH},R3e={38:Wee,92:Vee},L3e={[-5]:D_,[-4]:D_,[-3]:D_,33:d3e,38:Wee,42:D9,60:[fCe,e3e],91:f3e,92:[BCe,Vee],93:Rj,95:D9,96:ACe},z3e={null:[D9,P3e]},F3e={null:[42,95]},$3e={null:[]},B3e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:F3e,contentInitial:O3e,disable:$3e,document:j3e,flow:I3e,flowInitial:D3e,insideSpan:z3e,string:R3e,text:L3e},Symbol.toStringTag,{value:"Module"}));function H3e(n,e,r){let i={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const o={},s=[];let a=[],l=[];const c={attempt:E(A),check:E(T),consume:S,enter:_,exit:P,interrupt:E(T,{interrupt:!0})},u={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:n,previous:null,sliceSerialize:f,sliceStream:m,write:h};let d=e.tokenize.call(u,c);return e.resolveAll&&s.push(e),u;function h(B){return a=ha(a,B),b(),a[a.length-1]!==null?[]:(L(e,0),u.events=g3(s,u.events,u),u.events)}function f(B,D){return V3e(m(B),D)}function m(B){return q3e(a,B)}function v(){const{_bufferIndex:B,_index:D,line:Y,column:I,offset:U}=i;return{_bufferIndex:B,_index:D,line:Y,column:I,offset:U}}function x(B){o[B.line]=B.column,z()}function b(){let B;for(;i._index<a.length;){const D=a[i._index];if(typeof D=="string")for(B=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===B&&i._bufferIndex<D.length;)w(D.charCodeAt(i._bufferIndex));else w(D)}}function w(B){d=d(B)}function S(B){_t(B)?(i.line++,i.column=1,i.offset+=B===-3?2:1,z()):B!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=B}function _(B,D){const Y=D||{};return Y.type=B,Y.start=v(),u.events.push(["enter",Y,u]),l.push(Y),Y}function P(B){const D=l.pop();return D.end=v(),u.events.push(["exit",D,u]),D}function A(B,D){L(B,D.from)}function T(B,D){D.restore()}function E(B,D){return Y;function Y(I,U,Z){let te,J,oe,q;return Array.isArray(I)?re(I):"tokenize"in I?re([I]):G(I);function G(pe){return me;function me(Me){const le=Me!==null&&pe[Me],ze=Me!==null&&pe.null,nt=[...Array.isArray(le)?le:le?[le]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return re(nt)(Me)}}function re(pe){return te=pe,J=0,pe.length===0?Z:V(pe[J])}function V(pe){return me;function me(Me){return q=$(),oe=pe,pe.partial||(u.currentConstruct=pe),pe.name&&u.parser.constructs.disable.null.includes(pe.name)?ke():pe.tokenize.call(D?Object.assign(Object.create(u),D):u,c,ve,ke)(Me)}}function ve(pe){return B(oe,q),U}function ke(pe){return q.restore(),++J<te.length?V(te[J]):Z}}}function L(B,D){B.resolveAll&&!s.includes(B)&&s.push(B),B.resolve&&Bs(u.events,D,u.events.length-D,B.resolve(u.events.slice(D),u)),B.resolveTo&&(u.events=B.resolveTo(u.events,u))}function $(){const B=v(),D=u.previous,Y=u.currentConstruct,I=u.events.length,U=Array.from(l);return{from:I,restore:Z};function Z(){i=B,u.previous=D,u.currentConstruct=Y,u.events.length=I,l=U,z()}}function z(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function q3e(n,e){const r=e.start._index,i=e.start._bufferIndex,o=e.end._index,s=e.end._bufferIndex;let a;if(r===o)a=[n[r].slice(i,s)];else{if(a=n.slice(r,o),i>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(i):a.shift()}s>0&&a.push(n[o].slice(0,s))}return a}function V3e(n,e){let r=-1;const i=[];let o;for(;++r<n.length;){const s=n[r];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&o)continue;a=" ";break}default:a=String.fromCharCode(s)}o=s===-2,i.push(a)}return i.join("")}function W3e(n){const i={constructs:Bee([B3e,...(n||{}).extensions||[]]),content:o(sCe),defined:[],document:o(lCe),flow:o(A3e),lazy:{},string:o(M3e),text:o(E3e)};return i;function o(s){return a;function a(l){return H3e(i,s,l)}}}function U3e(n){for(;!Uee(n););return n}const aH=/[\0\t\n\r]/g;function K3e(){let n=1,e="",r=!0,i;return o;function o(s,a,l){const c=[];let u,d,h,f,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),h=0,e="",r&&(s.charCodeAt(0)===65279&&h++,r=void 0);h<s.length;){if(aH.lastIndex=h,u=aH.exec(s),f=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(f),!u){e=s.slice(h);break}if(m===10&&h===f&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),h<f&&(c.push(s.slice(h,f)),n+=f-h),m){case 0:{c.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,c.push(-2);n++<d;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}h=f+1}return l&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const G3e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Jee(n){return n.replace(G3e,Y3e)}function Y3e(n,e,r){if(e)return e;if(r.charCodeAt(0)===35){const o=r.charCodeAt(1),s=o===120||o===88;return Hee(r.slice(s?2:1),s?16:10)}return Ij(r)||n}function Ov(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?lH(n.position):"start"in n||"end"in n?lH(n):"line"in n||"column"in n?I9(n):""}function I9(n){return cH(n&&n.line)+":"+cH(n&&n.column)}function lH(n){return I9(n&&n.start)+"-"+I9(n&&n.end)}function cH(n){return n&&typeof n=="number"?n:1}const Qee={}.hasOwnProperty;function Z3e(n,e,r){return typeof e!="string"&&(r=e,e=void 0),X3e(r)(U3e(W3e(r).document().write(K3e()(n,e,!0))))}function X3e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ie),autolinkProtocol:$,autolinkEmail:$,atxHeading:s(de),blockQuote:s(ze),characterEscape:$,characterReference:$,codeFenced:s(nt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(nt,a),codeText:s(F,a),codeTextData:$,data:$,codeFlowValue:$,definition:s(X),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(ie),hardBreakEscape:s(fe),hardBreakTrailing:s(fe),htmlFlow:s(be,a),htmlFlowData:$,htmlText:s(be,a),htmlTextData:$,image:s(Pe),label:a,link:s(Ie),listItem:s(Ne),listItemValue:f,listOrdered:s(Le,h),listUnordered:s(Le),paragraph:s(at),reference:V,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(de),strong:s(Ze),thematicBreak:s(bt)},exit:{atxHeading:c(),atxHeadingSequence:A,autolink:c(),autolinkEmail:le,autolinkProtocol:Me,blockQuote:c(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:ke,characterReferenceMarkerNumeric:ke,characterReferenceValue:pe,characterReference:me,codeFenced:c(b),codeFencedFence:x,codeFencedFenceInfo:m,codeFencedFenceMeta:v,codeFlowValue:z,codeIndented:c(w),codeText:c(U),codeTextData:z,data:z,definition:c(),definitionDestinationString:P,definitionLabelString:S,definitionTitleString:_,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c(Y),htmlFlowData:z,htmlText:c(I),htmlTextData:z,image:c(te),label:oe,labelText:J,lineEnding:B,link:c(Z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ve,resourceDestinationString:q,resourceTitleString:G,resource:re,setextHeading:c(L),setextHeadingLineSequence:E,setextHeadingText:T,strong:c(),thematicBreak:c()}};ete(e,(n||{}).mdastExtensions||[]);const r={};return i;function i(ge){let Ee={type:"root",children:[]};const Xe={stack:[Ee],tokenStack:[],config:e,enter:l,exit:u,buffer:a,resume:d,data:r},Ct=[];let Mt=-1;for(;++Mt<ge.length;)if(ge[Mt][1].type==="listOrdered"||ge[Mt][1].type==="listUnordered")if(ge[Mt][0]==="enter")Ct.push(Mt);else{const an=Ct.pop();Mt=o(ge,an,Mt)}for(Mt=-1;++Mt<ge.length;){const an=e[ge[Mt][0]];Qee.call(an,ge[Mt][1].type)&&an[ge[Mt][1].type].call(Object.assign({sliceSerialize:ge[Mt][2].sliceSerialize},Xe),ge[Mt][1])}if(Xe.tokenStack.length>0){const an=Xe.tokenStack[Xe.tokenStack.length-1];(an[1]||uH).call(Xe,void 0,an[0])}for(Ee.position={start:th(ge.length>0?ge[0][1].start:{line:1,column:1,offset:0}),end:th(ge.length>0?ge[ge.length-2][1].end:{line:1,column:1,offset:0})},Mt=-1;++Mt<e.transforms.length;)Ee=e.transforms[Mt](Ee)||Ee;return Ee}function o(ge,Ee,Xe){let Ct=Ee-1,Mt=-1,an=!1,Vn,Wn,Yr,dn;for(;++Ct<=Xe;){const Xt=ge[Ct];switch(Xt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xt[0]==="enter"?Mt++:Mt--,dn=void 0;break}case"lineEndingBlank":{Xt[0]==="enter"&&(Vn&&!dn&&!Mt&&!Yr&&(Yr=Ct),dn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dn=void 0}if(!Mt&&Xt[0]==="enter"&&Xt[1].type==="listItemPrefix"||Mt===-1&&Xt[0]==="exit"&&(Xt[1].type==="listUnordered"||Xt[1].type==="listOrdered")){if(Vn){let Rr=Ct;for(Wn=void 0;Rr--;){const yr=ge[Rr];if(yr[1].type==="lineEnding"||yr[1].type==="lineEndingBlank"){if(yr[0]==="exit")continue;Wn&&(ge[Wn][1].type="lineEndingBlank",an=!0),yr[1].type="lineEnding",Wn=Rr}else if(!(yr[1].type==="linePrefix"||yr[1].type==="blockQuotePrefix"||yr[1].type==="blockQuotePrefixWhitespace"||yr[1].type==="blockQuoteMarker"||yr[1].type==="listItemIndent"))break}Yr&&(!Wn||Yr<Wn)&&(Vn._spread=!0),Vn.end=Object.assign({},Wn?ge[Wn][1].start:Xt[1].end),ge.splice(Wn||Ct,0,["exit",Vn,Xt[2]]),Ct++,Xe++}if(Xt[1].type==="listItemPrefix"){const Rr={type:"listItem",_spread:!1,start:Object.assign({},Xt[1].start),end:void 0};Vn=Rr,ge.splice(Ct,0,["enter",Rr,Xt[2]]),Ct++,Xe++,Yr=void 0,dn=!0}}}return ge[Ee][1]._spread=an,Xe}function s(ge,Ee){return Xe;function Xe(Ct){l.call(this,ge(Ct),Ct),Ee&&Ee.call(this,Ct)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(ge,Ee,Xe){this.stack[this.stack.length-1].children.push(ge),this.stack.push(ge),this.tokenStack.push([Ee,Xe||void 0]),ge.position={start:th(Ee.start),end:void 0}}function c(ge){return Ee;function Ee(Xe){ge&&ge.call(this,Xe),u.call(this,Xe)}}function u(ge,Ee){const Xe=this.stack.pop(),Ct=this.tokenStack.pop();if(Ct)Ct[0].type!==ge.type&&(Ee?Ee.call(this,ge,Ct[0]):(Ct[1]||uH).call(this,ge,Ct[0]));else throw new Error("Cannot close `"+ge.type+"` ("+Ov({start:ge.start,end:ge.end})+"): its not open");Xe.position.end=th(ge.end)}function d(){return Dj(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(ge){if(this.data.expectingFirstListItemValue){const Ee=this.stack[this.stack.length-2];Ee.start=Number.parseInt(this.sliceSerialize(ge),10),this.data.expectingFirstListItemValue=void 0}}function m(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.lang=ge}function v(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.meta=ge}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=ge.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=ge.replace(/(\r?\n|\r)$/g,"")}function S(ge){const Ee=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=Ee,Xe.identifier=yl(this.sliceSerialize(ge)).toLowerCase()}function _(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.title=ge}function P(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.url=ge}function A(ge){const Ee=this.stack[this.stack.length-1];if(!Ee.depth){const Xe=this.sliceSerialize(ge).length;Ee.depth=Xe}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function E(ge){const Ee=this.stack[this.stack.length-1];Ee.depth=this.sliceSerialize(ge).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function $(ge){const Xe=this.stack[this.stack.length-1].children;let Ct=Xe[Xe.length-1];(!Ct||Ct.type!=="text")&&(Ct=ct(),Ct.position={start:th(ge.start),end:void 0},Xe.push(Ct)),this.stack.push(Ct)}function z(ge){const Ee=this.stack.pop();Ee.value+=this.sliceSerialize(ge),Ee.position.end=th(ge.end)}function B(ge){const Ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Xe=Ee.children[Ee.children.length-1];Xe.position.end=th(ge.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ee.type)&&($.call(this,ge),z.call(this,ge))}function D(){this.data.atHardBreak=!0}function Y(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=ge}function I(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=ge}function U(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=ge}function Z(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Ee=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Ee,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function te(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Ee=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Ee,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function J(ge){const Ee=this.sliceSerialize(ge),Xe=this.stack[this.stack.length-2];Xe.label=Jee(Ee),Xe.identifier=yl(Ee).toLowerCase()}function oe(){const ge=this.stack[this.stack.length-1],Ee=this.resume(),Xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Xe.type==="link"){const Ct=ge.children;Xe.children=Ct}else Xe.alt=Ee}function q(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.url=ge}function G(){const ge=this.resume(),Ee=this.stack[this.stack.length-1];Ee.title=ge}function re(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function ve(ge){const Ee=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=Ee,Xe.identifier=yl(this.sliceSerialize(ge)).toLowerCase(),this.data.referenceType="full"}function ke(ge){this.data.characterReferenceType=ge.type}function pe(ge){const Ee=this.sliceSerialize(ge),Xe=this.data.characterReferenceType;let Ct;Xe?(Ct=Hee(Ee,Xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ct=Ij(Ee);const Mt=this.stack[this.stack.length-1];Mt.value+=Ct}function me(ge){const Ee=this.stack.pop();Ee.position.end=th(ge.end)}function Me(ge){z.call(this,ge);const Ee=this.stack[this.stack.length-1];Ee.url=this.sliceSerialize(ge)}function le(ge){z.call(this,ge);const Ee=this.stack[this.stack.length-1];Ee.url="mailto:"+this.sliceSerialize(ge)}function ze(){return{type:"blockquote",children:[]}}function nt(){return{type:"code",lang:null,meta:null,value:""}}function F(){return{type:"inlineCode",value:""}}function X(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ie(){return{type:"emphasis",children:[]}}function de(){return{type:"heading",depth:0,children:[]}}function fe(){return{type:"break"}}function be(){return{type:"html",value:""}}function Pe(){return{type:"image",title:null,url:"",alt:null}}function Ie(){return{type:"link",title:null,url:"",children:[]}}function Le(ge){return{type:"list",ordered:ge.type==="listOrdered",start:null,spread:ge._spread,children:[]}}function Ne(ge){return{type:"listItem",spread:ge._spread,checked:null,children:[]}}function at(){return{type:"paragraph",children:[]}}function Ze(){return{type:"strong",children:[]}}function ct(){return{type:"text",value:""}}function bt(){return{type:"thematicBreak"}}}function th(n){return{line:n.line,column:n.column,offset:n.offset}}function ete(n,e){let r=-1;for(;++r<e.length;){const i=e[r];Array.isArray(i)?ete(n,i):J3e(n,i)}}function J3e(n,e){let r;for(r in e)if(Qee.call(e,r))switch(r){case"canContainEols":{const i=e[r];i&&n[r].push(...i);break}case"transforms":{const i=e[r];i&&n[r].push(...i);break}case"enter":case"exit":{const i=e[r];i&&Object.assign(n[r],i);break}}}function uH(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Ov({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Ov({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ov({start:e.start,end:e.end})+") is still open")}function R9(n){const e=this;e.parser=r;function r(i){return Z3e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const dH={}.hasOwnProperty;function Q3e(n,e){const r=e||{};function i(o,...s){let a=i.invalid;const l=i.handlers;if(o&&dH.call(o,n)){const c=String(o[n]);a=dH.call(l,c)?l[c]:i.unknown}if(a)return a.call(this,o,...s)}return i.handlers=r.handlers||{},i.invalid=r.invalid,i.unknown=r.unknown,i}const e6e={}.hasOwnProperty;function tte(n,e){let r=-1,i;if(e.extensions)for(;++r<e.extensions.length;)tte(n,e.extensions[r]);for(i in e)if(e6e.call(e,i))switch(i){case"extensions":break;case"unsafe":{hH(n[i],e[i]);break}case"join":{hH(n[i],e[i]);break}case"handlers":{t6e(n[i],e[i]);break}default:n.options[i]=e[i]}return n}function hH(n,e){e&&n.push(...e)}function t6e(n,e){e&&Object.assign(n,e)}function n6e(n,e,r,i){const o=r.enter("blockquote"),s=r.createTracker(i);s.move("> "),s.shift(2);const a=r.indentLines(r.containerFlow(n,s.current()),r6e);return o(),a}function r6e(n,e,r){return">"+(r?"":" ")+n}function nte(n,e){return fH(n,e.inConstruct,!0)&&!fH(n,e.notInConstruct,!1)}function fH(n,e,r){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return r;let i=-1;for(;++i<e.length;)if(n.includes(e[i]))return!0;return!1}function pH(n,e,r,i){let o=-1;for(;++o<r.unsafe.length;)if(r.unsafe[o].character===`
`&&nte(r.stack,r.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function rte(n,e){const r=String(n);let i=r.indexOf(e),o=i,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++s>a&&(a=s):s=1,o=i+e.length,i=r.indexOf(e,o);return a}function L9(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function i6e(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function o6e(n,e,r,i){const o=i6e(r),s=n.value||"",a=o==="`"?"GraveAccent":"Tilde";if(L9(n,r)){const h=r.enter("codeIndented"),f=r.indentLines(s,s6e);return h(),f}const l=r.createTracker(i),c=o.repeat(Math.max(rte(s,o)+1,3)),u=r.enter("codeFenced");let d=l.move(c);if(n.lang){const h=r.enter(`codeFencedLang${a}`);d+=l.move(r.safe(n.lang,{before:d,after:" ",encode:["`"],...l.current()})),h()}if(n.lang&&n.meta){const h=r.enter(`codeFencedMeta${a}`);d+=l.move(" "),d+=l.move(r.safe(n.meta,{before:d,after:`
`,encode:["`"],...l.current()})),h()}return d+=l.move(`
`),s&&(d+=l.move(s+`
`)),d+=l.move(c),u(),d}function s6e(n,e,r){return(r?"":"    ")+n}function Lj(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function a6e(n,e,r,i){const o=Lj(r),s=o==='"'?"Quote":"Apostrophe",a=r.enter("definition");let l=r.enter("label");const c=r.createTracker(i);let u=c.move("[");return u+=c.move(r.safe(r.associationId(n),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!n.url||/[\0- \u007F]/.test(n.url)?(l=r.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(r.safe(n.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=r.enter("destinationRaw"),u+=c.move(r.safe(n.url,{before:u,after:n.title?" ":`
`,...c.current()}))),l(),n.title&&(l=r.enter(`title${s}`),u+=c.move(" "+o),u+=c.move(r.safe(n.title,{before:u,after:o,...c.current()})),u+=c.move(o),l()),a(),u}function l6e(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Vh(n){return"&#x"+n.toString(16).toUpperCase()+";"}function KS(n,e,r){const i=sg(n),o=sg(e);return i===void 0?o===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ite.peek=c6e;function ite(n,e,r,i){const o=l6e(r),s=r.enter("emphasis"),a=r.createTracker(i),l=a.move(o);let c=a.move(r.containerPhrasing(n,{after:o,before:l,...a.current()}));const u=c.charCodeAt(0),d=KS(i.before.charCodeAt(i.before.length-1),u,o);d.inside&&(c=Vh(u)+c.slice(1));const h=c.charCodeAt(c.length-1),f=KS(i.after.charCodeAt(0),h,o);f.inside&&(c=c.slice(0,-1)+Vh(h));const m=a.move(o);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},l+c+m}function c6e(n,e,r){return r.options.emphasis||"*"}const y3=(function(n){if(n==null)return f6e;if(typeof n=="function")return v3(n);if(typeof n=="object")return Array.isArray(n)?u6e(n):d6e(n);if(typeof n=="string")return h6e(n);throw new Error("Expected function, string, or object as test")});function u6e(n){const e=[];let r=-1;for(;++r<n.length;)e[r]=y3(n[r]);return v3(i);function i(...o){let s=-1;for(;++s<e.length;)if(e[s].apply(this,o))return!0;return!1}}function d6e(n){const e=n;return v3(r);function r(i){const o=i;let s;for(s in n)if(o[s]!==e[s])return!1;return!0}}function h6e(n){return v3(e);function e(r){return r&&r.type===n}}function v3(n){return e;function e(r,i,o){return!!(p6e(r)&&n.call(this,r,typeof i=="number"?i:void 0,o||void 0))}}function f6e(){return!0}function p6e(n){return n!==null&&typeof n=="object"&&"type"in n}const ote=[],m6e=!0,z9=!1,F9="skip";function zj(n,e,r,i){let o;typeof e=="function"&&typeof r!="function"?(i=r,r=e):o=e;const s=y3(o),a=i?-1:1;l(n,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return f;function f(){let m=ote,v,x,b;if((!e||s(c,u,d[d.length-1]||void 0))&&(m=g6e(r(c,d)),m[0]===z9))return m;if("children"in c&&c.children){const w=c;if(w.children&&m[0]!==F9)for(x=(i?w.children.length:-1)+a,b=d.concat(w);x>-1&&x<w.children.length;){const S=w.children[x];if(v=l(S,x,b)(),v[0]===z9)return v;x=typeof v[1]=="number"?v[1]:x+a}}return m}}}function g6e(n){return Array.isArray(n)?n:typeof n=="number"?[m6e,n]:n==null?ote:[n]}function af(n,e,r,i){let o,s,a;typeof e=="function"&&typeof r!="function"?(s=void 0,a=e,o=r):(s=e,a=r,o=i),zj(n,s,l,o);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return a(c,h,d)}}function ste(n,e){let r=!1;return af(n,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return r=!0,z9}),!!((!n.depth||n.depth<3)&&Dj(n)&&(e.options.setext||r))}function y6e(n,e,r,i){const o=Math.max(Math.min(6,n.depth||1),1),s=r.createTracker(i);if(ste(n,r)){const d=r.enter("headingSetext"),h=r.enter("phrasing"),f=r.containerPhrasing(n,{...s.current(),before:`
`,after:`
`});return h(),d(),f+`
`+(o===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const a="#".repeat(o),l=r.enter("headingAtx"),c=r.enter("phrasing");s.move(a+" ");let u=r.containerPhrasing(n,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Vh(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,r.options.closeAtx&&(u+=" "+a),c(),l(),u}ate.peek=v6e;function ate(n){return n.value||""}function v6e(){return"<"}lte.peek=x6e;function lte(n,e,r,i){const o=Lj(r),s=o==='"'?"Quote":"Apostrophe",a=r.enter("image");let l=r.enter("label");const c=r.createTracker(i);let u=c.move("![");return u+=c.move(r.safe(n.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(l=r.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(r.safe(n.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=r.enter("destinationRaw"),u+=c.move(r.safe(n.url,{before:u,after:n.title?" ":")",...c.current()}))),l(),n.title&&(l=r.enter(`title${s}`),u+=c.move(" "+o),u+=c.move(r.safe(n.title,{before:u,after:o,...c.current()})),u+=c.move(o),l()),u+=c.move(")"),a(),u}function x6e(){return"!"}cte.peek=b6e;function cte(n,e,r,i){const o=n.referenceType,s=r.enter("imageReference");let a=r.enter("label");const l=r.createTracker(i);let c=l.move("![");const u=r.safe(n.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const d=r.stack;r.stack=[],a=r.enter("reference");const h=r.safe(r.associationId(n),{before:c,after:"]",...l.current()});return a(),r.stack=d,s(),o==="full"||!u||u!==h?c+=l.move(h+"]"):o==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function b6e(){return"!"}ute.peek=w6e;function ute(n,e,r){let i=n.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<r.unsafe.length;){const a=r.unsafe[s],l=r.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(i);){let u=c.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(c.index+1)}}return o+i+o}function w6e(){return"`"}function dte(n,e){const r=Dj(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(r===n.url||"mailto:"+r===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}hte.peek=k6e;function hte(n,e,r,i){const o=Lj(r),s=o==='"'?"Quote":"Apostrophe",a=r.createTracker(i);let l,c;if(dte(n,r)){const d=r.stack;r.stack=[],l=r.enter("autolink");let h=a.move("<");return h+=a.move(r.containerPhrasing(n,{before:h,after:">",...a.current()})),h+=a.move(">"),l(),r.stack=d,h}l=r.enter("link"),c=r.enter("label");let u=a.move("[");return u+=a.move(r.containerPhrasing(n,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(c=r.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(r.safe(n.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=r.enter("destinationRaw"),u+=a.move(r.safe(n.url,{before:u,after:n.title?" ":")",...a.current()}))),c(),n.title&&(c=r.enter(`title${s}`),u+=a.move(" "+o),u+=a.move(r.safe(n.title,{before:u,after:o,...a.current()})),u+=a.move(o),c()),u+=a.move(")"),l(),u}function k6e(n,e,r){return dte(n,r)?"<":"["}fte.peek=S6e;function fte(n,e,r,i){const o=n.referenceType,s=r.enter("linkReference");let a=r.enter("label");const l=r.createTracker(i);let c=l.move("[");const u=r.containerPhrasing(n,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const d=r.stack;r.stack=[],a=r.enter("reference");const h=r.safe(r.associationId(n),{before:c,after:"]",...l.current()});return a(),r.stack=d,s(),o==="full"||!u||u!==h?c+=l.move(h+"]"):o==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function S6e(){return"["}function Fj(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function C6e(n){const e=Fj(n),r=n.options.bulletOther;if(!r)return e==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+r+"`) to be different");return r}function _6e(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function pte(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function A6e(n,e,r,i){const o=r.enter("list"),s=r.bulletCurrent;let a=n.ordered?_6e(r):Fj(r);const l=n.ordered?a==="."?")":".":C6e(r);let c=e&&r.bulletLastUsed?a===r.bulletLastUsed:!1;if(!n.ordered){const d=n.children?n.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(c=!0),pte(r)===a&&d){let h=-1;for(;++h<n.children.length;){const f=n.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),r.bulletCurrent=a;const u=r.containerFlow(n,i);return r.bulletLastUsed=a,r.bulletCurrent=s,o(),u}function T6e(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function P6e(n,e,r,i){const o=T6e(r);let s=r.bulletCurrent||Fj(r);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(r.options.incrementListMarker===!1?0:e.children.indexOf(n))+s);let a=s.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(a=Math.ceil(a/4)*4);const l=r.createTracker(i);l.move(s+" ".repeat(a-s.length)),l.shift(a);const c=r.enter("listItem"),u=r.indentLines(r.containerFlow(n,l.current()),d);return c(),u;function d(h,f,m){return f?(m?"":" ".repeat(a))+h:(m?s:s+" ".repeat(a-s.length))+h}}function M6e(n,e,r,i){const o=r.enter("paragraph"),s=r.enter("phrasing"),a=r.containerPhrasing(n,i);return s(),o(),a}const E6e=y3(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function N6e(n,e,r,i){return(n.children.some(function(a){return E6e(a)})?r.containerPhrasing:r.containerFlow).call(r,n,i)}function j6e(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}mte.peek=O6e;function mte(n,e,r,i){const o=j6e(r),s=r.enter("strong"),a=r.createTracker(i),l=a.move(o+o);let c=a.move(r.containerPhrasing(n,{after:o,before:l,...a.current()}));const u=c.charCodeAt(0),d=KS(i.before.charCodeAt(i.before.length-1),u,o);d.inside&&(c=Vh(u)+c.slice(1));const h=c.charCodeAt(c.length-1),f=KS(i.after.charCodeAt(0),h,o);f.inside&&(c=c.slice(0,-1)+Vh(h));const m=a.move(o+o);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},l+c+m}function O6e(n,e,r){return r.options.strong||"*"}function D6e(n,e,r,i){return r.safe(n.value,i)}function I6e(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function R6e(n,e,r){const i=(pte(r)+(r.options.ruleSpaces?" ":"")).repeat(I6e(r));return r.options.ruleSpaces?i.slice(0,-1):i}const $j={blockquote:n6e,break:pH,code:o6e,definition:a6e,emphasis:ite,hardBreak:pH,heading:y6e,html:ate,image:lte,imageReference:cte,inlineCode:ute,link:hte,linkReference:fte,list:A6e,listItem:P6e,paragraph:M6e,root:N6e,strong:mte,text:D6e,thematicBreak:R6e},L6e=[z6e];function z6e(n,e,r,i){if(e.type==="code"&&L9(e,i)&&(n.type==="list"||n.type===e.type&&L9(n,i)))return!1;if("spread"in r&&typeof r.spread=="boolean")return n.type==="paragraph"&&(n.type===e.type||e.type==="definition"||e.type==="heading"&&ste(e,i))?void 0:r.spread?1:0}const Ff=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],F6e=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Ff},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Ff},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Ff},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Ff},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Ff},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Ff},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Ff},{atBreak:!0,character:"~"}];function $6e(n){return n.label||!n.identifier?n.label||"":Jee(n.identifier)}function B6e(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function H6e(n,e,r){const i=e.indexStack,o=n.children||[],s=[];let a=-1,l=r.before,c;i.push(-1);let u=e.createTracker(r);for(;++a<o.length;){const d=o[a];let h;if(i[i.length-1]=a,a+1<o.length){let v=e.handle.handlers[o[a+1].type];v&&v.peek&&(v=v.peek),h=v?v(o[a+1],n,e,{before:"",after:"",...u.current()}).charAt(0):""}else h=r.after;s.length>0&&(l==="\r"||l===`
`)&&d.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),l=" ",u=e.createTracker(r),u.move(s.join("")));let f=e.handle(d,n,e,{...u.current(),after:h,before:l});c&&c===f.slice(0,1)&&(f=Vh(c.charCodeAt(0))+f.slice(1));const m=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,c=void 0,m&&(s.length>0&&m.before&&l===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+Vh(l.charCodeAt(0))),m.after&&(c=h)),u.move(f),s.push(f),l=f.slice(-1)}return i.pop(),s.join("")}function q6e(n,e,r){const i=e.indexStack,o=n.children||[],s=e.createTracker(r),a=[];let l=-1;for(i.push(-1);++l<o.length;){const c=o[l];i[i.length-1]=l,a.push(s.move(e.handle(c,n,e,{before:`
`,after:`
`,...s.current()}))),c.type!=="list"&&(e.bulletLastUsed=void 0),l<o.length-1&&a.push(s.move(V6e(c,o[l+1],n,e)))}return i.pop(),a.join("")}function V6e(n,e,r,i){let o=i.join.length;for(;o--;){const s=i.join[o](n,e,r,i);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const W6e=/\r?\n|\r/g;function U6e(n,e){const r=[];let i=0,o=0,s;for(;s=W6e.exec(n);)a(n.slice(i,s.index)),r.push(s[0]),i=s.index+s[0].length,o++;return a(n.slice(i)),r.join("");function a(l){r.push(e(l,o,!l))}}function K6e(n,e,r){const i=(r.before||"")+(e||"")+(r.after||""),o=[],s=[],a={};let l=-1;for(;++l<n.unsafe.length;){const d=n.unsafe[l];if(!nte(n.stack,d))continue;const h=n.compilePattern(d);let f;for(;f=h.exec(i);){const m="before"in d||!!d.atBreak,v="after"in d,x=f.index+(m?f[1].length:0);o.includes(x)?(a[x].before&&!m&&(a[x].before=!1),a[x].after&&!v&&(a[x].after=!1)):(o.push(x),a[x]={before:m,after:v})}}o.sort(G6e);let c=r.before?r.before.length:0;const u=i.length-(r.after?r.after.length:0);for(l=-1;++l<o.length;){const d=o[l];d<c||d>=u||d+1<u&&o[l+1]===d+1&&a[d].after&&!a[d+1].before&&!a[d+1].after||o[l-1]===d-1&&a[d].before&&!a[d-1].before&&!a[d-1].after||(c!==d&&s.push(mH(i.slice(c,d),"\\")),c=d,/[!-/:-@[-`{-~]/.test(i.charAt(d))&&(!r.encode||!r.encode.includes(i.charAt(d)))?s.push("\\"):(s.push(Vh(i.charCodeAt(d))),c++))}return s.push(mH(i.slice(c,u),r.after)),s.join("")}function G6e(n,e){return n-e}function mH(n,e){const r=/\\(?=[!-/:-@[-`{-~])/g,i=[],o=[],s=n+e;let a=-1,l=0,c;for(;c=r.exec(s);)i.push(c.index);for(;++a<i.length;)l!==i[a]&&o.push(n.slice(l,i[a])),o.push("\\"),l=i[a];return o.push(n.slice(l)),o.join("")}function Y6e(n){const e=n||{},r=e.now||{};let i=e.lineShift||0,o=r.line||1,s=r.column||1;return{move:c,current:a,shift:l};function a(){return{now:{line:o,column:s},lineShift:i}}function l(u){i+=u}function c(u){const d=u||"",h=d.split(/\r?\n|\r/g),f=h[h.length-1];return o+=h.length-1,s=h.length===1?s+f.length:1+f.length+i,d}}function Z6e(n,e){const r=e||{},i={associationId:$6e,containerPhrasing:e7e,containerFlow:t7e,createTracker:Y6e,compilePattern:B6e,enter:s,handlers:{...$j},handle:void 0,indentLines:U6e,indexStack:[],join:[...L6e],options:{},safe:n7e,stack:[],unsafe:[...F6e]};tte(i,r),i.options.tightDefinitions&&i.join.push(Q6e),i.handle=Q3e("type",{invalid:X6e,unknown:J6e,handlers:i.handlers});let o=i.handle(n,void 0,i,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return o&&o.charCodeAt(o.length-1)!==10&&o.charCodeAt(o.length-1)!==13&&(o+=`
`),o;function s(a){return i.stack.push(a),l;function l(){i.stack.pop()}}}function X6e(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function J6e(n){const e=n;throw new Error("Cannot handle unknown node `"+e.type+"`")}function Q6e(n,e){if(n.type==="definition"&&n.type===e.type)return 0}function e7e(n,e){return H6e(n,this,e)}function t7e(n,e){return q6e(n,this,e)}function n7e(n,e){return K6e(this,n,e)}function $9(n){const e=this;e.compiler=r;function r(i){return Z6e(i,{...e.data("settings"),...n,extensions:e.data("toMarkdownExtensions")||[]})}}function gH(n){if(n)throw n}var I_,yH;function r7e(){if(yH)return I_;yH=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var d=n.call(u,"constructor"),h=u.constructor&&u.constructor.prototype&&n.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!h)return!1;var f;for(f in u);return typeof f>"u"||n.call(u,f)},a=function(u,d){r&&d.name==="__proto__"?r(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},l=function(u,d){if(d==="__proto__")if(n.call(u,d)){if(i)return i(u,d).value}else return;return u[d]};return I_=function c(){var u,d,h,f,m,v,x=arguments[0],b=1,w=arguments.length,S=!1;for(typeof x=="boolean"&&(S=x,x=arguments[1]||{},b=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});b<w;++b)if(u=arguments[b],u!=null)for(d in u)h=l(x,d),f=l(u,d),x!==f&&(S&&f&&(s(f)||(m=o(f)))?(m?(m=!1,v=h&&o(h)?h:[]):v=h&&s(h)?h:{},a(x,{name:d,newValue:c(S,v,f)})):typeof f<"u"&&a(x,{name:d,newValue:f}));return x},I_}var i7e=r7e();const R_=Ia(i7e);function B9(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function o7e(){const n=[],e={run:r,use:i};return e;function r(...o){let s=-1;const a=o.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...o);function l(c,...u){const d=n[++s];let h=-1;if(c){a(c);return}for(;++h<o.length;)(u[h]===null||u[h]===void 0)&&(u[h]=o[h]);o=u,d?s7e(d,l)(...u):a(null,...u)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return n.push(o),e}}function s7e(n,e){let r;return i;function i(...a){const l=n.length>a.length;let c;l&&a.push(o);try{c=n.apply(this,a)}catch(u){const d=u;if(l&&r)throw d;return o(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,o):c instanceof Error?o(c):s(c))}function o(a,...l){r||(r=!0,e(a,...l))}function s(a){o(null,a)}}class hs extends Error{constructor(e,r,i){super(),typeof r=="string"&&(i=r,r=void 0);let o="",s={},a=!1;if(r&&("line"in r&&"column"in r?s={place:r}:"start"in r&&"end"in r?s={place:r}:"type"in r?s={ancestors:[r],place:r.position}:s={...r}),typeof e=="string"?o=e:!s.cause&&e&&(a=!0,o=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=l?l.line:void 0,this.name=Ov(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}hs.prototype.file="";hs.prototype.name="";hs.prototype.reason="";hs.prototype.message="";hs.prototype.stack="";hs.prototype.column=void 0;hs.prototype.line=void 0;hs.prototype.ancestors=void 0;hs.prototype.cause=void 0;hs.prototype.fatal=void 0;hs.prototype.place=void 0;hs.prototype.ruleId=void 0;hs.prototype.source=void 0;const tc={basename:a7e,dirname:l7e,extname:c7e,join:u7e,sep:"/"};function a7e(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');jb(n);let r=0,i=-1,o=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;o--;)if(n.codePointAt(o)===47){if(s){r=o+1;break}}else i<0&&(s=!0,i=o+1);return i<0?"":n.slice(r,i)}if(e===n)return"";let a=-1,l=e.length-1;for(;o--;)if(n.codePointAt(o)===47){if(s){r=o+1;break}}else a<0&&(s=!0,a=o+1),l>-1&&(n.codePointAt(o)===e.codePointAt(l--)?l<0&&(i=o):(l=-1,i=a));return r===i?i=a:i<0&&(i=n.length),n.slice(r,i)}function l7e(n){if(jb(n),n.length===0)return".";let e=-1,r=n.length,i;for(;--r;)if(n.codePointAt(r)===47){if(i){e=r;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function c7e(n){jb(n);let e=n.length,r=-1,i=0,o=-1,s=0,a;for(;e--;){const l=n.codePointAt(e);if(l===47){if(a){i=e+1;break}continue}r<0&&(a=!0,r=e+1),l===46?o<0?o=e:s!==1&&(s=1):o>-1&&(s=-1)}return o<0||r<0||s===0||s===1&&o===r-1&&o===i+1?"":n.slice(o,r)}function u7e(...n){let e=-1,r;for(;++e<n.length;)jb(n[e]),n[e]&&(r=r===void 0?n[e]:r+"/"+n[e]);return r===void 0?".":d7e(r)}function d7e(n){jb(n);const e=n.codePointAt(0)===47;let r=h7e(n,!e);return r.length===0&&!e&&(r="."),r.length>0&&n.codePointAt(n.length-1)===47&&(r+="/"),e?"/"+r:r}function h7e(n,e){let r="",i=0,o=-1,s=0,a=-1,l,c;for(;++a<=n.length;){if(a<n.length)l=n.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(o===a-1||s===1))if(o!==a-1&&s===2){if(r.length<2||i!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",i=0):(r=r.slice(0,c),i=r.length-1-r.lastIndexOf("/")),o=a,s=0;continue}}else if(r.length>0){r="",i=0,o=a,s=0;continue}}e&&(r=r.length>0?r+"/..":"..",i=2)}else r.length>0?r+="/"+n.slice(o+1,a):r=n.slice(o+1,a),i=a-o-1;o=a,s=0}else l===46&&s>-1?s++:s=-1}return r}function jb(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const f7e={cwd:p7e};function p7e(){return"/"}function H9(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function m7e(n){if(typeof n=="string")n=new URL(n);else if(!H9(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return g7e(n)}function g7e(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let r=-1;for(;++r<e.length;)if(e.codePointAt(r)===37&&e.codePointAt(r+1)===50){const i=e.codePointAt(r+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(e)}const L_=["history","path","basename","stem","extname","dirname"];class y7e{constructor(e){let r;e?H9(e)?r={path:e}:typeof e=="string"||v7e(e)?r={value:e}:r=e:r={},this.cwd="cwd"in r?"":f7e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<L_.length;){const s=L_[i];s in r&&r[s]!==void 0&&r[s]!==null&&(this[s]=s==="history"?[...r[s]]:r[s])}let o;for(o in r)L_.includes(o)||(this[o]=r[o])}get basename(){return typeof this.path=="string"?tc.basename(this.path):void 0}set basename(e){F_(e,"basename"),z_(e,"basename"),this.path=tc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?tc.dirname(this.path):void 0}set dirname(e){vH(this.basename,"dirname"),this.path=tc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?tc.extname(this.path):void 0}set extname(e){if(z_(e,"extname"),vH(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=tc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){H9(e)&&(e=m7e(e)),F_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?tc.basename(this.path,this.extname):void 0}set stem(e){F_(e,"stem"),z_(e,"stem"),this.path=tc.join(this.dirname||"",e+(this.extname||""))}fail(e,r,i){const o=this.message(e,r,i);throw o.fatal=!0,o}info(e,r,i){const o=this.message(e,r,i);return o.fatal=void 0,o}message(e,r,i){const o=new hs(e,r,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function z_(n,e){if(n&&n.includes(tc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+tc.sep+"`")}function F_(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function vH(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function v7e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const x7e=(function(n){const i=this.constructor.prototype,o=i[n],s=function(){return o.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),b7e={}.hasOwnProperty;class Bj extends x7e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=o7e()}copy(){const e=new Bj;let r=-1;for(;++r<this.attachers.length;){const i=this.attachers[r];e.use(...i)}return e.data(R_(!0,{},this.namespace)),e}data(e,r){return typeof e=="string"?arguments.length===2?(H_("data",this.frozen),this.namespace[e]=r,this):b7e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(H_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=r.call(e,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const r=G2(e),i=this.parser||this.Parser;return $_("parse",i),i(String(r),r)}process(e,r){const i=this;return this.freeze(),$_("process",this.parser||this.Parser),B_("process",this.compiler||this.Compiler),r?o(void 0,r):new Promise(o);function o(s,a){const l=G2(e),c=i.parse(l);i.run(c,l,function(d,h,f){if(d||!h||!f)return u(d);const m=h,v=i.stringify(m,f);k7e(v)?f.value=v:f.result=v,u(d,f)});function u(d,h){d||!h?a(d):s?s(h):r(void 0,h)}}}processSync(e){let r=!1,i;return this.freeze(),$_("processSync",this.parser||this.Parser),B_("processSync",this.compiler||this.Compiler),this.process(e,o),bH("processSync","process",r),i;function o(s,a){r=!0,gH(s),i=a}}run(e,r,i){xH(e),this.freeze();const o=this.transformers;return!i&&typeof r=="function"&&(i=r,r=void 0),i?s(void 0,i):new Promise(s);function s(a,l){const c=G2(r);o.run(e,c,u);function u(d,h,f){const m=h||e;d?l(d):a?a(m):i(void 0,m,f)}}}runSync(e,r){let i=!1,o;return this.run(e,r,s),bH("runSync","run",i),o;function s(a,l){gH(a),o=l,i=!0}}stringify(e,r){this.freeze();const i=G2(r),o=this.compiler||this.Compiler;return B_("stringify",o),xH(e),o(e,i)}use(e,...r){const i=this.attachers,o=this.namespace;if(H_("use",this.frozen),e!=null)if(typeof e=="function")c(e,r);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(o.settings=R_(!0,o.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,f=-1;for(;++h<i.length;)if(i[h][0]===u){f=h;break}if(f===-1)i.push([u,...d]);else if(d.length>0){let[m,...v]=d;const x=i[f][1];B9(x)&&B9(m)&&(m=R_(!0,x,m)),i[f]=[u,m,...v]}}}}const q9=new Bj().freeze();function $_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function B_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function H_(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xH(n){if(!B9(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function bH(n,e,r){if(!r)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function G2(n){return w7e(n)?n:new y7e(n)}function w7e(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function k7e(n){return typeof n=="string"||S7e(n)}function S7e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var gte=n=>{throw TypeError(n)},yte=(n,e,r)=>e.has(n)||gte("Cannot "+r),en=(n,e,r)=>(yte(n,e,"read from private field"),r?r.call(n):e.get(n)),zr=(n,e,r)=>e.has(n)?gte("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),ir=(n,e,r,i)=>(yte(n,e,"write to private field"),e.set(n,r),r),Xl,Iy,v4,x4,b4,Ry,Ly,gu,zy,w4,k4,Fy,S4,$y,C4,_4,m0,Xf,A4,By;class vte{}let xte=class{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{this.top()?.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw xee();return e}}};class Hj extends vte{constructor(e,r,i){super(),this.type=e,this.content=r,this.attrs=i}push(e,...r){this.content.push(e,...r)}pop(){return this.content.pop()}static create(e,r,i){return new Hj(e,r,i)}}const V9=class extends xte{constructor(e){super(),zr(this,Xl),zr(this,Iy),zr(this,v4),zr(this,x4),zr(this,b4),zr(this,Ry),zr(this,Ly),ir(this,Xl,Yt.none),ir(this,Iy,r=>r.isText),ir(this,v4,(r,i)=>{if(en(this,Iy).call(this,r)&&en(this,Iy).call(this,i)&&Yt.sameSet(r.marks,i.marks))return this.schema.text(r.text+i.text,r.marks)}),ir(this,x4,r=>{const i=Object.values({...this.schema.nodes,...this.schema.marks}).find(o=>o.spec.parseMarkdown.match(r));if(!i)throw v5e(r);return i}),ir(this,b4,r=>{const i=en(this,x4).call(this,r);i.spec.parseMarkdown.runner(this,r,i)}),this.injectRoot=(r,i,o)=>(this.openNode(i,o),this.next(r.children),this),this.openNode=(r,i)=>(this.open(Hj.create(r,[],i)),this),ir(this,Ry,()=>{ir(this,Xl,Yt.none);const r=this.close();return en(this,Ly).call(this,r.type,r.attrs,r.content)}),this.closeNode=()=>{try{en(this,Ry).call(this)}catch(r){console.error(r)}return this},ir(this,Ly,(r,i,o)=>{const s=r.createAndFill(i,o,en(this,Xl));if(!s)throw y5e(r,i,o);return this.push(s),s}),this.addNode=(r,i,o)=>{try{en(this,Ly).call(this,r,i,o)}catch(s){console.error(s)}return this},this.openMark=(r,i)=>{const o=r.create(i);return ir(this,Xl,o.addToSet(en(this,Xl))),this},this.closeMark=r=>(ir(this,Xl,r.removeFromSet(en(this,Xl))),this),this.addText=r=>{try{const i=this.top();if(!i)throw xee();const o=i.pop(),s=this.schema.text(r,en(this,Xl));if(!o)return i.push(s),this;const a=en(this,v4).call(this,o,s);return a?(i.push(a),this):(i.push(o,s),this)}catch(i){return console.error(i),this}},this.build=()=>{let r;do r=en(this,Ry).call(this);while(this.size());return r},this.next=(r=[])=>([r].flat().forEach(i=>en(this,b4).call(this,i)),this),this.toDoc=()=>this.build(),this.run=(r,i)=>{const o=r.runSync(r.parse(i),i);return this.next(o),this},this.schema=e}};Xl=new WeakMap;Iy=new WeakMap;v4=new WeakMap;x4=new WeakMap;b4=new WeakMap;Ry=new WeakMap;Ly=new WeakMap;V9.create=(n,e)=>{const r=new V9(n);return i=>(r.run(e,i),r.toDoc())};let C7e=V9;const W9=class extends vte{constructor(e,r,i,o={}){super(),this.type=e,this.children=r,this.value=i,this.props=o,this.push=(s,...a)=>{this.children||(this.children=[]),this.children.push(s,...a)},this.pop=()=>this.children?.pop()}};W9.create=(n,e,r,i={})=>new W9(n,e,r,i);let wH=W9;const _7e=n=>Object.prototype.hasOwnProperty.call(n,"size"),U9=class extends xte{constructor(e){super(),zr(this,gu),zr(this,zy),zr(this,w4),zr(this,k4),zr(this,Fy),zr(this,S4),zr(this,$y),zr(this,C4),zr(this,_4),zr(this,m0),zr(this,Xf),zr(this,A4),zr(this,By),ir(this,gu,Yt.none),ir(this,zy,r=>{const i=Object.values({...this.schema.nodes,...this.schema.marks}).find(o=>o.spec.toMarkdown.match(r));if(!i)throw x5e(r.type);return i}),ir(this,w4,r=>en(this,zy).call(this,r).spec.toMarkdown.runner(this,r)),ir(this,k4,(r,i)=>en(this,zy).call(this,r).spec.toMarkdown.runner(this,r,i)),ir(this,Fy,r=>{const{marks:i}=r,o=l=>l.type.spec.priority??50;[...i].sort((l,c)=>o(l)-o(c)).every(l=>!en(this,k4).call(this,l,r))&&en(this,w4).call(this,r),i.forEach(l=>en(this,By).call(this,l))}),ir(this,S4,(r,i)=>{if(r.type===i||r.children?.length!==1)return r;const o=c=>{if(c.type===i)return c;if(c.children?.length!==1)return null;const[u]=c.children;return u?o(u):null},s=o(r);if(!s)return r;const a=s.children?[...s.children]:void 0,l={...r,children:a};return l.children=a,s.children=[l],s}),ir(this,$y,r=>{const{children:i}=r;return i&&(r.children=i.reduce((o,s,a)=>{if(a===0)return[s];const l=o.at(-1);if(l&&l.isMark&&s.isMark){s=en(this,S4).call(this,s,l.type);const{children:c,...u}=s,{children:d,...h}=l;if(s.type===l.type&&c&&d&&JSON.stringify(u)===JSON.stringify(h)){const f={...h,children:[...d,...c]};return o.slice(0,-1).concat(en(this,$y).call(this,f))}}return o.concat(s)},[])),r}),ir(this,C4,r=>{const i={...r.props,type:r.type};return r.children&&(i.children=r.children),r.value&&(i.value=r.value),i}),this.openNode=(r,i,o)=>(this.open(wH.create(r,void 0,i,o)),this),ir(this,_4,(r,i)=>{let o="",s="";const a=r.children;let l=-1,c=-1;const u=h=>{h&&h.forEach((f,m)=>{f.type==="text"&&f.value&&(l<0&&(l=m),c=m)})};if(a){u(a);const h=a?.[c],f=a?.[l];if(h&&h.value.endsWith(" ")){const m=h.value,v=m.trimEnd();s=m.slice(v.length),h.value=v}if(f&&f.value.startsWith(" ")){const m=f.value,v=m.trimStart();o=m.slice(0,m.length-v.length),f.value=v}}o.length&&en(this,Xf).call(this,"text",void 0,o);const d=i();return s.length&&en(this,Xf).call(this,"text",void 0,s),d}),ir(this,m0,(r=!1)=>{const i=this.close(),o=()=>en(this,Xf).call(this,i.type,i.children,i.value,i.props);return r?en(this,_4).call(this,i,o):o()}),this.closeNode=()=>(en(this,m0).call(this),this),ir(this,Xf,(r,i,o,s)=>{const a=wH.create(r,i,o,s),l=en(this,$y).call(this,en(this,C4).call(this,a));return this.push(l),l}),this.addNode=(r,i,o,s)=>(en(this,Xf).call(this,r,i,o,s),this),ir(this,A4,(r,i,o,s)=>r.isInSet(en(this,gu))?this:(ir(this,gu,r.addToSet(en(this,gu))),this.openNode(i,o,{...s,isMark:!0}))),ir(this,By,r=>{r.isInSet(en(this,gu))&&(ir(this,gu,r.type.removeFromSet(en(this,gu))),en(this,m0).call(this,!0))}),this.withMark=(r,i,o,s)=>(en(this,A4).call(this,r,i,o,s),this),this.closeMark=r=>(en(this,By).call(this,r),this),this.build=()=>{let r=null;do r=en(this,m0).call(this);while(this.size());return r},this.next=r=>_7e(r)?(r.forEach(i=>{en(this,Fy).call(this,i)}),this):(en(this,Fy).call(this,r),this),this.toString=r=>r.stringify(this.build()),this.run=r=>(this.next(r),this),this.schema=e}};gu=new WeakMap;zy=new WeakMap;w4=new WeakMap;k4=new WeakMap;Fy=new WeakMap;S4=new WeakMap;$y=new WeakMap;C4=new WeakMap;_4=new WeakMap;m0=new WeakMap;Xf=new WeakMap;A4=new WeakMap;By=new WeakMap;U9.create=(n,e)=>{const r=new U9(n);return i=>(r.run(i),r.toString(e))};let A7e=U9;const bte=65535,wte=Math.pow(2,16);function T7e(n,e){return n+e*wte}function kH(n){return n&bte}function P7e(n){return(n-(n&bte))/wte}const kte=1,Ste=2,T4=4,Cte=8;class K9{constructor(e,r,i){this.pos=e,this.delInfo=r,this.recover=i}get deleted(){return(this.delInfo&Cte)>0}get deletedBefore(){return(this.delInfo&(kte|T4))>0}get deletedAfter(){return(this.delInfo&(Ste|T4))>0}get deletedAcross(){return(this.delInfo&T4)>0}}class Is{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&Is.empty)return Is.empty}recover(e){let r=0,i=kH(e);if(!this.inverted)for(let o=0;o<i;o++)r+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[i*3]+r+P7e(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,i){let o=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?o:0);if(c>e)break;let u=this.ranges[l+s],d=this.ranges[l+a],h=c+u;if(e<=h){let f=u?e==c?-1:e==h?1:r:r,m=c+o+(f<0?0:d);if(i)return m;let v=e==(r<0?c:h)?null:T7e(l/3,e-c),x=e==c?Ste:e==h?kte:T4;return(r<0?e!=c:e!=h)&&(x|=Cte),new K9(m,x,v)}o+=d-u}return i?e+o:new K9(e+o,0,null)}touches(e,r){let i=0,o=kH(r),s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[l+s],d=c+u;if(e<=d&&l==o*3)return!0;i+=this.ranges[l+a]-u}return!1}forEach(e){let r=this.inverted?2:1,i=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let a=this.ranges[o],l=a-(this.inverted?s:0),c=a+(this.inverted?0:s),u=this.ranges[o+r],d=this.ranges[o+i];e(l,l+u,c,c+d),s+=d-u}}invert(){return new Is(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Is.empty:new Is(e<0?[0,-e,0]:[0,0,e])}}Is.empty=new Is([]);class kx{constructor(e,r,i=0,o=e?e.length:0){this.mirror=r,this.from=i,this.to=o,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new kx(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,i=this._maps.length;r<e._maps.length;r++){let o=e.getMirror(r);this.appendMap(e._maps[r],o!=null&&o<r?i+o:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,i=this._maps.length+e._maps.length;r>=0;r--){let o=e.getMirror(r);this.appendMap(e._maps[r].invert(),o!=null&&o>r?i-o-1:void 0)}}invert(){let e=new kx;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,i){let o=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],l=a.mapResult(e,r);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return i?e:new K9(e,o,null)}}const q_=Object.create(null);let oo=class{getMap(){return Is.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=q_[r.stepType];if(!i)throw new RangeError(`No step type ${r.stepType} defined`);return i.fromJSON(e,r)}static jsonID(e,r){if(e in q_)throw new RangeError("Duplicate use of step JSON ID "+e);return q_[e]=r,r.prototype.jsonID=e,r}};class $r{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new $r(e,null)}static fail(e){return new $r(null,e)}static fromReplace(e,r,i,o){try{return $r.ok(e.replace(r,i,o))}catch(s){if(s instanceof qS)return $r.fail(s.message);throw s}}}function qj(n,e,r){let i=[];for(let o=0;o<n.childCount;o++){let s=n.child(o);s.content.size&&(s=s.copy(qj(s.content,e,s))),s.isInline&&(s=e(s,r,o)),i.push(s)}return Ue.fromArray(i)}class Nu extends oo{constructor(e,r,i){super(),this.from=e,this.to=r,this.mark=i}apply(e){let r=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new Qe(qj(r.content,(a,l)=>!a.isAtom||!l.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),o),r.openStart,r.openEnd);return $r.fromReplace(e,this.from,this.to,s)}invert(){return new pc(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return r.deleted&&i.deleted||r.pos>=i.pos?null:new Nu(r.pos,i.pos,this.mark)}merge(e){return e instanceof Nu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Nu(r.from,r.to,e.markFromJSON(r.mark))}}oo.jsonID("addMark",Nu);class pc extends oo{constructor(e,r,i){super(),this.from=e,this.to=r,this.mark=i}apply(e){let r=e.slice(this.from,this.to),i=new Qe(qj(r.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),r.openStart,r.openEnd);return $r.fromReplace(e,this.from,this.to,i)}invert(){return new Nu(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return r.deleted&&i.deleted||r.pos>=i.pos?null:new pc(r.pos,i.pos,this.mark)}merge(e){return e instanceof pc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pc(r.from,r.to,e.markFromJSON(r.mark))}}oo.jsonID("removeMark",pc);class Mh extends oo{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return $r.fail("No node at mark step's position");let i=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return $r.fromReplace(e,this.pos,this.pos+1,new Qe(Ue.from(i),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let i=this.mark.addToSet(r.marks);if(i.length==r.marks.length){for(let o=0;o<r.marks.length;o++)if(!r.marks[o].isInSet(i))return new Mh(this.pos,r.marks[o]);return new Mh(this.pos,this.mark)}}return new Zp(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Mh(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Mh(r.pos,e.markFromJSON(r.mark))}}oo.jsonID("addNodeMark",Mh);class Zp extends oo{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return $r.fail("No node at mark step's position");let i=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return $r.fromReplace(e,this.pos,this.pos+1,new Qe(Ue.from(i),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Mh(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Zp(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Zp(r.pos,e.markFromJSON(r.mark))}}oo.jsonID("removeNodeMark",Zp);class mi extends oo{constructor(e,r,i,o=!1){super(),this.from=e,this.to=r,this.slice=i,this.structure=o}apply(e){return this.structure&&G9(e,this.from,this.to)?$r.fail("Structure replace would overwrite content"):$r.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Is([this.from,this.to-this.from,this.slice.size])}invert(e){return new mi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return r.deletedAcross&&i.deletedAcross?null:new mi(r.pos,Math.max(r.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof mi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?Qe.empty:new Qe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new mi(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?Qe.empty:new Qe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new mi(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mi(r.from,r.to,Qe.fromJSON(e,r.slice),!!r.structure)}}oo.jsonID("replace",mi);class no extends oo{constructor(e,r,i,o,s,a,l=!1){super(),this.from=e,this.to=r,this.gapFrom=i,this.gapTo=o,this.slice=s,this.insert=a,this.structure=l}apply(e){if(this.structure&&(G9(e,this.from,this.gapFrom)||G9(e,this.gapTo,this.to)))return $r.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return $r.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,r.content);return i?$r.fromReplace(e,this.from,this.to,i):$r.fail("Content does not fit in gap")}getMap(){return new Is([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new no(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),o=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return r.deletedAcross&&i.deletedAcross||o<r.pos||s>i.pos?null:new no(r.pos,i.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new no(r.from,r.to,r.gapFrom,r.gapTo,Qe.fromJSON(e,r.slice),r.insert,!!r.structure)}}oo.jsonID("replaceAround",no);function G9(n,e,r){let i=n.resolve(e),o=r-e,s=i.depth;for(;o>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,o--;if(o>0){let a=i.node(s).maybeChild(i.indexAfter(s));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function M7e(n,e,r,i){let o=[],s=[],a,l;n.doc.nodesBetween(e,r,(c,u,d)=>{if(!c.isInline)return;let h=c.marks;if(!i.isInSet(h)&&d.type.allowsMarkType(i.type)){let f=Math.max(u,e),m=Math.min(u+c.nodeSize,r),v=i.addToSet(h);for(let x=0;x<h.length;x++)h[x].isInSet(v)||(a&&a.to==f&&a.mark.eq(h[x])?a.to=m:o.push(a=new pc(f,m,h[x])));l&&l.to==f?l.to=m:s.push(l=new Nu(f,m,i))}}),o.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}function E7e(n,e,r,i){let o=[],s=0;n.doc.nodesBetween(e,r,(a,l)=>{if(!a.isInline)return;s++;let c=null;if(i instanceof p3){let u=a.marks,d;for(;d=i.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else i?i.isInSet(a.marks)&&(c=[i]):c=a.marks;if(c&&c.length){let u=Math.min(l+a.nodeSize,r);for(let d=0;d<c.length;d++){let h=c[d],f;for(let m=0;m<o.length;m++){let v=o[m];v.step==s-1&&h.eq(o[m].style)&&(f=v)}f?(f.to=u,f.step=s):o.push({style:h,from:Math.max(l,e),to:u,step:s})}}}),o.forEach(a=>n.step(new pc(a.from,a.to,a.style)))}function Vj(n,e,r,i=r.contentMatch,o=!0){let s=n.doc.nodeAt(e),a=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),d=l+u.nodeSize,h=i.matchType(u.type);if(!h)a.push(new mi(l,d,Qe.empty));else{i=h;for(let f=0;f<u.marks.length;f++)r.allowsMarkType(u.marks[f].type)||n.step(new pc(l,d,u.marks[f]));if(o&&u.isText&&r.whitespace!="pre"){let f,m=/\r?\n|\r/g,v;for(;f=m.exec(u.text);)v||(v=new Qe(Ue.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),a.push(new mi(l+f.index,l+f.index+f[0].length,v))}}l=d}if(!i.validEnd){let c=i.fillBefore(Ue.empty,!0);n.replace(l,l,new Qe(c,0,0))}for(let c=a.length-1;c>=0;c--)n.step(a[c])}function N7e(n,e,r){return(e==0||n.canReplace(e,n.childCount))&&(r==n.childCount||n.canReplace(0,r))}function x3(n){let r=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth,o=0,s=0;;--i){let a=n.$from.node(i),l=n.$from.index(i)+o,c=n.$to.indexAfter(i)-s;if(i<n.depth&&a.canReplace(l,c,r))return i;if(i==0||a.type.spec.isolating||!N7e(a,l,c))break;l&&(o=1),c<a.childCount&&(s=1)}return null}function j7e(n,e,r){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),l=o.after(s+1),c=a,u=l,d=Ue.empty,h=0;for(let v=s,x=!1;v>r;v--)x||i.index(v)>0?(x=!0,d=Ue.from(i.node(v).copy(d)),h++):c--;let f=Ue.empty,m=0;for(let v=s,x=!1;v>r;v--)x||o.after(v+1)<o.end(v)?(x=!0,f=Ue.from(o.node(v).copy(f)),m++):u++;n.step(new no(c,u,a,l,new Qe(d.append(f),h,m),d.size-h,!0))}function Wj(n,e,r=null,i=n){let o=O7e(n,e),s=o&&D7e(i,e);return s?o.map(SH).concat({type:e,attrs:r}).concat(s.map(SH)):null}function SH(n){return{type:n,attrs:null}}function O7e(n,e){let{parent:r,startIndex:i,endIndex:o}=n,s=r.contentMatchAt(i).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return r.canReplaceWith(i,o,a)?s:null}function D7e(n,e){let{parent:r,startIndex:i,endIndex:o}=n,s=r.child(i),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let u=i;c&&u<o;u++)c=c.matchType(r.child(u).type);return!c||!c.validEnd?null:a}function I7e(n,e,r){let i=Ue.empty;for(let a=r.length-1;a>=0;a--){if(i.size){let l=r[a].type.contentMatch.matchFragment(i);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Ue.from(r[a].type.create(r[a].attrs,i))}let o=e.start,s=e.end;n.step(new no(o,s,o,s,new Qe(i,0,0),r.length,!0))}function R7e(n,e,r,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,r,(a,l)=>{let c=typeof o=="function"?o(a):o;if(a.isTextblock&&!a.hasMarkup(i,c)&&L7e(n.doc,n.mapping.slice(s).map(l),i)){let u=null;if(i.schema.linebreakReplacement){let m=i.whitespace=="pre",v=!!i.contentMatch.matchType(i.schema.linebreakReplacement);m&&!v?u=!1:!m&&v&&(u=!0)}u===!1&&Ate(n,a,l,s),Vj(n,n.mapping.slice(s).map(l,1),i,void 0,u===null);let d=n.mapping.slice(s),h=d.map(l,1),f=d.map(l+a.nodeSize,1);return n.step(new no(h,f,h+1,f-1,new Qe(Ue.from(i.create(c,null,a.marks)),0,0),1,!0)),u===!0&&_te(n,a,l,s),!1}})}function _te(n,e,r,i){e.forEach((o,s)=>{if(o.isText){let a,l=/\r?\n|\r/g;for(;a=l.exec(o.text);){let c=n.mapping.slice(i).map(r+1+s+a.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function Ate(n,e,r,i){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let a=n.mapping.slice(i).map(r+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function L7e(n,e,r){let i=n.resolve(e),o=i.index();return i.parent.canReplaceWith(o,o+1,r)}function z7e(n,e,r,i,o){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let a=r.create(i,null,o||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);n.step(new no(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Qe(Ue.from(a),0,0),1,!0))}function Dv(n,e,r=1,i){let o=n.resolve(e),s=o.depth-r,a=i&&i[i.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let u=o.depth-1,d=r-2;u>s;u--,d--){let h=o.node(u),f=o.index(u);if(h.type.spec.isolating)return!1;let m=h.content.cutByIndex(f,h.childCount),v=i&&i[d+1];v&&(m=m.replaceChild(0,v.type.create(v.attrs)));let x=i&&i[d]||h;if(!h.canReplace(f+1,h.childCount)||!x.type.validContent(m))return!1}let l=o.indexAfter(s),c=i&&i[0];return o.node(s).canReplaceWith(l,l,c?c.type:o.node(s+1).type)}function F7e(n,e,r=1,i){let o=n.doc.resolve(e),s=Ue.empty,a=Ue.empty;for(let l=o.depth,c=o.depth-r,u=r-1;l>c;l--,u--){s=Ue.from(o.node(l).copy(s));let d=i&&i[u];a=Ue.from(d?d.type.create(d.attrs,a):o.node(l).copy(a))}n.step(new mi(e,e,new Qe(s.append(a),r,r),!0))}function b3(n,e){let r=n.resolve(e),i=r.index();return B7e(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(i,i+1)}function $7e(n,e){e.content.size||n.type.compatibleContent(e.type);let r=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),a=s.type==i?n.type.schema.nodes.text:s.type;if(r=r.matchType(a),!r||!n.type.allowsMarks(s.marks))return!1}return r.validEnd}function B7e(n,e){return!!(n&&e&&!n.isLeaf&&$7e(n,e))}function H7e(n,e,r){let i=null,{linebreakReplacement:o}=n.doc.type.schema,s=n.doc.resolve(e-r),a=s.node().type;if(o&&a.inlineContent){let d=a.whitespace=="pre",h=!!a.contentMatch.matchType(o);d&&!h?i=!1:!d&&h&&(i=!0)}let l=n.steps.length;if(i===!1){let d=n.doc.resolve(e+r);Ate(n,d.node(),d.before(),l)}a.inlineContent&&Vj(n,e+r-1,a,s.node().contentMatchAt(s.index()),i==null);let c=n.mapping.slice(l),u=c.map(e-r);if(n.step(new mi(u,c.map(e+r,-1),Qe.empty,!0)),i===!0){let d=n.doc.resolve(u);_te(n,d.node(),d.before(),n.steps.length)}return n}function q7e(n,e,r){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),r))return e;if(i.parentOffset==0)for(let o=i.depth-1;o>=0;o--){let s=i.index(o);if(i.node(o).canReplaceWith(s,s,r))return i.before(o+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let o=i.depth-1;o>=0;o--){let s=i.indexAfter(o);if(i.node(o).canReplaceWith(s,s,r))return i.after(o+1);if(s<i.node(o).childCount)return null}return null}function V7e(n,e,r){let i=n.resolve(e);if(!r.content.size)return e;let o=r.content;for(let s=0;s<r.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let a=i.depth;a>=0;a--){let l=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,c=i.index(a)+(l>0?1:0),u=i.node(a),d=!1;if(s==1)d=u.canReplace(c,c,o);else{let h=u.contentMatchAt(c).findWrapping(o.firstChild.type);d=h&&u.canReplaceWith(c,c,h[0])}if(d)return l==0?i.pos:l<0?i.before(a+1):i.after(a+1)}return null}function w3(n,e,r=e,i=Qe.empty){if(e==r&&!i.size)return null;let o=n.resolve(e),s=n.resolve(r);return Tte(o,s,i)?new mi(e,r,i):new W7e(o,s,i).fit()}function Tte(n,e,r){return!r.openStart&&!r.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),r.content)}class W7e{constructor(e,r,i){this.$from=e,this.$to=r,this.unplaced=i,this.frontier=[],this.placed=Ue.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Ue.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;let s=this.placed,a=i.depth,l=o.depth;for(;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;let c=new Qe(s,a,l);return e>-1?new no(i.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||i.pos!=this.$to.pos?new mi(i.pos,o.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,i=0,o=this.unplaced.openEnd;i<e;i++){let s=r.firstChild;if(r.childCount>1&&(o=0),s.type.spec.isolating&&o<=i){e=i;break}r=s.content}for(let r=1;r<=2;r++)for(let i=r==1?e:this.unplaced.openStart;i>=0;i--){let o,s=null;i?(s=V_(this.unplaced.content,i-1).firstChild,o=s.content):o=this.unplaced.content;let a=o.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],d,h=null;if(r==1&&(a?u.matchType(a.type)||(h=u.fillBefore(Ue.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:l,parent:s,inject:h};if(r==2&&a&&(d=u.findWrapping(a.type)))return{sliceDepth:i,frontierDepth:l,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:i}=this.unplaced,o=V_(e,r);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Qe(e,r+1,Math.max(i,o.size+r>=e.size-i?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:i}=this.unplaced,o=V_(e,r);if(o.childCount<=1&&r>0){let s=e.size-r<=r+o.size;this.unplaced=new Qe(Hy(e,r-1,1),r-1,s?r-1:i)}else this.unplaced=new Qe(Hy(e,r,1),r,i)}placeNodes({sliceDepth:e,frontierDepth:r,parent:i,inject:o,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let x=0;x<s.length;x++)this.openFrontierNode(s[x]);let a=this.unplaced,l=i?i.content:a.content,c=a.openStart-e,u=0,d=[],{match:h,type:f}=this.frontier[r];if(o){for(let x=0;x<o.childCount;x++)d.push(o.child(x));h=h.matchFragment(o)}let m=l.size+e-(a.content.size-a.openEnd);for(;u<l.childCount;){let x=l.child(u),b=h.matchType(x.type);if(!b)break;u++,(u>1||c==0||x.content.size)&&(h=b,d.push(Pte(x.mark(f.allowedMarks(x.marks)),u==1?c:0,u==l.childCount?m:-1)))}let v=u==l.childCount;v||(m=-1),this.placed=qy(this.placed,r,Ue.from(d)),this.frontier[r].match=h,v&&m<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,b=l;x<m;x++){let w=b.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),b=w.content}this.unplaced=v?e==0?Qe.empty:new Qe(Hy(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new Qe(Hy(a.content,e,u),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!W_(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:i}=this.$to,o=this.$to.after(i);for(;i>1&&o==this.$to.end(--i);)++o;return o}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:i,type:o}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),a=W_(e,r,o,i,s);if(a){for(let l=r-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],d=W_(e,l,u,c,!0);if(!d||d.childCount)continue e}return{depth:r,fit:a,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=qy(this.placed,r.depth,r.fit)),e=r.move;for(let i=r.depth+1;i<=e.depth;i++){let o=e.node(i),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(i));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,r=null,i){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=qy(this.placed,this.depth,Ue.from(e.create(r,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Ue.empty,!0);r.childCount&&(this.placed=qy(this.placed,this.frontier.length,r))}}function Hy(n,e,r){return e==0?n.cutByIndex(r,n.childCount):n.replaceChild(0,n.firstChild.copy(Hy(n.firstChild.content,e-1,r)))}function qy(n,e,r){return e==0?n.append(r):n.replaceChild(n.childCount-1,n.lastChild.copy(qy(n.lastChild.content,e-1,r)))}function V_(n,e){for(let r=0;r<e;r++)n=n.firstChild.content;return n}function Pte(n,e,r){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,Pte(i.firstChild,e-1,i.childCount==1?r-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),r<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(Ue.empty,!0)))),n.copy(i)}function W_(n,e,r,i,o){let s=n.node(e),a=o?n.indexAfter(e):n.index(e);if(a==s.childCount&&!r.compatibleContent(s.type))return null;let l=i.fillBefore(s.content,!0,a);return l&&!U7e(r,s.content,a)?l:null}function U7e(n,e,r){for(let i=r;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function K7e(n){return n.spec.defining||n.spec.definingForContent}function G7e(n,e,r,i){if(!i.size)return n.deleteRange(e,r);let o=n.doc.resolve(e),s=n.doc.resolve(r);if(Tte(o,s,i))return n.step(new mi(e,r,i));let a=Ete(o,s);a[a.length-1]==0&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let f=o.depth,m=o.pos-1;f>0;f--,m--){let v=o.node(f).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;a.indexOf(f)>-1?l=f:o.before(f)==m&&a.splice(1,0,-f)}let c=a.indexOf(l),u=[],d=i.openStart;for(let f=i.content,m=0;;m++){let v=f.firstChild;if(u.push(v),m==i.openStart)break;f=v.content}for(let f=d-1;f>=0;f--){let m=u[f],v=K7e(m.type);if(v&&!m.sameMarkup(o.node(Math.abs(l)-1)))d=f;else if(v||!m.type.isTextblock)break}for(let f=i.openStart;f>=0;f--){let m=(f+d+1)%(i.openStart+1),v=u[m];if(v)for(let x=0;x<a.length;x++){let b=a[(x+c)%a.length],w=!0;b<0&&(w=!1,b=-b);let S=o.node(b-1),_=o.index(b-1);if(S.canReplaceWith(_,_,v.type,v.marks))return n.replace(o.before(b),w?s.after(b):r,new Qe(Mte(i.content,0,i.openStart,m),m,i.openEnd))}}let h=n.steps.length;for(let f=a.length-1;f>=0&&(n.replace(e,r,i),!(n.steps.length>h));f--){let m=a[f];m<0||(e=o.before(m),r=s.after(m))}}function Mte(n,e,r,i,o){if(e<r){let s=n.firstChild;n=n.replaceChild(0,s.copy(Mte(s.content,e+1,r,i,s)))}if(e>i){let s=o.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(Ue.empty,!0))}return n}function Y7e(n,e,r,i){if(!i.isInline&&e==r&&n.doc.resolve(e).parent.content.size){let o=q7e(n.doc,e,i.type);o!=null&&(e=r=o)}n.replaceRange(e,r,new Qe(Ue.from(i),0,0))}function Z7e(n,e,r){let i=n.doc.resolve(e),o=n.doc.resolve(r),s=Ete(i,o);for(let a=0;a<s.length;a++){let l=s[a],c=a==s.length-1;if(c&&l==0||i.node(l).type.contentMatch.validEnd)return n.delete(i.start(l),o.end(l));if(l>0&&(c||i.node(l-1).canReplace(i.index(l-1),o.indexAfter(l-1))))return n.delete(i.before(l),o.after(l))}for(let a=1;a<=i.depth&&a<=o.depth;a++)if(e-i.start(a)==i.depth-a&&r>i.end(a)&&o.end(a)-r!=o.depth-a&&i.start(a-1)==o.start(a-1)&&i.node(a-1).canReplace(i.index(a-1),o.index(a-1)))return n.delete(i.before(a),r);n.delete(e,r)}function Ete(n,e){let r=[],i=Math.min(n.depth,e.depth);for(let o=i;o>=0;o--){let s=n.start(o);if(s<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&r.push(o)}return r}class $0 extends oo{constructor(e,r,i){super(),this.pos=e,this.attr=r,this.value=i}apply(e){let r=e.nodeAt(this.pos);if(!r)return $r.fail("No node at attribute step's position");let i=Object.create(null);for(let s in r.attrs)i[s]=r.attrs[s];i[this.attr]=this.value;let o=r.type.create(i,null,r.marks);return $r.fromReplace(e,this.pos,this.pos+1,new Qe(Ue.from(o),0,r.isLeaf?0:1))}getMap(){return Is.empty}invert(e){return new $0(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new $0(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $0(r.pos,r.attr,r.value)}}oo.jsonID("attr",$0);class Sx extends oo{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let o in e.attrs)r[o]=e.attrs[o];r[this.attr]=this.value;let i=e.type.create(r,e.content,e.marks);return $r.ok(i)}getMap(){return Is.empty}invert(e){return new Sx(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Sx(r.attr,r.value)}}oo.jsonID("docAttr",Sx);let ag=class extends Error{};ag=function n(e){let r=Error.call(this,e);return r.__proto__=n.prototype,r};ag.prototype=Object.create(Error.prototype);ag.prototype.constructor=ag;ag.prototype.name="TransformError";let Nte=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new kx}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new ag(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,i=Qe.empty){let o=w3(this.doc,e,r,i);return o&&this.step(o),this}replaceWith(e,r,i){return this.replace(e,r,new Qe(Ue.from(i),0,0))}delete(e,r){return this.replace(e,r,Qe.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,i){return G7e(this,e,r,i),this}replaceRangeWith(e,r,i){return Y7e(this,e,r,i),this}deleteRange(e,r){return Z7e(this,e,r),this}lift(e,r){return j7e(this,e,r),this}join(e,r=1){return H7e(this,e,r),this}wrap(e,r){return I7e(this,e,r),this}setBlockType(e,r=e,i,o=null){return R7e(this,e,r,i,o),this}setNodeMarkup(e,r,i=null,o){return z7e(this,e,r,i,o),this}setNodeAttribute(e,r,i){return this.step(new $0(e,r,i)),this}setDocAttribute(e,r){return this.step(new Sx(e,r)),this}addNodeMark(e,r){return this.step(new Mh(e,r)),this}removeNodeMark(e,r){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(r instanceof Yt)r.isInSet(i.marks)&&this.step(new Zp(e,r));else{let o=i.marks,s,a=[];for(;s=r.isInSet(o);)a.push(new Zp(e,s)),o=s.removeFromSet(o);for(let l=a.length-1;l>=0;l--)this.step(a[l])}return this}split(e,r=1,i){return F7e(this,e,r,i),this}addMark(e,r,i){return M7e(this,e,r,i),this}removeMark(e,r,i){return E7e(this,e,r,i),this}clearIncompatible(e,r,i){return Vj(this,e,r,i),this}};const U_=Object.create(null);let $t=class{constructor(e,r,i){this.$anchor=e,this.$head=r,this.ranges=i||[new jte(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=Qe.empty){let i=r.content.lastChild,o=null;for(let l=0;l<r.openEnd;l++)o=i,i=i.lastChild;let s=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:c,$to:u}=a[l],d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(u.pos),l?Qe.empty:r),l==0&&AH(e,s,(i?i.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,r){let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i),u=c.map(a.pos),d=c.map(l.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,r),AH(e,i,r.isInline?-1:1))}}static findFrom(e,r,i=!1){let o=e.parent.inlineContent?new xt(e):g0(e.node(0),e.parent,e.pos,e.index(),r,i);if(o)return o;for(let s=e.depth-1;s>=0;s--){let a=r<0?g0(e.node(0),e.node(s),e.before(s+1),e.index(s),r,i):g0(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,i);if(a)return a}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new cs(e.node(0))}static atStart(e){return g0(e,e,0,0,1)||new cs(e)}static atEnd(e){return g0(e,e,e.content.size,e.childCount,-1)||new cs(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=U_[r.type];if(!i)throw new RangeError(`No selection type ${r.type} defined`);return i.fromJSON(e,r)}static jsonID(e,r){if(e in U_)throw new RangeError("Duplicate use of selection JSON ID "+e);return U_[e]=r,r.prototype.jsonID=e,r}getBookmark(){return xt.between(this.$anchor,this.$head).getBookmark()}};$t.prototype.visible=!0;let jte=class{constructor(e,r){this.$from=e,this.$to=r}},CH=!1;function _H(n){!CH&&!n.parent.inlineContent&&(CH=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class xt extends $t{constructor(e,r=e){_H(e),_H(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let i=e.resolve(r.map(this.head));if(!i.parent.inlineContent)return $t.near(i);let o=e.resolve(r.map(this.anchor));return new xt(o.parent.inlineContent?o:i,i)}replace(e,r=Qe.empty){if(super.replace(e,r),r==Qe.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof xt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new k3(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new xt(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,i=r){let o=e.resolve(r);return new this(o,i==r?o:e.resolve(i))}static between(e,r,i){let o=e.pos-r.pos;if((!i||o)&&(i=o>=0?1:-1),!r.parent.inlineContent){let s=$t.findFrom(r,i,!0)||$t.findFrom(r,-i,!0);if(s)r=s.$head;else return $t.near(r,i)}return e.parent.inlineContent||(o==0?e=r:(e=($t.findFrom(e,-i,!0)||$t.findFrom(e,i,!0)).$anchor,e.pos<r.pos!=o<0&&(e=r))),new xt(e,r)}}$t.jsonID("text",xt);class k3{constructor(e,r){this.anchor=e,this.head=r}map(e){return new k3(e.map(this.anchor),e.map(this.head))}resolve(e){return xt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Tt extends $t{constructor(e){let r=e.nodeAfter,i=e.node(0).resolve(e.pos+r.nodeSize);super(e,i),this.node=r}map(e,r){let{deleted:i,pos:o}=r.mapResult(this.anchor),s=e.resolve(o);return i?$t.near(s):new Tt(s)}content(){return new Qe(Ue.from(this.node),0,0)}eq(e){return e instanceof Tt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Uj(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Tt(e.resolve(r.anchor))}static create(e,r){return new Tt(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Tt.prototype.visible=!1;$t.jsonID("node",Tt);class Uj{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:i}=e.mapResult(this.anchor);return r?new k3(i,i):new Uj(i)}resolve(e){let r=e.resolve(this.anchor),i=r.nodeAfter;return i&&Tt.isSelectable(i)?new Tt(r):$t.near(r)}}class cs extends $t{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=Qe.empty){if(r==Qe.empty){e.delete(0,e.doc.content.size);let i=$t.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new cs(e)}map(e){return new cs(e)}eq(e){return e instanceof cs}getBookmark(){return X7e}}$t.jsonID("all",cs);const X7e={map(){return this},resolve(n){return new cs(n)}};function g0(n,e,r,i,o,s=!1){if(e.inlineContent)return xt.create(n,r);for(let a=i-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){let l=e.child(a);if(l.isAtom){if(!s&&Tt.isSelectable(l))return Tt.create(n,r-(o<0?l.nodeSize:0))}else{let c=g0(n,l,r+o,o<0?l.childCount:0,o,s);if(c)return c}r+=l.nodeSize*o}return null}function AH(n,e,r){let i=n.steps.length-1;if(i<e)return;let o=n.steps[i];if(!(o instanceof mi||o instanceof no))return;let s=n.mapping.maps[i],a;s.forEach((l,c,u,d)=>{a==null&&(a=d)}),n.setSelection($t.near(n.doc.resolve(a),r))}const TH=1,Y2=2,PH=4;let J7e=class extends Nte{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|TH)&~Y2,this.storedMarks=null,this}get selectionSet(){return(this.updated&TH)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Y2,this}ensureMarks(e){return Yt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Y2)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~Y2,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let i=this.selection;return r&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Yt.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,i){let o=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(i==null&&(i=r),!e)return this.deleteRange(r,i);let s=this.storedMarks;if(!s){let a=this.doc.resolve(r);s=i==r?a.marks():a.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(r,i,o.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection($t.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=PH,this}get scrolledIntoView(){return(this.updated&PH)>0}};function MH(n,e){return!e||!n?n:n.bind(e)}class Vy{constructor(e,r,i){this.name=e,this.init=MH(r.init,i),this.apply=MH(r.apply,i)}}const Q7e=[new Vy("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Vy("selection",{init(n,e){return n.selection||$t.atStart(e.doc)},apply(n){return n.selection}}),new Vy("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,r,i){return i.selection.$cursor?n.storedMarks:null}}),new Vy("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];let K_=class{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Q7e.slice(),r&&r.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Vy(i.key,i.spec.state,i))})}},Kj=class Wy{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=r){let o=this.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],i=this.applyInner(e),o=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let c=o?o[a].n:0,u=o?o[a].state:this,d=c<r.length&&l.spec.appendTransaction.call(l,c?r.slice(c):r,u,i);if(d&&i.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let h=0;h<this.config.plugins.length;h++)o.push(h<a?{state:i,n:r.length}:{state:this,n:0})}r.push(d),i=i.applyInner(d),s=!0}o&&(o[a]={state:i,n:r.length})}}if(!s)return{state:i,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Wy(this.config),i=this.config.fields;for(let o=0;o<i.length;o++){let s=i[o];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new J7e(this)}static create(e){let r=new K_(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Wy(r);for(let o=0;o<r.fields.length;o++)i[r.fields[o].name]=r.fields[o].init(e,i);return i}reconfigure(e){let r=new K_(this.schema,e.plugins),i=r.fields,o=new Wy(r);for(let s=0;s<i.length;s++){let a=i[s].name;o[a]=this.hasOwnProperty(a)?this[a]:i[s].init(e,o)}return o}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[i],s=o.spec.state;s&&s.toJSON&&(r[i]=s.toJSON.call(o,this[o.key]))}return r}static fromJSON(e,r,i){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new K_(e.schema,e.plugins),s=new Wy(o);return o.fields.forEach(a=>{if(a.name=="doc")s.doc=$u.fromJSON(e.schema,r.doc);else if(a.name=="selection")s.selection=$t.fromJSON(s.doc,r.selection);else if(a.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let l in i){let c=i[l],u=c.spec.state;if(c.key==a.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,l)){s[a.name]=u.fromJSON.call(c,e,r[l],s);return}}s[a.name]=a.init(e,s)}}),s}};function Ote(n,e,r){for(let i in n){let o=n[i];o instanceof Function?o=o.bind(e):i=="handleDOMEvents"&&(o=Ote(o,e,{})),r[i]=o}return r}class ar{constructor(e){this.spec=e,this.props={},e.props&&Ote(e.props,this,this.props),this.key=e.key?e.key.key:Dte("plugin")}getState(e){return e[this.key]}}const G_=Object.create(null);function Dte(n){return n in G_?n+"$"+ ++G_[n]:(G_[n]=0,n+"$")}class lr{constructor(e="key"){this.key=Dte(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Gj=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Ite(n,e){let{$cursor:r}=n.selection;return!r||(e?!e.endOfTextblock("backward",n):r.parentOffset>0)?null:r}const Rte=(n,e,r)=>{let i=Ite(n,r);if(!i)return!1;let o=Yj(i);if(!o){let a=i.blockRange(),l=a&&x3(a);return l==null?!1:(e&&e(n.tr.lift(a,l).scrollIntoView()),!0)}let s=o.nodeBefore;if($te(n,o,e,-1))return!0;if(i.parent.content.size==0&&(lg(s,"end")||Tt.isSelectable(s)))for(let a=i.depth;;a--){let l=w3(n.doc,i.before(a),i.after(a),Qe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=n.tr.step(l);c.setSelection(lg(s,"end")?$t.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):Tt.create(c.doc,o.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||i.node(a-1).childCount>1)break}return s.isAtom&&o.depth==i.depth-1?(e&&e(n.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},e8e=(n,e,r)=>{let i=Ite(n,r);if(!i)return!1;let o=Yj(i);return o?t8e(n,o,e):!1};function t8e(n,e,r){let i=e.nodeBefore,o=i,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let a=e.nodeAfter,l=a,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let u=w3(n.doc,s,c,Qe.empty);if(!u||u.from!=s||u instanceof mi&&u.slice.size>=c-s)return!1;if(r){let d=n.tr.step(u);d.setSelection(xt.create(d.doc,s)),r(d.scrollIntoView())}return!0}function lg(n,e,r=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(r&&i.childCount!=1)return!1}return!1}const Lte=(n,e,r)=>{let{$head:i,empty:o}=n.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(r?!r.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=Yj(i)}let a=s&&s.nodeBefore;return!a||!Tt.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Tt.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Yj(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function n8e(n,e){let{$cursor:r}=n.selection;return!r||(e?!e.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)?null:r}const r8e=(n,e,r)=>{let i=n8e(n,r);if(!i)return!1;let o=zte(i);if(!o)return!1;let s=o.nodeAfter;if($te(n,o,e,1))return!0;if(i.parent.content.size==0&&(lg(s,"start")||Tt.isSelectable(s))){let a=w3(n.doc,i.before(),i.after(),Qe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(lg(s,"start")?$t.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):Tt.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&o.depth==i.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},i8e=(n,e,r)=>{let{$head:i,empty:o}=n.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(r?!r.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=zte(i)}let a=s&&s.nodeAfter;return!a||!Tt.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Tt.create(n.doc,s.pos)).scrollIntoView()),!0)};function zte(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let r=n.node(e);if(n.index(e)+1<r.childCount)return n.doc.resolve(n.after(e+1));if(r.type.spec.isolating)break}return null}const o8e=(n,e)=>{let{$head:r,$anchor:i}=n.selection;return!r.parent.type.spec.code||!r.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Zj(n){for(let e=0;e<n.edgeCount;e++){let{type:r}=n.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Fte=(n,e)=>{let{$head:r,$anchor:i}=n.selection;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;let o=r.node(-1),s=r.indexAfter(-1),a=Zj(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let l=r.after(),c=n.tr.replaceWith(l,l,a.createAndFill());c.setSelection($t.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},s8e=(n,e)=>{let r=n.selection,{$from:i,$to:o}=r;if(r instanceof cs||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=Zj(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,l=n.tr.insert(a,s.createAndFill());l.setSelection(xt.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},a8e=(n,e)=>{let{$cursor:r}=n.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(Dv(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let i=r.blockRange(),o=i&&x3(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)};function l8e(n){return(e,r)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof Tt&&e.selection.node.isBlock)return!i.parentOffset||!Dv(e.doc,i.pos)?!1:(r&&r(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],a,l,c=!1,u=!1;for(let m=i.depth;;m--)if(i.node(m).isBlock){c=i.end(m)==i.pos+(i.depth-m),u=i.start(m)==i.pos-(i.depth-m),l=Zj(i.node(m-1).contentMatchAt(i.indexAfter(m-1))),s.unshift(c&&l?{type:l}:null),a=m;break}else{if(m==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof xt||e.selection instanceof cs)&&d.deleteSelection();let h=d.mapping.map(i.pos),f=Dv(d.doc,h,s.length,s);if(f||(s[0]=l?{type:l}:null,f=Dv(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!c&&u&&i.node(a).type!=l){let m=d.mapping.map(i.before(a)),v=d.doc.resolve(m);l&&i.node(a-1).canReplaceWith(v.index(),v.index()+1,l)&&d.setNodeMarkup(d.mapping.map(i.before(a)),l)}return r&&r(d.scrollIntoView()),!0}}const c8e=l8e(),u8e=(n,e)=>(e&&e(n.tr.setSelection(new cs(n.doc))),!0);function d8e(n,e,r){let i=e.nodeBefore,o=e.nodeAfter,s=e.index();return!i||!o||!i.type.compatibleContent(o.type)?!1:!i.content.size&&e.parent.canReplace(s-1,s)?(r&&r(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||b3(n.doc,e.pos))?!1:(r&&r(n.tr.join(e.pos).scrollIntoView()),!0)}function $te(n,e,r,i){let o=e.nodeBefore,s=e.nodeAfter,a,l,c=o.type.spec.isolating||s.type.spec.isolating;if(!c&&d8e(n,e,r))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(a=(l=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&l.matchType(a[0]||s.type).validEnd){if(r){let m=e.pos+s.nodeSize,v=Ue.empty;for(let w=a.length-1;w>=0;w--)v=Ue.from(a[w].create(null,v));v=Ue.from(o.copy(v));let x=n.tr.step(new no(e.pos-1,m,e.pos,m,new Qe(v,1,0),a.length,!0)),b=x.doc.resolve(m+2*a.length);b.nodeAfter&&b.nodeAfter.type==o.type&&b3(x.doc,b.pos)&&x.join(b.pos),r(x.scrollIntoView())}return!0}let d=s.type.spec.isolating||i>0&&c?null:$t.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&x3(h);if(f!=null&&f>=e.depth)return r&&r(n.tr.lift(h,f).scrollIntoView()),!0;if(u&&lg(s,"start",!0)&&lg(o,"end")){let m=o,v=[];for(;v.push(m),!m.isTextblock;)m=m.lastChild;let x=s,b=1;for(;!x.isTextblock;x=x.firstChild)b++;if(m.canReplace(m.childCount,m.childCount,x.content)){if(r){let w=Ue.empty;for(let _=v.length-1;_>=0;_--)w=Ue.from(v[_].copy(w));let S=n.tr.step(new no(e.pos-v.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new Qe(w,v.length,0),0,!0));r(S.scrollIntoView())}return!0}}return!1}function Bte(n){return function(e,r){let i=e.selection,o=n<0?i.$from:i.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(r&&r(e.tr.setSelection(xt.create(e.doc,n<0?o.start(s):o.end(s)))),!0):!1}}const h8e=Bte(-1),f8e=Bte(1);function Xj(n,e=null){return function(r,i){let{$from:o,$to:s}=r.selection,a=o.blockRange(s),l=a&&Wj(a,n,e);return l?(i&&i(r.tr.wrap(a,l).scrollIntoView()),!0):!1}}function Cx(n,e=null){return function(r,i){let o=!1;for(let s=0;s<r.selection.ranges.length&&!o;s++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[s];r.doc.nodesBetween(a,l,(c,u)=>{if(o)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)o=!0;else{let d=r.doc.resolve(u),h=d.index();o=d.parent.canReplaceWith(h,h+1,n)}})}if(!o)return!1;if(i){let s=r.tr;for(let a=0;a<r.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[a];s.setBlockType(l,c,n,e)}i(s.scrollIntoView())}return!0}}function p8e(n,e,r,i){for(let o=0;o<e.length;o++){let{$from:s,$to:a}=e[o],l=s.depth==0?n.inlineContent&&n.type.allowsMarkType(r):!1;if(n.nodesBetween(s.pos,a.pos,(c,u)=>{if(l)return!1;l=c.inlineContent&&c.type.allowsMarkType(r)}),l)return!0}return!1}function S3(n,e=null,r){return function(i,o){let{empty:s,$cursor:a,ranges:l}=i.selection;if(s&&!a||!p8e(i.doc,l,n))return!1;if(o)if(a)n.isInSet(i.storedMarks||a.marks())?o(i.tr.removeStoredMark(n)):o(i.tr.addStoredMark(n.create(e)));else{let c,u=i.tr;c=!l.some(d=>i.doc.rangeHasMark(d.$from.pos,d.$to.pos,n));for(let d=0;d<l.length;d++){let{$from:h,$to:f}=l[d];if(!c)u.removeMark(h.pos,f.pos,n);else{let m=h.pos,v=f.pos,x=h.nodeAfter,b=f.nodeBefore,w=x&&x.isText?/^\s*/.exec(x.text)[0].length:0,S=b&&b.isText?/\s*$/.exec(b.text)[0].length:0;m+w<v&&(m+=w,v-=S),u.addMark(m,v,n.create(e))}}o(u.scrollIntoView())}return!0}}function Bg(...n){return function(e,r,i){for(let o=0;o<n.length;o++)if(n[o](e,r,i))return!0;return!1}}let Y_=Bg(Gj,Rte,Lte),EH=Bg(Gj,r8e,i8e);const ku={Enter:Bg(o8e,s8e,a8e,c8e),"Mod-Enter":Fte,Backspace:Y_,"Mod-Backspace":Y_,"Shift-Backspace":Y_,Delete:EH,"Mod-Delete":EH,"Mod-a":u8e},Hte={"Ctrl-h":ku.Backspace,"Alt-Backspace":ku["Mod-Backspace"],"Ctrl-d":ku.Delete,"Ctrl-Alt-Backspace":ku["Mod-Delete"],"Alt-Delete":ku["Mod-Delete"],"Alt-d":ku["Mod-Delete"],"Ctrl-a":h8e,"Ctrl-e":f8e};for(let n in ku)Hte[n]=ku[n];const m8e=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,g8e=m8e?Hte:ku;class fs{constructor(e,r,i={}){this.match=e,this.match=e,this.handler=typeof r=="string"?y8e(r):r,this.undoable=i.undoable!==!1,this.inCode=i.inCode||!1,this.inCodeMark=i.inCodeMark!==!1}}function y8e(n){return function(e,r,i,o){let s=n;if(r[1]){let a=r[0].lastIndexOf(r[1]);s+=r[0].slice(a+r[1].length),i+=a;let l=i-o;l>0&&(s=r[0].slice(a-l,a)+s,i=o)}return e.tr.insertText(s,i,o)}}const v8e=(n,e)=>{let r=n.plugins;for(let i=0;i<r.length;i++){let o=r[i],s;if(o.spec.isInputRules&&(s=o.getState(n))){if(e){let a=n.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c--)a.step(l.steps[c].invert(l.docs[c]));if(s.text){let c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,c))}else a.delete(s.from,s.to);e(a)}return!0}}return!1};new fs(/--$/,"",{inCodeMark:!1});new fs(/\.\.\.$/,"",{inCodeMark:!1});new fs(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new fs(/"$/,"",{inCodeMark:!1});new fs(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new fs(/'$/,"",{inCodeMark:!1});function Jj(n,e,r=null,i){return new fs(n,(o,s,a,l)=>{let c=r instanceof Function?r(s):r,u=o.tr.delete(a,l),d=u.doc.resolve(a),h=d.blockRange(),f=h&&Wj(h,e,c);if(!f)return null;u.wrap(h,f);let m=u.doc.resolve(a-1).nodeBefore;return m&&m.type==e&&b3(u.doc,a-1)&&(!i||i(s,m))&&u.join(a-1),u})}function Qj(n,e,r=null){return new fs(n,(i,o,s,a)=>{let l=i.doc.resolve(s),c=r instanceof Function?r(o):r;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),e)?i.tr.delete(s,a).setBlockType(s,s,e,c):null})}const Wh=typeof navigator<"u"?navigator:null,NH=typeof document<"u"?document:null,lf=Wh&&Wh.userAgent||"",Y9=/Edge\/(\d+)/.exec(lf),qte=/MSIE \d/.exec(lf),Z9=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lf),C3=!!(qte||Z9||Y9),x8e=qte?document.documentMode:Z9?+Z9[1]:Y9?+Y9[1]:0,Vte=!C3&&/gecko\/(\d+)/i.test(lf),b8e=Vte&&+(/Firefox\/(\d+)/.exec(lf)||[0,0])[1],X9=!C3&&/Chrome\/(\d+)/.exec(lf),w8e=!!X9,k8e=X9?+X9[1]:0,Wte=!C3&&!!Wh&&/Apple Computer/.test(Wh.vendor),Ute=Wte&&(/Mobile\/\w+/.test(lf)||!!Wh&&Wh.maxTouchPoints>2),S8e=Ute||(Wh?/Mac/.test(Wh.platform):!1),C8e=/Android \d/.test(lf),Kte=!!NH&&"webkitFontSmoothing"in NH.documentElement.style,_8e=Kte?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var Z2=Object.freeze({__proto__:null,android:C8e,chrome:w8e,chrome_version:k8e,gecko:Vte,gecko_version:b8e,ie:C3,ie_version:x8e,ios:Ute,mac:S8e,safari:Wte,webkit:Kte,webkit_version:_8e});function Z_(n,e,r,i,o,s){if(n.composing)return!1;const a=n.state,l=a.doc.resolve(e);if(l.parent.type.spec.code)return!1;const c=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,void 0,"")+i;for(let u of o){const d=u,h=d.match.exec(c),f=h&&h[0]&&d.handler(a,h,e-(h[0].length-i.length),r);if(f)return d.undoable!==!1&&f.setMeta(s,{transform:f,from:e,to:r,text:i}),n.dispatch(f),!0}return!1}const A8e=new lr("MILKDOWN_CUSTOM_INPUTRULES");function T8e({rules:n}){const e=new ar({key:A8e,isInputRules:!0,state:{init(){return null},apply(r,i){const o=r.getMeta(this);return o||(r.selectionSet||r.docChanged?null:i)}},props:{handleTextInput(r,i,o,s){return Z_(r,i,o,s,n,e)},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:i}=r.state.selection;i&&Z_(r,i.pos,i.pos,"",n,e)}),!1)},handleKeyDown(r,i){if(i.key!=="Enter")return!1;const{$cursor:o}=r.state.selection;return o?Z_(r,o.pos,o.pos,`
`,n,e):!1}}});return e}function Ob(n,e,r={}){return new fs(n,(i,o,s,a)=>{var l,c,u,d;const{tr:h}=i,f=o.length;let m=o[f-1],v=o[0],x=[],b=a;const w={group:m,fullMatch:v,start:s,end:a},S=(l=r.updateCaptured)==null?void 0:l.call(r,w);if(Object.assign(w,S),{group:m,fullMatch:v,start:s,end:a}=w,v===null||m?.trim()==="")return null;if(m){const _=v.search(/\S/),P=s+v.indexOf(m),A=P+m.length;x=(c=h.storedMarks)!=null?c:[],A<a&&h.delete(A,a),P>s&&h.delete(s+_,P),b=s+_+m.length;const T=(u=r.getAttr)==null?void 0:u.call(r,o);h.addMark(s,b,e.create(T)),h.setStoredMarks(x),(d=r.beforeDispatch)==null||d.call(r,{match:o,start:s,end:a,tr:h})}return h})}function P8e(n,e,r={}){return new fs(n,(i,o,s,a)=>{var l,c,u;const{tr:d}=i;let h=o[1],f=o[0];const m={group:h,fullMatch:f,start:s,end:a},v=(l=r.updateCaptured)==null?void 0:l.call(r,m);if(Object.assign(m,v),{group:h,fullMatch:f,start:s,end:a}=m,f===null||!h||h.trim()==="")return null;const x=(c=r.getAttr)==null?void 0:c.call(r,o),b=e.createAndFill(x);return b&&(d.replaceRangeWith(e.isBlock?d.doc.resolve(s).before():s,a,b),(u=r.beforeDispatch)==null||u.call(r,{match:[f,h??""],start:s,end:a,tr:d})),d})}var M8e=Object.defineProperty,E8e=Object.defineProperties,N8e=Object.getOwnPropertyDescriptors,jH=Object.getOwnPropertySymbols,j8e=Object.prototype.hasOwnProperty,O8e=Object.prototype.propertyIsEnumerable,OH=(n,e,r)=>e in n?M8e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,D8e=(n,e)=>{for(var r in e||(e={}))j8e.call(e,r)&&OH(n,r,e[r]);if(jH)for(var r of jH(e))O8e.call(e,r)&&OH(n,r,e[r]);return n},I8e=(n,e)=>E8e(n,N8e(e));function DH(n=0,e=0,r=0){return Math.min(Math.max(n,e),r)}function _3(n,e,r){const o=n.state.doc.content.size,s=DH(e,0,o),a=DH(r,0,o),l=n.coordsAtPos(s),c=n.coordsAtPos(a,-1),u=Math.min(l.top,c.top),d=Math.max(l.bottom,c.bottom),h=Math.min(l.left,c.left),f=Math.max(l.right,c.right),m=f-h,v=d-u,w={top:u,bottom:d,left:h,right:f,width:m,height:v,x:h,y:u};return I8e(D8e({},w),{toJSON:()=>w})}function Gte(n){return Object.assign(Object.create(n),n).setTime(Date.now())}function R8e(n,e){return Array.isArray(n)&&n.includes(e.type)||e.type===n}function L8e(n){if(n.content.childCount===1){const e=n.content.firstChild;if(e?.type.name==="text"&&e.marks.length===0)return e;if(e?.type.name==="paragraph"&&e.childCount===1){const r=e.firstChild;if(r?.type.name==="text"&&r.marks.length===0)return r}}return!1}function kc(n){return e=>{for(let r=e.depth;r>0;r-=1){const i=e.node(r);if(n(i)){const o=e.before(r),s=e.after(r);return{from:o,to:s,node:i}}}}}function z8e(n,e){return kc(r=>r.type===e)(n)}function F8e(n,e){const r=e.nodes[n];if(!r)throw b5e("node",n);return r}function Yte(n){return e=>{for(let r=e.depth;r>0;r--){const i=e.node(r);if(n(i))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:i}}}}function $8e(n){return e=>Yte(n)(e.$from)}function B8e(n,e){if(!(n instanceof Tt))return;const{node:r,$from:i}=n;if(R8e(e,r))return{node:r,pos:i.pos,start:i.start(i.depth),depth:i.depth}}const Zte=(n,e)=>{const{selection:r,doc:i}=n;if(r instanceof Tt)return{hasNode:r.node.type===e,pos:r.from,target:r.node};const{from:o,to:s}=r;let a=!1,l=-1,c=null;return i.nodesBetween(o,s,(u,d)=>c?!1:u.type===e?(a=!0,l=d,c=u,!1):!0),{hasNode:a,pos:l,target:c}};var Yu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_x={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},H8e=typeof navigator<"u"&&/Mac/.test(navigator.platform),q8e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ni=0;Ni<10;Ni++)Yu[48+Ni]=Yu[96+Ni]=String(Ni);for(var Ni=1;Ni<=24;Ni++)Yu[Ni+111]="F"+Ni;for(var Ni=65;Ni<=90;Ni++)Yu[Ni]=String.fromCharCode(Ni+32),_x[Ni]=String.fromCharCode(Ni);for(var X_ in Yu)_x.hasOwnProperty(X_)||(_x[X_]=Yu[X_]);function Xte(n){var e=H8e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||q8e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",r=!e&&n.key||(n.shiftKey?_x:Yu)[n.keyCode]||n.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const V8e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),W8e=typeof navigator<"u"&&/Win/.test(navigator.platform);function U8e(n){let e=n.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let i,o,s,a;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))V8e?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),a&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function K8e(n){let e=Object.create(null);for(let r in n)e[U8e(r)]=n[r];return e}function J_(n,e,r=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),r&&e.shiftKey&&(n="Shift-"+n),n}function Jte(n){return new ar({props:{handleKeyDown:eO(n)}})}function eO(n){let e=K8e(n);return function(r,i){let o=Xte(i),s,a=e[J_(o,i)];if(a&&a(r.state,r.dispatch,r))return!0;if(o.length==1&&o!=" "){if(i.shiftKey){let l=e[J_(o,i,!1)];if(l&&l(r.state,r.dispatch,r))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(W8e&&i.ctrlKey&&i.altKey)&&(s=Yu[i.keyCode])&&s!=o){let l=e[J_(s,i)];if(l&&l(r.state,r.dispatch,r))return!0}}return!1}}const ji=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},cg=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let J9=null;const bu=function(n,e,r){let i=J9||(J9=document.createRange());return i.setEnd(n,r??n.nodeValue.length),i.setStart(n,e||0),i},G8e=function(){J9=null},Xp=function(n,e,r,i){return r&&(IH(n,e,r,i,-1)||IH(n,e,r,i,1))},Y8e=/^(img|br|input|textarea|hr)$/i;function IH(n,e,r,i,o){for(var s;;){if(n==r&&e==i)return!0;if(e==(o<0?0:pa(n))){let a=n.parentNode;if(!a||a.nodeType!=1||Db(n)||Y8e.test(n.nodeName)||n.contentEditable=="false")return!1;e=ji(n)+(o<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(o<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=o;else return!1;else n=a,e=o<0?pa(n):0}else return!1}}function pa(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Z8e(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=pa(n)}else if(n.parentNode&&!Db(n))e=ji(n),n=n.parentNode;else return null}}function X8e(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Db(n))e=ji(n)+1,n=n.parentNode;else return null}}function J8e(n,e,r){for(let i=e==0,o=e==pa(n);i||o;){if(n==r)return!0;let s=ji(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,o=o&&s==pa(n)}}function Db(n){let e;for(let r=n;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const A3=function(n){return n.focusNode&&Xp(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function lp(n,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=n,r.key=r.code=e,r}function Q8e(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function e_e(n,e,r){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,r);if(i)return{node:i.offsetNode,offset:Math.min(pa(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,r);if(i)return{node:i.startContainer,offset:Math.min(pa(i.startContainer),i.startOffset)}}}const Tc=typeof navigator<"u"?navigator:null,RH=typeof document<"u"?document:null,cf=Tc&&Tc.userAgent||"",Q9=/Edge\/(\d+)/.exec(cf),Qte=/MSIE \d/.exec(cf),eM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cf),us=!!(Qte||eM||Q9),Rh=Qte?document.documentMode:eM?+eM[1]:Q9?+Q9[1]:0,Aa=!us&&/gecko\/(\d+)/i.test(cf);Aa&&+(/Firefox\/(\d+)/.exec(cf)||[0,0])[1];const tM=!us&&/Chrome\/(\d+)/.exec(cf),vi=!!tM,ene=tM?+tM[1]:0,zi=!us&&!!Tc&&/Apple Computer/.test(Tc.vendor),ug=zi&&(/Mobile\/\w+/.test(cf)||!!Tc&&Tc.maxTouchPoints>2),da=ug||(Tc?/Mac/.test(Tc.platform):!1),tne=Tc?/Win/.test(Tc.platform):!1,ju=/Android \d/.test(cf),Ib=!!RH&&"webkitFontSmoothing"in RH.documentElement.style,t_e=Ib?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function n_e(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function au(n,e){return typeof n=="number"?n:n[e]}function r_e(n){let e=n.getBoundingClientRect(),r=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*r,top:e.top,bottom:e.top+n.clientHeight*i}}function LH(n,e,r){let i=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=r||n.dom;a;){if(a.nodeType!=1){a=cg(a);continue}let l=a,c=l==s.body,u=c?n_e(s):r_e(l),d=0,h=0;if(e.top<u.top+au(i,"top")?h=-(u.top-e.top+au(o,"top")):e.bottom>u.bottom-au(i,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+au(o,"top")-u.top:e.bottom-u.bottom+au(o,"bottom")),e.left<u.left+au(i,"left")?d=-(u.left-e.left+au(o,"left")):e.right>u.right-au(i,"right")&&(d=e.right-u.right+au(o,"right")),d||h)if(c)s.defaultView.scrollBy(d,h);else{let m=l.scrollLeft,v=l.scrollTop;h&&(l.scrollTop+=h),d&&(l.scrollLeft+=d);let x=l.scrollLeft-m,b=l.scrollTop-v;e={left:e.left-x,top:e.top-b,right:e.right-x,bottom:e.bottom-b}}let f=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(f))break;a=f=="absolute"?a.offsetParent:cg(a)}}function i_e(n){let e=n.dom.getBoundingClientRect(),r=Math.max(0,e.top),i,o;for(let s=(e.left+e.right)/2,a=r+1;a<Math.min(innerHeight,e.bottom);a+=5){let l=n.root.elementFromPoint(s,a);if(!l||l==n.dom||!n.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=r-20){i=l,o=c.top;break}}return{refDOM:i,refTop:o,stack:nne(n.dom)}}function nne(n){let e=[],r=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=r);i=cg(i));return e}function o_e({refDOM:n,refTop:e,stack:r}){let i=n?n.getBoundingClientRect().top:0;rne(r,i==0?0:i-e)}function rne(n,e){for(let r=0;r<n.length;r++){let{dom:i,top:o,left:s}=n[r];i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let i0=null;function s_e(n){if(n.setActive)return n.setActive();if(i0)return n.focus(i0);let e=nne(n);n.focus(i0==null?{get preventScroll(){return i0={preventScroll:!0},!0}}:void 0),i0||(i0=!1,rne(e,0))}function ine(n,e){let r,i=2e8,o,s=0,a=e.top,l=e.top,c,u;for(let d=n.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=bu(d).getClientRects();else continue;for(let m=0;m<f.length;m++){let v=f[m];if(v.top<=a&&v.bottom>=l){a=Math.max(v.bottom,a),l=Math.min(v.top,l);let x=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(x<i){r=d,i=x,o=x&&r.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,d.nodeType==1&&x&&(s=h+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=d,u={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!r&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(s=h+1)}}return!r&&c&&(r=c,o=u,i=0),r&&r.nodeType==3?a_e(r,o):!r||i&&r.nodeType==1?{node:n,offset:s}:ine(r,o)}function a_e(n,e){let r=n.nodeValue.length,i=document.createRange(),o;for(let s=0;s<r;s++){i.setEnd(n,s+1),i.setStart(n,s);let a=ch(i,1);if(a.top!=a.bottom&&tO(e,a)){o={node:n,offset:s+(e.left>=(a.left+a.right)/2?1:0)};break}}return i.detach(),o||{node:n,offset:0}}function tO(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function l_e(n,e){let r=n.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<n.getBoundingClientRect().left?r:n}function c_e(n,e,r){let{node:i,offset:o}=ine(e,r),s=-1;if(i.nodeType==1&&!i.firstChild){let a=i.getBoundingClientRect();s=a.left!=a.right&&r.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(i,o,s)}function u_e(n,e,r,i){let o=-1;for(let s=e,a=!1;s!=n.dom;){let l=n.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!a&&c.left>i.left||c.top>i.top?o=l.posBefore:(!a&&c.right<i.left||c.bottom<i.top)&&(o=l.posAfter),a=!0),!l.contentDOM&&o<0&&!l.node.isText))return(l.node.isBlock?i.top<(c.top+c.bottom)/2:i.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,r,-1)}function one(n,e,r){let i=n.childNodes.length;if(i&&r.top<r.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-r.top)/(r.bottom-r.top))-2)),s=o;;){let a=n.childNodes[s];if(a.nodeType==1){let l=a.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(tO(e,u))return one(a,e,u)}}if((s=(s+1)%i)==o)break}return n}function d_e(n,e){let r=n.dom.ownerDocument,i,o=0,s=e_e(r,e.left,e.top);s&&({node:i,offset:o}=s);let a=(n.root.elementFromPoint?n.root:r).elementFromPoint(e.left,e.top),l;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let u=n.dom.getBoundingClientRect();if(!tO(e,u)||(a=one(n.dom,e,u),!a))return null}if(zi)for(let u=a;i&&u;u=cg(u))u.draggable&&(i=void 0);if(a=l_e(a,e),i){if(Aa&&i.nodeType==1&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){let d=i.childNodes[o],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&o++}let u;Ib&&o&&i.nodeType==1&&(u=i.childNodes[o-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&o--,i==n.dom&&o==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(o==0||i.nodeType!=1||i.childNodes[o-1].nodeName!="BR")&&(l=u_e(n,i,o,e))}l==null&&(l=c_e(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function zH(n){return n.top<n.bottom||n.left<n.right}function ch(n,e){let r=n.getClientRects();if(r.length){let i=r[e<0?0:r.length-1];if(zH(i))return i}return Array.prototype.find.call(r,zH)||n.getBoundingClientRect()}const h_e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sne(n,e,r){let{node:i,offset:o,atom:s}=n.docView.domFromPos(e,r<0?-1:1),a=Ib||Aa;if(i.nodeType==3)if(a&&(h_e.test(i.nodeValue)||(r<0?!o:o==i.nodeValue.length))){let c=ch(bu(i,o,o),r);if(Aa&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let u=ch(bu(i,o-1,o-1),-1);if(u.top==c.top){let d=ch(bu(i,o,o+1),-1);if(d.top!=c.top)return ty(d,d.left<u.left)}}return c}else{let c=o,u=o,d=r<0?1:-1;return r<0&&!o?(u++,d=-1):r>=0&&o==i.nodeValue.length?(c--,d=1):r<0?c--:u++,ty(ch(bu(i,c,u),d),d<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(r<0||o==pa(i))){let c=i.childNodes[o-1];if(c.nodeType==1)return Q_(c.getBoundingClientRect(),!1)}if(s==null&&o<pa(i)){let c=i.childNodes[o];if(c.nodeType==1)return Q_(c.getBoundingClientRect(),!0)}return Q_(i.getBoundingClientRect(),r>=0)}if(s==null&&o&&(r<0||o==pa(i))){let c=i.childNodes[o-1],u=c.nodeType==3?bu(c,pa(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return ty(ch(u,1),!1)}if(s==null&&o<pa(i)){let c=i.childNodes[o];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?bu(c,0,a?0:1):c.nodeType==1?c:null:null;if(u)return ty(ch(u,-1),!0)}return ty(ch(i.nodeType==3?bu(i):i,-r),r>=0)}function ty(n,e){if(n.width==0)return n;let r=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:r,right:r}}function Q_(n,e){if(n.height==0)return n;let r=e?n.top:n.bottom;return{top:r,bottom:r,left:n.left,right:n.right}}function ane(n,e,r){let i=n.state,o=n.root.activeElement;i!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return r()}finally{i!=e&&n.updateState(i),o!=n.dom&&o&&o.focus()}}function f_e(n,e,r){let i=e.selection,o=r=="up"?i.$from:i.$to;return ane(n,e,()=>{let{node:s}=n.docView.domFromPos(o.pos,r=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let a=sne(n,o.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=bu(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(r=="up"?a.top-d.top>(d.bottom-a.top)*2:d.bottom-a.bottom>(a.bottom-d.top)*2))return!1}}return!0})}const p_e=/[\u0590-\u08ac]/;function m_e(n,e,r){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,s=!o,a=o==i.parent.content.size,l=n.domSelection();return l?!p_e.test(i.parent.textContent)||!l.modify?r=="left"||r=="backward"?s:a:ane(n,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:h}=n.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",r,"character");let m=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:v,focusOffset:x}=n.domSelectionRange(),b=v&&!m.contains(v.nodeType==1?v:v.parentNode)||c==v&&u==x;try{l.collapse(d,h),c&&(c!=d||u!=h)&&l.extend&&l.extend(c,u)}catch{}return f!=null&&(l.caretBidiLevel=f),b}):i.pos==i.start()||i.pos==i.end()}let FH=null,$H=null,BH=!1;function g_e(n,e,r){return FH==e&&$H==r?BH:(FH=e,$H=r,BH=r=="up"||r=="down"?f_e(n,e,r):m_e(n,e,r))}const Ta=0,HH=1,hp=2,Pc=3;class Rb{constructor(e,r,i,o){this.parent=e,this.children=r,this.dom=i,this.contentDOM=o,this.dirty=Ta,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,i=this.posAtStart;;r++){let o=this.children[r];if(o==e)return i;i+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let s,a;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=r>ji(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let i=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),a;if(s&&(!r||s.node))if(i&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))i=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let i=r;i;i=i.parent)if(i==this)return r}posFromDOM(e,r,i){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,r,i)}return-1}descAt(e){for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.size;if(i==e&&s!=i){for(;!o.border&&o.children.length;)for(let a=0;a<o.children.length;a++){let l=o.children[a];if(l.size){o=l;break}}return o}if(e<s)return o.descAt(e-i-o.border);i=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,o=0;for(let s=0;i<this.children.length;i++){let a=this.children[i],l=s+a.size;if(l>e||a instanceof cne){o=e-s;break}s=l}if(o)return this.children[i].domFromPos(o-this.children[i].border,r);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof lne&&s.side>=0;i--);if(r<=0){let s,a=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,a=!1);return s&&r&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?ji(s.dom)+1:0}}else{let s,a=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?ji(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let a=i,l=0;;l++){let c=this.children[l],u=a+c.size;if(o==-1&&e<=u){let d=a+c.border;if(e>=d&&r<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,r,d);e=a;for(let h=l;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=ji(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(u>r||l==this.children.length-1)){r=u;for(let d=l+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=ji(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=u}return{node:this.contentDOM,from:e,to:r,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:i}=this.domFromPos(e,0);if(r.nodeType!=1||i==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[i]}setSelection(e,r,i,o=!1){let s=Math.min(e,r),a=Math.max(e,r);for(let m=0,v=0;m<this.children.length;m++){let x=this.children[m],b=v+x.size;if(s>v&&a<b)return x.setSelection(e-v-x.border,r-v-x.border,i,o);v=b}let l=this.domFromPos(e,e?-1:1),c=r==e?l:this.domFromPos(r,r?-1:1),u=i.root.getSelection(),d=i.domSelectionRange(),h=!1;if((Aa||zi)&&e==r){let{node:m,offset:v}=l;if(m.nodeType==3){if(h=!!(v&&m.nodeValue[v-1]==`
`),h&&v==m.nodeValue.length)for(let x=m,b;x;x=x.parentNode){if(b=x.nextSibling){b.nodeName=="BR"&&(l=c={node:b.parentNode,offset:ji(b)+1});break}let w=x.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let x=m.childNodes[v-1];h=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Aa&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let m=d.focusNode.childNodes[d.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||h&&zi)&&Xp(l.node,l.offset,d.anchorNode,d.anchorOffset)&&Xp(c.node,c.offset,d.focusNode,d.focusOffset))return;let f=!1;if((u.extend||e==r)&&!(h&&Aa)){u.collapse(l.node,l.offset);try{e!=r&&u.extend(c.node,c.offset),f=!0}catch{}}if(!f){if(e>r){let v=l;l=c,c=v}let m=document.createRange();m.setEnd(c.node,c.offset),m.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let i=0,o=0;o<this.children.length;o++){let s=this.children[o],a=i+s.size;if(i==a?e<=a&&r>=i:e<a&&r>i){let l=i+s.border,c=a-s.border;if(e>=l&&r<=c){this.dirty=e==i||r==a?hp:HH,e==l&&r==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Pc:s.markDirty(e-l,r-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?hp:Pc}i=a}this.dirty=hp}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let i=e==1?hp:HH;r.dirty<i&&(r.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class lne extends Rb{constructor(e,r,i,o){let s,a=r.type.toDOM;if(typeof a=="function"&&(a=a(i,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(a.nodeType!=1){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Ta&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class y_e extends Rb{constructor(e,r,i,o){super(e,[],r,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Jp extends Rb{constructor(e,r,i,o,s){super(e,[],i,o),this.mark=r,this.spec=s}static create(e,r,i,o){let s=o.nodeViews[r.type.name],a=s&&s(r,o,i);return(!a||!a.dom)&&(a=bm.renderSpec(document,r.type.spec.toDOM(r,i),null,r.attrs)),new Jp(e,r,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Pc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Pc&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Ta){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Ta}}slice(e,r,i){let o=Jp.create(this.parent,this.mark,!0,i),s=this.children,a=this.size;r<a&&(s=rM(s,r,a,i)),e>0&&(s=rM(s,0,e,i));for(let l=0;l<s.length;l++)s[l].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Lh extends Rb{constructor(e,r,i,o,s,a,l,c,u){super(e,[],s,a),this.node=r,this.outerDeco=i,this.innerDeco=o,this.nodeDOM=l}static create(e,r,i,o,s,a){let l=s.nodeViews[r.type.name],c,u=l&&l(r,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},i,o),d=u&&u.dom,h=u&&u.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=bm.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=hne(d,i,r),u?c=new v_e(e,r,i,o,d,h||null,f,u,s,a+1):r.isText?new T3(e,r,i,o,d,f,s):new Lh(e,r,i,o,d,h||null,f,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let i=this.children[r];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ue.empty)}return e}matchesNode(e,r,i){return this.dirty==Ta&&e.eq(this.node)&&GS(r,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let i=this.node.inlineContent,o=r,s=e.composing?this.localCompositionInfo(e,r):null,a=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new b_e(this,a&&a.node,e);S_e(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?c.syncToMarks(u.spec.marks,i,e,d):u.type.side>=0&&!h&&c.syncToMarks(d==this.node.childCount?Yt.none:this.node.child(d).marks,i,e,d),c.placeWidget(u,e,o)},(u,d,h,f)=>{c.syncToMarks(u.marks,i,e,f);let m;c.findNodeMatch(u,d,h,f)||l&&e.state.selection.from>o&&e.state.selection.to<o+u.nodeSize&&(m=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,d,h,m,e)||c.updateNextNode(u,d,h,e,f,o)||c.addNode(u,d,h,e,o),o+=u.nodeSize}),c.syncToMarks([],i,e,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==hp)&&(a&&this.protectLocalComposition(e,a),une(this.contentDOM,this.children,e),ug&&C_e(this.dom))}localCompositionInfo(e,r){let{from:i,to:o}=e.state.selection;if(!(e.state.selection instanceof xt)||i<r||o>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=__e(this.node.content,a,i-r,o-r);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:i,text:o}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new y_e(this,s,r,o);e.input.compositionNodes.push(a),this.children=rM(this.children,i,i+o.length,e,a)}update(e,r,i,o){return this.dirty==Pc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,i,o),!0)}updateInner(e,r,i,o){this.updateOuterDeco(r),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Ta}updateOuterDeco(e){if(GS(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=dne(this.dom,this.nodeDOM,nM(this.outerDeco,this.node,r),nM(e,this.node,r)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function qH(n,e,r,i,o){hne(i,e,n);let s=new Lh(void 0,n,e,r,i,i,i,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class T3 extends Lh{constructor(e,r,i,o,s,a,l){super(e,r,i,o,s,null,a,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,i,o){return this.dirty==Pc||this.dirty!=Ta&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Ta||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Ta,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,i){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,i){let o=this.node.cut(e,r),s=document.createTextNode(o.text);return new T3(this.parent,o,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Pc)}get domAtom(){return!1}isText(e){return this.node.text==e}}class cne extends Rb{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ta&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class v_e extends Lh{constructor(e,r,i,o,s,a,l,c,u,d){super(e,r,i,o,s,a,l,u,d),this.spec=c}update(e,r,i,o){if(this.dirty==Pc)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,i);return s&&this.updateInner(e,r,i,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,i,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,i,o){this.spec.setSelection?this.spec.setSelection(e,r,i.root):super.setSelection(e,r,i,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function une(n,e,r){let i=n.firstChild,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=a.dom;if(l.parentNode==n){for(;l!=i;)i=VH(i),o=!0;i=i.nextSibling}else o=!0,n.insertBefore(l,i);if(a instanceof Jp){let c=i?i.previousSibling:n.lastChild;une(a.contentDOM,a.children,r),i=c?c.nextSibling:n.firstChild}}for(;i;)i=VH(i),o=!0;o&&r.trackWrites==n&&(r.trackWrites=null)}const Iv=function(n){n&&(this.nodeName=n)};Iv.prototype=Object.create(null);const fp=[new Iv];function nM(n,e,r){if(n.length==0)return fp;let i=r?fp[0]:new Iv,o=[i];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&o.push(i=new Iv(a.nodeName));for(let l in a){let c=a[l];c!=null&&(r&&o.length==1&&o.push(i=new Iv(e.isInline?"span":"div")),l=="class"?i.class=(i.class?i.class+" ":"")+c:l=="style"?i.style=(i.style?i.style+";":"")+c:l!="nodeName"&&(i[l]=c))}}}return o}function dne(n,e,r,i){if(r==fp&&i==fp)return e;let o=e;for(let s=0;s<i.length;s++){let a=i[s],l=r[s];if(s){let c;l&&l.nodeName==a.nodeName&&o!=n&&(c=o.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(o),l=fp[0]),o=c}x_e(o,l||fp[0],a)}return o}function x_e(n,e,r){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in r)&&n.removeAttribute(i);for(let i in r)i!="class"&&i!="style"&&i!="nodeName"&&r[i]!=e[i]&&n.setAttribute(i,r[i]);if(e.class!=r.class){let i=e.class?e.class.split(" ").filter(Boolean):[],o=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)o.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<o.length;s++)i.indexOf(o[s])==-1&&n.classList.add(o[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=r.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=i.exec(e.style);)n.style.removeProperty(o[1])}r.style&&(n.style.cssText+=r.style)}}function hne(n,e,r){return dne(n,n,fp,nM(e,r,n.nodeType!=1))}function GS(n,e){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].type.eq(e[r].type))return!1;return!0}function VH(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class b_e{constructor(e,r,i){this.lock=r,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=w_e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let i=e;i<r;i++)this.top.children[i].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,i,o){let s=0,a=this.stack.length>>1,l=Math.min(a,e.length);for(;s<l&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=Ta,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let c=-1,u=this.top.children.length;o<this.preMatch.index&&(u=Math.min(this.index+3,u));for(let d=this.index;d<u;d++){let h=this.top.children[d];if(h.matchesMark(e[a])&&!this.isLocked(h.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=Jp.create(this.top,e[a],r,i);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,a++}}findNodeMatch(e,r,i,o){let s=-1,a;if(o>=this.preMatch.index&&(a=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&a.matchesNode(e,r,i))s=this.top.children.indexOf(a,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,r,i)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,i,o,s){let a=this.top.children[o];return a.dirty==Pc&&a.dom==a.contentDOM&&(a.dirty=hp),a.update(e,r,i,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==i)return o}return-1}e=r}}updateNextNode(e,r,i,o,s,a){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Lh){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let d=c.dom,h,f=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Pc&&GS(r,c.outerDeco));if(!f&&c.update(e,r,i,o))return this.destroyBetween(this.index,l),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(c,e,r,i,o,a)))return this.destroyBetween(this.index,l),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=hp,h.updateChildren(o,a+1),h.dirty=Ta),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,i,o,s,a){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!GS(i,e.outerDeco)||!o.eq(e.innerDeco))return null;let l=Lh.create(this.top,r,i,o,s,a);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,r,i,o,s){let a=Lh.create(this.top,e,r,i,o,s);a.contentDOM&&a.updateChildren(o,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,r,i){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new lne(this.top,e,r,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Jp;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof T3)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((zi||vi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let o=new cne(this.top,[],i,null);r!=this.top?r.children.push(o):r.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function w_e(n,e){let r=e,i=r.children.length,o=n.childCount,s=new Map,a=[];e:for(;o>0;){let l;for(;;)if(i){let u=r.children[i-1];if(u instanceof Jp)r=u,i=u.children.length;else{l=u,i--;break}}else{if(r==e)break e;i=r.parent.children.indexOf(r),r=r.parent}let c=l.node;if(c){if(c!=n.child(o-1))break;--o,s.set(l,o),a.push(l)}}return{index:o,matched:s,matches:a.reverse()}}function k_e(n,e){return n.type.side-e.type.side}function S_e(n,e,r,i){let o=e.locals(n),s=0;if(o.length==0){for(let u=0;u<n.childCount;u++){let d=n.child(u);i(d,o,e.forChild(s,d),u),s+=d.nodeSize}return}let a=0,l=[],c=null;for(let u=0;;){let d,h;for(;a<o.length&&o[a].to==s;){let b=o[a++];b.widget&&(d?(h||(h=[d])).push(b):d=b)}if(d)if(h){h.sort(k_e);for(let b=0;b<h.length;b++)r(h[b],u,!!c)}else r(d,u,!!c);let f,m;if(c)m=-1,f=c,c=null;else if(u<n.childCount)m=u,f=n.child(u++);else break;for(let b=0;b<l.length;b++)l[b].to<=s&&l.splice(b--,1);for(;a<o.length&&o[a].from<=s&&o[a].to>s;)l.push(o[a++]);let v=s+f.nodeSize;if(f.isText){let b=v;a<o.length&&o[a].from<b&&(b=o[a].from);for(let w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<v&&(c=f.cut(b-s),f=f.cut(0,b-s),v=b,m=-1)}else for(;a<o.length&&o[a].to<v;)a++;let x=f.isInline&&!f.isLeaf?l.filter(b=>!b.inline):l.slice();i(f,x,e.forChild(s,f),m),s=v}}function C_e(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function __e(n,e,r,i){for(let o=0,s=0;o<n.childCount&&s<=i;){let a=n.child(o++),l=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;o<n.childCount;){let u=n.child(o++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=r){if(s>=i&&c.slice(i-e.length-l,i-l)==e)return i-e.length;let u=l<i?c.lastIndexOf(e,i-l-1):-1;if(u>=0&&u+e.length+l>=r)return l+u;if(r==i&&c.length>=i+e.length-l&&c.slice(i-l,i-l+e.length)==e)return i}}return-1}function rM(n,e,r,i,o){let s=[];for(let a=0,l=0;a<n.length;a++){let c=n[a],u=l,d=l+=c.size;u>=r||d<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,i)),o&&(s.push(o),o=void 0),d>r&&s.push(c.slice(r-u,c.size,i)))}return s}function nO(n,e=null){let r=n.domSelectionRange(),i=n.state.doc;if(!r.focusNode)return null;let o=n.docView.nearestDesc(r.focusNode),s=o&&o.size==0,a=n.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(a<0)return null;let l=i.resolve(a),c,u;if(A3(r)){for(c=a;o&&!o.node;)o=o.parent;let h=o.node;if(o&&h.isAtom&&Tt.isSelectable(h)&&o.parent&&!(h.isInline&&J8e(r.focusNode,r.focusOffset,o.dom))){let f=o.posBefore;u=new Tt(a==f?l:i.resolve(f))}}else{if(r instanceof n.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=a,f=a;for(let m=0;m<r.rangeCount;m++){let v=r.getRangeAt(m);h=Math.min(h,n.docView.posFromDOM(v.startContainer,v.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(h<0)return null;[c,a]=f==n.state.selection.anchor?[f,h]:[h,f],l=i.resolve(a)}else c=n.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null}let d=i.resolve(c);if(!u){let h=e=="pointer"||n.state.selection.head<l.pos&&!s?1:-1;u=rO(n,d,l,h)}return u}function fne(n){return n.editable?n.hasFocus():mne(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Bu(n,e=!1){let r=n.state.selection;if(pne(n,r),!!fne(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&vi){let i=n.domSelectionRange(),o=n.domObserver.currentSelection;if(i.anchorNode&&o.anchorNode&&Xp(i.anchorNode,i.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)T_e(n);else{let{anchor:i,head:o}=r,s,a;WH&&!(r instanceof xt)&&(r.$from.parent.inlineContent||(s=UH(n,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(a=UH(n,r.to))),n.docView.setSelection(i,o,n,e),WH&&(s&&KH(s),a&&KH(a)),r.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&A_e(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const WH=zi||vi&&ene<63;function UH(n,e){let{node:r,offset:i}=n.docView.domFromPos(e,0),o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(zi&&o&&o.contentEditable=="false")return eA(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return eA(o);if(s)return eA(s)}}function eA(n){return n.contentEditable="true",zi&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function KH(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function A_e(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let r=n.domSelectionRange(),i=r.anchorNode,o=r.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(r.anchorNode!=i||r.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!fne(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function T_e(n){let e=n.domSelection();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?e.collapse(r.parentNode,ji(r)+1):e.collapse(r,0),!i&&!n.state.selection.visible&&us&&Rh<=11&&(r.disabled=!0,r.disabled=!1)}function pne(n,e){if(e instanceof Tt){let r=n.docView.descAt(e.from);r!=n.lastSelectedViewDesc&&(GH(n),r&&r.selectNode(),n.lastSelectedViewDesc=r)}else GH(n)}function GH(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function rO(n,e,r,i){return n.someProp("createSelectionBetween",o=>o(n,e,r))||xt.between(e,r,i)}function YH(n){return n.editable&&!n.hasFocus()?!1:mne(n)}function mne(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function P_e(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),r=n.domSelectionRange();return Xp(e.node,e.offset,r.anchorNode,r.anchorOffset)}function iM(n,e){let{$anchor:r,$head:i}=n.selection,o=e>0?r.max(i):r.min(i),s=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return s&&$t.findFrom(s,e)}function fh(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function ZH(n,e,r){let i=n.state.selection;if(i instanceof xt)if(r.indexOf("s")>-1){let{$head:o}=i,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return fh(n,new xt(i.$anchor,a))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=iM(n.state,e);return o&&o instanceof Tt?fh(n,o):!1}else if(!(da&&r.indexOf("m")>-1)){let o=i.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,a;if(!s||s.isText)return!1;let l=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(a=n.docView.descAt(l))&&!a.contentDOM?Tt.isSelectable(s)?fh(n,new Tt(e<0?n.state.doc.resolve(o.pos-s.nodeSize):o)):Ib?fh(n,new xt(n.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Tt&&i.node.isInline)return fh(n,new xt(e>0?i.$to:i.$from));{let o=iM(n.state,e);return o?fh(n,o):!1}}}function YS(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Rv(n,e){let r=n.pmViewDesc;return r&&r.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function o0(n,e){return e<0?M_e(n):E_e(n)}function M_e(n){let e=n.domSelectionRange(),r=e.focusNode,i=e.focusOffset;if(!r)return;let o,s,a=!1;for(Aa&&r.nodeType==1&&i<YS(r)&&Rv(r.childNodes[i],-1)&&(a=!0);;)if(i>0){if(r.nodeType!=1)break;{let l=r.childNodes[i-1];if(Rv(l,-1))o=r,s=--i;else if(l.nodeType==3)r=l,i=r.nodeValue.length;else break}}else{if(gne(r))break;{let l=r.previousSibling;for(;l&&Rv(l,-1);)o=r.parentNode,s=ji(l),l=l.previousSibling;if(l)r=l,i=YS(r);else{if(r=r.parentNode,r==n.dom)break;i=0}}}a?oM(n,r,i):o&&oM(n,o,s)}function E_e(n){let e=n.domSelectionRange(),r=e.focusNode,i=e.focusOffset;if(!r)return;let o=YS(r),s,a;for(;;)if(i<o){if(r.nodeType!=1)break;let l=r.childNodes[i];if(Rv(l,1))s=r,a=++i;else break}else{if(gne(r))break;{let l=r.nextSibling;for(;l&&Rv(l,1);)s=l.parentNode,a=ji(l)+1,l=l.nextSibling;if(l)r=l,i=0,o=YS(r);else{if(r=r.parentNode,r==n.dom)break;i=o=0}}}s&&oM(n,s,a)}function gne(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function N_e(n,e){for(;n&&e==n.childNodes.length&&!Db(n);)e=ji(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let r=n.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;n=r,e=0}}function j_e(n,e){for(;n&&!e&&!Db(n);)e=ji(n),n=n.parentNode;for(;n&&e;){let r=n.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;n=r,e=n.childNodes.length}}function oM(n,e,r){if(e.nodeType!=3){let s,a;(a=N_e(e,r))?(e=a,r=0):(s=j_e(e,r))&&(e=s,r=s.nodeValue.length)}let i=n.domSelection();if(!i)return;if(A3(i)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,r);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&Bu(n)},50)}function XH(n,e){let r=n.state.doc.resolve(e);if(!(vi||tne)&&r.parent.inlineContent){let o=n.coordsAtPos(e);if(e>r.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<r.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function JH(n,e,r){let i=n.state.selection;if(i instanceof xt&&!i.empty||r.indexOf("s")>-1||da&&r.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=iM(n.state,e);if(a&&a instanceof Tt)return fh(n,a)}if(!o.parent.inlineContent){let a=e<0?o:s,l=i instanceof cs?$t.near(a,e):$t.findFrom(a,e);return l?fh(n,l):!1}return!1}function QH(n,e){if(!(n.state.selection instanceof xt))return!0;let{$head:r,$anchor:i,empty:o}=n.state.selection;if(!r.sameParent(i))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),n.dispatch(a),!0}return!1}function eq(n,e,r){n.domObserver.stop(),e.contentEditable=r,n.domObserver.start()}function O_e(n){if(!zi||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=n.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;eq(n,i,"true"),setTimeout(()=>eq(n,i,"false"),20)}return!1}function D_e(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function I_e(n,e){let r=e.keyCode,i=D_e(e);if(r==8||da&&r==72&&i=="c")return QH(n,-1)||o0(n,-1);if(r==46&&!e.shiftKey||da&&r==68&&i=="c")return QH(n,1)||o0(n,1);if(r==13||r==27)return!0;if(r==37||da&&r==66&&i=="c"){let o=r==37?XH(n,n.state.selection.from)=="ltr"?-1:1:-1;return ZH(n,o,i)||o0(n,o)}else if(r==39||da&&r==70&&i=="c"){let o=r==39?XH(n,n.state.selection.from)=="ltr"?1:-1:1;return ZH(n,o,i)||o0(n,o)}else{if(r==38||da&&r==80&&i=="c")return JH(n,-1,i)||o0(n,-1);if(r==40||da&&r==78&&i=="c")return O_e(n)||JH(n,1,i)||o0(n,1);if(i==(da?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function iO(n,e){n.someProp("transformCopied",m=>{e=m(e,n)});let r=[],{content:i,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){o--,s--;let m=i.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),i=m.content}let a=n.someProp("clipboardSerializer")||bm.fromSchema(n.state.schema),l=kne(),c=l.createElement("div");c.appendChild(a.serializeFragment(i,{document:l}));let u=c.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=wne[u.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let v=l.createElement(d[m]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),h++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${o} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=n.someProp("clipboardTextSerializer",m=>m(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:f,slice:e}}function yne(n,e,r,i,o){let s=o.parent.type.spec.code,a,l;if(!r&&!e)return null;let c=!!e&&(i||s||!r);if(c){if(n.someProp("transformPastedText",f=>{e=f(e,s||i,n)}),s)return l=new Qe(Ue.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",f=>{l=f(l,n,!0)}),l;let h=n.someProp("clipboardTextParser",f=>f(e,o,i,n));if(h)l=h;else{let f=o.marks(),{schema:m}=n.state,v=bm.fromSchema(m);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let b=a.appendChild(document.createElement("p"));x&&b.appendChild(v.serializeNode(m.text(x,f)))})}}else n.someProp("transformPastedHTML",h=>{r=h(r,n)}),a=F_e(r),Ib&&$_e(a);let u=a&&a.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=a.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;a=f}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Gp.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||d),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!R_e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)l=B_e(tq(l,+d[1],+d[2]),d[4]);else if(l=Qe.maxOpen(L_e(l.content,o),!0),l.openStart||l.openEnd){let h=0,f=0;for(let m=l.content.firstChild;h<l.openStart&&!m.type.spec.isolating;h++,m=m.firstChild);for(let m=l.content.lastChild;f<l.openEnd&&!m.type.spec.isolating;f++,m=m.lastChild);l=tq(l,h,f)}return n.someProp("transformPasted",h=>{l=h(l,n,c)}),l}const R_e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function L_e(n,e){if(n.childCount<2)return n;for(let r=e.depth;r>=0;r--){let o=e.node(r).contentMatchAt(e.index(r)),s,a=[];if(n.forEach(l=>{if(!a)return;let c=o.findWrapping(l.type),u;if(!c)return a=null;if(u=a.length&&s.length&&xne(c,s,l,a[a.length-1],0))a[a.length-1]=u;else{a.length&&(a[a.length-1]=bne(a[a.length-1],s.length));let d=vne(l,c);a.push(d),o=o.matchType(d.type),s=c}}),a)return Ue.from(a)}return n}function vne(n,e,r=0){for(let i=e.length-1;i>=r;i--)n=e[i].create(null,Ue.from(n));return n}function xne(n,e,r,i,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let s=xne(n,e,r,i.lastChild,o+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(o==n.length-1?r.type:n[o+1]))return i.copy(i.content.append(Ue.from(vne(r,n,o+1))))}}function bne(n,e){if(e==0)return n;let r=n.content.replaceChild(n.childCount-1,bne(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(Ue.empty,!0);return n.copy(r.append(i))}function sM(n,e,r,i,o,s){let a=e<0?n.firstChild:n.lastChild,l=a.content;return n.childCount>1&&(s=0),o<i-1&&(l=sM(l,e,r,i,o+1,s)),o>=r&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(Ue.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(l))}function tq(n,e,r){return e<n.openStart&&(n=new Qe(sM(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),r<n.openEnd&&(n=new Qe(sM(n.content,1,r,n.openEnd,0,0),n.openStart,r)),n}const wne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let nq=null;function kne(){return nq||(nq=document.implementation.createHTMLDocument("title"))}let tA=null;function z_e(n){let e=window.trustedTypes;return e?(tA||(tA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),tA.createHTML(n)):n}function F_e(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let r=kne().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),o;if((o=i&&wne[i[1].toLowerCase()])&&(n=o.map(s=>"<"+s+">").join("")+n+o.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=z_e(n),o)for(let s=0;s<o.length;s++)r=r.querySelector(o[s])||r;return r}function $_e(n){let e=n.querySelectorAll(vi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let i=e[r];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function B_e(n,e){if(!n.size)return n;let r=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:o,openStart:s,openEnd:a}=n;for(let l=i.length-2;l>=0;l-=2){let c=r.nodes[i[l]];if(!c||c.hasRequiredAttrs())break;o=Ue.from(c.create(i[l+1],o)),s++,a++}return new Qe(o,s,a)}const Mo={},Eo={},H_e={touchstart:!0,touchmove:!0};let q_e=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function V_e(n){for(let e in Mo){let r=Mo[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{U_e(n,i)&&!oO(n,i)&&(n.editable||!(i.type in Eo))&&r(n,i)},H_e[e]?{passive:!0}:void 0)}zi&&n.dom.addEventListener("input",()=>null),aM(n)}function Eh(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function W_e(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function aM(n){n.someProp("handleDOMEvents",e=>{for(let r in e)n.input.eventHandlers[r]||n.dom.addEventListener(r,n.input.eventHandlers[r]=i=>oO(n,i))})}function oO(n,e){return n.someProp("handleDOMEvents",r=>{let i=r[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function U_e(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=n.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function K_e(n,e){!oO(n,e)&&Mo[e.type]&&(n.editable||!(e.type in Eo))&&Mo[e.type](n,e)}Eo.keydown=(n,e)=>{let r=e;if(n.input.shiftKey=r.keyCode==16||r.shiftKey,!Cne(n,r)&&(n.input.lastKeyCode=r.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ju&&vi&&r.keyCode==13)))if(r.keyCode!=229&&n.domObserver.forceFlush(),ug&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",o=>o(n,lp(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,r))||I_e(n,r)?r.preventDefault():Eh(n,"key")};Eo.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Eo.keypress=(n,e)=>{let r=e;if(Cne(n,r)||!r.charCode||r.ctrlKey&&!r.altKey||da&&r.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,r))){r.preventDefault();return}let i=n.state.selection;if(!(i instanceof xt)||!i.$from.sameParent(i.$to)){let o=String.fromCharCode(r.charCode),s=()=>n.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",a=>a(n,i.$from.pos,i.$to.pos,o,s))&&n.dispatch(s()),r.preventDefault()}};function P3(n){return{left:n.clientX,top:n.clientY}}function G_e(n,e){let r=e.x-n.clientX,i=e.y-n.clientY;return r*r+i*i<100}function sO(n,e,r,i,o){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,l=>a>s.depth?l(n,r,s.nodeAfter,s.before(a),o,!0):l(n,r,s.node(a),s.before(a),o,!1)))return!0;return!1}function B0(n,e,r){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function Y_e(n,e){if(e==-1)return!1;let r=n.state.doc.resolve(e),i=r.nodeAfter;return i&&i.isAtom&&Tt.isSelectable(i)?(B0(n,new Tt(r)),!0):!1}function Z_e(n,e){if(e==-1)return!1;let r=n.state.selection,i,o;r instanceof Tt&&(i=r.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a);if(Tt.isSelectable(l)){i&&r.$from.depth>0&&a>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?o=s.before(r.$from.depth):o=s.before(a);break}}return o!=null?(B0(n,Tt.create(n.state.doc,o)),!0):!1}function X_e(n,e,r,i,o){return sO(n,"handleClickOn",e,r,i)||n.someProp("handleClick",s=>s(n,e,i))||(o?Z_e(n,r):Y_e(n,r))}function J_e(n,e,r,i){return sO(n,"handleDoubleClickOn",e,r,i)||n.someProp("handleDoubleClick",o=>o(n,e,i))}function Q_e(n,e,r,i){return sO(n,"handleTripleClickOn",e,r,i)||n.someProp("handleTripleClick",o=>o(n,e,i))||eAe(n,r,i)}function eAe(n,e,r){if(r.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(B0(n,xt.create(i,0,i.content.size)),!0):!1;let o=i.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s),l=o.before(s);if(a.inlineContent)B0(n,xt.create(i,l+1,l+1+a.content.size));else if(Tt.isSelectable(a))B0(n,Tt.create(i,l));else continue;return!0}}function aO(n){return ZS(n)}const Sne=da?"metaKey":"ctrlKey";Mo.mousedown=(n,e)=>{let r=e;n.input.shiftKey=r.shiftKey;let i=aO(n),o=Date.now(),s="singleClick";o-n.input.lastClick.time<500&&G_e(r,n.input.lastClick)&&!r[Sne]&&n.input.lastClick.button==r.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:o,x:r.clientX,y:r.clientY,type:s,button:r.button};let a=n.posAtCoords(P3(r));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new tAe(n,a,r,!!i)):(s=="doubleClick"?J_e:Q_e)(n,a.pos,a.inside,r)?r.preventDefault():Eh(n,"pointer"))};class tAe{constructor(e,r,i,o){this.view=e,this.pos=r,this.event=i,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[Sne],this.allowDefault=i.shiftKey;let s,a;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),a=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,a=d.depth?d.before():0}const l=o?null:i.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Tt&&u.from<=a&&u.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Aa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Eh(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(P3(e))),this.updateAllowDefault(e),this.allowDefault||!r?Eh(this.view,"pointer"):X_e(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||zi&&this.mightDrag&&!this.mightDrag.node.isAtom||vi&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(B0(this.view,$t.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Eh(this.view,"pointer")}move(e){this.updateAllowDefault(e),Eh(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Mo.touchstart=n=>{n.input.lastTouch=Date.now(),aO(n),Eh(n,"pointer")};Mo.touchmove=n=>{n.input.lastTouch=Date.now(),Eh(n,"pointer")};Mo.contextmenu=n=>aO(n);function Cne(n,e){return n.composing?!0:zi&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const nAe=ju?5e3:-1;Eo.compositionstart=Eo.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,r=e.selection.$to;if(e.selection instanceof xt&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)||vi&&tne&&rAe(n)))n.markCursor=n.state.storedMarks||r.marks(),ZS(n,!0),n.markCursor=null;else if(ZS(n,!e.selection.empty),Aa&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let i=n.domSelectionRange();for(let o=i.focusNode,s=i.focusOffset;o&&o.nodeType==1&&s!=0;){let a=s<0?o.lastChild:o.childNodes[s-1];if(!a)break;if(a.nodeType==3){let l=n.domSelection();l&&l.collapse(a,a.nodeValue.length);break}else o=a,s=-1}}n.input.composing=!0}_ne(n,nAe)};function rAe(n){let{focusNode:e,focusOffset:r}=n.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let i=e.childNodes[r];return i.nodeType==1&&i.contentEditable=="false"}Eo.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,_ne(n,20))};function _ne(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>ZS(n),e))}function Ane(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=oAe());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function iAe(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let r=Z8e(e.focusNode,e.focusOffset),i=X8e(e.focusNode,e.focusOffset);if(r&&i&&r!=i){let o=i.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(r==s||i==s)return s;if(!o||!o.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let a=r.pmViewDesc;if(!(!a||!a.isText(r.nodeValue)))return i}}return r||i}function oAe(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ZS(n,e=!1){if(!(ju&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Ane(n),e||n.docView&&n.docView.dirty){let r=nO(n),i=n.state.selection;return r&&!r.eq(i)?n.dispatch(n.state.tr.setSelection(r)):(n.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function sAe(n,e){if(!n.dom.parentNode)return;let r=n.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),n.focus()},50)}const Ax=us&&Rh<15||ug&&t_e<604;Mo.copy=Eo.cut=(n,e)=>{let r=e,i=n.state.selection,o=r.type=="cut";if(i.empty)return;let s=Ax?null:r.clipboardData,a=i.content(),{dom:l,text:c}=iO(n,a);s?(r.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):sAe(n,l),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function aAe(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function lAe(n,e){if(!n.dom.parentNode)return;let r=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),r?Tx(n,i.value,null,o,e):Tx(n,i.textContent,i.innerHTML,o,e)},50)}function Tx(n,e,r,i,o){let s=yne(n,e,r,i,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,o,s||Qe.empty)))return!0;if(!s)return!1;let a=aAe(s),l=a?n.state.tr.replaceSelectionWith(a,i):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Tne(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let r=n.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Eo.paste=(n,e)=>{let r=e;if(n.composing&&!ju)return;let i=Ax?null:r.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&Tx(n,Tne(i),i.getData("text/html"),o,r)?r.preventDefault():lAe(n,r)};class Pne{constructor(e,r,i){this.slice=e,this.move=r,this.node=i}}const cAe=da?"altKey":"ctrlKey";function Mne(n,e){let r=n.someProp("dragCopies",i=>!i(e));return r??!e[cAe]}Mo.dragstart=(n,e)=>{let r=e,i=n.input.mouseDown;if(i&&i.done(),!r.dataTransfer)return;let o=n.state.selection,s=o.empty?null:n.posAtCoords(P3(r)),a;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof Tt?o.to-1:o.to))){if(i&&i.mightDrag)a=Tt.create(n.state.doc,i.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=n.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=n.docView&&(a=Tt.create(n.state.doc,h.posBefore))}}let l=(a||n.state.selection).content(),{dom:c,text:u,slice:d}=iO(n,l);(!r.dataTransfer.files.length||!vi||ene>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Ax?"Text":"text/html",c.innerHTML),r.dataTransfer.effectAllowed="copyMove",Ax||r.dataTransfer.setData("text/plain",u),n.dragging=new Pne(d,Mne(n,r),a)};Mo.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Eo.dragover=Eo.dragenter=(n,e)=>e.preventDefault();Eo.drop=(n,e)=>{try{uAe(n,e,n.dragging)}finally{n.dragging=null}};function uAe(n,e,r){if(!e.dataTransfer)return;let i=n.posAtCoords(P3(e));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",m=>{s=m(s,n,!1)}):s=yne(n,Tne(e.dataTransfer),Ax?null:e.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&Mne(n,e));if(n.someProp("handleDrop",m=>m(n,e,s||Qe.empty,a))){e.preventDefault();return}if(!s)return;e.preventDefault();let l=s?V7e(n.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=n.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&Tt.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Tt(f));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((v,x,b,w)=>m=w),c.setSelection(rO(n,f,c.doc.resolve(m)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))}Mo.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Bu(n)},20))};Mo.blur=(n,e)=>{let r=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),r.relatedTarget&&n.dom.contains(r.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Mo.beforeinput=(n,e)=>{if(vi&&ju&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,lp(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in Eo)Mo[n]=Eo[n];function Px(n,e){if(n==e)return!0;for(let r in n)if(n[r]!==e[r])return!1;for(let r in e)if(!(r in n))return!1;return!0}let rq=class Ene{constructor(e,r){this.toDOM=e,this.spec=r||Tp,this.side=this.spec.side||0}map(e,r,i,o){let{pos:s,deleted:a}=e.mapResult(r.from+o,this.side<0?-1:1);return a?null:new No(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof Ene&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Px(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}};class zh{constructor(e,r){this.attrs=e,this.spec=r||Tp}map(e,r,i,o){let s=e.map(r.from+o,this.spec.inclusiveStart?-1:1)-i,a=e.map(r.to+o,this.spec.inclusiveEnd?1:-1)-i;return s>=a?null:new No(s,a,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof zh&&Px(this.attrs,e.attrs)&&Px(this.spec,e.spec)}static is(e){return e.type instanceof zh}destroy(){}}let dAe=class Nne{constructor(e,r){this.attrs=e,this.spec=r||Tp}map(e,r,i,o){let s=e.mapResult(r.from+o,1);if(s.deleted)return null;let a=e.mapResult(r.to+o,-1);return a.deleted||a.pos<=s.pos?null:new No(s.pos-i,a.pos-i,this)}valid(e,r){let{index:i,offset:o}=e.content.findIndex(r.from),s;return o==r.from&&!(s=e.child(i)).isText&&o+s.nodeSize==r.to}eq(e){return this==e||e instanceof Nne&&Px(this.attrs,e.attrs)&&Px(this.spec,e.spec)}destroy(){}},No=class Uy{constructor(e,r,i){this.from=e,this.to=r,this.type=i}copy(e,r){return new Uy(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,i){return this.type.map(e,this,r,i)}static widget(e,r,i){return new Uy(e,e,new rq(r,i))}static inline(e,r,i,o){return new Uy(e,r,new zh(i,o))}static node(e,r,i,o){return new Uy(e,r,new dAe(i,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof zh}get widget(){return this.type instanceof rq}};const y0=[],Tp={};class Ln{constructor(e,r){this.local=e.length?e:y0,this.children=r.length?r:y0}static create(e,r){return r.length?XS(r,e,0,Tp):Xi}find(e,r,i){let o=[];return this.findInner(e??0,r??1e9,o,0,i),o}findInner(e,r,i,o,s){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=r&&l.to>=e&&(!s||s(l.spec))&&i.push(l.copy(l.from+o,l.to+o))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<r&&this.children[a+1]>e){let l=this.children[a]+1;this.children[a+2].findInner(e-l,r-l,i,o+l,s)}}map(e,r,i){return this==Xi||e.maps.length==0?this:this.mapInner(e,r,0,0,i||Tp)}mapInner(e,r,i,o,s){let a;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,i,o);c&&c.type.valid(r,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?hAe(this.children,a||[],e,r,i,o,s):a?new Ln(a.sort(Pp),y0):Xi}add(e,r){return r.length?this==Xi?Ln.create(e,r):this.addInner(e,r,0):this}addInner(e,r,i){let o,s=0;e.forEach((l,c)=>{let u=c+i,d;if(d=One(r,l,u)){for(o||(o=this.children.slice());s<o.length&&o[s]<c;)s+=3;o[s]==c?o[s+2]=o[s+2].addInner(l,d,u+1):o.splice(s,0,c,c+l.nodeSize,XS(d,l,u+1,Tp)),s+=3}});let a=jne(s?Dne(r):r,-i);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||a.splice(l--,1);return new Ln(a.length?this.local.concat(a).sort(Pp):this.local,o||this.children)}remove(e){return e.length==0||this==Xi?this:this.removeInner(e,0)}removeInner(e,r){let i=this.children,o=this.local;for(let s=0;s<i.length;s+=3){let a,l=i[s]+r,c=i[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>l&&h.to<c&&(e[d]=null,(a||(a=[])).push(h));if(!a)continue;i==this.children&&(i=this.children.slice());let u=i[s+2].removeInner(a,l+1);u!=Xi?i[s+2]=u:(i.splice(s,3),s-=3)}if(o.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let l=0;l<o.length;l++)o[l].eq(a,r)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1))}return i==this.children&&o==this.local?this:o.length||i.length?new Ln(o,i):Xi}forChild(e,r){if(this==Xi)return this;if(r.isLeaf)return Ln.empty;let i,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(i=this.children[l+2]);break}let s=e+1,a=s+r.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<a&&c.to>s&&c.type instanceof zh){let u=Math.max(s,c.from)-s,d=Math.min(a,c.to)-s;u<d&&(o||(o=[])).push(c.copy(u,d))}}if(o){let l=new Ln(o.sort(Pp),y0);return i?new Ch([l,i]):l}return i||Xi}eq(e){if(this==e)return!0;if(!(e instanceof Ln)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return lO(this.localsInner(e))}localsInner(e){if(this==Xi)return y0;if(e.inlineContent||!this.local.some(zh.is))return this.local;let r=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof zh||r.push(this.local[i]);return r}forEachSet(e){e(this)}}Ln.empty=new Ln([],[]);Ln.removeOverlap=lO;const Xi=Ln.empty;class Ch{constructor(e){this.members=e}map(e,r){const i=this.members.map(o=>o.map(e,r,Tp));return Ch.from(i)}forChild(e,r){if(r.isLeaf)return Ln.empty;let i=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,r);s!=Xi&&(s instanceof Ch?i=i.concat(s.members):i.push(s))}return Ch.from(i)}eq(e){if(!(e instanceof Ch)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,i=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!r)r=s;else{i&&(r=r.slice(),i=!1);for(let a=0;a<s.length;a++)r.push(s[a])}}return r?lO(i?r:r.sort(Pp)):y0}static from(e){switch(e.length){case 0:return Xi;case 1:return e[0];default:return new Ch(e.every(r=>r instanceof Ln)?e:e.reduce((r,i)=>r.concat(i instanceof Ln?i:i.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function hAe(n,e,r,i,o,s,a){let l=n.slice();for(let u=0,d=s;u<r.maps.length;u++){let h=0;r.maps[u].forEach((f,m,v,x)=>{let b=x-v-(m-f);for(let w=0;w<l.length;w+=3){let S=l[w+1];if(S<0||f>S+d-h)continue;let _=l[w]+d-h;m>=_?l[w+1]=f<=_?-2:-1:f>=d&&b&&(l[w]+=b,l[w+1]+=b)}h+=b}),d=r.maps[u].map(d,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let d=r.map(n[u]+s),h=d-o;if(h<0||h>=i.content.size){c=!0;continue}let f=r.map(n[u+1]+s,-1),m=f-o,{index:v,offset:x}=i.content.findIndex(h),b=i.maybeChild(v);if(b&&x==h&&x+b.nodeSize==m){let w=l[u+2].mapInner(r,b,d+1,n[u]+s+1,a);w!=Xi?(l[u]=h,l[u+1]=m,l[u+2]=w):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=fAe(l,n,e,r,o,s,a),d=XS(u,i,0,a);e=d.local;for(let h=0;h<l.length;h+=3)l[h+1]<0&&(l.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let m=d.children[h];for(;f<l.length&&l[f]<m;)f+=3;l.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Ln(e.sort(Pp),l)}function jne(n,e){if(!e||!n.length)return n;let r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(new No(o.from+e,o.to+e,o.type))}return r}function fAe(n,e,r,i,o,s,a){function l(c,u){for(let d=0;d<c.local.length;d++){let h=c.local[d].map(i,o,u);h?r.push(h):a.onRemove&&a.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)l(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&l(n[c+2],e[c]+s+1);return r}function One(n,e,r){if(e.isLeaf)return null;let i=r+e.nodeSize,o=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>r&&a.to<i&&((o||(o=[])).push(a),n[s]=null);return o}function Dne(n){let e=[];for(let r=0;r<n.length;r++)n[r]!=null&&e.push(n[r]);return e}function XS(n,e,r,i){let o=[],s=!1;e.forEach((l,c)=>{let u=One(n,l,c+r);if(u){s=!0;let d=XS(u,l,r+c+1,i);d!=Xi&&o.push(c,c+l.nodeSize,d)}});let a=jne(s?Dne(n):n,-r).sort(Pp);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||(i.onRemove&&i.onRemove(a[l].spec),a.splice(l--,1));return a.length||o.length?new Ln(a,o):Xi}function Pp(n,e){return n.from-e.from||n.to-e.to}function lO(n){let e=n;for(let r=0;r<e.length-1;r++){let i=e[r];if(i.from!=i.to)for(let o=r+1;o<e.length;o++){let s=e[o];if(s.from==i.from){s.to!=i.to&&(e==n&&(e=n.slice()),e[o]=s.copy(s.from,i.to),iq(e,o+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(e==n&&(e=n.slice()),e[r]=i.copy(i.from,s.from),iq(e,o,i.copy(s.from,i.to)));break}}}return e}function iq(n,e,r){for(;e<n.length&&Pp(r,n[e])>0;)e++;n.splice(e,0,r)}function nA(n){let e=[];return n.someProp("decorations",r=>{let i=r(n.state);i&&i!=Xi&&e.push(i)}),n.cursorWrapper&&e.push(Ln.create(n.state.doc,[n.cursorWrapper.deco])),Ch.from(e)}const pAe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mAe=us&&Rh<=11;class gAe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}let yAe=class{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gAe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let o=0;o<i.length;o++)this.queue.push(i[o]);us&&Rh<=11&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():zi&&e.composing&&i.some(o=>o.type=="childList"&&o.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),mAe&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pAe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(YH(this.view)){if(this.suppressingSelectionUpdates)return Bu(this.view);if(us&&Rh<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xp(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,i;for(let s=e.focusNode;s;s=cg(s))r.add(s);for(let s=e.anchorNode;s;s=cg(s))if(r.has(s)){i=s;break}let o=i&&this.view.docView.nearestDesc(i);if(o&&o.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let i=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&YH(e)&&!this.ignoreSelectionChange(i),s=-1,a=-1,l=!1,c=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],c);h&&(s=s<0?h.from:Math.min(h.from,s),a=a<0?h.to:Math.max(h.to,a),h.typeOver&&(l=!0))}if(Aa&&c.length){let d=c.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let m=f.parentNode;m&&m.nodeName=="LI"&&(!h||bAe(e,h)!=m)&&f.remove()}}}else if((vi||zi)&&c.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of c)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&A3(i)&&(u=nO(e))&&u.eq($t.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Bu(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,a),vAe(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,wAe(e,c)),this.handleDOMChange(s,a,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Bu(e),this.currentSelection.set(i))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let o=e.previousSibling,s=e.nextSibling;if(us&&Rh<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let a=o&&o.parentNode==e.target?ji(o)+1:0,l=i.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?ji(s):e.target.childNodes.length,u=i.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},oq=new WeakMap,sq=!1;function vAe(n){if(!oq.has(n)&&(oq.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Aa,sq)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),sq=!0}}function aq(n,e){let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Xp(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function xAe(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return aq(n,o)}let r;function i(o){o.preventDefault(),o.stopImmediatePropagation(),r=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),r?aq(n,r):null}function bAe(n,e){for(let r=e.parentNode;r&&r!=n.dom;r=r.parentNode){let i=n.docView.nearestDesc(r,!0);if(i&&i.node.isBlock)return r}return null}function wAe(n,e){var r;let{focusNode:i,focusOffset:o}=n.domSelectionRange();for(let s of e)if(((r=s.parentNode)===null||r===void 0?void 0:r.nodeName)=="TR"){let a=s.nextSibling;for(;a&&a.nodeName!="TD"&&a.nodeName!="TH";)a=a.nextSibling;if(a){let l=a;for(;;){let c=l.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;l=c}l.insertBefore(s,l.firstChild),i==s&&n.domSelection().collapse(s,o)}else s.parentNode.removeChild(s)}}function kAe(n,e,r){let{node:i,fromOffset:o,toOffset:s,from:a,to:l}=n.docView.parseRange(e,r),c=n.domSelectionRange(),u,d=c.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],A3(c)||u.push({node:c.focusNode,offset:c.focusOffset})),vi&&n.input.lastKeyCode===8)for(let b=s;b>o;b--){let w=i.childNodes[b-1],S=w.pmViewDesc;if(w.nodeName=="BR"&&!S){s=b;break}if(!S||S.size)break}let h=n.state.doc,f=n.someProp("domParser")||Gp.fromSchema(n.state.schema),m=h.resolve(a),v=null,x=f.parse(i,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:SAe,context:m});if(u&&u[0].pos!=null){let b=u[0].pos,w=u[1]&&u[1].pos;w==null&&(w=b),v={anchor:b+a,head:w+a}}return{doc:x,sel:v,from:a,to:l}}function SAe(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(zi&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(n.parentNode.lastChild==n||zi&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const CAe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _Ae(n,e,r,i,o){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,L=nO(n,E);if(L&&!n.state.selection.eq(L)){if(vi&&ju&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",z=>z(n,lp(13,"Enter"))))return;let $=n.state.tr.setSelection(L);E=="pointer"?$.setMeta("pointer",!0):E=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),n.dispatch($)}return}let a=n.state.doc.resolve(e),l=a.sharedDepth(r);e=a.before(l+1),r=n.state.doc.resolve(r).after(l+1);let c=n.state.selection,u=kAe(n,e,r),d=n.state.doc,h=d.slice(u.from,u.to),f,m;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,m="end"):(f=n.state.selection.from,m="start"),n.input.lastKeyCode=null;let v=PAe(h.content,u.doc.content,u.from,f,m);if(v&&n.input.domChangeCount++,(ug&&n.input.lastIOSEnter>Date.now()-225||ju)&&o.some(E=>E.nodeType==1&&!CAe.test(E.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",E=>E(n,lp(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(i&&c instanceof xt&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let E=lq(n,n.state.doc,u.sel);if(E&&!E.eq(n.state.selection)){let L=n.state.tr.setSelection(E);s&&L.setMeta("composition",s),n.dispatch(L)}}return}n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof xt&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),us&&Rh<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>u.from&&u.doc.textBetween(v.start-u.from-1,v.start-u.from+1)==" "&&(v.start--,v.endA--,v.endB--);let x=u.doc.resolveNoCache(v.start-u.from),b=u.doc.resolveNoCache(v.endB-u.from),w=d.resolve(v.start),S=x.sameParent(b)&&x.parent.inlineContent&&w.end()>=v.endA;if((ug&&n.input.lastIOSEnter>Date.now()-225&&(!S||o.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!S&&x.pos<u.doc.content.size&&(!x.sameParent(b)||!x.parent.inlineContent)&&x.pos<b.pos&&!/\S/.test(u.doc.textBetween(x.pos,b.pos,"","")))&&n.someProp("handleKeyDown",E=>E(n,lp(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&TAe(d,v.start,v.endA,x,b)&&n.someProp("handleKeyDown",E=>E(n,lp(8,"Backspace")))){ju&&vi&&n.domObserver.suppressSelectionUpdates();return}vi&&v.endB==v.start&&(n.input.lastChromeDelete=Date.now()),ju&&!S&&x.start()!=b.start()&&b.parentOffset==0&&x.depth==b.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==v.endA&&(v.endB-=2,b=u.doc.resolveNoCache(v.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,lp(13,"Enter"))})},20));let _=v.start,P=v.endA,A=E=>{let L=E||n.state.tr.replace(_,P,u.doc.slice(v.start-u.from,v.endB-u.from));if(u.sel){let $=lq(n,L.doc,u.sel);$&&!(vi&&n.composing&&$.empty&&(v.start!=v.endB||n.input.lastChromeDelete<Date.now()-100)&&($.head==_||$.head==L.mapping.map(P)-1)||us&&$.empty&&$.head==_)&&L.setSelection($)}return s&&L.setMeta("composition",s),L.scrollIntoView()},T;if(S)if(x.pos==b.pos){us&&Rh<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bu(n),20));let E=A(n.state.tr.delete(_,P)),L=d.resolve(v.start).marksAcross(d.resolve(v.endA));L&&E.ensureMarks(L),n.dispatch(E)}else if(v.endA==v.endB&&(T=AAe(x.parent.content.cut(x.parentOffset,b.parentOffset),w.parent.content.cut(w.parentOffset,v.endA-w.start())))){let E=A(n.state.tr);T.type=="add"?E.addMark(_,P,T.mark):E.removeMark(_,P,T.mark),n.dispatch(E)}else if(x.parent.child(x.index()).isText&&x.index()==b.index()-(b.textOffset?0:1)){let E=x.parent.textBetween(x.parentOffset,b.parentOffset),L=()=>A(n.state.tr.insertText(E,_,P));n.someProp("handleTextInput",$=>$(n,_,P,E,L))||n.dispatch(L())}else n.dispatch(A());else n.dispatch(A())}function lq(n,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:rO(n,e.resolve(r.anchor),e.resolve(r.head))}function AAe(n,e){let r=n.firstChild.marks,i=e.firstChild.marks,o=r,s=i,a,l,c;for(let d=0;d<i.length;d++)o=i[d].removeFromSet(o);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(o.length==1&&s.length==0)l=o[0],a="add",c=d=>d.mark(l.addToSet(d.marks));else if(o.length==0&&s.length==1)l=s[0],a="remove",c=d=>d.mark(l.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(Ue.from(u).eq(n))return{mark:l,type:a}}function TAe(n,e,r,i,o){if(r-e<=o.pos-i.pos||rA(i,!0,!1)<o.pos)return!1;let s=n.resolve(e);if(!i.parent.isTextblock){let l=s.nodeAfter;return l!=null&&r==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(rA(s,!0,!0));return!a.parent.isTextblock||a.pos>r||rA(a,!0,!1)<r?!1:i.parent.content.cut(i.parentOffset).eq(a.parent.content)}function rA(n,e,r){let i=n.depth,o=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,o++,e=!1;if(r){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function PAe(n,e,r,i,o){let s=n.findDiffStart(e,r);if(s==null)return null;let{a,b:l}=n.findDiffEnd(e,r+n.size,r+e.size);if(o=="end"){let c=Math.max(0,s-Math.min(a,l));i-=a+c-s}if(a<s&&n.size<e.size){let c=i<=s&&i>=a?s-i:0;s-=c,s&&s<e.size&&cq(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-a),a=s}else if(l<s){let c=i<=s&&i>=l?s-i:0;s-=c,s&&s<n.size&&cq(n.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-l),l=s}return{start:s,endA:a,endB:l}}function cq(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),r=n.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}let cO=class{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new q_e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(pq),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=hq(this),dq(this),this.nodeViews=fq(this),this.docView=qH(this.state.doc,uq(this),nA(this),this.dom,this),this.domObserver=new yAe(this,(i,o,s,a)=>_Ae(this,i,o,s,a)),this.domObserver.start(),V_e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&aM(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(pq),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let i in this._props)r[i]=this._props[i];r.state=this.state;for(let i in e)r[i]=e[i];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var i;let o=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(Ane(this),a=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=r.plugins;if(l||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let m=fq(this);EAe(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(l||r.handleDOMEvents!=this._props.handleDOMEvents)&&aM(this),this.editable=hq(this),dq(this);let c=nA(this),u=uq(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,u,c);(h||!e.selection.eq(o.selection))&&(a=!0);let f=d=="preserve"&&a&&this.dom.style.overflowAnchor==null&&i_e(this);if(a){this.domObserver.stop();let m=h&&(us||vi)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&MAe(o.selection,e.selection);if(h){let v=vi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=iAe(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=qH(e.doc,u,c,this.dom,this)),v&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&P_e(this))?Bu(this,m):(pne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((i=this.dragging)===null||i===void 0)&&i.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&o_e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Tt){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&LH(this,r.getBoundingClientRect(),e)}else LH(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let i=this.directPlugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let i=this.pluginViews[r];i.update&&i.update(this,e)}}updateDraggedNode(e,r){let i=e.node,o=-1;if(this.state.doc.nodeAt(i.from)==i.node)o=i.from;else{let s=i.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(o=s)}this.dragging=new Pne(e.slice,e.move,o<0?void 0:Tt.create(this.state.doc,o))}someProp(e,r){let i=this._props&&this._props[e],o;if(i!=null&&(o=r?r(i):i))return o;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[e];if(l!=null&&(o=r?r(l):l))return o}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let l=s[a].props[e];if(l!=null&&(o=r?r(l):l))return o}}hasFocus(){if(us){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&s_e(this.dom),Bu(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return d_e(this,e)}coordsAtPos(e,r=1){return sne(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,i=-1){let o=this.docView.posFromDOM(e,r,i);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,r){return g_e(this,r||this.state,e)}pasteHTML(e,r){return Tx(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return Tx(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return iO(this,e)}destroy(){this.docView&&(W_e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],nA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,G8e())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return K_e(this,e)}domSelectionRange(){let e=this.domSelection();return e?zi&&this.root.nodeType===11&&Q8e(this.dom.ownerDocument)==this.dom&&xAe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};cO.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function uq(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(n.state)),r)for(let i in r)i=="class"?e.class+=" "+r[i]:i=="style"?e.style=(e.style?e.style+";":"")+r[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(r[i]))}),e.translate||(e.translate="no"),[No.node(0,n.state.doc.content.size,e)]}function dq(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:No.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function hq(n){return!n.someProp("editable",e=>e(n.state)===!1)}function MAe(n,e){let r=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(r)!=e.$anchor.start(r)}function fq(n){let e=Object.create(null);function r(i){for(let o in i)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=i[o])}return n.someProp("nodeViews",r),n.someProp("markViews",r),e}function EAe(n,e){let r=0,i=0;for(let o in n){if(n[o]!=e[o])return!0;r++}for(let o in e)i++;return r!=i}function pq(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function pd(n,e){return n.meta={package:"@milkdown/core",group:"System",...e},n}const Ine={text:(n,e,r,i)=>{const o=n.value;return/^[^*_\\]*\s+$/.test(o)?o:r.safe(o,{...i,encode:[]})},strong:(n,e,r,i)=>{const o=n.marker||r.options.strong||"*",s=r.enter("strong"),a=r.createTracker(i);let l=a.move(o+o);return l+=a.move(r.containerPhrasing(n,{before:l,after:o,...a.current()})),l+=a.move(o+o),s(),l},emphasis:(n,e,r,i)=>{const o=n.marker||r.options.emphasis||"*",s=r.enter("emphasis"),a=r.createTracker(i);let l=a.move(o);return l+=a.move(r.containerPhrasing(n,{before:l,after:o,...a.current()})),l+=a.move(o),s(),l}},fn=rn({},"editorView"),Ky=rn({},"editorState"),iA=rn([],"initTimer"),lM=rn({},"editor"),Mx=rn([],"inputRules"),Zu=rn([],"prosePlugins"),Ex=rn([],"remarkPlugins"),Nx=rn([],"nodeView"),jx=rn([],"markView"),Mp=rn(q9().use(R9).use($9),"remark"),Lv=rn({handlers:Ine,encode:[]},"remarkStringifyOptions"),P4=Fc("ConfigReady");function NAe(n){const e=r=>(r.record(P4),async()=>(await n(r),r.done(P4),()=>{r.clearTimer(P4)}));return pd(e,{displayName:"Config"}),e}const Ep=Fc("InitReady");function jAe(n){const e=r=>(r.inject(lM,n).inject(Zu,[]).inject(Ex,[]).inject(Mx,[]).inject(Nx,[]).inject(jx,[]).inject(Lv,{handlers:Ine,encode:[]}).inject(Mp,q9().use(R9).use($9)).inject(iA,[P4]).record(Ep),async()=>{await r.waitTimers(iA);const i=r.get(Lv);return r.set(Mp,q9().use(R9).use($9,i)),r.done(Ep),()=>{r.remove(lM).remove(Zu).remove(Ex).remove(Mx).remove(Nx).remove(jx).remove(Lv).remove(Mp).remove(iA).clearTimer(Ep)}});return pd(e,{displayName:"Init"}),e}const Ao=Fc("SchemaReady"),oA=rn([],"schemaTimer"),vl=rn({},"schema"),zv=rn([],"nodes"),Fv=rn([],"marks");function mq(n){return{...n,parseDOM:n.parseDOM?.map(e=>({priority:n.priority,...e}))}}const Rne=n=>(n.inject(vl,{}).inject(zv,[]).inject(Fv,[]).inject(oA,[Ep]).record(Ao),async()=>{await n.waitTimers(oA);const e=n.get(Mp),i=n.get(Ex).reduce((l,c)=>l.use(c.plugin,c.options),e);n.set(Mp,i);const o=Object.fromEntries(n.get(zv).map(([l,c])=>[l,mq(c)])),s=Object.fromEntries(n.get(Fv).map(([l,c])=>[l,mq(c)])),a=new Lee({nodes:o,marks:s});return n.set(vl,a),n.done(Ao),()=>{n.remove(vl).remove(zv).remove(Fv).remove(oA).clearTimer(Ao)}});pd(Rne,{displayName:"Schema"});class Lne{constructor(){this.#t=new bee,this.#e=null,this.setCtx=e=>{this.#e=e},this.chain=()=>{if(this.#e==null)throw E_();const e=this.#e,r=[],i=this.get.bind(this),o={run:()=>{const a=Bg(...r),l=e.get(fn);return a(l.state,l.dispatch,l)},inline:a=>(r.push(a),o),pipe:s.bind(this)};function s(a,l){const c=i(a);return r.push(c(l)),o}return o}}#t;#e;get ctx(){return this.#e}create(e,r){const i=e.create(this.#t.sliceMap);return i.set(r),i}get(e){return this.#t.get(e).get()}remove(e){return this.#t.remove(e)}call(e,r){if(this.#e==null)throw E_();const o=this.get(e)(r),s=this.#e.get(fn);return o(s.state,s.dispatch,s)}inline(e){if(this.#e==null)throw E_();const r=this.#e.get(fn);return e(r.state,r.dispatch,r)}}function OAe(n="cmdKey"){return rn((()=>()=>!1),n)}const ht=rn(new Lne,"commands"),sA=rn([Ao],"commandsTimer"),$v=Fc("CommandsReady"),zne=n=>{const e=new Lne;return e.setCtx(n),n.inject(ht,e).inject(sA,[Ao]).record($v),async()=>(await n.waitTimers(sA),n.done($v),()=>{n.remove(ht).remove(sA).clearTimer($v)})};pd(zne,{displayName:"Commands"});function DAe(n){const e=Bg(v8e,Gj,e8e,Lte);return n.Backspace=e,n}class Fne{constructor(){this.#t=null,this.#e=[],this.setCtx=e=>{this.#t=e},this.add=e=>(this.#e.push(e),()=>{this.#e=this.#e.filter(r=>r!==e)}),this.addObjectKeymap=e=>{const r=[];return Object.entries(e).forEach(([i,o])=>{if(typeof o=="function"){const s={key:i,onRun:()=>o};this.#e.push(s),r.push(()=>{this.#e=this.#e.filter(a=>a!==s)})}else this.#e.push(o),r.push(()=>{this.#e=this.#e.filter(s=>s!==o)})}),()=>{r.forEach(i=>i())}},this.addBaseKeymap=()=>{const e=DAe(g8e);return this.addObjectKeymap(e)},this.build=()=>{const e={};return this.#e.forEach(i=>{e[i.key]=[...e[i.key]||[],i]}),Object.fromEntries(Object.entries(e).map(([i,o])=>{const s=o.sort((l,c)=>(c.priority??50)-(l.priority??50));return[i,(l,c,u)=>{const d=this.#t;if(d==null)throw f3();const h=s.map(m=>m.onRun(d));return Bg(...h)(l,c,u)}]}))}}#t;#e;get ctx(){return this.#t}}const JS=rn(new Fne,"keymap"),aA=rn([Ao],"keymapTimer"),Bv=Fc("KeymapReady"),IAe=n=>{const e=new Fne;return e.setCtx(n),n.inject(JS,e).inject(aA,[Ao]).record(Bv),async()=>(await n.waitTimers(aA),n.done(Bv),()=>{n.remove(JS).remove(aA).clearTimer(Bv)})},M4=Fc("ParserReady"),$ne=(()=>{throw f3()}),H0=rn($ne,"parser"),lA=rn([],"parserTimer"),Bne=n=>(n.inject(H0,$ne).inject(lA,[Ao]).record(M4),async()=>{await n.waitTimers(lA);const e=n.get(Mp),r=n.get(vl);return n.set(H0,C7e.create(r,e)),n.done(M4),()=>{n.remove(H0).remove(lA).clearTimer(M4)}});pd(Bne,{displayName:"Parser"});const Hv=Fc("SerializerReady"),cA=rn([],"serializerTimer"),Hne=(()=>{throw f3()}),q0=rn(Hne,"serializer"),qne=n=>(n.inject(q0,Hne).inject(cA,[Ao]).record(Hv),async()=>{await n.waitTimers(cA);const e=n.get(Mp),r=n.get(vl);return n.set(q0,A7e.create(r,e)),n.done(Hv),()=>{n.remove(q0).remove(cA).clearTimer(Hv)}});pd(qne,{displayName:"Serializer"});const E4=rn("","defaultValue"),N4=rn(n=>n,"stateOptions"),uA=rn([],"editorStateTimer"),j4=Fc("EditorStateReady");function RAe(n,e,r){if(typeof n=="string")return e(n);if(n.type==="html")return Gp.fromSchema(r).parse(n.dom);if(n.type==="json")return $u.fromJSON(r,n.value);throw p5e(n)}const LAe=new lr("MILKDOWN_STATE_TRACKER"),Vne=n=>(n.inject(E4,"").inject(Ky,{}).inject(N4,e=>e).inject(uA,[M4,Hv,$v,Bv]).record(j4),async()=>{await n.waitTimers(uA);const e=n.get(vl),r=n.get(H0),i=n.get(Mx),o=n.get(N4),s=n.get(Zu),a=n.get(E4),l=RAe(a,r,e),c=n.get(JS),u=c.addBaseKeymap(),d=[...s,new ar({key:LAe,state:{init:()=>{},apply:(m,v,x,b)=>{n.set(Ky,b)}}}),T8e({rules:i}),Jte(c.build())];n.set(Zu,d);const h=o({schema:e,doc:l,plugins:d}),f=Kj.create(h);return n.set(Ky,f),n.done(j4),()=>{u(),n.remove(E4).remove(Ky).remove(N4).remove(uA).clearTimer(j4)}});pd(Vne,{displayName:"EditorState"});const Ox=rn([],"pasteRule"),dA=rn([Ao],"pasteRuleTimer"),O4=Fc("PasteRuleReady"),Wne=n=>(n.inject(Ox,[]).inject(dA,[Ao]).record(O4),async()=>(await n.waitTimers(dA),n.done(O4),()=>{n.remove(Ox).remove(dA).clearTimer(O4)}));pd(Wne,{displayName:"PasteRule"});const D4=Fc("EditorViewReady"),hA=rn([],"editorViewTimer"),qv=rn({},"editorViewOptions"),I4=rn(null,"root"),cM=rn(null,"rootDOM"),uM=rn({},"rootAttrs");function zAe(n,e){const r=document.createElement("div");r.className="milkdown",n.appendChild(r),e.set(cM,r);const i=e.get(uM);return Object.entries(i).forEach(([o,s])=>r.setAttribute(o,s)),r}function FAe(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const $Ae=new lr("MILKDOWN_VIEW_CLEAR"),Une=n=>(n.inject(I4,document.body).inject(fn,{}).inject(qv,{}).inject(cM,null).inject(uM,{}).inject(hA,[j4,O4]).record(D4),async()=>{await n.wait(Ep);const e=n.get(I4)||document.body,r=typeof e=="string"?document.querySelector(e):e;n.update(Zu,c=>[new ar({key:$Ae,view:u=>{const d=r?zAe(r,n):void 0;return(()=>{if(d&&r){const f=u.dom;r.replaceChild(d,f),d.appendChild(f)}})(),{destroy:()=>{d?.parentNode&&d?.parentNode.replaceChild(u.dom,d),d?.remove()}}}}),...c]),await n.waitTimers(hA);const i=n.get(Ky),o=n.get(qv),s=Object.fromEntries(n.get(Nx)),a=Object.fromEntries(n.get(jx)),l=new cO(r,{state:i,nodeViews:s,markViews:a,transformPasted:(c,u,d)=>(n.get(Ox).sort((h,f)=>(f.priority??50)-(h.priority??50)).map(h=>h.run).forEach(h=>{c=h(c,u,d)}),c),...o});return FAe(l.dom),n.set(fn,l),n.done(D4),()=>{l?.destroy(),n.remove(I4).remove(fn).remove(qv).remove(cM).remove(uM).remove(hA).clearTimer(D4)}});pd(Une,{displayName:"EditorView"});var QS=(n=>(n.Idle="Idle",n.OnCreate="OnCreate",n.Created="Created",n.OnDestroy="OnDestroy",n.Destroyed="Destroyed",n))(QS||{});class uO{constructor(){this.#t=!1,this.#e="Idle",this.#r=[],this.#n=()=>{},this.#a=new bee,this.#i=new A5e,this.#o=new Map,this.#s=new Map,this.#l=new Oj(this.#a,this.#i),this.#u=()=>{const e=NAe(async i=>{await Promise.all(this.#r.map(o=>Promise.resolve(o(i))))}),r=[Rne,Bne,qne,zne,IAe,Wne,Vne,Une,jAe(this),e];this.#c(r,this.#s)},this.#c=(e,r)=>{e.forEach(i=>{const o=this.#l.produce(this.#t?i.meta:void 0),s=i(o);r.set(i,{ctx:o,handler:s,cleanup:void 0})})},this.#d=(e,r=!1)=>Promise.all([e].flat().map(async i=>{const s=this.#o.get(i)?.cleanup;return r?this.#o.delete(i):this.#o.set(i,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s})),this.#f=async()=>{await Promise.all([...this.#s.entries()].map(async([e,{cleanup:r}])=>typeof r=="function"?r():r)),this.#s.clear()},this.#h=e=>{this.#e=e,this.#n(e)},this.#p=e=>[...e.entries()].map(async([r,i])=>{const{ctx:o,handler:s}=i;if(!s)return;const a=await s();e.set(r,{ctx:o,handler:s,cleanup:a})}),this.enableInspector=(e=!0)=>(this.#t=e,this),this.onStatusChange=e=>(this.#n=e,this),this.config=e=>(this.#r.push(e),this),this.removeConfig=e=>(this.#r=this.#r.filter(r=>r!==e),this),this.use=e=>{const r=[e].flat();return r.flat().forEach(i=>{this.#o.set(i,{ctx:void 0,handler:void 0,cleanup:void 0})}),this.#e==="Created"&&this.#c(r,this.#o),this},this.remove=async e=>this.#e==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(r=>{setTimeout(()=>{r(this.remove(e))},50)})):(await this.#d([e].flat(),!0),this),this.create=async()=>this.#e==="OnCreate"?this:(this.#e==="Created"&&await this.destroy(),this.#h("OnCreate"),this.#u(),this.#c([...this.#o.keys()],this.#o),await Promise.all([this.#p(this.#s),this.#p(this.#o)].flat()),this.#h("Created"),this),this.destroy=async(e=!1)=>this.#e==="Destroyed"||this.#e==="OnDestroy"?this:this.#e==="OnCreate"?new Promise(r=>{setTimeout(()=>{r(this.destroy(e))},50)}):(e&&(this.#r=[]),this.#h("OnDestroy"),await this.#d([...this.#o.keys()],e),await this.#f(),this.#h("Destroyed"),this),this.action=e=>e(this.#l),this.inspect=()=>this.#t?[...this.#s.values(),...this.#o.values()].map(({ctx:e})=>e?.inspector?.read()).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new uO}#t;#e;#r;#n;#a;#i;#o;#s;#l;#u;#c;#d;#f;#h;#p;get ctx(){return this.#l}get status(){return this.#e}}const BAe={fontSize:14,theme:"dark",wordWrap:!0,showPreview:!1,previewPosition:"right",showMinimap:!0,fontFamily:"system",autoSave:!0,autoSaveDelay:3e3,defaultEditorMode:"wysiwyg"},Pn=El((n,e)=>({content:"",filePath:null,isDirty:!1,settings:BAe,showPreview:!1,editorMode:"wysiwyg",pendingFootnoteScroll:null,milkdownEditor:null,monacoEditor:null,setContent:r=>{n({content:r,isDirty:!0})},loadFile:async r=>{Ye.store("Editor","loadFile called",{filePath:r});try{Ye.ipc("editor.loadFile",{filePath:r});const i=await window.electron.editor.loadFile(r);if(Ye.ipc("editor.loadFile response",i),i.success&&i.content!==void 0)n({content:i.content,filePath:r,isDirty:!1}),Ye.store("Editor","File loaded successfully",{contentLength:i.content.length});else throw new Error(i.error||"Failed to load file")}catch(i){throw Ye.error("Editor",i),i}},saveFile:async()=>{const{content:r,filePath:i}=e();if(Ye.store("Editor","saveFile called",{filePath:i,contentLength:r.length}),!i)throw new Error("No file path specified. Use saveFileAs instead.");try{Ye.ipc("editor.saveFile",{filePath:i,contentLength:r.length});const o=await window.electron.editor.saveFile(i,r);if(Ye.ipc("editor.saveFile response",o),o.success)n({isDirty:!1}),Ye.store("Editor","File saved successfully");else throw new Error(o.error||"Failed to save file")}catch(o){throw Ye.error("Editor",o),o}},saveFileAs:async r=>{const{content:i}=e();Ye.store("Editor","saveFileAs called",{newFilePath:r,contentLength:i.length});try{Ye.ipc("editor.saveFile",{filePath:r,contentLength:i.length});const o=await window.electron.editor.saveFile(r,i);if(Ye.ipc("editor.saveFile response",o),o.success)n({filePath:r,isDirty:!1}),Ye.store("Editor","File saved successfully as",{newFilePath:r});else throw new Error(o.error||"Failed to save file")}catch(o){throw Ye.error("Editor",o),o}},updateSettings:r=>{n(i=>({settings:{...i.settings,...r}}))},togglePreview:()=>{n(r=>({showPreview:!r.showPreview}))},toggleStats:()=>{Ye.store("Editor","toggleStats called (no-op)")},toggleEditorMode:()=>{n(r=>{const i=r.editorMode==="wysiwyg"?"source":"wysiwyg";return Ye.store("Editor","toggleEditorMode",{from:r.editorMode,to:i}),{editorMode:i}})},setEditorMode:r=>{Ye.store("Editor","setEditorMode",{mode:r}),n({editorMode:r})},initializeEditorMode:()=>{const{settings:r}=e(),i=r.defaultEditorMode||"wysiwyg";Ye.store("Editor","initializeEditorMode",{mode:i}),n({editorMode:i})},setMonacoEditor:r=>{n({monacoEditor:r})},insertText:r=>{n(i=>({content:i.content+r,isDirty:!0}))},insertCitation:r=>{const i=`[@${r}]`;e().insertText(i)},saveCurrentFile:async()=>{await e().saveFile()},createNewFile:()=>{Ye.store("Editor","createNewFile called"),n({content:"",filePath:null,isDirty:!1})},insertFormatting:r=>{Ye.store("Editor","insertFormatting called",{type:r});const{content:i}=e(),o=e().milkdownEditor;if(r==="footnote"){if(!o){Ye.error("Editor","No editor available for footnote insertion");return}try{o.action(a=>{const l=a.get(fn),{state:c}=l,{selection:u}=c,h=c.doc.textBetween(0,u.from,`
`).length,f=i;let m=0,v=0,x=0;for(;x<f.length&&v<h;){const b=f[x],w=f.slice(x);if((x===0||f[x-1]===`
`)&&b==="#"){for(;x<f.length&&f[x]==="#";)x++;f[x]===" "&&x++;continue}if((b==="*"||b==="_")&&w.length>1)if(w[1]===b){x+=2;continue}else{x++;continue}if(b==="]"&&w.length>1&&w[1]==="("){for(x+=2;x<f.length&&f[x]!==")";)x++;x<f.length&&x++;continue}if(b==="`"&&w.startsWith("```")){x+=3;const S=f.indexOf("```",x);S!==-1&&(x=S+3);continue}if(b==="`"){x++;continue}if(b===`
`){for(v++,x++;x<f.length&&f[x]===`
`;)x++;m=x;continue}v++,x++,m=x}Ye.store("Editor","Footnote insertion",{cursorPos:u.from,plainTextLength:h,markdownPos:m}),e().insertFootnoteAtPosition(m)})}catch{Ye.error("Editor","Failed to insert footnote")}return}let s="";switch(r){case"bold":s="**texte en gras**";break;case"italic":s="_texte en italique_";break;case"link":s="[texte du lien](url)";break;case"citation":s="[@cl_citation]";break;case"table":s=`
| Colonne 1 | Colonne 2 |
|-----------|----------|
| Cellule 1 | Cellule 2 |
`;break;case"blockquote":s=`
> Citation ou bloc de texte important
> Continuation de la citation
`;break}if(o)try{o.action(a=>{const l=a.get(fn),{state:c}=l,{tr:u,selection:d}=c;u.insertText(s,d.from,d.to),l.dispatch(u),l.focus()}),n({isDirty:!0})}catch{Ye.error("Editor","Failed to insert at cursor, appending to content"),n({content:i+s,isDirty:!0})}else n({content:i+s,isDirty:!0})},insertTextAtCursor:r=>{Ye.store("Editor","insertTextAtCursor called",{text:r});const i=e().milkdownEditor;if(i)try{i.action(o=>{const s=o.get(fn),{state:a}=s,{tr:l,selection:c}=a;l.insertText(r,c.from,c.to),s.dispatch(l),s.focus()}),n({isDirty:!0})}catch{Ye.error("Editor","Failed to insert text at cursor")}},insertFootnoteAtPosition:r=>{const{content:i}=e(),s=(i.match(/\[\^(\d+)\]/g)||[]).map(x=>{const b=x.match(/\[\^(\d+)\]/);return b?parseInt(b[1],10):0}),a=s.length>0?Math.max(...s)+1:1,l=`[^${a}]`,c=`[^${a}]: `,u=i.slice(0,r),d=i.slice(r),h=/\n\n(\[\^\d+\]:[\s\S]*)$/,f=d.match(h);let m,v;if(f){const x=d.slice(0,f.index),b=f[1].trimEnd();m=u+l+x+`

`+b+`

`+c,v=m.length}else{const x=d.trimEnd();m=u+l+x+`

`+c,v=u.length+l.length+x.length+2+c.length}return Ye.store("Editor","Footnote inserted at position",{number:a,position:r,definitionPosition:v}),n({content:m,isDirty:!0,pendingFootnoteScroll:v}),{definitionPosition:v,footnoteNumber:a}},clearPendingFootnoteScroll:()=>{n({pendingFootnoteScroll:null})}})),gq=Object.freeze(Object.defineProperty({__proto__:null,useEditorStore:Pn},Symbol.toStringTag,{value:"Module"})),HAe=()=>{const{t:n}=qt("common"),{settings:e,updateSettings:r}=Pn(),[i,o]=M.useState({topK:10,similarityThreshold:.2,chunkingConfig:"cpuOptimized",summaryGeneration:"extractive",summaryMaxLength:750,useGraphContext:!1,graphSimilarityThreshold:.7,additionalGraphDocs:3,explorationSimilarityThreshold:.7,includeSummaries:!0,enableTopicModeling:!1,customChunkingEnabled:!1,customMaxChunkSize:500,customMinChunkSize:100,customOverlapSize:75,enableQualityFiltering:!0,minChunkEntropy:.3,minUniqueWordRatio:.4,enablePreprocessing:!0,enableOCRCleanup:!0,enableHeaderFooterRemoval:!0,enableDeduplication:!0,enableSimilarityDedup:!1,dedupSimilarityThreshold:.85,useSemanticChunking:!1,semanticSimilarityThreshold:.7,semanticWindowSize:3,enableContextCompression:!0}),[s,a]=M.useState({backend:"ollama",ollamaURL:"http://127.0.0.1:11434",ollamaEmbeddingModel:"nomic-embed-text",ollamaChatModel:"gemma2:2b",embeddingStrategy:"nomic-fallback"}),[l,c]=M.useState({fontSize:14,wordWrap:!0,showMinimap:!0,fontFamily:"system",defaultEditorMode:"wysiwyg"}),[u,d]=M.useState({userId:"",apiKey:"",autoSync:!1}),[h,f]=M.useState([]),[m,v]=M.useState(!1),[x,b]=M.useState(""),[w,S]=M.useState("success");M.useEffect(()=>{P(),_()},[]);const _=async()=>{try{const E=await window.electron.ollama.listModels();E.success&&E.models&&f(E.models.map(L=>L.name||L.id))}catch(E){console.error("Failed to refresh Ollama models:",E)}};M.useEffect(()=>{c({fontSize:e.fontSize,wordWrap:e.wordWrap,showMinimap:e.showMinimap,fontFamily:e.fontFamily,defaultEditorMode:e.defaultEditorMode||"wysiwyg"})},[e]);const P=async()=>{try{const E=await window.electron.config.get("rag"),L=await window.electron.config.get("llm"),$=await window.electron.config.get("editor"),z=await window.electron.config.get("zotero");E&&o({topK:10,similarityThreshold:.2,chunkingConfig:"cpuOptimized",summaryGeneration:"extractive",summaryMaxLength:750,useGraphContext:!1,graphSimilarityThreshold:.7,additionalGraphDocs:3,explorationSimilarityThreshold:.7,includeSummaries:!0,enableTopicModeling:!1,...E}),L&&a({backend:"ollama",ollamaURL:"http://127.0.0.1:11434",ollamaEmbeddingModel:"nomic-embed-text",ollamaChatModel:"gemma2:2b",embeddingStrategy:"nomic-fallback",...L}),$&&c($),z&&d(z)}catch(E){console.error("Failed to load config:",E)}},A=async()=>{v(!0),b("");try{await window.electron.config.set("rag",i),await window.electron.config.set("llm",s),await window.electron.config.set("editor",l),await window.electron.config.set("zotero",u),r({fontSize:l.fontSize,wordWrap:l.wordWrap,showMinimap:l.showMinimap,fontFamily:l.fontFamily,defaultEditorMode:l.defaultEditorMode}),S("success"),b(" "+n("settings.saved"))}catch(E){console.error("Failed to save config:",E),S("error"),b(" "+n("settings.saveError"))}finally{v(!1)}},T=async()=>{if(window.confirm(n("settings.resetConfirm")))try{o({topK:10,similarityThreshold:.2,chunkingConfig:"cpuOptimized",summaryGeneration:"extractive",summaryMaxLength:750,useGraphContext:!1,graphSimilarityThreshold:.7,additionalGraphDocs:3,explorationSimilarityThreshold:.7,includeSummaries:!0,enableTopicModeling:!1}),a({backend:"ollama",ollamaURL:"http://127.0.0.1:11434",ollamaEmbeddingModel:"nomic-embed-text",ollamaChatModel:"gemma2:2b",embeddingStrategy:"nomic-fallback"}),c({fontSize:14,wordWrap:!0,showMinimap:!0,fontFamily:"system",defaultEditorMode:"wysiwyg"}),await A()}catch(E){console.error("Failed to reset config:",E)}};return p.jsxs("div",{className:"config-panel",children:[p.jsx("div",{className:"config-header",children:p.jsxs("div",{className:"config-actions",children:[x&&p.jsx("span",{className:`save-message ${w}`,children:x}),p.jsx("button",{className:"toolbar-btn",onClick:T,title:n("settings.tooltipReset"),children:p.jsx(OQ,{size:20,strokeWidth:1})}),p.jsx("button",{className:"toolbar-btn",onClick:A,disabled:m,title:n(m?"settings.saving":"settings.tooltipSave"),children:p.jsx(r3,{size:20,strokeWidth:1})})]})}),p.jsxs("div",{className:"config-content",children:[p.jsx(Owe,{}),p.jsx(l5e,{}),p.jsx(Twe,{config:i,onChange:o}),p.jsx(Pwe,{config:s,onChange:a,availableModels:h,onRefreshModels:_}),p.jsx(Mwe,{}),p.jsx(d5e,{}),p.jsx(Ewe,{config:l,onChange:c}),p.jsx(h5e,{config:u,onChange:d}),p.jsx(c5e,{})]})]})},qAe=({isOpen:n,onClose:e})=>{const{t:r}=qt("common");return n?p.jsx("div",{className:"settings-modal",onClick:e,children:p.jsxs("div",{className:"settings-content",onClick:i=>i.stopPropagation(),children:[p.jsxs("div",{className:"settings-header",children:[p.jsx("h3",{children:r("settings.title")}),p.jsx("button",{className:"close-btn",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsx("div",{className:"settings-body",children:p.jsx(HAe,{})})]})}):null},Kne=({isOpen:n,onClose:e})=>{const{currentProject:r}=zc(),{content:i}=Pn(),[o,s]=M.useState(""),[a,l]=M.useState(""),[c,u]=M.useState(""),[d,h]=M.useState(!1),[f,m]=M.useState({stage:"",message:"",progress:0}),[v,x]=M.useState(null),[b,w]=M.useState(!1),[S,_]=M.useState(!1),[P,A]=M.useState(!1),[T,E]=M.useState(!1);M.useEffect(()=>{n&&!S&&L()},[n]),M.useEffect(()=>{r&&n&&(s(r.name),u(`${r.path}/${r.name}.pdf`))},[r,n]),M.useEffect(()=>{if(!n)return;const D=window.electron.pdfExport.onProgress(Y=>{m(Y)});return()=>{D()}},[n]);const L=async()=>{try{const D=await window.electron.pdfExport.checkDependencies();A(D.pandoc),E(D.xelatex),_(!0),(!D.pandoc||!D.xelatex)&&x(`Dpendances manquantes:
${D.pandoc?"":`- Pandoc (installez avec: brew install pandoc)
`}${D.xelatex?"":"- XeLaTeX (installez avec: brew install --cask mactex)"}`)}catch(D){x("Erreur lors de la vrification des dpendances: "+D.message)}},$=async()=>{try{const D=await window.electron.dialog.saveFile({defaultPath:c,filters:[{name:"PDF",extensions:["pdf"]},{name:"Tous les fichiers",extensions:["*"]}]});!D.canceled&&D.filePath&&u(D.filePath)}catch(D){console.error("Failed to select output path:",D)}},z=async()=>{if(!r){x("Aucun projet ouvert");return}if(!o){x("Veuillez entrer un titre");return}if(!P||!T){x("Dpendances manquantes. Veuillez les installer avant de continuer.");return}h(!0),x(null),w(!1);try{let D=i;if(r.type==="presentation")try{const U=`${r.path}/slides.md`;D=await window.electron.fs.readFile(U)}catch{x("Impossible de lire slides.md. Assurez-vous que le fichier existe."),h(!1);return}let Y;if(r.type==="presentation")try{const U=`${r.path}/beamer-config.json`;if(await window.electron.fs.exists(U)){const te=await window.electron.fs.readFile(U);Y=JSON.parse(te),console.log(" Beamer configuration loaded:",Y)}}catch{console.warn("No Beamer config found, using defaults")}const I=await window.electron.pdfExport.export({projectPath:r.path,projectType:r.type,content:D,outputPath:c,bibliographyPath:r.bibliography,cslPath:r.cslPath,metadata:{title:o,author:a||"ClioDesk",date:new Date().toLocaleDateString("fr-FR")},beamerConfig:Y});I.success?(w(!0),setTimeout(()=>{e(),h(!1),w(!1),x(null),m({stage:"",message:"",progress:0})},2e3)):(x(I.error||"Erreur inconnue lors de l'export"),h(!1))}catch(D){x("Erreur lors de l'export: "+D.message),h(!1)}},B=()=>{d||(e(),x(null),w(!1),m({stage:"",message:"",progress:0}))};return n?p.jsx("div",{className:"pdf-export-modal",onClick:B,children:p.jsxs("div",{className:"pdf-export-content",onClick:D=>D.stopPropagation(),children:[p.jsxs("div",{className:"pdf-export-header",children:[p.jsx("h3",{children:"Export PDF"}),p.jsx("button",{className:"close-btn",onClick:B,disabled:d,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"pdf-export-body",children:[S&&p.jsxs("div",{className:"dependency-status",children:[p.jsxs("div",{className:`dependency-item ${P?"success":"error"}`,children:[P?p.jsx(Fu,{size:16}):p.jsx(ml,{size:16}),p.jsxs("span",{children:["Pandoc ",P?"install":"manquant"]})]}),p.jsxs("div",{className:`dependency-item ${T?"success":"error"}`,children:[T?p.jsx(Fu,{size:16}):p.jsx(ml,{size:16}),p.jsxs("span",{children:["XeLaTeX ",T?"install":"manquant"]})]})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Titre du document"}),p.jsx("input",{type:"text",value:o,onChange:D=>s(D.target.value),placeholder:"Mon document",disabled:d})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Auteur (optionnel)"}),p.jsx("input",{type:"text",value:a,onChange:D=>l(D.target.value),placeholder:"Votre nom",disabled:d})]}),(r?.type==="article"||r?.type==="book")&&p.jsxs("div",{style:{fontSize:"0.875rem",color:"#888",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[" Le rsum sera automatiquement lu depuis le fichier ",p.jsx("code",{style:{color:"#4ec9b0"},children:"abstract.md"})," de votre projet"]}),r?.type==="presentation"&&p.jsxs("div",{style:{fontSize:"0.875rem",color:"#888",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[" Prsentation Beamer : Le contenu sera lu depuis ",p.jsx("code",{style:{color:"#4ec9b0"},children:"slides.md"}),p.jsx("br",{}),p.jsx("br",{}),p.jsx("strong",{children:"Syntaxe :"}),p.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[p.jsxs("li",{children:[p.jsx("code",{children:"#"})," Titre de slide (niveau 1)"]}),p.jsxs("li",{children:[p.jsx("code",{children:"##"})," Sous-titre (niveau 2)"]}),p.jsxs("li",{children:[p.jsx("code",{children:"::: notes"})," ... ",p.jsx("code",{children:":::"})," Notes de prsentateur"]})]})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Fichier de sortie"}),p.jsxs("div",{className:"path-selector",children:[p.jsx("input",{type:"text",value:c,onChange:D=>u(D.target.value),placeholder:"/chemin/vers/fichier.pdf",disabled:d}),p.jsx("button",{onClick:$,disabled:d,children:"Parcourir"})]})]}),d&&p.jsxs("div",{className:"export-progress",children:[p.jsx("div",{className:"progress-bar-container",children:p.jsx("div",{className:"progress-bar",style:{width:`${f.progress}%`}})}),p.jsx("p",{className:"progress-message",children:f.message})]}),v&&p.jsxs("div",{className:"export-error",children:[p.jsx(ml,{size:16}),p.jsx("span",{children:v})]}),b&&p.jsxs("div",{className:"export-success",children:[p.jsx(Fu,{size:16}),p.jsxs("span",{children:["Export russi! PDF cr : ",c]})]})]}),p.jsxs("div",{className:"pdf-export-footer",children:[p.jsx("button",{className:"btn-cancel",onClick:B,disabled:d,children:"Annuler"}),p.jsxs("button",{className:"btn-export",onClick:z,disabled:d||!P||!T||!o,children:[p.jsx(t3,{size:16}),d?"Export en cours...":"Exporter"]})]})]})}):null},VAe=({isOpen:n,onClose:e})=>{const{currentProject:r}=zc(),{content:i}=Pn(),[o,s]=M.useState(""),[a,l]=M.useState(""),[c,u]=M.useState(""),[d,h]=M.useState(!1),[f,m]=M.useState({stage:"",message:"",progress:0}),[v,x]=M.useState(null),[b,w]=M.useState(!1),[S,_]=M.useState(!1),[P,A]=M.useState(null);M.useEffect(()=>{r&&n&&(s(r.name),u(`${r.path}/${r.name}.docx`),T())},[r,n]),M.useEffect(()=>{if(!n)return;const z=window.electron.wordExport.onProgress(B=>{m(B)});return()=>{z()}},[n]);const T=async()=>{if(r)try{const z=await window.electron.wordExport.findTemplate(r.path);z.success&&z.templatePath?(_(!0),A(z.templatePath),console.log(" Word template found:",z.templatePath)):(_(!1),A(null))}catch(z){console.error("Failed to check for template:",z),_(!1)}},E=async()=>{try{const z=await window.electron.dialog.saveFile({defaultPath:c,filters:[{name:"Word Document",extensions:["docx"]},{name:"Tous les fichiers",extensions:["*"]}]});!z.canceled&&z.filePath&&u(z.filePath)}catch(z){console.error("Failed to select output path:",z)}},L=async()=>{if(!r){x("Aucun projet ouvert");return}if(!o){x("Veuillez entrer un titre");return}h(!0),x(null),w(!1);try{let z=i;if(r.type==="presentation")try{const D=`${r.path}/slides.md`;z=await window.electron.fs.readFile(D)}catch{x("Impossible de lire slides.md. Assurez-vous que le fichier existe."),h(!1);return}const B=await window.electron.wordExport.export({projectPath:r.path,projectType:r.type,content:z,outputPath:c,bibliographyPath:r.bibliography,cslPath:r.cslPath,templatePath:P||void 0,metadata:{title:o,author:a||"ClioDesk",date:new Date().toLocaleDateString("fr-FR")}});B.success?(w(!0),setTimeout(()=>{e(),h(!1),w(!1),x(null),m({stage:"",message:"",progress:0})},2e3)):(x(B.error||"Erreur inconnue lors de l'export"),h(!1))}catch(z){x("Erreur lors de l'export: "+z.message),h(!1)}},$=()=>{d||(e(),x(null),w(!1),m({stage:"",message:"",progress:0}))};return n?p.jsx("div",{className:"pdf-export-modal",onClick:$,children:p.jsxs("div",{className:"pdf-export-content",onClick:z=>z.stopPropagation(),children:[p.jsxs("div",{className:"pdf-export-header",children:[p.jsx("h3",{children:"Export Word (.docx)"}),p.jsx("button",{className:"close-btn",onClick:$,disabled:d,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"pdf-export-body",children:[S&&P&&p.jsxs("div",{style:{fontSize:"0.875rem",color:"#4CAF50",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[p.jsx(Fu,{size:16,style:{display:"inline",marginRight:"0.5rem"}}),"Modle Word dtect: ",p.jsx("code",{style:{color:"#4ec9b0"},children:P.split("/").pop()})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Titre du document"}),p.jsx("input",{type:"text",value:o,onChange:z=>s(z.target.value),placeholder:"Mon document",disabled:d})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Auteur (optionnel)"}),p.jsx("input",{type:"text",value:a,onChange:z=>l(z.target.value),placeholder:"Votre nom",disabled:d})]}),(r?.type==="article"||r?.type==="book")&&p.jsxs("div",{style:{fontSize:"0.875rem",color:"#888",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[" Le rsum sera automatiquement lu depuis le fichier ",p.jsx("code",{style:{color:"#4ec9b0"},children:"abstract.md"})," de votre projet"]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Fichier de sortie"}),p.jsxs("div",{className:"path-selector",children:[p.jsx("input",{type:"text",value:c,onChange:z=>u(z.target.value),placeholder:"/chemin/vers/fichier.docx",disabled:d}),p.jsx("button",{onClick:E,disabled:d,children:"Parcourir"})]})]}),d&&p.jsxs("div",{className:"export-progress",children:[p.jsx("div",{className:"progress-bar-container",children:p.jsx("div",{className:"progress-bar",style:{width:`${f.progress}%`}})}),p.jsx("p",{className:"progress-message",children:f.message})]}),v&&p.jsxs("div",{className:"export-error",children:[p.jsx(ml,{size:16}),p.jsx("span",{children:v})]}),b&&p.jsxs("div",{className:"export-success",children:[p.jsx(Fu,{size:16}),p.jsxs("span",{children:["Export russi! Document Word cr : ",c]})]})]}),p.jsxs("div",{className:"pdf-export-footer",children:[p.jsx("button",{className:"btn-cancel",onClick:$,disabled:d,children:"Annuler"}),p.jsxs("button",{className:"btn-export",onClick:L,disabled:d||!o,children:[p.jsx(t3,{size:16}),d?"Export en cours...":"Exporter"]})]})]})}):null},yq={theme:"Madrid",colortheme:"default",fonttheme:"default",aspectratio:"169",navigation:!1,showNotes:!1,institute:"",logo:"",titlegraphic:"",showToc:!1,tocBeforeSection:!1,showFrameNumber:!0,frameNumberStyle:"total",showSectionNumber:!1,sectionNumberInToc:!1,showAuthorInFooter:!1,showTitleInFooter:!1,showDateInFooter:!1,incremental:!1,overlays:!1},WAe=[{value:"default",label:"Default"},{value:"AnnArbor",label:"Ann Arbor"},{value:"Antibes",label:"Antibes"},{value:"Bergen",label:"Bergen"},{value:"Berkeley",label:"Berkeley"},{value:"Berlin",label:"Berlin"},{value:"Boadilla",label:"Boadilla"},{value:"CambridgeUS",label:"Cambridge US"},{value:"Copenhagen",label:"Copenhagen"},{value:"Darmstadt",label:"Darmstadt"},{value:"Dresden",label:"Dresden"},{value:"Frankfurt",label:"Frankfurt"},{value:"Goettingen",label:"Goettingen"},{value:"Hannover",label:"Hannover"},{value:"Ilmenau",label:"Ilmenau"},{value:"JuanLesPins",label:"Juan Les Pins"},{value:"Luebeck",label:"Luebeck"},{value:"Madrid",label:"Madrid (dfaut)"},{value:"Malmoe",label:"Malmoe"},{value:"Marburg",label:"Marburg"},{value:"Montpellier",label:"Montpellier"},{value:"PaloAlto",label:"Palo Alto"},{value:"Pittsburgh",label:"Pittsburgh"},{value:"Rochester",label:"Rochester"},{value:"Singapore",label:"Singapore"},{value:"Szeged",label:"Szeged"},{value:"Warsaw",label:"Warsaw"}],UAe=[{value:"default",label:"Default"},{value:"albatross",label:"Albatross"},{value:"beaver",label:"Beaver"},{value:"beetle",label:"Beetle"},{value:"crane",label:"Crane"},{value:"dolphin",label:"Dolphin"},{value:"dove",label:"Dove"},{value:"fly",label:"Fly"},{value:"lily",label:"Lily"},{value:"orchid",label:"Orchid"},{value:"rose",label:"Rose"},{value:"seagull",label:"Seagull"},{value:"seahorse",label:"Seahorse"},{value:"whale",label:"Whale"},{value:"wolverine",label:"Wolverine"}],KAe=[{value:"default",label:"Default"},{value:"professionalfonts",label:"Professional"},{value:"serif",label:"Serif"},{value:"structurebold",label:"Structure Bold"},{value:"structureitalicserif",label:"Structure Italic Serif"},{value:"structuresmallcapsserif",label:"Structure Small Caps Serif"}],GAe=({projectPath:n,onConfigChange:e})=>{const{t:r}=qt("common"),[i,o]=M.useState(yq),[s,a]=M.useState(!1);M.useEffect(()=>{l()},[n]);const l=async()=>{try{const f=`${n}/beamer-config.json`;if(await window.electron.fs.exists(f)){const v=await window.electron.fs.readFile(f),x=JSON.parse(v);o({...yq,...x})}}catch(f){console.error("Failed to load Beamer config:",f)}},c=async f=>{a(!0);try{const m=`${n}/beamer-config.json`;await window.electron.fs.writeFile(m,JSON.stringify(f,null,2)),o(f),e?.(f)}catch(m){console.error("Failed to save Beamer config:",m),alert(r("beamer.saveError"))}finally{a(!1)}},u=(f,m)=>{const v={...i,[f]:m};c(v)},d=(f,m)=>{o({...i,[f]:m})},h=f=>{c(i)};return p.jsxs("div",{className:"beamer-config",children:[p.jsxs("div",{className:"config-header",children:[p.jsx(vj,{size:18}),p.jsx("h4",{children:r("beamer.title")})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h5",{style:{margin:"0 0 0.75rem 0",color:"#ccc",fontSize:"0.9rem",fontWeight:600},children:r("beamer.appearance")}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.mainTheme")}),p.jsx("select",{value:i.theme,onChange:f=>u("theme",f.target.value),disabled:s,children:WAe.map(f=>p.jsx("option",{value:f.value,children:f.label},f.value))})]}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.colorTheme")}),p.jsx("select",{value:i.colortheme,onChange:f=>u("colortheme",f.target.value),disabled:s,children:UAe.map(f=>p.jsx("option",{value:f.value,children:f.label},f.value))})]}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.fontTheme")}),p.jsx("select",{value:i.fonttheme,onChange:f=>u("fonttheme",f.target.value),disabled:s,children:KAe.map(f=>p.jsx("option",{value:f.value,children:f.label},f.value))})]}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.aspectRatio")}),p.jsxs("select",{value:i.aspectratio,onChange:f=>u("aspectratio",f.target.value),disabled:s,children:[p.jsx("option",{value:"43",children:"4:3 (Standard)"}),p.jsx("option",{value:"169",children:"16:9 (Widescreen)"}),p.jsx("option",{value:"1610",children:"16:10"}),p.jsx("option",{value:"149",children:"14:9"}),p.jsx("option",{value:"141",children:"1.41:1"}),p.jsx("option",{value:"54",children:"5:4"}),p.jsx("option",{value:"32",children:"3:2"})]})]})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h5",{style:{margin:"0 0 0.75rem 0",color:"#ccc",fontSize:"0.9rem",fontWeight:600},children:r("beamer.titlePage")}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.institution")}),p.jsx("input",{type:"text",value:i.institute||"",onChange:f=>d("institute",f.target.value),onBlur:()=>h(),placeholder:r("beamer.institutionPlaceholder"),disabled:s,style:{width:"100%",padding:"0.5rem 0.75rem",backgroundColor:"#1e1e1e",color:"#ccc",border:"1px solid #3e3e42",borderRadius:"4px",fontSize:"var(--font-size-sm)"}})]}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.logo")}),p.jsx("input",{type:"text",value:i.logo||"",onChange:f=>d("logo",f.target.value),onBlur:()=>h(),placeholder:r("beamer.logoPlaceholder"),disabled:s,style:{width:"100%",padding:"0.5rem 0.75rem",backgroundColor:"#1e1e1e",color:"#ccc",border:"1px solid #3e3e42",borderRadius:"4px",fontSize:"var(--font-size-sm)"}})]})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h5",{style:{margin:"0 0 0.75rem 0",color:"#ccc",fontSize:"0.9rem",fontWeight:600},children:r("beamer.toc")}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showToc,onChange:f=>u("showToc",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showToc")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.tocBeforeSection,onChange:f=>u("tocBeforeSection",f.target.checked),disabled:s||!i.showToc}),p.jsx("span",{children:r("beamer.tocBeforeSection")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.sectionNumberInToc,onChange:f=>u("sectionNumberInToc",f.target.checked),disabled:s||!i.showToc}),p.jsx("span",{children:r("beamer.numberSectionsInToc")})]})})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h5",{style:{margin:"0 0 0.75rem 0",color:"#ccc",fontSize:"0.9rem",fontWeight:600},children:r("beamer.numbering")}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showFrameNumber,onChange:f=>u("showFrameNumber",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showFrameNumber")})]})}),p.jsxs("div",{className:"config-section",children:[p.jsx("label",{children:r("beamer.numberingStyle")}),p.jsxs("select",{value:i.frameNumberStyle,onChange:f=>u("frameNumberStyle",f.target.value),disabled:s||!i.showFrameNumber,children:[p.jsx("option",{value:"total",children:r("beamer.numberingWithTotal")}),p.jsx("option",{value:"simple",children:r("beamer.numberingSimple")}),p.jsx("option",{value:"none",children:r("beamer.numberingNone")})]})]}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showSectionNumber,onChange:f=>u("showSectionNumber",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.numberSections")})]})})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h5",{style:{margin:"0 0 0.75rem 0",color:"#ccc",fontSize:"0.9rem",fontWeight:600},children:r("beamer.footer")}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showAuthorInFooter,onChange:f=>u("showAuthorInFooter",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showAuthor")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showTitleInFooter,onChange:f=>u("showTitleInFooter",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showTitle")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showDateInFooter,onChange:f=>u("showDateInFooter",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showDate")})]})})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h5",{style:{margin:"0 0 0.75rem 0",color:"#ccc",fontSize:"0.9rem",fontWeight:600},children:r("beamer.advanced")}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.navigation,onChange:f=>u("navigation",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showNavigation")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.showNotes,onChange:f=>u("showNotes",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.showNotes")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.incremental,onChange:f=>u("incremental",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.incrementalLists")})]})}),p.jsx("div",{className:"config-section",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:i.overlays,onChange:f=>u("overlays",f.target.checked),disabled:s}),p.jsx("span",{children:r("beamer.overlays")})]})})]}),s&&p.jsx("div",{className:"config-saving",children:r("beamer.saving")}),p.jsxs("div",{className:"config-info",children:[p.jsx("p",{children:p.jsxs("strong",{children:[r("beamer.guide")," :"]})}),p.jsx("p",{style:{marginTop:"0.75rem",fontWeight:600},children:r("beamer.guideThemes")}),p.jsxs("ul",{children:[p.jsx("li",{children:r("beamer.guideThemesDesc1")}),p.jsx("li",{children:r("beamer.guideThemesDesc2")}),p.jsx("li",{children:r("beamer.guideThemesDesc3")}),p.jsx("li",{children:r("beamer.guideThemesDesc4")})]}),p.jsx("p",{style:{marginTop:"0.75rem",fontWeight:600},children:r("beamer.guideLogo")}),p.jsxs("ul",{children:[p.jsx("li",{children:r("beamer.guideLogoDesc1")}),p.jsx("li",{children:r("beamer.guideLogoDesc2")}),p.jsx("li",{children:r("beamer.guideLogoDesc3")})]}),p.jsx("p",{style:{marginTop:"0.75rem",fontWeight:600},children:r("beamer.guideToc")}),p.jsxs("ul",{children:[p.jsx("li",{children:r("beamer.guideTocDesc1")}),p.jsx("li",{children:r("beamer.guideTocDesc2")}),p.jsx("li",{children:r("beamer.guideTocDesc3")})]}),p.jsx("p",{style:{marginTop:"0.75rem",fontWeight:600},children:r("beamer.guideAdvanced")}),p.jsxs("ul",{children:[p.jsx("li",{children:r("beamer.guideAdvancedDesc1")}),p.jsx("li",{children:r("beamer.guideAdvancedDesc2")}),p.jsx("li",{children:r("beamer.guideAdvancedDesc3")})]})]})]})},YAe=({projectPath:n,currentCSL:e,onCSLChange:r})=>{const{t:i}=qt("common"),[o,s]=M.useState(e),[a,l]=M.useState(!1);M.useEffect(()=>{s(e)},[e]);const c=async()=>{try{const f=await window.electron.dialog.openFile({properties:["openFile"],filters:[{name:"CSL Files",extensions:["csl"]},{name:"All Files",extensions:["*"]}]});if(!f.canceled&&f.filePaths&&f.filePaths.length>0){const m=f.filePaths[0];await u(m)}}catch(f){console.error("Failed to select CSL file:",f),alert(i("project.cslSelectError")||"Error selecting CSL file")}},u=async f=>{l(!0);try{const m=`${n}/project.json`,v=await window.electron.project.setCSLPath({projectPath:m,cslPath:f});if(!v.success)throw new Error(v.error||"Failed to save CSL path");const x=v.cslPath||f;s(x),r?.(),console.log(" CSL path saved:",x)}catch(m){console.error("Failed to save CSL path:",m),alert(i("project.cslSaveError")||"Error saving CSL path")}finally{l(!1)}},d=async()=>{l(!0);try{const f=`${n}/project.json`;await window.electron.project.setCSLPath({projectPath:f,cslPath:void 0}),s(void 0),r?.(),console.log(" CSL path removed")}catch(f){console.error("Failed to remove CSL path:",f),alert(i("project.cslRemoveError")||"Error removing CSL path")}finally{l(!1)}},h=f=>f.split("/").pop()||f;return p.jsxs("div",{className:"csl-settings",children:[p.jsx("div",{className:"csl-settings-header",children:p.jsxs("label",{className:"csl-label",children:[p.jsx(Po,{size:16}),i("project.citationStyle")]})}),o?p.jsxs("div",{className:"csl-selected",children:[p.jsxs("div",{className:"csl-file-info",children:[p.jsx("span",{className:"csl-file-icon",children:""}),p.jsx("span",{className:"csl-file-name",children:h(o)})]}),p.jsx("button",{className:"csl-remove-btn",onClick:d,disabled:a,title:"Remove CSL",children:p.jsx(Vr,{size:16})})]}):p.jsx("div",{className:"csl-empty",children:p.jsx("p",{className:"csl-empty-text",children:i("project.noCslSelected")})}),p.jsx("button",{className:"csl-select-btn",onClick:c,disabled:a,children:o?i("project.selectCSL").replace("Slectionner","Changer"):i("project.selectCSL")}),p.jsx("small",{className:"csl-help-text",children:i("project.cslHelp")})]})},ZAe=()=>{const{t:n}=qt("common"),[e,r]=M.useState({totalDocuments:0,totalChunks:0,databasePath:""}),[i,o]=M.useState({sourceCount:0,chunkCount:0,databasePath:""}),[s,a]=M.useState(!1),[l,c]=M.useState(!1);M.useEffect(()=>{u(),d()},[]);const u=async()=>{try{const x=await window.electron.pdf.getStatistics();x.success&&x.statistics&&r({totalDocuments:x.statistics.totalDocuments||0,totalChunks:x.statistics.totalChunks||0,databasePath:x.statistics.databasePath||""})}catch(x){console.error("Failed to load stats:",x)}},d=async()=>{try{const x=await window.electron.tropy.getStatistics();x.success&&x.statistics&&o({sourceCount:x.statistics.sourceCount||0,chunkCount:x.statistics.chunkCount||0,databasePath:x.databasePath||""})}catch(x){console.error("Failed to load primary sources stats:",x)}},h=async()=>{const x=n("actions.purgeDatabase.confirmMessage",{totalDocuments:e.totalDocuments,totalChunks:e.totalChunks});if(window.confirm(x)&&window.confirm(n("actions.purgeDatabase.finalConfirm"))){a(!0);try{const b=await window.electron.pdf.purge();b.success?(console.log(" Database purged successfully"),alert(n("actions.purgeDatabase.success"))):(console.error(" Failed to purge database:",b.error),alert(n("actions.purgeDatabase.error",{error:b.error}))),await u()}catch(b){console.error("Failed to purge database:",b),alert(n("actions.purgeDatabase.error",{error:String(b)}))}finally{a(!1)}}},f=async()=>{const x=n("actions.purgePrimaryDatabase.confirmMessage",{sourceCount:i.sourceCount,chunkCount:i.chunkCount});if(window.confirm(x)&&window.confirm(n("actions.purgePrimaryDatabase.finalConfirm"))){c(!0);try{const b=await window.electron.tropy.purge();b.success?(console.log(" Primary sources database purged successfully"),alert(n("actions.purgePrimaryDatabase.success"))):(console.error(" Failed to purge primary sources database:",b.error),alert(n("actions.purgePrimaryDatabase.error",{error:b.error}))),await d()}catch(b){console.error("Failed to purge primary sources database:",b),alert(n("actions.purgePrimaryDatabase.error",{error:String(b)}))}finally{c(!1)}}},m=()=>{if(e.databasePath){const x=e.databasePath.split("/").slice(0,-1).join("/");window.electron.shell?.openPath(x)}},v=()=>{e.databasePath&&(navigator.clipboard.writeText(e.databasePath),alert(n("actions.copyPath.success")))};return p.jsx(On,{title:n("actions.title"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:n("actions.databaseInfo.title")}),p.jsxs("div",{className:"config-description",style:{marginTop:"8px"},children:[p.jsxs("strong",{children:[n("actions.databaseInfo.documentsIndexed"),":"]})," ",e.totalDocuments,p.jsx("br",{}),p.jsxs("strong",{children:[n("actions.databaseInfo.chunksStored"),":"]})," ",e.totalChunks,p.jsx("br",{}),p.jsxs("strong",{children:[n("actions.databaseInfo.path"),":"]}),p.jsx("div",{className:"database-path-display",children:e.databasePath||n("actions.databaseInfo.loading")}),p.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"8px"},children:[p.jsx("button",{className:"config-btn-small",onClick:v,disabled:!e.databasePath,children:n("actions.copyPath.button")}),p.jsx("button",{className:"config-btn-small",onClick:m,disabled:!e.databasePath,children:n("actions.openFolder.button")})]})]})]}),p.jsxs("div",{className:"config-field",style:{marginTop:"24px"},children:[p.jsx("label",{className:"config-label",children:n("actions.primaryDatabaseInfo.title","Primary Sources Database (Tropy)")}),p.jsxs("div",{className:"config-description",style:{marginTop:"8px"},children:[p.jsxs("strong",{children:[n("actions.primaryDatabaseInfo.sourcesIndexed","Sources indexed"),":"]})," ",i.sourceCount,p.jsx("br",{}),p.jsxs("strong",{children:[n("actions.primaryDatabaseInfo.chunksStored","Chunks stored"),":"]})," ",i.chunkCount,p.jsx("br",{}),p.jsxs("strong",{children:[n("actions.databaseInfo.path"),":"]}),p.jsx("div",{className:"database-path-display",children:i.databasePath||n("actions.databaseInfo.loading")})]})]}),p.jsxs("div",{className:"config-field",style:{marginTop:"24px"},children:[p.jsx("label",{className:"config-label",style:{color:"#f48771"},children:n("actions.dangerZone")}),p.jsxs("div",{className:"config-description",style:{marginTop:"12px"},children:[p.jsx("strong",{children:n("actions.purgeDatabase.title")}),p.jsx("br",{}),p.jsxs("small",{children:[n("actions.purgeDatabase.description"),p.jsx("br",{}),n("actions.purgeDatabase.warning")]})]}),p.jsx("button",{className:"config-btn-small",onClick:h,disabled:s||e.totalDocuments===0,style:{marginTop:"8px",background:"#c72e0f",color:"#ffffff",border:"none"},children:n(s?"actions.purgeDatabase.inProgress":"actions.purgeDatabase.button")}),p.jsxs("div",{className:"config-description",style:{marginTop:"16px"},children:[p.jsx("strong",{children:n("actions.purgePrimaryDatabase.title","Purge Primary Sources Database")}),p.jsx("br",{}),p.jsxs("small",{children:[n("actions.purgePrimaryDatabase.description","This will delete all indexed Tropy sources and their embeddings."),p.jsx("br",{}),n("actions.purgePrimaryDatabase.warning","You will need to re-sync your Tropy project.")]})]}),p.jsx("button",{className:"config-btn-small",onClick:f,disabled:l||i.sourceCount===0,style:{marginTop:"8px",background:"#c72e0f",color:"#ffffff",border:"none"},children:l?n("actions.purgePrimaryDatabase.inProgress","Purging..."):n("actions.purgePrimaryDatabase.button","Purge Primary Sources")})]})]})})})},XAe=({projectPath:n})=>{const{t:e}=qt("common"),[r,i]=M.useState({}),[o,s]=M.useState(!1),[a,l]=M.useState(""),c=n.endsWith("project.json")?n:`${n}/project.json`;M.useEffect(()=>{u()},[n]);const u=async()=>{try{const h=await window.electron.project.getConfig(c);h?.zotero&&i({groupId:h.zotero.groupId||"",collectionKey:h.zotero.collectionKey||""})}catch(h){console.error("Failed to load project Zotero config:",h)}},d=async()=>{s(!0),l("");try{await window.electron.project.updateConfig(c,{zotero:{groupId:r.groupId||void 0,collectionKey:r.collectionKey||void 0}}),l(e("settings.saved")),setTimeout(()=>l(""),3e3)}catch(h){console.error("Failed to save project Zotero config:",h),l(e("settings.saveError"))}finally{s(!1)}};return p.jsx(On,{title:e("project.zoteroSettings"),defaultExpanded:!1,children:p.jsx("div",{className:"config-section",children:p.jsxs("div",{className:"config-section-content",children:[p.jsx("p",{className:"config-help",children:e("project.zoteroSettingsHelp")}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:e("project.zoteroGroupId")}),p.jsx("input",{type:"text",value:r.groupId||"",onChange:h=>i({...r,groupId:h.target.value}),placeholder:e("project.zoteroGroupIdPlaceholder"),className:"config-input"}),p.jsx("span",{className:"config-help",children:e("project.zoteroGroupIdHelp")})]}),p.jsxs("div",{className:"config-field",children:[p.jsx("label",{className:"config-label",children:e("project.zoteroCollectionKey")}),p.jsx("input",{type:"text",value:r.collectionKey||"",onChange:h=>i({...r,collectionKey:h.target.value}),placeholder:e("project.zoteroCollectionKeyPlaceholder"),className:"config-input"}),p.jsx("span",{className:"config-help",children:e("project.zoteroCollectionKeyHelp")})]}),p.jsxs("div",{className:"config-actions",style:{marginTop:"12px"},children:[p.jsxs("button",{className:"config-btn primary",onClick:d,disabled:o,children:[p.jsx(r3,{size:16}),e(o?"settings.saving":"settings.save")]}),a&&p.jsx("span",{className:"save-message",children:a})]})]})})})},JAe=()=>{const{t:n}=qt("common"),{currentProject:e,recentProjects:r,isLoading:i,loadProject:o,createProject:s,closeProject:a,loadRecentProjects:l}=zc(),{loadFile:c}=Pn(),[u,d]=M.useState(!1),[h,f]=M.useState(!1),[m,v]=M.useState(!1),[x,b]=M.useState(""),[w,S]=M.useState("article"),[_,P]=M.useState(""),[A,T]=M.useState(!1);M.useEffect(()=>{l()},[l]);const E=async()=>{if(!x||!_){alert(n("project.fillAllFields"));return}const U=x;T(!0);try{await s(U,w,_),d(!1),b(""),P(""),S("article")}catch(Z){console.error("Failed to create project:",Z),alert(n("project.createError")+": "+Z.message)}finally{T(!1)}},L=async()=>{try{const U=await window.electron.dialog.openFile({properties:["openFile"],filters:[{name:n("project.dialogTitle"),extensions:["json"]},{name:n("project.allFiles"),extensions:["*"]}]});!U.canceled&&U.filePaths.length>0&&await o(U.filePaths[0])}catch(U){console.error("Failed to open project:",U),alert(n("project.openError")+": "+U.message)}},$=async()=>{try{const U=await window.electron.dialog.openFile({properties:["openDirectory","createDirectory"]});!U.canceled&&U.filePaths.length>0&&P(U.filePaths[0])}catch(U){console.error("Failed to select path:",U)}},z=async U=>{try{const Z=`${U.path}/project.json`;await o(Z)}catch(Z){console.error("Failed to load recent project:",Z),alert(n("project.openError")+": "+Z.message)}},B=async U=>{try{const Z=`${U.path}/project.json`;await window.electron.project.removeRecent(Z),await l()}catch(Z){console.error("Failed to remove recent project:",Z)}},D=U=>{switch(U){case"article":return n("project.types.article");case"book":return n("project.types.book");case"presentation":return n("project.types.presentation");default:return U}},Y=async U=>{try{await c(U)}catch(Z){console.error("Failed to load file:",Z),alert(n("toolbar.openError")+": "+Z.message)}},I=async()=>{if(e?.path)try{await window.electron.shell.openPath(e.path)}catch(U){console.error("Failed to open project folder:",U),alert(n("project.openFolderError")+": "+U.message)}};return p.jsxs("div",{className:"project-panel",style:{position:"relative"},children:[i&&p.jsxs("div",{className:"project-loading-overlay",children:[p.jsx("div",{className:"project-loading-spinner"}),p.jsx("div",{className:"project-loading-text",children:n("project.loading")})]}),p.jsxs("div",{className:"project-content",children:[p.jsxs("div",{className:"project-actions",children:[p.jsxs("div",{className:"project-actions-left",children:[p.jsx("button",{className:"toolbar-btn",onClick:()=>d(!0),title:n("project.newProject"),children:p.jsx(kve,{size:20,strokeWidth:1})}),p.jsx("button",{className:"toolbar-btn",onClick:L,title:n("project.openProject"),children:p.jsx($g,{size:20,strokeWidth:1})})]}),p.jsxs("div",{className:"project-actions-right",children:[p.jsx("button",{className:"toolbar-btn",onClick:()=>f(!0),title:n("export.exportToPDF"),disabled:!e,children:p.jsx(t3,{size:20,strokeWidth:1})}),p.jsx("button",{className:"toolbar-btn",onClick:()=>v(!0),title:n("export.exportToWord"),disabled:!e,children:p.jsx(Pve,{size:20,strokeWidth:1})})]})]}),e?p.jsxs("div",{className:"current-project-info",children:[p.jsxs(On,{title:n("project.currentProject"),defaultExpanded:!0,children:[p.jsxs("div",{className:"project-meta",children:[p.jsxs("div",{className:"project-meta-row",children:[p.jsxs("span",{className:"project-meta-label",children:[n("project.name"),":"]}),p.jsx("span",{children:e.name})]}),p.jsxs("div",{className:"project-meta-row",children:[p.jsxs("span",{className:"project-meta-label",children:[n("project.type"),":"]}),p.jsx("span",{className:"project-type-badge",children:D(e.type)})]}),p.jsxs("div",{className:"project-meta-row",children:[p.jsxs("span",{className:"project-meta-label",children:[n("project.path"),":"]}),p.jsx("span",{title:e.path,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.path})]}),p.jsxs("div",{className:"project-meta-row",children:[p.jsxs("span",{className:"project-meta-label",children:[n("project.createdAt"),":"]}),p.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("fr-FR")})]})]}),p.jsxs("button",{className:"project-btn",onClick:I,style:{marginTop:"1rem",width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center"},children:[p.jsx(z0,{size:16}),n("project.openInFinder")]})]}),(e.type==="article"||e.type==="book")&&p.jsx(On,{title:n("project.projectFiles"),defaultExpanded:!0,children:p.jsxs("div",{className:"project-files-list",children:[p.jsxs("div",{className:"project-file-item",onClick:()=>Y(`${e.path}/document.md`),children:[p.jsx(Po,{size:16,strokeWidth:1.5})," document.md"]}),p.jsxs("div",{className:"project-file-item",onClick:()=>Y(`${e.path}/abstract.md`),children:[p.jsx(bve,{size:16,strokeWidth:1.5})," abstract.md"]}),p.jsxs("div",{className:"project-file-item",onClick:()=>Y(`${e.path}/context.md`),children:[p.jsx(pxe,{size:16,strokeWidth:1.5})," context.md"]})]})}),e.type==="presentation"&&p.jsxs(p.Fragment,{children:[p.jsx(On,{title:n("project.projectFiles"),defaultExpanded:!0,children:p.jsx("div",{className:"project-files-list",children:p.jsxs("div",{className:"project-file-item",onClick:()=>Y(`${e.path}/slides.md`),children:[p.jsx(Qve,{size:16,strokeWidth:1.5})," slides.md"]})})}),p.jsx(On,{title:n("project.appearance"),defaultExpanded:!0,children:p.jsx(GAe,{projectPath:e.path})})]}),(e.type==="article"||e.type==="book"||e.type==="presentation")&&p.jsx(On,{title:n("project.settings"),defaultExpanded:!1,children:p.jsx(YAe,{projectPath:e.path,currentCSL:e.cslPath,onCSLChange:()=>{const U=`${e.path}/project.json`;o(U)}})}),p.jsx(XAe,{projectPath:e.path}),p.jsx(ZAe,{}),p.jsx("button",{className:"project-btn",onClick:a,style:{marginTop:"1rem",width:"100%"},children:n("project.closeProject")})]}):p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:n("project.noProjectOpen")}),p.jsx("p",{children:n("project.createOrOpen")})]}),r.length>0&&p.jsx(On,{title:n("project.recentProjects"),defaultExpanded:!1,children:p.jsx("div",{className:"recent-projects-list",children:r.map(U=>p.jsxs("div",{className:"recent-project-item",children:[p.jsxs("div",{className:"recent-project-content",onClick:()=>z(U),children:[p.jsxs("div",{className:"recent-project-name",children:[U.name," ",p.jsx("span",{className:"project-type-badge",children:D(U.type)})]}),p.jsx("div",{className:"recent-project-path",children:U.path})]}),p.jsx("button",{className:"recent-project-remove",onClick:Z=>{Z.stopPropagation(),B(U)},title:n("project.removeFromRecent"),children:p.jsx(Vr,{size:16})})]},U.id))})})]}),u&&p.jsx("div",{className:"create-project-modal",onClick:()=>d(!1),children:p.jsxs("div",{className:"create-project-content",onClick:U=>U.stopPropagation(),children:[p.jsx("h3",{children:n("project.createNewProject")}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:n("project.projectName")}),p.jsx("input",{type:"text",value:x,onChange:U=>b(U.target.value),placeholder:"Mon article",autoFocus:!0})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:n("project.projectLocation")}),p.jsxs("div",{className:"path-selector",children:[p.jsx("input",{type:"text",value:_,onChange:U=>P(U.target.value),placeholder:"/chemin/vers/dossier",readOnly:!0}),p.jsx("button",{onClick:$,children:n("actions.browse")})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{className:"btn-cancel",onClick:()=>d(!1),disabled:A,children:n("actions.cancel")}),p.jsx("button",{className:"btn-submit",onClick:E,disabled:A||!x||!_,children:n(A?"project.creating":"actions.create")})]})]})}),p.jsx(Kne,{isOpen:h,onClose:()=>f(!1)}),p.jsx(VAe,{isOpen:m,onClose:()=>v(!1)})]})};function QAe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function eTe(n,e,r){return e=lTe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function vq(n,e){return rTe(n)||QAe(n,e)||Gne(n,e)||sTe()}function tTe(n){return nTe(n)||iTe(n)||Gne(n)||oTe()}function nTe(n){if(Array.isArray(n))return dM(n)}function rTe(n){if(Array.isArray(n))return n}function iTe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Gne(n,e){if(n){if(typeof n=="string")return dM(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dM(n,e)}}function dM(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function oTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aTe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lTe(n){var e=aTe(n,"string");return typeof e=="symbol"?e:String(e)}var cTe=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(tTe(Object.entries(e).filter(function(o){var s=vq(o,1),a=s[0];return!i.has(a)}).map(function(o){var s=vq(o,2),a=s[0],l=s[1];return eTe({},a,l)}))))};function hM(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function uTe(n){if(Array.isArray(n))return n}function dTe(n){if(Array.isArray(n))return hM(n)}function hTe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fTe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function pTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gTe(n,e){return uTe(n)||fTe(n,e)||Yne(n,e)||pTe()}function xq(n){return dTe(n)||hTe(n)||Yne(n)||mTe()}function Yne(n,e){if(n){if(typeof n=="string")return hM(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hM(n,e):void 0}}function yTe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,o=e.nodeMapper,s=o===void 0?function(d){return d}:o,a=e.methodNames,l=a===void 0?[]:a,c=e.initPropNames,u=c===void 0?[]:c;return M.forwardRef(function(d,h){var f=M.useRef(),m=M.useMemo(function(){var b=Object.fromEntries(u.filter(function(w){return d.hasOwnProperty(w)}).map(function(w){return[w,d[w]]}));return n(b)},[]);bq(function(){m(s(f.current))},M.useLayoutEffect),bq(function(){return m._destructor instanceof Function?m._destructor:void 0});var v=M.useCallback(function(b){for(var w=arguments.length,S=new Array(w>1?w-1:0),_=1;_<w;_++)S[_-1]=arguments[_];return m[b]instanceof Function?m[b].apply(m,S):void 0},[m]),x=M.useRef({});return Object.keys(cTe(d,[].concat(xq(l),xq(u)))).filter(function(b){return x.current[b]!==d[b]}).forEach(function(b){return v(b,d[b])}),x.current=d,M.useImperativeHandle(h,function(){return Object.fromEntries(l.map(function(b){return[b,function(){for(var w=arguments.length,S=new Array(w),_=0;_<w;_++)S[_]=arguments[_];return v.apply(void 0,[b].concat(S))}]}))},[v]),_a.createElement(i,{ref:f})})}function bq(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.useEffect,r=M.useRef(),i=M.useRef(!1),o=M.useRef(!1),s=M.useState(0),a=gTe(s,2);a[0];var l=a[1];i.current&&(o.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){o.current&&r.current&&r.current()}},[])}var fM="http://www.w3.org/1999/xhtml";const wq={svg:"http://www.w3.org/2000/svg",xhtml:fM,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function M3(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),wq.hasOwnProperty(e)?{space:wq[e],local:n}:n}function vTe(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===fM&&e.documentElement.namespaceURI===fM?e.createElement(n):e.createElementNS(r,n)}}function xTe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Zne(n){var e=M3(n);return(e.local?xTe:vTe)(e)}function bTe(){}function dO(n){return n==null?bTe:function(){return this.querySelector(n)}}function wTe(n){typeof n!="function"&&(n=dO(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=new Array(a),c,u,d=0;d<a;++d)(c=s[d])&&(u=n.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Ws(i,this._parents)}function kTe(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function STe(){return[]}function Xne(n){return n==null?STe:function(){return this.querySelectorAll(n)}}function CTe(n){return function(){return kTe(n.apply(this,arguments))}}function _Te(n){typeof n=="function"?n=CTe(n):n=Xne(n);for(var e=this._groups,r=e.length,i=[],o=[],s=0;s<r;++s)for(var a=e[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&(i.push(n.call(c,c.__data__,u,a)),o.push(c));return new Ws(i,o)}function Jne(n){return function(){return this.matches(n)}}function Qne(n){return function(e){return e.matches(n)}}var ATe=Array.prototype.find;function TTe(n){return function(){return ATe.call(this.children,n)}}function PTe(){return this.firstElementChild}function MTe(n){return this.select(n==null?PTe:TTe(typeof n=="function"?n:Qne(n)))}var ETe=Array.prototype.filter;function NTe(){return Array.from(this.children)}function jTe(n){return function(){return ETe.call(this.children,n)}}function OTe(n){return this.selectAll(n==null?NTe:jTe(typeof n=="function"?n:Qne(n)))}function DTe(n){typeof n!="function"&&(n=Jne(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new Ws(i,this._parents)}function ere(n){return new Array(n.length)}function ITe(){return new Ws(this._enter||this._groups.map(ere),this._parents)}function e5(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}e5.prototype={constructor:e5,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function RTe(n){return function(){return n}}function LTe(n,e,r,i,o,s){for(var a=0,l,c=e.length,u=s.length;a<u;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):r[a]=new e5(n,s[a]);for(;a<c;++a)(l=e[a])&&(o[a]=l)}function zTe(n,e,r,i,o,s,a){var l,c,u=new Map,d=e.length,h=s.length,f=new Array(d),m;for(l=0;l<d;++l)(c=e[l])&&(f[l]=m=a.call(c,c.__data__,l,e)+"",u.has(m)?o[l]=c:u.set(m,c));for(l=0;l<h;++l)m=a.call(n,s[l],l,s)+"",(c=u.get(m))?(i[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new e5(n,s[l]);for(l=0;l<d;++l)(c=e[l])&&u.get(f[l])===c&&(o[l]=c)}function FTe(n){return n.__data__}function $Te(n,e){if(!arguments.length)return Array.from(this,FTe);var r=e?zTe:LTe,i=this._parents,o=this._groups;typeof n!="function"&&(n=RTe(n));for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],h=o[u],f=h.length,m=BTe(n.call(d,d&&d.__data__,u,i)),v=m.length,x=l[u]=new Array(v),b=a[u]=new Array(v),w=c[u]=new Array(f);r(d,h,x,b,w,m,e);for(var S=0,_=0,P,A;S<v;++S)if(P=x[S]){for(S>=_&&(_=S+1);!(A=b[_])&&++_<v;);P._next=A||null}}return a=new Ws(a,i),a._enter=l,a._exit=c,a}function BTe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function HTe(){return new Ws(this._exit||this._groups.map(ere),this._parents)}function qTe(n,e,r){var i=this.enter(),o=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?s.remove():r(s),i&&o?i.merge(o).order():o}function VTe(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,o=r.length,s=i.length,a=Math.min(o,s),l=new Array(o),c=0;c<a;++c)for(var u=r[c],d=i[c],h=u.length,f=l[c]=new Array(h),m,v=0;v<h;++v)(m=u[v]||d[v])&&(f[v]=m);for(;c<o;++c)l[c]=r[c];return new Ws(l,this._parents)}function WTe(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],o=i.length-1,s=i[o],a;--o>=0;)(a=i[o])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function UTe(n){n||(n=KTe);function e(h,f){return h&&f?n(h.__data__,f.__data__):!h-!f}for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s){for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,d=0;d<l;++d)(u=a[d])&&(c[d]=u);c.sort(e)}return new Ws(o,this._parents).order()}function KTe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function GTe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function YTe(){return Array.from(this)}function ZTe(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length;o<s;++o){var a=i[o];if(a)return a}return null}function XTe(){let n=0;for(const e of this)++n;return n}function JTe(){return!this.node()}function QTe(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var o=e[r],s=0,a=o.length,l;s<a;++s)(l=o[s])&&n.call(l,l.__data__,s,o);return this}function ePe(n){return function(){this.removeAttribute(n)}}function tPe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function nPe(n,e){return function(){this.setAttribute(n,e)}}function rPe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function iPe(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function oPe(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function sPe(n,e){var r=M3(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?tPe:ePe:typeof e=="function"?r.local?oPe:iPe:r.local?rPe:nPe)(r,e))}function tre(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function aPe(n){return function(){this.style.removeProperty(n)}}function lPe(n,e,r){return function(){this.style.setProperty(n,e,r)}}function cPe(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function uPe(n,e,r){return arguments.length>1?this.each((e==null?aPe:typeof e=="function"?cPe:lPe)(n,e,r??"")):dg(this.node(),n)}function dg(n,e){return n.style.getPropertyValue(e)||tre(n).getComputedStyle(n,null).getPropertyValue(e)}function dPe(n){return function(){delete this[n]}}function hPe(n,e){return function(){this[n]=e}}function fPe(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function pPe(n,e){return arguments.length>1?this.each((e==null?dPe:typeof e=="function"?fPe:hPe)(n,e)):this.node()[n]}function nre(n){return n.trim().split(/^|\s+/)}function hO(n){return n.classList||new rre(n)}function rre(n){this._node=n,this._names=nre(n.getAttribute("class")||"")}rre.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ire(n,e){for(var r=hO(n),i=-1,o=e.length;++i<o;)r.add(e[i])}function ore(n,e){for(var r=hO(n),i=-1,o=e.length;++i<o;)r.remove(e[i])}function mPe(n){return function(){ire(this,n)}}function gPe(n){return function(){ore(this,n)}}function yPe(n,e){return function(){(e.apply(this,arguments)?ire:ore)(this,n)}}function vPe(n,e){var r=nre(n+"");if(arguments.length<2){for(var i=hO(this.node()),o=-1,s=r.length;++o<s;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?yPe:e?mPe:gPe)(r,e))}function xPe(){this.textContent=""}function bPe(n){return function(){this.textContent=n}}function wPe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function kPe(n){return arguments.length?this.each(n==null?xPe:(typeof n=="function"?wPe:bPe)(n)):this.node().textContent}function SPe(){this.innerHTML=""}function CPe(n){return function(){this.innerHTML=n}}function _Pe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function APe(n){return arguments.length?this.each(n==null?SPe:(typeof n=="function"?_Pe:CPe)(n)):this.node().innerHTML}function TPe(){this.nextSibling&&this.parentNode.appendChild(this)}function PPe(){return this.each(TPe)}function MPe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function EPe(){return this.each(MPe)}function NPe(n){var e=typeof n=="function"?n:Zne(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function jPe(){return null}function OPe(n,e){var r=typeof n=="function"?n:Zne(n),i=e==null?jPe:typeof e=="function"?e:dO(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function DPe(){var n=this.parentNode;n&&n.removeChild(this)}function IPe(){return this.each(DPe)}function RPe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function LPe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function zPe(n){return this.select(n?LPe:RPe)}function FPe(n){return arguments.length?this.property("__data__",n):this.node().__data__}function $Pe(n){return function(e){n.call(this,e,this.__data__)}}function BPe(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function HPe(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,o=e.length,s;r<o;++r)s=e[r],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function qPe(n,e,r){return function(){var i=this.__on,o,s=$Pe(e);if(i){for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=r),o.value=e;return}}this.addEventListener(n.type,s,r),o={type:n.type,name:n.name,value:e,listener:s,options:r},i?i.push(o):this.__on=[o]}}function VPe(n,e,r){var i=BPe(n+""),o,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(o=0,d=l[c];o<s;++o)if((a=i[o]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?qPe:HPe,o=0;o<s;++o)this.each(l(i[o],e,r));return this}function sre(n,e,r){var i=tre(n),o=i.CustomEvent;typeof o=="function"?o=new o(e,r):(o=i.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function WPe(n,e){return function(){return sre(this,n,e)}}function UPe(n,e){return function(){return sre(this,n,e.apply(this,arguments))}}function KPe(n,e){return this.each((typeof e=="function"?UPe:WPe)(n,e))}function*GPe(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,a;o<s;++o)(a=i[o])&&(yield a)}var are=[null];function Ws(n,e){this._groups=n,this._parents=e}function Lb(){return new Ws([[document.documentElement]],are)}function YPe(){return this}Ws.prototype=Lb.prototype={constructor:Ws,select:wTe,selectAll:_Te,selectChild:MTe,selectChildren:OTe,filter:DTe,data:$Te,enter:ITe,exit:HTe,join:qTe,merge:VTe,selection:YPe,order:WTe,sort:UTe,call:GTe,nodes:YTe,node:ZTe,size:XTe,empty:JTe,each:QTe,attr:sPe,style:uPe,property:pPe,classed:vPe,text:kPe,html:APe,raise:PPe,lower:EPe,append:NPe,insert:OPe,remove:IPe,clone:zPe,datum:FPe,on:VPe,dispatch:KPe,[Symbol.iterator]:GPe};function ma(n){return typeof n=="string"?new Ws([[document.querySelector(n)]],[document.documentElement]):new Ws([[n]],are)}function ZPe(n){let e;for(;e=n.sourceEvent;)n=e;return n}function oc(n,e){if(n=ZPe(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}var XPe={value:()=>{}};function zb(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new R4(r)}function R4(n){this._=n}function JPe(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}R4.prototype=zb.prototype={constructor:R4,on:function(n,e){var r=this._,i=JPe(n+"",r),o,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((o=(n=i[s]).type)&&(o=QPe(r[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(o=(n=i[s]).type)r[o]=kq(r[o],n.name,e);else if(e==null)for(o in r)r[o]=kq(r[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new R4(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,s;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,o=s.length;i<o;++i)s[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],o=0,s=i.length;o<s;++o)i[o].value.apply(e,r)}};function QPe(n,e){for(var r=0,i=n.length,o;r<i;++r)if((o=n[r]).name===e)return o.value}function kq(n,e,r){for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n[i]=XPe,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const e9e={passive:!1},Dx={capture:!0,passive:!1};function fA(n){n.stopImmediatePropagation()}function V0(n){n.preventDefault(),n.stopImmediatePropagation()}function lre(n){var e=n.document.documentElement,r=ma(n).on("dragstart.drag",V0,Dx);"onselectstart"in e?r.on("selectstart.drag",V0,Dx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function cre(n,e){var r=n.document.documentElement,i=ma(n).on("dragstart.drag",null);e&&(i.on("click.drag",V0,Dx),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const X2=n=>()=>n;function pM(n,{sourceEvent:e,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}pM.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function t9e(n){return!n.ctrlKey&&!n.button}function n9e(){return this.parentNode}function r9e(n,e){return e??{x:n.x,y:n.y}}function i9e(){return navigator.maxTouchPoints||"ontouchstart"in this}function o9e(){var n=t9e,e=n9e,r=r9e,i=i9e,o={},s=zb("start","drag","end"),a=0,l,c,u,d,h=0;function f(P){P.on("mousedown.drag",m).filter(i).on("touchstart.drag",b).on("touchmove.drag",w,e9e).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(P,A){if(!(d||!n.call(this,P,A))){var T=_(this,e.call(this,P,A),P,A,"mouse");T&&(ma(P.view).on("mousemove.drag",v,Dx).on("mouseup.drag",x,Dx),lre(P.view),fA(P),u=!1,l=P.clientX,c=P.clientY,T("start",P))}}function v(P){if(V0(P),!u){var A=P.clientX-l,T=P.clientY-c;u=A*A+T*T>h}o.mouse("drag",P)}function x(P){ma(P.view).on("mousemove.drag mouseup.drag",null),cre(P.view,u),V0(P),o.mouse("end",P)}function b(P,A){if(n.call(this,P,A)){var T=P.changedTouches,E=e.call(this,P,A),L=T.length,$,z;for($=0;$<L;++$)(z=_(this,E,P,A,T[$].identifier,T[$]))&&(fA(P),z("start",P,T[$]))}}function w(P){var A=P.changedTouches,T=A.length,E,L;for(E=0;E<T;++E)(L=o[A[E].identifier])&&(V0(P),L("drag",P,A[E]))}function S(P){var A=P.changedTouches,T=A.length,E,L;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<T;++E)(L=o[A[E].identifier])&&(fA(P),L("end",P,A[E]))}function _(P,A,T,E,L,$){var z=s.copy(),B=oc($||T,A),D,Y,I;if((I=r.call(P,new pM("beforestart",{sourceEvent:T,target:f,identifier:L,active:a,x:B[0],y:B[1],dx:0,dy:0,dispatch:z}),E))!=null)return D=I.x-B[0]||0,Y=I.y-B[1]||0,function U(Z,te,J){var oe=B,q;switch(Z){case"start":o[L]=U,q=a++;break;case"end":delete o[L],--a;case"drag":B=oc(J||te,A),q=a;break}z.call(Z,P,new pM(Z,{sourceEvent:te,subject:I,target:f,identifier:L,active:q,x:B[0]+D,y:B[1]+Y,dx:B[0]-oe[0],dy:B[1]-oe[1],dispatch:z}),E)}}return f.filter=function(P){return arguments.length?(n=typeof P=="function"?P:X2(!!P),f):n},f.container=function(P){return arguments.length?(e=typeof P=="function"?P:X2(P),f):e},f.subject=function(P){return arguments.length?(r=typeof P=="function"?P:X2(P),f):r},f.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:X2(!!P),f):i},f.on=function(){var P=s.on.apply(s,arguments);return P===s?f:P},f.clickDistance=function(P){return arguments.length?(h=(P=+P)*P,f):Math.sqrt(h)},f}function fO(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function ure(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function Fb(){}var Ix=.7,t5=1/Ix,W0="\\s*([+-]?\\d+)\\s*",Rx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s9e=/^#([0-9a-f]{3,8})$/,a9e=new RegExp(`^rgb\\(${W0},${W0},${W0}\\)$`),l9e=new RegExp(`^rgb\\(${Sc},${Sc},${Sc}\\)$`),c9e=new RegExp(`^rgba\\(${W0},${W0},${W0},${Rx}\\)$`),u9e=new RegExp(`^rgba\\(${Sc},${Sc},${Sc},${Rx}\\)$`),d9e=new RegExp(`^hsl\\(${Rx},${Sc},${Sc}\\)$`),h9e=new RegExp(`^hsla\\(${Rx},${Sc},${Sc},${Rx}\\)$`),Sq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fO(Fb,Qp,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Cq,formatHex:Cq,formatHex8:f9e,formatHsl:p9e,formatRgb:_q,toString:_q});function Cq(){return this.rgb().formatHex()}function f9e(){return this.rgb().formatHex8()}function p9e(){return dre(this).formatHsl()}function _q(){return this.rgb().formatRgb()}function Qp(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=s9e.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?Aq(e):r===3?new ss(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?J2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?J2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=a9e.exec(n))?new ss(e[1],e[2],e[3],1):(e=l9e.exec(n))?new ss(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=c9e.exec(n))?J2(e[1],e[2],e[3],e[4]):(e=u9e.exec(n))?J2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=d9e.exec(n))?Mq(e[1],e[2]/100,e[3]/100,1):(e=h9e.exec(n))?Mq(e[1],e[2]/100,e[3]/100,e[4]):Sq.hasOwnProperty(n)?Aq(Sq[n]):n==="transparent"?new ss(NaN,NaN,NaN,0):null}function Aq(n){return new ss(n>>16&255,n>>8&255,n&255,1)}function J2(n,e,r,i){return i<=0&&(n=e=r=NaN),new ss(n,e,r,i)}function m9e(n){return n instanceof Fb||(n=Qp(n)),n?(n=n.rgb(),new ss(n.r,n.g,n.b,n.opacity)):new ss}function mM(n,e,r,i){return arguments.length===1?m9e(n):new ss(n,e,r,i??1)}function ss(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}fO(ss,mM,ure(Fb,{brighter(n){return n=n==null?t5:Math.pow(t5,n),new ss(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Ix:Math.pow(Ix,n),new ss(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ss(Np(this.r),Np(this.g),Np(this.b),n5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tq,formatHex:Tq,formatHex8:g9e,formatRgb:Pq,toString:Pq}));function Tq(){return`#${pp(this.r)}${pp(this.g)}${pp(this.b)}`}function g9e(){return`#${pp(this.r)}${pp(this.g)}${pp(this.b)}${pp((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pq(){const n=n5(this.opacity);return`${n===1?"rgb(":"rgba("}${Np(this.r)}, ${Np(this.g)}, ${Np(this.b)}${n===1?")":`, ${n})`}`}function n5(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Np(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function pp(n){return n=Np(n),(n<16?"0":"")+n.toString(16)}function Mq(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new ol(n,e,r,i)}function dre(n){if(n instanceof ol)return new ol(n.h,n.s,n.l,n.opacity);if(n instanceof Fb||(n=Qp(n)),!n)return new ol;if(n instanceof ol)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,o=Math.min(e,r,i),s=Math.max(e,r,i),a=NaN,l=s-o,c=(s+o)/2;return l?(e===s?a=(r-i)/l+(r<i)*6:r===s?a=(i-e)/l+2:a=(e-r)/l+4,l/=c<.5?s+o:2-s-o,a*=60):l=c>0&&c<1?0:a,new ol(a,l,c,n.opacity)}function y9e(n,e,r,i){return arguments.length===1?dre(n):new ol(n,e,r,i??1)}function ol(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}fO(ol,y9e,ure(Fb,{brighter(n){return n=n==null?t5:Math.pow(t5,n),new ol(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Ix:Math.pow(Ix,n),new ol(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,o=2*r-i;return new ss(pA(n>=240?n-240:n+120,o,i),pA(n,o,i),pA(n<120?n+240:n-120,o,i),this.opacity)},clamp(){return new ol(Eq(this.h),Q2(this.s),Q2(this.l),n5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=n5(this.opacity);return`${n===1?"hsl(":"hsla("}${Eq(this.h)}, ${Q2(this.s)*100}%, ${Q2(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Eq(n){return n=(n||0)%360,n<0?n+360:n}function Q2(n){return Math.max(0,Math.min(1,n||0))}function pA(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const pO=n=>()=>n;function v9e(n,e){return function(r){return n+r*e}}function x9e(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function b9e(n){return(n=+n)==1?hre:function(e,r){return r-e?x9e(e,r,n):pO(isNaN(e)?r:e)}}function hre(n,e){var r=e-n;return r?v9e(n,r):pO(isNaN(n)?e:n)}const r5=(function n(e){var r=b9e(e);function i(o,s){var a=r((o=mM(o)).r,(s=mM(s)).r),l=r(o.g,s.g),c=r(o.b,s.b),u=hre(o.opacity,s.opacity);return function(d){return o.r=a(d),o.g=l(d),o.b=c(d),o.opacity=u(d),o+""}}return i.gamma=n,i})(1);function w9e(n,e){e||(e=[]);var r=n?Math.min(e.length,n.length):0,i=e.slice(),o;return function(s){for(o=0;o<r;++o)i[o]=n[o]*(1-s)+e[o]*s;return i}}function k9e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function S9e(n,e){var r=e?e.length:0,i=n?Math.min(r,n.length):0,o=new Array(i),s=new Array(r),a;for(a=0;a<i;++a)o[a]=Hg(n[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(l){for(a=0;a<i;++a)s[a]=o[a](l);return s}}function C9e(n,e){var r=new Date;return n=+n,e=+e,function(i){return r.setTime(n*(1-i)+e*i),r}}function il(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}function _9e(n,e){var r={},i={},o;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in n?r[o]=Hg(n[o],e[o]):i[o]=e[o];return function(s){for(o in r)i[o]=r[o](s);return i}}var gM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mA=new RegExp(gM.source,"g");function A9e(n){return function(){return n}}function T9e(n){return function(e){return n(e)+""}}function fre(n,e){var r=gM.lastIndex=mA.lastIndex=0,i,o,s,a=-1,l=[],c=[];for(n=n+"",e=e+"";(i=gM.exec(n))&&(o=mA.exec(e));)(s=o.index)>r&&(s=e.slice(r,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,c.push({i:a,x:il(i,o)})),r=mA.lastIndex;return r<e.length&&(s=e.slice(r),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?T9e(c[0].x):A9e(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Hg(n,e){var r=typeof e,i;return e==null||r==="boolean"?pO(e):(r==="number"?il:r==="string"?(i=Qp(e))?(e=i,r5):fre:e instanceof Qp?r5:e instanceof Date?C9e:k9e(e)?w9e:Array.isArray(e)?S9e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_9e:il)(n,e)}function mO(n,e){return n=+n,e=+e,function(r){return Math.round(n*(1-r)+e*r)}}var Nq=180/Math.PI,yM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pre(n,e,r,i,o,s){var a,l,c;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(c=n*r+e*i)&&(r-=n*c,i-=e*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),n*i<e*r&&(n=-n,e=-e,c=-c,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,n)*Nq,skewX:Math.atan(c)*Nq,scaleX:a,scaleY:l}}var ek;function P9e(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?yM:pre(e.a,e.b,e.c,e.d,e.e,e.f)}function M9e(n){return n==null||(ek||(ek=document.createElementNS("http://www.w3.org/2000/svg","g")),ek.setAttribute("transform",n),!(n=ek.transform.baseVal.consolidate()))?yM:(n=n.matrix,pre(n.a,n.b,n.c,n.d,n.e,n.f))}function mre(n,e,r,i){function o(u){return u.length?u.pop()+" ":""}function s(u,d,h,f,m,v){if(u!==h||d!==f){var x=m.push("translate(",null,e,null,r);v.push({i:x-4,x:il(u,h)},{i:x-2,x:il(d,f)})}else(h||f)&&m.push("translate("+h+e+f+r)}function a(u,d,h,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:h.push(o(h)+"rotate(",null,i)-2,x:il(u,d)})):d&&h.push(o(h)+"rotate("+d+i)}function l(u,d,h,f){u!==d?f.push({i:h.push(o(h)+"skewX(",null,i)-2,x:il(u,d)}):d&&h.push(o(h)+"skewX("+d+i)}function c(u,d,h,f,m,v){if(u!==h||d!==f){var x=m.push(o(m)+"scale(",null,",",null,")");v.push({i:x-4,x:il(u,h)},{i:x-2,x:il(d,f)})}else(h!==1||f!==1)&&m.push(o(m)+"scale("+h+","+f+")")}return function(u,d){var h=[],f=[];return u=n(u),d=n(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,f),a(u.rotate,d.rotate,h,f),l(u.skewX,d.skewX,h,f),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,f),u=d=null,function(m){for(var v=-1,x=f.length,b;++v<x;)h[(b=f[v]).i]=b.x(m);return h.join("")}}}var E9e=mre(P9e,"px, ","px)","deg)"),N9e=mre(M9e,", ",")",")"),j9e=1e-12;function jq(n){return((n=Math.exp(n))+1/n)/2}function O9e(n){return((n=Math.exp(n))-1/n)/2}function D9e(n){return((n=Math.exp(2*n))-1)/(n+1)}const I9e=(function n(e,r,i){function o(s,a){var l=s[0],c=s[1],u=s[2],d=a[0],h=a[1],f=a[2],m=d-l,v=h-c,x=m*m+v*v,b,w;if(x<j9e)w=Math.log(f/u)/e,b=function(E){return[l+E*m,c+E*v,u*Math.exp(e*E*w)]};else{var S=Math.sqrt(x),_=(f*f-u*u+i*x)/(2*u*r*S),P=(f*f-u*u-i*x)/(2*f*r*S),A=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(P*P+1)-P);w=(T-A)/e,b=function(E){var L=E*w,$=jq(A),z=u/(r*S)*($*D9e(e*L+A)-O9e(A));return[l+z*m,c+z*v,u*$/jq(e*L+A)]}}return b.duration=w*1e3*e/Math.SQRT2,b}return o.rho=function(s){var a=Math.max(.001,+s),l=a*a,c=l*l;return n(a,l,c)},o})(Math.SQRT2,2,4);function R9e(n,e){e===void 0&&(e=n,n=Hg);for(var r=0,i=e.length-1,o=e[0],s=new Array(i<0?0:i);r<i;)s[r]=n(o,o=e[++r]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[l](a-l)}}var hg=0,Gy=0,ny=0,gre=1e3,i5,Yy,o5=0,em=0,E3=0,Lx=typeof performance=="object"&&performance.now?performance:Date,yre=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function gO(){return em||(yre(L9e),em=Lx.now()+E3)}function L9e(){em=0}function s5(){this._call=this._time=this._next=null}s5.prototype=yO.prototype={constructor:s5,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?gO():+r)+(e==null?0:+e),!this._next&&Yy!==this&&(Yy?Yy._next=this:i5=this,Yy=this),this._call=n,this._time=r,vM()},stop:function(){this._call&&(this._call=null,this._time=1/0,vM())}};function yO(n,e,r){var i=new s5;return i.restart(n,e,r),i}function z9e(){gO(),++hg;for(var n=i5,e;n;)(e=em-n._time)>=0&&n._call.call(void 0,e),n=n._next;--hg}function Oq(){em=(o5=Lx.now())+E3,hg=Gy=0;try{z9e()}finally{hg=0,$9e(),em=0}}function F9e(){var n=Lx.now(),e=n-o5;e>gre&&(E3-=e,o5=n)}function $9e(){for(var n,e=i5,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:i5=r);Yy=n,vM(i)}function vM(n){if(!hg){Gy&&(Gy=clearTimeout(Gy));var e=n-em;e>24?(n<1/0&&(Gy=setTimeout(Oq,n-Lx.now()-E3)),ny&&(ny=clearInterval(ny))):(ny||(o5=Lx.now(),ny=setInterval(F9e,gre)),hg=1,yre(Oq))}}function Dq(n,e,r){var i=new s5;return e=e==null?0:+e,i.restart(o=>{i.stop(),n(o+e)},e,r),i}var B9e=zb("start","end","cancel","interrupt"),H9e=[],vre=0,Iq=1,xM=2,L4=3,Rq=4,bM=5,z4=6;function N3(n,e,r,i,o,s){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;q9e(n,r,{name:e,index:i,group:o,on:B9e,tween:H9e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vre})}function vO(n,e){var r=jl(n,e);if(r.state>vre)throw new Error("too late; already scheduled");return r}function $c(n,e){var r=jl(n,e);if(r.state>L4)throw new Error("too late; already running");return r}function jl(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function q9e(n,e,r){var i=n.__transition,o;i[e]=r,r.timer=yO(s,0,r.time);function s(u){r.state=Iq,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var d,h,f,m;if(r.state!==Iq)return c();for(d in i)if(m=i[d],m.name===r.name){if(m.state===L4)return Dq(a);m.state===Rq?(m.state=z4,m.timer.stop(),m.on.call("interrupt",n,n.__data__,m.index,m.group),delete i[d]):+d<e&&(m.state=z4,m.timer.stop(),m.on.call("cancel",n,n.__data__,m.index,m.group),delete i[d])}if(Dq(function(){r.state===L4&&(r.state=Rq,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=xM,r.on.call("start",n,n.__data__,r.index,r.group),r.state===xM){for(r.state=L4,o=new Array(f=r.tween.length),d=0,h=-1;d<f;++d)(m=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(o[++h]=m);o.length=h+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=bM,1),h=-1,f=o.length;++h<f;)o[h].call(n,d);r.state===bM&&(r.on.call("end",n,n.__data__,r.index,r.group),c())}function c(){r.state=z4,r.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function F4(n,e){var r=n.__transition,i,o,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){s=!1;continue}o=i.state>xM&&i.state<bM,i.state=z4,i.timer.stop(),i.on.call(o?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}s&&delete n.__transition}}function V9e(n){return this.each(function(){F4(this,n)})}function W9e(n,e){var r,i;return function(){var o=$c(this,n),s=o.tween;if(s!==r){i=r=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function U9e(n,e,r){var i,o;if(typeof r!="function")throw new Error;return function(){var s=$c(this,n),a=s.tween;if(a!==i){o=(i=a).slice();for(var l={name:e,value:r},c=0,u=o.length;c<u;++c)if(o[c].name===e){o[c]=l;break}c===u&&o.push(l)}s.tween=o}}function K9e(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=jl(this.node(),r).tween,o=0,s=i.length,a;o<s;++o)if((a=i[o]).name===n)return a.value;return null}return this.each((e==null?W9e:U9e)(r,n,e))}function xO(n,e,r){var i=n._id;return n.each(function(){var o=$c(this,i);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return jl(o,i).value[e]}}function xre(n,e){var r;return(typeof e=="number"?il:e instanceof Qp?r5:(r=Qp(e))?(e=r,r5):fre)(n,e)}function G9e(n){return function(){this.removeAttribute(n)}}function Y9e(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Z9e(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttribute(n);return a===o?null:a===i?s:s=e(i=a,r)}}function X9e(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttributeNS(n.space,n.local);return a===o?null:a===i?s:s=e(i=a,r)}}function J9e(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function Q9e(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function eMe(n,e){var r=M3(n),i=r==="transform"?N9e:xre;return this.attrTween(n,typeof e=="function"?(r.local?Q9e:J9e)(r,i,xO(this,"attr."+n,e)):e==null?(r.local?Y9e:G9e)(r):(r.local?X9e:Z9e)(r,i,e))}function tMe(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function nMe(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function rMe(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&nMe(n,s)),r}return o._value=e,o}function iMe(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&tMe(n,s)),r}return o._value=e,o}function oMe(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=M3(n);return this.tween(r,(i.local?rMe:iMe)(i,e))}function sMe(n,e){return function(){vO(this,n).delay=+e.apply(this,arguments)}}function aMe(n,e){return e=+e,function(){vO(this,n).delay=e}}function lMe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?sMe:aMe)(e,n)):jl(this.node(),e).delay}function cMe(n,e){return function(){$c(this,n).duration=+e.apply(this,arguments)}}function uMe(n,e){return e=+e,function(){$c(this,n).duration=e}}function dMe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?cMe:uMe)(e,n)):jl(this.node(),e).duration}function hMe(n,e){if(typeof e!="function")throw new Error;return function(){$c(this,n).ease=e}}function fMe(n){var e=this._id;return arguments.length?this.each(hMe(e,n)):jl(this.node(),e).ease}function pMe(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;$c(this,n).ease=r}}function mMe(n){if(typeof n!="function")throw new Error;return this.each(pMe(this._id,n))}function gMe(n){typeof n!="function"&&(n=Jne(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new Xu(i,this._parents,this._name,this._id)}function yMe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=e[l],u=r[l],d=c.length,h=a[l]=new Array(d),f,m=0;m<d;++m)(f=c[m]||u[m])&&(h[m]=f);for(;l<i;++l)a[l]=e[l];return new Xu(a,this._parents,this._name,this._id)}function vMe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function xMe(n,e,r){var i,o,s=vMe(e)?vO:$c;return function(){var a=s(this,n),l=a.on;l!==i&&(o=(i=l).copy()).on(e,r),a.on=o}}function bMe(n,e){var r=this._id;return arguments.length<2?jl(this.node(),r).on.on(n):this.each(xMe(r,n,e))}function wMe(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function kMe(){return this.on("end.remove",wMe(this._id))}function SMe(n){var e=this._name,r=this._id;typeof n!="function"&&(n=dO(n));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],c=l.length,u=s[a]=new Array(c),d,h,f=0;f<c;++f)(d=l[f])&&(h=n.call(d,d.__data__,f,l))&&("__data__"in d&&(h.__data__=d.__data__),u[f]=h,N3(u[f],e,r,f,u,jl(d,r)));return new Xu(s,this._parents,e,r)}function CMe(n){var e=this._name,r=this._id;typeof n!="function"&&(n=Xne(n));for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var c=i[l],u=c.length,d,h=0;h<u;++h)if(d=c[h]){for(var f=n.call(d,d.__data__,h,c),m,v=jl(d,r),x=0,b=f.length;x<b;++x)(m=f[x])&&N3(m,e,r,x,f,v);s.push(f),a.push(d)}return new Xu(s,a,e,r)}var _Me=Lb.prototype.constructor;function AMe(){return new _Me(this._groups,this._parents)}function TMe(n,e){var r,i,o;return function(){var s=dg(this,n),a=(this.style.removeProperty(n),dg(this,n));return s===a?null:s===r&&a===i?o:o=e(r=s,i=a)}}function bre(n){return function(){this.style.removeProperty(n)}}function PMe(n,e,r){var i,o=r+"",s;return function(){var a=dg(this,n);return a===o?null:a===i?s:s=e(i=a,r)}}function MMe(n,e,r){var i,o,s;return function(){var a=dg(this,n),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),dg(this,n))),a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l))}}function EMe(n,e){var r,i,o,s="style."+e,a="end."+s,l;return function(){var c=$c(this,n),u=c.on,d=c.value[s]==null?l||(l=bre(e)):void 0;(u!==r||o!==d)&&(i=(r=u).copy()).on(a,o=d),c.on=i}}function NMe(n,e,r){var i=(n+="")=="transform"?E9e:xre;return e==null?this.styleTween(n,TMe(n,i)).on("end.style."+n,bre(n)):typeof e=="function"?this.styleTween(n,MMe(n,i,xO(this,"style."+n,e))).each(EMe(this._id,n)):this.styleTween(n,PMe(n,i,e),r).on("end.style."+n,null)}function jMe(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function OMe(n,e,r){var i,o;function s(){var a=e.apply(this,arguments);return a!==o&&(i=(o=a)&&jMe(n,a,r)),i}return s._value=e,s}function DMe(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,OMe(n,e,r??""))}function IMe(n){return function(){this.textContent=n}}function RMe(n){return function(){var e=n(this);this.textContent=e??""}}function LMe(n){return this.tween("text",typeof n=="function"?RMe(xO(this,"text",n)):IMe(n==null?"":n+""))}function zMe(n){return function(e){this.textContent=n.call(this,e)}}function FMe(n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&zMe(o)),e}return i._value=n,i}function $Me(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,FMe(n))}function BMe(){for(var n=this._name,e=this._id,r=wre(),i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)if(c=a[u]){var d=jl(c,e);N3(c,n,r,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Xu(i,this._parents,n,r)}function HMe(){var n,e,r=this,i=r._id,o=r.size();return new Promise(function(s,a){var l={value:a},c={value:function(){--o===0&&s()}};r.each(function(){var u=$c(this,i),d=u.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),o===0&&s()})}var qMe=0;function Xu(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function wre(){return++qMe}var lu=Lb.prototype;Xu.prototype={constructor:Xu,select:SMe,selectAll:CMe,selectChild:lu.selectChild,selectChildren:lu.selectChildren,filter:gMe,merge:yMe,selection:AMe,transition:BMe,call:lu.call,nodes:lu.nodes,node:lu.node,size:lu.size,empty:lu.empty,each:lu.each,on:bMe,attr:eMe,attrTween:oMe,style:NMe,styleTween:DMe,text:LMe,textTween:$Me,remove:kMe,tween:K9e,delay:lMe,duration:dMe,ease:fMe,easeVarying:mMe,end:HMe,[Symbol.iterator]:lu[Symbol.iterator]};function VMe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var WMe={time:null,delay:0,duration:250,ease:VMe};function UMe(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function KMe(n){var e,r;n instanceof Xu?(e=n._id,n=n._name):(e=wre(),(r=WMe).time=gO(),n=n==null?null:n+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&N3(c,n,e,u,a,r||UMe(c,e));return new Xu(i,this._parents,n,e)}Lb.prototype.interrupt=V9e;Lb.prototype.transition=KMe;const tk=n=>()=>n;function GMe(n,{sourceEvent:e,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Ou(n,e,r){this.k=n,this.x=e,this.y=r}Ou.prototype={constructor:Ou,scale:function(n){return n===1?this:new Ou(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Ou(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bO=new Ou(1,0,0);nc.prototype=Ou.prototype;function nc(n){for(;!n.__zoom;)if(!(n=n.parentNode))return bO;return n.__zoom}function gA(n){n.stopImmediatePropagation()}function ry(n){n.preventDefault(),n.stopImmediatePropagation()}function YMe(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function ZMe(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Lq(){return this.__zoom||bO}function XMe(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function JMe(){return navigator.maxTouchPoints||"ontouchstart"in this}function QMe(n,e,r){var i=n.invertX(e[0][0])-r[0][0],o=n.invertX(e[1][0])-r[1][0],s=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function eEe(){var n=YMe,e=ZMe,r=QMe,i=XMe,o=JMe,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=I9e,u=zb("start","zoom","end"),d,h,f,m=500,v=150,x=0,b=10;function w(I){I.property("__zoom",Lq).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",z).filter(o).on("touchstart.zoom",B).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(I,U,Z,te){var J=I.selection?I.selection():I;J.property("__zoom",Lq),I!==J?A(I,U,Z,te):J.interrupt().each(function(){T(this,arguments).event(te).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},w.scaleBy=function(I,U,Z,te){w.scaleTo(I,function(){var J=this.__zoom.k,oe=typeof U=="function"?U.apply(this,arguments):U;return J*oe},Z,te)},w.scaleTo=function(I,U,Z,te){w.transform(I,function(){var J=e.apply(this,arguments),oe=this.__zoom,q=Z==null?P(J):typeof Z=="function"?Z.apply(this,arguments):Z,G=oe.invert(q),re=typeof U=="function"?U.apply(this,arguments):U;return r(_(S(oe,re),q,G),J,a)},Z,te)},w.translateBy=function(I,U,Z,te){w.transform(I,function(){return r(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),a)},null,te)},w.translateTo=function(I,U,Z,te,J){w.transform(I,function(){var oe=e.apply(this,arguments),q=this.__zoom,G=te==null?P(oe):typeof te=="function"?te.apply(this,arguments):te;return r(bO.translate(G[0],G[1]).scale(q.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof Z=="function"?-Z.apply(this,arguments):-Z),oe,a)},te,J)};function S(I,U){return U=Math.max(s[0],Math.min(s[1],U)),U===I.k?I:new Ou(U,I.x,I.y)}function _(I,U,Z){var te=U[0]-Z[0]*I.k,J=U[1]-Z[1]*I.k;return te===I.x&&J===I.y?I:new Ou(I.k,te,J)}function P(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,U,Z,te){I.on("start.zoom",function(){T(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(te).end()}).tween("zoom",function(){var J=this,oe=arguments,q=T(J,oe).event(te),G=e.apply(J,oe),re=Z==null?P(G):typeof Z=="function"?Z.apply(J,oe):Z,V=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),ve=J.__zoom,ke=typeof U=="function"?U.apply(J,oe):U,pe=c(ve.invert(re).concat(V/ve.k),ke.invert(re).concat(V/ke.k));return function(me){if(me===1)me=ke;else{var Me=pe(me),le=V/Me[2];me=new Ou(le,re[0]-Me[0]*le,re[1]-Me[1]*le)}q.zoom(null,me)}})}function T(I,U,Z){return!Z&&I.__zooming||new E(I,U)}function E(I,U){this.that=I,this.args=U,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,U),this.taps=0}E.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,U){return this.mouse&&I!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var U=ma(this.that).datum();u.call(I,this.that,new GMe(I,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:u}),U)}};function L(I,...U){if(!n.apply(this,arguments))return;var Z=T(this,U).event(I),te=this.__zoom,J=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,i.apply(this,arguments)))),oe=oc(I);if(Z.wheel)(Z.mouse[0][0]!==oe[0]||Z.mouse[0][1]!==oe[1])&&(Z.mouse[1]=te.invert(Z.mouse[0]=oe)),clearTimeout(Z.wheel);else{if(te.k===J)return;Z.mouse=[oe,te.invert(oe)],F4(this),Z.start()}ry(I),Z.wheel=setTimeout(q,v),Z.zoom("mouse",r(_(S(te,J),Z.mouse[0],Z.mouse[1]),Z.extent,a));function q(){Z.wheel=null,Z.end()}}function $(I,...U){if(f||!n.apply(this,arguments))return;var Z=I.currentTarget,te=T(this,U,!0).event(I),J=ma(I.view).on("mousemove.zoom",re,!0).on("mouseup.zoom",V,!0),oe=oc(I,Z),q=I.clientX,G=I.clientY;lre(I.view),gA(I),te.mouse=[oe,this.__zoom.invert(oe)],F4(this),te.start();function re(ve){if(ry(ve),!te.moved){var ke=ve.clientX-q,pe=ve.clientY-G;te.moved=ke*ke+pe*pe>x}te.event(ve).zoom("mouse",r(_(te.that.__zoom,te.mouse[0]=oc(ve,Z),te.mouse[1]),te.extent,a))}function V(ve){J.on("mousemove.zoom mouseup.zoom",null),cre(ve.view,te.moved),ry(ve),te.event(ve).end()}}function z(I,...U){if(n.apply(this,arguments)){var Z=this.__zoom,te=oc(I.changedTouches?I.changedTouches[0]:I,this),J=Z.invert(te),oe=Z.k*(I.shiftKey?.5:2),q=r(_(S(Z,oe),te,J),e.apply(this,U),a);ry(I),l>0?ma(this).transition().duration(l).call(A,q,te,I):ma(this).call(w.transform,q,te,I)}}function B(I,...U){if(n.apply(this,arguments)){var Z=I.touches,te=Z.length,J=T(this,U,I.changedTouches.length===te).event(I),oe,q,G,re;for(gA(I),q=0;q<te;++q)G=Z[q],re=oc(G,this),re=[re,this.__zoom.invert(re),G.identifier],J.touch0?!J.touch1&&J.touch0[2]!==re[2]&&(J.touch1=re,J.taps=0):(J.touch0=re,oe=!0,J.taps=1+!!d);d&&(d=clearTimeout(d)),oe&&(J.taps<2&&(h=re[0],d=setTimeout(function(){d=null},m)),F4(this),J.start())}}function D(I,...U){if(this.__zooming){var Z=T(this,U).event(I),te=I.changedTouches,J=te.length,oe,q,G,re;for(ry(I),oe=0;oe<J;++oe)q=te[oe],G=oc(q,this),Z.touch0&&Z.touch0[2]===q.identifier?Z.touch0[0]=G:Z.touch1&&Z.touch1[2]===q.identifier&&(Z.touch1[0]=G);if(q=Z.that.__zoom,Z.touch1){var V=Z.touch0[0],ve=Z.touch0[1],ke=Z.touch1[0],pe=Z.touch1[1],me=(me=ke[0]-V[0])*me+(me=ke[1]-V[1])*me,Me=(Me=pe[0]-ve[0])*Me+(Me=pe[1]-ve[1])*Me;q=S(q,Math.sqrt(me/Me)),G=[(V[0]+ke[0])/2,(V[1]+ke[1])/2],re=[(ve[0]+pe[0])/2,(ve[1]+pe[1])/2]}else if(Z.touch0)G=Z.touch0[0],re=Z.touch0[1];else return;Z.zoom("touch",r(_(q,G,re),Z.extent,a))}}function Y(I,...U){if(this.__zooming){var Z=T(this,U).event(I),te=I.changedTouches,J=te.length,oe,q;for(gA(I),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),oe=0;oe<J;++oe)q=te[oe],Z.touch0&&Z.touch0[2]===q.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===q.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(q=oc(q,this),Math.hypot(h[0]-q[0],h[1]-q[1])<b)){var G=ma(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return w.wheelDelta=function(I){return arguments.length?(i=typeof I=="function"?I:tk(+I),w):i},w.filter=function(I){return arguments.length?(n=typeof I=="function"?I:tk(!!I),w):n},w.touchable=function(I){return arguments.length?(o=typeof I=="function"?I:tk(!!I),w):o},w.extent=function(I){return arguments.length?(e=typeof I=="function"?I:tk([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),w):e},w.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],w):[s[0],s[1]]},w.translateExtent=function(I){return arguments.length?(a[0][0]=+I[0][0],a[1][0]=+I[1][0],a[0][1]=+I[0][1],a[1][1]=+I[1][1],w):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},w.constrain=function(I){return arguments.length?(r=I,w):r},w.duration=function(I){return arguments.length?(l=+I,w):l},w.interpolate=function(I){return arguments.length?(c=I,w):c},w.on=function(){var I=u.on.apply(u,arguments);return I===u?w:I},w.clickDistance=function(I){return arguments.length?(x=(I=+I)*I,w):Math.sqrt(x)},w.tapDistance=function(I){return arguments.length?(b=+I,w):b},w}function Fh(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function tEe(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function wO(n){let e,r,i;n.length!==2?(e=Fh,r=(l,c)=>Fh(n(l),c),i=(l,c)=>n(l)-c):(e=n===Fh||n===tEe?n:nEe,r=n,i=n);function o(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){const h=o(l,c,u,d-1);return h>u&&i(l[h-1],c)>-i(l[h],c)?h-1:h}return{left:o,center:a,right:s}}function nEe(){return 0}function kre(n){return n===null?NaN:+n}function*rEe(n,e){for(let r of n)r!=null&&(r=+r)>=r&&(yield r)}const iEe=wO(Fh),$b=iEe.right;wO(kre).center;class zq extends Map{constructor(e,r=aEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,o]of e)this.set(i,o)}get(e){return super.get(Fq(this,e))}has(e){return super.has(Fq(this,e))}set(e,r){return super.set(oEe(this,e),r)}delete(e){return super.delete(sEe(this,e))}}function Fq({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function oEe({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function sEe({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function aEe(n){return n!==null&&typeof n=="object"?n.valueOf():n}function lEe(n=Fh){if(n===Fh)return Sre;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,r)=>{const i=n(e,r);return i||i===0?i:(n(r,r)===0)-(n(e,e)===0)}}function Sre(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const cEe=Math.sqrt(50),uEe=Math.sqrt(10),dEe=Math.sqrt(2);function a5(n,e,r){const i=(e-n)/Math.max(0,r),o=Math.floor(Math.log10(i)),s=i/Math.pow(10,o),a=s>=cEe?10:s>=uEe?5:s>=dEe?2:1;let l,c,u;return o<0?(u=Math.pow(10,-o)/a,l=Math.round(n*u),c=Math.round(e*u),l/u<n&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,o)*a,l=Math.round(n/u),c=Math.round(e/u),l*u<n&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?a5(n,e,r*2):[l,c,u]}function wM(n,e,r){if(e=+e,n=+n,r=+r,!(r>0))return[];if(n===e)return[n];const i=e<n,[o,s,a]=i?a5(e,n,r):a5(n,e,r);if(!(s>=o))return[];const l=s-o+1,c=new Array(l);if(i)if(a<0)for(let u=0;u<l;++u)c[u]=(s-u)/-a;else for(let u=0;u<l;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(o+u)/-a;else for(let u=0;u<l;++u)c[u]=(o+u)*a;return c}function kM(n,e,r){return e=+e,n=+n,r=+r,a5(n,e,r)[2]}function SM(n,e,r){e=+e,n=+n,r=+r;const i=e<n,o=i?kM(e,n,r):kM(n,e,r);return(i?-1:1)*(o<0?1/-o:o)}function l5(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function c5(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function Cre(n,e,r=0,i=1/0,o){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),i=Math.floor(Math.min(n.length-1,i)),!(r<=e&&e<=i))return n;for(o=o===void 0?Sre:lEe(o);i>r;){if(i-r>600){const c=i-r+1,u=e-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(e-u*h/c+f)),v=Math.min(i,Math.floor(e+(c-u)*h/c+f));Cre(n,e,m,v,o)}const s=n[e];let a=r,l=i;for(iy(n,r,e),o(n[i],s)>0&&iy(n,r,i);a<l;){for(iy(n,a,l),++a,--l;o(n[a],s)<0;)++a;for(;o(n[l],s)>0;)--l}o(n[r],s)===0?iy(n,r,l):(++l,iy(n,l,i)),l<=e&&(r=l+1),e<=l&&(i=l-1)}return n}function iy(n,e,r){const i=n[e];n[e]=n[r],n[r]=i}function hEe(n,e,r){if(n=Float64Array.from(rEe(n)),!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return c5(n);if(e>=1)return l5(n);var i,o=(i-1)*e,s=Math.floor(o),a=l5(Cre(n,s).subarray(0,s+1)),l=c5(n.subarray(s+1));return a+(l-a)*(o-s)}}function fEe(n,e,r=kre){if(!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return+r(n[0],0,n);if(e>=1)return+r(n[i-1],i-1,n);var i,o=(i-1)*e,s=Math.floor(o),a=+r(n[s],s,n),l=+r(n[s+1],s+1,n);return a+(l-a)*(o-s)}}function pEe(n,e,r){n=+n,e=+e,r=(o=arguments.length)<2?(e=n,n=0,1):o<3?1:+r;for(var i=-1,o=Math.max(0,Math.ceil((e-n)/r))|0,s=new Array(o);++i<o;)s[i]=n+i*r;return s}function mEe(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var _re=typeof global=="object"&&global&&global.Object===Object&&global,gEe=typeof self=="object"&&self&&self.Object===Object&&self,wm=_re||gEe||Function("return this")(),u5=wm.Symbol,Are=Object.prototype,yEe=Are.hasOwnProperty,vEe=Are.toString,oy=u5?u5.toStringTag:void 0;function xEe(n){var e=yEe.call(n,oy),r=n[oy];try{n[oy]=void 0;var i=!0}catch{}var o=vEe.call(n);return i&&(e?n[oy]=r:delete n[oy]),o}var bEe=Object.prototype,wEe=bEe.toString;function kEe(n){return wEe.call(n)}var SEe="[object Null]",CEe="[object Undefined]",$q=u5?u5.toStringTag:void 0;function Bb(n){return n==null?n===void 0?CEe:SEe:$q&&$q in Object(n)?xEe(n):kEe(n)}function qg(n){return n!=null&&typeof n=="object"}var _Ee="[object Symbol]";function AEe(n){return typeof n=="symbol"||qg(n)&&Bb(n)==_Ee}var CM=Array.isArray,TEe=/\s/;function PEe(n){for(var e=n.length;e--&&TEe.test(n.charAt(e)););return e}var MEe=/^\s+/;function EEe(n){return n&&n.slice(0,PEe(n)+1).replace(MEe,"")}function Us(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Bq=NaN,NEe=/^[-+]0x[0-9a-f]+$/i,jEe=/^0b[01]+$/i,OEe=/^0o[0-7]+$/i,DEe=parseInt;function Hq(n){if(typeof n=="number")return n;if(AEe(n))return Bq;if(Us(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Us(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=EEe(n);var r=jEe.test(n);return r||OEe.test(n)?DEe(n.slice(2),r?2:8):NEe.test(n)?Bq:+n}function Tre(n){return n}var IEe="[object AsyncFunction]",REe="[object Function]",LEe="[object GeneratorFunction]",zEe="[object Proxy]";function kO(n){if(!Us(n))return!1;var e=Bb(n);return e==REe||e==LEe||e==IEe||e==zEe}var yA=wm["__core-js_shared__"],qq=(function(){var n=/[^.]+$/.exec(yA&&yA.keys&&yA.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function FEe(n){return!!qq&&qq in n}var $Ee=Function.prototype,BEe=$Ee.toString;function HEe(n){if(n!=null){try{return BEe.call(n)}catch{}try{return n+""}catch{}}return""}var qEe=/[\\^$.*+?()[\]{}|]/g,VEe=/^\[object .+?Constructor\]$/,WEe=Function.prototype,UEe=Object.prototype,KEe=WEe.toString,GEe=UEe.hasOwnProperty,YEe=RegExp("^"+KEe.call(GEe).replace(qEe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZEe(n){if(!Us(n)||FEe(n))return!1;var e=kO(n)?YEe:VEe;return e.test(HEe(n))}function XEe(n,e){return n?.[e]}function SO(n,e){var r=XEe(n,e);return ZEe(r)?r:void 0}var Vq=Object.create,JEe=(function(){function n(){}return function(e){if(!Us(e))return{};if(Vq)return Vq(e);n.prototype=e;var r=new n;return n.prototype=void 0,r}})();function Pre(n,e,r){switch(r.length){case 0:return n.call(e);case 1:return n.call(e,r[0]);case 2:return n.call(e,r[0],r[1]);case 3:return n.call(e,r[0],r[1],r[2])}return n.apply(e,r)}function QEe(n,e){var r=-1,i=n.length;for(e||(e=Array(i));++r<i;)e[r]=n[r];return e}var eNe=800,tNe=16,nNe=Date.now;function rNe(n){var e=0,r=0;return function(){var i=nNe(),o=tNe-(i-r);if(r=i,o>0){if(++e>=eNe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function iNe(n){return function(){return n}}var d5=(function(){try{var n=SO(Object,"defineProperty");return n({},"",{}),n}catch{}})(),oNe=d5?function(n,e){return d5(n,"toString",{configurable:!0,enumerable:!1,value:iNe(e),writable:!0})}:Tre,sNe=rNe(oNe),aNe=9007199254740991,lNe=/^(?:0|[1-9]\d*)$/;function Mre(n,e){var r=typeof n;return e=e??aNe,!!e&&(r=="number"||r!="symbol"&&lNe.test(n))&&n>-1&&n%1==0&&n<e}function CO(n,e,r){e=="__proto__"&&d5?d5(n,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[e]=r}function j3(n,e){return n===e||n!==n&&e!==e}var cNe=Object.prototype,uNe=cNe.hasOwnProperty;function dNe(n,e,r){var i=n[e];(!(uNe.call(n,e)&&j3(i,r))||r===void 0&&!(e in n))&&CO(n,e,r)}function hNe(n,e,r,i){var o=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var l=e[s],c=void 0;c===void 0&&(c=n[l]),o?CO(r,l,c):dNe(r,l,c)}return r}var Wq=Math.max;function fNe(n,e,r){return e=Wq(e===void 0?n.length-1:e,0),function(){for(var i=arguments,o=-1,s=Wq(i.length-e,0),a=Array(s);++o<s;)a[o]=i[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=i[o];return l[e]=r(a),Pre(n,this,l)}}function Ere(n,e){return sNe(fNe(n,e,Tre),n+"")}var pNe=9007199254740991;function Nre(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=pNe}function _O(n){return n!=null&&Nre(n.length)&&!kO(n)}function mNe(n,e,r){if(!Us(r))return!1;var i=typeof e;return(i=="number"?_O(r)&&Mre(e,r.length):i=="string"&&e in r)?j3(r[e],n):!1}function gNe(n){return Ere(function(e,r){var i=-1,o=r.length,s=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(s=n.length>3&&typeof s=="function"?(o--,s):void 0,a&&mNe(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++i<o;){var l=r[i];l&&n(e,l,i,s)}return e})}var yNe=Object.prototype;function jre(n){var e=n&&n.constructor,r=typeof e=="function"&&e.prototype||yNe;return n===r}function vNe(n,e){for(var r=-1,i=Array(n);++r<n;)i[r]=e(r);return i}var xNe="[object Arguments]";function Uq(n){return qg(n)&&Bb(n)==xNe}var Ore=Object.prototype,bNe=Ore.hasOwnProperty,wNe=Ore.propertyIsEnumerable,_M=Uq((function(){return arguments})())?Uq:function(n){return qg(n)&&bNe.call(n,"callee")&&!wNe.call(n,"callee")};function kNe(){return!1}var Dre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kq=Dre&&typeof module=="object"&&module&&!module.nodeType&&module,SNe=Kq&&Kq.exports===Dre,Gq=SNe?wm.Buffer:void 0,CNe=Gq?Gq.isBuffer:void 0,Ire=CNe||kNe,_Ne="[object Arguments]",ANe="[object Array]",TNe="[object Boolean]",PNe="[object Date]",MNe="[object Error]",ENe="[object Function]",NNe="[object Map]",jNe="[object Number]",ONe="[object Object]",DNe="[object RegExp]",INe="[object Set]",RNe="[object String]",LNe="[object WeakMap]",zNe="[object ArrayBuffer]",FNe="[object DataView]",$Ne="[object Float32Array]",BNe="[object Float64Array]",HNe="[object Int8Array]",qNe="[object Int16Array]",VNe="[object Int32Array]",WNe="[object Uint8Array]",UNe="[object Uint8ClampedArray]",KNe="[object Uint16Array]",GNe="[object Uint32Array]",or={};or[$Ne]=or[BNe]=or[HNe]=or[qNe]=or[VNe]=or[WNe]=or[UNe]=or[KNe]=or[GNe]=!0;or[_Ne]=or[ANe]=or[zNe]=or[TNe]=or[FNe]=or[PNe]=or[MNe]=or[ENe]=or[NNe]=or[jNe]=or[ONe]=or[DNe]=or[INe]=or[RNe]=or[LNe]=!1;function YNe(n){return qg(n)&&Nre(n.length)&&!!or[Bb(n)]}function ZNe(n){return function(e){return n(e)}}var Rre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vv=Rre&&typeof module=="object"&&module&&!module.nodeType&&module,XNe=Vv&&Vv.exports===Rre,vA=XNe&&_re.process,Yq=(function(){try{var n=Vv&&Vv.require&&Vv.require("util").types;return n||vA&&vA.binding&&vA.binding("util")}catch{}})(),Zq=Yq&&Yq.isTypedArray,Lre=Zq?ZNe(Zq):YNe;function JNe(n,e){var r=CM(n),i=!r&&_M(n),o=!r&&!i&&Ire(n),s=!r&&!i&&!o&&Lre(n),a=r||i||o||s,l=a?vNe(n.length,String):[],c=l.length;for(var u in n)a&&(u=="length"||o&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Mre(u,c))||l.push(u);return l}function QNe(n,e){return function(r){return n(e(r))}}function eje(n){var e=[];if(n!=null)for(var r in Object(n))e.push(r);return e}var tje=Object.prototype,nje=tje.hasOwnProperty;function rje(n){if(!Us(n))return eje(n);var e=jre(n),r=[];for(var i in n)i=="constructor"&&(e||!nje.call(n,i))||r.push(i);return r}function zre(n){return _O(n)?JNe(n):rje(n)}var zx=SO(Object,"create");function ije(){this.__data__=zx?zx(null):{},this.size=0}function oje(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var sje="__lodash_hash_undefined__",aje=Object.prototype,lje=aje.hasOwnProperty;function cje(n){var e=this.__data__;if(zx){var r=e[n];return r===sje?void 0:r}return lje.call(e,n)?e[n]:void 0}var uje=Object.prototype,dje=uje.hasOwnProperty;function hje(n){var e=this.__data__;return zx?e[n]!==void 0:dje.call(e,n)}var fje="__lodash_hash_undefined__";function pje(n,e){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=zx&&e===void 0?fje:e,this}function tm(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var i=n[e];this.set(i[0],i[1])}}tm.prototype.clear=ije;tm.prototype.delete=oje;tm.prototype.get=cje;tm.prototype.has=hje;tm.prototype.set=pje;function mje(){this.__data__=[],this.size=0}function O3(n,e){for(var r=n.length;r--;)if(j3(n[r][0],e))return r;return-1}var gje=Array.prototype,yje=gje.splice;function vje(n){var e=this.__data__,r=O3(e,n);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():yje.call(e,r,1),--this.size,!0}function xje(n){var e=this.__data__,r=O3(e,n);return r<0?void 0:e[r][1]}function bje(n){return O3(this.__data__,n)>-1}function wje(n,e){var r=this.__data__,i=O3(r,n);return i<0?(++this.size,r.push([n,e])):r[i][1]=e,this}function md(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var i=n[e];this.set(i[0],i[1])}}md.prototype.clear=mje;md.prototype.delete=vje;md.prototype.get=xje;md.prototype.has=bje;md.prototype.set=wje;var Fre=SO(wm,"Map");function kje(){this.size=0,this.__data__={hash:new tm,map:new(Fre||md),string:new tm}}function Sje(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function D3(n,e){var r=n.__data__;return Sje(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Cje(n){var e=D3(this,n).delete(n);return this.size-=e?1:0,e}function _je(n){return D3(this,n).get(n)}function Aje(n){return D3(this,n).has(n)}function Tje(n,e){var r=D3(this,n),i=r.size;return r.set(n,e),this.size+=r.size==i?0:1,this}function Vg(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var i=n[e];this.set(i[0],i[1])}}Vg.prototype.clear=kje;Vg.prototype.delete=Cje;Vg.prototype.get=_je;Vg.prototype.has=Aje;Vg.prototype.set=Tje;var $re=QNe(Object.getPrototypeOf,Object),Pje="[object Object]",Mje=Function.prototype,Eje=Object.prototype,Bre=Mje.toString,Nje=Eje.hasOwnProperty,jje=Bre.call(Object);function Oje(n){if(!qg(n)||Bb(n)!=Pje)return!1;var e=$re(n);if(e===null)return!0;var r=Nje.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Bre.call(r)==jje}function Dje(){this.__data__=new md,this.size=0}function Ije(n){var e=this.__data__,r=e.delete(n);return this.size=e.size,r}function Rje(n){return this.__data__.get(n)}function Lje(n){return this.__data__.has(n)}var zje=200;function Fje(n,e){var r=this.__data__;if(r instanceof md){var i=r.__data__;if(!Fre||i.length<zje-1)return i.push([n,e]),this.size=++r.size,this;r=this.__data__=new Vg(i)}return r.set(n,e),this.size=r.size,this}function Wg(n){var e=this.__data__=new md(n);this.size=e.size}Wg.prototype.clear=Dje;Wg.prototype.delete=Ije;Wg.prototype.get=Rje;Wg.prototype.has=Lje;Wg.prototype.set=Fje;var Hre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xq=Hre&&typeof module=="object"&&module&&!module.nodeType&&module,$je=Xq&&Xq.exports===Hre,Jq=$je?wm.Buffer:void 0;Jq&&Jq.allocUnsafe;function Bje(n,e){return n.slice()}var Qq=wm.Uint8Array;function Hje(n){var e=new n.constructor(n.byteLength);return new Qq(e).set(new Qq(n)),e}function qje(n,e){var r=Hje(n.buffer);return new n.constructor(r,n.byteOffset,n.length)}function Vje(n){return typeof n.constructor=="function"&&!jre(n)?JEe($re(n)):{}}function Wje(n){return function(e,r,i){for(var o=-1,s=Object(e),a=i(e),l=a.length;l--;){var c=a[++o];if(r(s[c],c,s)===!1)break}return e}}var Uje=Wje(),xA=function(){return wm.Date.now()},Kje="Expected a function",Gje=Math.max,Yje=Math.min;function Hb(n,e,r){var i,o,s,a,l,c,u=0,d=!1,h=!1,f=!0;if(typeof n!="function")throw new TypeError(Kje);e=Hq(e)||0,Us(r)&&(d=!!r.leading,h="maxWait"in r,s=h?Gje(Hq(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function m(T){var E=i,L=o;return i=o=void 0,u=T,a=n.apply(L,E),a}function v(T){return u=T,l=setTimeout(w,e),d?m(T):a}function x(T){var E=T-c,L=T-u,$=e-E;return h?Yje($,s-L):$}function b(T){var E=T-c,L=T-u;return c===void 0||E>=e||E<0||h&&L>=s}function w(){var T=xA();if(b(T))return S(T);l=setTimeout(w,x(T))}function S(T){return l=void 0,f&&i?m(T):(i=o=void 0,a)}function _(){l!==void 0&&clearTimeout(l),u=0,i=c=o=l=void 0}function P(){return l===void 0?a:S(xA())}function A(){var T=xA(),E=b(T);if(i=arguments,o=this,c=T,E){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(w,e),m(c)}return l===void 0&&(l=setTimeout(w,e)),a}return A.cancel=_,A.flush=P,A}function AM(n,e,r){(r!==void 0&&!j3(n[e],r)||r===void 0&&!(e in n))&&CO(n,e,r)}function Zje(n){return qg(n)&&_O(n)}function TM(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function Xje(n){return hNe(n,zre(n))}function Jje(n,e,r,i,o,s,a){var l=TM(n,r),c=TM(e,r),u=a.get(c);if(u){AM(n,r,u);return}var d=s?s(l,c,r+"",n,e,a):void 0,h=d===void 0;if(h){var f=CM(c),m=!f&&Ire(c),v=!f&&!m&&Lre(c);d=c,f||m||v?CM(l)?d=l:Zje(l)?d=QEe(l):m?(h=!1,d=Bje(c)):v?(h=!1,d=qje(c)):d=[]:Oje(c)||_M(c)?(d=l,_M(l)?d=Xje(l):(!Us(l)||kO(l))&&(d=Vje(c))):h=!1}h&&(a.set(c,d),o(d,c,i,s,a),a.delete(c)),AM(n,r,d)}function AO(n,e,r,i,o){n!==e&&Uje(e,function(s,a){if(o||(o=new Wg),Us(s))Jje(n,e,a,r,AO,i,o);else{var l=i?i(TM(n,a),s,a+"",n,e,o):void 0;l===void 0&&(l=s),AM(n,a,l)}},zre)}function qre(n,e,r,i,o,s){return Us(n)&&Us(e)&&(s.set(e,n),AO(n,e,void 0,qre,s),s.delete(e)),n}var Qje=gNe(function(n,e,r,i){AO(n,e,r,i)}),eOe=Ere(function(n){return n.push(void 0,qre),Pre(Qje,void 0,n)}),tOe="Expected a function";function qb(n,e,r){var i=!0,o=!0;if(typeof n!="function")throw new TypeError(tOe);return Us(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Hb(n,e,{leading:i,maxWait:e,trailing:o})}var jp=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-jp.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?jp.Bounce.In(n*2)*.5:jp.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Zy=function(){return performance.now()},Vre=(function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var a=s[o];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,o=e;i<o.length;i++){var s=o[i];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=Zy()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var s=this._tweens[i[o]],a=!r;s&&s.update(e,a)===!1&&!r&&this.remove(s)}i=Object.keys(this._tweensAddedDuringUpdate)}},n})(),PM={Linear:function(n,e){var r=n.length-1,i=r*e,o=Math.floor(i),s=PM.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[r],n[r-1],r-i):s(n[o],n[o+1>r?r:o+1],i-o)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},Wre=(function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n})(),MM=new Vre,eV=(function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=jp.Linear.None,this._interpolationFunction=PM.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Wre.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=MM,MM.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=Zy()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var s in this._valuesEnd)o[s]=this._valuesEnd[s];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,o,s){for(var a in i){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(i[a]);if(!(u==="undefined"||u==="function")){if(d){var h=i[a];if(h.length===0)continue;for(var f=[l],m=0,v=h.length;m<v;m+=1){var x=this._handleRelativeValue(l,h[m]);if(isNaN(x)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(x)}d&&(i[a]=f)}if((u==="object"||c)&&l&&!d){r[a]=c?[]:{};var b=l;for(var w in b)r[a][w]=b[w];o[a]=c?[]:{};var h=i[a];if(!this._isDynamic){var S={};for(var w in h)S[w]=h[w];i[a]=h=S}this._setupProperties(b,r[a],h,o[a],s)}else(typeof r[a]>"u"||s)&&(r[a]=l),c||(r[a]*=1),d?o[a]=i[a].slice().reverse():o[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Zy()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Zy()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=jp.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=PM.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,o;if(e===void 0&&(e=Zy()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||a>c)return 1;var x=Math.trunc(a/l),b=a-x*l,w=Math.min(b/i._duration,1);return w===0&&a===i._duration?1:w},d=u(),h=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,v=this._chainedTweens.length;m<v;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,o){for(var s in i)if(r[s]!==void 0){var a=r[s]||0,l=i[s],c=Array.isArray(e[s]),u=Array.isArray(l),d=!c&&u;d?e[s]=this._interpolationFunction(l,o):typeof l=="object"&&l?this._updateProperties(e[s],a,l,o):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[s]=a+(l-a)*o))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n})();Wre.nextId;var Mc=MM;Mc.getAll.bind(Mc);Mc.removeAll.bind(Mc);Mc.add.bind(Mc);Mc.remove.bind(Mc);Mc.update.bind(Mc);function tV(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function nOe(n){if(Array.isArray(n))return n}function rOe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function iOe(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function oOe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function sOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aOe(n,e){return nOe(n)||oOe(n,e)||lOe(n,e)||sOe()}function lOe(n,e){if(n){if(typeof n=="string")return tV(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tV(n,e):void 0}}var cOe=iOe(function n(e,r){var i=r.default,o=i===void 0?null:i,s=r.triggerUpdate,a=s===void 0?!0:s,l=r.onChange,c=l===void 0?function(u,d){}:l;rOe(this,n),this.name=e,this.defaultVal=o,this.triggerUpdate=a,this.onChange=c});function TO(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,o=i===void 0?{}:i,s=n.methods,a=s===void 0?{}:s,l=n.aliases,c=l===void 0?{}:l,u=n.init,d=u===void 0?function(){}:u,h=n.update,f=h===void 0?function(){}:h,m=Object.keys(o).map(function(v){return new cOe(v,o[v])});return function v(){for(var x=arguments.length,b=new Array(x),w=0;w<x;w++)b[w]=arguments[w];var S=!!(this instanceof v&&this.constructor),_=S?b.shift():void 0,P=b[0],A=P===void 0?{}:P,T=Object.assign({},r instanceof Function?r(A):r,{initialised:!1}),E={};function L(B){return $(B,A),z(),L}var $=function(D,Y){d.call(L,D,T,Y),T.initialised=!0},z=Hb(function(){T.initialised&&(f.call(L,T,E),E={})},1);return m.forEach(function(B){L[B.name]=D(B);function D(Y){var I=Y.name,U=Y.triggerUpdate,Z=U===void 0?!1:U,te=Y.onChange,J=te===void 0?function(G,re){}:te,oe=Y.defaultVal,q=oe===void 0?null:oe;return function(G){var re=T[I];if(!arguments.length)return re;var V=G===void 0?q:G;return T[I]=V,J.call(L,V,T,re),!E.hasOwnProperty(I)&&(E[I]=re),Z&&z(),L}}}),Object.keys(a).forEach(function(B){L[B]=function(){for(var D,Y=arguments.length,I=new Array(Y),U=0;U<Y;U++)I[U]=arguments[U];return(D=a[B]).call.apply(D,[L,T].concat(I))}}),Object.entries(c).forEach(function(B){var D=aOe(B,2),Y=D[0],I=D[1];return L[Y]=L[I]}),L.resetProps=function(){return m.forEach(function(B){L[B.name](B.defaultVal)}),L},L.resetProps(),T._rerender=z,S&&_&&L(_),L}}var kn=(function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}});function h5(n){"@babel/helpers - typeof";return h5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h5(n)}var uOe=/^\s+/,dOe=/\s+$/;function At(n,e){if(n=n||"",e=e||{},n instanceof At)return n;if(!(this instanceof At))return new At(n,e);var r=hOe(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}At.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,o,s,a,l;return r=e.r/255,i=e.g/255,o=e.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*s+.7152*a+.0722*l},setAlpha:function(e){return this._a=Ure(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=rV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=rV(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=nV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=nV(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return iV(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return gOe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(ur(this._r,255)*100)+"%",g:Math.round(ur(this._g,255)*100)+"%",b:Math.round(ur(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(ur(this._r,255)*100)+"%, "+Math.round(ur(this._g,255)*100)+"%, "+Math.round(ur(this._b,255)*100)+"%)":"rgba("+Math.round(ur(this._r,255)*100)+"%, "+Math.round(ur(this._g,255)*100)+"%, "+Math.round(ur(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:POe[iV(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+oV(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(e){var s=At(e);i="#"+oV(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,o=this._a<1&&this._a>=0,s=!r&&o&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return At(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(bOe,arguments)},brighten:function(){return this._applyModification(wOe,arguments)},darken:function(){return this._applyModification(kOe,arguments)},desaturate:function(){return this._applyModification(yOe,arguments)},saturate:function(){return this._applyModification(vOe,arguments)},greyscale:function(){return this._applyModification(xOe,arguments)},spin:function(){return this._applyModification(SOe,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(AOe,arguments)},complement:function(){return this._applyCombination(COe,arguments)},monochromatic:function(){return this._applyCombination(TOe,arguments)},splitcomplement:function(){return this._applyCombination(_Oe,arguments)},triad:function(){return this._applyCombination(sV,[3])},tetrad:function(){return this._applyCombination(sV,[4])}};At.fromRatio=function(n,e){if(h5(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=Xy(n[i]));n=r}return At(n,e)};function hOe(n){var e={r:0,g:0,b:0},r=1,i=null,o=null,s=null,a=!1,l=!1;return typeof n=="string"&&(n=jOe(n)),h5(n)=="object"&&(cu(n.r)&&cu(n.g)&&cu(n.b)?(e=fOe(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):cu(n.h)&&cu(n.s)&&cu(n.v)?(i=Xy(n.s),o=Xy(n.v),e=mOe(n.h,i,o),a=!0,l="hsv"):cu(n.h)&&cu(n.s)&&cu(n.l)&&(i=Xy(n.s),s=Xy(n.l),e=pOe(n.h,i,s),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=Ure(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function fOe(n,e,r){return{r:ur(n,255)*255,g:ur(e,255)*255,b:ur(r,255)*255}}function nV(n,e,r){n=ur(n,255),e=ur(e,255),r=ur(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=(i+o)/2;if(i==o)s=a=0;else{var c=i-o;switch(a=l>.5?c/(2-i-o):c/(i+o),i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,l}}function pOe(n,e,r){var i,o,s;n=ur(n,360),e=ur(e,100),r=ur(r,100);function a(u,d,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(d-u)*6*h:h<1/2?d:h<2/3?u+(d-u)*(2/3-h)*6:u}if(e===0)i=o=s=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=a(c,l,n+1/3),o=a(c,l,n),s=a(c,l,n-1/3)}return{r:i*255,g:o*255,b:s*255}}function rV(n,e,r){n=ur(n,255),e=ur(e,255),r=ur(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=i,c=i-o;if(a=i===0?0:c/i,i==o)s=0;else{switch(i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,v:l}}function mOe(n,e,r){n=ur(n,360)*6,e=ur(e,100),r=ur(r,100);var i=Math.floor(n),o=n-i,s=r*(1-e),a=r*(1-o*e),l=r*(1-(1-o)*e),c=i%6,u=[r,a,s,s,l,r][c],d=[l,r,r,a,s,s][c],h=[s,s,l,r,r,a][c];return{r:u*255,g:d*255,b:h*255}}function iV(n,e,r,i){var o=[hl(Math.round(n).toString(16)),hl(Math.round(e).toString(16)),hl(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function gOe(n,e,r,i,o){var s=[hl(Math.round(n).toString(16)),hl(Math.round(e).toString(16)),hl(Math.round(r).toString(16)),hl(Kre(i))];return o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function oV(n,e,r,i){var o=[hl(Kre(i)),hl(Math.round(n).toString(16)),hl(Math.round(e).toString(16)),hl(Math.round(r).toString(16))];return o.join("")}At.equals=function(n,e){return!n||!e?!1:At(n).toRgbString()==At(e).toRgbString()};At.random=function(){return At.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function yOe(n,e){e=e===0?0:e||10;var r=At(n).toHsl();return r.s-=e/100,r.s=I3(r.s),At(r)}function vOe(n,e){e=e===0?0:e||10;var r=At(n).toHsl();return r.s+=e/100,r.s=I3(r.s),At(r)}function xOe(n){return At(n).desaturate(100)}function bOe(n,e){e=e===0?0:e||10;var r=At(n).toHsl();return r.l+=e/100,r.l=I3(r.l),At(r)}function wOe(n,e){e=e===0?0:e||10;var r=At(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),At(r)}function kOe(n,e){e=e===0?0:e||10;var r=At(n).toHsl();return r.l-=e/100,r.l=I3(r.l),At(r)}function SOe(n,e){var r=At(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,At(r)}function COe(n){var e=At(n).toHsl();return e.h=(e.h+180)%360,At(e)}function sV(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=At(n).toHsl(),i=[At(n)],o=360/e,s=1;s<e;s++)i.push(At({h:(r.h+s*o)%360,s:r.s,l:r.l}));return i}function _Oe(n){var e=At(n).toHsl(),r=e.h;return[At(n),At({h:(r+72)%360,s:e.s,l:e.l}),At({h:(r+216)%360,s:e.s,l:e.l})]}function AOe(n,e,r){e=e||6,r=r||30;var i=At(n).toHsl(),o=360/r,s=[At(n)];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,s.push(At(i));return s}function TOe(n,e){e=e||6;for(var r=At(n).toHsv(),i=r.h,o=r.s,s=r.v,a=[],l=1/e;e--;)a.push(At({h:i,s:o,v:s})),s=(s+l)%1;return a}At.mix=function(n,e,r){r=r===0?0:r||50;var i=At(n).toRgb(),o=At(e).toRgb(),s=r/100,a={r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a};return At(a)};At.readability=function(n,e){var r=At(n),i=At(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};At.isReadable=function(n,e,r){var i=At.readability(n,e),o,s;switch(s=!1,o=OOe(r),o.level+o.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};At.mostReadable=function(n,e,r){var i=null,o=0,s,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)s=At.readability(n,e[u]),s>o&&(o=s,i=At(e[u]));return At.isReadable(n,i,{level:l,size:c})||!a?i:(r.includeFallbackColors=!1,At.mostReadable(n,["#fff","#000"],r))};var EM=At.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},POe=At.hexNames=MOe(EM);function MOe(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function Ure(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function ur(n,e){EOe(n)&&(n="100%");var r=NOe(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function I3(n){return Math.min(1,Math.max(0,n))}function Ts(n){return parseInt(n,16)}function EOe(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function NOe(n){return typeof n=="string"&&n.indexOf("%")!=-1}function hl(n){return n.length==1?"0"+n:""+n}function Xy(n){return n<=1&&(n=n*100+"%"),n}function Kre(n){return Math.round(parseFloat(n)*255).toString(16)}function aV(n){return Ts(n)/255}var Ja=(function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function cu(n){return!!Ja.CSS_UNIT.exec(n)}function jOe(n){n=n.replace(uOe,"").replace(dOe,"").toLowerCase();var e=!1;if(EM[n])n=EM[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Ja.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=Ja.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ja.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=Ja.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ja.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=Ja.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ja.hex8.exec(n))?{r:Ts(r[1]),g:Ts(r[2]),b:Ts(r[3]),a:aV(r[4]),format:e?"name":"hex8"}:(r=Ja.hex6.exec(n))?{r:Ts(r[1]),g:Ts(r[2]),b:Ts(r[3]),format:e?"name":"hex"}:(r=Ja.hex4.exec(n))?{r:Ts(r[1]+""+r[1]),g:Ts(r[2]+""+r[2]),b:Ts(r[3]+""+r[3]),a:aV(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Ja.hex3.exec(n))?{r:Ts(r[1]+""+r[1]),g:Ts(r[2]+""+r[2]),b:Ts(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function OOe(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function NM(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function DOe(n){if(Array.isArray(n))return NM(n)}function Gre(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function IOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ROe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function oa(n,e){return n.get(Gre(n,e))}function lV(n,e,r){IOe(n,e),e.set(n,r)}function cV(n,e,r){return n.set(Gre(n,e),r),r}function LOe(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,qOe(i.key),i)}}function zOe(n,e,r){return e&&LOe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function FOe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $Oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BOe(n){return DOe(n)||FOe(n)||VOe(n)||$Oe()}function HOe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function qOe(n){var e=HOe(n,"string");return typeof e=="symbol"?e:e+""}function VOe(n,e){if(n){if(typeof n=="string")return NM(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NM(n,e):void 0}}var WOe=123,UOe=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Yre=function(e,r,i){return(e<<16)+(r<<8)+i},KOe=function(e){var r=At(e).toRgb(),i=r.r,o=r.g,s=r.b;return Yre(i,o,s)},uV=function(e,r){return e*WOe%Math.pow(2,r)},$f=new WeakMap,uu=new WeakMap,GOe=(function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;ROe(this,n),lV(this,$f,void 0),lV(this,uu,void 0),cV(uu,this,e),this.reset()}return zOe(n,[{key:"reset",value:function(){cV($f,this,["__reserved for background__"])}},{key:"register",value:function(r){if(oa($f,this).length>=Math.pow(2,24-oa(uu,this)))return null;var i=oa($f,this).length,o=uV(i,oa(uu,this)),s=UOe(i+(o<<24-oa(uu,this)));return oa($f,this).push(r),s}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?KOe(r):Yre.apply(void 0,BOe(r));if(!i)return null;var o=i&Math.pow(2,24-oa(uu,this))-1,s=i>>24-oa(uu,this)&Math.pow(2,oa(uu,this))-1;return uV(o,oa(uu,this))!==s||o>=oa($f,this).length?null:oa($f,this)[o]}}])})(),Vb,hr,Zre,Xre,cp,dV,Jre,Qre,eie,PO,jM,OM,Fx={},tie=[],YOe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,R3=Array.isArray;function mc(n,e){for(var r in e)n[r]=e[r];return n}function MO(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function ZOe(n,e,r){var i,o,s,a={};for(s in e)s=="key"?i=e[s]:s=="ref"?o=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?Vb.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)a[s]===void 0&&(a[s]=n.defaultProps[s]);return Wv(n,a,i,o,null)}function Wv(n,e,r,i,o){var s={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Zre,__i:-1,__u:0};return o==null&&hr.vnode!=null&&hr.vnode(s),s}function L3(n){return n.children}function $4(n,e){this.props=n,this.context=e}function fg(n,e){if(e==null)return n.__?fg(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?fg(n):null}function nie(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return nie(n)}}function hV(n){(!n.__d&&(n.__d=!0)&&cp.push(n)&&!f5.__r++||dV!=hr.debounceRendering)&&((dV=hr.debounceRendering)||Jre)(f5)}function f5(){for(var n,e,r,i,o,s,a,l=1;cp.length;)cp.length>l&&cp.sort(Qre),n=cp.shift(),l=cp.length,n.__d&&(r=void 0,i=void 0,o=(i=(e=n).__v).__e,s=[],a=[],e.__P&&((r=mc({},i)).__v=i.__v+1,hr.vnode&&hr.vnode(r),EO(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[o]:null,s,o??fg(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,oie(s,r,a),i.__e=i.__=null,r.__e!=o&&nie(r)));f5.__r=0}function rie(n,e,r,i,o,s,a,l,c,u,d){var h,f,m,v,x,b,w,S=i&&i.__k||tie,_=e.length;for(c=XOe(r,e,S,c,_),h=0;h<_;h++)(m=r.__k[h])!=null&&(f=m.__i==-1?Fx:S[m.__i]||Fx,m.__i=h,b=EO(n,m,f,o,s,a,l,c,u,d),v=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&NO(f.ref,null,m),d.push(m.ref,m.__c||v,m)),x==null&&v!=null&&(x=v),(w=!!(4&m.__u))||f.__k===m.__k?c=iie(m,c,n,w):typeof m.type=="function"&&b!==void 0?c=b:v&&(c=v.nextSibling),m.__u&=-7);return r.__e=x,c}function XOe(n,e,r,i,o){var s,a,l,c,u,d=r.length,h=d,f=0;for(n.__k=new Array(o),s=0;s<o;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[s]=Wv(null,a,null,null,null):R3(a)?a=n.__k[s]=Wv(L3,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[s]=Wv(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[s]=a,c=s+f,a.__=n,a.__b=n.__b+1,l=null,(u=a.__i=JOe(a,r,c,h))!=-1&&(h--,(l=r[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(o>d?f--:o<d&&f++),typeof a.type!="function"&&(a.__u|=4)):u!=c&&(u==c-1?f--:u==c+1?f++:(u>c?f--:f++,a.__u|=4))):n.__k[s]=null;if(h)for(s=0;s<d;s++)(l=r[s])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=fg(l)),aie(l,l));return i}function iie(n,e,r,i){var o,s;if(typeof n.type=="function"){for(o=n.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=n,e=iie(o[s],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=fg(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function JOe(n,e,r,i){var o,s,a,l=n.key,c=n.type,u=e[r],d=u!=null&&(2&u.__u)==0;if(u===null&&l==null||d&&l==u.key&&c==u.type)return r;if(i>(d?1:0)){for(o=r-1,s=r+1;o>=0||s<e.length;)if((u=e[a=o>=0?o--:s++])!=null&&(2&u.__u)==0&&l==u.key&&c==u.type)return a}return-1}function fV(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||YOe.test(e)?r:r+"px"}function nk(n,e,r,i,o){var s,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||fV(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||fV(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(eie,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=r,r?i?r.u=i.u:(r.u=PO,n.addEventListener(e,s?OM:jM,s)):n.removeEventListener(e,s?OM:jM,s);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function pV(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=PO++;else if(e.t<r.u)return;return r(hr.event?hr.event(e):e)}}}function EO(n,e,r,i,o,s,a,l,c,u){var d,h,f,m,v,x,b,w,S,_,P,A,T,E,L,$,z,B=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(c=!!(32&r.__u),s=[l=e.__e=r.__e]),(d=hr.__b)&&d(e);e:if(typeof B=="function")try{if(w=e.props,S="prototype"in B&&B.prototype.render,_=(d=B.contextType)&&i[d.__c],P=d?_?_.props.value:d.__:i,r.__c?b=(h=e.__c=r.__c).__=h.__E:(S?e.__c=h=new B(w,P):(e.__c=h=new $4(w,P),h.constructor=B,h.render=eDe),_&&_.sub(h),h.state||(h.state={}),h.__n=i,f=h.__d=!0,h.__h=[],h._sb=[]),S&&h.__s==null&&(h.__s=h.state),S&&B.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=mc({},h.__s)),mc(h.__s,B.getDerivedStateFromProps(w,h.__s))),m=h.props,v=h.state,h.__v=e,f)S&&B.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),S&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(S&&B.getDerivedStateFromProps==null&&w!==m&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(w,P),e.__v==r.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(w,h.__s,P)===!1){for(e.__v!=r.__v&&(h.props=w,h.state=h.__s,h.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(D){D&&(D.__=e)}),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(w,h.__s,P),S&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(m,v,x)})}if(h.context=P,h.props=w,h.__P=n,h.__e=!1,T=hr.__r,E=0,S){for(h.state=h.__s,h.__d=!1,T&&T(e),d=h.render(h.props,h.state,h.context),L=0;L<h._sb.length;L++)h.__h.push(h._sb[L]);h._sb=[]}else do h.__d=!1,T&&T(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++E<25);h.state=h.__s,h.getChildContext!=null&&(i=mc(mc({},i),h.getChildContext())),S&&!f&&h.getSnapshotBeforeUpdate!=null&&(x=h.getSnapshotBeforeUpdate(m,v)),$=d,d!=null&&d.type===L3&&d.key==null&&($=sie(d.props.children)),l=rie(n,R3($)?$:[$],e,r,i,o,s,a,l,c,u),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),b&&(h.__E=h.__=null)}catch(D){if(e.__v=null,c||s!=null)if(D.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,e.__e=l}else{for(z=s.length;z--;)MO(s[z]);DM(e)}else e.__e=r.__e,e.__k=r.__k,D.then||DM(e);hr.__e(D,e,r)}else s==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=QOe(r.__e,e,r,i,o,s,a,c,u);return(d=hr.diffed)&&d(e),128&e.__u?void 0:l}function DM(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(DM)}function oie(n,e,r){for(var i=0;i<r.length;i++)NO(r[i],r[++i],r[++i]);hr.__c&&hr.__c(e,n),n.some(function(o){try{n=o.__h,o.__h=[],n.some(function(s){s.call(o)})}catch(s){hr.__e(s,o.__v)}})}function sie(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:R3(n)?n.map(sie):mc({},n)}function QOe(n,e,r,i,o,s,a,l,c){var u,d,h,f,m,v,x,b=r.props||Fx,w=e.props,S=e.type;if(S=="svg"?o="http://www.w3.org/2000/svg":S=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((m=s[u])&&"setAttribute"in m==!!S&&(S?m.localName==S:m.nodeType==3)){n=m,s[u]=null;break}}if(n==null){if(S==null)return document.createTextNode(w);n=document.createElementNS(o,S,w.is&&w),l&&(hr.__m&&hr.__m(e,s),l=!1),s=null}if(S==null)b===w||l&&n.data==w||(n.data=w);else{if(s=s&&Vb.call(n.childNodes),!l&&s!=null)for(b={},u=0;u<n.attributes.length;u++)b[(m=n.attributes[u]).name]=m.value;for(u in b)if(m=b[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=m;else if(!(u in w)){if(u=="value"&&"defaultValue"in w||u=="checked"&&"defaultChecked"in w)continue;nk(n,u,null,m,o)}}for(u in w)m=w[u],u=="children"?f=m:u=="dangerouslySetInnerHTML"?d=m:u=="value"?v=m:u=="checked"?x=m:l&&typeof m!="function"||b[u]===m||nk(n,u,m,b[u],o);if(d)l||h&&(d.__html==h.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(h&&(n.innerHTML=""),rie(e.type=="template"?n.content:n,R3(f)?f:[f],e,r,i,S=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,a,s?s[0]:r.__k&&fg(r,0),l,c),s!=null)for(u=s.length;u--;)MO(s[u]);l||(u="value",S=="progress"&&v==null?n.removeAttribute("value"):v!=null&&(v!==n[u]||S=="progress"&&!v||S=="option"&&v!=b[u])&&nk(n,u,v,b[u],o),u="checked",x!=null&&x!=n[u]&&nk(n,u,x,b[u],o))}return n}function NO(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(o){hr.__e(o,r)}}function aie(n,e,r){var i,o;if(hr.unmount&&hr.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||NO(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){hr.__e(s,e)}i.base=i.__P=null}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&aie(i[o],e,r||typeof n.type!="function");r||MO(n.__e),n.__c=n.__=n.__e=void 0}function eDe(n,e,r){return this.constructor(n,r)}function tDe(n,e,r){var i,o,s,a;e==document&&(e=document.documentElement),hr.__&&hr.__(n,e),o=(i=!1)?null:e.__k,s=[],a=[],EO(e,n=e.__k=ZOe(L3,null,[n]),o||Fx,Fx,e.namespaceURI,o?null:e.firstChild?Vb.call(e.childNodes):null,s,o?o.__e:e.firstChild,i,a),oie(s,n,a)}function lie(n,e,r){var i,o,s,a,l=mc({},n.props);for(s in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?o=e[s]:l[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(l.children=arguments.length>3?Vb.call(arguments,2):r),Wv(n.type,l,i||n.key,o||n.ref,null)}Vb=tie.slice,hr={__e:function(n,e,r,i){for(var o,s,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(n)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,i||{}),a=o.__d),a)return o.__E=o}catch(l){n=l}throw n}},Zre=0,Xre=function(n){return n!=null&&n.constructor===void 0},$4.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=mc({},this.state),typeof n=="function"&&(n=n(mc({},r),this.props)),n&&mc(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),hV(this))},$4.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),hV(this))},$4.prototype.render=L3,cp=[],Jre=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qre=function(n,e){return n.__v.__b-e.__v.__b},f5.__r=0,eie=/(PointerCapture)$|Capture$/i,PO=0,jM=pV(!1),OM=pV(!0);function mV(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function nDe(n){if(Array.isArray(n))return n}function rDe(n,e,r){return(e=cDe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function iDe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function oDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gV(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function sDe(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(r),!0).forEach(function(i){rDe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):gV(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function aDe(n,e){return nDe(n)||iDe(n,e)||uDe(n,e)||oDe()}function lDe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cDe(n){var e=lDe(n,"string");return typeof e=="symbol"?e:e+""}function p5(n){"@babel/helpers - typeof";return p5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p5(n)}function uDe(n,e){if(n){if(typeof n=="string")return mV(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mV(n,e):void 0}}var IM=function(e){if(p5(e)!=="object")return e;var r=lie(e);if(r.props){var i;r.props=sDe({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(IM):IM(r.props.children))}return r},dDe=function(e){return Xre(lie(e))},hDe=function(e,r){delete r.__k,tDe(IM(e),r)};function fDe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var pDe=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;fDe(pDe);var mDe=TO({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.style,s=o===void 0?{}:o,a=!!e&&p5(e)==="object"&&!!e.node&&typeof e.node=="function",l=ma(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(u){var d=aDe(u,2),h=d[0],f=d[1];return r.tooltipEl.style(h,f)}),r.tooltipEl.style("left","-10000px").style("display","none");var c="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(c),function(u){r.mouseInside=!0;var d=oc(u),h=l.node(),f=h.offsetWidth,m=h.offsetHeight,v=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/f*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?m>130&&m-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(v.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(c),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(c),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):dDe(e.content)?(e.tooltipEl.text(""),hDe(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function gDe(n,e,r){var i,o=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function s(){var a,l=i.length,c,u=0,d=0,h=0;for(a=0;a<l;++a)c=i[a],u+=c.x||0,d+=c.y||0,h+=c.z||0;for(u=(u/l-n)*o,d=(d/l-e)*o,h=(h/l-r)*o,a=0;a<l;++a)c=i[a],u&&(c.x-=u),d&&(c.y-=d),h&&(c.z-=h)}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(e=+a,s):e},s.z=function(a){return arguments.length?(r=+a,s):r},s.strength=function(a){return arguments.length?(o=+a,s):o},s}function yDe(n){const e=+this._x.call(null,n);return cie(this.cover(e),e,n)}function cie(n,e,r){if(isNaN(e))return n;var i,o=n._root,s={data:r},a=n._x0,l=n._x1,c,u,d,h,f;if(!o)return n._root=s,n;for(;o.length;)if((d=e>=(c=(a+l)/2))?a=c:l=c,i=o,!(o=o[h=+d]))return i[h]=s,n;if(u=+n._x.call(null,o.data),e===u)return s.next=o,i?i[h]=s:n._root=s,n;do i=i?i[h]=new Array(2):n._root=new Array(2),(d=e>=(c=(a+l)/2))?a=c:l=c;while((h=+d)==(f=+(u>=c)));return i[f]=o,i[h]=s,n}function vDe(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,o=-1/0;for(let s=0,a;s<e;++s)isNaN(a=+this._x.call(null,n[s]))||(r[s]=a,a<i&&(i=a),a>o&&(o=a));if(i>o)return this;this.cover(i).cover(o);for(let s=0;s<e;++s)cie(this,r[s],n[s]);return this}function xDe(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,o=this._root,s,a;e>n||n>=r;)switch(a=+(n<e),s=new Array(2),s[a]=o,o=s,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=e,this._x1=r,this}function bDe(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function wDe(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Hu(n,e,r){this.node=n,this.x0=e,this.x1=r}function kDe(n,e){var r,i=this._x0,o,s,a=this._x1,l=[],c=this._root,u,d;for(c&&l.push(new Hu(c,i,a)),e==null?e=1/0:(i=n-e,a=n+e);u=l.pop();)if(!(!(c=u.node)||(o=u.x0)>a||(s=u.x1)<i))if(c.length){var h=(o+s)/2;l.push(new Hu(c[1],h,s),new Hu(c[0],o,h)),(d=+(n>=h))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=u)}else{var f=Math.abs(n-+this._x.call(null,c.data));f<e&&(e=f,i=n-f,a=n+f,r=c.data)}return r}function SDe(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._x1,c,u,d,h,f;if(!r)return this;if(r.length)for(;;){if((d=c>=(u=(a+l)/2))?a=u:l=u,e=r,!(r=r[h=+d]))return this;if(!r.length)break;e[h+1&1]&&(i=e,f=h)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[h]=s:delete e[h],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[f]=r:this._root=r),this):(this._root=s,this)}function CDe(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function _De(){return this._root}function ADe(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function TDe(n){var e=[],r,i=this._root,o,s,a;for(i&&e.push(new Hu(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.x1)&&i.length){var l=(s+a)/2;(o=i[1])&&e.push(new Hu(o,l,a)),(o=i[0])&&e.push(new Hu(o,s,l))}return this}function PDe(n){var e=[],r=[],i;for(this._root&&e.push(new Hu(this._root,this._x0,this._x1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.x1,c=(a+l)/2;(s=o[0])&&e.push(new Hu(s,a,c)),(s=o[1])&&e.push(new Hu(s,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function MDe(n){return n[0]}function EDe(n){return arguments.length?(this._x=n,this):this._x}function uie(n,e){var r=new jO(e??MDe,NaN,NaN);return n==null?r:r.addAll(n)}function jO(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function yV(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var ps=uie.prototype=jO.prototype;ps.copy=function(){var n=new jO(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=yV(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var o=0;o<2;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(2)}):e.target[o]=yV(i));return n};ps.add=yDe;ps.addAll=vDe;ps.cover=xDe;ps.data=bDe;ps.extent=wDe;ps.find=kDe;ps.remove=SDe;ps.removeAll=CDe;ps.root=_De;ps.size=ADe;ps.visit=TDe;ps.visitAfter=PDe;ps.x=EDe;function NDe(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return die(this.cover(e,r),e,r,n)}function die(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var o,s=n._root,a={data:i},l=n._x0,c=n._y0,u=n._x1,d=n._y1,h,f,m,v,x,b,w,S;if(!s)return n._root=a,n;for(;s.length;)if((x=e>=(h=(l+u)/2))?l=h:u=h,(b=r>=(f=(c+d)/2))?c=f:d=f,o=s,!(s=s[w=b<<1|x]))return o[w]=a,n;if(m=+n._x.call(null,s.data),v=+n._y.call(null,s.data),e===m&&r===v)return a.next=s,o?o[w]=a:n._root=a,n;do o=o?o[w]=new Array(4):n._root=new Array(4),(x=e>=(h=(l+u)/2))?l=h:u=h,(b=r>=(f=(c+d)/2))?c=f:d=f;while((w=b<<1|x)===(S=(v>=f)<<1|m>=h));return o[S]=s,o[w]=a,n}function jDe(n){var e,r,i=n.length,o,s,a=new Array(i),l=new Array(i),c=1/0,u=1/0,d=-1/0,h=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,e=n[r]))||isNaN(s=+this._y.call(null,e))||(a[r]=o,l[r]=s,o<c&&(c=o),o>d&&(d=o),s<u&&(u=s),s>h&&(h=s));if(c>d||u>h)return this;for(this.cover(c,u).cover(d,h),r=0;r<i;++r)die(this,a[r],l[r],n[r]);return this}function ODe(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,o=this._x1,s=this._y1;if(isNaN(r))o=(r=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var a=o-r||1,l=this._root,c,u;r>n||n>=o||i>e||e>=s;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,a*=2,u){case 0:o=r+a,s=i+a;break;case 1:r=o-a,s=i+a;break;case 2:o=r+a,i=s-a;break;case 3:r=o-a,i=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=o,this._y1=s,this}function DDe(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function IDe(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bo(n,e,r,i,o){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=o}function RDe(n,e,r){var i,o=this._x0,s=this._y0,a,l,c,u,d=this._x1,h=this._y1,f=[],m=this._root,v,x;for(m&&f.push(new bo(m,o,s,d,h)),r==null?r=1/0:(o=n-r,s=e-r,d=n+r,h=e+r,r*=r);v=f.pop();)if(!(!(m=v.node)||(a=v.x0)>d||(l=v.y0)>h||(c=v.x1)<o||(u=v.y1)<s))if(m.length){var b=(a+c)/2,w=(l+u)/2;f.push(new bo(m[3],b,w,c,u),new bo(m[2],a,w,b,u),new bo(m[1],b,l,c,w),new bo(m[0],a,l,b,w)),(x=(e>=w)<<1|n>=b)&&(v=f[f.length-1],f[f.length-1]=f[f.length-1-x],f[f.length-1-x]=v)}else{var S=n-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),P=S*S+_*_;if(P<r){var A=Math.sqrt(r=P);o=n-A,s=e-A,d=n+A,h=e+A,i=m.data}}return i}function LDe(n){if(isNaN(d=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._x1,u=this._y1,d,h,f,m,v,x,b,w;if(!r)return this;if(r.length)for(;;){if((v=d>=(f=(a+c)/2))?a=f:c=f,(x=h>=(m=(l+u)/2))?l=m:u=m,e=r,!(r=r[b=x<<1|v]))return this;if(!r.length)break;(e[b+1&3]||e[b+2&3]||e[b+3&3])&&(i=e,w=b)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[b]=s:delete e[b],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[w]=r:this._root=r),this):(this._root=s,this)}function zDe(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function FDe(){return this._root}function $De(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function BDe(n){var e=[],r,i=this._root,o,s,a,l,c;for(i&&e.push(new bo(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(s+l)/2,d=(a+c)/2;(o=i[3])&&e.push(new bo(o,u,d,l,c)),(o=i[2])&&e.push(new bo(o,s,d,u,c)),(o=i[1])&&e.push(new bo(o,u,a,l,d)),(o=i[0])&&e.push(new bo(o,s,a,u,d))}return this}function HDe(n){var e=[],r=[],i;for(this._root&&e.push(new bo(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.x1,u=i.y1,d=(a+c)/2,h=(l+u)/2;(s=o[0])&&e.push(new bo(s,a,l,d,h)),(s=o[1])&&e.push(new bo(s,d,l,c,h)),(s=o[2])&&e.push(new bo(s,a,h,d,u)),(s=o[3])&&e.push(new bo(s,d,h,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function qDe(n){return n[0]}function VDe(n){return arguments.length?(this._x=n,this):this._x}function WDe(n){return n[1]}function UDe(n){return arguments.length?(this._y=n,this):this._y}function hie(n,e,r){var i=new OO(e??qDe,r??WDe,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function OO(n,e,r,i,o,s){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=o,this._y1=s,this._root=void 0}function vV(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Ro=hie.prototype=OO.prototype;Ro.copy=function(){var n=new OO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=vV(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var o=0;o<4;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(4)}):e.target[o]=vV(i));return n};Ro.add=NDe;Ro.addAll=jDe;Ro.cover=ODe;Ro.data=DDe;Ro.extent=IDe;Ro.find=RDe;Ro.remove=LDe;Ro.removeAll=zDe;Ro.root=FDe;Ro.size=$De;Ro.visit=BDe;Ro.visitAfter=HDe;Ro.x=VDe;Ro.y=UDe;function KDe(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return fie(this.cover(e,r,i),e,r,i,n)}function fie(n,e,r,i,o){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var s,a=n._root,l={data:o},c=n._x0,u=n._y0,d=n._z0,h=n._x1,f=n._y1,m=n._z1,v,x,b,w,S,_,P,A,T,E,L;if(!a)return n._root=l,n;for(;a.length;)if((P=e>=(v=(c+h)/2))?c=v:h=v,(A=r>=(x=(u+f)/2))?u=x:f=x,(T=i>=(b=(d+m)/2))?d=b:m=b,s=a,!(a=a[E=T<<2|A<<1|P]))return s[E]=l,n;if(w=+n._x.call(null,a.data),S=+n._y.call(null,a.data),_=+n._z.call(null,a.data),e===w&&r===S&&i===_)return l.next=a,s?s[E]=l:n._root=l,n;do s=s?s[E]=new Array(8):n._root=new Array(8),(P=e>=(v=(c+h)/2))?c=v:h=v,(A=r>=(x=(u+f)/2))?u=x:f=x,(T=i>=(b=(d+m)/2))?d=b:m=b;while((E=T<<2|A<<1|P)===(L=(_>=b)<<2|(S>=x)<<1|w>=v));return s[L]=a,s[E]=l,n}function GDe(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),o=new Float64Array(e);let s=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,d=-1/0;for(let h=0,f,m,v,x;h<e;++h)isNaN(m=+this._x.call(null,f=n[h]))||isNaN(v=+this._y.call(null,f))||isNaN(x=+this._z.call(null,f))||(r[h]=m,i[h]=v,o[h]=x,m<s&&(s=m),m>c&&(c=m),v<a&&(a=v),v>u&&(u=v),x<l&&(l=x),x>d&&(d=x));if(s>c||a>u||l>d)return this;this.cover(s,a,l).cover(c,u,d);for(let h=0;h<e;++h)fie(this,r[h],i[h],o[h],n[h]);return this}function YDe(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,s=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(o=Math.floor(e))+1,c=(s=Math.floor(r))+1;else{for(var u=a-i||1,d=this._root,h,f;i>n||n>=a||o>e||e>=l||s>r||r>=c;)switch(f=(r<s)<<2|(e<o)<<1|n<i,h=new Array(8),h[f]=d,d=h,u*=2,f){case 0:a=i+u,l=o+u,c=s+u;break;case 1:i=a-u,l=o+u,c=s+u;break;case 2:a=i+u,o=l-u,c=s+u;break;case 3:i=a-u,o=l-u,c=s+u;break;case 4:a=i+u,l=o+u,s=c-u;break;case 5:i=a-u,l=o+u,s=c-u;break;case 6:a=i+u,o=l-u,s=c-u;break;case 7:i=a-u,o=l-u,s=c-u;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this}function ZDe(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function XDe(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Dn(n,e,r,i,o,s,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=o,this.y1=s,this.z1=a}function JDe(n,e,r,i){var o,s=this._x0,a=this._y0,l=this._z0,c,u,d,h,f,m,v=this._x1,x=this._y1,b=this._z1,w=[],S=this._root,_,P;for(S&&w.push(new Dn(S,s,a,l,v,x,b)),i==null?i=1/0:(s=n-i,a=e-i,l=r-i,v=n+i,x=e+i,b=r+i,i*=i);_=w.pop();)if(!(!(S=_.node)||(c=_.x0)>v||(u=_.y0)>x||(d=_.z0)>b||(h=_.x1)<s||(f=_.y1)<a||(m=_.z1)<l))if(S.length){var A=(c+h)/2,T=(u+f)/2,E=(d+m)/2;w.push(new Dn(S[7],A,T,E,h,f,m),new Dn(S[6],c,T,E,A,f,m),new Dn(S[5],A,u,E,h,T,m),new Dn(S[4],c,u,E,A,T,m),new Dn(S[3],A,T,d,h,f,E),new Dn(S[2],c,T,d,A,f,E),new Dn(S[1],A,u,d,h,T,E),new Dn(S[0],c,u,d,A,T,E)),(P=(r>=E)<<2|(e>=T)<<1|n>=A)&&(_=w[w.length-1],w[w.length-1]=w[w.length-1-P],w[w.length-1-P]=_)}else{var L=n-+this._x.call(null,S.data),$=e-+this._y.call(null,S.data),z=r-+this._z.call(null,S.data),B=L*L+$*$+z*z;if(B<i){var D=Math.sqrt(i=B);s=n-D,a=e-D,l=r-D,v=n+D,x=e+D,b=r+D,o=S.data}}return o}const QDe=(n,e,r,i,o,s)=>Math.sqrt((n-i)**2+(e-o)**2+(r-s)**2);function eIe(n,e,r,i){const o=[],s=n-i,a=e-i,l=r-i,c=n+i,u=e+i,d=r+i;return this.visit((h,f,m,v,x,b,w)=>{if(!h.length)do{const S=h.data;QDe(n,e,r,this._x(S),this._y(S),this._z(S))<=i&&o.push(S)}while(h=h.next);return f>c||m>u||v>d||x<s||b<a||w<l}),o}function tIe(n){if(isNaN(f=+this._x.call(null,n))||isNaN(m=+this._y.call(null,n))||isNaN(v=+this._z.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._z0,u=this._x1,d=this._y1,h=this._z1,f,m,v,x,b,w,S,_,P,A,T;if(!r)return this;if(r.length)for(;;){if((S=f>=(x=(a+u)/2))?a=x:u=x,(_=m>=(b=(l+d)/2))?l=b:d=b,(P=v>=(w=(c+h)/2))?c=w:h=w,e=r,!(r=r[A=P<<2|_<<1|S]))return this;if(!r.length)break;(e[A+1&7]||e[A+2&7]||e[A+3&7]||e[A+4&7]||e[A+5&7]||e[A+6&7]||e[A+7&7])&&(i=e,T=A)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[A]=s:delete e[A],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[T]=r:this._root=r),this):(this._root=s,this)}function nIe(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function rIe(){return this._root}function iIe(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function oIe(n){var e=[],r,i=this._root,o,s,a,l,c,u,d;for(i&&e.push(new Dn(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,d=r.z1)&&i.length){var h=(s+c)/2,f=(a+u)/2,m=(l+d)/2;(o=i[7])&&e.push(new Dn(o,h,f,m,c,u,d)),(o=i[6])&&e.push(new Dn(o,s,f,m,h,u,d)),(o=i[5])&&e.push(new Dn(o,h,a,m,c,f,d)),(o=i[4])&&e.push(new Dn(o,s,a,m,h,f,d)),(o=i[3])&&e.push(new Dn(o,h,f,l,c,u,m)),(o=i[2])&&e.push(new Dn(o,s,f,l,h,u,m)),(o=i[1])&&e.push(new Dn(o,h,a,l,c,f,m)),(o=i[0])&&e.push(new Dn(o,s,a,l,h,f,m))}return this}function sIe(n){var e=[],r=[],i;for(this._root&&e.push(new Dn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.z0,u=i.x1,d=i.y1,h=i.z1,f=(a+u)/2,m=(l+d)/2,v=(c+h)/2;(s=o[0])&&e.push(new Dn(s,a,l,c,f,m,v)),(s=o[1])&&e.push(new Dn(s,f,l,c,u,m,v)),(s=o[2])&&e.push(new Dn(s,a,m,c,f,d,v)),(s=o[3])&&e.push(new Dn(s,f,m,c,u,d,v)),(s=o[4])&&e.push(new Dn(s,a,l,v,f,m,h)),(s=o[5])&&e.push(new Dn(s,f,l,v,u,m,h)),(s=o[6])&&e.push(new Dn(s,a,m,v,f,d,h)),(s=o[7])&&e.push(new Dn(s,f,m,v,u,d,h))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function aIe(n){return n[0]}function lIe(n){return arguments.length?(this._x=n,this):this._x}function cIe(n){return n[1]}function uIe(n){return arguments.length?(this._y=n,this):this._y}function dIe(n){return n[2]}function hIe(n){return arguments.length?(this._z=n,this):this._z}function pie(n,e,r,i){var o=new DO(e??aIe,r??cIe,i??dIe,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?o:o.addAll(n)}function DO(n,e,r,i,o,s,a,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function xV(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Bi=pie.prototype=DO.prototype;Bi.copy=function(){var n=new DO(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=xV(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var o=0;o<8;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(8)}):e.target[o]=xV(i));return n};Bi.add=KDe;Bi.addAll=GDe;Bi.cover=YDe;Bi.data=ZDe;Bi.extent=XDe;Bi.find=JDe;Bi.findAllWithinRadius=eIe;Bi.remove=tIe;Bi.removeAll=nIe;Bi.root=rIe;Bi.size=iIe;Bi.visit=oIe;Bi.visitAfter=sIe;Bi.x=lIe;Bi.y=uIe;Bi.z=hIe;function Du(n){return function(){return n}}function Su(n){return(n()-.5)*1e-6}function fIe(n){return n.index}function bV(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function pIe(n){var e=fIe,r=f,i,o=Du(30),s,a,l,c,u,d,h=1;n==null&&(n=[]);function f(w){return 1/Math.min(c[w.source.index],c[w.target.index])}function m(w){for(var S=0,_=n.length;S<h;++S)for(var P=0,A,T,E,L=0,$=0,z=0,B,D;P<_;++P)A=n[P],T=A.source,E=A.target,L=E.x+E.vx-T.x-T.vx||Su(d),l>1&&($=E.y+E.vy-T.y-T.vy||Su(d)),l>2&&(z=E.z+E.vz-T.z-T.vz||Su(d)),B=Math.sqrt(L*L+$*$+z*z),B=(B-s[P])/B*w*i[P],L*=B,$*=B,z*=B,E.vx-=L*(D=u[P]),l>1&&(E.vy-=$*D),l>2&&(E.vz-=z*D),T.vx+=L*(D=1-D),l>1&&(T.vy+=$*D),l>2&&(T.vz+=z*D)}function v(){if(a){var w,S=a.length,_=n.length,P=new Map(a.map((T,E)=>[e(T,E,a),T])),A;for(w=0,c=new Array(S);w<_;++w)A=n[w],A.index=w,typeof A.source!="object"&&(A.source=bV(P,A.source)),typeof A.target!="object"&&(A.target=bV(P,A.target)),c[A.source.index]=(c[A.source.index]||0)+1,c[A.target.index]=(c[A.target.index]||0)+1;for(w=0,u=new Array(_);w<_;++w)A=n[w],u[w]=c[A.source.index]/(c[A.source.index]+c[A.target.index]);i=new Array(_),x(),s=new Array(_),b()}}function x(){if(a)for(var w=0,S=n.length;w<S;++w)i[w]=+r(n[w],w,n)}function b(){if(a)for(var w=0,S=n.length;w<S;++w)s[w]=+o(n[w],w,n)}return m.initialize=function(w,...S){a=w,d=S.find(_=>typeof _=="function")||Math.random,l=S.find(_=>[1,2,3].includes(_))||2,v()},m.links=function(w){return arguments.length?(n=w,v(),m):n},m.id=function(w){return arguments.length?(e=w,m):e},m.iterations=function(w){return arguments.length?(h=+w,m):h},m.strength=function(w){return arguments.length?(r=typeof w=="function"?w:Du(+w),x(),m):r},m.distance=function(w){return arguments.length?(o=typeof w=="function"?w:Du(+w),b(),m):o},m}const mIe=1664525,gIe=1013904223,wV=4294967296;function yIe(){let n=1;return()=>(n=(mIe*n+gIe)%wV)/wV}var kV=3;function bA(n){return n.x}function SV(n){return n.y}function vIe(n){return n.z}var xIe=10,bIe=Math.PI*(3-Math.sqrt(5)),wIe=Math.PI*20/(9+Math.sqrt(221));function kIe(n,e){e=e||2;var r=Math.min(kV,Math.max(1,Math.round(e))),i,o=1,s=.001,a=1-Math.pow(s,1/300),l=0,c=.6,u=new Map,d=yO(m),h=zb("tick","end"),f=yIe();n==null&&(n=[]);function m(){v(),h.call("tick",i),o<s&&(d.stop(),h.call("end",i))}function v(w){var S,_=n.length,P;w===void 0&&(w=1);for(var A=0;A<w;++A)for(o+=(l-o)*a,u.forEach(function(T){T(o)}),S=0;S<_;++S)P=n[S],P.fx==null?P.x+=P.vx*=c:(P.x=P.fx,P.vx=0),r>1&&(P.fy==null?P.y+=P.vy*=c:(P.y=P.fy,P.vy=0)),r>2&&(P.fz==null?P.z+=P.vz*=c:(P.z=P.fz,P.vz=0));return i}function x(){for(var w=0,S=n.length,_;w<S;++w){if(_=n[w],_.index=w,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),_.fz!=null&&(_.z=_.fz),isNaN(_.x)||r>1&&isNaN(_.y)||r>2&&isNaN(_.z)){var P=xIe*(r>2?Math.cbrt(.5+w):r>1?Math.sqrt(.5+w):w),A=w*bIe,T=w*wIe;r===1?_.x=P:r===2?(_.x=P*Math.cos(A),_.y=P*Math.sin(A)):(_.x=P*Math.sin(A)*Math.cos(T),_.y=P*Math.cos(A),_.z=P*Math.sin(A)*Math.sin(T))}(isNaN(_.vx)||r>1&&isNaN(_.vy)||r>2&&isNaN(_.vz))&&(_.vx=0,r>1&&(_.vy=0),r>2&&(_.vz=0))}}function b(w){return w.initialize&&w.initialize(n,f,r),w}return x(),i={tick:v,restart:function(){return d.restart(m),i},stop:function(){return d.stop(),i},numDimensions:function(w){return arguments.length?(r=Math.min(kV,Math.max(1,Math.round(w))),u.forEach(b),i):r},nodes:function(w){return arguments.length?(n=w,x(),u.forEach(b),i):n},alpha:function(w){return arguments.length?(o=+w,i):o},alphaMin:function(w){return arguments.length?(s=+w,i):s},alphaDecay:function(w){return arguments.length?(a=+w,i):+a},alphaTarget:function(w){return arguments.length?(l=+w,i):l},velocityDecay:function(w){return arguments.length?(c=1-w,i):1-c},randomSource:function(w){return arguments.length?(f=w,u.forEach(b),i):f},force:function(w,S){return arguments.length>1?(S==null?u.delete(w):u.set(w,b(S)),i):u.get(w)},find:function(){var w=Array.prototype.slice.call(arguments),S=w.shift()||0,_=(r>1?w.shift():null)||0,P=(r>2?w.shift():null)||0,A=w.shift()||1/0,T=0,E=n.length,L,$,z,B,D,Y;for(A*=A,T=0;T<E;++T)D=n[T],L=S-D.x,$=_-(D.y||0),z=P-(D.z||0),B=L*L+$*$+z*z,B<A&&(Y=D,A=B);return Y},on:function(w,S){return arguments.length>1?(h.on(w,S),i):h.on(w)}}}function SIe(){var n,e,r,i,o,s=Du(-30),a,l=1,c=1/0,u=.81;function d(v){var x,b=n.length,w=(e===1?uie(n,bA):e===2?hie(n,bA,SV):e===3?pie(n,bA,SV,vIe):null).visitAfter(f);for(o=v,x=0;x<b;++x)r=n[x],w.visit(m)}function h(){if(n){var v,x=n.length,b;for(a=new Array(x),v=0;v<x;++v)b=n[v],a[b.index]=+s(b,v,n)}}function f(v){var x=0,b,w,S=0,_,P,A,T,E=v.length;if(E){for(_=P=A=T=0;T<E;++T)(b=v[T])&&(w=Math.abs(b.value))&&(x+=b.value,S+=w,_+=w*(b.x||0),P+=w*(b.y||0),A+=w*(b.z||0));x*=Math.sqrt(4/E),v.x=_/S,e>1&&(v.y=P/S),e>2&&(v.z=A/S)}else{b=v,b.x=b.data.x,e>1&&(b.y=b.data.y),e>2&&(b.z=b.data.z);do x+=a[b.data.index];while(b=b.next)}v.value=x}function m(v,x,b,w,S){if(!v.value)return!0;var _=[b,w,S][e-1],P=v.x-r.x,A=e>1?v.y-r.y:0,T=e>2?v.z-r.z:0,E=_-x,L=P*P+A*A+T*T;if(E*E/u<L)return L<c&&(P===0&&(P=Su(i),L+=P*P),e>1&&A===0&&(A=Su(i),L+=A*A),e>2&&T===0&&(T=Su(i),L+=T*T),L<l&&(L=Math.sqrt(l*L)),r.vx+=P*v.value*o/L,e>1&&(r.vy+=A*v.value*o/L),e>2&&(r.vz+=T*v.value*o/L)),!0;if(v.length||L>=c)return;(v.data!==r||v.next)&&(P===0&&(P=Su(i),L+=P*P),e>1&&A===0&&(A=Su(i),L+=A*A),e>2&&T===0&&(T=Su(i),L+=T*T),L<l&&(L=Math.sqrt(l*L)));do v.data!==r&&(E=a[v.data.index]*o/L,r.vx+=P*E,e>1&&(r.vy+=A*E),e>2&&(r.vz+=T*E));while(v=v.next)}return d.initialize=function(v,...x){n=v,i=x.find(b=>typeof b=="function")||Math.random,e=x.find(b=>[1,2,3].includes(b))||2,h()},d.strength=function(v){return arguments.length?(s=typeof v=="function"?v:Du(+v),h(),d):s},d.distanceMin=function(v){return arguments.length?(l=v*v,d):Math.sqrt(l)},d.distanceMax=function(v){return arguments.length?(c=v*v,d):Math.sqrt(c)},d.theta=function(v){return arguments.length?(u=v*v,d):Math.sqrt(u)},d}function CIe(n,e,r,i){var o,s,a=Du(.1),l,c;typeof n!="function"&&(n=Du(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(h){for(var f=0,m=o.length;f<m;++f){var v=o[f],x=v.x-e||1e-6,b=(v.y||0)-r||1e-6,w=(v.z||0)-i||1e-6,S=Math.sqrt(x*x+b*b+w*w),_=(c[f]-S)*l[f]*h/S;v.vx+=x*_,s>1&&(v.vy+=b*_),s>2&&(v.vz+=w*_)}}function d(){if(o){var h,f=o.length;for(l=new Array(f),c=new Array(f),h=0;h<f;++h)c[h]=+n(o[h],h,o),l[h]=isNaN(c[h])?0:+a(o[h],h,o)}}return u.initialize=function(h,...f){o=h,s=f.find(m=>[1,2,3].includes(m))||2,d()},u.strength=function(h){return arguments.length?(a=typeof h=="function"?h:Du(+h),d(),u):a},u.radius=function(h){return arguments.length?(n=typeof h=="function"?h:Du(+h),d(),u):n},u.x=function(h){return arguments.length?(e=+h,u):e},u.y=function(h){return arguments.length?(r=+h,u):r},u.z=function(h){return arguments.length?(i=+h,u):i},u}const{abs:sy,cos:du,sin:s0,acos:_Ie,atan2:ay,sqrt:nh,pow:ca}=Math;function ly(n){return n<0?-ca(-n,1/3):ca(n,1/3)}const mie=Math.PI,rk=2*mie,rh=mie/2,AIe=1e-6,wA=Number.MAX_SAFE_INTEGER||9007199254740991,kA=Number.MIN_SAFE_INTEGER||-9007199254740991,TIe={x:0,y:0,z:0},Ge={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),nh(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const o=1-n;let s=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:o*s[0].x+n*s[1].x,y:o*s[0].y+n*s[1].y,t:n};return r&&(l.z=o*s[0].z+n*s[1].z),l}if(i<4){let l=o*o,c=n*n,u,d,h,f=0;i===2?(s=[s[0],s[1],s[2],TIe],u=l,d=o*n*2,h=c):i===3&&(u=l*o,d=l*n*3,h=o*c*3,f=n*c);const m={x:u*s[0].x+d*s[1].x+h*s[2].x+f*s[3].x,y:u*s[0].y+d*s[1].y+h*s[2].y+f*s[3].y,t:n};return r&&(m.z=u*s[0].z+d*s[1].z+h*s[2].z+f*s[3].z),m}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const o=1-n,s=r,a=e;let l=s[0],c=s[1],u=s[2],d=s[3],h;if(l*=o,c*=n,a.length===2)return h=l+c,{x:(l*a[0].x+c*a[1].x)/h,y:(l*a[0].y+c*a[1].y)/h,z:i?(l*a[0].z+c*a[1].z)/h:!1,t:n};if(l*=o,c*=2*o,u*=n*n,a.length===3)return h=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/h,y:(l*a[0].y+c*a[1].y+u*a[2].y)/h,z:i?(l*a[0].z+c*a[1].z+u*a[2].z)/h:!1,t:n};if(l*=o,c*=1.5*o,u*=3*o,d*=n*n*n,a.length===4)return h=l+c+u+d,{x:(l*a[0].x+c*a[1].x+u*a[2].x+d*a[3].x)/h,y:(l*a[0].y+c*a[1].y+u*a[2].y+d*a[3].y)/h,z:i?(l*a[0].z+c*a[1].z+u*a[2].z+d*a[3].z)/h:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,o=i.length,s=o-1;o>1;o--,s--){const a=[];for(let l=0,c;l<s;l++)c={x:s*(i[l+1].x-i[l].x),y:s*(i[l+1].y-i[l].y)},e&&(c.z=s*(i[l+1].z-i[l].z)),a.push(c);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||Ge.approximately(n,e)||Ge.approximately(n,r)},approximately:function(n,e,r){return sy(n-e)<=(r||AIe)},length:function(n){const r=Ge.Tvalues.length;let i=0;for(let o=0,s;o<r;o++)s=.5*Ge.Tvalues[o]+.5,i+=Ge.Cvalues[o]*Ge.arcfn(s,n);return .5*i},map:function(n,e,r,i,o){const s=r-e,a=o-i,l=n-e,c=l/s;return i+a*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(Ge.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-n.x,a=r.y-n.y,l=i*a-o*s,c=i*s+o*a;return ay(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return nh(r*r+i*i)},closest:function(n,e){let r=ca(2,63),i,o;return n.forEach(function(s,a){o=Ge.dist(e,s),o<r&&(r=o,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=ca(n,e)+ca(1-n,e),i=r-1;return sy(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=ca(1-n,e),i=ca(n,e)+r;return r/i},lli8:function(n,e,r,i,o,s,a,l){const c=(n*i-e*r)*(o-a)-(n-r)*(o*l-s*a),u=(n*i-e*r)*(s-l)-(e-i)*(o*l-s*a),d=(n-r)*(s-l)-(e-i)*(o-a);return d==0?!1:{x:c/d,y:u/d}},lli4:function(n,e,r,i){const o=n.x,s=n.y,a=e.x,l=e.y,c=r.x,u=r.y,d=i.x,h=i.y;return Ge.lli8(o,s,a,l,c,u,d,h)},lli:function(n,e){return Ge.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new rr(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=wA,r=wA,i=kA,o=kA;return n.forEach(function(s){const a=s.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(n,e,r,i,o){if(!Ge.bboxoverlap(e,i))return[];const s=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const d=c.intersects(u,o);d.length>0&&(d.c1=c,d.c2=u,d.s1=n,d.s2=r,s.push(d))})}),s},makeshape:function(n,e,r){const i=e.points.length,o=n.points.length,s=Ge.makeline(e.points[i-1],n.points[0]),a=Ge.makeline(n.points[o-1],e.points[0]),l={startcap:s,forward:n,back:e,endcap:a,bbox:Ge.findbbox([s,n,e,a])};return l.intersections=function(c){return Ge.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=wA,o=kA,s,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)s=r[l],a=n.get(s),a[e]<i&&(i=a[e]),a[e]>o&&(o=a[e]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,o=-ay(e.p2.y-i,e.p2.x-r),s=function(a){return{x:(a.x-r)*du(o)-(a.y-i)*s0(o),y:(a.x-r)*s0(o)+(a.y-i)*du(o)}};return n.map(s)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=Ge.align(n,e),o=function(E){return 0<=E&&E<=1};if(r===2){const E=i[0].y,L=i[1].y,$=i[2].y,z=E-2*L+$;if(z!==0){const B=-nh(L*L-E*$),D=-E+L,Y=-(B+D)/z,I=-(-B+D)/z;return[Y,I].filter(o)}else if(L!==$&&z===0)return[(2*L-$)/(2*L-2*$)].filter(o);return[]}const s=i[0].y,a=i[1].y,l=i[2].y,c=i[3].y;let u=-s+3*a-3*l+c,d=3*s-6*a+3*l,h=-3*s+3*a,f=s;if(Ge.approximately(u,0)){if(Ge.approximately(d,0))return Ge.approximately(h,0)?[]:[-f/h].filter(o);const E=nh(h*h-4*d*f),L=2*d;return[(E-h)/L,(-h-E)/L].filter(o)}d/=u,h/=u,f/=u;const m=(3*h-d*d)/3,v=m/3,x=(2*d*d*d-9*d*h+27*f)/27,b=x/2,w=b*b+v*v*v;let S,_,P,A,T;if(w<0){const E=-m/3,L=E*E*E,$=nh(L),z=-x/(2*$),B=z<-1?-1:z>1?1:z,D=_Ie(B),Y=ly($),I=2*Y;return P=I*du(D/3)-d/3,A=I*du((D+rk)/3)-d/3,T=I*du((D+2*rk)/3)-d/3,[P,A,T].filter(o)}else{if(w===0)return S=b<0?ly(-b):-ly(b),P=2*S-d/3,A=-S-d/3,[P,A].filter(o);{const E=nh(w);return S=ly(-b+E),_=ly(b+E),[S-_-d/3].filter(o)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],o=e-2*r+i;if(o!==0){const s=-nh(r*r-e*i),a=-e+r,l=-(s+a)/o,c=-(-s+a)/o;return[l,c]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,o){let s,a,l,c,u=0,d=0;const h=Ge.compute(n,e),f=Ge.compute(n,r),m=h.x*h.x+h.y*h.y;if(i?(s=nh(ca(h.y*f.z-f.y*h.z,2)+ca(h.z*f.x-f.z*h.x,2)+ca(h.x*f.y-f.x*h.y,2)),a=ca(m+h.z*h.z,3/2)):(s=h.x*f.y-h.y*f.x,a=ca(m,3/2)),s===0||a===0)return{k:0,r:0};if(u=s/a,d=a/s,!o){const v=Ge.curvature(n-.001,e,r,i,!0).k,x=Ge.curvature(n+.001,e,r,i,!0).k;c=(x-u+(u-v))/2,l=(sy(x-u)+sy(u-v))/2}return{k:u,r:d,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=Ge.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,o=e[1].x*e[2].y,s=e[3].x*e[2].y,a=18*(-3*r+2*i+3*o-s),l=18*(3*r-i-3*o),c=18*(o-r);if(Ge.approximately(a,0)){if(!Ge.approximately(l,0)){let f=-c/l;if(0<=f&&f<=1)return[f]}return[]}const u=2*a;if(Ge.approximately(u,0))return[];const d=l*l-4*a*c;if(d<0)return[];const h=Math.sqrt(d);return[(h-l)/u,-(l+h)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let o=0,s,a,l,c;o<i;o++)if(s=r[o],a=n[s].mid,l=e[s].mid,c=(n[s].size+e[s].size)/2,sy(a-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),o=e.bbox(),s=1e5,a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(s*(n._t1+n._t2)/2|0)/s+"/"+(s*(e._t1+e._t2)/2|0)/s];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(h){return Ge.bboxoverlap(h.left.bbox(),h.right.bbox())});let d=[];return u.length===0||(u.forEach(function(h){d=d.concat(Ge.pairiteration(h.left,h.right,a))}),d=d.filter(function(h,f){return d.indexOf(h)===f})),d},getccenter:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-e.x,a=r.y-e.y,l=i*du(rh)-o*s0(rh),c=i*s0(rh)+o*du(rh),u=s*du(rh)-a*s0(rh),d=s*s0(rh)+a*du(rh),h=(n.x+e.x)/2,f=(n.y+e.y)/2,m=(e.x+r.x)/2,v=(e.y+r.y)/2,x=h+l,b=f+c,w=m+u,S=v+d,_=Ge.lli8(h,f,x,b,m,v,w,S),P=Ge.dist(_,n);let A=ay(n.y-_.y,n.x-_.x),T=ay(e.y-_.y,e.x-_.x),E=ay(r.y-_.y,r.x-_.x),L;return A<E?((A>T||T>E)&&(A+=rk),A>E&&(L=E,E=A,A=L)):E<T&&T<A?(L=E,E=A,A=L):E+=rk,_.s=A,_.e=E,_.r=P,_},numberSort:function(n,e){return n-e}};class Uv{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return Ge.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)Ge.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Uv(r)}}const{abs:cy,min:CV,max:_V,cos:PIe,sin:MIe,acos:EIe,sqrt:uy}=Math,NIe=Math.PI;class rr{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const m=[];r.forEach(function(v){["x","y","z"].forEach(function(x){typeof v[x]<"u"&&m.push(v[x])})}),r=m}let o=!1;const s=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!o&&(s===9||s===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let m=0,v=a?3:2;m<s;m+=v){var c={x:r[m],y:r[m+1]};a&&(c.z=r[m+2]),l.push(c)}const u=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const h=Ge.align(l,{p1:l[0],p2:l[u]}),f=Ge.dist(l[0],l[u]);this._linear=h.reduce((m,v)=>m+cy(v.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new rr(r,r,i);if(o===1)return new rr(e,r,r);const s=rr.getABC(2,e,r,i,o);return new rr(e,s.A,i)}static cubicFromPoints(e,r,i,o,s){typeof o>"u"&&(o=.5);const a=rr.getABC(3,e,r,i,o);typeof s>"u"&&(s=Ge.dist(r,a.C));const l=s*(1-o)/o,c=Ge.dist(e,i),u=(i.x-e.x)/c,d=(i.y-e.y)/c,h=s*u,f=s*d,m=l*u,v=l*d,x={x:r.x-h,y:r.y-f},b={x:r.x+m,y:r.y+v},w=a.A,S={x:w.x+(x.x-w.x)/(1-o),y:w.y+(x.y-w.y)/(1-o)},_={x:w.x+(b.x-w.x)/o,y:w.y+(b.y-w.y)/o},P={x:e.x+(S.x-e.x)/o,y:e.y+(S.y-e.y)/o},A={x:i.x+(_.x-i.x)/(1-o),y:i.y+(_.y-i.y)/(1-o)};return new rr(e,P,A,i)}static getUtils(){return Ge}getUtils(){return rr.getUtils()}static get PolyBezier(){return Uv}valueOf(){return this.toString()}toString(){return Ge.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let s=1,a=e.length;s<a;s++)o.push(e[s].x),o.push(e[s].y);return o.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=Ge.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=Ge.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return Ge.length(this.derivative.bind(this))}static getABC(e=2,r,i,o,s=.5){const a=Ge.projectionratio(s,e),l=1-a,c={x:a*r.x+l*o.x,y:a*r.y+l*o.y},u=Ge.abcratio(s,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:o}}getABC(e,r){r=r||this.get(e);let i=this.points[0],o=this.points[this.order];return rr.getABC(this.order,i,r,o,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,o;r<e;r++)o=r/(e-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),o=[];for(let s=0,a,l=0;s<i.length;s++)a=i[s],Ge.dist(a,e)<r&&(o.push(a),l+=s/i.length);return o.length?t/=o.length:!1}project(e){const r=this.getLUT(),i=r.length-1,o=Ge.closest(r,e),s=o.mpos,a=(s-1)/i,l=(s+1)/i,c=.1/i;let u=o.mdist,d=a,h=d,f;u+=1;for(let m;d<l+c;d+=c)f=this.compute(d),m=Ge.dist(e,f),m<u&&(u=m,h=d);return h=h<0?0:h>1?1:h,f=this.compute(h),f.t=h,f.d=u,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Ge.computeWithRatios(e,this.points,this.ratios,this._3d):Ge.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let o=1,s,a;o<i;o++)s=e[o],a=e[o-1],r[o]={x:(i-o)/i*s.x+o/i*a.x,y:(i-o)/i*s.y+o/i*a.y};return r[i]=e[i-1],new rr(r)}derivative(e){return Ge.compute(e,this.dpoints[0],this._3d)}dderivative(e){return Ge.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new rr(Ge.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Ge.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Ge.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=uy(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),o=uy(r.x*r.x+r.y*r.y+r.z*r.z),s=uy(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=s,i.y/=s,i.z/=s;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=uy(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],o=[],s=0;for(o[s++]=r[0],o[s++]=r[1],o[s++]=r[2],this.order===3&&(o[s++]=r[3]);r.length>1;){i=[];for(let a=0,l,c=r.length-1;a<c;a++)l=Ge.lerp(e,r[a],r[a+1]),o[s++]=l,i.push(l);r=i}return o}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),o={left:this.order===2?new rr([i[0],i[3],i[5]]):new rr([i[0],i[4],i[7],i[9]]),right:this.order===2?new rr([i[5],i[4],i[2]]):new rr([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=Ge.map(0,0,1,this._t1,this._t2),o.left._t2=Ge.map(e,0,1,this._t1,this._t2),o.right._t1=Ge.map(e,0,1,this._t1,this._t2),o.right._t2=Ge.map(1,0,1,this._t1,this._t2),r?(r=Ge.map(r,e,1,0,1),o.right.split(r).left):o}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let o=function(a){return a[i]},s=this.dpoints[0].map(o);e[i]=Ge.droots(s),this.order===3&&(s=this.dpoints[1].map(o),e[i]=e[i].concat(Ge.droots(s))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(Ge.numberSort))}).bind(this)),e.values=r.sort(Ge.numberSort).filter(function(i,o){return r.indexOf(i)===o}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=Ge.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return Ge.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),o=this.normal(e),s={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(s.z=i.z+o.z*r),s}if(this._linear){const i=this.normal(0),o=this.points.map(function(s){const a={x:s.x+e*i.x,y:s.y+e*i.y};return s.z&&i.z&&(a.z=s.z+e*i.z),a});return[new rr(o)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const o=Ge.angle(this.points[0],this.points[3],this.points[1]),s=Ge.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&s<0||o<0&&s>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),cy(EIe(i))<NIe/3}reduce(){let e,r=0,i=0,o=.01,s,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],s=this.split(r,i),s._t1=r,s._t2=i,a.push(s),r=i;return a.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(s=u.split(r,i),!s.simple()){if(i-=o,cy(r-i)<o)return[];s=u.split(r,i),s._t1=Ge.map(r,0,1,u._t1,u._t2),s._t2=Ge.map(i,0,1,u._t1,u._t2),l.push(s),r=i;break}r<1&&(s=u.split(r,1),s._t1=Ge.map(r,0,1,u._t1,u._t2),s._t2=u._t2,l.push(s))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const o=this.order;let s=this.points.map((a,l)=>(1-l/o)*r+l/o*i);return new rr(this.points.map((a,l)=>({x:a.x+e.x*s[l],y:a.y+e.y*s[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const o=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],d=Ge.lli4(c[0],c[0].c,c[1],c[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const f=u[h*r]=Ge.copy(s[h*r]);f.x+=(h?l:a)*c[h].n.x,f.y+=(h?l:a)*c[h].n.y}),i?([0,1].forEach(function(h){if(!(r===2&&h)){var f=s[h+1],m={x:f.x-d.x,y:f.y-d.y},v=i?i((h+1)/r):e;i&&!o&&(v=-v);var x=uy(m.x*m.x+m.y*m.y);m.x/=x,m.y/=x,u[h+1]={x:f.x+v*m.x,y:f.y+v*m.y}}}),new rr(u)):([0,1].forEach(h=>{if(r===2&&h)return;const f=u[h*r],m=this.derivative(h),v={x:f.x+m.x,y:f.y+m.y};u[h+1]=Ge.lli4(f,v,d,s[h+1])}),new rr(u))}outline(e,r,i,o){if(r=r===void 0?e:r,this._linear){const A=this.normal(0),T=this.points[0],E=this.points[this.points.length-1];let L,$,z;i===void 0&&(i=e,o=r),L={x:T.x+A.x*e,y:T.y+A.y*e},z={x:E.x+A.x*i,y:E.y+A.y*i},$={x:(L.x+z.x)/2,y:(L.y+z.y)/2};const B=[L,$,z];L={x:T.x-A.x*r,y:T.y-A.y*r},z={x:E.x-A.x*o,y:E.y-A.y*o},$={x:(L.x+z.x)/2,y:(L.y+z.y)/2};const D=[z,$,L],Y=Ge.makeline(D[2],B[0]),I=Ge.makeline(B[2],D[0]),U=[Y,new rr(B),I,new rr(D)];return new Uv(U)}const s=this.reduce(),a=s.length,l=[];let c=[],u,d=0,h=this.length();const f=typeof i<"u"&&typeof o<"u";function m(A,T,E,L,$){return function(z){const B=L/E,D=(L+$)/E,Y=T-A;return Ge.map(z,0,1,A+B*Y,A+D*Y)}}s.forEach(function(A){const T=A.length();f?(l.push(A.scale(m(e,i,h,d,T))),c.push(A.scale(m(-r,-o,h,d,T)))):(l.push(A.scale(e)),c.push(A.scale(-r))),d+=T}),c=c.map(function(A){return u=A.points,u[3]?A.points=[u[3],u[2],u[1],u[0]]:A.points=[u[2],u[1],u[0]],A}).reverse();const v=l[0].points[0],x=l[a-1].points[l[a-1].points.length-1],b=c[a-1].points[c[a-1].points.length-1],w=c[0].points[0],S=Ge.makeline(b,v),_=Ge.makeline(x,w),P=[S].concat(l).concat([_]).concat(c);return new Uv(P)}outlineshapes(e,r,i){r=r||e;const o=this.outline(e,r).curves,s=[];for(let a=1,l=o.length;a<l/2;a++){const c=Ge.makeshape(o[a],o[l-a],i);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,s.push(c)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof rr&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=CV(e.p1.x,e.p2.x),i=CV(e.p1.y,e.p2.y),o=_V(e.p1.x,e.p2.x),s=_V(e.p1.y,e.p2.y);return Ge.roots(this.points,e).filter(a=>{var l=this.get(a);return Ge.between(l.x,r,o)&&Ge.between(l.y,i,s)})}selfintersects(e){const r=this.reduce(),i=r.length-2,o=[];for(let s=0,a,l,c;s<i;s++)l=r.slice(s,s+1),c=r.slice(s+2),a=this.curveintersects(l,c,e),o.push(...a);return o}curveintersects(e,r,i){const o=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&o.push({left:a,right:l})})});let s=[];return o.forEach(function(a){const l=Ge.pairiteration(a.left,a.right,i);l.length>0&&(s=s.concat(l))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,o){const s=(o-i)/4,a=this.get(i+s),l=this.get(o-s),c=Ge.dist(e,r),u=Ge.dist(e,a),d=Ge.dist(e,l);return cy(u-c)+cy(d-c)}_iterate(e,r){let i=0,o=1,s;do{s=0,o=1;let a=this.get(i),l,c,u,d,h=!1,f=!1,m,v=o,x=1;do if(f=h,d=u,v=(i+o)/2,l=this.get(v),c=this.get(o),u=Ge.getccenter(a,l,c),u.interval={start:i,end:o},h=this._error(u,a,i,o)<=e,m=f&&!h,m||(x=o),h){if(o>=1){if(u.interval.end=x=1,d=u,o>1){let w={x:u.x+u.r*PIe(u.e),y:u.y+u.r*MIe(u.e)};u.e+=Ge.angle({x:u.x,y:u.y},w,this.get(1))}break}o=o+(o-i)/2}else o=v;while(!m&&s++<100);if(s>=100)break;d=d||u,r.push(d),i=x}while(o<1);return r}}function RM(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function jIe(n){if(Array.isArray(n))return n}function OIe(n){if(Array.isArray(n))return RM(n)}function DIe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function IIe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function RIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zIe(n,e){if(n==null)return{};var r,i,o=FIe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function FIe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function $Ie(n,e){return jIe(n)||IIe(n,e)||gie(n,e)||RIe()}function BIe(n){return OIe(n)||DIe(n)||gie(n)||LIe()}function HIe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function qIe(n){var e=HIe(n,"string");return typeof e=="symbol"?e:e+""}function gie(n,e){if(n){if(typeof n=="string")return RM(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?RM(n,e):void 0}}var VIe=(function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),s=n.reduce(function(l,c){var u=l,d=c;return o.forEach(function(h,f){var m=h.keyAccessor,v=h.isProp,x;if(v){var b=d,w=b[m],S=zIe(b,[m].map(qIe));x=w,d=S}else x=m(d,f);f+1<o.length?(u.hasOwnProperty(x)||(u[x]={}),u=u[x]):r?(u.hasOwnProperty(x)||(u[x]=[]),u[x].push(d)):u[x]=d}),l},{});r instanceof Function&&(function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===o.length?Object.keys(c).forEach(function(d){return c[d]=r(c[d])}):Object.values(c).forEach(function(d){return l(d,u+1)})})(s);var a=s;return i&&(a=[],(function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===o.length?a.push({keys:u,vals:c}):Object.entries(c).forEach(function(d){var h=$Ie(d,2),f=h[0],m=h[1];return l(m,[].concat(BIe(u),[f]))})})(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a});function Ra(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function gd(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const LM=Symbol("implicit");function z3(){var n=new zq,e=[],r=[],i=LM;function o(s){let a=n.get(s);if(a===void 0){if(i!==LM)return i;n.set(s,a=e.push(s)-1)}return r[a%r.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new zq;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return o},o.range=function(s){return arguments.length?(r=Array.from(s),o):r.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.copy=function(){return z3(e,r).unknown(i)},Ra.apply(o,arguments),o}function IO(){var n=z3().unknown(void 0),e=n.domain,r=n.range,i=0,o=1,s,a,l=!1,c=0,u=0,d=.5;delete n.unknown;function h(){var f=e().length,m=o<i,v=m?o:i,x=m?i:o;s=(x-v)/Math.max(1,f-c+u*2),l&&(s=Math.floor(s)),v+=(x-v-s*(f-c))*d,a=s*(1-c),l&&(v=Math.round(v),a=Math.round(a));var b=pEe(f).map(function(w){return v+s*w});return r(m?b.reverse():b)}return n.domain=function(f){return arguments.length?(e(f),h()):e()},n.range=function(f){return arguments.length?([i,o]=f,i=+i,o=+o,h()):[i,o]},n.rangeRound=function(f){return[i,o]=f,i=+i,o=+o,l=!0,h()},n.bandwidth=function(){return a},n.step=function(){return s},n.round=function(f){return arguments.length?(l=!!f,h()):l},n.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},n.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},n.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},n.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},n.copy=function(){return IO(e(),[i,o]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ra.apply(h(),arguments)}function yie(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return yie(e())},n}function WIe(){return yie(IO.apply(null,arguments).paddingInner(1))}function UIe(n){return function(){return n}}function m5(n){return+n}var AV=[0,1];function So(n){return n}function zM(n,e){return(e-=n=+n)?function(r){return(r-n)/e}:UIe(isNaN(e)?NaN:.5)}function KIe(n,e){var r;return n>e&&(r=n,n=e,e=r),function(i){return Math.max(n,Math.min(e,i))}}function GIe(n,e,r){var i=n[0],o=n[1],s=e[0],a=e[1];return o<i?(i=zM(o,i),s=r(a,s)):(i=zM(i,o),s=r(s,a)),function(l){return s(i(l))}}function YIe(n,e,r){var i=Math.min(n.length,e.length)-1,o=new Array(i),s=new Array(i),a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<i;)o[a]=zM(n[a],n[a+1]),s[a]=r(e[a],e[a+1]);return function(l){var c=$b(n,l,1,i)-1;return s[c](o[c](l))}}function Wb(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function F3(){var n=AV,e=AV,r=Hg,i,o,s,a=So,l,c,u;function d(){var f=Math.min(n.length,e.length);return a!==So&&(a=KIe(n[0],n[f-1])),l=f>2?YIe:GIe,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=l(n.map(i),e,r)))(i(a(f)))}return h.invert=function(f){return a(o((u||(u=l(e,n.map(i),il)))(f)))},h.domain=function(f){return arguments.length?(n=Array.from(f,m5),d()):n.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=mO,d()},h.clamp=function(f){return arguments.length?(a=f?!0:So,d()):a!==So},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,m){return i=f,o=m,d()}}function RO(){return F3()(So,So)}function ZIe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function g5(n,e){if(!isFinite(n)||n===0)return null;var r=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+n.slice(r+1)]}function pg(n){return n=g5(Math.abs(n)),n?n[1]:NaN}function XIe(n,e){return function(r,i){for(var o=r.length,s=[],a=0,l=n[0],c=0;o>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(r.substring(o-=l,o+l)),!((c+=l+1)>i));)l=n[a=(a+1)%n.length];return s.reverse().join(e)}}function JIe(n){return function(e){return e.replace(/[0-9]/g,function(r){return n[+r]})}}var QIe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $x(n){if(!(e=QIe.exec(n)))throw new Error("invalid format: "+n);var e;return new LO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$x.prototype=LO.prototype;function LO(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}LO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eRe(n){e:for(var e=n.length,r=1,i=-1,o;r<e;++r)switch(n[r]){case".":i=o=r;break;case"0":i===0&&(i=r),o=r;break;default:if(!+n[r])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(o+1):n}var y5;function tRe(n,e){var r=g5(n,e);if(!r)return y5=void 0,n.toPrecision(e);var i=r[0],o=r[1],s=o-(y5=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+g5(n,Math.max(0,e+s-1))[0]}function TV(n,e){var r=g5(n,e);if(!r)return n+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}const PV={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:ZIe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>TV(n*100,e),r:TV,s:tRe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function MV(n){return n}var EV=Array.prototype.map,NV=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nRe(n){var e=n.grouping===void 0||n.thousands===void 0?MV:XIe(EV.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?MV:JIe(EV.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function u(h,f){h=$x(h);var m=h.fill,v=h.align,x=h.sign,b=h.symbol,w=h.zero,S=h.width,_=h.comma,P=h.precision,A=h.trim,T=h.type;T==="n"?(_=!0,T="g"):PV[T]||(P===void 0&&(P=12),A=!0,T="g"),(w||m==="0"&&v==="=")&&(w=!0,m="0",v="=");var E=(f&&f.prefix!==void 0?f.prefix:"")+(b==="$"?r:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),L=(b==="$"?i:/[%p]/.test(T)?a:"")+(f&&f.suffix!==void 0?f.suffix:""),$=PV[T],z=/[defgprs%]/.test(T);P=P===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function B(D){var Y=E,I=L,U,Z,te;if(T==="c")I=$(D)+I,D="";else{D=+D;var J=D<0||1/D<0;if(D=isNaN(D)?c:$(Math.abs(D),P),A&&(D=eRe(D)),J&&+D==0&&x!=="+"&&(J=!1),Y=(J?x==="("?x:l:x==="-"||x==="("?"":x)+Y,I=(T==="s"&&!isNaN(D)&&y5!==void 0?NV[8+y5/3]:"")+I+(J&&x==="("?")":""),z){for(U=-1,Z=D.length;++U<Z;)if(te=D.charCodeAt(U),48>te||te>57){I=(te===46?o+D.slice(U+1):D.slice(U))+I,D=D.slice(0,U);break}}}_&&!w&&(D=e(D,1/0));var oe=Y.length+D.length+I.length,q=oe<S?new Array(S-oe+1).join(m):"";switch(_&&w&&(D=e(q+D,q.length?S-I.length:1/0),q=""),v){case"<":D=Y+D+I+q;break;case"=":D=Y+q+D+I;break;case"^":D=q.slice(0,oe=q.length>>1)+Y+D+I+q.slice(oe);break;default:D=q+Y+D+I;break}return s(D)}return B.toString=function(){return h+""},B}function d(h,f){var m=Math.max(-8,Math.min(8,Math.floor(pg(f)/3)))*3,v=Math.pow(10,-m),x=u((h=$x(h),h.type="f",h),{suffix:NV[8+m/3]});return function(b){return x(v*b)}}return{format:u,formatPrefix:d}}var ik,zO,vie;rRe({thousands:",",grouping:[3],currency:["$",""]});function rRe(n){return ik=nRe(n),zO=ik.format,vie=ik.formatPrefix,ik}function iRe(n){return Math.max(0,-pg(Math.abs(n)))}function oRe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pg(e)/3)))*3-pg(Math.abs(n)))}function sRe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,pg(e)-pg(n))+1}function xie(n,e,r,i){var o=SM(n,e,r),s;switch(i=$x(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(s=oRe(o,a))&&(i.precision=s),vie(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=sRe(o,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=iRe(o))&&(i.precision=s-(i.type==="%")*2);break}}return zO(i)}function uf(n){var e=n.domain;return n.ticks=function(r){var i=e();return wM(i[0],i[i.length-1],r??10)},n.tickFormat=function(r,i){var o=e();return xie(o[0],o[o.length-1],r??10,i)},n.nice=function(r){r==null&&(r=10);var i=e(),o=0,s=i.length-1,a=i[o],l=i[s],c,u,d=10;for(l<a&&(u=a,a=l,l=u,u=o,o=s,s=u);d-- >0;){if(u=kM(a,l,r),u===c)return i[o]=a,i[s]=l,e(i);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return n},n}function bie(){var n=RO();return n.copy=function(){return Wb(n,bie())},Ra.apply(n,arguments),uf(n)}function wie(n){var e;function r(i){return i==null||isNaN(i=+i)?e:i}return r.invert=r,r.domain=r.range=function(i){return arguments.length?(n=Array.from(i,m5),r):n.slice()},r.unknown=function(i){return arguments.length?(e=i,r):e},r.copy=function(){return wie(n).unknown(e)},n=arguments.length?Array.from(n,m5):[0,1],uf(r)}function kie(n,e){n=n.slice();var r=0,i=n.length-1,o=n[r],s=n[i],a;return s<o&&(a=r,r=i,i=a,a=o,o=s,s=a),n[r]=e.floor(o),n[i]=e.ceil(s),n}function jV(n){return Math.log(n)}function OV(n){return Math.exp(n)}function aRe(n){return-Math.log(-n)}function lRe(n){return-Math.exp(-n)}function cRe(n){return isFinite(n)?+("1e"+n):n<0?0:n}function uRe(n){return n===10?cRe:n===Math.E?Math.exp:e=>Math.pow(n,e)}function dRe(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function DV(n){return(e,r)=>-n(-e,r)}function FO(n){const e=n(jV,OV),r=e.domain;let i=10,o,s;function a(){return o=dRe(i),s=uRe(i),r()[0]<0?(o=DV(o),s=DV(s),n(aRe,lRe)):n(jV,OV),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(r(l),a()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=o(u),m=o(d),v,x;const b=l==null?10:+l;let w=[];if(!(i%1)&&m-f<b){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<i;++v)if(x=f<0?v/s(-f):v*s(f),!(x<u)){if(x>d)break;w.push(x)}}else for(;f<=m;++f)for(v=i-1;v>=1;--v)if(x=f>0?v/s(-f):v*s(f),!(x<u)){if(x>d)break;w.push(x)}w.length*2<b&&(w=wM(u,d,b))}else w=wM(f,m,Math.min(m-f,b)).map(s);return h?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=$x(c)).precision==null&&(c.trim=!0),c=zO(c)),l===1/0)return c;const u=Math.max(1,i*l/e.ticks().length);return d=>{let h=d/s(Math.round(o(d)));return h*i<i-.5&&(h*=i),h<=u?c(d):""}},e.nice=()=>r(kie(r(),{floor:l=>s(Math.floor(o(l))),ceil:l=>s(Math.ceil(o(l)))})),e}function Sie(){const n=FO(F3()).domain([1,10]);return n.copy=()=>Wb(n,Sie()).base(n.base()),Ra.apply(n,arguments),n}function IV(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function RV(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function $O(n){var e=1,r=n(IV(e),RV(e));return r.constant=function(i){return arguments.length?n(IV(e=+i),RV(e)):e},uf(r)}function Cie(){var n=$O(F3());return n.copy=function(){return Wb(n,Cie()).constant(n.constant())},Ra.apply(n,arguments)}function LV(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function hRe(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function fRe(n){return n<0?-n*n:n*n}function BO(n){var e=n(So,So),r=1;function i(){return r===1?n(So,So):r===.5?n(hRe,fRe):n(LV(r),LV(1/r))}return e.exponent=function(o){return arguments.length?(r=+o,i()):r},uf(e)}function HO(){var n=BO(F3());return n.copy=function(){return Wb(n,HO()).exponent(n.exponent())},Ra.apply(n,arguments),n}function pRe(){return HO.apply(null,arguments).exponent(.5)}function zV(n){return Math.sign(n)*n*n}function mRe(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function _ie(){var n=RO(),e=[0,1],r=!1,i;function o(s){var a=mRe(n(s));return isNaN(a)?i:r?Math.round(a):a}return o.invert=function(s){return n.invert(zV(s))},o.domain=function(s){return arguments.length?(n.domain(s),o):n.domain()},o.range=function(s){return arguments.length?(n.range((e=Array.from(s,m5)).map(zV)),o):e.slice()},o.rangeRound=function(s){return o.range(s).round(!0)},o.round=function(s){return arguments.length?(r=!!s,o):r},o.clamp=function(s){return arguments.length?(n.clamp(s),o):n.clamp()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.copy=function(){return _ie(n.domain(),e).round(r).clamp(n.clamp()).unknown(i)},Ra.apply(o,arguments),uf(o)}function Aie(){var n=[],e=[],r=[],i;function o(){var a=0,l=Math.max(1,e.length);for(r=new Array(l-1);++a<l;)r[a-1]=fEe(n,a/l);return s}function s(a){return a==null||isNaN(a=+a)?i:e[$b(r,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?r[l-1]:n[0],l<r.length?r[l]:n[n.length-1]]},s.domain=function(a){if(!arguments.length)return n.slice();n=[];for(let l of a)l!=null&&!isNaN(l=+l)&&n.push(l);return n.sort(Fh),o()},s.range=function(a){return arguments.length?(e=Array.from(a),o()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return r.slice()},s.copy=function(){return Aie().domain(n).range(e).unknown(i)},Ra.apply(s,arguments)}function Tie(){var n=0,e=1,r=1,i=[.5],o=[0,1],s;function a(c){return c!=null&&c<=c?o[$b(i,c,0,r)]:s}function l(){var c=-1;for(i=new Array(r);++c<r;)i[c]=((c+1)*e-(c-r)*n)/(r+1);return a}return a.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,l()):[n,e]},a.range=function(c){return arguments.length?(r=(o=Array.from(c)).length-1,l()):o.slice()},a.invertExtent=function(c){var u=o.indexOf(c);return u<0?[NaN,NaN]:u<1?[n,i[0]]:u>=r?[i[r-1],e]:[i[u-1],i[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return i.slice()},a.copy=function(){return Tie().domain([n,e]).range(o).unknown(s)},Ra.apply(uf(a),arguments)}function Pie(){var n=[.5],e=[0,1],r,i=1;function o(s){return s!=null&&s<=s?e[$b(n,s,0,i)]:r}return o.domain=function(s){return arguments.length?(n=Array.from(s),i=Math.min(n.length,e.length-1),o):n.slice()},o.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(n.length,e.length-1),o):e.slice()},o.invertExtent=function(s){var a=e.indexOf(s);return[n[a-1],n[a]]},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return Pie().domain(n).range(e).unknown(r)},Ra.apply(o,arguments)}const SA=new Date,CA=new Date;function ri(n,e,r,i){function o(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return o.floor=s=>(n(s=new Date(+s)),s),o.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),o.round=s=>{const a=o(s),l=o.ceil(s);return s-a<l-s?a:l},o.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),o.range=(s,a,l)=>{const c=[];if(s=o.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),n(s);while(u<s&&s<a);return c},o.filter=s=>ri(a=>{if(a>=a)for(;n(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),r&&(o.count=(s,a)=>(SA.setTime(+s),CA.setTime(+a),n(SA),n(CA),Math.floor(r(SA,CA))),o.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?o.filter(i?a=>i(a)%s===0:a=>o.count(0,a)%s===0):o)),o}const v5=ri(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);v5.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?ri(e=>{e.setTime(Math.floor(e/n)*n)},(e,r)=>{e.setTime(+e+r*n)},(e,r)=>(r-e)/n):v5);v5.range;const Iu=1e3,ya=Iu*60,Ru=ya*60,Ju=Ru*24,qO=Ju*7,FV=Ju*30,_A=Ju*365,mp=ri(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*Iu)},(n,e)=>(e-n)/Iu,n=>n.getUTCSeconds());mp.range;const VO=ri(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Iu)},(n,e)=>{n.setTime(+n+e*ya)},(n,e)=>(e-n)/ya,n=>n.getMinutes());VO.range;const WO=ri(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*ya)},(n,e)=>(e-n)/ya,n=>n.getUTCMinutes());WO.range;const UO=ri(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Iu-n.getMinutes()*ya)},(n,e)=>{n.setTime(+n+e*Ru)},(n,e)=>(e-n)/Ru,n=>n.getHours());UO.range;const KO=ri(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Ru)},(n,e)=>(e-n)/Ru,n=>n.getUTCHours());KO.range;const Ub=ri(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ya)/Ju,n=>n.getDate()-1);Ub.range;const $3=ri(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Ju,n=>n.getUTCDate()-1);$3.range;const Mie=ri(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Ju,n=>Math.floor(n/Ju));Mie.range;function km(n){return ri(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ya)/qO)}const B3=km(0),x5=km(1),gRe=km(2),yRe=km(3),mg=km(4),vRe=km(5),xRe=km(6);B3.range;x5.range;gRe.range;yRe.range;mg.range;vRe.range;xRe.range;function Sm(n){return ri(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/qO)}const H3=Sm(0),b5=Sm(1),bRe=Sm(2),wRe=Sm(3),gg=Sm(4),kRe=Sm(5),SRe=Sm(6);H3.range;b5.range;bRe.range;wRe.range;gg.range;kRe.range;SRe.range;const GO=ri(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());GO.range;const YO=ri(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());YO.range;const Qu=ri(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Qu.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ri(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*n)});Qu.range;const ed=ri(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());ed.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ri(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*n)});ed.range;function Eie(n,e,r,i,o,s){const a=[[mp,1,Iu],[mp,5,5*Iu],[mp,15,15*Iu],[mp,30,30*Iu],[s,1,ya],[s,5,5*ya],[s,15,15*ya],[s,30,30*ya],[o,1,Ru],[o,3,3*Ru],[o,6,6*Ru],[o,12,12*Ru],[i,1,Ju],[i,2,2*Ju],[r,1,qO],[e,1,FV],[e,3,3*FV],[n,1,_A]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,h){const f=Math.abs(d-u)/h,m=wO(([,,b])=>b).right(a,f);if(m===a.length)return n.every(SM(u/_A,d/_A,h));if(m===0)return v5.every(Math.max(SM(u,d,h),1));const[v,x]=a[f/a[m-1][2]<a[m][2]/f?m-1:m];return v.every(x)}return[l,c]}const[CRe,_Re]=Eie(ed,YO,H3,Mie,KO,WO),[ARe,TRe]=Eie(Qu,GO,B3,Ub,UO,VO);function AA(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function TA(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function dy(n,e,r){return{y:n,m:e,d:r,H:0,M:0,S:0,L:0}}function PRe(n){var e=n.dateTime,r=n.date,i=n.time,o=n.periods,s=n.days,a=n.shortDays,l=n.months,c=n.shortMonths,u=hy(o),d=fy(o),h=hy(s),f=fy(s),m=hy(a),v=fy(a),x=hy(l),b=fy(l),w=hy(c),S=fy(c),_={a:te,A:J,b:oe,B:q,c:null,d:WV,e:WV,f:XRe,g:aLe,G:cLe,H:GRe,I:YRe,j:ZRe,L:Nie,m:JRe,M:QRe,p:G,q:re,Q:GV,s:YV,S:eLe,u:tLe,U:nLe,V:rLe,w:iLe,W:oLe,x:null,X:null,y:sLe,Y:lLe,Z:uLe,"%":KV},P={a:V,A:ve,b:ke,B:pe,c:null,d:UV,e:UV,f:pLe,g:CLe,G:ALe,H:dLe,I:hLe,j:fLe,L:Oie,m:mLe,M:gLe,p:me,q:Me,Q:GV,s:YV,S:yLe,u:vLe,U:xLe,V:bLe,w:wLe,W:kLe,x:null,X:null,y:SLe,Y:_Le,Z:TLe,"%":KV},A={a:z,A:B,b:D,B:Y,c:I,d:qV,e:qV,f:VRe,g:HV,G:BV,H:VV,I:VV,j:$Re,L:qRe,m:FRe,M:BRe,p:$,q:zRe,Q:URe,s:KRe,S:HRe,u:ORe,U:DRe,V:IRe,w:jRe,W:RRe,x:U,X:Z,y:HV,Y:BV,Z:LRe,"%":WRe};_.x=T(r,_),_.X=T(i,_),_.c=T(e,_),P.x=T(r,P),P.X=T(i,P),P.c=T(e,P);function T(le,ze){return function(nt){var F=[],X=-1,ie=0,de=le.length,fe,be,Pe;for(nt instanceof Date||(nt=new Date(+nt));++X<de;)le.charCodeAt(X)===37&&(F.push(le.slice(ie,X)),(be=$V[fe=le.charAt(++X)])!=null?fe=le.charAt(++X):be=fe==="e"?" ":"0",(Pe=ze[fe])&&(fe=Pe(nt,be)),F.push(fe),ie=X+1);return F.push(le.slice(ie,X)),F.join("")}}function E(le,ze){return function(nt){var F=dy(1900,void 0,1),X=L(F,le,nt+="",0),ie,de;if(X!=nt.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(ze&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(ie=TA(dy(F.y,0,1)),de=ie.getUTCDay(),ie=de>4||de===0?b5.ceil(ie):b5(ie),ie=$3.offset(ie,(F.V-1)*7),F.y=ie.getUTCFullYear(),F.m=ie.getUTCMonth(),F.d=ie.getUTCDate()+(F.w+6)%7):(ie=AA(dy(F.y,0,1)),de=ie.getDay(),ie=de>4||de===0?x5.ceil(ie):x5(ie),ie=Ub.offset(ie,(F.V-1)*7),F.y=ie.getFullYear(),F.m=ie.getMonth(),F.d=ie.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),de="Z"in F?TA(dy(F.y,0,1)).getUTCDay():AA(dy(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(de+5)%7:F.w+F.U*7-(de+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,TA(F)):AA(F)}}function L(le,ze,nt,F){for(var X=0,ie=ze.length,de=nt.length,fe,be;X<ie;){if(F>=de)return-1;if(fe=ze.charCodeAt(X++),fe===37){if(fe=ze.charAt(X++),be=A[fe in $V?ze.charAt(X++):fe],!be||(F=be(le,nt,F))<0)return-1}else if(fe!=nt.charCodeAt(F++))return-1}return F}function $(le,ze,nt){var F=u.exec(ze.slice(nt));return F?(le.p=d.get(F[0].toLowerCase()),nt+F[0].length):-1}function z(le,ze,nt){var F=m.exec(ze.slice(nt));return F?(le.w=v.get(F[0].toLowerCase()),nt+F[0].length):-1}function B(le,ze,nt){var F=h.exec(ze.slice(nt));return F?(le.w=f.get(F[0].toLowerCase()),nt+F[0].length):-1}function D(le,ze,nt){var F=w.exec(ze.slice(nt));return F?(le.m=S.get(F[0].toLowerCase()),nt+F[0].length):-1}function Y(le,ze,nt){var F=x.exec(ze.slice(nt));return F?(le.m=b.get(F[0].toLowerCase()),nt+F[0].length):-1}function I(le,ze,nt){return L(le,e,ze,nt)}function U(le,ze,nt){return L(le,r,ze,nt)}function Z(le,ze,nt){return L(le,i,ze,nt)}function te(le){return a[le.getDay()]}function J(le){return s[le.getDay()]}function oe(le){return c[le.getMonth()]}function q(le){return l[le.getMonth()]}function G(le){return o[+(le.getHours()>=12)]}function re(le){return 1+~~(le.getMonth()/3)}function V(le){return a[le.getUTCDay()]}function ve(le){return s[le.getUTCDay()]}function ke(le){return c[le.getUTCMonth()]}function pe(le){return l[le.getUTCMonth()]}function me(le){return o[+(le.getUTCHours()>=12)]}function Me(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var ze=T(le+="",_);return ze.toString=function(){return le},ze},parse:function(le){var ze=E(le+="",!1);return ze.toString=function(){return le},ze},utcFormat:function(le){var ze=T(le+="",P);return ze.toString=function(){return le},ze},utcParse:function(le){var ze=E(le+="",!0);return ze.toString=function(){return le},ze}}}var $V={"-":"",_:" ",0:"0"},wi=/^\s*\d+/,MRe=/^%/,ERe=/[\\^$*+?|[\]().{}]/g;function xn(n,e,r){var i=n<0?"-":"",o=(i?-n:n)+"",s=o.length;return i+(s<r?new Array(r-s+1).join(e)+o:o)}function NRe(n){return n.replace(ERe,"\\$&")}function hy(n){return new RegExp("^(?:"+n.map(NRe).join("|")+")","i")}function fy(n){return new Map(n.map((e,r)=>[e.toLowerCase(),r]))}function jRe(n,e,r){var i=wi.exec(e.slice(r,r+1));return i?(n.w=+i[0],r+i[0].length):-1}function ORe(n,e,r){var i=wi.exec(e.slice(r,r+1));return i?(n.u=+i[0],r+i[0].length):-1}function DRe(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.U=+i[0],r+i[0].length):-1}function IRe(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.V=+i[0],r+i[0].length):-1}function RRe(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.W=+i[0],r+i[0].length):-1}function BV(n,e,r){var i=wi.exec(e.slice(r,r+4));return i?(n.y=+i[0],r+i[0].length):-1}function HV(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function LRe(n,e,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function zRe(n,e,r){var i=wi.exec(e.slice(r,r+1));return i?(n.q=i[0]*3-3,r+i[0].length):-1}function FRe(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.m=i[0]-1,r+i[0].length):-1}function qV(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.d=+i[0],r+i[0].length):-1}function $Re(n,e,r){var i=wi.exec(e.slice(r,r+3));return i?(n.m=0,n.d=+i[0],r+i[0].length):-1}function VV(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.H=+i[0],r+i[0].length):-1}function BRe(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.M=+i[0],r+i[0].length):-1}function HRe(n,e,r){var i=wi.exec(e.slice(r,r+2));return i?(n.S=+i[0],r+i[0].length):-1}function qRe(n,e,r){var i=wi.exec(e.slice(r,r+3));return i?(n.L=+i[0],r+i[0].length):-1}function VRe(n,e,r){var i=wi.exec(e.slice(r,r+6));return i?(n.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function WRe(n,e,r){var i=MRe.exec(e.slice(r,r+1));return i?r+i[0].length:-1}function URe(n,e,r){var i=wi.exec(e.slice(r));return i?(n.Q=+i[0],r+i[0].length):-1}function KRe(n,e,r){var i=wi.exec(e.slice(r));return i?(n.s=+i[0],r+i[0].length):-1}function WV(n,e){return xn(n.getDate(),e,2)}function GRe(n,e){return xn(n.getHours(),e,2)}function YRe(n,e){return xn(n.getHours()%12||12,e,2)}function ZRe(n,e){return xn(1+Ub.count(Qu(n),n),e,3)}function Nie(n,e){return xn(n.getMilliseconds(),e,3)}function XRe(n,e){return Nie(n,e)+"000"}function JRe(n,e){return xn(n.getMonth()+1,e,2)}function QRe(n,e){return xn(n.getMinutes(),e,2)}function eLe(n,e){return xn(n.getSeconds(),e,2)}function tLe(n){var e=n.getDay();return e===0?7:e}function nLe(n,e){return xn(B3.count(Qu(n)-1,n),e,2)}function jie(n){var e=n.getDay();return e>=4||e===0?mg(n):mg.ceil(n)}function rLe(n,e){return n=jie(n),xn(mg.count(Qu(n),n)+(Qu(n).getDay()===4),e,2)}function iLe(n){return n.getDay()}function oLe(n,e){return xn(x5.count(Qu(n)-1,n),e,2)}function sLe(n,e){return xn(n.getFullYear()%100,e,2)}function aLe(n,e){return n=jie(n),xn(n.getFullYear()%100,e,2)}function lLe(n,e){return xn(n.getFullYear()%1e4,e,4)}function cLe(n,e){var r=n.getDay();return n=r>=4||r===0?mg(n):mg.ceil(n),xn(n.getFullYear()%1e4,e,4)}function uLe(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xn(e/60|0,"0",2)+xn(e%60,"0",2)}function UV(n,e){return xn(n.getUTCDate(),e,2)}function dLe(n,e){return xn(n.getUTCHours(),e,2)}function hLe(n,e){return xn(n.getUTCHours()%12||12,e,2)}function fLe(n,e){return xn(1+$3.count(ed(n),n),e,3)}function Oie(n,e){return xn(n.getUTCMilliseconds(),e,3)}function pLe(n,e){return Oie(n,e)+"000"}function mLe(n,e){return xn(n.getUTCMonth()+1,e,2)}function gLe(n,e){return xn(n.getUTCMinutes(),e,2)}function yLe(n,e){return xn(n.getUTCSeconds(),e,2)}function vLe(n){var e=n.getUTCDay();return e===0?7:e}function xLe(n,e){return xn(H3.count(ed(n)-1,n),e,2)}function Die(n){var e=n.getUTCDay();return e>=4||e===0?gg(n):gg.ceil(n)}function bLe(n,e){return n=Die(n),xn(gg.count(ed(n),n)+(ed(n).getUTCDay()===4),e,2)}function wLe(n){return n.getUTCDay()}function kLe(n,e){return xn(b5.count(ed(n)-1,n),e,2)}function SLe(n,e){return xn(n.getUTCFullYear()%100,e,2)}function CLe(n,e){return n=Die(n),xn(n.getUTCFullYear()%100,e,2)}function _Le(n,e){return xn(n.getUTCFullYear()%1e4,e,4)}function ALe(n,e){var r=n.getUTCDay();return n=r>=4||r===0?gg(n):gg.ceil(n),xn(n.getUTCFullYear()%1e4,e,4)}function TLe(){return"+0000"}function KV(){return"%"}function GV(n){return+n}function YV(n){return Math.floor(+n/1e3)}var a0,Iie,Rie;PLe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PLe(n){return a0=PRe(n),Iie=a0.format,a0.parse,Rie=a0.utcFormat,a0.utcParse,a0}function MLe(n){return new Date(n)}function ELe(n){return n instanceof Date?+n:+new Date(+n)}function ZO(n,e,r,i,o,s,a,l,c,u){var d=RO(),h=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),x=u("%I:%M"),b=u("%I %p"),w=u("%a %d"),S=u("%b %d"),_=u("%B"),P=u("%Y");function A(T){return(c(T)<T?m:l(T)<T?v:a(T)<T?x:s(T)<T?b:i(T)<T?o(T)<T?w:S:r(T)<T?_:P)(T)}return d.invert=function(T){return new Date(h(T))},d.domain=function(T){return arguments.length?f(Array.from(T,ELe)):f().map(MLe)},d.ticks=function(T){var E=f();return n(E[0],E[E.length-1],T??10)},d.tickFormat=function(T,E){return E==null?A:u(E)},d.nice=function(T){var E=f();return(!T||typeof T.range!="function")&&(T=e(E[0],E[E.length-1],T??10)),T?f(kie(E,T)):d},d.copy=function(){return Wb(d,ZO(n,e,r,i,o,s,a,l,c,u))},d}function NLe(){return Ra.apply(ZO(ARe,TRe,Qu,GO,B3,Ub,UO,VO,mp,Iie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jLe(){return Ra.apply(ZO(CRe,_Re,ed,YO,H3,$3,KO,WO,mp,Rie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function q3(){var n=0,e=1,r,i,o,s,a=So,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:a(o===0?.5:(h=(s(h)-r)*o,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([n,e]=h,r=s(n=+n),i=s(e=+e),o=r===i?0:1/(i-r),u):[n,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(a=h,u):a};function d(h){return function(f){var m,v;return arguments.length?([m,v]=f,a=h(m,v),u):[a(0),a(1)]}}return u.range=d(Hg),u.rangeRound=d(mO),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return s=h,r=h(n),i=h(e),o=r===i?0:1/(i-r),u}}function df(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Lie(){var n=uf(q3()(So));return n.copy=function(){return df(n,Lie())},gd.apply(n,arguments)}function zie(){var n=FO(q3()).domain([1,10]);return n.copy=function(){return df(n,zie()).base(n.base())},gd.apply(n,arguments)}function Fie(){var n=$O(q3());return n.copy=function(){return df(n,Fie()).constant(n.constant())},gd.apply(n,arguments)}function XO(){var n=BO(q3());return n.copy=function(){return df(n,XO()).exponent(n.exponent())},gd.apply(n,arguments)}function OLe(){return XO.apply(null,arguments).exponent(.5)}function $ie(){var n=[],e=So;function r(i){if(i!=null&&!isNaN(i=+i))return e(($b(n,i,1)-1)/(n.length-1))}return r.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let o of i)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(Fh),r},r.interpolator=function(i){return arguments.length?(e=i,r):e},r.range=function(){return n.map((i,o)=>e(o/(n.length-1)))},r.quantiles=function(i){return Array.from({length:i+1},(o,s)=>hEe(n,s/i))},r.copy=function(){return $ie(e).domain(n)},gd.apply(r,arguments)}function V3(){var n=0,e=.5,r=1,i=1,o,s,a,l,c,u=So,d,h=!1,f;function m(x){return isNaN(x=+x)?f:(x=.5+((x=+d(x))-s)*(i*x<i*s?l:c),u(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([n,e,r]=x,o=d(n=+n),s=d(e=+e),a=d(r=+r),l=o===s?0:.5/(s-o),c=s===a?0:.5/(a-s),i=s<o?-1:1,m):[n,e,r]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(u=x,m):u};function v(x){return function(b){var w,S,_;return arguments.length?([w,S,_]=b,u=R9e(x,[w,S,_]),m):[u(0),u(.5),u(1)]}}return m.range=v(Hg),m.rangeRound=v(mO),m.unknown=function(x){return arguments.length?(f=x,m):f},function(x){return d=x,o=x(n),s=x(e),a=x(r),l=o===s?0:.5/(s-o),c=s===a?0:.5/(a-s),i=s<o?-1:1,m}}function Bie(){var n=uf(V3()(So));return n.copy=function(){return df(n,Bie())},gd.apply(n,arguments)}function Hie(){var n=FO(V3()).domain([.1,1,10]);return n.copy=function(){return df(n,Hie()).base(n.base())},gd.apply(n,arguments)}function qie(){var n=$O(V3());return n.copy=function(){return df(n,qie()).constant(n.constant())},gd.apply(n,arguments)}function JO(){var n=BO(V3());return n.copy=function(){return df(n,JO()).exponent(n.exponent())},gd.apply(n,arguments)}function DLe(){return JO.apply(null,arguments).exponent(.5)}function ILe(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const RLe=ILe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function LLe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var zLe=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;LLe(zLe);function FM(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function FLe(n){if(Array.isArray(n))return n}function $Le(n){if(Array.isArray(n))return FM(n)}function ZV(n,e,r){if(Vie())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function Bx(n,e,r){return(e=ULe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Vie(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vie=function(){return!!n})()}function BLe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function HLe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function qLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XV(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function l0(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XV(Object(r),!0).forEach(function(i){Bx(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):XV(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Kv(n,e){return FLe(n)||HLe(n,e)||Wie(n,e)||qLe()}function ga(n){return $Le(n)||BLe(n)||Wie(n)||VLe()}function WLe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ULe(n){var e=WLe(n,"string");return typeof e=="symbol"?e:e+""}function $M(n){"@babel/helpers - typeof";return $M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$M(n)}function Wie(n,e){if(n){if(typeof n=="string")return FM(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FM(n,e):void 0}}var KLe=z3(RLe);function JV(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=KLe(e(i))})}function GLe(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(m){throw"Invalid DAG structure! Found cycle in node path: ".concat(m.join(" -> "),".")}:l,u={};r.forEach(function(m){return u[e(m)]={data:m,out:[],depth:-1,skip:!a(m)}}),i.forEach(function(m){var v=m.source,x=m.target,b=P(v),w=P(x);if(!u.hasOwnProperty(b))throw"Missing source node with id: ".concat(b);if(!u.hasOwnProperty(w))throw"Missing target node with id: ".concat(w);var S=u[b],_=u[w];S.out.push(_);function P(A){return $M(A)==="object"?e(A):A}});var d=[];f(Object.values(u));var h=Object.assign.apply(Object,[{}].concat(ga(Object.entries(u).filter(function(m){var v=Kv(m,2),x=v[1];return!x.skip}).map(function(m){var v=Kv(m,2),x=v[0],b=v[1];return Bx({},x,b.depth)}))));return h;function f(m){for(var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=function(){var P=m[w];if(v.indexOf(P)!==-1){var A=[].concat(ga(v.slice(v.indexOf(P))),[P]).map(function(T){return e(T.data)});return d.some(function(T){return T.length===A.length&&T.every(function(E,L){return E===A[L]})})||(d.push(A),c(A)),1}x>P.depth&&(P.depth=x,f(P.out,[].concat(ga(v),[P]),x+(P.skip?0:1)))},w=0,S=m.length;w<S;w++)b()}}var YLe=2,Zi=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},QV=function(e,r){if(!r.isShadow){var i=kn(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var s=Math.round(Math.abs(i(o)));s?o.__photons=ga(Array(s)).map(function(){return{}}):delete o.__photons})}},w5=TO({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,QV(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Zi},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Zi},nodeColor:{default:"color",triggerUpdate:!1,onChange:Zi},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Zi},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Zi},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Zi},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Zi},linkColor:{default:"color",triggerUpdate:!1,onChange:Zi},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Zi},linkWidth:{default:1,triggerUpdate:!1,onChange:Zi},linkCurvature:{default:0,triggerUpdate:!1,onChange:Zi},linkCanvasObject:{triggerUpdate:!1,onChange:Zi},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Zi},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Zi},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Zi},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Zi},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:QV},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),o(),!e.isShadow&&s(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=kn(e.nodeVisibility),c=kn(e.nodeVal),u=kn(e.nodeColor),d=kn(e.nodeCanvasObjectMode),h=e.ctx,f=e.isShadow/e.globalScale,m=e.graphData.nodes.filter(l);h.save(),m.forEach(function(v){var x=d(v);if(e.nodeCanvasObject&&(x==="before"||x==="replace")&&(e.nodeCanvasObject(v,h,e.globalScale),x==="replace")){h.restore();return}var b=Math.sqrt(Math.max(0,c(v)||1))*e.nodeRelSize+f;h.beginPath(),h.arc(v.x,v.y,b,0,2*Math.PI,!1),h.fillStyle=u(v)||"rgba(31, 120, 180, 0.92)",h.fill(),e.nodeCanvasObject&&x==="after"&&e.nodeCanvasObject(v,e.ctx,e.globalScale)}),h.restore()}function o(){var l=kn(e.linkVisibility),c=kn(e.linkColor),u=kn(e.linkWidth),d=kn(e.linkLineDash),h=kn(e.linkCurvature),f=kn(e.linkCanvasObjectMode),m=e.ctx,v=e.isShadow*2,x=e.graphData.links.filter(l);x.forEach(T);var b=[],w=[],S=x;if(e.linkCanvasObject){var _=[],P=[];x.forEach(function(E){return({before:b,after:w,replace:_}[f(E)]||P).push(E)}),S=[].concat(ga(b),w,P),b=b.concat(_)}m.save(),b.forEach(function(E){return e.linkCanvasObject(E,m,e.globalScale)}),m.restore();var A=VIe(S,[c,u,d]);m.save(),Object.entries(A).forEach(function(E){var L=Kv(E,2),$=L[0],z=L[1],B=!$||$==="undefined"?"rgba(0,0,0,0.15)":$;Object.entries(z).forEach(function(D){var Y=Kv(D,2),I=Y[0],U=Y[1],Z=(I||1)/e.globalScale+v;Object.entries(U).forEach(function(te){var J=Kv(te,2);J[0];var oe=J[1],q=d(oe[0]);m.beginPath(),oe.forEach(function(G){var re=G.source,V=G.target;if(!(!re||!V||!re.hasOwnProperty("x")||!V.hasOwnProperty("x"))){m.moveTo(re.x,re.y);var ve=G.__controlPoints;ve?m[ve.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(m,ga(ve).concat([V.x,V.y])):m.lineTo(V.x,V.y)}}),m.strokeStyle=B,m.lineWidth=Z,m.setLineDash(q||[]),m.stroke()})})}),m.restore(),m.save(),w.forEach(function(E){return e.linkCanvasObject(E,m,e.globalScale)}),m.restore();function T(E){var L=h(E);if(!L){E.__controlPoints=null;return}var $=E.source,z=E.target;if(!(!$||!z||!$.hasOwnProperty("x")||!z.hasOwnProperty("x"))){var B=Math.sqrt(Math.pow(z.x-$.x,2)+Math.pow(z.y-$.y,2));if(B>0){var D=Math.atan2(z.y-$.y,z.x-$.x),Y=B*L,I={x:($.x+z.x)/2+Y*Math.cos(D-Math.PI/2),y:($.y+z.y)/2+Y*Math.sin(D-Math.PI/2)};E.__controlPoints=[I.x,I.y]}else{var U=L*70;E.__controlPoints=[z.x,z.y-U,z.x+U,z.y]}}}}function s(){var l=1.6,c=.2,u=kn(e.linkDirectionalArrowLength),d=kn(e.linkDirectionalArrowRelPos),h=kn(e.linkVisibility),f=kn(e.linkDirectionalArrowColor||e.linkColor),m=kn(e.nodeVal),v=e.ctx;v.save(),e.graphData.links.filter(h).forEach(function(x){var b=u(x);if(!(!b||b<0)){var w=x.source,S=x.target;if(!(!w||!S||!w.hasOwnProperty("x")||!S.hasOwnProperty("x"))){var _=Math.sqrt(Math.max(0,m(w)||1))*e.nodeRelSize,P=Math.sqrt(Math.max(0,m(S)||1))*e.nodeRelSize,A=Math.min(1,Math.max(0,d(x))),T=f(x)||"rgba(0,0,0,0.28)",E=b/l/2,L=x.__controlPoints&&ZV(rr,[w.x,w.y].concat(ga(x.__controlPoints),[S.x,S.y])),$=L?function(Z){return L.get(Z)}:function(Z){return{x:w.x+(S.x-w.x)*Z||0,y:w.y+(S.y-w.y)*Z||0}},z=L?L.length():Math.sqrt(Math.pow(S.x-w.x,2)+Math.pow(S.y-w.y,2)),B=_+b+(z-_-P-b)*A,D=$(B/z),Y=$((B-b)/z),I=$((B-b*(1-c))/z),U=Math.atan2(D.y-Y.y,D.x-Y.x)-Math.PI/2;v.beginPath(),v.moveTo(D.x,D.y),v.lineTo(Y.x+E*Math.cos(U),Y.y+E*Math.sin(U)),v.lineTo(I.x,I.y),v.lineTo(Y.x-E*Math.cos(U),Y.y-E*Math.sin(U)),v.fillStyle=T,v.fill()}}}),v.restore()}function a(){var l=kn(e.linkDirectionalParticles),c=kn(e.linkDirectionalParticleSpeed),u=kn(e.linkDirectionalParticleOffset),d=kn(e.linkDirectionalParticleWidth),h=kn(e.linkVisibility),f=kn(e.linkDirectionalParticleColor||e.linkColor),m=e.ctx;m.save(),e.graphData.links.filter(h).forEach(function(v){var x=l(v);if(!(!v.hasOwnProperty("__photons")||!v.__photons.length)){var b=v.source,w=v.target;if(!(!b||!w||!b.hasOwnProperty("x")||!w.hasOwnProperty("x"))){var S=c(v),_=Math.abs(u(v)),P=v.__photons||[],A=Math.max(0,d(v)/2)/Math.sqrt(e.globalScale),T=f(v)||"rgba(0,0,0,0.28)";m.fillStyle=T;var E=v.__controlPoints?ZV(rr,[b.x,b.y].concat(ga(v.__controlPoints),[w.x,w.y])):null,L=0,$=!1;P.forEach(function(z){var B=!!z.__singleHop;if(z.hasOwnProperty("__progressRatio")||(z.__progressRatio=B?0:(L+_)/x),!B&&L++,z.__progressRatio+=S,z.__progressRatio>=1)if(!B)z.__progressRatio=z.__progressRatio%1;else{$=!0;return}var D=z.__progressRatio,Y=E?E.get(D):{x:b.x+(w.x-b.x)*D||0,y:b.y+(w.y-b.y)*D||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(Y.x,Y.y,v,m,e.globalScale):(m.beginPath(),m.arc(Y.x,Y.y,A,0,2*Math.PI,!1),m.fill())}),$&&(v.__photons=v.__photons.filter(function(z){return!z.__singleHop||z.__progressRatio<=1}))}}}),m.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:kIe().force("link",pIe()).force("charge",SIe()).force("center",gDe()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&JV(e.graphData.nodes,kn(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&JV(e.graphData.links,kn(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(f){f.source=f[e.linkSource],f.target=f[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(f){return f[e.nodeId]}).links(e.graphData.links);var o=e.dagMode&&GLe(e.graphData,function(f){return f[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),s=Math.max.apply(Math,ga(Object.values(o||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(s||1)*YLe*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return delete f[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(m){return(o[m[e.nodeId]]-s/2)*a*(c?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return f[d]=u(f)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?CIe(function(f){var m=o[f[e.nodeId]]||-1;return(e.dagMode==="radialin"?s-m:m)*a}).strength(function(f){return e.dagNodeFilter(f)?1:0}):null);for(var h=0;h<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);h++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Uie(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(s){return{default:i[s](),onChange:function(l,c){r.forEach(function(u){return c[u][s](l)})},triggerUpdate:!1}},linkMethod:function(s){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=[];return r.forEach(function(h){var f=a[h],m=f[s].apply(f,c);m!==f&&d.push(m)}),d.length?d[0]:this}}}}var ZLe=800,XLe=4,JLe=5,Kie=Uie("forceGraph",w5),QLe=Uie(["forceGraph","shadowGraph"],w5),eze=Object.assign.apply(Object,ga(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Bx({},n,Kie.linkProp(n))})).concat(ga(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return Bx({},n,QLe.linkProp(n))})))),tze=Object.assign.apply(Object,ga(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Bx({},n,Kie.linkMethod(n))})));function PA(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(s){s.style.width="".concat(n.width,"px"),s.style.height="".concat(n.height,"px"),s.width=n.width*i,s.height=n.height*i,!e&&!r&&s.getContext("2d").scale(i,i)});var o=nc(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/o,(n.height-r)/2/o),n.needsRedraw=!0}}function Gie(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function eW(n,e,r){n.save(),Gie(n),n.clearRect(0,0,e,r),n.restore()}var nze=TO({props:l0({width:{default:window.innerWidth,onChange:function(e,r){return PA(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return PA(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(o){return(o||[]).every(function(s){return!s.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(o){var s=o.type,a=o.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:s,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},eze),aliases:{stopAnimation:"pauseAnimation"},methods:l0({graph2ScreenCoords:function(e,r,i){var o=nc(e.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(e,r,i){var o=nc(e.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(e,r,i,o){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var s=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?e.tweenGroup.add(new eV(a()).to(s,o).easing(jp.Quadratic.Out).onUpdate(l).start()):l(s),this}return a();function a(){var c=nc(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,d=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?a().x:u,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new eV({k:o()}).to({k:r},i).easing(jp.Quadratic.Out).onUpdate(function(a){var l=a.k;return s(l)}).start()):s(r),this;return o();function o(){return nc(e.canvas).k}function s(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,s);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(u,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=kn(e.nodeVal),o=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},s=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:o(a)}});return s.length?{x:[c5(s,function(a){return a.x-a.r}),l5(s,function(a){return a.x+a.r})],y:[c5(s,function(a){return a.y-a.r}),l5(s,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},tze),stateInit:function(){return{lastSetZoom:1,zoom:eEe(),forceGraph:new w5,shadowGraph:new w5().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new GOe,tweenGroup:new Vre}},init:function(e,r){var i=this;e.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",e.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var s=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var h=null,f=window.devicePixelRatio,m=l.x>0&&l.y>0?a.getImageData(l.x*f,l.y*f,1,1):null;return m&&(h=r.colorTracker.lookup(m.data)),h};ma(r.canvas).call(o9e().subject(function(){if(!r.enableNodeDrag)return null;var d=c();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var h=d.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},d.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var h=d.subject,f=h.__initialDragPos,m=d,v=nc(r.canvas).k,x={x:f.x+(m.x-f.x)/v-h.x,y:f.y+(m.y-f.y)/v-h.y};["x","y"].forEach(function(b){return h["f".concat(b)]=h[b]=f[b]+(m[b]-f[b])/v}),!(!h.__dragged&&JLe>=Math.sqrt(mEe(["x","y"].map(function(b){return Math.pow(d[b]-f[b],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,x))}).on("end",function(d){var h=d.subject,f=h.__initialDragPos,m={x:h.x-f.x,y:h.y-f.y};f.fx===void 0&&(h.fx=void 0),f.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,m))})),r.zoom(r.zoom.__baseElem=ma(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||kn(r.enableZoomInteraction)(d))&&(d.type==="wheel"||kn(r.enablePanInteraction)(d))}).on("zoom",function(d){var h=d.transform;[s,a].forEach(function(f){Gie(f),f.translate(h.x,h.y),f.scale(h.k,h.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(l0(l0({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(l0(l0({},d.transform),i.centerAt()))}),PA(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){nc(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=XLe/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new mDe(o),["pointermove","pointerdown"].forEach(function(d){return o.addEventListener(d,function(h){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(v){return Math.abs(v)>1}))&&(r.isPointerDragging=!0);var f=m(o);l.x=h.pageX-f.left,l.y=h.pageY-f.top;function m(v){var x=v.getBoundingClientRect(),b=window.pageXOffset||document.documentElement.scrollLeft,w=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+w,left:x.left+b}}},{passive:!0})}),o.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var f=r["on".concat(r.hoverObj.type,"Click")];f&&f.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(d.button===2)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"RightClick")];m&&m.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})}},{passive:!0}),o.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(s),r.shadowGraph(a);var u=qb(function(){eW(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return kn(r.linkWidth)(h)+r.linkHoverPrecision});var d=nc(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},ZLe);r.flushShadowCanvas=u.flush,(this._animationCycle=function d(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(_){return _.__photons&&_.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var f=r.isPointerDragging?null:c();if(f!==r.hoverObj){var m=r.hoverObj,v=m?m.type:null,x=f?f.type:null;if(v&&v!==x){var b=r["on".concat(v,"Hover")];b&&b(null,m.d)}if(x){var w=r["on".concat(x,"Hover")];w&&w(f.d,v===x?m.d:null)}r.tooltip.content(f&&kn(r["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),r.canvas.classList[(f&&r["on".concat(x,"Click")]||!f&&r.onBackgroundClick)&&kn(r.showPointerCursor)(f?.d)?"add":"remove"]("clickable"),r.hoverObj=f}h&&u()}if(h){eW(s,r.width,r.height);var S=nc(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(s,S),r.forceGraph.globalScale(S).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(s,S)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(e){}}),MA={exports:{}},EA,tW;function rze(){if(tW)return EA;tW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return EA=n,EA}var NA,nW;function ize(){if(nW)return NA;nW=1;var n=rze();function e(){}function r(){}return r.resetWarningCache=e,NA=function(){function i(a,l,c,u,d,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}i.isRequired=i;function o(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:e};return s.PropTypes=s,s},NA}var rW;function oze(){return rW||(rW=1,MA.exports=ize()()),MA.exports}var sze=oze();const ue=Ia(sze),W3={width:ue.number,height:ue.number,graphData:ue.shape({nodes:ue.arrayOf(ue.object).isRequired,links:ue.arrayOf(ue.object).isRequired}),backgroundColor:ue.string,nodeRelSize:ue.number,nodeId:ue.string,nodeLabel:ue.oneOfType([ue.string,ue.func]),nodeVal:ue.oneOfType([ue.number,ue.string,ue.func]),nodeVisibility:ue.oneOfType([ue.bool,ue.string,ue.func]),nodeColor:ue.oneOfType([ue.string,ue.func]),nodeAutoColorBy:ue.oneOfType([ue.string,ue.func]),onNodeHover:ue.func,onNodeClick:ue.func,linkSource:ue.string,linkTarget:ue.string,linkLabel:ue.oneOfType([ue.string,ue.func]),linkVisibility:ue.oneOfType([ue.bool,ue.string,ue.func]),linkColor:ue.oneOfType([ue.string,ue.func]),linkAutoColorBy:ue.oneOfType([ue.string,ue.func]),linkWidth:ue.oneOfType([ue.number,ue.string,ue.func]),linkCurvature:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalArrowLength:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalArrowColor:ue.oneOfType([ue.string,ue.func]),linkDirectionalArrowRelPos:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticles:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleSpeed:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleOffset:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleWidth:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleColor:ue.oneOfType([ue.string,ue.func]),onLinkHover:ue.func,onLinkClick:ue.func,dagMode:ue.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ue.number,dagNodeFilter:ue.func,onDagError:ue.func,d3AlphaMin:ue.number,d3AlphaDecay:ue.number,d3VelocityDecay:ue.number,warmupTicks:ue.number,cooldownTicks:ue.number,cooldownTime:ue.number,onEngineTick:ue.func,onEngineStop:ue.func,getGraphBbox:ue.func},Yie={zoomToFit:ue.func,onNodeRightClick:ue.func,onNodeDrag:ue.func,onNodeDragEnd:ue.func,onLinkRightClick:ue.func,linkHoverPrecision:ue.number,onBackgroundClick:ue.func,onBackgroundRightClick:ue.func,showPointerCursor:ue.oneOfType([ue.bool,ue.func]),enablePointerInteraction:ue.bool,enableNodeDrag:ue.bool},QO={showNavInfo:ue.bool,nodeOpacity:ue.number,nodeResolution:ue.number,nodeThreeObject:ue.oneOfType([ue.object,ue.string,ue.func]),nodeThreeObjectExtend:ue.oneOfType([ue.bool,ue.string,ue.func]),nodePositionUpdate:ue.func,linkOpacity:ue.number,linkResolution:ue.number,linkCurveRotation:ue.oneOfType([ue.number,ue.string,ue.func]),linkMaterial:ue.oneOfType([ue.object,ue.string,ue.func]),linkThreeObject:ue.oneOfType([ue.object,ue.string,ue.func]),linkThreeObjectExtend:ue.oneOfType([ue.bool,ue.string,ue.func]),linkPositionUpdate:ue.func,linkDirectionalArrowResolution:ue.number,linkDirectionalParticleResolution:ue.number,linkDirectionalParticleThreeObject:ue.oneOfType([ue.object,ue.string,ue.func]),forceEngine:ue.oneOf(["d3","ngraph"]),ngraphPhysics:ue.object,numDimensions:ue.oneOf([1,2,3])},aze=Object.assign({},W3,Yie,{linkLineDash:ue.oneOfType([ue.arrayOf(ue.number),ue.string,ue.func]),nodeCanvasObjectMode:ue.oneOfType([ue.string,ue.func]),nodeCanvasObject:ue.func,nodePointerAreaPaint:ue.func,linkCanvasObjectMode:ue.oneOfType([ue.string,ue.func]),linkCanvasObject:ue.func,linkPointerAreaPaint:ue.func,linkDirectionalParticleCanvasObject:ue.func,autoPauseRedraw:ue.bool,minZoom:ue.number,maxZoom:ue.number,enableZoomInteraction:ue.oneOfType([ue.bool,ue.func]),enablePanInteraction:ue.oneOfType([ue.bool,ue.func]),onZoom:ue.func,onZoomEnd:ue.func,onRenderFramePre:ue.func,onRenderFramePost:ue.func});Object.assign({},W3,Yie,QO,{enableNavigationControls:ue.bool,controlType:ue.oneOf(["trackball","orbit","fly"]),rendererConfig:ue.object,extraRenderers:ue.arrayOf(ue.shape({render:ue.func.isRequired}))});Object.assign({},W3,QO,{nodeDesc:ue.oneOfType([ue.string,ue.func]),linkDesc:ue.oneOfType([ue.string,ue.func])});Object.assign({},W3,QO,{markerAttrs:ue.object,yOffset:ue.number,glScale:ue.number});const eD=yTe(nze,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});eD.displayName="ForceGraph2D";eD.propTypes=aze;function Zie(n){var e,r,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(r=Zie(n[e]))&&(i&&(i+=" "),i+=r)}else for(r in n)n[r]&&(i&&(i+=" "),i+=r);return i}function Vt(){for(var n,e,r=0,i="",o=arguments.length;r<o;r++)(n=arguments[r])&&(e=Zie(n))&&(i&&(i+=" "),i+=e);return i}var lze=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function tD(n){if(typeof n!="string")return!1;var e=lze;return e.includes(n)}var cze=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],uze=new Set(cze);function Xie(n){return typeof n!="string"?!1:uze.has(n)}function Jie(n){return typeof n=="string"&&n.startsWith("data-")}function Cl(n){if(typeof n!="object"||n===null)return{};var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Xie(r)||Jie(r))&&(e[r]=n[r]);return e}function U3(n){if(n==null)return null;if(M.isValidElement(n)&&typeof n.props=="object"&&n.props!==null){var e=n.props;return Cl(e)}return typeof n=="object"&&!Array.isArray(n)?Cl(n):null}function Ks(n){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Xie(r)||Jie(r)||tD(r))&&(e[r]=n[r]);return e}function dze(n){return n==null?null:M.isValidElement(n)?Ks(n.props):typeof n=="object"&&!Array.isArray(n)?Ks(n):null}var hze=["children","width","height","viewBox","className","style","title","desc"];function BM(){return BM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},BM.apply(null,arguments)}function fze(n,e){if(n==null)return{};var r,i,o=pze(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function pze(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var nD=M.forwardRef((n,e)=>{var{children:r,width:i,height:o,viewBox:s,className:a,style:l,title:c,desc:u}=n,d=fze(n,hze),h=s||{width:i,height:o,x:0,y:0},f=Vt("recharts-surface",a);return M.createElement("svg",BM({},Ks(d),{className:f,width:i,height:o,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),M.createElement("title",null,c),M.createElement("desc",null,u),r)}),mze=["children","className"];function HM(){return HM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},HM.apply(null,arguments)}function gze(n,e){if(n==null)return{};var r,i,o=yze(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function yze(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var Ec=M.forwardRef((n,e)=>{var{children:r,className:i}=n,o=gze(n,mze),s=Vt("recharts-layer",i);return M.createElement("g",HM({className:s},Ks(o),{ref:e}),r)}),rD=vQ(),Qie=M.createContext(null),vze=()=>M.useContext(Qie);function Gn(n){return function(){return n}}const eoe=Math.cos,k5=Math.sin,Ol=Math.sqrt,S5=Math.PI,K3=2*S5,qM=Math.PI,VM=2*qM,Jf=1e-6,xze=VM-Jf;function toe(n){this._+=n[0];for(let e=1,r=n.length;e<r;++e)this._+=arguments[e]+n[e]}function bze(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return toe;const r=10**e;return function(i){this._+=i[0];for(let o=1,s=i.length;o<s;++o)this._+=Math.round(arguments[o]*r)/r+i[o]}}class wze{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?toe:bze(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,i,o){this._append`Q${+e},${+r},${this._x1=+i},${this._y1=+o}`}bezierCurveTo(e,r,i,o,s,a){this._append`C${+e},${+r},${+i},${+o},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,i,o,s){if(e=+e,r=+r,i=+i,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=i-e,u=o-r,d=a-e,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Jf)if(!(Math.abs(h*c-u*d)>Jf)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=i-a,v=o-l,x=c*c+u*u,b=m*m+v*v,w=Math.sqrt(x),S=Math.sqrt(f),_=s*Math.tan((qM-Math.acos((x+f-b)/(2*w*S)))/2),P=_/S,A=_/w;Math.abs(P-1)>Jf&&this._append`L${e+P*d},${r+P*h}`,this._append`A${s},${s},0,0,${+(h*m>d*v)},${this._x1=e+A*c},${this._y1=r+A*u}`}}arc(e,r,i,o,s,a){if(e=+e,r=+r,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(o),c=i*Math.sin(o),u=e+l,d=r+c,h=1^a,f=a?o-s:s-o;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Jf||Math.abs(this._y1-d)>Jf)&&this._append`L${u},${d}`,i&&(f<0&&(f=f%VM+VM),f>xze?this._append`A${i},${i},0,1,${h},${e-l},${r-c}A${i},${i},0,1,${h},${this._x1=u},${this._y1=d}`:f>Jf&&this._append`A${i},${i},0,${+(f>=qM)},${h},${this._x1=e+i*Math.cos(s)},${this._y1=r+i*Math.sin(s)}`)}rect(e,r,i,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${i=+i}v${+o}h${-i}Z`}toString(){return this._}}function iD(n){let e=3;return n.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);e=i}return n},()=>new wze(e)}function oD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function noe(n){this._context=n}noe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function G3(n){return new noe(n)}function roe(n){return n[0]}function ioe(n){return n[1]}function ooe(n,e){var r=Gn(!0),i=null,o=G3,s=null,a=iD(l);n=typeof n=="function"?n:n===void 0?roe:Gn(n),e=typeof e=="function"?e:e===void 0?ioe:Gn(e);function l(c){var u,d=(c=oD(c)).length,h,f=!1,m;for(i==null&&(s=o(m=a())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+n(h,u,c),+e(h,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(n=typeof c=="function"?c:Gn(+c),l):n},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Gn(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Gn(!!c),l):r},l.curve=function(c){return arguments.length?(o=c,i!=null&&(s=o(i)),l):o},l.context=function(c){return arguments.length?(c==null?i=s=null:s=o(i=c),l):i},l}function ok(n,e,r){var i=null,o=Gn(!0),s=null,a=G3,l=null,c=iD(u);n=typeof n=="function"?n:n===void 0?roe:Gn(+n),e=typeof e=="function"?e:Gn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?ioe:Gn(+r);function u(h){var f,m,v,x=(h=oD(h)).length,b,w=!1,S,_=new Array(x),P=new Array(x);for(s==null&&(l=a(S=c())),f=0;f<=x;++f){if(!(f<x&&o(b=h[f],f,h))===w)if(w=!w)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(_[v],P[v]);l.lineEnd(),l.areaEnd()}w&&(_[f]=+n(b,f,h),P[f]=+e(b,f,h),l.point(i?+i(b,f,h):_[f],r?+r(b,f,h):P[f]))}if(S)return l=null,S+""||null}function d(){return ooe().defined(o).curve(a).context(s)}return u.x=function(h){return arguments.length?(n=typeof h=="function"?h:Gn(+h),i=null,u):n},u.x0=function(h){return arguments.length?(n=typeof h=="function"?h:Gn(+h),u):n},u.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:Gn(+h),u):i},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Gn(+h),r=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Gn(+h),u):e},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Gn(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(n).y(e)},u.lineY1=function(){return d().x(n).y(r)},u.lineX1=function(){return d().x(i).y(e)},u.defined=function(h){return arguments.length?(o=typeof h=="function"?h:Gn(!!h),u):o},u.curve=function(h){return arguments.length?(a=h,s!=null&&(l=a(s)),u):a},u.context=function(h){return arguments.length?(h==null?s=l=null:l=a(s=h),u):s},u}class soe{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function kze(n){return new soe(n,!0)}function Sze(n){return new soe(n,!1)}const sD={draw(n,e){const r=Ol(e/S5);n.moveTo(r,0),n.arc(0,0,r,0,K3)}},Cze={draw(n,e){const r=Ol(e/5)/2;n.moveTo(-3*r,-r),n.lineTo(-r,-r),n.lineTo(-r,-3*r),n.lineTo(r,-3*r),n.lineTo(r,-r),n.lineTo(3*r,-r),n.lineTo(3*r,r),n.lineTo(r,r),n.lineTo(r,3*r),n.lineTo(-r,3*r),n.lineTo(-r,r),n.lineTo(-3*r,r),n.closePath()}},aoe=Ol(1/3),_ze=aoe*2,Aze={draw(n,e){const r=Ol(e/_ze),i=r*aoe;n.moveTo(0,-r),n.lineTo(i,0),n.lineTo(0,r),n.lineTo(-i,0),n.closePath()}},Tze={draw(n,e){const r=Ol(e),i=-r/2;n.rect(i,i,r,r)}},Pze=.8908130915292852,loe=k5(S5/10)/k5(7*S5/10),Mze=k5(K3/10)*loe,Eze=-eoe(K3/10)*loe,Nze={draw(n,e){const r=Ol(e*Pze),i=Mze*r,o=Eze*r;n.moveTo(0,-r),n.lineTo(i,o);for(let s=1;s<5;++s){const a=K3*s/5,l=eoe(a),c=k5(a);n.lineTo(c*r,-l*r),n.lineTo(l*i-c*o,c*i+l*o)}n.closePath()}},jA=Ol(3),jze={draw(n,e){const r=-Ol(e/(jA*3));n.moveTo(0,r*2),n.lineTo(-jA*r,-r),n.lineTo(jA*r,-r),n.closePath()}},sa=-.5,aa=Ol(3)/2,WM=1/Ol(12),Oze=(WM/2+1)*3,Dze={draw(n,e){const r=Ol(e/Oze),i=r/2,o=r*WM,s=i,a=r*WM+r,l=-s,c=a;n.moveTo(i,o),n.lineTo(s,a),n.lineTo(l,c),n.lineTo(sa*i-aa*o,aa*i+sa*o),n.lineTo(sa*s-aa*a,aa*s+sa*a),n.lineTo(sa*l-aa*c,aa*l+sa*c),n.lineTo(sa*i+aa*o,sa*o-aa*i),n.lineTo(sa*s+aa*a,sa*a-aa*s),n.lineTo(sa*l+aa*c,sa*c-aa*l),n.closePath()}};function Ize(n,e){let r=null,i=iD(o);n=typeof n=="function"?n:Gn(n||sD),e=typeof e=="function"?e:Gn(e===void 0?64:+e);function o(){let s;if(r||(r=s=i()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return o.type=function(s){return arguments.length?(n=typeof s=="function"?s:Gn(s),o):n},o.size=function(s){return arguments.length?(e=typeof s=="function"?s:Gn(+s),o):e},o.context=function(s){return arguments.length?(r=s??null,o):r},o}function C5(){}function _5(n,e,r){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+r)/6)}function coe(n){this._context=n}coe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_5(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Rze(n){return new coe(n)}function uoe(n){this._context=n}uoe.prototype={areaStart:C5,areaEnd:C5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:_5(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Lze(n){return new uoe(n)}function doe(n){this._context=n}doe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+n)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:_5(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function zze(n){return new doe(n)}function hoe(n){this._context=n}hoe.prototype={areaStart:C5,areaEnd:C5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function Fze(n){return new hoe(n)}function iW(n){return n<0?-1:1}function oW(n,e,r){var i=n._x1-n._x0,o=e-n._x1,s=(n._y1-n._y0)/(i||o<0&&-0),a=(r-n._y1)/(o||i<0&&-0),l=(s*o+a*i)/(i+o);return(iW(s)+iW(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function sW(n,e){var r=n._x1-n._x0;return r?(3*(n._y1-n._y0)/r-e)/2:e}function OA(n,e,r){var i=n._x0,o=n._y0,s=n._x1,a=n._y1,l=(s-i)/3;n._context.bezierCurveTo(i+l,o+l*e,s-l,a-l*r,s,a)}function A5(n){this._context=n}A5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:OA(this,this._t0,sW(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var r=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,OA(this,sW(this,r=oW(this,n,e)),r);break;default:OA(this,this._t0,r=oW(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=r}}};function foe(n){this._context=new poe(n)}(foe.prototype=Object.create(A5.prototype)).point=function(n,e){A5.prototype.point.call(this,e,n)};function poe(n){this._context=n}poe.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,r,i,o,s){this._context.bezierCurveTo(e,n,i,r,s,o)}};function $ze(n){return new A5(n)}function Bze(n){return new foe(n)}function moe(n){this._context=n}moe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,r=n.length;if(r)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),r===2)this._context.lineTo(n[1],e[1]);else for(var i=aW(n),o=aW(e),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(i[0][s],o[0][s],i[1][s],o[1][s],n[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function aW(n){var e,r=n.length-1,i,o=new Array(r),s=new Array(r),a=new Array(r);for(o[0]=0,s[0]=2,a[0]=n[0]+2*n[1],e=1;e<r-1;++e)o[e]=1,s[e]=4,a[e]=4*n[e]+2*n[e+1];for(o[r-1]=2,s[r-1]=7,a[r-1]=8*n[r-1]+n[r],e=1;e<r;++e)i=o[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(o[r-1]=a[r-1]/s[r-1],e=r-2;e>=0;--e)o[e]=(a[e]-o[e+1])/s[e];for(s[r-1]=(n[r]+o[r-1])/2,e=0;e<r-1;++e)s[e]=2*n[e+1]-o[e+1];return[o,s]}function Hze(n){return new moe(n)}function Y3(n,e){this._context=n,this._t=e}Y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var r=this._x*(1-this._t)+n*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=n,this._y=e}};function qze(n){return new Y3(n,.5)}function Vze(n){return new Y3(n,0)}function Wze(n){return new Y3(n,1)}function nm(n,e){if((a=n.length)>1)for(var r=1,i,o,s=n[e[0]],a,l=s.length;r<a;++r)for(o=s,s=n[e[r]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(o[i][1])?o[i][0]:o[i][1]}function UM(n){for(var e=n.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Uze(n,e){return n[e]}function Kze(n){const e=[];return e.key=n,e}function Gze(){var n=Gn([]),e=UM,r=nm,i=Uze;function o(s){var a=Array.from(n.apply(this,arguments),Kze),l,c=a.length,u=-1,d;for(const h of s)for(l=0,++u;l<c;++l)(a[l][u]=[0,+i(h,a[l].key,u,s)]).data=h;for(l=0,d=oD(e(a));l<c;++l)a[d[l]].index=l;return r(a,d),a}return o.keys=function(s){return arguments.length?(n=typeof s=="function"?s:Gn(Array.from(s)),o):n},o.value=function(s){return arguments.length?(i=typeof s=="function"?s:Gn(+s),o):i},o.order=function(s){return arguments.length?(e=s==null?UM:typeof s=="function"?s:Gn(Array.from(s)),o):e},o.offset=function(s){return arguments.length?(r=s??nm,o):r},o}function Yze(n,e){if((i=n.length)>0){for(var r,i,o=0,s=n[0].length,a;o<s;++o){for(a=r=0;r<i;++r)a+=n[r][o][1]||0;if(a)for(r=0;r<i;++r)n[r][o][1]/=a}nm(n,e)}}function Zze(n,e){if((o=n.length)>0){for(var r=0,i=n[e[0]],o,s=i.length;r<s;++r){for(var a=0,l=0;a<o;++a)l+=n[a][r][1]||0;i[r][1]+=i[r][0]=-l/2}nm(n,e)}}function Xze(n,e){if(!(!((a=n.length)>0)||!((s=(o=n[e[0]]).length)>0))){for(var r=0,i=1,o,s,a;i<s;++i){for(var l=0,c=0,u=0;l<a;++l){for(var d=n[e[l]],h=d[i][1]||0,f=d[i-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var x=n[e[v]],b=x[i][1]||0,w=x[i-1][1]||0;m+=b-w}c+=h,u+=m*h}o[i-1][1]+=o[i-1][0]=r,c&&(r-=u/c)}o[i-1][1]+=o[i-1][0]=r,nm(n,e)}}var DA={},IA={},lW;function Jze(){return lW||(lW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}n.isUnsafeProperty=e})(IA)),IA}var RA={},cW;function goe(){return cW||(cW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}n.isDeepKey=e})(RA)),RA}var LA={},uW;function aD(){return uW||(uW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}n.toKey=e})(LA)),LA}var zA={},FA={},dW;function Qze(){return dW||(dW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const i=String(r);return i==="0"&&Object.is(Number(r),-0)?"-0":i}n.toString=e})(FA)),FA}var hW;function lD(){return hW||(hW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Qze(),r=aD();function i(o){if(Array.isArray(o))return o.map(r.toKey);if(typeof o=="symbol")return[o];o=e.toString(o);const s=[],a=o.length;if(a===0)return s;let l=0,c="",u="",d=!1;for(o.charCodeAt(0)===46&&(s.push(""),l++);l<a;){const h=o[l];u?h==="\\"&&l+1<a?(l++,c+=o[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,s.push(c),c=""):c+=h:h==="["?(d=!0,c&&(s.push(c),c="")):h==="."?c&&(s.push(c),c=""):c+=h,l++}return c&&s.push(c),s}n.toPath=i})(zA)),zA}var fW;function cD(){return fW||(fW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Jze(),r=goe(),i=aD(),o=lD();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,o.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return a(l,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function a(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||e.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}n.get=s})(DA)),DA}var $A,pW;function eFe(){return pW||(pW=1,$A=cD().get),$A}var tFe=eFe();const Z3=Ia(tFe);var nFe=4;function Nh(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nFe,r=10**e,i=Math.round(n*r)/r;return Object.is(i,-0)?0:i}function Pi(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return n.reduce((o,s,a)=>{var l=r[a-1];return typeof l=="string"?o+l+s:l!==void 0?o+Nh(l)+s:o+s},"")}var va=n=>n===0?0:n>0?1:-1,_l=n=>typeof n=="number"&&n!=+n,td=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,yt=n=>(typeof n=="number"||n instanceof Number)&&!_l(n),Nc=n=>yt(n)||typeof n=="string",rFe=0,Hx=n=>{var e=++rFe;return"".concat(n||"").concat(e)},Uh=function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!yt(e)&&typeof e!="string")return i;var s;if(td(e)){if(r==null)return i;var a=e.indexOf("%");s=r*parseFloat(e.slice(0,a))/100}else s=+e;return _l(s)&&(s=i),o&&r!=null&&s>r&&(s=r),s},yoe=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,r={},i=0;i<e;i++)if(!r[String(n[i])])r[String(n[i])]=!0;else return!0;return!1};function ac(n,e,r){return yt(n)&&yt(e)?Nh(n+r*(e-n)):e}function voe(n,e,r){if(!(!n||!n.length))return n.find(i=>i&&(typeof e=="function"?e(i):Z3(i,e))===r)}var Ii=n=>n===null||typeof n>"u",Kb=n=>Ii(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));function iFe(n){return n!=null}function Gb(){}var oFe=["type","size","sizeType"];function KM(){return KM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},KM.apply(null,arguments)}function mW(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function gW(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mW(Object(r),!0).forEach(function(i){sFe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):mW(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function sFe(n,e,r){return(e=aFe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function aFe(n){var e=lFe(n,"string");return typeof e=="symbol"?e:e+""}function lFe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cFe(n,e){if(n==null)return{};var r,i,o=uFe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function uFe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var xoe={symbolCircle:sD,symbolCross:Cze,symbolDiamond:Aze,symbolSquare:Tze,symbolStar:Nze,symbolTriangle:jze,symbolWye:Dze},dFe=Math.PI/180,hFe=n=>{var e="symbol".concat(Kb(n));return xoe[e]||sD},fFe=(n,e,r)=>{if(e==="area")return n;switch(r){case"cross":return 5*n*n/9;case"diamond":return .5*n*n/Math.sqrt(3);case"square":return n*n;case"star":{var i=18*dFe;return 1.25*n*n*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*n*n/4;case"wye":return(21-10*Math.sqrt(3))*n*n/8;default:return Math.PI*n*n/4}},pFe=(n,e)=>{xoe["symbol".concat(Kb(n))]=e},boe=n=>{var{type:e="circle",size:r=64,sizeType:i="area"}=n,o=cFe(n,oFe),s=gW(gW({},o),{},{type:e,size:r,sizeType:i}),a="circle";typeof e=="string"&&(a=e);var l=()=>{var f=hFe(a),m=Ize().type(f).size(fFe(r,i,a)),v=m();if(v!==null)return v},{className:c,cx:u,cy:d}=s,h=Ks(s);return yt(u)&&yt(d)&&yt(r)?M.createElement("path",KM({},h,{className:Vt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};boe.registerSymbol=pFe;var woe=n=>"radius"in n&&"startAngle"in n&&"endAngle"in n,uD=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var r=n;if(M.isValidElement(n)&&(r=n.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{tD(o)&&(i[o]=(s=>r[o](r,s)))}),i},mFe=(n,e,r)=>i=>(n(e,r,i),null),koe=(n,e,r)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var i=null;return Object.keys(n).forEach(o=>{var s=n[o];tD(o)&&typeof s=="function"&&(i||(i={}),i[o]=mFe(s,e,r))}),i};function yW(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function gFe(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(r),!0).forEach(function(i){yFe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):yW(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function yFe(n,e,r){return(e=vFe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function vFe(n){var e=xFe(n,"string");return typeof e=="symbol"?e:e+""}function xFe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lo(n,e){var r=gFe({},n),i=e,o=Object.keys(e),s=o.reduce((a,l)=>(a[l]===void 0&&i[l]!==void 0&&(a[l]=i[l]),a),r);return s}function T5(){return T5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},T5.apply(null,arguments)}function vW(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function bFe(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vW(Object(r),!0).forEach(function(i){wFe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):vW(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function wFe(n,e,r){return(e=kFe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function kFe(n){var e=SFe(n,"string");return typeof e=="symbol"?e:e+""}function SFe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ua=32,CFe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function _Fe(n){var{data:e,iconType:r,inactiveColor:i}=n,o=ua/2,s=ua/6,a=ua/3,l=e.inactive?i:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return M.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:o,x2:ua,y2:o,className:"recharts-legend-icon"})}if(c==="line")return M.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(ua,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(c==="rect")return M.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ua/8,"h").concat(ua,"v").concat(ua*3/4,"h").concat(-ua,"z"),className:"recharts-legend-icon"});if(M.isValidElement(e.legendIcon)){var d=bFe({},e);return delete d.legendIcon,M.cloneElement(e.legendIcon,d)}return M.createElement(boe,{fill:l,cx:o,cy:o,size:ua,sizeType:"diameter",type:c})}function AFe(n){var{payload:e,iconSize:r,layout:i,formatter:o,inactiveColor:s,iconType:a}=n,l={x:0,y:0,width:ua,height:ua},c={display:i==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,h)=>{var f=d.formatter||o,m=Vt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:d.inactive});if(d.type==="none")return null;var v=d.inactive?s:d.color,x=f?f(d.value,d,h):d.value;return M.createElement("li",T5({className:m,style:c,key:"legend-item-".concat(h)},koe(n,d,h)),M.createElement(nD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},M.createElement(_Fe,{data:d,iconType:a,inactiveColor:s})),M.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},x))})}var TFe=n=>{var e=Lo(n,CFe),{payload:r,layout:i,align:o}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return M.createElement("ul",{className:"recharts-default-legend",style:s},M.createElement(AFe,T5({},e,{payload:r})))},BA={},HA={},xW;function PFe(){return xW||(xW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r,i){const o=new Map;for(let s=0;s<r.length;s++){const a=r[s],l=i(a,s,r);o.has(l)||o.set(l,a)}return Array.from(o.values())}n.uniqBy=e})(HA)),HA}var qA={},bW;function MFe(){return bW||(bW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r,i){return function(...o){return r.apply(this,o.slice(0,i))}}n.ary=e})(qA)),qA}var VA={},wW;function Soe(){return wW||(wW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return r}n.identity=e})(VA)),VA}var WA={},UA={},KA={},kW;function EFe(){return kW||(kW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}n.isLength=e})(KA)),KA}var SW;function dD(){return SW||(SW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=EFe();function r(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}n.isArrayLike=r})(UA)),UA}var GA={},CW;function NFe(){return CW||(CW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}n.isObjectLike=e})(GA)),GA}var _W;function jFe(){return _W||(_W=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=dD(),r=NFe();function i(o){return r.isObjectLike(o)&&e.isArrayLike(o)}n.isArrayLikeObject=i})(WA)),WA}var YA={},ZA={},AW;function OFe(){return AW||(AW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=cD();function r(i){return function(o){return e.get(o,i)}}n.property=r})(ZA)),ZA}var XA={},JA={},QA={},eT={},TW;function Coe(){return TW||(TW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}n.isObject=e})(eT)),eT}var tT={},PW;function _oe(){return PW||(PW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}n.isPrimitive=e})(tT)),tT}var nT={},MW;function Aoe(){return MW||(MW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r,i){return r===i||Number.isNaN(r)&&Number.isNaN(i)}n.isEqualsSameValueZero=e})(nT)),nT}var EW;function DFe(){return EW||(EW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Coe(),r=_oe(),i=Aoe();function o(d,h,f){return typeof f!="function"?o(d,h,()=>{}):s(d,h,function m(v,x,b,w,S,_){const P=f(v,x,b,w,S,_);return P!==void 0?!!P:s(v,x,m,_)},new Map)}function s(d,h,f,m){if(h===d)return!0;switch(typeof h){case"object":return a(d,h,f,m);case"function":return Object.keys(h).length>0?s(d,{...h},f,m):i.isEqualsSameValueZero(d,h);default:return e.isObject(d)?typeof h=="string"?h==="":!0:i.isEqualsSameValueZero(d,h)}}function a(d,h,f,m){if(h==null)return!0;if(Array.isArray(h))return c(d,h,f,m);if(h instanceof Map)return l(d,h,f,m);if(h instanceof Set)return u(d,h,f,m);const v=Object.keys(h);if(d==null||r.isPrimitive(d))return v.length===0;if(v.length===0)return!0;if(m?.has(h))return m.get(h)===d;m?.set(h,d);try{for(let x=0;x<v.length;x++){const b=v[x];if(!r.isPrimitive(d)&&!(b in d)||h[b]===void 0&&d[b]!==void 0||h[b]===null&&d[b]!==null||!f(d[b],h[b],b,d,h,m))return!1}return!0}finally{m?.delete(h)}}function l(d,h,f,m){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[v,x]of h.entries()){const b=d.get(v);if(f(b,x,v,d,h,m)===!1)return!1}return!0}function c(d,h,f,m){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const v=new Set;for(let x=0;x<h.length;x++){const b=h[x];let w=!1;for(let S=0;S<d.length;S++){if(v.has(S))continue;const _=d[S];let P=!1;if(f(_,b,x,d,h,m)&&(P=!0),P){v.add(S),w=!0;break}}if(!w)return!1}return!0}function u(d,h,f,m){return h.size===0?!0:d instanceof Set?c([...d],[...h],f,m):!1}n.isMatchWith=o,n.isSetMatch=u})(QA)),QA}var NW;function Toe(){return NW||(NW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=DFe();function r(i,o){return e.isMatchWith(i,o,()=>{})}n.isMatch=r})(JA)),JA}var rT={},iT={},oT={},jW;function IFe(){return jW||(jW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(i=>Object.prototype.propertyIsEnumerable.call(r,i))}n.getSymbols=e})(oT)),oT}var sT={},OW;function hD(){return OW||(OW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}n.getTag=e})(sT)),sT}var aT={},DW;function Poe(){return DW||(DW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",i="[object Number]",o="[object Boolean]",s="[object Arguments]",a="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",v="[object Error]",x="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",S="[object Uint16Array]",_="[object Uint32Array]",P="[object BigUint64Array]",A="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",L="[object BigInt64Array]",$="[object Float32Array]",z="[object Float64Array]";n.argumentsTag=s,n.arrayBufferTag=f,n.arrayTag=d,n.bigInt64ArrayTag=L,n.bigUint64ArrayTag=P,n.booleanTag=o,n.dataViewTag=x,n.dateTag=l,n.errorTag=v,n.float32ArrayTag=$,n.float64ArrayTag=z,n.functionTag=h,n.int16ArrayTag=T,n.int32ArrayTag=E,n.int8ArrayTag=A,n.mapTag=c,n.numberTag=i,n.objectTag=m,n.regexpTag=e,n.setTag=u,n.stringTag=r,n.symbolTag=a,n.uint16ArrayTag=S,n.uint32ArrayTag=_,n.uint8ArrayTag=b,n.uint8ClampedArrayTag=w})(aT)),aT}var lT={},IW;function RFe(){return IW||(IW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}n.isTypedArray=e})(lT)),lT}var RW;function Moe(){return RW||(RW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=IFe(),r=hD(),i=Poe(),o=_oe(),s=RFe();function a(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,f,m=new Map,v=void 0){const x=v?.(d,h,f,m);if(x!==void 0)return x;if(o.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const b=new Array(d.length);m.set(d,b);for(let w=0;w<d.length;w++)b[w]=l(d[w],w,f,m,v);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;m.set(d,b);for(const[w,S]of d)b.set(w,l(S,w,f,m,v));return b}if(d instanceof Set){const b=new Set;m.set(d,b);for(const w of d)b.add(l(w,void 0,f,m,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,b);for(let w=0;w<d.length;w++)b[w]=l(d[w],w,f,m,v);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,b),c(b,d,f,m,v),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return m.set(d,b),c(b,d,f,m,v),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return m.set(d,b),c(b,d,f,m,v),b}if(d instanceof Error){const b=new d.constructor;return m.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,f,m,v),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return m.set(d,b),c(b,d,f,m,v),b}if(d instanceof Number){const b=new Number(d.valueOf());return m.set(d,b),c(b,d,f,m,v),b}if(d instanceof String){const b=new String(d.valueOf());return m.set(d,b),c(b,d,f,m,v),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return m.set(d,b),c(b,d,f,m,v),b}return d}function c(d,h,f=d,m,v){const x=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<x.length;b++){const w=x[b],S=Object.getOwnPropertyDescriptor(d,w);(S==null||S.writable)&&(d[w]=l(h[w],w,f,m,v))}}function u(d){switch(r.getTag(d)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=a,n.cloneDeepWithImpl=l,n.copyProperties=c})(iT)),iT}var LW;function LFe(){return LW||(LW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Moe();function r(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}n.cloneDeep=r})(rT)),rT}var zW;function zFe(){return zW||(zW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Toe(),r=LFe();function i(o){return o=r.cloneDeep(o),s=>e.isMatch(s,o)}n.matches=i})(XA)),XA}var cT={},uT={},dT={},FW;function FFe(){return FW||(FW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Moe(),r=hD(),i=Poe();function o(s,a){return e.cloneDeepWith(s,(l,c,u,d)=>{const h=a?.(l,c,u,d);if(h!==void 0)return h;if(typeof s=="object"){if(r.getTag(s)===i.objectTag&&typeof s.constructor!="function"){const f={};return d.set(s,f),e.copyProperties(f,s,u,d),f}switch(Object.prototype.toString.call(s)){case i.numberTag:case i.stringTag:case i.booleanTag:{const f=new s.constructor(s?.valueOf());return e.copyProperties(f,s),f}case i.argumentsTag:{const f={};return e.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}}})}n.cloneDeepWith=o})(dT)),dT}var $W;function $Fe(){return $W||($W=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=FFe();function r(i){return e.cloneDeepWith(i)}n.cloneDeep=r})(uT)),uT}var hT={},fT={},BW;function Eoe(){return BW||(BW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(i,o=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<o;case"symbol":return!1;case"string":return e.test(i)}}n.isIndex=r})(fT)),fT}var pT={},HW;function BFe(){return HW||(HW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=hD();function r(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}n.isArguments=r})(pT)),pT}var qW;function HFe(){return qW||(qW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=goe(),r=Eoe(),i=BFe(),o=lD();function s(a,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&a?.[l]==null?c=o.toPath(l):c=[l],c.length===0)return!1;let u=a;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||i.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}n.has=s})(hT)),hT}var VW;function qFe(){return VW||(VW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Toe(),r=aD(),i=$Fe(),o=cD(),s=HFe();function a(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=i.cloneDeep(c),function(u){const d=o.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}n.matchesProperty=a})(cT)),cT}var WW;function VFe(){return WW||(WW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Soe(),r=OFe(),i=zFe(),o=qFe();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?o.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return r.property(a)}}n.iteratee=s})(YA)),YA}var UW;function WFe(){return UW||(UW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=PFe(),r=MFe(),i=Soe(),o=jFe(),s=VFe();function a(l,c=i.identity){return o.isArrayLikeObject(l)?e.uniqBy(Array.from(l),r.ary(s.iteratee(c),1)):[]}n.uniqBy=a})(BA)),BA}var mT,KW;function UFe(){return KW||(KW=1,mT=WFe().uniqBy),mT}var KFe=UFe();const GW=Ia(KFe);function Noe(n,e,r){return e===!0?GW(n,r):typeof e=="function"?GW(n,e):n}var fD=M.createContext(null),GFe=n=>n,Ur=()=>{var n=M.useContext(fD);return n?n.store.dispatch:GFe},B4=()=>{},YFe=()=>B4,ZFe=(n,e)=>n===e;function Nt(n){var e=M.useContext(fD);return tee.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:YFe,e?e.store.getState:B4,e?e.store.getState:B4,e?n:B4,ZFe)}function XFe(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function JFe(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function QFe(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(r=>typeof r=="function")){const r=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${r}]`)}}var YW=n=>Array.isArray(n)?n:[n];function e$e(n){const e=Array.isArray(n[0])?n[0]:n;return QFe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function t$e(n,e){const r=[],{length:i}=n;for(let o=0;o<i;o++)r.push(n[o].apply(null,e));return r}var n$e=class{constructor(n){this.value=n}deref(){return this.value}},r$e=typeof WeakRef<"u"?WeakRef:n$e,i$e=0,ZW=1;function sk(){return{s:i$e,v:void 0,o:null,p:null}}function joe(n,e={}){let r=sk();const{resultEqualityCheck:i}=e;let o,s=0;function a(){let l=r;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const x=v.get(m);x===void 0?(l=sk(),v.set(m,l)):l=x}else{let v=l.p;v===null&&(l.p=v=new Map);const x=v.get(m);x===void 0?(l=sk(),v.set(m,l)):l=x}}const u=l;let d;if(l.s===ZW)d=l.v;else if(d=n.apply(null,arguments),s++,i){const h=o?.deref?.()??o;h!=null&&i(h,d)&&(d=h,s!==0&&s--),o=typeof d=="object"&&d!==null||typeof d=="function"?new r$e(d):d}return u.s=ZW,u.v=d,d}return a.clearCache=()=>{r=sk(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function o$e(n,...e){const r=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...o)=>{let s=0,a=0,l,c={},u=o.pop();typeof u=="object"&&(c=u,u=o.pop()),XFe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=joe,argsMemoizeOptions:v=[]}=d,x=YW(f),b=YW(v),w=e$e(o),S=h(function(){return s++,u.apply(null,arguments)},...x),_=m(function(){a++;const A=t$e(w,arguments);return l=S.apply(null,A),l},...b);return Object.assign(_,{resultFunc:u,memoizedResultFunc:S,dependencies:w,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:m})};return Object.assign(i,{withTypes:()=>i}),i}var Te=o$e(joe),s$e=Object.assign((n,e=Te)=>{JFe(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const r=Object.keys(n),i=r.map(s=>n[s]);return e(i,(...s)=>s.reduce((a,l,c)=>(a[r[c]]=l,a),{}))},{withTypes:()=>s$e}),gT={},yT={},vT={},XW;function a$e(){return XW||(XW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const r=(i,o,s)=>{if(i!==o){const a=e(i),l=e(o);if(a===l&&a===0){if(i<o)return s==="desc"?1:-1;if(i>o)return s==="desc"?-1:1}return s==="desc"?l-a:a-l}return 0};n.compareValues=r})(vT)),vT}var xT={},bT={},JW;function Ooe(){return JW||(JW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}n.isSymbol=e})(bT)),bT}var QW;function l$e(){return QW||(QW=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Ooe(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function o(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!r.test(s))||a!=null&&Object.hasOwn(a,s)}n.isKey=o})(xT)),xT}var eU;function c$e(){return eU||(eU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=a$e(),r=l$e(),i=lD();function o(s,a,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,v)=>{let x=m;for(let b=0;b<v.length&&x!=null;++b)x=x[v[b]];return x},d=(m,v)=>v==null||m==null?v:typeof m=="object"&&"key"in m?Object.hasOwn(v,m.key)?v[m.key]:u(v,m.path):typeof m=="function"?m(v):Array.isArray(m)?u(v,m):typeof v=="object"?v[m]:v,h=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:i.toPath(m)}));return s.map(m=>({original:m,criteria:h.map(v=>d(v,m))})).slice().sort((m,v)=>{for(let x=0;x<h.length;x++){const b=e.compareValues(m.criteria[x],v.criteria[x],l[x]);if(b!==0)return b}return 0}).map(m=>m.original)}n.orderBy=o})(yT)),yT}var wT={},tU;function u$e(){return tU||(tU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r,i=1){const o=[],s=Math.floor(i),a=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?a(d,c+1):o.push(d)}};return a(r,0),o}n.flatten=e})(wT)),wT}var kT={},nU;function Doe(){return nU||(nU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Eoe(),r=dD(),i=Coe(),o=Aoe();function s(a,l,c){return i.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?o.isEqualsSameValueZero(c[l],a):!1}n.isIterateeCall=s})(kT)),kT}var rU;function d$e(){return rU||(rU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=c$e(),r=u$e(),i=Doe();function o(s,...a){const l=a.length;return l>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:l>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,r.flatten(a),["asc"])}n.sortBy=o})(gT)),gT}var ST,iU;function h$e(){return iU||(iU=1,ST=d$e().sortBy),ST}var f$e=h$e();const X3=Ia(f$e);var Ioe=n=>n.legend.settings,p$e=n=>n.legend.size,m$e=n=>n.legend.payload,g$e=Te([m$e,Ioe],(n,e)=>{var{itemSorter:r}=e,i=n.flat(1);return r?X3(i,r):i});function y$e(){return Nt(g$e)}var ak=1;function Roe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=M.useState({height:0,left:0,top:0,width:0}),i=M.useCallback(o=>{if(o!=null){var s=o.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>ak||Math.abs(a.left-e.left)>ak||Math.abs(a.top-e.top)>ak||Math.abs(a.width-e.width)>ak)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,i]}function Ai(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var v$e=typeof Symbol=="function"&&Symbol.observable||"@@observable",oU=v$e,CT=()=>Math.random().toString(36).substring(7).split("").join("."),x$e={INIT:`@@redux/INIT${CT()}`,REPLACE:`@@redux/REPLACE${CT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${CT()}`},P5=x$e;function pD(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Loe(n,e,r){if(typeof n!="function")throw new Error(Ai(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ai(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ai(1));return r(Loe)(n,e)}let i=n,o=e,s=new Map,a=s,l=0,c=!1;function u(){a===s&&(a=new Map,s.forEach((b,w)=>{a.set(w,b)}))}function d(){if(c)throw new Error(Ai(3));return o}function h(b){if(typeof b!="function")throw new Error(Ai(4));if(c)throw new Error(Ai(5));let w=!0;u();const S=l++;return a.set(S,b),function(){if(w){if(c)throw new Error(Ai(6));w=!1,u(),a.delete(S),s=null}}}function f(b){if(!pD(b))throw new Error(Ai(7));if(typeof b.type>"u")throw new Error(Ai(8));if(typeof b.type!="string")throw new Error(Ai(17));if(c)throw new Error(Ai(9));try{c=!0,o=i(o,b)}finally{c=!1}return(s=a).forEach(S=>{S()}),b}function m(b){if(typeof b!="function")throw new Error(Ai(10));i=b,f({type:P5.REPLACE})}function v(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Ai(11));function S(){const P=w;P.next&&P.next(d())}return S(),{unsubscribe:b(S)}},[oU](){return this}}}return f({type:P5.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[oU]:v}}function b$e(n){Object.keys(n).forEach(e=>{const r=n[e];if(typeof r(void 0,{type:P5.INIT})>"u")throw new Error(Ai(12));if(typeof r(void 0,{type:P5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ai(13))})}function zoe(n){const e=Object.keys(n),r={};for(let s=0;s<e.length;s++){const a=e[s];typeof n[a]=="function"&&(r[a]=n[a])}const i=Object.keys(r);let o;try{b$e(r)}catch(s){o=s}return function(a={},l){if(o)throw o;let c=!1;const u={};for(let d=0;d<i.length;d++){const h=i[d],f=r[h],m=a[h],v=f(m,l);if(typeof v>"u")throw l&&l.type,new Error(Ai(14));u[h]=v,c=c||v!==m}return c=c||i.length!==Object.keys(a).length,c?u:a}}function M5(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,r)=>(...i)=>e(r(...i)))}function w$e(...n){return e=>(r,i)=>{const o=e(r,i);let s=()=>{throw new Error(Ai(15))};const a={getState:o.getState,dispatch:(c,...u)=>s(c,...u)},l=n.map(c=>c(a));return s=M5(...l)(o.dispatch),{...o,dispatch:s}}}function Foe(n){return pD(n)&&"type"in n&&typeof n.type=="string"}var $oe=Symbol.for("immer-nothing"),sU=Symbol.for("immer-draftable"),jo=Symbol.for("immer-state");function sl(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Fs=Object,yg=Fs.getPrototypeOf,E5="constructor",J3="prototype",GM="configurable",N5="enumerable",H4="writable",qx="value",nd=n=>!!n&&!!n[jo];function Al(n){return n?Boe(n)||e6(n)||!!n[sU]||!!n[E5]?.[sU]||t6(n)||n6(n):!1}var k$e=Fs[J3][E5].toString(),aU=new WeakMap;function Boe(n){if(!n||!mD(n))return!1;const e=yg(n);if(e===null||e===Fs[J3])return!0;const r=Fs.hasOwnProperty.call(e,E5)&&e[E5];if(r===Object)return!0;if(!v0(r))return!1;let i=aU.get(r);return i===void 0&&(i=Function.toString.call(r),aU.set(r,i)),i===k$e}function Q3(n,e,r=!0){Yb(n)===0?(r?Reflect.ownKeys(n):Fs.keys(n)).forEach(o=>{e(o,n[o],n)}):n.forEach((i,o)=>e(o,i,n))}function Yb(n){const e=n[jo];return e?e.type_:e6(n)?1:t6(n)?2:n6(n)?3:0}var lU=(n,e,r=Yb(n))=>r===2?n.has(e):Fs[J3].hasOwnProperty.call(n,e),YM=(n,e,r=Yb(n))=>r===2?n.get(e):n[e],j5=(n,e,r,i=Yb(n))=>{i===2?n.set(e,r):i===3?n.add(r):n[e]=r};function S$e(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var e6=Array.isArray,t6=n=>n instanceof Map,n6=n=>n instanceof Set,mD=n=>typeof n=="object",v0=n=>typeof n=="function",_T=n=>typeof n=="boolean";function C$e(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Cu=n=>n.copy_||n.base_,gD=n=>n.modified_?n.copy_:n.base_;function ZM(n,e){if(t6(n))return new Map(n);if(n6(n))return new Set(n);if(e6(n))return Array[J3].slice.call(n);const r=Boe(n);if(e===!0||e==="class_only"&&!r){const i=Fs.getOwnPropertyDescriptors(n);delete i[jo];let o=Reflect.ownKeys(i);for(let s=0;s<o.length;s++){const a=o[s],l=i[a];l[H4]===!1&&(l[H4]=!0,l[GM]=!0),(l.get||l.set)&&(i[a]={[GM]:!0,[H4]:!0,[N5]:l[N5],[qx]:n[a]})}return Fs.create(yg(n),i)}else{const i=yg(n);if(i!==null&&r)return{...n};const o=Fs.create(i);return Fs.assign(o,n)}}function yD(n,e=!1){return r6(n)||nd(n)||!Al(n)||(Yb(n)>1&&Fs.defineProperties(n,{set:lk,add:lk,clear:lk,delete:lk}),Fs.freeze(n),e&&Q3(n,(r,i)=>{yD(i,!0)},!1)),n}function _$e(){sl(2)}var lk={[qx]:_$e};function r6(n){return n===null||!mD(n)?!0:Fs.isFrozen(n)}var O5="MapSet",XM="Patches",cU="ArrayMethods",Hoe={};function rm(n){const e=Hoe[n];return e||sl(0,n),e}var uU=n=>!!Hoe[n],Vx,qoe=()=>Vx,A$e=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:uU(O5)?rm(O5):void 0,arrayMethodsPlugin_:uU(cU)?rm(cU):void 0});function dU(n,e){e&&(n.patchPlugin_=rm(XM),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function JM(n){QM(n),n.drafts_.forEach(T$e),n.drafts_=null}function QM(n){n===Vx&&(Vx=n.parent_)}var hU=n=>Vx=A$e(Vx,n);function T$e(n){const e=n[jo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function fU(n,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(n!==void 0&&n!==r){r[jo].modified_&&(JM(e),sl(4)),Al(n)&&(n=pU(e,n));const{patchPlugin_:o}=e;o&&o.generateReplacementPatches_(r[jo].base_,n,e)}else n=pU(e,r);return P$e(e,n,!0),JM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==$oe?n:void 0}function pU(n,e){if(r6(e))return e;const r=e[jo];if(!r)return D5(e,n.handledSet_,n);if(!i6(r,n))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:i}=r;if(i)for(;i.length>0;)i.pop()(n);Uoe(r,n)}return r.copy_}function P$e(n,e,r=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yD(e,r)}function Voe(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var i6=(n,e)=>n.scope_===e,M$e=[];function Woe(n,e,r,i){const o=Cu(n),s=n.type_;if(i!==void 0&&YM(o,i,s)===e){j5(o,i,r,s);return}if(!n.draftLocations_){const l=n.draftLocations_=new Map;Q3(o,(c,u)=>{if(nd(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const a=n.draftLocations_.get(e)??M$e;for(const l of a)j5(o,l,r,s)}function E$e(n,e,r){n.callbacks_.push(function(o){const s=e;if(!s||!i6(s,o))return;o.mapSetPlugin_?.fixSetContents(s);const a=gD(s);Woe(n,s.draft_??s,a,r),Uoe(s,o)})}function Uoe(n,e){if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(n.assigned_?.size??0)>0)){const{patchPlugin_:i}=e;if(i){const o=i.getPath(n);o&&i.generatePatches_(n,o,e)}Voe(n)}}function N$e(n,e,r){const{scope_:i}=n;if(nd(r)){const o=r[jo];i6(o,i)&&o.callbacks_.push(function(){q4(n);const a=gD(o);Woe(n,r,a,e)})}else Al(r)&&n.callbacks_.push(function(){const s=Cu(n);n.type_===3?s.has(r)&&D5(r,i.handledSet_,i):YM(s,e,n.type_)===r&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&D5(YM(n.copy_,e,n.type_),i.handledSet_,i)})}function D5(n,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||nd(n)||e.has(n)||!Al(n)||r6(n)||(e.add(n),Q3(n,(i,o)=>{if(nd(o)){const s=o[jo];if(i6(s,r)){const a=gD(s);j5(n,i,a,n.type_),Voe(s)}}else Al(o)&&D5(o,e,r)})),n}function j$e(n,e){const r=e6(n),i={type_:r?1:0,scope_:e?e.scope_:qoe(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let o=i,s=I5;r&&(o=[i],s=Wx);const{revoke:a,proxy:l}=Proxy.revocable(o,s);return i.draft_=l,i.revoke_=a,[l,i]}var I5={get(n,e){if(e===jo)return n;let r=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&r?.isArrayOperationMethod(e))return r.createMethodInterceptor(n,e);const o=Cu(n);if(!lU(o,e,n.type_))return O$e(n,o,e);const s=o[e];if(n.finalized_||!Al(s)||i&&n.operationMethod&&r?.isMutatingArrayMethod(n.operationMethod)&&C$e(e))return s;if(s===AT(n.base_,e)){q4(n);const a=n.type_===1?+e:e,l=tE(n.scope_,s,n,a);return n.copy_[a]=l}return s},has(n,e){return e in Cu(n)},ownKeys(n){return Reflect.ownKeys(Cu(n))},set(n,e,r){const i=Koe(Cu(n),e);if(i?.set)return i.set.call(n.draft_,r),!0;if(!n.modified_){const o=AT(Cu(n),e),s=o?.[jo];if(s&&s.base_===r)return n.copy_[e]=r,n.assigned_.set(e,!1),!0;if(S$e(r,o)&&(r!==void 0||lU(n.base_,e,n.type_)))return!0;q4(n),eE(n)}return n.copy_[e]===r&&(r!==void 0||e in n.copy_)||Number.isNaN(r)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=r,n.assigned_.set(e,!0),N$e(n,e,r)),!0},deleteProperty(n,e){return q4(n),AT(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),eE(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const r=Cu(n),i=Reflect.getOwnPropertyDescriptor(r,e);return i&&{[H4]:!0,[GM]:n.type_!==1||e!=="length",[N5]:i[N5],[qx]:r[e]}},defineProperty(){sl(11)},getPrototypeOf(n){return yg(n.base_)},setPrototypeOf(){sl(12)}},Wx={};for(let n in I5){let e=I5[n];Wx[n]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}Wx.deleteProperty=function(n,e){return Wx.set.call(this,n,e,void 0)};Wx.set=function(n,e,r){return I5.set.call(this,n[0],e,r,n[0])};function AT(n,e){const r=n[jo];return(r?Cu(r):n)[e]}function O$e(n,e,r){const i=Koe(e,r);return i?qx in i?i[qx]:i.get?.call(n.draft_):void 0}function Koe(n,e){if(!(e in n))return;let r=yg(n);for(;r;){const i=Object.getOwnPropertyDescriptor(r,e);if(i)return i;r=yg(r)}}function eE(n){n.modified_||(n.modified_=!0,n.parent_&&eE(n.parent_))}function q4(n){n.copy_||(n.assigned_=new Map,n.copy_=ZM(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var D$e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,i,o)=>{if(v0(r)&&!v0(i)){const a=i;i=r;const l=this;return function(u=a,...d){return l.produce(u,h=>i.call(this,h,...d))}}v0(i)||sl(6),o!==void 0&&!v0(o)&&sl(7);let s;if(Al(r)){const a=hU(this),l=tE(a,r,void 0);let c=!0;try{s=i(l),c=!1}finally{c?JM(a):QM(a)}return dU(a,o),fU(s,a)}else if(!r||!mD(r)){if(s=i(r),s===void 0&&(s=r),s===$oe&&(s=void 0),this.autoFreeze_&&yD(s,!0),o){const a=[],l=[];rm(XM).generateReplacementPatches_(r,s,{patches_:a,inversePatches_:l}),o(a,l)}return s}else sl(1,r)},this.produceWithPatches=(r,i)=>{if(v0(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let o,s;return[this.produce(r,i,(l,c)=>{o=l,s=c}),o,s]},_T(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),_T(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),_T(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Al(e)||sl(8),nd(e)&&(e=xl(e));const r=hU(this),i=tE(r,e,void 0);return i[jo].isManual_=!0,QM(r),i}finishDraft(e,r){const i=e&&e[jo];(!i||!i.isManual_)&&sl(9);const{scope_:o}=i;return dU(o,r),fU(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let i;for(i=r.length-1;i>=0;i--){const s=r[i];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}i>-1&&(r=r.slice(i+1));const o=rm(XM).applyPatches_;return nd(e)?o(e,r):this.produce(e,s=>o(s,r))}};function tE(n,e,r,i){const[o,s]=t6(e)?rm(O5).proxyMap_(e,r):n6(e)?rm(O5).proxySet_(e,r):j$e(e,r);return(r?.scope_??qoe()).drafts_.push(o),s.callbacks_=r?.callbacks_??[],s.key_=i,r&&i!==void 0?E$e(r,s,i):s.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),o}function xl(n){return nd(n)||sl(10,n),Goe(n)}function Goe(n){if(!Al(n)||r6(n))return n;const e=n[jo];let r,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=ZM(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else r=ZM(n,!0);return Q3(r,(o,s)=>{j5(r,o,Goe(s))},i),e&&(e.finalized_=!1),r}var I$e=new D$e,Yoe=I$e.produce;function Zoe(n){return({dispatch:r,getState:i})=>o=>s=>typeof s=="function"?s(r,i,n):o(s)}var R$e=Zoe(),L$e=Zoe,z$e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?M5:M5.apply(null,arguments)};function Pa(n,e){function r(...i){if(e){let o=e(...i);if(!o)throw new Error(Hs(0));return{type:n,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:n,payload:i[0]}}return r.toString=()=>`${n}`,r.type=n,r.match=i=>Foe(i)&&i.type===n,r}var Xoe=class Jy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Jy.prototype)}static get[Symbol.species](){return Jy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Jy(...e[0].concat(this)):new Jy(...e.concat(this))}};function mU(n){return Al(n)?Yoe(n,()=>{}):n}function ck(n,e,r){return n.has(e)?n.get(e):n.set(e,r(e)).get(e)}function F$e(n){return typeof n=="boolean"}var $$e=()=>function(e){const{thunk:r=!0,immutableCheck:i=!0,serializableCheck:o=!0,actionCreatorCheck:s=!0}=e??{};let a=new Xoe;return r&&(F$e(r)?a.push(R$e):a.push(L$e(r.extraArgument))),a},Joe="RTK_autoBatch",dr=()=>n=>({payload:n,meta:{[Joe]:!0}}),gU=n=>e=>{setTimeout(e,n)},Qoe=(n={type:"raf"})=>e=>(...r)=>{const i=e(...r);let o=!0,s=!1,a=!1;const l=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gU(10):n.type==="callback"?n.queueNotification:gU(n.timeout),u=()=>{a=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},i,{subscribe(d){const h=()=>o&&d(),f=i.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){try{return o=!d?.meta?.[Joe],s=!o,s&&(a||(a=!0,c(u))),i.dispatch(d)}finally{o=!0}}})},B$e=n=>function(r){const{autoBatch:i=!0}=r??{};let o=new Xoe(n);return i&&o.push(Qoe(typeof i=="object"?i:void 0)),o};function H$e(n){const e=$$e(),{reducer:r=void 0,middleware:i,devTools:o=!0,preloadedState:s=void 0,enhancers:a=void 0}=n||{};let l;if(typeof r=="function")l=r;else if(pD(r))l=zoe(r);else throw new Error(Hs(1));let c;typeof i=="function"?c=i(e):c=e();let u=M5;o&&(u=z$e({trace:!1,...typeof o=="object"&&o}));const d=w$e(...c),h=B$e(d);let f=typeof a=="function"?a(h):h();const m=u(...f);return Loe(l,s,m)}function ese(n){const e={},r=[];let i;const o={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Hs(28));if(l in e)throw new Error(Hs(29));return e[l]=a,o},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&r.push({matcher:s.settled,reducer:a.settled}),o},addMatcher(s,a){return r.push({matcher:s,reducer:a}),o},addDefaultCase(s){return i=s,o}};return n(o),[e,r,i]}function q$e(n){return typeof n=="function"}function V$e(n,e){let[r,i,o]=ese(e),s;if(q$e(n))s=()=>mU(n());else{const l=mU(n);s=()=>l}function a(l=s(),c){let u=[r[c.type],...i.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[o]),u.reduce((d,h)=>{if(h)if(nd(d)){const m=h(d,c);return m===void 0?d:m}else{if(Al(d))return Yoe(d,f=>h(f,c));{const f=h(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return a.getInitialState=s,a}var W$e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",U$e=(n=21)=>{let e="",r=n;for(;r--;)e+=W$e[Math.random()*64|0];return e},K$e=Symbol.for("rtk-slice-createasyncthunk");function G$e(n,e){return`${n}/${e}`}function Y$e({creators:n}={}){const e=n?.asyncThunk?.[K$e];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Hs(11));const a=(typeof i.reducers=="function"?i.reducers(X$e()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(_,P){const A=typeof _=="string"?_:_.type;if(!A)throw new Error(Hs(12));if(A in c.sliceCaseReducersByType)throw new Error(Hs(13));return c.sliceCaseReducersByType[A]=P,u},addMatcher(_,P){return c.sliceMatchers.push({matcher:_,reducer:P}),u},exposeAction(_,P){return c.actionCreators[_]=P,u},exposeCaseReducer(_,P){return c.sliceCaseReducersByName[_]=P,u}};l.forEach(_=>{const P=a[_],A={reducerName:_,type:G$e(o,_),createNotation:typeof i.reducers=="function"};Q$e(P)?tBe(A,P,u,e):J$e(A,P,u)});function d(){const[_={},P=[],A=void 0]=typeof i.extraReducers=="function"?ese(i.extraReducers):[i.extraReducers],T={..._,...c.sliceCaseReducersByType};return V$e(i.initialState,E=>{for(let L in T)E.addCase(L,T[L]);for(let L of c.sliceMatchers)E.addMatcher(L.matcher,L.reducer);for(let L of P)E.addMatcher(L.matcher,L.reducer);A&&E.addDefaultCase(A)})}const h=_=>_,f=new Map,m=new WeakMap;let v;function x(_,P){return v||(v=d()),v(_,P)}function b(){return v||(v=d()),v.getInitialState()}function w(_,P=!1){function A(E){let L=E[_];return typeof L>"u"&&P&&(L=ck(m,A,b)),L}function T(E=h){const L=ck(f,P,()=>new WeakMap);return ck(L,E,()=>{const $={};for(const[z,B]of Object.entries(i.selectors??{}))$[z]=Z$e(B,E,()=>ck(m,E,b),P);return $})}return{reducerPath:_,getSelectors:T,get selectors(){return T(A)},selectSlice:A}}const S={name:o,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...w(s),injectInto(_,{reducerPath:P,...A}={}){const T=P??s;return _.inject({reducerPath:T,reducer:x},A),{...S,...w(T,!0)}}};return S}}function Z$e(n,e,r,i){function o(s,...a){let l=e(s);return typeof l>"u"&&i&&(l=r()),n(l,...a)}return o.unwrapped=n,o}var ms=Y$e();function X$e(){function n(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:n}}function J$e({type:n,reducerName:e,createNotation:r},i,o){let s,a;if("reducer"in i){if(r&&!eBe(i))throw new Error(Hs(17));s=i.reducer,a=i.prepare}else s=i;o.addCase(n,s).exposeCaseReducer(e,s).exposeAction(e,a?Pa(n,a):Pa(n))}function Q$e(n){return n._reducerDefinitionType==="asyncThunk"}function eBe(n){return n._reducerDefinitionType==="reducerWithPrepare"}function tBe({type:n,reducerName:e},r,i,o){if(!o)throw new Error(Hs(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:c,settled:u,options:d}=r,h=o(n,s,d);i.exposeAction(e,h),a&&i.addCase(h.fulfilled,a),l&&i.addCase(h.pending,l),c&&i.addCase(h.rejected,c),u&&i.addMatcher(h.settled,u),i.exposeCaseReducer(e,{fulfilled:a||uk,pending:l||uk,rejected:c||uk,settled:u||uk})}function uk(){}var nBe="task",tse="listener",nse="completed",vD="cancelled",rBe=`task-${vD}`,iBe=`task-${nse}`,nE=`${tse}-${vD}`,oBe=`${tse}-${nse}`,o6=class{constructor(n){this.code=n,this.message=`${nBe} ${vD} (reason: ${n})`}name="TaskAbortError";message},xD=(n,e)=>{if(typeof n!="function")throw new TypeError(Hs(32))},R5=()=>{},rse=(n,e=R5)=>(n.catch(e),n),ise=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Op=n=>{if(n.aborted)throw new o6(n.reason)};function ose(n,e){let r=R5;return new Promise((i,o)=>{const s=()=>o(new o6(n.reason));if(n.aborted){s();return}r=ise(n,s),e.finally(()=>r()).then(i,o)}).finally(()=>{r=R5})}var sBe=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(r){return{status:r instanceof o6?"cancelled":"rejected",error:r}}finally{e?.()}},L5=n=>e=>rse(ose(n,e).then(r=>(Op(n),r))),sse=n=>{const e=L5(n);return r=>e(new Promise(i=>setTimeout(i,r)))},{assign:U0}=Object,yU={},s6="listenerMiddleware",aBe=(n,e)=>{const r=i=>ise(n,()=>i.abort(n.reason));return(i,o)=>{xD(i);const s=new AbortController;r(s);const a=sBe(async()=>{Op(n),Op(s.signal);const l=await i({pause:L5(s.signal),delay:sse(s.signal),signal:s.signal});return Op(s.signal),l},()=>s.abort(iBe));return o?.autoJoin&&e.push(a.catch(R5)),{result:L5(n)(a),cancel(){s.abort(rBe)}}}},lBe=(n,e)=>{const r=async(i,o)=>{Op(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=n({predicate:i,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});s=()=>{d(),u()}})];o!=null&&l.push(new Promise(c=>setTimeout(c,o,null)));try{const c=await ose(e,Promise.race(l));return Op(e),c}finally{s()}};return(i,o)=>rse(r(i,o))},ase=n=>{let{type:e,actionCreator:r,matcher:i,predicate:o,effect:s}=n;if(e)o=Pa(e).match;else if(r)e=r.type,o=r.match;else if(i)o=i;else if(!o)throw new Error(Hs(21));return xD(s),{predicate:o,type:e,effect:s}},lse=U0(n=>{const{type:e,predicate:r,effect:i}=ase(n);return{id:U$e(),effect:i,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Hs(22))}}},{withTypes:()=>lse}),vU=(n,e)=>{const{type:r,effect:i,predicate:o}=ase(e);return Array.from(n.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===o)&&s.effect===i)},rE=n=>{n.pending.forEach(e=>{e.abort(nE)})},cBe=(n,e)=>()=>{for(const r of e.keys())rE(r);n.clear()},xU=(n,e,r)=>{try{n(e,r)}catch(i){setTimeout(()=>{throw i},0)}},cse=U0(Pa(`${s6}/add`),{withTypes:()=>cse}),uBe=Pa(`${s6}/removeAll`),use=U0(Pa(`${s6}/remove`),{withTypes:()=>use}),dBe=(...n)=>{console.error(`${s6}/error`,...n)},Zb=(n={})=>{const e=new Map,r=new Map,i=m=>{const v=r.get(m)??0;r.set(m,v+1)},o=m=>{const v=r.get(m)??1;v===1?r.delete(m):r.set(m,v-1)},{extra:s,onError:a=dBe}=n;xD(a);const l=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),v=>{m.unsubscribe(),v?.cancelActive&&rE(m)}),c=m=>{const v=vU(e,m)??lse(m);return l(v)};U0(c,{withTypes:()=>c});const u=m=>{const v=vU(e,m);return v&&(v.unsubscribe(),m.cancelActive&&rE(v)),!!v};U0(u,{withTypes:()=>u});const d=async(m,v,x,b)=>{const w=new AbortController,S=lBe(c,w.signal),_=[];try{m.pending.add(w),i(m),await Promise.resolve(m.effect(v,U0({},x,{getOriginalState:b,condition:(P,A)=>S(P,A).then(Boolean),take:S,delay:sse(w.signal),pause:L5(w.signal),extra:s,signal:w.signal,fork:aBe(w.signal,_),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((P,A,T)=>{P!==w&&(P.abort(nE),T.delete(P))})},cancel:()=>{w.abort(nE),m.pending.delete(w)},throwIfCancelled:()=>{Op(w.signal)}})))}catch(P){P instanceof o6||xU(a,P,{raisedBy:"effect"})}finally{await Promise.all(_),w.abort(oBe),o(m),m.pending.delete(w)}},h=cBe(e,r);return{middleware:m=>v=>x=>{if(!Foe(x))return v(x);if(cse.match(x))return c(x.payload);if(uBe.match(x)){h();return}if(use.match(x))return u(x.payload);let b=m.getState();const w=()=>{if(b===yU)throw new Error(Hs(23));return b};let S;try{if(S=v(x),e.size>0){const _=m.getState(),P=Array.from(e.values());for(const A of P){let T=!1;try{T=A.predicate(x,_,b)}catch(E){T=!1,xU(a,E,{raisedBy:"predicate"})}T&&d(A,x,m,w)}}}finally{b=yU}return S},startListening:c,stopListening:u,clearListeners:h}};function Hs(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var hBe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},dse=ms({name:"chartLayout",initialState:hBe,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var r,i,o,s;n.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,n.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,n.margin.bottom=(o=e.payload.bottom)!==null&&o!==void 0?o:0,n.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:fBe,setLayout:pBe,setChartSize:mBe,setScale:gBe}=dse.actions,yBe=dse.reducer;function hse(n,e,r){return Array.isArray(n)&&n&&e+r!==0?n.slice(e,r+1):n}function mr(n){return Number.isFinite(n)}function jc(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function bU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function N0(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(i){vBe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function vBe(n,e,r){return(e=xBe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function xBe(n){var e=bBe(n,"string");return typeof e=="symbol"?e:e+""}function bBe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ri(n,e,r){return Ii(n)||Ii(e)?r:Nc(e)?Z3(n,e,r):typeof e=="function"?e(n):r}var wBe=(n,e,r)=>{if(e&&r){var{width:i,height:o}=r,{align:s,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&s!=="center"&&yt(n[s]))return N0(N0({},n),{},{[s]:n[s]+(i||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&a!=="middle"&&yt(n[a]))return N0(N0({},n),{},{[a]:n[a]+(o||0)})}return n},yd=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",fse=(n,e,r,i)=>{if(i)return n.map(l=>l.coordinate);var o,s,a=n.map(l=>(l.coordinate===e&&(o=!0),l.coordinate===r&&(s=!0),l.coordinate));return o||a.push(e),s||a.push(r),a},pse=(n,e,r)=>{if(!n)return null;var{duplicateDomain:i,type:o,range:s,scale:a,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:f,axisType:m}=n;if(!a)return null;var v=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,x=o==="category"&&a.bandwidth?a.bandwidth()/v:0;if(x=m==="angleAxis"&&s&&s.length>=2?va(s[0]-s[1])*2*x:x,h||f){var b=(h||f||[]).map((w,S)=>{var _=i?i.indexOf(w):w;return{coordinate:a(_)+x,value:w,offset:x,index:S}});return b.filter(w=>!_l(w.coordinate))}return c&&u?u.map((w,S)=>({coordinate:a(w)+x,value:w,index:S,offset:x})):a.ticks&&d!=null?a.ticks(d).map((w,S)=>({coordinate:a(w)+x,value:w,offset:x,index:S})):a.domain().map((w,S)=>({coordinate:a(w)+x,value:i?i[w]:w,index:S,offset:x}))},wU=1e-4,kBe=n=>{var e=n.domain();if(!(!e||e.length<=2)){var r=e.length,i=n.range(),o=Math.min(i[0],i[1])-wU,s=Math.max(i[0],i[1])+wU,a=n(e[0]),l=n(e[r-1]);(a<o||a>s||l<o||l>s)&&n.domain([e[0],e[r-1]])}},SBe=n=>{var e,r=n.length;if(!(r<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var o=0;o<i;++o)for(var s=0,a=0,l=0;l<r;++l){var c=n[l],u=c?.[o];if(u!=null){var d=u[1],h=u[0],f=_l(d)?h:d;f>=0?(u[0]=s,u[1]=s+f,s=d):(u[0]=a,u[1]=a+f,a=d)}}}},CBe=n=>{var e,r=n.length;if(!(r<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var o=0;o<i;++o)for(var s=0,a=0;a<r;++a){var l=n[a],c=l?.[o];if(c!=null){var u=_l(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},_Be={sign:SBe,expand:Yze,none:nm,silhouette:Zze,wiggle:Xze,positive:CBe},ABe=(n,e,r)=>{var i,o=(i=_Be[r])!==null&&i!==void 0?i:nm,s=Gze().keys(e).value((l,c)=>Number(Ri(l,c,0))).order(UM).offset(o),a=s(n);return a.forEach((l,c)=>{l.forEach((u,d)=>{var h=Ri(n[d],e[c],0);Array.isArray(h)&&h.length===2&&yt(h[0])&&yt(h[1])&&(u[0]=h[0],u[1]=h[1])})}),a};function TBe(n){return n==null?void 0:String(n)}function kU(n){var{axis:e,ticks:r,bandSize:i,entry:o,index:s,dataKey:a}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ii(o[e.dataKey])){var l=voe(r,"value",o[e.dataKey]);if(l)return l.coordinate+i/2}return r[s]?r[s].coordinate+i/2:null}var c=Ri(o,Ii(a)?e.dataKey:a);return Ii(c)?null:e.scale(c)}var PBe=n=>{var e=n.flat(2).filter(yt);return[Math.min(...e),Math.max(...e)]},MBe=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],EBe=(n,e,r)=>{if(n!=null)return MBe(Object.keys(n).reduce((i,o)=>{var s=n[o];if(!s)return i;var{stackedData:a}=s,l=a.reduce((c,u)=>{var d=hse(u,e,r),h=PBe(d);return!mr(h[0])||!mr(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},SU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,z5=(n,e,r)=>{if(n&&n.scale&&n.scale.bandwidth){var i=n.scale.bandwidth();if(!r||i>0)return i}if(n&&e&&e.length>=2){for(var o=X3(e,d=>d.coordinate),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],u=o[a-1];s=Math.min((c?.coordinate||0)-(u?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function _U(n){var{tooltipEntrySettings:e,dataKey:r,payload:i,value:o,name:s}=n;return N0(N0({},e),{},{dataKey:r,payload:i,value:o,name:s})}function mse(n,e){if(n)return String(n);if(typeof e=="string")return e}var NBe=(n,e)=>{if(e==="horizontal")return n.chartX;if(e==="vertical")return n.chartY},jBe=(n,e)=>e==="centric"?n.angle:n.radius,vd=n=>n.layout.width,xd=n=>n.layout.height,OBe=n=>n.layout.scale,gse=n=>n.layout.margin,a6=Te(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),l6=Te(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),DBe="data-recharts-item-index",IBe="data-recharts-item-id",Xb=60;function AU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function dk(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(i){RBe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function RBe(n,e,r){return(e=LBe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function LBe(n){var e=zBe(n,"string");return typeof e=="symbol"?e:e+""}function zBe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var FBe=n=>n.brush.height;function $Be(n){var e=l6(n);return e.reduce((r,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var o=typeof i.width=="number"?i.width:Xb;return r+o}return r},0)}function BBe(n){var e=l6(n);return e.reduce((r,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var o=typeof i.width=="number"?i.width:Xb;return r+o}return r},0)}function HBe(n){var e=a6(n);return e.reduce((r,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?r+i.height:r,0)}function qBe(n){var e=a6(n);return e.reduce((r,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?r+i.height:r,0)}var Hi=Te([vd,xd,gse,FBe,$Be,BBe,HBe,qBe,Ioe,p$e],(n,e,r,i,o,s,a,l,c,u)=>{var d={left:(r.left||0)+o,right:(r.right||0)+s},h={top:(r.top||0)+a,bottom:(r.bottom||0)+l},f=dk(dk({},h),d),m=f.bottom;f.bottom+=i,f=wBe(f,c,u);var v=n-f.left-f.right,x=e-f.top-f.bottom;return dk(dk({brushBottom:m},f),{},{width:Math.max(v,0),height:Math.max(x,0)})}),VBe=Te(Hi,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),yse=Te(vd,xd,(n,e)=>({x:0,y:0,width:n,height:e})),WBe=M.createContext(null),gs=()=>M.useContext(WBe)!=null,c6=n=>n.brush,u6=Te([c6,Hi,gse],(n,e,r)=>({height:n.height,x:yt(n.x)?n.x:e.left,y:yt(n.y)?n.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:yt(n.width)?n.width:e.width})),TT={},PT={},MT={},TU;function UBe(){return TU||(TU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r,i,{signal:o,edges:s}={}){let a,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(a,l),a=void 0,l=null)},h=()=>{u&&d(),x()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},i)},v=()=>{f!==null&&(clearTimeout(f),f=null)},x=()=>{v(),a=void 0,l=null},b=()=>{d()},w=function(...S){if(o?.aborted)return;a=this,l=S;const _=f==null;m(),c&&_&&d()};return w.schedule=m,w.cancel=x,w.flush=b,o?.addEventListener("abort",x,{once:!0}),w}n.debounce=e})(MT)),MT}var PU;function KBe(){return PU||(PU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=UBe();function r(i,o=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);a&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const f=e.debounce(function(...x){d=i.apply(this,x),h=null},o,{edges:u}),m=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=i.apply(this,x),h=Date.now(),f.cancel(),f.schedule(),d):(f.apply(this,x),d)},v=()=>(f.flush(),d);return m.cancel=f.cancel,m.flush=v,m}n.debounce=r})(PT)),PT}var MU;function GBe(){return MU||(MU=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=KBe();function r(i,o=0,s={}){const{leading:a=!0,trailing:l=!0}=s;return e.debounce(i,o,{leading:a,maxWait:o,trailing:l})}n.throttle=r})(TT)),TT}var ET,EU;function YBe(){return EU||(EU=1,ET=GBe().throttle),ET}var ZBe=YBe();const XBe=Ia(ZBe);var F5=function(e,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(r.replace(/%s/g,()=>o[a++]))}},vse=(n,e,r)=>{var{width:i="100%",height:o="100%",aspect:s,maxHeight:a}=r,l=td(i)?n:Number(i),c=td(o)?e:Number(o);return s&&s>0&&(l?c=l/s:c&&(l=c*s),a&&c!=null&&c>a&&(c=a)),{calculatedWidth:l,calculatedHeight:c}},JBe={width:0,height:0,overflow:"visible"},QBe={width:0,overflowX:"visible"},eHe={height:0,overflowY:"visible"},tHe={},nHe=n=>{var{width:e,height:r}=n,i=td(e),o=td(r);return i&&o?JBe:i?QBe:o?eHe:tHe};function rHe(n){var{width:e,height:r,aspect:i}=n,o=e,s=r;return o===void 0&&s===void 0?(o="100%",s="100%"):o===void 0?o=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:o,height:s}}function iE(){return iE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},iE.apply(null,arguments)}function NU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function jU(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(r),!0).forEach(function(i){iHe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):NU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function iHe(n,e,r){return(e=oHe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function oHe(n){var e=sHe(n,"string");return typeof e=="symbol"?e:e+""}function sHe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var xse=M.createContext({width:-1,height:-1});function aHe(n){return jc(n.width)&&jc(n.height)}function bse(n){var{children:e,width:r,height:i}=n,o=M.useMemo(()=>({width:r,height:i}),[r,i]);return aHe(o)?M.createElement(xse.Provider,{value:o},e):null}var bD=()=>M.useContext(xse),lHe=M.forwardRef((n,e)=>{var{aspect:r,initialDimension:i={width:-1,height:-1},width:o,height:s,minWidth:a=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:f,onResize:m,style:v={}}=n,x=M.useRef(null),b=M.useRef();b.current=m,M.useImperativeHandle(e,()=>x.current);var[w,S]=M.useState({containerWidth:i.width,containerHeight:i.height}),_=M.useCallback((L,$)=>{S(z=>{var B=Math.round(L),D=Math.round($);return z.containerWidth===B&&z.containerHeight===D?z:{containerWidth:B,containerHeight:D}})},[]);M.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Gb;var L=D=>{var Y,{width:I,height:U}=D[0].contentRect;_(I,U),(Y=b.current)===null||Y===void 0||Y.call(b,I,U)};d>0&&(L=XBe(L,d,{trailing:!0,leading:!1}));var $=new ResizeObserver(L),{width:z,height:B}=x.current.getBoundingClientRect();return _(z,B),$.observe(x.current),()=>{$.disconnect()}},[_,d]);var{containerWidth:P,containerHeight:A}=w;F5(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:E}=vse(P,A,{width:o,height:s,aspect:r,maxHeight:c});return F5(T!=null&&T>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,E,o,s,a,l,r),M.createElement("div",{id:h?"".concat(h):void 0,className:Vt("recharts-responsive-container",f),style:jU(jU({},v),{},{width:o,height:s,minWidth:a,minHeight:l,maxHeight:c}),ref:x},M.createElement("div",{style:nHe({width:o,height:s})},M.createElement(bse,{width:T,height:E},u)))}),cHe=M.forwardRef((n,e)=>{var r=bD();if(jc(r.width)&&jc(r.height))return n.children;var{width:i,height:o}=rHe({width:n.width,height:n.height,aspect:n.aspect}),{calculatedWidth:s,calculatedHeight:a}=vse(void 0,void 0,{width:i,height:o,aspect:n.aspect,maxHeight:n.maxHeight});return yt(s)&&yt(a)?M.createElement(bse,{width:s,height:a},n.children):M.createElement(lHe,iE({},n,{width:i,height:o,ref:e}))});function wse(n){if(n)return{x:n.x,y:n.y,upperWidth:"upperWidth"in n?n.upperWidth:n.width,lowerWidth:"lowerWidth"in n?n.lowerWidth:n.width,width:n.width,height:n.height}}var d6=()=>{var n,e=gs(),r=Nt(VBe),i=Nt(u6),o=(n=Nt(c6))===null||n===void 0?void 0:n.padding;return!e||!i||!o?r:{width:i.width-o.left-o.right,height:i.height-o.top-o.bottom,x:o.left,y:o.top}},uHe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},kse=()=>{var n;return(n=Nt(Hi))!==null&&n!==void 0?n:uHe},wD=()=>Nt(vd),kD=()=>Nt(xd),dHe=()=>Nt(n=>n.layout.margin),Jn=n=>n.layout.layoutType,Ug=()=>Nt(Jn),hHe=()=>{var n=Ug();if(n==="horizontal"||n==="vertical")return n},fHe=()=>{var n=Ug();return n!==void 0},h6=n=>{var e=Ur(),r=gs(),{width:i,height:o}=n,s=bD(),a=i,l=o;return s&&(a=s.width>0?s.width:i,l=s.height>0?s.height:o),M.useEffect(()=>{!r&&jc(a)&&jc(l)&&e(mBe({width:a,height:l}))},[e,r,a,l]),null},Sse=Symbol.for("immer-nothing"),OU=Symbol.for("immer-draftable"),Gs=Symbol.for("immer-state");function al(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Ux=Object.getPrototypeOf;function vg(n){return!!n&&!!n[Gs]}function im(n){return n?Cse(n)||Array.isArray(n)||!!n[OU]||!!n.constructor?.[OU]||Jb(n)||p6(n):!1}var pHe=Object.prototype.constructor.toString(),DU=new WeakMap;function Cse(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let i=DU.get(r);return i===void 0&&(i=Function.toString.call(r),DU.set(r,i)),i===pHe}function $5(n,e,r=!0){f6(n)===0?(r?Reflect.ownKeys(n):Object.keys(n)).forEach(o=>{e(o,n[o],n)}):n.forEach((i,o)=>e(o,i,n))}function f6(n){const e=n[Gs];return e?e.type_:Array.isArray(n)?1:Jb(n)?2:p6(n)?3:0}function oE(n,e){return f6(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function _se(n,e,r){const i=f6(n);i===2?n.set(e,r):i===3?n.add(r):n[e]=r}function mHe(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Jb(n){return n instanceof Map}function p6(n){return n instanceof Set}function Qf(n){return n.copy_||n.base_}function sE(n,e){if(Jb(n))return new Map(n);if(p6(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const r=Cse(n);if(e===!0||e==="class_only"&&!r){const i=Object.getOwnPropertyDescriptors(n);delete i[Gs];let o=Reflect.ownKeys(i);for(let s=0;s<o.length;s++){const a=o[s],l=i[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[a]})}return Object.create(Ux(n),i)}else{const i=Ux(n);if(i!==null&&r)return{...n};const o=Object.create(i);return Object.assign(o,n)}}function SD(n,e=!1){return m6(n)||vg(n)||!im(n)||(f6(n)>1&&Object.defineProperties(n,{set:hk,add:hk,clear:hk,delete:hk}),Object.freeze(n),e&&Object.values(n).forEach(r=>SD(r,!0))),n}function gHe(){al(2)}var hk={value:gHe};function m6(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var yHe={};function om(n){const e=yHe[n];return e||al(0,n),e}var Kx;function Ase(){return Kx}function vHe(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IU(n,e){e&&(om("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function aE(n){lE(n),n.drafts_.forEach(xHe),n.drafts_=null}function lE(n){n===Kx&&(Kx=n.parent_)}function RU(n){return Kx=vHe(Kx,n)}function xHe(n){const e=n[Gs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function LU(n,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return n!==void 0&&n!==r?(r[Gs].modified_&&(aE(e),al(4)),im(n)&&(n=B5(e,n),e.parent_||H5(e,n)),e.patches_&&om("Patches").generateReplacementPatches_(r[Gs].base_,n,e.patches_,e.inversePatches_)):n=B5(e,r,[]),aE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Sse?n:void 0}function B5(n,e,r){if(m6(e))return e;const i=n.immer_.shouldUseStrictIteration(),o=e[Gs];if(!o)return $5(e,(s,a)=>zU(n,o,e,s,a,r),i),e;if(o.scope_!==n)return e;if(!o.modified_)return H5(n,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const s=o.copy_;let a=s,l=!1;o.type_===3&&(a=new Set(s),s.clear(),l=!0),$5(a,(c,u)=>zU(n,o,s,c,u,r,l),i),H5(n,s,!1),r&&n.patches_&&om("Patches").generatePatches_(o,r,n.patches_,n.inversePatches_)}return o.copy_}function zU(n,e,r,i,o,s,a){if(o==null||typeof o!="object"&&!a)return;const l=m6(o);if(!(l&&!a)){if(vg(o)){const c=s&&e&&e.type_!==3&&!oE(e.assigned_,i)?s.concat(i):void 0,u=B5(n,o,c);if(_se(r,i,u),vg(u))n.canAutoFreeze_=!1;else return}else a&&r.add(o);if(im(o)&&!l){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===o&&l)return;B5(n,o),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Jb(r)?r.has(i):Object.prototype.propertyIsEnumerable.call(r,i))&&H5(n,o)}}}function H5(n,e,r=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&SD(e,r)}function bHe(n,e){const r=Array.isArray(n),i={type_:r?1:0,scope_:e?e.scope_:Ase(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,s=CD;r&&(o=[i],s=Gx);const{revoke:a,proxy:l}=Proxy.revocable(o,s);return i.draft_=l,i.revoke_=a,l}var CD={get(n,e){if(e===Gs)return n;const r=Qf(n);if(!oE(r,e))return wHe(n,r,e);const i=r[e];return n.finalized_||!im(i)?i:i===NT(n.base_,e)?(jT(n),n.copy_[e]=uE(i,n)):i},has(n,e){return e in Qf(n)},ownKeys(n){return Reflect.ownKeys(Qf(n))},set(n,e,r){const i=Tse(Qf(n),e);if(i?.set)return i.set.call(n.draft_,r),!0;if(!n.modified_){const o=NT(Qf(n),e),s=o?.[Gs];if(s&&s.base_===r)return n.copy_[e]=r,n.assigned_[e]=!1,!0;if(mHe(r,o)&&(r!==void 0||oE(n.base_,e)))return!0;jT(n),cE(n)}return n.copy_[e]===r&&(r!==void 0||e in n.copy_)||Number.isNaN(r)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=r,n.assigned_[e]=!0),!0},deleteProperty(n,e){return NT(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,jT(n),cE(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const r=Qf(n),i=Reflect.getOwnPropertyDescriptor(r,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:r[e]}},defineProperty(){al(11)},getPrototypeOf(n){return Ux(n.base_)},setPrototypeOf(){al(12)}},Gx={};$5(CD,(n,e)=>{Gx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Gx.deleteProperty=function(n,e){return Gx.set.call(this,n,e,void 0)};Gx.set=function(n,e,r){return CD.set.call(this,n[0],e,r,n[0])};function NT(n,e){const r=n[Gs];return(r?Qf(r):n)[e]}function wHe(n,e,r){const i=Tse(e,r);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function Tse(n,e){if(!(e in n))return;let r=Ux(n);for(;r;){const i=Object.getOwnPropertyDescriptor(r,e);if(i)return i;r=Ux(r)}}function cE(n){n.modified_||(n.modified_=!0,n.parent_&&cE(n.parent_))}function jT(n){n.copy_||(n.copy_=sE(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var kHe=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,i)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const a=this;return function(c=s,...u){return a.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&al(6),i!==void 0&&typeof i!="function"&&al(7);let o;if(im(e)){const s=RU(this),a=uE(e,void 0);let l=!0;try{o=r(a),l=!1}finally{l?aE(s):lE(s)}return IU(s,i),LU(o,s)}else if(!e||typeof e!="object"){if(o=r(e),o===void 0&&(o=e),o===Sse&&(o=void 0),this.autoFreeze_&&SD(o,!0),i){const s=[],a=[];om("Patches").generateReplacementPatches_(e,o,s,a),i(s,a)}return o}else al(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,c=>e(c,...l));let i,o;return[this.produce(e,r,(a,l)=>{i=a,o=l}),i,o]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){im(n)||al(8),vg(n)&&(n=SHe(n));const e=RU(this),r=uE(n,void 0);return r[Gs].isManual_=!0,lE(e),r}finishDraft(n,e){const r=n&&n[Gs];(!r||!r.isManual_)&&al(9);const{scope_:i}=r;return IU(i,e),LU(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let r;for(r=e.length-1;r>=0;r--){const o=e[r];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}r>-1&&(e=e.slice(r+1));const i=om("Patches").applyPatches_;return vg(n)?i(n,e):this.produce(n,o=>i(o,e))}};function uE(n,e){const r=Jb(n)?om("MapSet").proxyMap_(n,e):p6(n)?om("MapSet").proxySet_(n,e):bHe(n,e);return(e?e.scope_:Ase()).drafts_.push(r),r}function SHe(n){return vg(n)||al(10,n),Pse(n)}function Pse(n){if(!im(n)||m6(n))return n;const e=n[Gs];let r,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=sE(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else r=sE(n,!0);return $5(r,(o,s)=>{_se(r,o,Pse(s))},i),e&&(e.finalized_=!1),r}var CHe=new kHe;CHe.produce;var _He={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Mse=ms({name:"legend",initialState:_He,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(n,e){n.payload.push(e.payload)},prepare:dr()},replaceLegendPayload:{reducer(n,e){var{prev:r,next:i}=e.payload,o=xl(n).payload.indexOf(r);o>-1&&(n.payload[o]=i)},prepare:dr()},removeLegendPayload:{reducer(n,e){var r=xl(n).payload.indexOf(e.payload);r>-1&&n.payload.splice(r,1)},prepare:dr()}}}),{setLegendSize:FU,setLegendSettings:AHe,addLegendPayload:THe,replaceLegendPayload:PHe,removeLegendPayload:MHe}=Mse.actions,EHe=Mse.reducer,NHe=["contextPayload"];function dE(){return dE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},dE.apply(null,arguments)}function $U(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function xg(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(i){jHe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function jHe(n,e,r){return(e=OHe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function OHe(n){var e=DHe(n,"string");return typeof e=="symbol"?e:e+""}function DHe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IHe(n,e){if(n==null)return{};var r,i,o=RHe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function RHe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function LHe(n){return n.value}function zHe(n){var{contextPayload:e}=n,r=IHe(n,NHe),i=Noe(e,n.payloadUniqBy,LHe),o=xg(xg({},r),{},{payload:i});return M.isValidElement(n.content)?M.cloneElement(n.content,o):typeof n.content=="function"?M.createElement(n.content,o):M.createElement(TFe,o)}function FHe(n,e,r,i,o,s){var{layout:a,align:l,verticalAlign:c}=e,u,d;return(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))&&(l==="center"&&a==="vertical"?u={left:((i||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))&&(c==="middle"?d={top:((o||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),xg(xg({},u),d)}function $He(n){var e=Ur();return M.useEffect(()=>{e(AHe(n))},[e,n]),null}function BHe(n){var e=Ur();return M.useEffect(()=>(e(FU(n)),()=>{e(FU({width:0,height:0}))}),[e,n]),null}function HHe(n,e,r,i){return n==="vertical"&&yt(e)?{height:e}:n==="horizontal"?{width:r||i}:null}var qHe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Ese(n){var e=Lo(n,qHe),r=y$e(),i=vze(),o=dHe(),{width:s,height:a,wrapperStyle:l,portal:c}=e,[u,d]=Roe([r]),h=wD(),f=kD();if(h==null||f==null)return null;var m=h-(o?.left||0)-(o?.right||0),v=HHe(e.layout,a,s,m),x=c?l:xg(xg({position:"absolute",width:v?.width||s||"auto",height:v?.height||a||"auto"},FHe(l,e,o,h,f,u)),l),b=c??i;if(b==null||r==null)return null;var w=M.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:d},M.createElement($He,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&M.createElement(BHe,{width:u.width,height:u.height}),M.createElement(zHe,dE({},e,v,{margin:o,chartWidth:h,chartHeight:f,contextPayload:r})));return rD.createPortal(w,b)}Ese.displayName="Legend";function hE(){return hE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},hE.apply(null,arguments)}function BU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function OT(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(r),!0).forEach(function(i){VHe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):BU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function VHe(n,e,r){return(e=WHe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function WHe(n){var e=UHe(n,"string");return typeof e=="symbol"?e:e+""}function UHe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KHe(n){return Array.isArray(n)&&Nc(n[0])&&Nc(n[1])?n.join(" ~ "):n}var GHe=n=>{var{separator:e=" : ",contentStyle:r={},itemStyle:i={},labelStyle:o={},payload:s,formatter:a,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:f=!1}=n,m=()=>{if(s&&s.length){var A={padding:0,margin:0},T=(l?X3(s,l):s).map((E,L)=>{if(E.type==="none")return null;var $=E.formatter||a||KHe,{value:z,name:B}=E,D=z,Y=B;if($){var I=$(z,B,E,L,s);if(Array.isArray(I))[D,Y]=I;else if(I!=null)D=I;else return null}var U=OT({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},i);return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:U},Nc(Y)?M.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Nc(Y)?M.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,M.createElement("span",{className:"recharts-tooltip-item-value"},D),M.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:A},T)}return null},v=OT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=OT({margin:0},o),b=!Ii(d),w=b?d:"",S=Vt("recharts-default-tooltip",c),_=Vt("recharts-tooltip-label",u);b&&h&&s!==void 0&&s!==null&&(w=h(d,s));var P=f?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",hE({className:S,style:v},P),M.createElement("p",{className:_,style:x},M.isValidElement(w)?w:"".concat(w)),m())},py="recharts-tooltip-wrapper",YHe={visibility:"hidden"};function ZHe(n){var{coordinate:e,translateX:r,translateY:i}=n;return Vt(py,{["".concat(py,"-right")]:yt(r)&&e&&yt(e.x)&&r>=e.x,["".concat(py,"-left")]:yt(r)&&e&&yt(e.x)&&r<e.x,["".concat(py,"-bottom")]:yt(i)&&e&&yt(e.y)&&i>=e.y,["".concat(py,"-top")]:yt(i)&&e&&yt(e.y)&&i<e.y})}function HU(n){var{allowEscapeViewBox:e,coordinate:r,key:i,offsetTopLeft:o,position:s,reverseDirection:a,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=n;if(s&&yt(s[i]))return s[i];var d=r[i]-l-(o>0?o:0),h=r[i]+o;if(e[i])return a[i]?d:h;var f=c[i];if(f==null)return 0;if(a[i]){var m=d,v=f;return m<v?Math.max(h,f):Math.max(d,f)}if(u==null)return 0;var x=h+l,b=f+u;return x>b?Math.max(d,f):Math.max(h,f)}function XHe(n){var{translateX:e,translateY:r,useTranslate3d:i}=n;return{transform:i?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function JHe(n){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipBox:a,useTranslate3d:l,viewBox:c}=n,u,d,h;return a.height>0&&a.width>0&&r?(d=HU({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),h=HU({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=XHe({translateX:d,translateY:h,useTranslate3d:l})):u=YHe,{cssProperties:u,cssClasses:ZHe({translateX:d,translateY:h,coordinate:r})}}function qU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function fk(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(i){fE(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function fE(n,e,r){return(e=QHe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function QHe(n){var e=eqe(n,"string");return typeof e=="symbol"?e:e+""}function eqe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class tqe extends M.PureComponent{constructor(){super(...arguments),fE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),fE(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,i,o,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0,y:(o=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&o!==void 0?o:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,children:s,coordinate:a,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:v,lastBoundingBox:x,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:S,cssProperties:_}=JHe({allowEscapeViewBox:r,coordinate:a,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:f,viewBox:m}),P=w?{}:fk(fk({transition:c&&e?"transform ".concat(i,"ms ").concat(o):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),A=fk(fk({},P),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},v);return M.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:A,ref:b},s)}}var Nse=()=>{var n;return(n=Nt(e=>e.rootProps.accessibilityLayer))!==null&&n!==void 0?n:!0};function pE(){return pE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},pE.apply(null,arguments)}function VU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function WU(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(r),!0).forEach(function(i){nqe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function nqe(n,e,r){return(e=rqe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function rqe(n){var e=iqe(n,"string");return typeof e=="symbol"?e:e+""}function iqe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var UU={curveBasisClosed:Lze,curveBasisOpen:zze,curveBasis:Rze,curveBumpX:kze,curveBumpY:Sze,curveLinearClosed:Fze,curveLinear:G3,curveMonotoneX:$ze,curveMonotoneY:Bze,curveNatural:Hze,curveStep:qze,curveStepAfter:Wze,curveStepBefore:Vze},q5=n=>mr(n.x)&&mr(n.y),KU=n=>n.base!=null&&q5(n.base)&&q5(n),my=n=>n.x,gy=n=>n.y,oqe=(n,e)=>{if(typeof n=="function")return n;var r="curve".concat(Kb(n));return(r==="curveMonotone"||r==="curveBump")&&e?UU["".concat(r).concat(e==="vertical"?"Y":"X")]:UU[r]||G3},sqe=n=>{var{type:e="linear",points:r=[],baseLine:i,layout:o,connectNulls:s=!1}=n,a=oqe(e,o),l=s?r.filter(q5):r,c;if(Array.isArray(i)){var u=r.map((m,v)=>WU(WU({},m),{},{base:i[v]}));o==="vertical"?c=ok().y(gy).x1(my).x0(m=>m.base.x):c=ok().x(my).y1(gy).y0(m=>m.base.y);var d=c.defined(KU).curve(a),h=s?u.filter(KU):u;return d(h)}o==="vertical"&&yt(i)?c=ok().y(gy).x1(my).x0(i):yt(i)?c=ok().x(my).y1(gy).y0(i):c=ooe().x(my).y(gy);var f=c.defined(q5).curve(a);return f(l)},V4=n=>{var{className:e,points:r,path:i,pathRef:o}=n,s=Ug();if((!r||!r.length)&&!i)return null;var a={type:n.type,points:n.points,baseLine:n.baseLine,layout:n.layout||s,connectNulls:n.connectNulls},l=r&&r.length?sqe(a):i;return M.createElement("path",pE({},Cl(n),uD(n),{className:Vt("recharts-curve",e),d:l===null?void 0:l,ref:o}))},aqe=["x","y","top","left","width","height","className"];function mE(){return mE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},mE.apply(null,arguments)}function GU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function lqe(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(r),!0).forEach(function(i){cqe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):GU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function cqe(n,e,r){return(e=uqe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function uqe(n){var e=dqe(n,"string");return typeof e=="symbol"?e:e+""}function dqe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hqe(n,e){if(n==null)return{};var r,i,o=fqe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function fqe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var pqe=(n,e,r,i,o,s)=>"M".concat(n,",").concat(o,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(r),mqe=n=>{var{x:e=0,y:r=0,top:i=0,left:o=0,width:s=0,height:a=0,className:l}=n,c=hqe(n,aqe),u=lqe({x:e,y:r,top:i,left:o,width:s,height:a},c);return!yt(e)||!yt(r)||!yt(s)||!yt(a)||!yt(i)||!yt(o)?null:M.createElement("path",mE({},Ks(u),{className:Vt("recharts-cross",l),d:pqe(e,r,s,a,i,o)}))};function gqe(n,e,r,i){var o=i/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-o:r.left+.5,y:n==="horizontal"?r.top+.5:e.y-o,width:n==="horizontal"?i:r.width-1,height:n==="horizontal"?r.height-1:i}}function YU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function ZU(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(r),!0).forEach(function(i){yqe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function yqe(n,e,r){return(e=vqe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function vqe(n){var e=xqe(n,"string");return typeof e=="symbol"?e:e+""}function xqe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var bqe=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),wqe=(n,e,r)=>n.map(i=>"".concat(bqe(i)," ").concat(e,"ms ").concat(r)).join(","),kqe=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((r,i)=>r.filter(o=>i.includes(o))),Yx=(n,e)=>Object.keys(e).reduce((r,i)=>ZU(ZU({},r),{},{[i]:n(i,e[i])}),{});function XU(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Qr(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(r),!0).forEach(function(i){Sqe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):XU(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Sqe(n,e,r){return(e=Cqe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Cqe(n){var e=_qe(n,"string");return typeof e=="symbol"?e:e+""}function _qe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var V5=(n,e,r)=>n+(e-n)*r,gE=n=>{var{from:e,to:r}=n;return e!==r},jse=(n,e,r)=>{var i=Yx((o,s)=>{if(gE(s)){var[a,l]=n(s.from,s.to,s.velocity);return Qr(Qr({},s),{},{from:a,velocity:l})}return s},e);return r<1?Yx((o,s)=>gE(s)&&i[o]!=null?Qr(Qr({},s),{},{velocity:V5(s.velocity,i[o].velocity,r),from:V5(s.from,i[o].from,r)}):s,e):jse(n,i,r-1)};function Aqe(n,e,r,i,o,s){var a,l=i.reduce((f,m)=>Qr(Qr({},f),{},{[m]:{from:n[m],velocity:0,to:e[m]}}),{}),c=()=>Yx((f,m)=>m.from,l),u=()=>!Object.values(l).filter(gE).length,d=null,h=f=>{a||(a=f);var m=f-a,v=m/r.dt;l=jse(r,l,v),o(Qr(Qr(Qr({},n),e),c())),a=f,u()||(d=s.setTimeout(h))};return()=>(d=s.setTimeout(h),()=>{var f;(f=d)===null||f===void 0||f()})}function Tqe(n,e,r,i,o,s,a){var l=null,c=o.reduce((h,f)=>{var m=n[f],v=e[f];return m==null||v==null?h:Qr(Qr({},h),{},{[f]:[m,v]})},{}),u,d=h=>{u||(u=h);var f=(h-u)/i,m=Yx((x,b)=>V5(...b,r(f)),c);if(s(Qr(Qr(Qr({},n),e),m)),f<1)l=a.setTimeout(d);else{var v=Yx((x,b)=>V5(...b,r(1)),c);s(Qr(Qr(Qr({},n),e),v))}};return()=>(l=a.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const Pqe=(n,e,r,i,o,s)=>{var a=kqe(n,e);return r==null?()=>(o(Qr(Qr({},n),e)),()=>{}):r.isStepper===!0?Aqe(n,e,r,a,o,s):Tqe(n,e,r,i,a,o,s)};var W5=1e-4,Ose=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],Dse=(n,e)=>n.map((r,i)=>r*e**i).reduce((r,i)=>r+i),JU=(n,e)=>r=>{var i=Ose(n,e);return Dse(i,r)},Mqe=(n,e)=>r=>{var i=Ose(n,e),o=[...i.map((s,a)=>s*a).slice(1),0];return Dse(o,r)},Eqe=n=>{var e,r=n.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var i=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var o=i.map(s=>parseFloat(s));return[o[0],o[1],o[2],o[3]]},Nqe=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var o=Eqe(r[0]);if(o)return o}}return r.length===4?r:[0,0,1,1]},jqe=(n,e,r,i)=>{var o=JU(n,r),s=JU(e,i),a=Mqe(n,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,f=0;f<8;++f){var m=o(h)-d,v=a(h);if(Math.abs(m-d)<W5||v<W5)return s(h);h=l(h-m/v)}return s(h)};return c.isStepper=!1,c},QU=function(){return jqe(...Nqe(...arguments))},Oqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:i=8,dt:o=17}=e,s=(a,l,c)=>{var u=-(a-l)*r,d=c*i,h=c+(u-d)*o/1e3,f=c*o/1e3+a;return Math.abs(f-l)<W5&&Math.abs(h)<W5?[l,0]:[f,h]};return s.isStepper=!0,s.dt=o,s},Dqe=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return QU(n);case"spring":return Oqe();default:if(n.split("(")[0]==="cubic-bezier")return QU(n)}return typeof n=="function"?n:null};function Iqe(n){var e,r=()=>null,i=!1,o=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var l=a,[c,...u]=l;if(typeof c=="number"){o=n.setTimeout(s.bind(null,u),c);return}s(c),o=n.setTimeout(s.bind(null,u));return}typeof a=="string"&&(e=a,r(e)),typeof a=="object"&&(e=a,r(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,o&&(o(),o=null),s(a)},subscribe:a=>(r=a,()=>{r=()=>null}),getTimeoutController:()=>n}}class Rqe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),o=null,s=a=>{a-i>=r?e(a):typeof requestAnimationFrame=="function"&&(o=requestAnimationFrame(s))};return o=requestAnimationFrame(s),()=>{o!=null&&cancelAnimationFrame(o)}}}function Lqe(){return Iqe(new Rqe)}var zqe=M.createContext(Lqe);function Fqe(n,e){var r=M.useContext(zqe);return M.useMemo(()=>e??r(n),[n,e,r])}var $qe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qb={isSsr:$qe()},Bqe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eK={t:0},DT={t:1};function Ise(n){var e=Lo(n,Bqe),{isActive:r,canBegin:i,duration:o,easing:s,begin:a,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!Qb.isSsr:r,h=Fqe(e.animationId,e.animationManager),[f,m]=M.useState(d?eK:DT),v=M.useRef(null);return M.useEffect(()=>{d||m(DT)},[d]),M.useEffect(()=>{if(!d||!i)return Gb;var x=Pqe(eK,DT,Dqe(s),o,m,h.getTimeoutController()),b=()=>{v.current=x()};return h.start([c,a,b,o,l]),()=>{h.stop(),v.current&&v.current(),l()}},[d,i,o,s,a,c,l,h]),u(f.t)}function Rse(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=M.useRef(Hx(e)),i=M.useRef(n);return i.current!==n&&(r.current=Hx(e),i.current=n),r.current}var Hqe=["radius"],qqe=["radius"],tK,nK,rK,iK,oK,sK,aK,lK,cK,uK;function dK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function hK(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dK(Object(r),!0).forEach(function(i){Vqe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):dK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Vqe(n,e,r){return(e=Wqe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Wqe(n){var e=Uqe(n,"string");return typeof e=="symbol"?e:e+""}function Uqe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function U5(){return U5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},U5.apply(null,arguments)}function fK(n,e){if(n==null)return{};var r,i,o=Kqe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Kqe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function Ul(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var pK=(n,e,r,i,o)=>{var s=Nh(r),a=Nh(i),l=Math.min(Math.abs(s)/2,Math.abs(a)/2),c=a>=0?1:-1,u=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,h;if(l>0&&o instanceof Array){for(var f=[0,0,0,0],m=0,v=4;m<v;m++)f[m]=o[m]>l?l:o[m];h=Pi(tK||(tK=Ul(["M",",",""])),n,e+c*f[0]),f[0]>0&&(h+=Pi(nK||(nK=Ul(["A ",",",",0,0,",",",",",""])),f[0],f[0],d,n+u*f[0],e)),h+=Pi(rK||(rK=Ul(["L ",",",""])),n+r-u*f[1],e),f[1]>0&&(h+=Pi(iK||(iK=Ul(["A ",",",",0,0,",`,
        `,",",""])),f[1],f[1],d,n+r,e+c*f[1])),h+=Pi(oK||(oK=Ul(["L ",",",""])),n+r,e+i-c*f[2]),f[2]>0&&(h+=Pi(sK||(sK=Ul(["A ",",",",0,0,",`,
        `,",",""])),f[2],f[2],d,n+r-u*f[2],e+i)),h+=Pi(aK||(aK=Ul(["L ",",",""])),n+u*f[3],e+i),f[3]>0&&(h+=Pi(lK||(lK=Ul(["A ",",",",0,0,",`,
        `,",",""])),f[3],f[3],d,n,e+i-c*f[3])),h+="Z"}else if(l>0&&o===+o&&o>0){var x=Math.min(l,o);h=Pi(cK||(cK=Ul(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),n,e+c*x,x,x,d,n+u*x,e,n+r-u*x,e,x,x,d,n+r,e+c*x,n+r,e+i-c*x,x,x,d,n+r-u*x,e+i,n+u*x,e+i,x,x,d,n,e+i-c*x)}else h=Pi(uK||(uK=Ul(["M ",","," h "," v "," h "," Z"])),n,e,r,i,-r);return h},mK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Gqe=n=>{var e=Lo(n,mK),r=M.useRef(null),[i,o]=M.useState(-1);M.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var te=r.current.getTotalLength();te&&o(te)}catch{}},[]);var{x:s,y:a,width:l,height:c,radius:u,className:d}=e,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:v,isUpdateAnimationActive:x}=e,b=M.useRef(l),w=M.useRef(c),S=M.useRef(s),_=M.useRef(a),P=M.useMemo(()=>({x:s,y:a,width:l,height:c,radius:u}),[s,a,l,c,u]),A=Rse(P,"rectangle-");if(s!==+s||a!==+a||l!==+l||c!==+c||l===0||c===0)return null;var T=Vt("recharts-rectangle",d);if(!x){var E=Ks(e),{radius:L}=E,$=fK(E,Hqe);return M.createElement("path",U5({},$,{x:Nh(s),y:Nh(a),width:Nh(l),height:Nh(c),radius:typeof u=="number"?u:void 0,className:T,d:pK(s,a,l,c,u)}))}var z=b.current,B=w.current,D=S.current,Y=_.current,I="0px ".concat(i===-1?1:i,"px"),U="".concat(i,"px 0px"),Z=wqe(["strokeDasharray"],f,typeof h=="string"?h:mK.animationEasing);return M.createElement(Ise,{animationId:A,key:A,canBegin:i>0,duration:f,easing:h,isActive:x,begin:m},te=>{var J=ac(z,l,te),oe=ac(B,c,te),q=ac(D,s,te),G=ac(Y,a,te);r.current&&(b.current=J,w.current=oe,S.current=q,_.current=G);var re;v?te>0?re={transition:Z,strokeDasharray:U}:re={strokeDasharray:I}:re={strokeDasharray:U};var V=Ks(e),{radius:ve}=V,ke=fK(V,qqe);return M.createElement("path",U5({},ke,{radius:typeof u=="number"?u:void 0,className:T,d:pK(q,G,J,oe,u),ref:r,style:hK(hK({},re),e.style)}))})};function gK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function yK(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gK(Object(r),!0).forEach(function(i){Yqe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):gK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Yqe(n,e,r){return(e=Zqe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Zqe(n){var e=Xqe(n,"string");return typeof e=="symbol"?e:e+""}function Xqe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var K5=Math.PI/180,Jqe=n=>n*180/Math.PI,Di=(n,e,r,i)=>({x:n+Math.cos(-K5*i)*r,y:e+Math.sin(-K5*i)*r}),Qqe=function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(r-(i.top||0)-(i.bottom||0)))/2},eVe=(n,e)=>{var{x:r,y:i}=n,{x:o,y:s}=e;return Math.sqrt((r-o)**2+(i-s)**2)},tVe=(n,e)=>{var{x:r,y:i}=n,{cx:o,cy:s}=e,a=eVe({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a,angle:0};var l=(r-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:Jqe(c),angleInRadian:c}},nVe=n=>{var{startAngle:e,endAngle:r}=n,i=Math.floor(e/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:e-s*360,endAngle:r-s*360}},rVe=(n,e)=>{var{startAngle:r,endAngle:i}=e,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return n+a*360},iVe=(n,e)=>{var{chartX:r,chartY:i}=n,{radius:o,angle:s}=tVe({x:r,y:i},e),{innerRadius:a,outerRadius:l}=e;if(o<a||o>l||o===0)return null;var{startAngle:c,endAngle:u}=nVe(e),d=s,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?yK(yK({},e),{},{radius:o,angle:rVe(d,e)}):null};function Lse(n){var{cx:e,cy:r,radius:i,startAngle:o,endAngle:s}=n,a=Di(e,r,i,o),l=Di(e,r,i,s);return{points:[a,l],cx:e,cy:r,radius:i,startAngle:o,endAngle:s}}var vK,xK,bK,wK,kK,SK,CK;function yE(){return yE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},yE.apply(null,arguments)}function gp(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var oVe=(n,e)=>{var r=va(e-n),i=Math.min(Math.abs(e-n),359.999);return r*i},pk=n=>{var{cx:e,cy:r,radius:i,angle:o,sign:s,isExternal:a,cornerRadius:l,cornerIsExternal:c}=n,u=l*(a?1:-1)+i,d=Math.asin(l/u)/K5,h=c?o:o+s*d,f=Di(e,r,u,h),m=Di(e,r,i,h),v=c?o-s*d:o,x=Di(e,r,u*Math.cos(d*K5),v);return{center:f,circleTangency:m,lineTangency:x,theta:d}},zse=n=>{var{cx:e,cy:r,innerRadius:i,outerRadius:o,startAngle:s,endAngle:a}=n,l=oVe(s,a),c=s+l,u=Di(e,r,o,s),d=Di(e,r,o,c),h=Pi(vK||(vK=gp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,o,o,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(i>0){var f=Di(e,r,i,s),m=Di(e,r,i,c);h+=Pi(xK||(xK=gp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,i,i,+(Math.abs(l)>180),+(s<=c),f.x,f.y)}else h+=Pi(bK||(bK=gp(["L ",","," Z"])),e,r);return h},sVe=n=>{var{cx:e,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}=n,d=va(u-c),{circleTangency:h,lineTangency:f,theta:m}=pk({cx:e,cy:r,radius:o,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:v,lineTangency:x,theta:b}=pk({cx:e,cy:r,radius:o,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),w=l?Math.abs(c-u):Math.abs(c-u)-m-b;if(w<0)return a?Pi(wK||(wK=gp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),f.x,f.y,s,s,s*2,s,s,-s*2):zse({cx:e,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var S=Pi(kK||(kK=gp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),f.x,f.y,s,s,+(d<0),h.x,h.y,o,o,+(w>180),+(d<0),v.x,v.y,s,s,+(d<0),x.x,x.y);if(i>0){var{circleTangency:_,lineTangency:P,theta:A}=pk({cx:e,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:T,lineTangency:E,theta:L}=pk({cx:e,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),$=l?Math.abs(c-u):Math.abs(c-u)-A-L;if($<0&&s===0)return"".concat(S,"L").concat(e,",").concat(r,"Z");S+=Pi(SK||(SK=gp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),E.x,E.y,s,s,+(d<0),T.x,T.y,i,i,+($>180),+(d>0),_.x,_.y,s,s,+(d<0),P.x,P.y)}else S+=Pi(CK||(CK=gp(["L",",","Z"])),e,r);return S},aVe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lVe=n=>{var e=Lo(n,aVe),{cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=e;if(s<o||u===d)return null;var f=Vt("recharts-sector",h),m=s-o,v=Uh(a,m,0,!0),x;return v>0&&Math.abs(u-d)<360?x=sVe({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=zse({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:d}),M.createElement("path",yE({},Ks(e),{className:f,d:x}))};function cVe(n,e,r){if(n==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(n==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(woe(e)){if(n==="centric"){var{cx:i,cy:o,innerRadius:s,outerRadius:a,angle:l}=e,c=Di(i,o,s,l),u=Di(i,o,a,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Lse(e)}}var IT={},RT={},LT={},_K;function uVe(){return _K||(_K=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Ooe();function r(i){return e.isSymbol(i)?NaN:Number(i)}n.toNumber=r})(LT)),LT}var AK;function dVe(){return AK||(AK=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=uVe();function r(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}n.toFinite=r})(RT)),RT}var TK;function hVe(){return TK||(TK=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Doe(),r=dVe();function i(o,s,a){a&&typeof a!="number"&&e.isIterateeCall(o,s,a)&&(s=a=void 0),o=r.toFinite(o),s===void 0?(s=o,o=0):s=r.toFinite(s),a=a===void 0?o<s?1:-1:r.toFinite(a);const l=Math.max(Math.ceil((s-o)/(a||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=o,o+=a;return c}n.range=i})(IT)),IT}var zT,PK;function fVe(){return PK||(PK=1,zT=hVe().range),zT}var pVe=fVe();const Fse=Ia(pVe),Qy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:IO,scaleDiverging:Bie,scaleDivergingLog:Hie,scaleDivergingPow:JO,scaleDivergingSqrt:DLe,scaleDivergingSymlog:qie,scaleIdentity:wie,scaleImplicit:LM,scaleLinear:bie,scaleLog:Sie,scaleOrdinal:z3,scalePoint:WIe,scalePow:HO,scaleQuantile:Aie,scaleQuantize:Tie,scaleRadial:_ie,scaleSequential:Lie,scaleSequentialLog:zie,scaleSequentialPow:XO,scaleSequentialQuantile:$ie,scaleSequentialSqrt:OLe,scaleSequentialSymlog:Fie,scaleSqrt:pRe,scaleSymlog:Cie,scaleThreshold:Pie,scaleTime:NLe,scaleUtc:jLe,tickFormat:xie},Symbol.toStringTag,{value:"Module"}));var bd=n=>n.chartData,$se=Te([bd],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),Bse=(n,e,r,i)=>i?$se(n):bd(n),mVe=(n,e,r)=>r?$se(n):bd(n);function Kh(n){if(Array.isArray(n)&&n.length===2){var[e,r]=n;if(mr(e)&&mr(r))return!0}return!1}function MK(n,e,r){return r?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function Hse(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[r,i]=n,o,s;if(mr(r))o=r;else if(typeof r=="function")return;if(mr(i))s=i;else if(typeof i=="function")return;var a=[o,s];if(Kh(a))return a}}function gVe(n,e,r){if(!(!r&&e==null)){if(typeof n=="function"&&e!=null)try{var i=n(e,r);if(Kh(i))return MK(i,e,r)}catch{}if(Array.isArray(n)&&n.length===2){var[o,s]=n,a,l;if(o==="auto")e!=null&&(a=Math.min(...e));else if(yt(o))a=o;else if(typeof o=="function")try{e!=null&&(a=o(e?.[0]))}catch{}else if(typeof o=="string"&&SU.test(o)){var c=SU.exec(o);if(c==null||c[1]==null||e==null)a=void 0;else{var u=+c[1];a=e[0]-u}}else a=e?.[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(yt(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e?.[1]))}catch{}else if(typeof s=="string"&&CU.test(s)){var d=CU.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var h=+d[1];l=e[1]+h}}else l=e?.[1];var f=[a,l];if(Kh(f))return e==null?f:MK(f,e,r)}}}var Kg=1e9,yVe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AD,fr=!0,Ma="[DecimalError] ",Dp=Ma+"Invalid argument: ",_D=Ma+"Exponent out of range: ",Gg=Math.floor,ep=Math.pow,vVe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rs,fi=1e7,sr=7,qse=9007199254740991,G5=Gg(qse/sr),ft={};ft.absoluteValue=ft.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};ft.comparedTo=ft.cmp=function(n){var e,r,i,o,s=this;if(n=new s.constructor(n),s.s!==n.s)return s.s||-n.s;if(s.e!==n.e)return s.e>n.e^s.s<0?1:-1;for(i=s.d.length,o=n.d.length,e=0,r=i<o?i:o;e<r;++e)if(s.d[e]!==n.d[e])return s.d[e]>n.d[e]^s.s<0?1:-1;return i===o?0:i>o^s.s<0?1:-1};ft.decimalPlaces=ft.dp=function(){var n=this,e=n.d.length-1,r=(e-n.e)*sr;if(e=n.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ft.dividedBy=ft.div=function(n){return qu(this,new this.constructor(n))};ft.dividedToIntegerBy=ft.idiv=function(n){var e=this,r=e.constructor;return zn(qu(e,new r(n),0,1),r.precision)};ft.equals=ft.eq=function(n){return!this.cmp(n)};ft.exponent=function(){return Hr(this)};ft.greaterThan=ft.gt=function(n){return this.cmp(n)>0};ft.greaterThanOrEqualTo=ft.gte=function(n){return this.cmp(n)>=0};ft.isInteger=ft.isint=function(){return this.e>this.d.length-2};ft.isNegative=ft.isneg=function(){return this.s<0};ft.isPositive=ft.ispos=function(){return this.s>0};ft.isZero=function(){return this.s===0};ft.lessThan=ft.lt=function(n){return this.cmp(n)<0};ft.lessThanOrEqualTo=ft.lte=function(n){return this.cmp(n)<1};ft.logarithm=ft.log=function(n){var e,r=this,i=r.constructor,o=i.precision,s=o+5;if(n===void 0)n=new i(10);else if(n=new i(n),n.s<1||n.eq(Rs))throw Error(Ma+"NaN");if(r.s<1)throw Error(Ma+(r.s?"NaN":"-Infinity"));return r.eq(Rs)?new i(0):(fr=!1,e=qu(Zx(r,s),Zx(n,s),s),fr=!0,zn(e,o))};ft.minus=ft.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Use(e,n):Vse(e,(n.s=-n.s,n))};ft.modulo=ft.mod=function(n){var e,r=this,i=r.constructor,o=i.precision;if(n=new i(n),!n.s)throw Error(Ma+"NaN");return r.s?(fr=!1,e=qu(r,n,0,1).times(n),fr=!0,r.minus(e)):zn(new i(r),o)};ft.naturalExponential=ft.exp=function(){return Wse(this)};ft.naturalLogarithm=ft.ln=function(){return Zx(this)};ft.negated=ft.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};ft.plus=ft.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Vse(e,n):Use(e,(n.s=-n.s,n))};ft.precision=ft.sd=function(n){var e,r,i,o=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Dp+n);if(e=Hr(o)+1,i=o.d.length-1,r=i*sr+1,i=o.d[i],i){for(;i%10==0;i/=10)r--;for(i=o.d[0];i>=10;i/=10)r++}return n&&e>r?e:r};ft.squareRoot=ft.sqrt=function(){var n,e,r,i,o,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ma+"NaN")}for(n=Hr(l),fr=!1,o=Math.sqrt(+l),o==0||o==1/0?(e=gc(l.d),(e.length+n)%2==0&&(e+="0"),o=Math.sqrt(e),n=Gg((n+1)/2)-(n<0||n%2),o==1/0?e="5e"+n:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),i=new c(e)):i=new c(o.toString()),r=c.precision,o=a=r+3;;)if(s=i,i=s.plus(qu(l,s,a+2)).times(.5),gc(s.d).slice(0,a)===(e=gc(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),o==a&&e=="4999"){if(zn(s,r+1,0),s.times(s).eq(l)){i=s;break}}else if(e!="9999")break;a+=4}return fr=!0,zn(i,r)};ft.times=ft.mul=function(n){var e,r,i,o,s,a,l,c,u,d=this,h=d.constructor,f=d.d,m=(n=new h(n)).d;if(!d.s||!n.s)return new h(0);for(n.s*=d.s,r=d.e+n.e,c=f.length,u=m.length,c<u&&(s=f,f=m,m=s,a=c,c=u,u=a),s=[],a=c+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(e=0,o=c+i;o>i;)l=s[o]+m[i]*f[o-i-1]+e,s[o--]=l%fi|0,e=l/fi|0;s[o]=(s[o]+e)%fi|0}for(;!s[--a];)s.pop();return e?++r:s.shift(),n.d=s,n.e=r,fr?zn(n,h.precision):n};ft.toDecimalPlaces=ft.todp=function(n,e){var r=this,i=r.constructor;return r=new i(r),n===void 0?r:(Oc(n,0,Kg),e===void 0?e=i.rounding:Oc(e,0,8),zn(r,n+Hr(r)+1,e))};ft.toExponential=function(n,e){var r,i=this,o=i.constructor;return n===void 0?r=sm(i,!0):(Oc(n,0,Kg),e===void 0?e=o.rounding:Oc(e,0,8),i=zn(new o(i),n+1,e),r=sm(i,!0,n+1)),r};ft.toFixed=function(n,e){var r,i,o=this,s=o.constructor;return n===void 0?sm(o):(Oc(n,0,Kg),e===void 0?e=s.rounding:Oc(e,0,8),i=zn(new s(o),n+Hr(o)+1,e),r=sm(i.abs(),!1,n+Hr(i)+1),o.isneg()&&!o.isZero()?"-"+r:r)};ft.toInteger=ft.toint=function(){var n=this,e=n.constructor;return zn(new e(n),Hr(n)+1,e.rounding)};ft.toNumber=function(){return+this};ft.toPower=ft.pow=function(n){var e,r,i,o,s,a,l=this,c=l.constructor,u=12,d=+(n=new c(n));if(!n.s)return new c(Rs);if(l=new c(l),!l.s){if(n.s<1)throw Error(Ma+"Infinity");return l}if(l.eq(Rs))return l;if(i=c.precision,n.eq(Rs))return zn(l,i);if(e=n.e,r=n.d.length-1,a=e>=r,s=l.s,a){if((r=d<0?-d:d)<=qse){for(o=new c(Rs),e=Math.ceil(i/sr+4),fr=!1;r%2&&(o=o.times(l),NK(o.d,e)),r=Gg(r/2),r!==0;)l=l.times(l),NK(l.d,e);return fr=!0,n.s<0?new c(Rs).div(o):zn(o,i)}}else if(s<0)throw Error(Ma+"NaN");return s=s<0&&n.d[Math.max(e,r)]&1?-1:1,l.s=1,fr=!1,o=n.times(Zx(l,i+u)),fr=!0,o=Wse(o),o.s=s,o};ft.toPrecision=function(n,e){var r,i,o=this,s=o.constructor;return n===void 0?(r=Hr(o),i=sm(o,r<=s.toExpNeg||r>=s.toExpPos)):(Oc(n,1,Kg),e===void 0?e=s.rounding:Oc(e,0,8),o=zn(new s(o),n,e),r=Hr(o),i=sm(o,n<=r||r<=s.toExpNeg,n)),i};ft.toSignificantDigits=ft.tosd=function(n,e){var r=this,i=r.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Oc(n,1,Kg),e===void 0?e=i.rounding:Oc(e,0,8)),zn(new i(r),n,e)};ft.toString=ft.valueOf=ft.val=ft.toJSON=ft[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Hr(n),r=n.constructor;return sm(n,e<=r.toExpNeg||e>=r.toExpPos)};function Vse(n,e){var r,i,o,s,a,l,c,u,d=n.constructor,h=d.precision;if(!n.s||!e.s)return e.s||(e=new d(n)),fr?zn(e,h):e;if(c=n.d,u=e.d,a=n.e,o=e.e,c=c.slice(),s=a-o,s){for(s<0?(i=c,s=-s,l=u.length):(i=u,o=a,l=c.length),a=Math.ceil(h/sr),l=a>l?a+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,i=u,u=c,c=i),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/fi|0,c[s]%=fi;for(r&&(c.unshift(r),++o),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=o,fr?zn(e,h):e}function Oc(n,e,r){if(n!==~~n||n<e||n>r)throw Error(Dp+n)}function gc(n){var e,r,i,o=n.length-1,s="",a=n[0];if(o>0){for(s+=a,e=1;e<o;e++)i=n[e]+"",r=sr-i.length,r&&(s+=ph(r)),s+=i;a=n[e],i=a+"",r=sr-i.length,r&&(s+=ph(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var qu=(function(){function n(i,o){var s,a=0,l=i.length;for(i=i.slice();l--;)s=i[l]*o+a,i[l]=s%fi|0,a=s/fi|0;return a&&i.unshift(a),i}function e(i,o,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(i[l]!=o[l]){c=i[l]>o[l]?1:-1;break}return c}function r(i,o,s){for(var a=0;s--;)i[s]-=a,a=i[s]<o[s]?1:0,i[s]=a*fi+i[s]-o[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,o,s,a){var l,c,u,d,h,f,m,v,x,b,w,S,_,P,A,T,E,L,$=i.constructor,z=i.s==o.s?1:-1,B=i.d,D=o.d;if(!i.s)return new $(i);if(!o.s)throw Error(Ma+"Division by zero");for(c=i.e-o.e,E=D.length,A=B.length,m=new $(z),v=m.d=[],u=0;D[u]==(B[u]||0);)++u;if(D[u]>(B[u]||0)&&--c,s==null?S=s=$.precision:a?S=s+(Hr(i)-Hr(o))+1:S=s,S<0)return new $(0);if(S=S/sr+2|0,u=0,E==1)for(d=0,D=D[0],S++;(u<A||d)&&S--;u++)_=d*fi+(B[u]||0),v[u]=_/D|0,d=_%D|0;else{for(d=fi/(D[0]+1)|0,d>1&&(D=n(D,d),B=n(B,d),E=D.length,A=B.length),P=E,x=B.slice(0,E),b=x.length;b<E;)x[b++]=0;L=D.slice(),L.unshift(0),T=D[0],D[1]>=fi/2&&++T;do d=0,l=e(D,x,E,b),l<0?(w=x[0],E!=b&&(w=w*fi+(x[1]||0)),d=w/T|0,d>1?(d>=fi&&(d=fi-1),h=n(D,d),f=h.length,b=x.length,l=e(h,x,f,b),l==1&&(d--,r(h,E<f?L:D,f))):(d==0&&(l=d=1),h=D.slice()),f=h.length,f<b&&h.unshift(0),r(x,h,b),l==-1&&(b=x.length,l=e(D,x,E,b),l<1&&(d++,r(x,E<b?L:D,b))),b=x.length):l===0&&(d++,x=[0]),v[u++]=d,l&&x[0]?x[b++]=B[P]||0:(x=[B[P]],b=1);while((P++<A||x[0]!==void 0)&&S--)}return v[0]||v.shift(),m.e=c,zn(m,a?s+Hr(m)+1:s)}})();function Wse(n,e){var r,i,o,s,a,l,c=0,u=0,d=n.constructor,h=d.precision;if(Hr(n)>16)throw Error(_D+Hr(n));if(!n.s)return new d(Rs);for(fr=!1,l=h,a=new d(.03125);n.abs().gte(.1);)n=n.times(a),u+=5;for(i=Math.log(ep(2,u))/Math.LN10*2+5|0,l+=i,r=o=s=new d(Rs),d.precision=l;;){if(o=zn(o.times(n),l),r=r.times(++c),a=s.plus(qu(o,r,l)),gc(a.d).slice(0,l)===gc(s.d).slice(0,l)){for(;u--;)s=zn(s.times(s),l);return d.precision=h,e==null?(fr=!0,zn(s,h)):s}s=a}}function Hr(n){for(var e=n.e*sr,r=n.d[0];r>=10;r/=10)e++;return e}function FT(n,e,r){if(e>n.LN10.sd())throw fr=!0,r&&(n.precision=r),Error(Ma+"LN10 precision limit exceeded");return zn(new n(n.LN10),e)}function ph(n){for(var e="";n--;)e+="0";return e}function Zx(n,e){var r,i,o,s,a,l,c,u,d,h=1,f=10,m=n,v=m.d,x=m.constructor,b=x.precision;if(m.s<1)throw Error(Ma+(m.s?"NaN":"-Infinity"));if(m.eq(Rs))return new x(0);if(e==null?(fr=!1,u=b):u=e,m.eq(10))return e==null&&(fr=!0),FT(x,u);if(u+=f,x.precision=u,r=gc(v),i=r.charAt(0),s=Hr(m),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)m=m.times(n),r=gc(m.d),i=r.charAt(0),h++;s=Hr(m),i>1?(m=new x("0."+r),s++):m=new x(i+"."+r.slice(1))}else return c=FT(x,u+2,b).times(s+""),m=Zx(new x(i+"."+r.slice(1)),u-f).plus(c),x.precision=b,e==null?(fr=!0,zn(m,b)):m;for(l=a=m=qu(m.minus(Rs),m.plus(Rs),u),d=zn(m.times(m),u),o=3;;){if(a=zn(a.times(d),u),c=l.plus(qu(a,new x(o),u)),gc(c.d).slice(0,u)===gc(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(FT(x,u+2,b).times(s+""))),l=qu(l,new x(h),u),x.precision=b,e==null?(fr=!0,zn(l,b)):l;l=c,o+=2}}function EK(n,e){var r,i,o;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length),i=0;e.charCodeAt(i)===48;)++i;for(o=e.length;e.charCodeAt(o-1)===48;)--o;if(e=e.slice(i,o),e){if(o-=i,r=r-i-1,n.e=Gg(r/sr),n.d=[],i=(r+1)%sr,r<0&&(i+=sr),i<o){for(i&&n.d.push(+e.slice(0,i)),o-=sr;i<o;)n.d.push(+e.slice(i,i+=sr));e=e.slice(i),i=sr-e.length}else i-=o;for(;i--;)e+="0";if(n.d.push(+e),fr&&(n.e>G5||n.e<-G5))throw Error(_D+r)}else n.s=0,n.e=0,n.d=[0];return n}function zn(n,e,r){var i,o,s,a,l,c,u,d,h=n.d;for(a=1,s=h[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=sr,o=e,u=h[d=0];else{if(d=Math.ceil((i+1)/sr),s=h.length,d>=s)return n;for(u=s=h[d],a=1;s>=10;s/=10)a++;i%=sr,o=i-sr+a}if(r!==void 0&&(s=ep(10,a-o-1),l=u/s%10|0,c=e<0||h[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(n.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(i>0?o>0?u/ep(10,a-o):0:h[d-1])%10&1||r==(n.s<0?8:7))),e<1||!h[0])return c?(s=Hr(n),h.length=1,e=e-s-1,h[0]=ep(10,(sr-e%sr)%sr),n.e=Gg(-e/sr)||0):(h.length=1,h[0]=n.e=n.s=0),n;if(i==0?(h.length=d,s=1,d--):(h.length=d+1,s=ep(10,sr-i),h[d]=o>0?(u/ep(10,a-o)%ep(10,o)|0)*s:0),c)for(;;)if(d==0){(h[0]+=s)==fi&&(h[0]=1,++n.e);break}else{if(h[d]+=s,h[d]!=fi)break;h[d--]=0,s=1}for(i=h.length;h[--i]===0;)h.pop();if(fr&&(n.e>G5||n.e<-G5))throw Error(_D+Hr(n));return n}function Use(n,e){var r,i,o,s,a,l,c,u,d,h,f=n.constructor,m=f.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new f(n),fr?zn(e,m):e;if(c=n.d,h=e.d,i=e.e,u=n.e,c=c.slice(),a=u-i,a){for(d=a<0,d?(r=c,a=-a,l=h.length):(r=h,i=u,l=c.length),o=Math.max(Math.ceil(m/sr),l)+2,a>o&&(a=o,r.length=1),r.reverse(),o=a;o--;)r.push(0);r.reverse()}else{for(o=c.length,l=h.length,d=o<l,d&&(l=o),o=0;o<l;o++)if(c[o]!=h[o]){d=c[o]<h[o];break}a=0}for(d&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,o=h.length-l;o>0;--o)c[l++]=0;for(o=h.length;o>a;){if(c[--o]<h[o]){for(s=o;s&&c[--s]===0;)c[s]=fi-1;--c[s],c[o]+=fi}c[o]-=h[o]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,fr?zn(e,m):e):new f(0)}function sm(n,e,r){var i,o=Hr(n),s=gc(n.d),a=s.length;return e?(r&&(i=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+ph(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(o<0?"e":"e+")+o):o<0?(s="0."+ph(-o-1)+s,r&&(i=r-a)>0&&(s+=ph(i))):o>=a?(s+=ph(o+1-a),r&&(i=r-o-1)>0&&(s=s+"."+ph(i))):((i=o+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-a)>0&&(o+1===a&&(s+="."),s+=ph(i))),n.s<0?"-"+s:s}function NK(n,e){if(n.length>e)return n.length=e,!0}function Kse(n){var e,r,i;function o(s){var a=this;if(!(a instanceof o))return new o(s);if(a.constructor=o,s instanceof o){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Dp+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return EK(a,s.toString())}else if(typeof s!="string")throw Error(Dp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,vVe.test(s))EK(a,s);else throw Error(Dp+s)}if(o.prototype=ft,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=Kse,o.config=o.set=xVe,n===void 0&&(n={}),n)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)n.hasOwnProperty(r=i[e++])||(n[r]=this[r]);return o.config(n),o}function xVe(n){if(!n||typeof n!="object")throw Error(Ma+"Object expected");var e,r,i,o=["precision",1,Kg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<o.length;e+=3)if((i=n[r=o[e]])!==void 0)if(Gg(i)===i&&i>=o[e+1]&&i<=o[e+2])this[r]=i;else throw Error(Dp+r+": "+i);if((i=n[r="LN10"])!==void 0)if(i==Math.LN10)this[r]=new this(i);else throw Error(Dp+r+": "+i);return this}var AD=Kse(yVe);Rs=new AD(1);const Tn=AD;var bVe=n=>n,Gse={},Yse=n=>n===Gse,jK=n=>function e(){return arguments.length===0||arguments.length===1&&Yse(arguments.length<=0?void 0:arguments[0])?e:n(...arguments)},Zse=(n,e)=>n===1?e:jK(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(a=>a!==Gse).length;return s>=n?e(...i):Zse(n-s,jK(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(d=>Yse(d)?l.shift():d);return e(...u,...l)}))}),wVe=n=>Zse(n.length,n),vE=(n,e)=>{for(var r=[],i=n;i<e;++i)r[i-n]=i;return r},kVe=wVe((n,e)=>Array.isArray(e)?e.map(n):Object.keys(e).map(r=>e[r]).map(n)),SVe=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(!r.length)return bVe;var o=r.reverse(),s=o[0],a=o.slice(1);return function(){return a.reduce((l,c)=>c(l),s(...arguments))}};function Xse(n){var e;return n===0?e=1:e=Math.floor(new Tn(n).abs().log(10).toNumber())+1,e}function Jse(n,e,r){for(var i=new Tn(n),o=0,s=[];i.lt(e)&&o<1e5;)s.push(i.toNumber()),i=i.add(r),o++;return s}var Qse=n=>{var[e,r]=n,[i,o]=[e,r];return e>r&&([i,o]=[r,e]),[i,o]},eae=(n,e,r)=>{if(n.lte(0))return new Tn(0);var i=Xse(n.toNumber()),o=new Tn(10).pow(i),s=n.div(o),a=i!==1?.05:.1,l=new Tn(Math.ceil(s.div(a).toNumber())).add(r).mul(a),c=l.mul(o);return e?new Tn(c.toNumber()):new Tn(Math.ceil(c.toNumber()))},CVe=(n,e,r)=>{var i=new Tn(1),o=new Tn(n);if(!o.isint()&&r){var s=Math.abs(n);s<1?(i=new Tn(10).pow(Xse(n)-1),o=new Tn(Math.floor(o.div(i).toNumber())).mul(i)):s>1&&(o=new Tn(Math.floor(n)))}else n===0?o=new Tn(Math.floor((e-1)/2)):r||(o=new Tn(Math.floor(n)));var a=Math.floor((e-1)/2),l=SVe(kVe(c=>o.add(new Tn(c-a).mul(i)).toNumber()),vE);return l(0,e)},tae=function(e,r,i,o){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(i-1)))return{step:new Tn(0),tickMin:new Tn(0),tickMax:new Tn(0)};var a=eae(new Tn(r).sub(e).div(i-1),o,s),l;e<=0&&r>=0?l=new Tn(0):(l=new Tn(e).add(r).div(2),l=l.sub(new Tn(l).mod(a)));var c=Math.ceil(l.sub(e).div(a).toNumber()),u=Math.ceil(new Tn(r).sub(l).div(a).toNumber()),d=c+u+1;return d>i?tae(e,r,i,o,s+1):(d<i&&(u=r>0?u+(i-d):u,c=r>0?c:c+(i-d)),{step:a,tickMin:l.sub(new Tn(c).mul(a)),tickMax:l.add(new Tn(u).mul(a))})},_Ve=function(e){var[r,i]=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(o,2),[l,c]=Qse([r,i]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...vE(0,o-1).map(()=>1/0)]:[...vE(0,o-1).map(()=>-1/0),c];return r>i?u.reverse():u}if(l===c)return CVe(l,o,s);var{step:d,tickMin:h,tickMax:f}=tae(l,c,a,s,0),m=Jse(h,f.add(new Tn(.1).mul(d)),d);return r>i?m.reverse():m},AVe=function(e,r){var[i,o]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=Qse([i,o]);if(a===-1/0||l===1/0)return[i,o];if(a===l)return[a];var c=Math.max(r,2),u=eae(new Tn(l).sub(a).div(c-1),s,0),d=[...Jse(new Tn(a),new Tn(l),u),l];return s===!1&&(d=d.map(h=>Math.round(h))),i>o?d.reverse():d},TVe=n=>n.rootProps.barCategoryGap,g6=n=>n.rootProps.stackOffset,nae=n=>n.rootProps.reverseStackOrder,TD=n=>n.options.chartName,PD=n=>n.rootProps.syncId,rae=n=>n.rootProps.syncMethod,MD=n=>n.options.eventEmitter,PVe=n=>n.rootProps.baseValue,Co={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Tu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},js={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},y6=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e},MVe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Tu.angleAxisId,includeHidden:!1,name:void 0,reversed:Tu.reversed,scale:Tu.scale,tick:Tu.tick,tickCount:void 0,ticks:void 0,type:Tu.type,unit:void 0},EVe={allowDataOverflow:js.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:js.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:js.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:js.scale,tick:js.tick,tickCount:js.tickCount,ticks:void 0,type:js.type,unit:void 0},NVe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Tu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tu.scale,tick:Tu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},jVe={allowDataOverflow:js.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:js.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:js.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:js.scale,tick:js.tick,tickCount:js.tickCount,ticks:void 0,type:"category",unit:void 0},ED=(n,e)=>n.polarAxis.angleAxis[e]!=null?n.polarAxis.angleAxis[e]:n.layout.layoutType==="radial"?NVe:MVe,ND=(n,e)=>n.polarAxis.radiusAxis[e]!=null?n.polarAxis.radiusAxis[e]:n.layout.layoutType==="radial"?jVe:EVe,v6=n=>n.polarOptions,jD=Te([vd,xd,Hi],Qqe),iae=Te([v6,jD],(n,e)=>{if(n!=null)return Uh(n.innerRadius,e,0)}),oae=Te([v6,jD],(n,e)=>{if(n!=null)return Uh(n.outerRadius,e,e*.8)}),OVe=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:r}=n;return[e,r]},sae=Te([v6],OVe);Te([ED,sae],y6);var aae=Te([jD,iae,oae],(n,e,r)=>{if(!(n==null||e==null||r==null))return[e,r]});Te([ND,aae],y6);var lae=Te([Jn,v6,iae,oae,vd,xd],(n,e,r,i,o,s)=>{if(!(n!=="centric"&&n!=="radial"||e==null||r==null||i==null)){var{cx:a,cy:l,startAngle:c,endAngle:u}=e;return{cx:Uh(a,o,o/2),cy:Uh(l,s,s/2),innerRadius:r,outerRadius:i,startAngle:c,endAngle:u,clockWise:!1}}}),ii=(n,e)=>e,x6=(n,e,r)=>r;function OD(n){return n?.id}function cae(n,e,r){var{chartData:i=[]}=e,{allowDuplicatedCategory:o,dataKey:s}=r,a=new Map;return n.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:i;if(!(u==null||u.length===0)){var d=OD(l);u.forEach((h,f)=>{var m=s==null||o?f:String(Ri(h,s,null)),v=Ri(h,l.dataKey,0),x;a.has(m)?x=a.get(m):x={},Object.assign(x,{[d]:v}),a.set(m,x)})}}),Array.from(a.values())}function DD(n){return"stackId"in n&&n.stackId!=null&&n.dataKey!=null}var b6=(n,e)=>n===e?!0:n==null||e==null?!1:n[0]===e[0]&&n[1]===e[1];function w6(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===0&&e.length===0?!0:n===e}function DVe(n,e){if(n.length===e.length){for(var r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}return!1}var oi=n=>{var e=Jn(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Yg=n=>n.tooltip.settings.axisId;function OK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Y5(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OK(Object(r),!0).forEach(function(i){IVe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):OK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function IVe(n,e,r){return(e=RVe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function RVe(n){var e=LVe(n,"string");return typeof e=="symbol"?e:e+""}function LVe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var xE=[0,"auto"],di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uae=(n,e)=>n.cartesianAxis.xAxis[e],wd=(n,e)=>{var r=uae(n,e);return r??di},hi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:xE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Xb},dae=(n,e)=>n.cartesianAxis.yAxis[e],kd=(n,e)=>{var r=dae(n,e);return r??hi},zVe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ID=(n,e)=>{var r=n.cartesianAxis.zAxis[e];return r??zVe},zo=(n,e,r)=>{switch(e){case"xAxis":return wd(n,r);case"yAxis":return kd(n,r);case"zAxis":return ID(n,r);case"angleAxis":return ED(n,r);case"radiusAxis":return ND(n,r);default:throw new Error("Unexpected axis type: ".concat(e))}},FVe=(n,e,r)=>{switch(e){case"xAxis":return wd(n,r);case"yAxis":return kd(n,r);default:throw new Error("Unexpected axis type: ".concat(e))}},ew=(n,e,r)=>{switch(e){case"xAxis":return wd(n,r);case"yAxis":return kd(n,r);case"angleAxis":return ED(n,r);case"radiusAxis":return ND(n,r);default:throw new Error("Unexpected axis type: ".concat(e))}},hae=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function fae(n,e){return r=>{switch(n){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var pae=n=>n.graphicalItems.cartesianItems,$Ve=Te([ii,x6],fae),mae=(n,e,r)=>n.filter(r).filter(i=>e?.includeHidden===!0?!0:!i.hide),tw=Te([pae,zo,$Ve],mae,{memoizeOptions:{resultEqualityCheck:w6}}),gae=Te([tw],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(DD)),yae=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),BVe=Te([tw],yae),vae=n=>n.map(e=>e.data).filter(Boolean).flat(1),HVe=Te([tw],vae,{memoizeOptions:{resultEqualityCheck:w6}}),xae=(n,e)=>{var{chartData:r=[],dataStartIndex:i,dataEndIndex:o}=e;return n.length>0?n:r.slice(i,o+1)},RD=Te([HVe,Bse],xae),bae=(n,e,r)=>e?.dataKey!=null?n.map(i=>({value:Ri(i,e.dataKey)})):r.length>0?r.map(i=>i.dataKey).flatMap(i=>n.map(o=>({value:Ri(o,i)}))):n.map(i=>({value:i})),k6=Te([RD,zo,tw],bae);function wae(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function W4(n){if(Nc(n)||n instanceof Date){var e=Number(n);if(mr(e))return e}}function DK(n){if(Array.isArray(n)){var e=[W4(n[0]),W4(n[1])];return Kh(e)?e:void 0}var r=W4(n);if(r!=null)return[r,r]}function rd(n){return n.map(W4).filter(iFe)}function qVe(n,e,r){return!r||typeof e!="number"||_l(e)?[]:r.length?rd(r.flatMap(i=>{var o=Ri(n,i.dataKey),s,a;if(Array.isArray(o)?[s,a]=o:s=a=o,!(!mr(s)||!mr(a)))return[e-s,e+a]})):[]}var si=n=>{var e=oi(n),r=Yg(n);return ew(n,e,r)},nw=Te([si],n=>n?.dataKey),VVe=Te([gae,Bse,si],cae),kae=(n,e,r,i)=>{var o={},s=e.reduce((a,l)=>{if(l.stackId==null)return a;var c=a[l.stackId];return c==null&&(c=[]),c.push(l),a[l.stackId]=c,a},o);return Object.fromEntries(Object.entries(s).map(a=>{var[l,c]=a,u=i?[...c].reverse():c,d=u.map(OD);return[l,{stackedData:ABe(n,d,r),graphicalItems:u}]}))},Sae=Te([VVe,gae,g6,nae],kae),Cae=(n,e,r,i)=>{var{dataStartIndex:o,dataEndIndex:s}=e;if(i==null&&r!=="zAxis"){var a=EBe(n,o,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},WVe=Te([zo],n=>n.allowDataOverflow),LD=n=>{var e;if(n==null||!("domain"in n))return xE;if(n.domain!=null)return n.domain;if("ticks"in n&&n.ticks!=null){if(n.type==="number"){var r=rd(n.ticks);return[Math.min(...r),Math.max(...r)]}if(n.type==="category")return n.ticks.map(String)}return(e=n?.domain)!==null&&e!==void 0?e:xE},_ae=Te([zo],LD),Aae=Te([_ae,WVe],Hse),UVe=Te([Sae,bd,ii,Aae],Cae,{memoizeOptions:{resultEqualityCheck:b6}}),zD=n=>n.errorBars,KVe=(n,e,r)=>n.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>wae(r,i)),Z5=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r.filter(Boolean);if(o.length!==0){var s=o.flat(),a=Math.min(...s),l=Math.max(...s);return[a,l]}},Tae=(n,e,r,i,o)=>{var s,a;if(r.length>0&&n.forEach(l=>{r.forEach(c=>{var u,d,h=(u=i[c.id])===null||u===void 0?void 0:u.filter(w=>wae(o,w)),f=Ri(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),m=qVe(l,f,h);if(m.length>=2){var v=Math.min(...m),x=Math.max(...m);(s==null||v<s)&&(s=v),(a==null||x>a)&&(a=x)}var b=DK(f);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),a=a==null?b[1]:Math.max(a,b[1]))})}),e?.dataKey!=null&&n.forEach(l=>{var c=DK(Ri(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),a=a==null?c[1]:Math.max(a,c[1]))}),mr(s)&&mr(a))return[s,a]},GVe=Te([RD,zo,BVe,zD,ii],Tae,{memoizeOptions:{resultEqualityCheck:b6}});function YVe(n){var{value:e}=n;if(Nc(e)||e instanceof Date)return e}var ZVe=(n,e,r)=>{var i=n.map(YVe).filter(o=>o!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&yoe(i))?Fse(0,n.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},Pae=n=>n.referenceElements.dots,Zg=(n,e,r)=>n.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===r:i.yAxisId===r),XVe=Te([Pae,ii,x6],Zg),Mae=n=>n.referenceElements.areas,JVe=Te([Mae,ii,x6],Zg),Eae=n=>n.referenceElements.lines,QVe=Te([Eae,ii,x6],Zg),Nae=(n,e)=>{if(n!=null){var r=rd(n.map(i=>e==="xAxis"?i.x:i.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},eWe=Te(XVe,ii,Nae),jae=(n,e)=>{if(n!=null){var r=rd(n.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},tWe=Te([JVe,ii],jae);function nWe(n){var e;if(n.x!=null)return rd([n.x]);var r=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.x);return r==null||r.length===0?[]:rd(r)}function rWe(n){var e;if(n.y!=null)return rd([n.y]);var r=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.y);return r==null||r.length===0?[]:rd(r)}var Oae=(n,e)=>{if(n!=null){var r=n.flatMap(i=>e==="xAxis"?nWe(i):rWe(i));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},iWe=Te([QVe,ii],Oae),oWe=Te(eWe,iWe,tWe,(n,e,r)=>Z5(n,r,e)),Dae=(n,e,r,i,o,s,a,l)=>{if(r!=null)return r;var c=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",u=c?Z5(i,s,o):Z5(s,o);return gVe(e,u,n.allowDataOverflow)},sWe=Te([zo,_ae,Aae,UVe,GVe,oWe,Jn,ii],Dae,{memoizeOptions:{resultEqualityCheck:b6}}),aWe=[0,1],Iae=(n,e,r,i,o,s,a)=>{if(!((n==null||r==null||r.length===0)&&a===void 0)){var{dataKey:l,type:c}=n,u=yd(e,s);if(u&&l==null){var d;return Fse(0,(d=r?.length)!==null&&d!==void 0?d:0)}return c==="category"?ZVe(i,n,u):o==="expand"?aWe:a}},FD=Te([zo,Jn,RD,k6,g6,ii,sWe],Iae),Rae=(n,e,r,i,o)=>{if(n!=null){var{scale:s,type:a}=n;if(s==="auto")return e==="radial"&&o==="radiusAxis"?"band":e==="radial"&&o==="angleAxis"?"linear":a==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!r)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Kb(s));return l in Qy?l:"point"}}},rw=Te([zo,Jn,hae,TD,ii],Rae);function lWe(n){if(n!=null){if(n in Qy)return Qy[n]();var e="scale".concat(Kb(n));if(e in Qy)return Qy[e]()}}function $D(n,e,r,i){if(!(r==null||i==null)){if(typeof n.scale=="function")return n.scale.copy().domain(r).range(i);var o=lWe(e);if(o!=null){var s=o.domain(r).range(i);return kBe(s),s}}}var Lae=(n,e,r)=>{var i=LD(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Kh(n))return _Ve(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Kh(n))return AVe(n,e.tickCount,e.allowDecimals)}},BD=Te([FD,ew,rw],Lae),zae=(n,e,r,i)=>{if(i!=="angleAxis"&&n?.type==="number"&&Kh(e)&&Array.isArray(r)&&r.length>0){var o=e[0],s=r[0],a=e[1],l=r[r.length-1];return[Math.min(o,s),Math.max(a,l)]}return e},cWe=Te([zo,FD,BD,ii],zae),uWe=Te(k6,zo,(n,e)=>{if(!(!e||e.type!=="number")){var r=1/0,i=Array.from(rd(n.map(h=>h.value))).sort((h,f)=>h-f),o=i[0],s=i[i.length-1];if(o==null||s==null)return 1/0;var a=s-o;if(a===0)return 1/0;for(var l=0;l<i.length-1;l++){var c=i[l],u=i[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/a}}),Fae=Te(uWe,Jn,TVe,Hi,(n,e,r,i,o)=>o,(n,e,r,i,o)=>{if(!mr(n))return 0;var s=e==="vertical"?i.height:i.width;if(o==="gap")return n*s/2;if(o==="no-gap"){var a=Uh(r,n*s),l=n*s/2;return l-a-(l-a)/s*a}return 0}),dWe=(n,e,r)=>{var i=wd(n,e);return i==null||typeof i.padding!="string"?0:Fae(n,"xAxis",e,r,i.padding)},hWe=(n,e,r)=>{var i=kd(n,e);return i==null||typeof i.padding!="string"?0:Fae(n,"yAxis",e,r,i.padding)},fWe=Te(wd,dWe,(n,e)=>{var r,i;if(n==null)return{left:0,right:0};var{padding:o}=n;return typeof o=="string"?{left:e,right:e}:{left:((r=o.left)!==null&&r!==void 0?r:0)+e,right:((i=o.right)!==null&&i!==void 0?i:0)+e}}),pWe=Te(kd,hWe,(n,e)=>{var r,i;if(n==null)return{top:0,bottom:0};var{padding:o}=n;return typeof o=="string"?{top:e,bottom:e}:{top:((r=o.top)!==null&&r!==void 0?r:0)+e,bottom:((i=o.bottom)!==null&&i!==void 0?i:0)+e}}),mWe=Te([Hi,fWe,u6,c6,(n,e,r)=>r],(n,e,r,i,o)=>{var{padding:s}=i;return o?[s.left,r.width-s.right]:[n.left+e.left,n.left+n.width-e.right]}),gWe=Te([Hi,Jn,pWe,u6,c6,(n,e,r)=>r],(n,e,r,i,o,s)=>{var{padding:a}=o;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[n.top+n.height-r.bottom,n.top+r.top]:[n.top+r.top,n.top+n.height-r.bottom]}),iw=(n,e,r,i)=>{var o;switch(e){case"xAxis":return mWe(n,r,i);case"yAxis":return gWe(n,r,i);case"zAxis":return(o=ID(n,r))===null||o===void 0?void 0:o.range;case"angleAxis":return sae(n);case"radiusAxis":return aae(n,r);default:return}},$ae=Te([zo,iw],y6),S6=Te([zo,rw,cWe,$ae],$D);Te([tw,zD,ii],KVe);function Bae(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var C6=(n,e)=>e,_6=(n,e,r)=>r,yWe=Te(a6,C6,_6,(n,e,r)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===r).sort(Bae)),vWe=Te(l6,C6,_6,(n,e,r)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===r).sort(Bae)),Hae=(n,e)=>({width:n.width,height:e.height}),xWe=(n,e)=>{var r=typeof e.width=="number"?e.width:Xb;return{width:r,height:n.height}},bWe=Te(Hi,wd,Hae),wWe=(n,e,r)=>{switch(e){case"top":return n.top;case"bottom":return r-n.bottom;default:return 0}},kWe=(n,e,r)=>{switch(e){case"left":return n.left;case"right":return r-n.right;default:return 0}},SWe=Te(xd,Hi,yWe,C6,_6,(n,e,r,i,o)=>{var s={},a;return r.forEach(l=>{var c=Hae(e,l);a==null&&(a=wWe(e,i,n));var u=i==="top"&&!o||i==="bottom"&&o;s[l.id]=a-Number(u)*c.height,a+=(u?-1:1)*c.height}),s}),CWe=Te(vd,Hi,vWe,C6,_6,(n,e,r,i,o)=>{var s={},a;return r.forEach(l=>{var c=xWe(e,l);a==null&&(a=kWe(e,i,n));var u=i==="left"&&!o||i==="right"&&o;s[l.id]=a-Number(u)*c.width,a+=(u?-1:1)*c.width}),s}),_We=(n,e)=>{var r=wd(n,e);if(r!=null)return SWe(n,r.orientation,r.mirror)},AWe=Te([Hi,wd,_We,(n,e)=>e],(n,e,r,i)=>{if(e!=null){var o=r?.[i];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}}),TWe=(n,e)=>{var r=kd(n,e);if(r!=null)return CWe(n,r.orientation,r.mirror)},PWe=Te([Hi,kd,TWe,(n,e)=>e],(n,e,r,i)=>{if(e!=null){var o=r?.[i];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}}),MWe=Te(Hi,kd,(n,e)=>{var r=typeof e.width=="number"?e.width:Xb;return{width:r,height:n.height}}),qae=(n,e,r,i)=>{if(r!=null){var{allowDuplicatedCategory:o,type:s,dataKey:a}=r,l=yd(n,i),c=e.map(u=>u.value);if(a&&l&&s==="category"&&o&&yoe(c))return c}},HD=Te([Jn,k6,zo,ii],qae),Vae=(n,e,r,i)=>{if(!(r==null||r.dataKey==null)){var{type:o,scale:s}=r,a=yd(n,i);if(a&&(o==="number"||s!=="auto"))return e.map(l=>l.value)}},qD=Te([Jn,k6,ew,ii],Vae),IK=Te([Jn,FVe,rw,S6,HD,qD,iw,BD,ii],(n,e,r,i,o,s,a,l,c)=>{if(e!=null){var u=yd(n,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:o,isCategorical:u,niceTicks:l,range:a,realScaleType:r,scale:i}}}),EWe=(n,e,r,i,o,s,a,l,c)=>{if(!(e==null||i==null)){var u=yd(n,c),{type:d,ticks:h,tickCount:f}=e,m=r==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,v=d==="category"&&i.bandwidth?i.bandwidth()/m:0;v=c==="angleAxis"&&s!=null&&s.length>=2?va(s[0]-s[1])*2*v:v;var x=h||o;if(x){var b=x.map((w,S)=>{var _=a?a.indexOf(w):w;return{index:S,coordinate:i(_)+v,value:w,offset:v}});return b.filter(w=>mr(w.coordinate))}return u&&l?l.map((w,S)=>({coordinate:i(w)+v,value:w,index:S,offset:v})).filter(w=>mr(w.coordinate)):i.ticks?i.ticks(f).map(w=>({coordinate:i(w)+v,value:w,offset:v})):i.domain().map((w,S)=>({coordinate:i(w)+v,value:a?a[w]:w,index:S,offset:v}))}},Wae=Te([Jn,ew,rw,S6,BD,iw,HD,qD,ii],EWe),NWe=(n,e,r,i,o,s,a)=>{if(!(e==null||r==null||i==null||i[0]===i[1])){var l=yd(n,a),{tickCount:c}=e,u=0;return u=a==="angleAxis"&&i?.length>=2?va(i[0]-i[1])*2*u:u,l&&s?s.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:o?o[d]:d,index:h,offset:u}))}},Uae=Te([Jn,ew,S6,iw,HD,qD,ii],NWe),Kae=Te(zo,S6,(n,e)=>{if(!(n==null||e==null))return Y5(Y5({},n),{},{scale:e})}),jWe=Te([zo,rw,FD,$ae],$D);Te((n,e,r)=>ID(n,r),jWe,(n,e)=>{if(!(n==null||e==null))return Y5(Y5({},n),{},{scale:e})});var OWe=Te([Jn,a6,l6],(n,e,r)=>{switch(n){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Gae=n=>n.options.defaultTooltipEventType,Yae=n=>n.options.validateTooltipEventTypes;function Zae(n,e,r){if(n==null)return e;var i=n?"axis":"item";return r==null?e:r.includes(i)?i:e}function VD(n,e){var r=Gae(n),i=Yae(n);return Zae(e,r,i)}function DWe(n){return Nt(e=>VD(e,n))}var Xae=(n,e)=>{var r,i=Number(e);if(!(_l(i)||e==null))return i>=0?n==null||(r=n[i])===null||r===void 0?void 0:r.value:void 0},IWe=n=>n.tooltip.settings,_h={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},RWe={itemInteraction:{click:_h,hover:_h},axisInteraction:{click:_h,hover:_h},keyboardInteraction:_h,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Jae=ms({name:"tooltip",initialState:RWe,reducers:{addTooltipEntrySettings:{reducer(n,e){n.tooltipItemPayloads.push(e.payload)},prepare:dr()},replaceTooltipEntrySettings:{reducer(n,e){var{prev:r,next:i}=e.payload,o=xl(n).tooltipItemPayloads.indexOf(r);o>-1&&(n.tooltipItemPayloads[o]=i)},prepare:dr()},removeTooltipEntrySettings:{reducer(n,e){var r=xl(n).tooltipItemPayloads.indexOf(e.payload);r>-1&&n.tooltipItemPayloads.splice(r,1)},prepare:dr()},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:LWe,replaceTooltipEntrySettings:zWe,removeTooltipEntrySettings:FWe,setTooltipSettingsState:$We,setActiveMouseOverItemIndex:BWe,mouseLeaveItem:wbt,mouseLeaveChart:Qae,setActiveClickItemIndex:kbt,setMouseOverAxisIndex:ele,setMouseClickAxisIndex:HWe,setSyncInteraction:bE,setKeyboardInteraction:wE}=Jae.actions,qWe=Jae.reducer;function RK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function mk(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RK(Object(r),!0).forEach(function(i){VWe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):RK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function VWe(n,e,r){return(e=WWe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function WWe(n){var e=UWe(n,"string");return typeof e=="symbol"?e:e+""}function UWe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KWe(n,e,r){return e==="axis"?r==="click"?n.axisInteraction.click:n.axisInteraction.hover:r==="click"?n.itemInteraction.click:n.itemInteraction.hover}function GWe(n){return n.index!=null}var tle=(n,e,r,i)=>{if(e==null)return _h;var o=KWe(n,e,r);if(o==null)return _h;if(o.active)return o;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var s=n.settings.active===!0;if(GWe(o)){if(s)return mk(mk({},o),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return mk(mk({},_h),{},{coordinate:o.coordinate})};function YWe(n){if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(n instanceof Date){var e=n.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(n);return Number.isFinite(r)?r:void 0}function ZWe(n,e){var r=YWe(n),i=e[0],o=e[1];if(r===void 0)return!1;var s=Math.min(i,o),a=Math.max(i,o);return r>=s&&r<=a}function XWe(n,e,r){if(r==null||e==null)return!0;var i=Ri(n,e);return i==null||!Kh(r)?!0:ZWe(i,r)}var WD=(n,e,r,i)=>{var o=n?.index;if(o==null)return null;var s=Number(o);if(!mr(s))return o;var a=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(a,Math.min(s,l)),u=e[c];return u==null||XWe(u,r,i)?String(c):null},nle=(n,e,r,i,o,s,a,l)=>{if(!(s==null||l==null)){var c=a[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=o?.[Number(s)];if(d)return r==="horizontal"?{x:d.coordinate,y:(i.top+e)/2}:{x:(i.left+n)/2,y:d.coordinate}}},rle=(n,e,r,i)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var o;if(r==="hover"?o=n.itemInteraction.hover.graphicalItemId:o=n.itemInteraction.click.graphicalItemId,o==null&&i!=null){var s=n.tooltipItemPayloads[0];return s!=null?[s]:[]}return n.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.graphicalItemId)===o})},ow=n=>n.options.tooltipPayloadSearcher,Xg=n=>n.tooltip;function LK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function zK(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LK(Object(r),!0).forEach(function(i){JWe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):LK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function JWe(n,e,r){return(e=QWe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function QWe(n){var e=eUe(n,"string");return typeof e=="symbol"?e:e+""}function eUe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tUe(n,e){return n??e}var ile=(n,e,r,i,o,s,a)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return n.reduce((f,m)=>{var v,{dataDefinedOnItem:x,settings:b}=m,w=tUe(x,l),S=Array.isArray(w)?hse(w,u,d):w,_=(v=b?.dataKey)!==null&&v!==void 0?v:i,P=b?.nameKey,A;if(i&&Array.isArray(S)&&!Array.isArray(S[0])&&a==="axis"?A=voe(S,i,o):A=s(S,e,c,P),Array.isArray(A))A.forEach(E=>{var L=zK(zK({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});f.push(_U({tooltipEntrySettings:L,dataKey:E.dataKey,payload:E.payload,value:Ri(E.payload,E.dataKey),name:E.name}))});else{var T;f.push(_U({tooltipEntrySettings:b,dataKey:_,payload:A,value:Ri(A,_),name:(T=Ri(A,P))!==null&&T!==void 0?T:b?.name}))}return f},h)}},UD=Te([si,Jn,hae,TD,oi],Rae),nUe=Te([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),rUe=Te([oi,Yg],fae),Jg=Te([nUe,si,rUe],mae,{memoizeOptions:{resultEqualityCheck:w6}}),iUe=Te([Jg],n=>n.filter(DD)),oUe=Te([Jg],vae,{memoizeOptions:{resultEqualityCheck:w6}}),Qg=Te([oUe,bd],xae),sUe=Te([iUe,bd,si],cae),KD=Te([Qg,si,Jg],bae),ole=Te([si],LD),aUe=Te([si],n=>n.allowDataOverflow),sle=Te([ole,aUe],Hse),lUe=Te([Jg],n=>n.filter(DD)),cUe=Te([sUe,lUe,g6,nae],kae),uUe=Te([cUe,bd,oi,sle],Cae),dUe=Te([Jg],yae),hUe=Te([Qg,si,dUe,zD,oi],Tae,{memoizeOptions:{resultEqualityCheck:b6}}),fUe=Te([Pae,oi,Yg],Zg),pUe=Te([fUe,oi],Nae),mUe=Te([Mae,oi,Yg],Zg),gUe=Te([mUe,oi],jae),yUe=Te([Eae,oi,Yg],Zg),vUe=Te([yUe,oi],Oae),xUe=Te([pUe,vUe,gUe],Z5),bUe=Te([si,ole,sle,uUe,hUe,xUe,Jn,oi],Dae),sw=Te([si,Jn,Qg,KD,g6,oi,bUe],Iae),wUe=Te([sw,si,UD],Lae),kUe=Te([si,sw,wUe,oi],zae),ale=n=>{var e=oi(n),r=Yg(n),i=!1;return iw(n,e,r,i)},lle=Te([si,ale],y6),cle=Te([si,UD,kUe,lle],$D),SUe=Te([Jn,KD,si,oi],qae),CUe=Te([Jn,KD,si,oi],Vae),_Ue=(n,e,r,i,o,s,a,l)=>{if(e){var{type:c}=e,u=yd(n,l);if(i){var d=r==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,h=c==="category"&&i.bandwidth?i.bandwidth()/d:0;return h=l==="angleAxis"&&o!=null&&o?.length>=2?va(o[0]-o[1])*2*h:h,u&&a?a.map((f,m)=>({coordinate:i(f)+h,value:f,index:m,offset:h})):i.domain().map((f,m)=>({coordinate:i(f)+h,value:s?s[f]:f,index:m,offset:h}))}}},Sd=Te([Jn,si,UD,cle,ale,SUe,CUe,oi],_Ue),GD=Te([Gae,Yae,IWe],(n,e,r)=>Zae(r.shared,n,e)),ule=n=>n.tooltip.settings.trigger,YD=n=>n.tooltip.settings.defaultIndex,aw=Te([Xg,GD,ule,YD],tle),Xx=Te([aw,Qg,nw,sw],WD),dle=Te([Sd,Xx],Xae),AUe=Te([aw],n=>{if(n)return n.dataKey});Te([aw],n=>{if(n)return n.graphicalItemId});var hle=Te([Xg,GD,ule,YD],rle),TUe=Te([vd,xd,Jn,Hi,Sd,YD,hle,ow],nle),PUe=Te([aw,TUe],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),MUe=Te([aw],n=>{var e;return(e=n?.active)!==null&&e!==void 0?e:!1}),EUe=Te([hle,Xx,bd,nw,dle,ow,GD],ile),NUe=Te([EUe],n=>{if(n!=null){var e=n.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function FK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function $K(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FK(Object(r),!0).forEach(function(i){jUe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):FK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function jUe(n,e,r){return(e=OUe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function OUe(n){var e=DUe(n,"string");return typeof e=="symbol"?e:e+""}function DUe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var IUe=()=>Nt(si),RUe=()=>{var n=IUe(),e=Nt(Sd),r=Nt(cle);return z5(!n||!r?void 0:$K($K({},n),{},{scale:r}),e)};function BK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function c0(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BK(Object(r),!0).forEach(function(i){LUe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):BK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function LUe(n,e,r){return(e=zUe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function zUe(n){var e=FUe(n,"string");return typeof e=="symbol"?e:e+""}function FUe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var $Ue=(n,e,r,i)=>{var o=e.find(s=>s&&s.index===r);if(o){if(n==="horizontal")return{x:o.coordinate,y:i.chartY};if(n==="vertical")return{x:i.chartX,y:o.coordinate}}return{x:0,y:0}},BUe=(n,e,r,i)=>{var o=e.find(u=>u&&u.index===r);if(o){if(n==="centric"){var s=o.coordinate,{radius:a}=i;return c0(c0(c0({},i),Di(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,{angle:c}=i;return c0(c0(c0({},i),Di(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function HUe(n,e){var{chartX:r,chartY:i}=n;return r>=e.left&&r<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var fle=(n,e,r,i,o)=>{var s,a=(s=e?.length)!==null&&s!==void 0?s:0;if(a<=1||n==null)return 0;if(i==="angleAxis"&&o!=null&&Math.abs(Math.abs(o[1]-o[0])-360)<=1e-6)for(var l=0;l<a;l++){var c,u,d,h,f,m=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[a-1])===null||u===void 0?void 0:u.coordinate,v=(d=r[l])===null||d===void 0?void 0:d.coordinate,x=l>=a-1?(h=r[0])===null||h===void 0?void 0:h.coordinate:(f=r[l+1])===null||f===void 0?void 0:f.coordinate,b=void 0;if(!(m==null||v==null||x==null))if(va(v-m)!==va(x-v)){var w=[];if(va(x-v)===va(o[1]-o[0])){b=x;var S=v+o[1]-o[0];w[0]=Math.min(S,(S+m)/2),w[1]=Math.max(S,(S+m)/2)}else{b=m;var _=x+o[1]-o[0];w[0]=Math.min(v,(_+v)/2),w[1]=Math.max(v,(_+v)/2)}var P=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(n>P[0]&&n<=P[1]||n>=w[0]&&n<=w[1]){var A;return(A=r[l])===null||A===void 0?void 0:A.index}}else{var T=Math.min(m,x),E=Math.max(m,x);if(n>(T+v)/2&&n<=(E+v)/2){var L;return(L=r[l])===null||L===void 0?void 0:L.index}}}else if(e)for(var $=0;$<a;$++){var z=e[$];if(z!=null){var B=e[$+1],D=e[$-1];if($===0&&B!=null&&n<=(z.coordinate+B.coordinate)/2||$===a-1&&D!=null&&n>(z.coordinate+D.coordinate)/2||$>0&&$<a-1&&D!=null&&B!=null&&n>(z.coordinate+D.coordinate)/2&&n<=(z.coordinate+B.coordinate)/2)return z.index}}return-1},ple=()=>Nt(TD),ZD=(n,e)=>e,mle=(n,e,r)=>r,XD=(n,e,r,i)=>i,qUe=Te(Sd,n=>X3(n,e=>e.coordinate)),JD=Te([Xg,ZD,mle,XD],tle),QD=Te([JD,Qg,nw,sw],WD),VUe=(n,e,r)=>{if(e!=null){var i=Xg(n);return e==="axis"?r==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:r==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},gle=Te([Xg,ZD,mle,XD],rle),X5=Te([vd,xd,Jn,Hi,Sd,XD,gle,ow],nle),WUe=Te([JD,X5],(n,e)=>{var r;return(r=n.coordinate)!==null&&r!==void 0?r:e}),yle=Te([Sd,QD],Xae),UUe=Te([gle,QD,bd,nw,yle,ow,ZD],ile),KUe=Te([JD,QD],(n,e)=>({isActive:n.active&&e!=null,activeIndex:e})),GUe=(n,e,r,i,o,s,a)=>{if(!(!n||!r||!i||!o)&&HUe(n,a)){var l=NBe(n,e),c=fle(l,s,o,r,i),u=$Ue(e,o,c,n);return{activeIndex:String(c),activeCoordinate:u}}},YUe=(n,e,r,i,o,s,a)=>{if(!(!n||!i||!o||!s||!r)){var l=iVe(n,r);if(l){var c=jBe(l,e),u=fle(c,a,s,i,o),d=BUe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},ZUe=(n,e,r,i,o,s,a,l)=>{if(!(!n||!e||!i||!o||!s))return e==="horizontal"||e==="vertical"?GUe(n,e,i,o,s,a,l):YUe(n,e,r,i,o,s,a)},XUe=Te(n=>n.zIndex.zIndexMap,(n,e)=>e,(n,e,r)=>r,(n,e,r)=>{if(e!=null){var i=n[e];if(i!=null)return r?i.panoramaElement:i.element}}),JUe=Te(n=>n.zIndex.zIndexMap,n=>{var e=Object.keys(n).map(i=>parseInt(i,10)).concat(Object.values(Co)),r=Array.from(new Set(e));return r.sort((i,o)=>i-o)},{memoizeOptions:{resultEqualityCheck:DVe}});function HK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function qK(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HK(Object(r),!0).forEach(function(i){QUe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):HK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function QUe(n,e,r){return(e=eKe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function eKe(n){var e=tKe(n,"string");return typeof e=="symbol"?e:e+""}function tKe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var nKe={},rKe={zIndexMap:Object.values(Co).reduce((n,e)=>qK(qK({},n),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),nKe)},iKe=new Set(Object.values(Co));function oKe(n){return iKe.has(n)}var vle=ms({name:"zIndex",initialState:rKe,reducers:{registerZIndexPortal:{reducer:(n,e)=>{var{zIndex:r}=e.payload;n.zIndexMap[r]?n.zIndexMap[r].consumers+=1:n.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:dr()},unregisterZIndexPortal:{reducer:(n,e)=>{var{zIndex:r}=e.payload;n.zIndexMap[r]&&(n.zIndexMap[r].consumers-=1,n.zIndexMap[r].consumers<=0&&!oKe(r)&&delete n.zIndexMap[r])},prepare:dr()},registerZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:r,element:i,isPanorama:o}=e.payload;n.zIndexMap[r]?o?n.zIndexMap[r].panoramaElement=i:n.zIndexMap[r].element=i:n.zIndexMap[r]={consumers:0,element:o?void 0:i,panoramaElement:o?i:void 0}},prepare:dr()},unregisterZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:r}=e.payload;n.zIndexMap[r]&&(e.payload.isPanorama?n.zIndexMap[r].panoramaElement=void 0:n.zIndexMap[r].element=void 0)},prepare:dr()}}}),{registerZIndexPortal:sKe,unregisterZIndexPortal:aKe,registerZIndexPortalElement:lKe,unregisterZIndexPortalElement:cKe}=vle.actions,uKe=vle.reducer;function Cd(n){var{zIndex:e,children:r}=n,i=fHe(),o=i&&e!==void 0&&e!==0,s=gs(),a=Ur();M.useLayoutEffect(()=>o?(a(sKe({zIndex:e})),()=>{a(aKe({zIndex:e}))}):Gb,[a,e,o]);var l=Nt(c=>XUe(c,e,s));return o?l?rD.createPortal(r,l):null:r}function kE(){return kE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},kE.apply(null,arguments)}function VK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function gk(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VK(Object(r),!0).forEach(function(i){dKe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):VK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function dKe(n,e,r){return(e=hKe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function hKe(n){var e=fKe(n,"string");return typeof e=="symbol"?e:e+""}function fKe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pKe(n){var{cursor:e,cursorComp:r,cursorProps:i}=n;return M.isValidElement(e)?M.cloneElement(e,i):M.createElement(r,i)}function mKe(n){var e,{coordinate:r,payload:i,index:o,offset:s,tooltipAxisBandSize:a,layout:l,cursor:c,tooltipEventType:u,chartName:d}=n,h=r,f=i,m=o;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var v,x,b;if(d==="ScatterChart")v=h,x=mqe,b=Co.cursorLine;else if(d==="BarChart")v=gqe(l,h,s,a),x=Gqe,b=Co.cursorRectangle;else if(l==="radial"&&woe(h)){var{cx:w,cy:S,radius:_,startAngle:P,endAngle:A}=Lse(h);v={cx:w,cy:S,startAngle:P,endAngle:A,innerRadius:_,outerRadius:_},x=lVe,b=Co.cursorLine}else v={points:cVe(l,h,s)},x=V4,b=Co.cursorLine;var T=typeof c=="object"&&"className"in c?c.className:void 0,E=gk(gk(gk(gk({stroke:"#ccc",pointerEvents:"none"},s),v),U3(c)),{},{payload:f,payloadIndex:m,className:Vt("recharts-tooltip-cursor",T)});return M.createElement(Cd,{zIndex:(e=n.zIndex)!==null&&e!==void 0?e:b},M.createElement(pKe,{cursor:c,cursorComp:x,cursorProps:E}))}function gKe(n){var e=RUe(),r=kse(),i=Ug(),o=ple();return e==null||r==null||i==null||o==null?null:M.createElement(mKe,kE({},n,{offset:r,layout:i,tooltipAxisBandSize:e,chartName:o}))}var xle=M.createContext(null),yKe=()=>M.useContext(xle),$T={exports:{}},WK;function vKe(){return WK||(WK=1,(function(n){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function o(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new o(d,h||c,f),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,v){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,S,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,f),!0;case 5:return b.fn.call(b.context,d,h,f,m),!0;case 6:return b.fn.call(b.context,d,h,f,m,v),!0}for(_=1,S=new Array(w-1);_<w;_++)S[_-1]=arguments[_];b.fn.apply(b.context,S)}else{var P=b.length,A;for(_=0;_<P;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),w){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,d);break;case 3:b[_].fn.call(b[_].context,d,h);break;case 4:b[_].fn.call(b[_].context,d,h,f);break;default:if(!S)for(A=1,S=new Array(w-1);A<w;A++)S[A-1]=arguments[A];b[_].fn.apply(b[_].context,S)}}return!0},l.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!h||v.context===h)&&a(this,m);else{for(var x=0,b=[],w=v.length;x<w;x++)(v[x].fn!==d||f&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&a(this,d)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,n.exports=l})($T)),$T.exports}var xKe=vKe();const bKe=Ia(xKe);var Jx=new bKe,SE="recharts.syncEvent.tooltip",UK="recharts.syncEvent.brush";function wKe(n,e){if(e){var r=Number.parseInt(e,10);if(!_l(r))return n?.[r]}}var kKe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ble=ms({name:"options",initialState:kKe,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),SKe=ble.reducer,{createEventEmitter:CKe}=ble.actions;function _Ke(n){return n.tooltip.syncInteraction}var AKe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},wle=ms({name:"chartData",initialState:AKe,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:r,endIndex:i}=e.payload;r!=null&&(n.dataStartIndex=r),i!=null&&(n.dataEndIndex=i)}}}),{setChartData:KK,setDataStartEndIndexes:TKe,setComputedData:Sbt}=wle.actions,PKe=wle.reducer,MKe=["x","y"];function GK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function u0(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GK(Object(r),!0).forEach(function(i){EKe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function EKe(n,e,r){return(e=NKe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function NKe(n){var e=jKe(n,"string");return typeof e=="symbol"?e:e+""}function jKe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OKe(n,e){if(n==null)return{};var r,i,o=DKe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function DKe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function IKe(){var n=Nt(PD),e=Nt(MD),r=Ur(),i=Nt(rae),o=Nt(Sd),s=Ug(),a=d6(),l=Nt(c=>c.rootProps.className);M.useEffect(()=>{if(n==null)return Gb;var c=(u,d,h)=>{if(e!==h&&n===u){if(i==="index"){var f;if(a&&d!==null&&d!==void 0&&(f=d.payload)!==null&&f!==void 0&&f.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:v,y:x}=m,b=OKe(m,MKe),{x:w,y:S,width:_,height:P}=d.payload.sourceViewBox,A=u0(u0({},b),{},{x:a.x+(_?(v-w)/_:0)*a.width,y:a.y+(P?(x-S)/P:0)*a.height});r(u0(u0({},d),{},{payload:u0(u0({},d.payload),{},{coordinate:A})}))}else r(d);return}if(o!=null){var T;if(typeof i=="function"){var E={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},L=i(o,E);T=o[L]}else i==="value"&&(T=o.find(Z=>String(Z.value)===d.payload.label));var{coordinate:$}=d.payload;if(T==null||d.payload.active===!1||$==null||a==null){r(bE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:B}=$,D=Math.min(z,a.x+a.width),Y=Math.min(B,a.y+a.height),I={x:s==="horizontal"?T.coordinate:D,y:s==="horizontal"?Y:T.coordinate},U=bE({active:d.payload.active,coordinate:I,dataKey:d.payload.dataKey,index:String(T.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(U)}}};return Jx.on(SE,c),()=>{Jx.off(SE,c)}},[l,r,e,n,i,o,s,a])}function RKe(){var n=Nt(PD),e=Nt(MD),r=Ur();M.useEffect(()=>{if(n==null)return Gb;var i=(o,s,a)=>{e!==a&&n===o&&r(TKe(s))};return Jx.on(UK,i),()=>{Jx.off(UK,i)}},[r,e,n])}function LKe(){var n=Ur();M.useEffect(()=>{n(CKe())},[n]),IKe(),RKe()}function zKe(n,e,r,i,o,s){var a=Nt(m=>VUe(m,n,e)),l=Nt(MD),c=Nt(PD),u=Nt(rae),d=Nt(_Ke),h=d?.active,f=d6();M.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=bE({active:s,coordinate:r,dataKey:a,index:o,label:typeof i=="number"?String(i):i,sourceViewBox:f,graphicalItemId:void 0});Jx.emit(SE,c,m,l)}},[h,r,a,o,i,l,c,u,s,f])}function YK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function ZK(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YK(Object(r),!0).forEach(function(i){FKe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):YK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function FKe(n,e,r){return(e=$Ke(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function $Ke(n){var e=BKe(n,"string");return typeof e=="symbol"?e:e+""}function BKe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HKe(n){return n.dataKey}function qKe(n,e){return M.isValidElement(n)?M.cloneElement(n,e):typeof n=="function"?M.createElement(n,e):M.createElement(GHe,e)}var XK=[],VKe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function WKe(n){var e,r,i=Lo(n,VKe),{active:o,allowEscapeViewBox:s,animationDuration:a,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:f,position:m,reverseDirection:v,useTranslate3d:x,wrapperStyle:b,cursor:w,shared:S,trigger:_,defaultIndex:P,portal:A,axisId:T}=i,E=Ur(),L=typeof P=="number"?String(P):P;M.useEffect(()=>{E($We({shared:S,trigger:_,axisId:T,active:o,defaultIndex:L}))},[E,S,_,T,o,L]);var $=d6(),z=Nse(),B=DWe(S),{activeIndex:D,isActive:Y}=(e=Nt(me=>KUe(me,B,_,L)))!==null&&e!==void 0?e:{},I=Nt(me=>UUe(me,B,_,L)),U=Nt(me=>yle(me,B,_,L)),Z=Nt(me=>WUe(me,B,_,L)),te=I,J=yKe(),oe=(r=o??Y)!==null&&r!==void 0?r:!1,[q,G]=Roe([te,oe]),re=B==="axis"?U:void 0;zKe(B,_,Z,re,D,oe);var V=A??J;if(V==null||$==null||B==null)return null;var ve=te??XK;oe||(ve=XK),u&&ve.length&&(ve=Noe(ve.filter(me=>me.value!=null&&(me.hide!==!0||i.includeHidden)),f,HKe));var ke=ve.length>0,pe=M.createElement(tqe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:d,active:oe,coordinate:Z,hasPayload:ke,offset:h,position:m,reverseDirection:v,useTranslate3d:x,viewBox:$,wrapperStyle:b,lastBoundingBox:q,innerRef:G,hasPortalFromProps:!!A},qKe(c,ZK(ZK({},i),{},{payload:ve,label:re,active:oe,activeIndex:D,coordinate:Z,accessibilityLayer:z})));return M.createElement(M.Fragment,null,rD.createPortal(pe,V),oe&&M.createElement(gKe,{cursor:w,tooltipEventType:B,coordinate:Z,payload:ve,index:D}))}function UKe(n,e,r){return(e=KKe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function KKe(n){var e=GKe(n,"string");return typeof e=="symbol"?e:e+""}function GKe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class YKe{constructor(e){UKe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function JK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function ZKe(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JK(Object(r),!0).forEach(function(i){XKe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):JK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function XKe(n,e,r){return(e=JKe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function JKe(n){var e=QKe(n,"string");return typeof e=="symbol"?e:e+""}function QKe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var eGe={cacheSize:2e3,enableCache:!0},kle=ZKe({},eGe),QK=new YKe(kle.cacheSize),tGe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eG="recharts_measurement_span";function nGe(n,e){var r=e.fontSize||"",i=e.fontFamily||"",o=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",l=e.textTransform||"";return"".concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(a,"|").concat(l)}var tG=(n,e)=>{try{var r=document.getElementById(eG);r||(r=document.createElement("span"),r.setAttribute("id",eG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,tGe,e),r.textContent="".concat(n);var i=r.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},Gv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Qb.isSsr)return{width:0,height:0};if(!kle.enableCache)return tG(e,r);var i=nGe(e,r),o=QK.get(i);if(o)return o;var s=tG(e,r);return QK.set(i,s),s},Sle;function rGe(n,e,r){return(e=iGe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function iGe(n){var e=oGe(n,"string");return typeof e=="symbol"?e:e+""}function oGe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var nG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sGe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,aGe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lGe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cGe=["cm","mm","pt","pc","in","Q","px"];function uGe(n){return cGe.includes(n)}var j0="NaN";function dGe(n,e){return n*lGe[e]}class Mi{static parse(e){var r,[,i,o]=(r=aGe.exec(e))!==null&&r!==void 0?r:[];return i==null?Mi.NaN:new Mi(parseFloat(i),o??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,_l(e)&&(this.unit=""),r!==""&&!sGe.test(r)&&(this.num=NaN,this.unit=""),uGe(r)&&(this.num=dGe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Mi(NaN,""):new Mi(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Mi(NaN,""):new Mi(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Mi(NaN,""):new Mi(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Mi(NaN,""):new Mi(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return _l(this.num)}}Sle=Mi;rGe(Mi,"NaN",new Sle(NaN,""));function Cle(n){if(n==null||n.includes(j0))return j0;for(var e=n;e.includes("*")||e.includes("/");){var r,[,i,o,s]=(r=nG.exec(e))!==null&&r!==void 0?r:[],a=Mi.parse(i??""),l=Mi.parse(s??""),c=o==="*"?a.multiply(l):a.divide(l);if(c.isNaN())return j0;e=e.replace(nG,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,h,f]=(u=rG.exec(e))!==null&&u!==void 0?u:[],m=Mi.parse(d??""),v=Mi.parse(f??""),x=h==="+"?m.add(v):m.subtract(v);if(x.isNaN())return j0;e=e.replace(rG,x.toString())}return e}var iG=/\(([^()]*)\)/;function hGe(n){for(var e=n,r;(r=iG.exec(e))!=null;){var[,i]=r;e=e.replace(iG,Cle(i))}return e}function fGe(n){var e=n.replace(/\s+/g,"");return e=hGe(e),e=Cle(e),e}function pGe(n){try{return fGe(n)}catch{return j0}}function BT(n){var e=pGe(n.slice(5,-1));return e===j0?"":e}var mGe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],gGe=["dx","dy","angle","className","breakAll"];function CE(){return CE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},CE.apply(null,arguments)}function oG(n,e){if(n==null)return{};var r,i,o=yGe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function yGe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var _le=/[ \f\n\r\t\v\u2028\u2029]+/,Ale=n=>{var{children:e,breakAll:r,style:i}=n;try{var o=[];Ii(e)||(r?o=e.toString().split(""):o=e.toString().split(_le));var s=o.map(l=>({word:l,width:Gv(l,i).width})),a=r?0:Gv("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function vGe(n){return n==="start"||n==="middle"||n==="end"||n==="inherit"}var Tle=(n,e,r,i)=>n.reduce((o,s)=>{var{word:a,width:l}=s,c=o[o.length-1];if(c&&l!=null&&(e==null||i||c.width+l+r<Number(e)))c.words.push(a),c.width+=l+r;else{var u={words:[a],width:l};o.push(u)}return o},[]),Ple=n=>n.reduce((e,r)=>e.width>r.width?e:r),xGe="",sG=(n,e,r,i,o,s,a,l)=>{var c=n.slice(0,e),u=Ale({breakAll:r,style:i,children:c+xGe});if(!u)return[!1,[]];var d=Tle(u.wordsWithComputedWidth,s,a,l),h=d.length>o||Ple(d).width>Number(s);return[h,d]},bGe=(n,e,r,i,o)=>{var{maxLines:s,children:a,style:l,breakAll:c}=n,u=yt(s),d=String(a),h=Tle(e,i,r,o);if(!u||o)return h;var f=h.length>s||Ple(h).width>Number(i);if(!f)return h;for(var m=0,v=d.length-1,x=0,b;m<=v&&x<=d.length-1;){var w=Math.floor((m+v)/2),S=w-1,[_,P]=sG(d,S,c,l,s,i,r,o),[A]=sG(d,w,c,l,s,i,r,o);if(!_&&!A&&(m=w+1),_&&A&&(v=w-1),!_&&A){b=P;break}x++}return b||h},aG=n=>{var e=Ii(n)?[]:n.toString().split(_le);return[{words:e,width:void 0}]},wGe=n=>{var{width:e,scaleToFit:r,children:i,style:o,breakAll:s,maxLines:a}=n;if((e||r)&&!Qb.isSsr){var l,c,u=Ale({breakAll:s,children:i,style:o});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return aG(i);return bGe({breakAll:s,children:i,maxLines:a,style:o},l,c,e,!!r)}return aG(i)},Mle="#808080",kGe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Mle,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},eI=M.forwardRef((n,e)=>{var r=Lo(n,kGe),{x:i,y:o,lineHeight:s,capHeight:a,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,h=oG(r,mGe),f=M.useMemo(()=>wGe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:v,angle:x,className:b,breakAll:w}=h,S=oG(h,gGe);if(!Nc(i)||!Nc(o)||f.length===0)return null;var _=Number(i)+(yt(m)?m:0),P=Number(o)+(yt(v)?v:0);if(!mr(_)||!mr(P))return null;var A;switch(d){case"start":A=BT("calc(".concat(a,")"));break;case"middle":A=BT("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:A=BT("calc(".concat(f.length-1," * -").concat(s,")"));break}var T=[];if(c){var E=f[0].width,{width:L}=h;T.push("scale(".concat(yt(L)&&yt(E)?L/E:1,")"))}return x&&T.push("rotate(".concat(x,", ").concat(_,", ").concat(P,")")),T.length&&(S.transform=T.join(" ")),M.createElement("text",CE({},Ks(S),{ref:e,x:_,y:P,className:Vt("recharts-text",b),textAnchor:u,fill:l.includes("url")?Mle:l}),f.map(($,z)=>{var B=$.words.join(w?"":" ");return M.createElement("tspan",{x:_,dy:z===0?A:s,key:"".concat(B,"-").concat(z)},B)}))});eI.displayName="Text";var SGe=["labelRef"],CGe=["content"];function lG(n,e){if(n==null)return{};var r,i,o=_Ge(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function _Ge(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function cG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function jr(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cG(Object(r),!0).forEach(function(i){AGe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function AGe(n,e,r){return(e=TGe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function TGe(n){var e=PGe(n,"string");return typeof e=="symbol"?e:e+""}function PGe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pu(){return Pu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Pu.apply(null,arguments)}var Ele=M.createContext(null),MGe=n=>{var{x:e,y:r,upperWidth:i,lowerWidth:o,width:s,height:a,children:l}=n,c=M.useMemo(()=>({x:e,y:r,upperWidth:i,lowerWidth:o,width:s,height:a}),[e,r,i,o,s,a]);return M.createElement(Ele.Provider,{value:c},l)},Nle=()=>{var n=M.useContext(Ele),e=d6();return n||wse(e)},EGe=M.createContext(null),NGe=()=>{var n=M.useContext(EGe),e=Nt(lae);return n||e},jGe=n=>{var{value:e,formatter:r}=n,i=Ii(n.children)?e:n.children;return typeof r=="function"?r(i):i},tI=n=>n!=null&&typeof n=="function",OGe=(n,e)=>{var r=va(e-n),i=Math.min(Math.abs(e-n),360);return r*i},DGe=(n,e,r,i,o)=>{var{offset:s,className:a}=n,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:f,clockWise:m}=o,v=(u+d)/2,x=OGe(h,f),b=x>=0?1:-1,w,S;switch(e){case"insideStart":w=h+b*s,S=m;break;case"insideEnd":w=f-b*s,S=!m;break;case"end":w=f+b*s,S=m;break;default:throw new Error("Unsupported position ".concat(e))}S=x<=0?S:!S;var _=Di(l,c,v,w),P=Di(l,c,v,w+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(S?0:1,`,
    `).concat(P.x,",").concat(P.y),T=Ii(n.id)?Hx("recharts-radial-line-"):n.id;return M.createElement("text",Pu({},i,{dominantBaseline:"central",className:Vt("recharts-radial-bar-label",a)}),M.createElement("defs",null,M.createElement("path",{id:T,d:A})),M.createElement("textPath",{xlinkHref:"#".concat(T)},r))},IGe=(n,e,r)=>{var{cx:i,cy:o,innerRadius:s,outerRadius:a,startAngle:l,endAngle:c}=n,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=Di(i,o,a+e,u);return{x:d,y:h,textAnchor:d>=i?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var f=(s+a)/2,{x:m,y:v}=Di(i,o,f,u);return{x:m,y:v,textAnchor:"middle",verticalAnchor:"middle"}},_E=n=>"cx"in n&&yt(n.cx),RGe=(n,e)=>{var{parentViewBox:r,offset:i,position:o}=n,s;r!=null&&!_E(r)&&(s=r);var{x:a,y:l,upperWidth:c,lowerWidth:u,height:d}=e,h=a,f=a+(c-u)/2,m=(h+f)/2,v=(c+u)/2,x=h+c/2,b=d>=0?1:-1,w=b*i,S=b>0?"end":"start",_=b>0?"start":"end",P=c>=0?1:-1,A=P*i,T=P>0?"end":"start",E=P>0?"start":"end";if(o==="top"){var L={x:h+c/2,y:l-w,textAnchor:"middle",verticalAnchor:S};return jr(jr({},L),s?{height:Math.max(l-s.y,0),width:c}:{})}if(o==="bottom"){var $={x:f+u/2,y:l+d+w,textAnchor:"middle",verticalAnchor:_};return jr(jr({},$),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(o==="left"){var z={x:m-A,y:l+d/2,textAnchor:T,verticalAnchor:"middle"};return jr(jr({},z),s?{width:Math.max(z.x-s.x,0),height:d}:{})}if(o==="right"){var B={x:m+v+A,y:l+d/2,textAnchor:E,verticalAnchor:"middle"};return jr(jr({},B),s?{width:Math.max(s.x+s.width-B.x,0),height:d}:{})}var D=s?{width:v,height:d}:{};return o==="insideLeft"?jr({x:m+A,y:l+d/2,textAnchor:E,verticalAnchor:"middle"},D):o==="insideRight"?jr({x:m+v-A,y:l+d/2,textAnchor:T,verticalAnchor:"middle"},D):o==="insideTop"?jr({x:h+c/2,y:l+w,textAnchor:"middle",verticalAnchor:_},D):o==="insideBottom"?jr({x:f+u/2,y:l+d-w,textAnchor:"middle",verticalAnchor:S},D):o==="insideTopLeft"?jr({x:h+A,y:l+w,textAnchor:E,verticalAnchor:_},D):o==="insideTopRight"?jr({x:h+c-A,y:l+w,textAnchor:T,verticalAnchor:_},D):o==="insideBottomLeft"?jr({x:f+A,y:l+d-w,textAnchor:E,verticalAnchor:S},D):o==="insideBottomRight"?jr({x:f+u-A,y:l+d-w,textAnchor:T,verticalAnchor:S},D):o&&typeof o=="object"&&(yt(o.x)||td(o.x))&&(yt(o.y)||td(o.y))?jr({x:a+Uh(o.x,v),y:l+Uh(o.y,d),textAnchor:"end",verticalAnchor:"end"},D):jr({x,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},D)},LGe={angle:0,offset:5,zIndex:Co.label,position:"middle",textBreakAll:!1};function mh(n){var e=Lo(n,LGe),{viewBox:r,position:i,value:o,children:s,content:a,className:l="",textBreakAll:c,labelRef:u}=e,d=NGe(),h=Nle(),f=i==="center"?h:d??h,m,v,x;if(r==null?m=f:_E(r)?m=r:m=wse(r),!m||Ii(o)&&Ii(s)&&!M.isValidElement(a)&&typeof a!="function")return null;var b=jr(jr({},e),{},{viewBox:m});if(M.isValidElement(a)){var{labelRef:w}=b,S=lG(b,SGe);return M.cloneElement(a,S)}if(typeof a=="function"){var{content:_}=b,P=lG(b,CGe);if(v=M.createElement(a,P),M.isValidElement(v))return v}else v=jGe(e);var A=Ks(e);if(_E(m)){if(i==="insideStart"||i==="insideEnd"||i==="end")return DGe(e,i,v,A,m);x=IGe(m,e.offset,e.position)}else x=RGe(e,m);return M.createElement(Cd,{zIndex:e.zIndex},M.createElement(eI,Pu({ref:u,className:Vt("recharts-label",l)},A,x,{textAnchor:vGe(A.textAnchor)?A.textAnchor:x.textAnchor,breakAll:c}),v))}mh.displayName="Label";var zGe=(n,e,r)=>{if(!n)return null;var i={viewBox:e,labelRef:r};return n===!0?M.createElement(mh,Pu({key:"label-implicit"},i)):Nc(n)?M.createElement(mh,Pu({key:"label-implicit",value:n},i)):M.isValidElement(n)?n.type===mh?M.cloneElement(n,jr({key:"label-implicit"},i)):M.createElement(mh,Pu({key:"label-implicit",content:n},i)):tI(n)?M.createElement(mh,Pu({key:"label-implicit",content:n},i)):n&&typeof n=="object"?M.createElement(mh,Pu({},n,{key:"label-implicit"},i)):null};function FGe(n){var{label:e,labelRef:r}=n,i=Nle();return zGe(e,i,r)||null}var HT={},qT={},uG;function $Ge(){return uG||(uG=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}n.last=e})(qT)),qT}var VT={},dG;function BGe(){return dG||(dG=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}n.toArray=e})(VT)),VT}var hG;function HGe(){return hG||(hG=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=$Ge(),r=BGe(),i=dD();function o(s){if(i.isArrayLike(s))return e.last(r.toArray(s))}n.last=o})(HT)),HT}var WT,fG;function qGe(){return fG||(fG=1,WT=HGe().last),WT}var VGe=qGe();const WGe=Ia(VGe);var UGe=["valueAccessor"],KGe=["dataKey","clockWise","id","textBreakAll","zIndex"];function J5(){return J5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},J5.apply(null,arguments)}function pG(n,e){if(n==null)return{};var r,i,o=GGe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function GGe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var YGe=n=>Array.isArray(n.value)?WGe(n.value):n.value,jle=M.createContext(void 0),ZGe=jle.Provider,Ole=M.createContext(void 0);Ole.Provider;function XGe(){return M.useContext(jle)}function JGe(){return M.useContext(Ole)}function U4(n){var{valueAccessor:e=YGe}=n,r=pG(n,UGe),{dataKey:i,clockWise:o,id:s,textBreakAll:a,zIndex:l}=r,c=pG(r,KGe),u=XGe(),d=JGe(),h=u||d;return!h||!h.length?null:M.createElement(Cd,{zIndex:l??Co.label},M.createElement(Ec,{className:"recharts-label-list"},h.map((f,m)=>{var v,x=Ii(i)?e(f,m):Ri(f&&f.payload,i),b=Ii(s)?{}:{id:"".concat(s,"-").concat(m)};return M.createElement(mh,J5({key:"label-".concat(m)},Ks(f),c,b,{fill:(v=r.fill)!==null&&v!==void 0?v:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:a,viewBox:f.viewBox,index:m,zIndex:0}))})))}U4.displayName="LabelList";function QGe(n){var{label:e}=n;return e?e===!0?M.createElement(U4,{key:"labelList-implicit"}):M.isValidElement(e)||tI(e)?M.createElement(U4,{key:"labelList-implicit",content:e}):typeof e=="object"?M.createElement(U4,J5({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function AE(){return AE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},AE.apply(null,arguments)}var Dle=n=>{var{cx:e,cy:r,r:i,className:o}=n,s=Vt("recharts-dot",o);return yt(e)&&yt(r)&&yt(i)?M.createElement("circle",AE({},Cl(n),uD(n),{className:s,cx:e,cy:r,r:i})):null},eYe={radiusAxis:{},angleAxis:{}},Ile=ms({name:"polarAxis",initialState:eYe,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:Cbt,removeRadiusAxis:_bt,addAngleAxis:Abt,removeAngleAxis:Tbt}=Ile.actions,tYe=Ile.reducer,Rle=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0;function nYe(n){var{tooltipEntrySettings:e}=n,r=Ur(),i=gs(),o=M.useRef(null);return M.useLayoutEffect(()=>{i||(o.current===null?r(LWe(e)):o.current!==e&&r(zWe({prev:o.current,next:e})),o.current=e)},[e,r,i]),M.useLayoutEffect(()=>()=>{o.current&&(r(FWe(o.current)),o.current=null)},[r]),null}function rYe(n){var{legendPayload:e}=n,r=Ur(),i=gs(),o=M.useRef(null);return M.useLayoutEffect(()=>{i||(o.current===null?r(THe(e)):o.current!==e&&r(PHe({prev:o.current,next:e})),o.current=e)},[r,i,e]),M.useLayoutEffect(()=>()=>{o.current&&(r(MHe(o.current)),o.current=null)},[r]),null}var UT,iYe=()=>{var[n]=M.useState(()=>Hx("uid-"));return n},oYe=(UT=yQ.useId)!==null&&UT!==void 0?UT:iYe;function sYe(n,e){var r=oYe();return e||(n?"".concat(n,"-").concat(r):r)}var aYe=M.createContext(void 0),lYe=n=>{var{id:e,type:r,children:i}=n,o=sYe("recharts-".concat(r),e);return M.createElement(aYe.Provider,{value:o},i(o))},cYe={cartesianItems:[],polarItems:[]},Lle=ms({name:"graphicalItems",initialState:cYe,reducers:{addCartesianGraphicalItem:{reducer(n,e){n.cartesianItems.push(e.payload)},prepare:dr()},replaceCartesianGraphicalItem:{reducer(n,e){var{prev:r,next:i}=e.payload,o=xl(n).cartesianItems.indexOf(r);o>-1&&(n.cartesianItems[o]=i)},prepare:dr()},removeCartesianGraphicalItem:{reducer(n,e){var r=xl(n).cartesianItems.indexOf(e.payload);r>-1&&n.cartesianItems.splice(r,1)},prepare:dr()},addPolarGraphicalItem:{reducer(n,e){n.polarItems.push(e.payload)},prepare:dr()},removePolarGraphicalItem:{reducer(n,e){var r=xl(n).polarItems.indexOf(e.payload);r>-1&&n.polarItems.splice(r,1)},prepare:dr()}}}),{addCartesianGraphicalItem:uYe,replaceCartesianGraphicalItem:dYe,removeCartesianGraphicalItem:hYe,addPolarGraphicalItem:Pbt,removePolarGraphicalItem:Mbt}=Lle.actions,fYe=Lle.reducer,pYe=n=>{var e=Ur(),r=M.useRef(null);return M.useLayoutEffect(()=>{r.current===null?e(uYe(n)):r.current!==n&&e(dYe({prev:r.current,next:n})),r.current=n},[e,n]),M.useLayoutEffect(()=>()=>{r.current&&(e(hYe(r.current)),r.current=null)},[e]),null},mYe=M.memo(pYe),gYe=["points"];function mG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function KT(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mG(Object(r),!0).forEach(function(i){yYe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):mG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function yYe(n,e,r){return(e=vYe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function vYe(n){var e=xYe(n,"string");return typeof e=="symbol"?e:e+""}function xYe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Q5(){return Q5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Q5.apply(null,arguments)}function bYe(n,e){if(n==null)return{};var r,i,o=wYe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function wYe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function kYe(n){var{option:e,dotProps:r,className:i}=n;if(M.isValidElement(e))return M.cloneElement(e,r);if(typeof e=="function")return e(r);var o=Vt(i,typeof e!="boolean"?e.className:""),s=r??{},{points:a}=s,l=bYe(s,gYe);return M.createElement(Dle,Q5({},l,{className:o}))}function SYe(n,e){return n==null?!1:e?!0:n.length===1}function CYe(n){var{points:e,dot:r,className:i,dotClassName:o,dataKey:s,baseProps:a,needClip:l,clipPathId:c,zIndex:u=Co.scatter}=n;if(!SYe(e,r))return null;var d=Rle(r),h=dze(r),f=e.map((v,x)=>{var b,w,S=KT(KT(KT({r:3},a),h),{},{index:x,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(w=v.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:v.value,payload:v.payload,points:e});return M.createElement(kYe,{key:"dot-".concat(x),option:r,dotProps:S,className:o})}),m={};return l&&c!=null&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),M.createElement(Cd,{zIndex:u},M.createElement(Ec,Q5({className:i},m),f))}function gG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function yG(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(r),!0).forEach(function(i){_Ye(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function _Ye(n,e,r){return(e=AYe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function AYe(n){var e=TYe(n,"string");return typeof e=="symbol"?e:e+""}function TYe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var zle=0,PYe={xAxis:{},yAxis:{},zAxis:{}},Fle=ms({name:"cartesianAxis",initialState:PYe,reducers:{addXAxis:{reducer(n,e){n.xAxis[e.payload.id]=e.payload},prepare:dr()},replaceXAxis:{reducer(n,e){var{prev:r,next:i}=e.payload;n.xAxis[r.id]!==void 0&&(r.id!==i.id&&delete n.xAxis[r.id],n.xAxis[i.id]=i)},prepare:dr()},removeXAxis:{reducer(n,e){delete n.xAxis[e.payload.id]},prepare:dr()},addYAxis:{reducer(n,e){n.yAxis[e.payload.id]=e.payload},prepare:dr()},replaceYAxis:{reducer(n,e){var{prev:r,next:i}=e.payload;n.yAxis[r.id]!==void 0&&(r.id!==i.id&&delete n.yAxis[r.id],n.yAxis[i.id]=i)},prepare:dr()},removeYAxis:{reducer(n,e){delete n.yAxis[e.payload.id]},prepare:dr()},addZAxis:{reducer(n,e){n.zAxis[e.payload.id]=e.payload},prepare:dr()},replaceZAxis:{reducer(n,e){var{prev:r,next:i}=e.payload;n.zAxis[r.id]!==void 0&&(r.id!==i.id&&delete n.zAxis[r.id],n.zAxis[i.id]=i)},prepare:dr()},removeZAxis:{reducer(n,e){delete n.zAxis[e.payload.id]},prepare:dr()},updateYAxisWidth(n,e){var{id:r,width:i}=e.payload,o=n.yAxis[r];if(o){var s=o.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==o.width&&Math.abs(i-s[0])<=1)return;var a=[...s,i].slice(-3);n.yAxis[r]=yG(yG({},n.yAxis[r]),{},{width:i,widthHistory:a})}}}}),{addXAxis:MYe,replaceXAxis:EYe,removeXAxis:NYe,addYAxis:jYe,replaceYAxis:OYe,removeYAxis:DYe,addZAxis:Ebt,replaceZAxis:Nbt,removeZAxis:jbt,updateYAxisWidth:IYe}=Fle.actions,RYe=Fle.reducer,LYe=Te([Hi],n=>({top:n.top,bottom:n.bottom,left:n.left,right:n.right})),zYe=Te([LYe,vd,xd],(n,e,r)=>{if(!(!n||e==null||r==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,r-n.top-n.bottom)}}),nI=()=>Nt(zYe),FYe=()=>Nt(NUe);function vG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function GT(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(r),!0).forEach(function(i){$Ye(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function $Ye(n,e,r){return(e=BYe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function BYe(n){var e=HYe(n,"string");return typeof e=="symbol"?e:e+""}function HYe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var qYe=n=>{var{point:e,childIndex:r,mainColor:i,activeDot:o,dataKey:s,clipPath:a}=n;if(o===!1||e.x==null||e.y==null)return null;var l={index:r,dataKey:s,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=GT(GT(GT({},l),U3(o)),uD(o)),u;return M.isValidElement(o)?u=M.cloneElement(o,c):typeof o=="function"?u=o(c):u=M.createElement(Dle,c),M.createElement(Ec,{className:"recharts-active-dot",clipPath:a},u)};function xG(n){var{points:e,mainColor:r,activeDot:i,itemDataKey:o,clipPath:s,zIndex:a=Co.activeDot}=n,l=Nt(Xx),c=FYe();if(e==null||c==null)return null;var u=e.find(d=>c.includes(d.payload));return Ii(u)?null:M.createElement(Cd,{zIndex:a},M.createElement(qYe,{point:u,childIndex:Number(l),mainColor:r,dataKey:o,activeDot:i,clipPath:s}))}var VYe=n=>{var{chartData:e}=n,r=Ur(),i=gs();return M.useEffect(()=>i?()=>{}:(r(KK(e)),()=>{r(KK(void 0))}),[e,r,i]),null},bG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},$le=ms({name:"brush",initialState:bG,reducers:{setBrushSettings(n,e){return e.payload==null?bG:e.payload}}}),{setBrushSettings:Obt}=$le.actions,WYe=$le.reducer;function UYe(n,e,r){return(e=KYe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function KYe(n){var e=GYe(n,"string");return typeof e=="symbol"?e:e+""}function GYe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class rI{static create(e){return new rI(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?e>=i&&e<=o:e>=o&&e<=i}}UYe(rI,"EPS",1e-4);function YYe(n){return(n%180+180)%180}var ZYe=function(e){var{width:r,height:i}=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=YYe(o),a=s*Math.PI/180,l=Math.atan(i/r),c=a>l&&a<Math.PI-l?i/Math.sin(a):r/Math.cos(a);return Math.abs(c)},XYe={dots:[],areas:[],lines:[]},Ble=ms({name:"referenceElements",initialState:XYe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var r=xl(n).dots.findIndex(i=>i===e.payload);r!==-1&&n.dots.splice(r,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var r=xl(n).areas.findIndex(i=>i===e.payload);r!==-1&&n.areas.splice(r,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var r=xl(n).lines.findIndex(i=>i===e.payload);r!==-1&&n.lines.splice(r,1)}}}),{addDot:Dbt,removeDot:Ibt,addArea:Rbt,removeArea:Lbt,addLine:zbt,removeLine:Fbt}=Ble.actions,JYe=Ble.reducer,QYe=M.createContext(void 0),eZe=n=>{var{children:e}=n,[r]=M.useState("".concat(Hx("recharts"),"-clip")),i=nI();if(i==null)return null;var{x:o,y:s,width:a,height:l}=i;return M.createElement(QYe.Provider,{value:r},M.createElement("defs",null,M.createElement("clipPath",{id:r},M.createElement("rect",{x:o,y:s,height:l,width:a}))),e)};function Hle(n,e){if(e<1)return[];if(e===1)return n;for(var r=[],i=0;i<n.length;i+=e){var o=n[i];o!==void 0&&r.push(o)}return r}function tZe(n,e,r){var i={width:n.width+e.width,height:n.height+e.height};return ZYe(i,r)}function nZe(n,e,r){var i=r==="width",{x:o,y:s,width:a,height:l}=n;return e===1?{start:i?o:s,end:i?o+a:s+l}:{start:i?o+a:s+l,end:i?o:s}}function Qx(n,e,r,i,o){if(n*e<n*i||n*e>n*o)return!1;var s=r();return n*(e-n*s/2-i)>=0&&n*(e+n*s/2-o)<=0}function rZe(n,e){return Hle(n,e+1)}function iZe(n,e,r,i,o){for(var s=(i||[]).slice(),{start:a,end:l}=e,c=0,u=1,d=a,h=function(){var v=i?.[c];if(v===void 0)return{v:Hle(i,u)};var x=c,b,w=()=>(b===void 0&&(b=r(v,x)),b),S=v.coordinate,_=c===0||Qx(n,S,w,d,l);_||(c=0,d=a,u+=1),_&&(d=S+n*(w()/2+o),c+=u)},f;u<=s.length;)if(f=h(),f)return f.v;return[]}function oZe(n,e,r,i,o){var s=(i||[]).slice(),a=s.length;if(a===0)return[];for(var{start:l,end:c}=e,u=1;u<=a;u++){for(var d=(a-1)%u,h=l,f=!0,m=function(){var S=i[v],_=v,P,A=()=>(P===void 0&&(P=r(S,_)),P),T=S.coordinate,E=v===d||Qx(n,T,A,h,c);if(!E)return f=!1,1;E&&(h=T+n*(A()/2+o))},v=d;v<a&&!m();v+=u);if(f){for(var x=[],b=d;b<a;b+=u)x.push(i[b]);return x}}return[]}function wG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Ji(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wG(Object(r),!0).forEach(function(i){sZe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function sZe(n,e,r){return(e=aZe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function aZe(n){var e=lZe(n,"string");return typeof e=="symbol"?e:e+""}function lZe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cZe(n,e,r,i,o){for(var s=(i||[]).slice(),a=s.length,{start:l}=e,{end:c}=e,u=function(f){var m=s[f],v,x=()=>(v===void 0&&(v=r(m,f)),v);if(f===a-1){var b=n*(m.coordinate+n*x()/2-c);s[f]=m=Ji(Ji({},m),{},{tickCoord:b>0?m.coordinate-b*n:m.coordinate})}else s[f]=m=Ji(Ji({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var w=Qx(n,m.tickCoord,x,l,c);w&&(c=m.tickCoord-n*(x()/2+o),s[f]=Ji(Ji({},m),{},{isShow:!0}))}},d=a-1;d>=0;d--)u(d);return s}function uZe(n,e,r,i,o,s){var a=(i||[]).slice(),l=a.length,{start:c,end:u}=e;if(s){var d=i[l-1],h=r(d,l-1),f=n*(d.coordinate+n*h/2-u);if(a[l-1]=d=Ji(Ji({},d),{},{tickCoord:f>0?d.coordinate-f*n:d.coordinate}),d.tickCoord!=null){var m=Qx(n,d.tickCoord,()=>h,c,u);m&&(u=d.tickCoord-n*(h/2+o),a[l-1]=Ji(Ji({},d),{},{isShow:!0}))}}for(var v=s?l-1:l,x=function(S){var _=a[S],P,A=()=>(P===void 0&&(P=r(_,S)),P);if(S===0){var T=n*(_.coordinate-n*A()/2-c);a[S]=_=Ji(Ji({},_),{},{tickCoord:T<0?_.coordinate-T*n:_.coordinate})}else a[S]=_=Ji(Ji({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var E=Qx(n,_.tickCoord,A,c,u);E&&(c=_.tickCoord+n*(A()/2+o),a[S]=Ji(Ji({},_),{},{isShow:!0}))}},b=0;b<v;b++)x(b);return a}function iI(n,e,r){var{tick:i,ticks:o,viewBox:s,minTickGap:a,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=n;if(!o||!o.length||!i)return[];if(yt(c)||Qb.isSsr){var f;return(f=rZe(o,yt(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],v=l==="top"||l==="bottom"?"width":"height",x=d&&v==="width"?Gv(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},b=(_,P)=>{var A=typeof u=="function"?u(_.value,P):_.value;return v==="width"?tZe(Gv(A,{fontSize:e,letterSpacing:r}),x,h):Gv(A,{fontSize:e,letterSpacing:r})[v]},w=o.length>=2?va(o[1].coordinate-o[0].coordinate):1,S=nZe(s,w,v);return c==="equidistantPreserveStart"?iZe(w,S,b,o,a):c==="equidistantPreserveEnd"?oZe(w,S,b,o,a):(c==="preserveStart"||c==="preserveStartEnd"?m=uZe(w,S,b,o,a,c==="preserveStartEnd"):m=cZe(w,S,b,o,a),m.filter(_=>_.isShow))}var dZe=n=>{var{ticks:e,label:r,labelGapWithTick:i=5,tickSize:o=0,tickMargin:s=0}=n,a=0;if(e){Array.from(e).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>a&&(a=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=o+s,u=a+c+l+(r?i:0);return Math.round(u)}return 0},hZe=["axisLine","width","height","className","hide","ticks","axisType"];function fZe(n,e){if(n==null)return{};var r,i,o=pZe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function pZe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function am(){return am=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},am.apply(null,arguments)}function kG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Fr(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(r),!0).forEach(function(i){mZe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function mZe(n,e,r){return(e=gZe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function gZe(n){var e=yZe(n,"string");return typeof e=="symbol"?e:e+""}function yZe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Vu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Co.axis};function vZe(n){var{x:e,y:r,width:i,height:o,orientation:s,mirror:a,axisLine:l,otherSvgProps:c}=n;if(!l)return null;var u=Fr(Fr(Fr({},c),Cl(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!a||s==="bottom"&&a);u=Fr(Fr({},u),{},{x1:e,y1:r+d*o,x2:e+i,y2:r+d*o})}else{var h=+(s==="left"&&!a||s==="right"&&a);u=Fr(Fr({},u),{},{x1:e+h*i,y1:r,x2:e+h*i,y2:r+o})}return M.createElement("line",am({},u,{className:Vt("recharts-cartesian-axis-line",Z3(l,"className"))}))}function xZe(n,e,r,i,o,s,a,l,c){var u,d,h,f,m,v,x=l?-1:1,b=n.tickSize||a,w=yt(n.tickCoord)?n.tickCoord:n.coordinate;switch(s){case"top":u=d=n.coordinate,f=r+ +!l*o,h=f-x*b,v=h-x*c,m=w;break;case"left":h=f=n.coordinate,d=e+ +!l*i,u=d-x*b,m=u-x*c,v=w;break;case"right":h=f=n.coordinate,d=e+ +l*i,u=d+x*b,m=u+x*c,v=w;break;default:u=d=n.coordinate,f=r+ +l*o,h=f+x*b,v=h+x*c,m=w;break}return{line:{x1:u,y1:h,x2:d,y2:f},tick:{x:m,y:v}}}function bZe(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function wZe(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function kZe(n){var{option:e,tickProps:r,value:i}=n,o,s=Vt(r.className,"recharts-cartesian-axis-tick-value");if(M.isValidElement(e))o=M.cloneElement(e,Fr(Fr({},r),{},{className:s}));else if(typeof e=="function")o=e(Fr(Fr({},r),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Vt(a,e?.className)),o=M.createElement(eI,am({},r,{className:a}),i)}return o}var SZe=M.forwardRef((n,e)=>{var{ticks:r=[],tick:i,tickLine:o,stroke:s,tickFormatter:a,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:f,y:m,width:v,height:x,tickSize:b,tickMargin:w,fontSize:S,letterSpacing:_,getTicksConfig:P,events:A,axisType:T}=n,E=iI(Fr(Fr({},P),{},{ticks:r}),S,_),L=bZe(d,h),$=wZe(d,h),z=Cl(P),B=U3(i),D={};typeof o=="object"&&(D=o);var Y=Fr(Fr({},z),{},{fill:"none"},D),I=E.map(te=>Fr({entry:te},xZe(te,f,m,v,x,d,b,h,w))),U=I.map(te=>{var{entry:J,line:oe}=te;return M.createElement(Ec,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},o&&M.createElement("line",am({},Y,oe,{className:Vt("recharts-cartesian-axis-tick-line",Z3(o,"className"))})))}),Z=I.map((te,J)=>{var{entry:oe,tick:q}=te,G=Fr(Fr(Fr(Fr({textAnchor:L,verticalAnchor:$},z),{},{stroke:"none",fill:s},B),q),{},{index:J,payload:oe,visibleTicksCount:E.length,tickFormatter:a,padding:c},u);return M.createElement(Ec,am({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},koe(A,oe,J)),i&&M.createElement(kZe,{option:i,tickProps:G,value:"".concat(typeof a=="function"?a(oe.value,J):oe.value).concat(l||"")}))});return M.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},Z.length>0&&M.createElement(Cd,{zIndex:Co.label},M.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:e},Z)),U.length>0&&M.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},U))}),CZe=M.forwardRef((n,e)=>{var{axisLine:r,width:i,height:o,className:s,hide:a,ticks:l,axisType:c}=n,u=fZe(n,hZe),[d,h]=M.useState(""),[f,m]=M.useState(""),v=M.useRef(null);M.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return dZe({ticks:v.current,label:(b=n.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var x=M.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=w;var S=w[0];if(S){var _=window.getComputedStyle(S),P=_.fontSize,A=_.letterSpacing;(P!==d||A!==f)&&(h(P),m(A))}}},[d,f]);return a||i!=null&&i<=0||o!=null&&o<=0?null:M.createElement(Cd,{zIndex:n.zIndex},M.createElement(Ec,{className:Vt("recharts-cartesian-axis",s)},M.createElement(vZe,{x:n.x,y:n.y,width:i,height:o,orientation:n.orientation,mirror:n.mirror,axisLine:r,otherSvgProps:Cl(n)}),M.createElement(SZe,{ref:x,axisType:c,events:u,fontSize:d,getTicksConfig:n,height:n.height,letterSpacing:f,mirror:n.mirror,orientation:n.orientation,padding:n.padding,stroke:n.stroke,tick:n.tick,tickFormatter:n.tickFormatter,tickLine:n.tickLine,tickMargin:n.tickMargin,tickSize:n.tickSize,tickTextProps:n.tickTextProps,ticks:l,unit:n.unit,width:n.width,x:n.x,y:n.y}),M.createElement(MGe,{x:n.x,y:n.y,width:n.width,height:n.height,lowerWidth:n.width,upperWidth:n.width},M.createElement(FGe,{label:n.label,labelRef:n.labelRef}),n.children)))}),oI=M.forwardRef((n,e)=>{var r=Lo(n,Vu);return M.createElement(CZe,am({},r,{ref:e}))});oI.displayName="CartesianAxis";var _Ze=["x1","y1","x2","y2","key"],AZe=["offset"],TZe=["xAxisId","yAxisId"],PZe=["xAxisId","yAxisId"];function SG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function eo(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(r),!0).forEach(function(i){MZe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function MZe(n,e,r){return(e=EZe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function EZe(n){var e=NZe(n,"string");return typeof e=="symbol"?e:e+""}function NZe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yp(){return yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},yp.apply(null,arguments)}function eC(n,e){if(n==null)return{};var r,i,o=jZe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function jZe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var OZe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:r,x:i,y:o,width:s,height:a,ry:l}=n;return M.createElement("rect",{x:i,y:o,ry:l,width:s,height:a,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function qle(n){var{option:e,lineItemProps:r}=n,i;if(M.isValidElement(e))i=M.cloneElement(e,r);else if(typeof e=="function")i=e(r);else{var o,{x1:s,y1:a,x2:l,y2:c,key:u}=r,d=eC(r,_Ze),h=(o=Cl(d))!==null&&o!==void 0?o:{},{offset:f}=h,m=eC(h,AZe);i=M.createElement("line",yp({},m,{x1:s,y1:a,x2:l,y2:c,fill:"none",key:u}))}return i}function DZe(n){var{x:e,width:r,horizontal:i=!0,horizontalPoints:o}=n;if(!i||!o||!o.length)return null;var{xAxisId:s,yAxisId:a}=n,l=eC(n,TZe),c=o.map((u,d)=>{var h=eo(eo({},l),{},{x1:e,y1:u,x2:e+r,y2:u,key:"line-".concat(d),index:d});return M.createElement(qle,{key:"line-".concat(d),option:i,lineItemProps:h})});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function IZe(n){var{y:e,height:r,vertical:i=!0,verticalPoints:o}=n;if(!i||!o||!o.length)return null;var{xAxisId:s,yAxisId:a}=n,l=eC(n,PZe),c=o.map((u,d)=>{var h=eo(eo({},l),{},{x1:u,y1:e,x2:u,y2:e+r,key:"line-".concat(d),index:d});return M.createElement(qle,{option:i,lineItemProps:h,key:"line-".concat(d)})});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function RZe(n){var{horizontalFill:e,fillOpacity:r,x:i,y:o,width:s,height:a,horizontalPoints:l,horizontal:c=!0}=n;if(!c||!e||!e.length||l==null)return null;var u=l.map(h=>Math.round(h+o-o)).sort((h,f)=>h-f);o!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],v=m?o+a-h:u[f+1]-h;if(v<=0)return null;var x=f%e.length;return M.createElement("rect",{key:"react-".concat(f),y:h,x:i,height:v,width:s,stroke:"none",fill:e[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function LZe(n){var{vertical:e=!0,verticalFill:r,fillOpacity:i,x:o,y:s,width:a,height:l,verticalPoints:c}=n;if(!e||!r||!r.length)return null;var u=c.map(h=>Math.round(h+o-o)).sort((h,f)=>h-f);o!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],v=m?o+a-h:u[f+1]-h;if(v<=0)return null;var x=f%r.length;return M.createElement("rect",{key:"react-".concat(f),x:h,y:s,width:v,height:l,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var zZe=(n,e)=>{var{xAxis:r,width:i,height:o,offset:s}=n;return fse(iI(eo(eo(eo({},Vu),r),{},{ticks:pse(r),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,e)},FZe=(n,e)=>{var{yAxis:r,width:i,height:o,offset:s}=n;return fse(iI(eo(eo(eo({},Vu),r),{},{ticks:pse(r),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,e)},$Ze={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Co.grid};function Vle(n){var e=wD(),r=kD(),i=kse(),o=eo(eo({},Lo(n,$Ze)),{},{x:yt(n.x)?n.x:i.left,y:yt(n.y)?n.y:i.top,width:yt(n.width)?n.width:i.width,height:yt(n.height)?n.height:i.height}),{xAxisId:s,yAxisId:a,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:f,verticalValues:m}=o,v=gs(),x=Nt($=>IK($,"xAxis",s,v)),b=Nt($=>IK($,"yAxis",a,v));if(!jc(u)||!jc(d)||!yt(l)||!yt(c))return null;var w=o.verticalCoordinatesGenerator||zZe,S=o.horizontalCoordinatesGenerator||FZe,{horizontalPoints:_,verticalPoints:P}=o;if((!_||!_.length)&&typeof S=="function"){var A=f&&f.length,T=S({yAxis:b?eo(eo({},b),{},{ticks:A?f:b.ticks}):void 0,width:e??u,height:r??d,offset:i},A?!0:h);F5(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(_=T)}if((!P||!P.length)&&typeof w=="function"){var E=m&&m.length,L=w({xAxis:x?eo(eo({},x),{},{ticks:E?m:x.ticks}):void 0,width:e??u,height:r??d,offset:i},E?!0:h);F5(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(P=L)}return M.createElement(Cd,{zIndex:o.zIndex},M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(OZe,{fill:o.fill,fillOpacity:o.fillOpacity,x:o.x,y:o.y,width:o.width,height:o.height,ry:o.ry}),M.createElement(RZe,yp({},o,{horizontalPoints:_})),M.createElement(LZe,yp({},o,{verticalPoints:P})),M.createElement(DZe,yp({},o,{offset:i,horizontalPoints:_,xAxis:x,yAxis:b})),M.createElement(IZe,yp({},o,{offset:i,verticalPoints:P,xAxis:x,yAxis:b}))))}Vle.displayName="CartesianGrid";var BZe={},Wle=ms({name:"errorBars",initialState:BZe,reducers:{addErrorBar:(n,e)=>{var{itemId:r,errorBar:i}=e.payload;n[r]||(n[r]=[]),n[r].push(i)},replaceErrorBar:(n,e)=>{var{itemId:r,prev:i,next:o}=e.payload;n[r]&&(n[r]=n[r].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?o:s))},removeErrorBar:(n,e)=>{var{itemId:r,errorBar:i}=e.payload;n[r]&&(n[r]=n[r].filter(o=>o.dataKey!==i.dataKey||o.direction!==i.direction))}}}),{addErrorBar:$bt,replaceErrorBar:Bbt,removeErrorBar:Hbt}=Wle.actions,HZe=Wle.reducer;function Ule(n,e){var r,i,o=Nt(u=>wd(u,n)),s=Nt(u=>kd(u,e)),a=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:di.allowDataOverflow,l=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:hi.allowDataOverflow,c=a||l;return{needClip:c,needClipX:a,needClipY:l}}function qZe(n){var{xAxisId:e,yAxisId:r,clipPathId:i}=n,o=nI(),{needClipX:s,needClipY:a,needClip:l}=Ule(e,r);if(!l||!o)return null;var{x:c,y:u,width:d,height:h}=o;return M.createElement("clipPath",{id:"clipPath-".concat(i)},M.createElement("rect",{x:s?c:c-d/2,y:a?u:u-h/2,width:s?d:d*2,height:a?h:h*2}))}function VZe(n){var e=U3(n),r=3,i=2;if(e!=null){var{r:o,strokeWidth:s}=e,a=Number(o),l=Number(s);return(Number.isNaN(a)||a<0)&&(a=r),(Number.isNaN(l)||l<0)&&(l=i),{r:a,strokeWidth:l}}return{r,strokeWidth:i}}var YT={exports:{}},ZT={};var CG;function WZe(){if(CG)return ZT;CG=1;var n=Fg();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,o=n.useRef,s=n.useEffect,a=n.useMemo,l=n.useDebugValue;return ZT.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var m=o(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=a(function(){function b(A){if(!w){if(w=!0,S=A,A=h(A),f!==void 0&&v.hasValue){var T=v.value;if(f(T,A))return _=T}return _=A}if(T=_,r(S,A))return T;var E=h(A);return f!==void 0&&f(T,E)?(S=A,T):(S=A,_=E)}var w=!1,S,_,P=d===void 0?null:d;return[function(){return b(u())},P===null?void 0:function(){return b(P())}]},[u,d,h,f]);var x=i(c,m[0],m[1]);return s(function(){v.hasValue=!0,v.value=x},[x]),l(x),x},ZT}var _G;function UZe(){return _G||(_G=1,YT.exports=WZe()),YT.exports}UZe();function KZe(n){n()}function GZe(){let n=null,e=null;return{clear(){n=null,e=null},notify(){KZe(()=>{let r=n;for(;r;)r.callback(),r=r.next})},get(){const r=[];let i=n;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0;const o=e={callback:r,next:null,prev:e};return o.prev?o.prev.next=o:n=o,function(){!i||n===null||(i=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:n=o.next)}}}}var AG={notify(){},get:()=>[]};function YZe(n,e){let r,i=AG,o=0,s=!1;function a(x){d();const b=i.subscribe(x);let w=!1;return()=>{w||(w=!0,b(),h())}}function l(){i.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return s}function d(){o++,r||(r=n.subscribe(c),i=GZe())}function h(){o--,r&&o===0&&(r(),r=void 0,i.clear(),i=AG)}function f(){s||(s=!0,d())}function m(){s&&(s=!1,h())}const v={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>i};return v}var ZZe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XZe=ZZe(),JZe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",QZe=JZe(),eXe=()=>XZe||QZe?M.useLayoutEffect:M.useEffect,tXe=eXe();function TG(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function nXe(n,e){if(TG(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(let o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(e,r[o])||!TG(n[r[o]],e[r[o]]))return!1;return!0}var rXe=Symbol.for("react-redux-context"),iXe=typeof globalThis<"u"?globalThis:{};function oXe(){if(!M.createContext)return{};const n=iXe[rXe]??=new Map;let e=n.get(M.createContext);return e||(e=M.createContext(null),n.set(M.createContext,e)),e}var sXe=oXe();function aXe(n){const{children:e,context:r,serverState:i,store:o}=n,s=M.useMemo(()=>{const c=YZe(o);return{store:o,subscription:c,getServerState:i?()=>i:void 0}},[o,i]),a=M.useMemo(()=>o.getState(),[o]);tXe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==o.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=r||sXe;return M.createElement(l.Provider,{value:s},e)}var lXe=aXe,cXe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function uXe(n,e){return n==null&&e==null?!0:typeof n=="number"&&typeof e=="number"?n===e||n!==n&&e!==e:n===e}function sI(n,e){var r=new Set([...Object.keys(n),...Object.keys(e)]);for(var i of r)if(cXe.has(i)){if(n[i]==null&&e[i]==null)continue;if(!nXe(n[i],e[i]))return!1}else if(!uXe(n[i],e[i]))return!1;return!0}function aI(n,e){var r,i;return(r=(i=n.graphicalItems.cartesianItems.find(o=>o.id===e))===null||i===void 0?void 0:i.xAxisId)!==null&&r!==void 0?r:zle}function lI(n,e){var r,i;return(r=(i=n.graphicalItems.cartesianItems.find(o=>o.id===e))===null||i===void 0?void 0:i.yAxisId)!==null&&r!==void 0?r:zle}var Kle=(n,e,r)=>Kae(n,"xAxis",aI(n,e),r),Gle=(n,e,r)=>Uae(n,"xAxis",aI(n,e),r),Yle=(n,e,r)=>Kae(n,"yAxis",lI(n,e),r),Zle=(n,e,r)=>Uae(n,"yAxis",lI(n,e),r),dXe=Te([Jn,Kle,Yle,Gle,Zle],(n,e,r,i,o)=>yd(n,"xAxis")?z5(e,i,!1):z5(r,o,!1)),hXe=(n,e)=>e,Xle=Te([pae,hXe],(n,e)=>n.filter(r=>r.type==="area").find(r=>r.id===e)),Jle=n=>{var e=Jn(n),r=yd(e,"xAxis");return r?"yAxis":"xAxis"},fXe=(n,e)=>{var r=Jle(n);return r==="yAxis"?lI(n,e):aI(n,e)},pXe=(n,e,r)=>Sae(n,Jle(n),fXe(n,e),r),mXe=Te([Xle,pXe],(n,e)=>{var r;if(!(n==null||e==null)){var{stackId:i}=n,o=OD(n);if(!(i==null||o==null)){var s=(r=e[i])===null||r===void 0?void 0:r.stackedData,a=s?.find(l=>l.key===o);if(a!=null)return a.map(l=>[l[0],l[1]])}}}),gXe=Te([Jn,Kle,Yle,Gle,Zle,mXe,mVe,dXe,Xle,PVe],(n,e,r,i,o,s,a,l,c,u)=>{var{chartData:d,dataStartIndex:h,dataEndIndex:f}=a;if(!(c==null||n!=="horizontal"&&n!=="vertical"||e==null||r==null||i==null||o==null||i.length===0||o.length===0||l==null)){var{data:m}=c,v;if(m&&m.length>0?v=m:v=d?.slice(h,f+1),v!=null)return IXe({layout:n,xAxis:e,yAxis:r,xAxisTicks:i,yAxisTicks:o,dataStartIndex:h,areaSettings:c,stackedData:s,displayedData:v,chartBaseValue:u,bandSize:l})}}),yXe=["id"],vXe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Ip(){return Ip=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Ip.apply(null,arguments)}function Qle(n,e){if(n==null)return{};var r,i,o=xXe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function xXe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function PG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function O0(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(r),!0).forEach(function(i){bXe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function bXe(n,e,r){return(e=wXe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function wXe(n){var e=kXe(n,"string");return typeof e=="symbol"?e:e+""}function kXe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tC(n,e){return n&&n!=="none"?n:e}var SXe=n=>{var{dataKey:e,name:r,stroke:i,fill:o,legendType:s,hide:a}=n;return[{inactive:a,dataKey:e,type:s,color:tC(i,o),value:mse(r,e),payload:n}]},CXe=M.memo(n=>{var{dataKey:e,data:r,stroke:i,strokeWidth:o,fill:s,name:a,hide:l,unit:c,tooltipType:u,id:d}=n,h={dataDefinedOnItem:r,positions:void 0,settings:{stroke:i,strokeWidth:o,fill:s,dataKey:e,nameKey:void 0,name:mse(a,e),hide:l,type:u,color:tC(i,s),unit:c,graphicalItemId:d}};return M.createElement(nYe,{tooltipEntrySettings:h})});function _Xe(n){var{clipPathId:e,points:r,props:i}=n,{needClip:o,dot:s,dataKey:a}=i,l=Cl(i);return M.createElement(CYe,{points:r,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:l,needClip:o,clipPathId:e})}function AXe(n){var{showLabels:e,children:r,points:i}=n,o=i.map(s=>{var a,l,c={x:(a=s.x)!==null&&a!==void 0?a:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return O0(O0({},c),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return M.createElement(ZGe,{value:e?o:void 0},r)}function MG(n){var{points:e,baseLine:r,needClip:i,clipPathId:o,props:s}=n,{layout:a,type:l,stroke:c,connectNulls:u,isRange:d}=s,{id:h}=s,f=Qle(s,yXe),m=Cl(f),v=Ks(f);return M.createElement(M.Fragment,null,e?.length>1&&M.createElement(Ec,{clipPath:i?"url(#clipPath-".concat(o,")"):void 0},M.createElement(V4,Ip({},v,{id:h,points:e,connectNulls:u,type:l,baseLine:r,layout:a,stroke:"none",className:"recharts-area-area"})),c!=="none"&&M.createElement(V4,Ip({},m,{className:"recharts-area-curve",layout:a,type:l,connectNulls:u,fill:"none",points:e})),c!=="none"&&d&&M.createElement(V4,Ip({},m,{className:"recharts-area-curve",layout:a,type:l,connectNulls:u,fill:"none",points:r}))),M.createElement(_Xe,{points:e,props:f,clipPathId:o}))}function TXe(n){var e,r,{alpha:i,baseLine:o,points:s,strokeWidth:a}=n,l=(e=s[0])===null||e===void 0?void 0:e.y,c=(r=s[s.length-1])===null||r===void 0?void 0:r.y;if(!mr(l)||!mr(c))return null;var u=i*Math.abs(l-c),d=Math.max(...s.map(h=>h.x||0));return yt(o)?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(...o.map(h=>h.x||0),d)),yt(d)?M.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}function PXe(n){var e,r,{alpha:i,baseLine:o,points:s,strokeWidth:a}=n,l=(e=s[0])===null||e===void 0?void 0:e.x,c=(r=s[s.length-1])===null||r===void 0?void 0:r.x;if(!mr(l)||!mr(c))return null;var u=i*Math.abs(l-c),d=Math.max(...s.map(h=>h.y||0));return yt(o)?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(...o.map(h=>h.y||0),d)),yt(d)?M.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}function MXe(n){var{alpha:e,layout:r,points:i,baseLine:o,strokeWidth:s}=n;return r==="vertical"?M.createElement(TXe,{alpha:e,points:i,baseLine:o,strokeWidth:s}):M.createElement(PXe,{alpha:e,points:i,baseLine:o,strokeWidth:s})}function EXe(n){var{needClip:e,clipPathId:r,props:i,previousPointsRef:o,previousBaselineRef:s}=n,{points:a,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:f,onAnimationEnd:m}=i,v=M.useMemo(()=>({points:a,baseLine:l}),[a,l]),x=Rse(v,"recharts-area-"),b=hHe(),[w,S]=M.useState(!1),_=!w,P=M.useCallback(()=>{typeof m=="function"&&m(),S(!1)},[m]),A=M.useCallback(()=>{typeof f=="function"&&f(),S(!0)},[f]);if(b==null)return null;var T=o.current,E=s.current;return M.createElement(AXe,{showLabels:_,points:a},i.children,M.createElement(Ise,{animationId:x,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:P,onAnimationStart:A,key:x},L=>{if(T){var $=T.length/a.length,z=L===1?a:a.map((D,Y)=>{var I=Math.floor(Y*$);if(T[I]){var U=T[I];return O0(O0({},D),{},{x:ac(U.x,D.x,L),y:ac(U.y,D.y,L)})}return D}),B;return yt(l)?B=ac(E,l,L):Ii(l)||_l(l)?B=ac(E,0,L):B=l.map((D,Y)=>{var I=Math.floor(Y*$);if(Array.isArray(E)&&E[I]){var U=E[I];return O0(O0({},D),{},{x:ac(U.x,D.x,L),y:ac(U.y,D.y,L)})}return D}),L>0&&(o.current=z,s.current=B),M.createElement(MG,{points:z,baseLine:B,needClip:e,clipPathId:r,props:i})}return L>0&&(o.current=a,s.current=l),M.createElement(Ec,null,c&&M.createElement("defs",null,M.createElement("clipPath",{id:"animationClipPath-".concat(r)},M.createElement(MXe,{alpha:L,points:a,baseLine:l,layout:b,strokeWidth:i.strokeWidth}))),M.createElement(Ec,{clipPath:"url(#animationClipPath-".concat(r,")")},M.createElement(MG,{points:a,baseLine:l,needClip:e,clipPathId:r,props:i})))}),M.createElement(QGe,{label:i.label}))}function NXe(n){var{needClip:e,clipPathId:r,props:i}=n,o=M.useRef(null),s=M.useRef();return M.createElement(EXe,{needClip:e,clipPathId:r,props:i,previousPointsRef:o,previousBaselineRef:s})}class jXe extends M.PureComponent{render(){var{hide:e,dot:r,points:i,className:o,top:s,left:a,needClip:l,xAxisId:c,yAxisId:u,width:d,height:h,id:f,baseLine:m,zIndex:v}=this.props;if(e)return null;var x=Vt("recharts-area",o),b=f,{r:w,strokeWidth:S}=VZe(r),_=Rle(r),P=w*2+S,A=l?"url(#clipPath-".concat(_?"":"dots-").concat(b,")"):void 0;return M.createElement(Cd,{zIndex:v},M.createElement(Ec,{className:x},l&&M.createElement("defs",null,M.createElement(qZe,{clipPathId:b,xAxisId:c,yAxisId:u}),!_&&M.createElement("clipPath",{id:"clipPath-dots-".concat(b)},M.createElement("rect",{x:a-P/2,y:s-P/2,width:d+P,height:h+P}))),M.createElement(NXe,{needClip:l,clipPathId:b,props:this.props})),M.createElement(xG,{points:i,mainColor:tC(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:A}),this.props.isRange&&Array.isArray(m)&&M.createElement(xG,{points:m,mainColor:tC(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:A}))}}var ece={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Co.area};function OXe(n){var e,r=Lo(n,ece),{activeDot:i,animationBegin:o,animationDuration:s,animationEasing:a,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:f,legendType:m,stroke:v,xAxisId:x,yAxisId:b}=r,w=Qle(r,vXe),S=Ug(),_=ple(),{needClip:P}=Ule(x,b),A=gs(),{points:T,isRange:E,baseLine:L}=(e=Nt(I=>gXe(I,n.id,A)))!==null&&e!==void 0?e:{},$=nI();if(S!=="horizontal"&&S!=="vertical"||$==null||_!=="AreaChart"&&_!=="ComposedChart")return null;var{height:z,width:B,x:D,y:Y}=$;return!T||!T.length?null:M.createElement(jXe,Ip({},w,{activeDot:i,animationBegin:o,animationDuration:s,animationEasing:a,baseLine:L,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:z,hide:h,layout:S,isAnimationActive:f==="auto"?!Qb.isSsr:f,isRange:E,legendType:m,needClip:P,points:T,stroke:v,width:B,left:D,top:Y,xAxisId:x,yAxisId:b}))}var DXe=(n,e,r,i,o)=>{var s=r??e;if(yt(s))return s;var a=n==="horizontal"?o:i,l=a.scale.domain();if(a.type==="number"){var c=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return s==="dataMin"?u:s==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function IXe(n){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:i},stackedData:o,layout:s,chartBaseValue:a,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:f,bandSize:m}=n,v=o&&o.length,x=DXe(s,a,r,l,c),b=s==="horizontal",w=!1,S=u.map((P,A)=>{var T,E,L;if(v)L=o[d+A];else{var $=Ri(P,i);Array.isArray($)?(L=$,w=!0):L=[x,$]}var z=(T=(E=L)===null||E===void 0?void 0:E[1])!==null&&T!==void 0?T:null,B=z==null||v&&!e&&Ri(P,i)==null;return b?{x:kU({axis:l,ticks:h,bandSize:m,entry:P,index:A}),y:B?null:c.scale(z),value:L,payload:P}:{x:B?null:l.scale(z),y:kU({axis:c,ticks:f,bandSize:m,entry:P,index:A}),value:L,payload:P}}),_;return v||w?_=S.map(P=>{var A=Array.isArray(P.value)?P.value[0]:null;return b?{x:P.x,y:A!=null&&P.y!=null?c.scale(A):null,payload:P.payload}:{x:A!=null?l.scale(A):null,y:P.y,payload:P.payload}}):_=b?c.scale(x):l.scale(x),{points:S,baseLine:_,isRange:w}}function RXe(n){var e=Lo(n,ece),r=gs();return M.createElement(lYe,{id:e.id,type:"area"},i=>M.createElement(M.Fragment,null,M.createElement(rYe,{legendPayload:SXe(e)}),M.createElement(CXe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),M.createElement(mYe,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:TBe(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),M.createElement(OXe,Ip({},e,{id:i}))))}var tce=M.memo(RXe,sI);tce.displayName="Area";var LXe=["domain","range"],zXe=["domain","range"];function EG(n,e){if(n==null)return{};var r,i,o=FXe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function FXe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function NG(n,e){return n===e?!0:Array.isArray(n)&&n.length===2&&Array.isArray(e)&&e.length===2?n[0]===e[0]&&n[1]===e[1]:!1}function nce(n,e){if(n===e)return!0;var{domain:r,range:i}=n,o=EG(n,LXe),{domain:s,range:a}=e,l=EG(e,zXe);return!NG(r,s)||!NG(i,a)?!1:sI(o,l)}var $Xe=["dangerouslySetInnerHTML","ticks","scale"],BXe=["id","scale"];function TE(){return TE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},TE.apply(null,arguments)}function jG(n,e){if(n==null)return{};var r,i,o=HXe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function HXe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function qXe(n){var e=Ur(),r=M.useRef(null);return M.useLayoutEffect(()=>{r.current===null?e(MYe(n)):r.current!==n&&e(EYe({prev:r.current,next:n})),r.current=n},[n,e]),M.useLayoutEffect(()=>()=>{r.current&&(e(NYe(r.current)),r.current=null)},[e]),null}var VXe=n=>{var{xAxisId:e,className:r}=n,i=Nt(yse),o=gs(),s="xAxis",a=Nt(w=>Wae(w,s,e,o)),l=Nt(w=>bWe(w,e)),c=Nt(w=>AWe(w,e)),u=Nt(w=>uae(w,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:f}=n,m=jG(n,$Xe),{id:v,scale:x}=u,b=jG(u,BXe);return M.createElement(oI,TE({},m,b,{x:c.x,y:c.y,width:l.width,height:l.height,className:Vt("recharts-".concat(s," ").concat(s),r),viewBox:i,ticks:a,axisType:s}))},WXe={allowDataOverflow:di.allowDataOverflow,allowDecimals:di.allowDecimals,allowDuplicatedCategory:di.allowDuplicatedCategory,angle:di.angle,axisLine:Vu.axisLine,height:di.height,hide:!1,includeHidden:di.includeHidden,interval:di.interval,minTickGap:di.minTickGap,mirror:di.mirror,orientation:di.orientation,padding:di.padding,reversed:di.reversed,scale:di.scale,tick:di.tick,tickCount:di.tickCount,tickLine:Vu.tickLine,tickSize:Vu.tickSize,type:di.type,xAxisId:0},UXe=n=>{var e=Lo(n,WXe);return M.createElement(M.Fragment,null,M.createElement(qXe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),M.createElement(VXe,e))},rce=M.memo(UXe,nce);rce.displayName="XAxis";var KXe=["dangerouslySetInnerHTML","ticks","scale"],GXe=["id","scale"];function PE(){return PE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},PE.apply(null,arguments)}function OG(n,e){if(n==null)return{};var r,i,o=YXe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function YXe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function ZXe(n){var e=Ur(),r=M.useRef(null);return M.useLayoutEffect(()=>{r.current===null?e(jYe(n)):r.current!==n&&e(OYe({prev:r.current,next:n})),r.current=n},[n,e]),M.useLayoutEffect(()=>()=>{r.current&&(e(DYe(r.current)),r.current=null)},[e]),null}var XXe=n=>{var{yAxisId:e,className:r,width:i,label:o}=n,s=M.useRef(null),a=M.useRef(null),l=Nt(yse),c=gs(),u=Ur(),d="yAxis",h=Nt(T=>MWe(T,e)),f=Nt(T=>PWe(T,e)),m=Nt(T=>Wae(T,d,e,c)),v=Nt(T=>dae(T,e));if(M.useLayoutEffect(()=>{if(!(i!=="auto"||!h||tI(o)||M.isValidElement(o)||v==null)){var T=s.current;if(T){var E=T.getCalculatedWidth();Math.round(h.width)!==Math.round(E)&&u(IYe({id:e,width:E}))}}},[m,h,u,o,e,i,v]),h==null||f==null||v==null)return null;var{dangerouslySetInnerHTML:x,ticks:b,scale:w}=n,S=OG(n,KXe),{id:_,scale:P}=v,A=OG(v,GXe);return M.createElement(oI,PE({},S,A,{ref:s,labelRef:a,x:f.x,y:f.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:h.width,height:h.height,className:Vt("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:m,axisType:d}))},JXe={allowDataOverflow:hi.allowDataOverflow,allowDecimals:hi.allowDecimals,allowDuplicatedCategory:hi.allowDuplicatedCategory,angle:hi.angle,axisLine:Vu.axisLine,hide:!1,includeHidden:hi.includeHidden,interval:hi.interval,minTickGap:hi.minTickGap,mirror:hi.mirror,orientation:hi.orientation,padding:hi.padding,reversed:hi.reversed,scale:hi.scale,tick:hi.tick,tickCount:hi.tickCount,tickLine:Vu.tickLine,tickSize:Vu.tickSize,type:hi.type,width:hi.width,yAxisId:0},QXe=n=>{var e=Lo(n,JXe);return M.createElement(M.Fragment,null,M.createElement(ZXe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),M.createElement(XXe,e))},ice=M.memo(QXe,nce);ice.displayName="YAxis";var eJe=(n,e)=>e,cI=Te([eJe,Jn,lae,oi,lle,Sd,qUe,Hi],ZUe),uI=n=>{var e=n.currentTarget.getBoundingClientRect(),r=e.width/n.currentTarget.offsetWidth,i=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/r),chartY:Math.round((n.clientY-e.top)/i)}},oce=Pa("mouseClick"),sce=Zb();sce.startListening({actionCreator:oce,effect:(n,e)=>{var r=n.payload,i=cI(e.getState(),uI(r));i?.activeIndex!=null&&e.dispatch(HWe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var ME=Pa("mouseMove"),ace=Zb(),yk=null;ace.startListening({actionCreator:ME,effect:(n,e)=>{var r=n.payload;yk!==null&&cancelAnimationFrame(yk);var i=uI(r);yk=requestAnimationFrame(()=>{var o=e.getState(),s=VD(o,o.tooltip.settings.shared);if(s==="axis"){var a=cI(o,i);a?.activeIndex!=null?e.dispatch(ele({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(Qae())}yk=null})}});function tJe(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":n==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var DG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},lce=ms({name:"rootProps",initialState:DG,reducers:{updateOptions:(n,e)=>{var r;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:DG.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className,n.baseValue=e.payload.baseValue,n.reverseStackOrder=e.payload.reverseStackOrder}}}),nJe=lce.reducer,{updateOptions:rJe}=lce.actions,cce=ms({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(n,e)=>e.payload}}),{updatePolarOptions:qbt}=cce.actions,iJe=cce.reducer,uce=Pa("keyDown"),dce=Pa("focus"),dI=Zb();dI.startListening({actionCreator:uce,effect:(n,e)=>{var r=e.getState(),i=r.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:o}=r.tooltip,s=n.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=WD(o,Qg(r),nw(r),sw(r)),l=a==null?-1:Number(a);if(!(!Number.isFinite(l)||l<0)){var c=Sd(r);if(s==="Enter"){var u=X5(r,"axis","hover",String(o.index));e.dispatch(wE({active:!o.active,activeIndex:o.index,activeCoordinate:u}));return}var d=OWe(r),h=d==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,m=l+f*h;if(!(c==null||m>=c.length||m<0)){var v=X5(r,"axis","hover",String(m));e.dispatch(wE({active:!0,activeIndex:m.toString(),activeCoordinate:v}))}}}}}});dI.startListening({actionCreator:dce,effect:(n,e)=>{var r=e.getState(),i=r.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:o}=r.tooltip;if(!o.active&&o.index==null){var s="0",a=X5(r,"axis","hover",String(s));e.dispatch(wE({active:!0,activeIndex:s,activeCoordinate:a}))}}}});var la=Pa("externalEvent"),hce=Zb(),XT=new Map;hce.startListening({actionCreator:la,effect:(n,e)=>{var{handler:r,reactEvent:i}=n.payload;if(r!=null){i.persist();var o=i.type,s=XT.get(o);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:PUe(l),activeDataKey:AUe(l),activeIndex:Xx(l),activeLabel:dle(l),activeTooltipIndex:Xx(l),isTooltipActive:MUe(l)};r(c,i)}finally{XT.delete(o)}});XT.set(o,a)}}});var oJe=Te([Xg],n=>n.tooltipItemPayloads),sJe=Te([oJe,ow,(n,e)=>e,(n,e,r)=>r],(n,e,r,i)=>{var o=n.find(l=>l.settings.graphicalItemId===i);if(o!=null){var{positions:s}=o;if(s!=null){var a=e(s,r);return a}}}),fce=Pa("touchMove"),pce=Zb();pce.startListening({actionCreator:fce,effect:(n,e)=>{var r=n.payload;if(!(r.touches==null||r.touches.length===0)){var i=e.getState(),o=VD(i,i.tooltip.settings.shared);if(o==="axis"){var s=r.touches[0];if(s==null)return;var a=cI(i,uI({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&e.dispatch(ele({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(o==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(DBe),h=(l=u.getAttribute(IBe))!==null&&l!==void 0?l:void 0,f=Jg(i).find(x=>x.id===h);if(d==null||f==null||h==null)return;var{dataKey:m}=f,v=sJe(i,d,h);e.dispatch(BWe({activeDataKey:m,activeIndex:d,activeCoordinate:v,activeGraphicalItemId:h}))}}}});var aJe=zoe({brush:WYe,cartesianAxis:RYe,chartData:PKe,errorBars:HZe,graphicalItems:fYe,layout:yBe,legend:EHe,options:SKe,polarAxis:tYe,polarOptions:iJe,referenceElements:JYe,rootProps:nJe,tooltip:qWe,zIndex:uKe}),lJe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return H$e({reducer:aJe,preloadedState:e,middleware:i=>{var o;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((o="es6")!==null&&o!==void 0?o:"")}).concat([sce.middleware,ace.middleware,dI.middleware,hce.middleware,pce.middleware])},enhancers:i=>{var o=i;return typeof i=="function"&&(o=i()),o.concat(Qoe({type:"raf"}))},devTools:{serialize:{replacer:tJe},name:"recharts-".concat(r)}})};function cJe(n){var{preloadedState:e,children:r,reduxStoreName:i}=n,o=gs(),s=M.useRef(null);if(o)return r;s.current==null&&(s.current=lJe(e,i));var a=fD;return M.createElement(lXe,{context:a,store:s.current},r)}function uJe(n){var{layout:e,margin:r}=n,i=Ur(),o=gs();return M.useEffect(()=>{o||(i(pBe(e)),i(fBe(r)))},[i,o,e,r]),null}var dJe=M.memo(uJe,sI);function hJe(n){var e=Ur();return M.useEffect(()=>{e(rJe(n))},[e,n]),null}function IG(n){var{zIndex:e,isPanorama:r}=n,i=M.useRef(null),o=Ur();return M.useLayoutEffect(()=>(i.current&&o(lKe({zIndex:e,element:i.current,isPanorama:r})),()=>{o(cKe({zIndex:e,isPanorama:r}))}),[o,e,r]),M.createElement("g",{tabIndex:-1,ref:i})}function RG(n){var{children:e,isPanorama:r}=n,i=Nt(JUe);if(!i||i.length===0)return e;var o=i.filter(a=>a<0),s=i.filter(a=>a>0);return M.createElement(M.Fragment,null,o.map(a=>M.createElement(IG,{key:a,zIndex:a,isPanorama:r})),e,s.map(a=>M.createElement(IG,{key:a,zIndex:a,isPanorama:r})))}var fJe=["children"];function pJe(n,e){if(n==null)return{};var r,i,o=mJe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function mJe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function nC(){return nC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},nC.apply(null,arguments)}var gJe={width:"100%",height:"100%",display:"block"},yJe=M.forwardRef((n,e)=>{var r=wD(),i=kD(),o=Nse();if(!jc(r)||!jc(i))return null;var{children:s,otherAttributes:a,title:l,desc:c}=n,u,d;return a!=null&&(typeof a.tabIndex=="number"?u=a.tabIndex:u=o?0:void 0,typeof a.role=="string"?d=a.role:d=o?"application":void 0),M.createElement(nD,nC({},a,{title:l,desc:c,role:d,tabIndex:u,width:r,height:i,style:gJe,ref:e}),s)}),vJe=n=>{var{children:e}=n,r=Nt(u6);if(!r)return null;var{width:i,height:o,y:s,x:a}=r;return M.createElement(nD,{width:i,height:o,x:a,y:s},e)},LG=M.forwardRef((n,e)=>{var{children:r}=n,i=pJe(n,fJe),o=gs();return o?M.createElement(vJe,null,M.createElement(RG,{isPanorama:!0},r)):M.createElement(yJe,nC({ref:e},i),M.createElement(RG,{isPanorama:!1},r))});function xJe(){var n=Ur(),[e,r]=M.useState(null),i=Nt(OBe);return M.useEffect(()=>{if(e!=null){var o=e.getBoundingClientRect(),s=o.width/e.offsetWidth;mr(s)&&s!==i&&n(gBe(s))}},[e,n,i]),r}function zG(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function bJe(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(r),!0).forEach(function(i){wJe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function wJe(n,e,r){return(e=kJe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function kJe(n){var e=SJe(n,"string");return typeof e=="symbol"?e:e+""}function SJe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lm(){return lm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},lm.apply(null,arguments)}var CJe=()=>(LKe(),null);function rC(n){if(typeof n=="number")return n;if(typeof n=="string"){var e=parseFloat(n);if(!Number.isNaN(e))return e}return 0}var _Je=M.forwardRef((n,e)=>{var r,i,o=M.useRef(null),[s,a]=M.useState({containerWidth:rC((r=n.style)===null||r===void 0?void 0:r.width),containerHeight:rC((i=n.style)===null||i===void 0?void 0:i.height)}),l=M.useCallback((u,d)=>{a(h=>{var f=Math.round(u),m=Math.round(d);return h.containerWidth===f&&h.containerHeight===m?h:{containerWidth:f,containerHeight:m}})},[]),c=M.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var f=v=>{var{width:x,height:b}=v[0].contentRect;l(x,b)},m=new ResizeObserver(f);m.observe(u),o.current=m}},[e,l]);return M.useEffect(()=>()=>{var u=o.current;u?.disconnect()},[l]),M.createElement(M.Fragment,null,M.createElement(h6,{width:s.containerWidth,height:s.containerHeight}),M.createElement("div",lm({ref:c},n)))}),AJe=M.forwardRef((n,e)=>{var{width:r,height:i}=n,[o,s]=M.useState({containerWidth:rC(r),containerHeight:rC(i)}),a=M.useCallback((c,u)=>{s(d=>{var h=Math.round(c),f=Math.round(u);return d.containerWidth===h&&d.containerHeight===f?d:{containerWidth:h,containerHeight:f}})},[]),l=M.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();a(u,d)}},[e,a]);return M.createElement(M.Fragment,null,M.createElement(h6,{width:o.containerWidth,height:o.containerHeight}),M.createElement("div",lm({ref:l},n)))}),TJe=M.forwardRef((n,e)=>{var{width:r,height:i}=n;return M.createElement(M.Fragment,null,M.createElement(h6,{width:r,height:i}),M.createElement("div",lm({ref:e},n)))}),PJe=M.forwardRef((n,e)=>{var{width:r,height:i}=n;return td(r)||td(i)?M.createElement(AJe,lm({},n,{ref:e})):M.createElement(TJe,lm({},n,{ref:e}))});function MJe(n){return n===!0?_Je:PJe}var EJe=M.forwardRef((n,e)=>{var{children:r,className:i,height:o,onClick:s,onContextMenu:a,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:v,onTouchStart:x,style:b,width:w,responsive:S,dispatchTouchEvents:_=!0}=n,P=M.useRef(null),A=Ur(),[T,E]=M.useState(null),[L,$]=M.useState(null),z=xJe(),B=bD(),D=B?.width>0?B.width:w,Y=B?.height>0?B.height:o,I=M.useCallback(le=>{z(le),typeof e=="function"&&e(le),E(le),$(le),le!=null&&(P.current=le)},[z,e,E,$]),U=M.useCallback(le=>{A(oce(le)),A(la({handler:s,reactEvent:le}))},[A,s]),Z=M.useCallback(le=>{A(ME(le)),A(la({handler:u,reactEvent:le}))},[A,u]),te=M.useCallback(le=>{A(Qae()),A(la({handler:d,reactEvent:le}))},[A,d]),J=M.useCallback(le=>{A(ME(le)),A(la({handler:h,reactEvent:le}))},[A,h]),oe=M.useCallback(()=>{A(dce())},[A]),q=M.useCallback(le=>{A(uce(le.key))},[A]),G=M.useCallback(le=>{A(la({handler:a,reactEvent:le}))},[A,a]),re=M.useCallback(le=>{A(la({handler:l,reactEvent:le}))},[A,l]),V=M.useCallback(le=>{A(la({handler:c,reactEvent:le}))},[A,c]),ve=M.useCallback(le=>{A(la({handler:f,reactEvent:le}))},[A,f]),ke=M.useCallback(le=>{A(la({handler:x,reactEvent:le}))},[A,x]),pe=M.useCallback(le=>{_&&A(fce(le)),A(la({handler:v,reactEvent:le}))},[A,_,v]),me=M.useCallback(le=>{A(la({handler:m,reactEvent:le}))},[A,m]),Me=MJe(S);return M.createElement(xle.Provider,{value:T},M.createElement(Qie.Provider,{value:L},M.createElement(Me,{width:D??b?.width,height:Y??b?.height,className:Vt("recharts-wrapper",i),style:bJe({position:"relative",cursor:"default",width:D,height:Y},b),onClick:U,onContextMenu:G,onDoubleClick:re,onFocus:oe,onKeyDown:q,onMouseDown:V,onMouseEnter:Z,onMouseLeave:te,onMouseMove:J,onMouseUp:ve,onTouchEnd:me,onTouchMove:pe,onTouchStart:ke,ref:I},M.createElement(CJe,null),r)))}),NJe=["width","height","responsive","children","className","style","compact","title","desc"];function jJe(n,e){if(n==null)return{};var r,i,o=OJe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function OJe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}var DJe=M.forwardRef((n,e)=>{var{width:r,height:i,responsive:o,children:s,className:a,style:l,compact:c,title:u,desc:d}=n,h=jJe(n,NJe),f=Cl(h);return c?M.createElement(M.Fragment,null,M.createElement(h6,{width:r,height:i}),M.createElement(LG,{otherAttributes:f,title:u,desc:d},s)):M.createElement(EJe,{className:a,style:l,width:r,height:i,responsive:o??!1,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},M.createElement(LG,{otherAttributes:f,title:u,desc:d,ref:e},M.createElement(eZe,null,s)))});function EE(){return EE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},EE.apply(null,arguments)}var IJe={top:5,right:5,bottom:5,left:5},RJe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:IJe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},LJe=M.forwardRef(function(e,r){var i,o=Lo(e.categoricalChartProps,RJe),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return M.createElement(cJe,{preloadedState:{options:d},reduxStoreName:(i=u.id)!==null&&i!==void 0?i:s},M.createElement(VYe,{chartData:u.data}),M.createElement(dJe,{layout:o.layout,margin:o.margin}),M.createElement(hJe,{baseValue:o.baseValue,accessibilityLayer:o.accessibilityLayer,barCategoryGap:o.barCategoryGap,maxBarSize:o.maxBarSize,stackOffset:o.stackOffset,barGap:o.barGap,barSize:o.barSize,syncId:o.syncId,syncMethod:o.syncMethod,className:o.className,reverseStackOrder:o.reverseStackOrder}),M.createElement(DJe,EE({},o,{ref:r})))}),zJe=["axis"],FJe=M.forwardRef((n,e)=>M.createElement(LJe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:zJe,tooltipPayloadSearcher:wKe,categoricalChartProps:n,ref:e}));const FG=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#a4de6c","#d084d0","#8dd1e1","#ffb347","#a28dd1","#ff6b9d","#c2c2f0","#ffcc80","#81c784","#ff8a65","#ba68c8"],$G=n=>FG[n%FG.length],$Je=({timelineData:n,topics:e})=>{if(!n||n.length===0)return p.jsx("div",{className:"timeline-empty",children:p.jsx("p",{children:"Aucune donne temporelle disponible. Les documents doivent avoir des mtadonnes d'anne."})});const r=e.reduce((a,l)=>{const c=l.keywords.slice(0,3).join(" - ");return a[`topic_${l.id}`]=`Topic ${l.id}: ${c}`,a},{}),i=({active:a,payload:l,label:c})=>a&&l&&l.length?p.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"10px",borderRadius:"5px",fontSize:"12px"},children:[p.jsxs("p",{style:{fontWeight:"bold",marginBottom:"5px"},children:["Anne: ",c]}),l.sort((u,d)=>d.value-u.value).map((u,d)=>p.jsxs("p",{style:{color:u.color,margin:"2px 0"},children:[r[u.dataKey],": ",u.value," doc(s)"]},d))]}):null,o=new Set;n.forEach(a=>{Object.keys(a).forEach(l=>{l!=="year"&&o.add(l)})});const s=Array.from(o).sort((a,l)=>{const c=parseInt(a.replace("topic_","")),u=parseInt(l.replace("topic_",""));return c-u});return p.jsx("div",{className:"topic-timeline",style:{width:"100%",height:"400px"},children:p.jsx(cHe,{width:"100%",height:"100%",children:p.jsxs(FJe,{data:n,margin:{top:10,right:30,left:0,bottom:0},stackOffset:"silhouette",children:[p.jsx(Vle,{strokeDasharray:"3 3",stroke:"#444"}),p.jsx(rce,{dataKey:"year",stroke:"#ccc"}),p.jsx(ice,{stroke:"#ccc"}),p.jsx(WKe,{content:p.jsx(i,{})}),p.jsx(Ese,{wrapperStyle:{fontSize:"11px",maxHeight:"80px",overflowY:"auto"},formatter:a=>r[a]||a}),s.map(a=>{const l=parseInt(a.replace("topic_",""));return p.jsx(tce,{type:"monotone",dataKey:a,stackId:"1",stroke:$G(l),fill:$G(l),fillOpacity:.7},a)})]})})})},Bf=20,BJe=()=>{const{t:n}=qt(),[e,r]=M.useState(null),[i,o]=M.useState(!1),[s,a]=M.useState(null),[l,c]=M.useState("words"),u=async()=>{o(!0),a(null);try{console.log(" Fetching text statistics...");const m=await window.electron.corpus.getTextStatistics({topN:Bf});m.success?(console.log(" Text statistics loaded:",m.statistics),r(m.statistics)):a(m.error||"Failed to load text statistics")}catch(m){console.error(" Error loading text statistics:",m),a(m.message||"An error occurred while loading text statistics")}finally{o(!1)}};M.useEffect(()=>{u()},[]);const d=()=>{u()};if(i)return p.jsxs("div",{className:"textometrics-loading",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:n("textometrics.loading")})]});if(s)return p.jsxs("div",{className:"textometrics-error",children:[p.jsx("p",{className:"error-message",children:s}),p.jsx("button",{onClick:d,className:"btn-refresh",children:n("textometrics.retry")})]});if(!e)return p.jsxs("div",{className:"textometrics-empty",children:[p.jsx("p",{children:n("textometrics.noStatistics")}),p.jsx("button",{onClick:u,className:"btn-analyze",children:n("textometrics.analyze")})]});const h=m=>m.toLocaleString("fr-FR"),f=m=>(m*100).toFixed(2)+"%";return p.jsxs("div",{className:"textometrics-panel",children:[p.jsxs("div",{className:"textometrics-stats-grid",children:[p.jsxs("div",{className:"textometrics-stat-card",children:[p.jsx("div",{className:"stat-label",children:n("textometrics.totalWordsNoStopwords")}),p.jsx("div",{className:"stat-value",children:h(e.totalWords)})]}),p.jsxs("div",{className:"textometrics-stat-card",children:[p.jsx("div",{className:"stat-label",children:n("textometrics.totalWordsWithStopwords")}),p.jsx("div",{className:"stat-value",children:h(e.totalWordsWithStopwords)})]}),p.jsxs("div",{className:"textometrics-stat-card",children:[p.jsx("div",{className:"stat-label",children:n("textometrics.uniqueVocabulary")}),p.jsx("div",{className:"stat-value",children:h(e.vocabularySize)})]}),p.jsxs("div",{className:"textometrics-stat-card",children:[p.jsx("div",{className:"stat-label",children:n("textometrics.lexicalRichness")}),p.jsx("div",{className:"stat-value",children:f(e.lexicalRichness)}),p.jsx("div",{className:"stat-description",children:n("textometrics.lexicalRichnessDesc")})]}),e.totalDocuments&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"textometrics-stat-card",children:[p.jsx("div",{className:"stat-label",children:n("textometrics.avgWordsPerDoc")}),p.jsx("div",{className:"stat-value",children:h(Math.round(e.averageWordsPerDocument||0))})]}),p.jsxs("div",{className:"textometrics-stat-card",children:[p.jsx("div",{className:"stat-label",children:n("textometrics.avgVocabPerDoc")}),p.jsx("div",{className:"stat-value",children:h(Math.round(e.averageVocabularyPerDocument||0))})]})]})]}),p.jsx("div",{className:"textometrics-controls",children:p.jsxs("button",{onClick:d,className:"btn-refresh",children:[" ",n("textometrics.refresh")]})}),p.jsxs("div",{className:"textometrics-tabs",children:[p.jsx("button",{className:`tab-button ${l==="words"?"active":""}`,onClick:()=>c("words"),children:n("textometrics.frequentWords")}),p.jsx("button",{className:`tab-button ${l==="bigrams"?"active":""}`,onClick:()=>c("bigrams"),children:n("textometrics.bigrams")}),p.jsx("button",{className:`tab-button ${l==="trigrams"?"active":""}`,onClick:()=>c("trigrams"),children:n("textometrics.trigrams")})]}),p.jsxs("div",{className:"textometrics-content",children:[l==="words"&&p.jsxs("div",{className:"word-frequency-table",children:[p.jsx("h4",{children:n("textometrics.topWords",{count:Bf})}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:n("textometrics.rank")}),p.jsx("th",{children:n("textometrics.word")}),p.jsx("th",{children:n("textometrics.occurrences")}),p.jsx("th",{children:n("textometrics.frequency")}),p.jsx("th",{children:n("textometrics.bar")})]})}),p.jsx("tbody",{children:e.topWords.slice(0,Bf).map((m,v)=>p.jsxs("tr",{children:[p.jsx("td",{className:"rank",children:v+1}),p.jsx("td",{className:"word",children:m.word}),p.jsx("td",{className:"count",children:h(m.count)}),p.jsx("td",{className:"frequency",children:f(m.frequency)}),p.jsx("td",{className:"bar-cell",children:p.jsx("div",{className:"frequency-bar",style:{width:`${m.frequency/e.topWords[0].frequency*100}%`}})})]},v))})]})]}),l==="bigrams"&&p.jsxs("div",{className:"ngram-frequency-table",children:[p.jsx("h4",{children:n("textometrics.topBigrams",{count:Bf})}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:n("textometrics.rank")}),p.jsx("th",{children:n("textometrics.bigram")}),p.jsx("th",{children:n("textometrics.occurrences")}),p.jsx("th",{children:n("textometrics.bar")})]})}),p.jsx("tbody",{children:e.topBigrams.slice(0,Bf).map((m,v)=>p.jsxs("tr",{children:[p.jsx("td",{className:"rank",children:v+1}),p.jsx("td",{className:"ngram",children:m.ngram}),p.jsx("td",{className:"count",children:h(m.count)}),p.jsx("td",{className:"bar-cell",children:p.jsx("div",{className:"frequency-bar",style:{width:`${m.count/e.topBigrams[0].count*100}%`}})})]},v))})]})]}),l==="trigrams"&&p.jsxs("div",{className:"ngram-frequency-table",children:[p.jsx("h4",{children:n("textometrics.topTrigrams",{count:Bf})}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:n("textometrics.rank")}),p.jsx("th",{children:n("textometrics.trigram")}),p.jsx("th",{children:n("textometrics.occurrences")}),p.jsx("th",{children:n("textometrics.bar")})]})}),p.jsx("tbody",{children:e.topTrigrams.slice(0,Bf).map((m,v)=>p.jsxs("tr",{children:[p.jsx("td",{className:"rank",children:v+1}),p.jsx("td",{className:"ngram",children:m.ngram}),p.jsx("td",{className:"count",children:h(m.count)}),p.jsx("td",{className:"bar-cell",children:p.jsx("div",{className:"frequency-bar",style:{width:`${m.count/e.topTrigrams[0].count*100}%`}})})]},v))})]})]})]})]})},HJe=()=>{const{t:n}=qt(),{currentProject:e}=zc(),[r,i]=M.useState(null),[o,s]=M.useState(null),[a,l]=M.useState(null),[c,u]=M.useState(null),[d,h]=M.useState(null),[f,m]=M.useState(!0),[v,x]=M.useState(!1),[b,w]=M.useState(null),[S,_]=M.useState(null),[P,A]=M.useState(null),[T,E]=M.useState(10),[L,$]=M.useState(.7),[z,B]=M.useState(!1),[D,Y]=M.useState({year:null,author:null,language:null,topic:null}),I=M.useRef();M.useEffect(()=>{e?U():(m(!1),i(null),s(null),l(null),u(null),w(null))},[e]),M.useEffect(()=>{V()},[D,a]);const U=async()=>{m(!0),w(null);try{let F=.7;try{const de=await window.electron.config.get("rag");de?.explorationSimilarityThreshold&&(F=de.explorationSimilarityThreshold,$(F))}catch(de){console.warn("Could not load RAG config, using default threshold:",de)}const X=await window.electron.corpus.getStatistics();X.success?i(X.statistics):console.warn("Failed to load statistics:",X.error);const ie=await window.electron.corpus.getGraph({includeSimilarityEdges:!0,similarityThreshold:F,includeAuthorNodes:!1,computeLayout:!0});if(ie.success)l(ie.graph),s(ie.graph);else throw new Error(ie.error||"Failed to load graph");try{const de=await window.electron.corpus.loadTopics();if(de.success){u(de),console.log(" Loaded saved topics:",de.topics.length),de.options?.nrTopics&&de.options.nrTopics!=="auto"&&(E(de.options.nrTopics),console.log(" Restored numTopics:",de.options.nrTopics));try{const fe=await window.electron.corpus.getTopicTimeline();fe.success&&(h(fe.timeline),console.log(" Loaded topic timeline:",fe.timeline.length,"years"))}catch(fe){console.log(" Could not load topic timeline:",fe)}}else console.log(" No saved topics found")}catch(de){console.log(" Could not load saved topics:",de)}}catch(F){console.error("Error loading corpus data:",F),w(F.message||"Failed to load corpus data")}finally{m(!1)}},Z=async()=>{B(!0);try{const F=await window.electron.corpus.getGraph({includeSimilarityEdges:!0,similarityThreshold:L,includeAuthorNodes:!1,computeLayout:!0});if(F.success)l(F.graph),s(F.graph),console.log(` Graph regenerated with threshold ${L}`);else throw new Error(F.error||"Failed to regenerate graph")}catch(F){console.error("Error regenerating graph:",F),alert(n("corpus.graphRegenerateError")+": "+F.message)}finally{B(!1)}},te=async()=>{x(!0);try{const F=await window.electron.corpus.analyzeTopics({minTopicSize:3,language:"multilingual",nGramRange:[1,3],nrTopics:T});if(F.success){u(F);try{const X=await window.electron.corpus.getTopicTimeline();X.success&&(h(X.timeline),console.log(" Loaded topic timeline:",X.timeline.length,"years"))}catch(X){console.log(" Could not load topic timeline:",X)}}else{console.error("Failed to load topics:",F.error);const X=F.error||"";X.includes("not available")||X.includes("not start")||X.includes("timeout")?alert(n("corpus.topicServiceUnavailable")):alert(n("corpus.topicAnalysisErrorGeneric")+": "+X)}}catch(F){console.error("Error loading topics:",F);const X=F.message||"";X.includes("not available")||X.includes("not start")||X.includes("timeout")?alert(n("corpus.topicServiceUnavailable")):alert(n("corpus.topicAnalysisErrorGeneric")+": "+X)}finally{x(!1)}},J=()=>{if(!c)return;const F={exportDate:new Date().toISOString(),analysisDate:c.analysisDate||new Date().toISOString(),statistics:c.statistics||{},topics:c.topics.map(fe=>({id:fe.id,keywords:fe.keywords,size:fe.size,documents:(a?.nodes||[]).filter(be=>c.topicAssignments?.[be.id]===fe.id).map(be=>({id:be.id,title:be.metadata?.title||be.label,author:be.metadata?.author,year:be.metadata?.year}))})),outliers:(c.outliers||[]).map(fe=>{const be=a?.nodes.find(Pe=>Pe.id===fe);return{id:fe,title:be?.metadata?.title||be?.label,author:be?.metadata?.author}})},X=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),ie=URL.createObjectURL(X),de=document.createElement("a");de.href=ie,de.download=`topics-export-${new Date().toISOString().split("T")[0]}.json`,de.click(),URL.revokeObjectURL(ie)},oe=()=>{if(!c)return;let F=`Document_ID,Document_Title,Author,Year,Topic_ID,Topic_Keywords
`;(a?.nodes||[]).filter(be=>be.type==="document").forEach(be=>{const Pe=be.id,Ie=(be.metadata?.title||be.label).replace(/"/g,'""'),Le=(be.metadata?.author||"").replace(/"/g,'""'),Ne=be.metadata?.year||"",at=c.topicAssignments?.[Pe]??-1;let Ze="";if(at>=0){const ct=c.topics.find(bt=>bt.id===at);ct&&(Ze=ct.keywords.join(";"))}else Ze="OUTLIER";F+=`"${Pe}","${Ie}","${Le}","${Ne}",${at},"${Ze}"
`});const ie=new Blob([F],{type:"text/csv"}),de=URL.createObjectURL(ie),fe=document.createElement("a");fe.href=de,fe.download=`topics-by-document-${new Date().toISOString().split("T")[0]}.csv`,fe.click(),URL.revokeObjectURL(de)},q=()=>{if(!c)return;let F=`# Analyse Thmatique - Export

`;F+=`**Date d'export:** ${new Date().toLocaleDateString()}
`,F+=`**Nombre de topics:** ${c.topics.length}

`,F+=`---

`,c.topics.forEach(fe=>{F+=`## Topic ${fe.id}

`,F+=`**Mots-cls:** ${fe.keywords.join(", ")}

`,F+=`**Taille:** ${fe.size} documents

`;const be=(a?.nodes||[]).filter(Pe=>c.topicAssignments?.[Pe.id]===fe.id);be.length>0&&(F+=`**Documents:**

`,be.forEach(Pe=>{const Ie=Pe.metadata?.title||Pe.label,Le=Pe.metadata?.author||"",Ne=Pe.metadata?.year||"";F+=`- ${Ie}${Le?` (${Le}`:""}${Ne?`, ${Ne})`:Le?")":""}
`}),F+=`
`)});const X=new Blob([F],{type:"text/markdown"}),ie=URL.createObjectURL(X),de=document.createElement("a");de.href=ie,de.download=`topics-export-${new Date().toISOString().split("T")[0]}.md`,de.click(),URL.revokeObjectURL(ie)},G=()=>{if(!a)return;console.log(` Exporting GEXF: ${a.nodes.length} nodes, ${a.edges.length} edges`);let F=`<?xml version="1.0" encoding="UTF-8"?>
`;F+=`<gexf xmlns="http://www.gexf.net/1.2draft" version="1.2">
`,F+=`  <meta lastmodifieddate="${new Date().toISOString().split("T")[0]}">
`,F+=`    <creator>ClioDesk</creator>
`,F+=`    <description>Knowledge Graph Export</description>
`,F+=`  </meta>
`,F+=`  <graph mode="static" defaultedgetype="directed">
`,F+=`    <attributes class="node">
`,F+=`      <attribute id="0" title="type" type="string"/>
`,F+=`      <attribute id="1" title="title" type="string"/>
`,F+=`      <attribute id="2" title="author" type="string"/>
`,F+=`      <attribute id="3" title="year" type="string"/>
`,F+=`      <attribute id="4" title="pageCount" type="integer"/>
`,F+=`      <attribute id="5" title="centrality" type="float"/>
`,F+=`    </attributes>
`,F+=`    <attributes class="edge">
`,F+=`      <attribute id="0" title="type" type="string"/>
`,F+=`      <attribute id="1" title="weight" type="float"/>
`,F+=`    </attributes>
`,F+=`    <nodes>
`,a.nodes.forEach(fe=>{const be=(fe.label||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Pe=(fe.metadata?.title||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Ie=(fe.metadata?.author||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");F+=`      <node id="${fe.id}" label="${be}">
`,F+=`        <attvalues>
`,F+=`          <attvalue for="0" value="${fe.type}"/>
`,F+=`          <attvalue for="1" value="${Pe}"/>
`,F+=`          <attvalue for="2" value="${Ie}"/>
`,F+=`          <attvalue for="3" value="${fe.metadata?.year||""}"/>
`,F+=`          <attvalue for="4" value="${fe.metadata?.pageCount||0}"/>
`,F+=`          <attvalue for="5" value="${fe.centrality||0}"/>
`,F+=`        </attvalues>
`,F+=`      </node>
`}),F+=`    </nodes>
`,F+=`    <edges>
`,a.edges.forEach((fe,be)=>{const Pe=typeof fe.source=="object"?fe.source.id:fe.source,Ie=typeof fe.target=="object"?fe.target.id:fe.target;F+=`      <edge id="${be}" source="${Pe}" target="${Ie}">
`,F+=`        <attvalues>
`,F+=`          <attvalue for="0" value="${fe.type}"/>
`,F+=`          <attvalue for="1" value="${fe.weight}"/>
`,F+=`        </attvalues>
`,F+=`      </edge>
`}),F+=`    </edges>
`,F+=`  </graph>
`,F+="</gexf>";const X=new Blob([F],{type:"application/gexf+xml"}),ie=URL.createObjectURL(X),de=document.createElement("a");de.href=ie,de.download=`knowledge-graph-${new Date().toISOString().split("T")[0]}.gexf`,de.click(),URL.revokeObjectURL(ie)},re=F=>{if(!c?.topicAssignments||!a)return[];const X=Object.entries(c.topicAssignments).filter(([ie,de])=>de===F).map(([ie,de])=>ie);return a.nodes.filter(ie=>X.includes(ie.id))},V=()=>{if(!a)return;let F=[...a.nodes];if(D.year!==null&&(F=F.filter(de=>de.metadata?.year===D.year?.toString())),D.author!==null&&(F=F.filter(de=>de.metadata?.author===D.author)),D.language!==null&&(F=F.filter(de=>!0)),D.topic!==null&&c?.topicAssignments){const de=Object.entries(c.topicAssignments).filter(([fe,be])=>be===D.topic).map(([fe,be])=>fe);F=F.filter(fe=>de.includes(fe.id))}const X=new Set(F.map(de=>de.id)),ie=a.edges.filter(de=>X.has(de.source)&&X.has(de.target));s({nodes:F,edges:ie})},ve=()=>{Y({year:null,author:null,language:null,topic:null})},ke=()=>{if(!a)return[];const F=new Set;return a.nodes.forEach(X=>{X.metadata?.year&&F.add(parseInt(X.metadata.year))}),Array.from(F).sort((X,ie)=>X-ie)},pe=()=>{if(!a)return[];const F=new Set;return a.nodes.forEach(X=>{X.metadata?.author&&F.add(X.metadata.author)}),Array.from(F).sort()},me=F=>{_(F)},Me=F=>{if(F.type==="author")return"#FFB84D";if(F.community!==void 0){const X=["#4A90E2","#50C878","#FF6B6B","#9B59B6","#F4A460"];return X[F.community%X.length]}return"#4A90E2"},le=F=>F.centrality!==void 0?Math.max(4,Math.min(12,4+F.centrality*2)):6,ze=F=>{switch(F.type){case"citation":return"#FF6B6B";case"similarity":return"#50C878";case"co-citation":return"#9B59B6";default:return"#CCCCCC"}};if(!e)return p.jsx("div",{className:"corpus-explorer-panel",children:p.jsxs("div",{className:"corpus-empty",children:[p.jsx("div",{className:"empty-icon",children:""}),p.jsx("h3",{children:n("corpus.noProject")}),p.jsx("p",{children:n("corpus.openOrCreateProject")})]})});if(f)return p.jsx("div",{className:"corpus-explorer-panel",children:p.jsxs("div",{className:"corpus-loading",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:n("corpus.loading")})]})});if(b)return p.jsx("div",{className:"corpus-explorer-panel",children:p.jsxs("div",{className:"corpus-error",children:[p.jsx("h3",{children:n("corpus.error")}),p.jsx("p",{children:b}),p.jsx("button",{onClick:U,children:n("corpus.retry")})]})});if(!r||!o||o.nodes.length===0)return p.jsx("div",{className:"corpus-explorer-panel",children:p.jsxs("div",{className:"corpus-empty",children:[p.jsx("div",{className:"empty-icon",children:""}),p.jsx("h3",{children:n("corpus.emptyCorpus")}),p.jsx("p",{children:n("corpus.indexDocuments")})]})});const nt=()=>{window.dispatchEvent(new CustomEvent("show-methodology-modal",{detail:{feature:"corpus"}}))};return p.jsxs("div",{className:"corpus-explorer-panel",children:[p.jsx("div",{className:"corpus-header",children:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p.jsx("h3",{children:n("corpus.exploration")}),p.jsx(sc,{content:n("corpus.tooltipHelp"),onLearnMore:nt})]})}),p.jsx(On,{title:n("corpus.filters"),defaultExpanded:!1,children:p.jsxs("div",{className:"filters-container",children:[p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:n("corpus.year")}),p.jsxs("select",{value:D.year||"",onChange:F=>Y({...D,year:F.target.value?parseInt(F.target.value):null}),children:[p.jsx("option",{value:"",children:n("corpus.allYears")}),ke().map(F=>p.jsx("option",{value:F,children:F},F))]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:n("corpus.author")}),p.jsxs("select",{value:D.author||"",onChange:F=>Y({...D,author:F.target.value||null}),children:[p.jsx("option",{value:"",children:n("corpus.allAuthors")}),pe().map(F=>p.jsx("option",{value:F,children:F},F))]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:n("corpus.language")}),p.jsxs("select",{value:D.language||"",onChange:F=>Y({...D,language:F.target.value||null}),children:[p.jsx("option",{value:"",children:n("corpus.allLanguages")}),(r?.languages||[]).map(F=>p.jsx("option",{value:F,children:F},F))]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:n("corpus.topic")}),p.jsxs("select",{value:D.topic!==null?D.topic:"",onChange:F=>Y({...D,topic:F.target.value?parseInt(F.target.value):null}),disabled:!c,children:[p.jsx("option",{value:"",children:n("corpus.allTopics")}),(c?.topics||[]).map(F=>p.jsxs("option",{value:F.id,children:["Topic ",F.id,": ",F.keywords.slice(0,3).join(", ")]},F.id))]})]}),p.jsx("button",{onClick:ve,className:"clear-filters-btn",children:n("corpus.resetFilters")})]})}),p.jsxs(On,{title:n("corpus.statistics"),defaultExpanded:!0,children:[p.jsxs("div",{className:"corpus-stats",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-value",children:r.documentCount}),p.jsx("div",{className:"stat-label",children:n("corpus.documents")})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-value",children:r.totalCitationsExtracted}),p.jsx("div",{className:"stat-label",children:n("corpus.extractedCitations")}),p.jsxs("div",{className:"stat-detail",children:[r.citationCount," ",n("corpus.internalCitations")," (",Math.round(r.citationCount/Math.max(r.totalCitationsExtracted,1)*100),"%)"]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-value",children:r.authorCount}),p.jsx("div",{className:"stat-label",children:n("corpus.authors")})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-value",children:r.languageCount}),p.jsx("div",{className:"stat-label",children:n("corpus.languages")})]})]}),r.yearRange&&p.jsxs("div",{className:"stat-info",children:[p.jsx("span",{className:"stat-info-label",children:n("corpus.period")}),p.jsxs("span",{className:"stat-info-value",children:[r.yearRange.min," - ",r.yearRange.max]})]}),r.languages&&r.languages.length>0&&p.jsxs("div",{className:"stat-info",children:[p.jsxs("span",{className:"stat-info-label",children:[n("corpus.languages"),":"]}),p.jsx("span",{className:"stat-info-value",children:r.languages.join(", ")})]})]}),p.jsx(On,{title:n("corpus.textometrics"),defaultExpanded:!1,children:p.jsx(BJe,{})}),p.jsx(On,{title:n("corpus.topicAnalysis"),defaultExpanded:!1,children:c?p.jsxs("div",{className:"topics-list",children:[p.jsxs("div",{className:"topics-header",children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[p.jsx("span",{children:n("corpus.topicsIdentified",{count:c.topics?.length||0})}),c.statistics&&p.jsxs("span",{style:{fontSize:"0.85em",color:"#666"},children:[n("corpus.documentsAnalyzed",{analyzed:c.statistics.numDocumentsInTopics,total:c.statistics.totalDocuments}),c.statistics.numOutliers>0&&p.jsxs("span",{style:{marginLeft:"0.5rem"},children:["(",c.statistics.numOutliers," ",n("corpus.outliers"),")"]})]})]}),p.jsxs("div",{className:"topics-actions",children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9em"},children:[n("corpus.nbTopics"),p.jsx("input",{type:"number",min:"2",max:"50",value:T,onChange:F=>E(parseInt(F.target.value)||10),className:"topics-number-input",style:{width:"60px"}})]}),p.jsx("button",{onClick:te,disabled:v,className:"reload-topics-btn",children:n(v?"corpus.analyzing":"corpus.reanalyze")}),p.jsx("button",{onClick:J,className:"export-btn",title:"JSON",children:" JSON"}),p.jsx("button",{onClick:oe,className:"export-btn",title:"CSV",children:" CSV"}),p.jsx("button",{onClick:q,className:"export-btn",title:"Markdown",children:" MD"})]})]}),d&&d.length>0&&p.jsxs("div",{className:"topic-timeline-section",children:[p.jsx("h4",{style:{margin:"10px 0",fontSize:"14px",fontWeight:500},children:n("corpus.topicTimeline")}),p.jsx($Je,{timelineData:d,topics:c.topics})]}),(c.topics||[]).map(F=>{const X=re(F.id),ie=P===F.id;return p.jsxs("div",{className:`topic-card ${D.topic===F.id?"topic-selected":""} ${ie?"topic-expanded":""}`,children:[p.jsxs("div",{className:"topic-header",onClick:()=>Y({...D,topic:D.topic===F.id?null:F.id}),children:[p.jsxs("span",{className:"topic-id",children:["Topic ",F.id]}),p.jsxs("span",{className:"topic-size",children:[F.size," ",n("corpus.topicDocuments")]})]}),p.jsx("div",{className:"topic-keywords",children:F.keywords.slice(0,5).map((de,fe)=>p.jsx("span",{className:"topic-keyword",children:de},fe))}),p.jsx("button",{className:"topic-expand-btn",onClick:de=>{de.stopPropagation(),A(ie?null:F.id)},children:ie?` ${n("corpus.hideDocuments")}`:` ${n("corpus.showDocuments",{count:X.length})}`}),ie&&p.jsx("div",{className:"topic-documents",children:X.map(de=>p.jsxs("div",{className:"topic-document-item",children:[p.jsx("span",{className:"doc-title",children:de.metadata?.title||de.label}),de.metadata?.author&&p.jsxs("span",{className:"doc-author",children:[" - ",de.metadata.author]}),de.metadata?.year&&p.jsxs("span",{className:"doc-year",children:[" (",de.metadata.year,")"]})]},de.id))})]},F.id)})]}):p.jsxs("div",{className:"topics-empty",children:[p.jsx("p",{children:n("corpus.noTopicAnalysis")}),p.jsx("div",{className:"topics-config",children:p.jsxs("label",{children:[n("corpus.numTopics"),p.jsx("input",{type:"number",min:"2",max:"50",value:T,onChange:F=>E(parseInt(F.target.value)||10),className:"topics-number-input"})]})}),p.jsx("button",{onClick:te,disabled:v,className:"load-topics-btn",children:n(v?"corpus.analyzing":"corpus.analyzeTopics")}),p.jsx("p",{className:"topics-help",children:n("corpus.topicHelp")})]})}),p.jsx(On,{title:n("corpus.knowledgeGraph"),defaultExpanded:!0,children:p.jsxs("div",{className:"graph-container",children:[p.jsxs("div",{className:"graph-controls",style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"10px",padding:"8px",backgroundColor:"var(--bg-secondary)",borderRadius:"4px"},children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9em"},children:[n("corpus.similarityThreshold"),p.jsx("input",{type:"range",min:"0.5",max:"0.95",step:"0.05",value:L,onChange:F=>$(parseFloat(F.target.value)),style:{width:"100px"}}),p.jsx("span",{style:{minWidth:"40px"},children:L.toFixed(2)})]}),p.jsx("button",{onClick:Z,disabled:z,className:"reload-topics-btn",title:n("corpus.regenerateGraph"),children:n(z?"corpus.regenerating":"corpus.regenerateGraph")})]}),p.jsxs("div",{className:"graph-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[p.jsxs("div",{className:"graph-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color",style:{backgroundColor:"#FF6B6B"}}),p.jsx("span",{children:n("corpus.citations")})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color",style:{backgroundColor:"#50C878"}}),p.jsx("span",{children:n("corpus.similarity")})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color",style:{backgroundColor:"#9B59B6"}}),p.jsx("span",{children:n("corpus.coCitations")})]})]}),p.jsxs("button",{onClick:G,className:"export-btn",title:n("corpus.exportGEXF"),children:[" ",n("corpus.exportGEXF")]})]}),p.jsx("div",{className:"graph-visualization",children:p.jsx(eD,{ref:I,graphData:{nodes:o.nodes,links:o.edges},nodeLabel:F=>{const X=F;return X.metadata?.title||X.label},nodeColor:F=>Me(F),nodeVal:F=>le(F),linkColor:F=>ze(F),linkWidth:F=>F.weight||1,linkDirectionalArrowLength:F=>F.type==="citation"?4:0,linkDirectionalArrowRelPos:1,onNodeClick:me,enableNodeDrag:!0,enableZoomPanInteraction:!0,d3AlphaDecay:.02,d3VelocityDecay:.3})}),S&&p.jsxs("div",{className:"node-details",children:[p.jsx("h4",{children:n("corpus.nodeDetails")}),p.jsxs("div",{className:"node-info",children:[p.jsxs("div",{className:"node-info-row",children:[p.jsx("span",{className:"node-info-label",children:n("corpus.nodeTitle")}),p.jsx("span",{className:"node-info-value",children:S.metadata?.title||S.label})]}),S.metadata?.author&&p.jsxs("div",{className:"node-info-row",children:[p.jsx("span",{className:"node-info-label",children:n("corpus.nodeAuthor")}),p.jsx("span",{className:"node-info-value",children:S.metadata.author})]}),S.metadata?.year&&p.jsxs("div",{className:"node-info-row",children:[p.jsx("span",{className:"node-info-label",children:n("corpus.nodeYear")}),p.jsx("span",{className:"node-info-value",children:S.metadata.year})]}),S.centrality!==void 0&&p.jsxs("div",{className:"node-info-row",children:[p.jsx("span",{className:"node-info-label",children:n("corpus.nodeCentrality")}),p.jsx("span",{className:"node-info-value",children:S.centrality.toFixed(2)})]}),S.community!==void 0&&p.jsxs("div",{className:"node-info-row",children:[p.jsx("span",{className:"node-info-label",children:n("corpus.nodeCommunity")}),p.jsx("span",{className:"node-info-value",children:S.community})]})]}),p.jsx("button",{onClick:()=>_(null),children:n("corpus.close")})]})]})}),p.jsxs("div",{className:"graph-info",children:[p.jsxs("div",{className:"graph-info-item",children:[p.jsx("span",{className:"graph-info-label",children:n("corpus.nodes")}),p.jsx("span",{className:"graph-info-value",children:o.nodes.length})]}),p.jsxs("div",{className:"graph-info-item",children:[p.jsx("span",{className:"graph-info-label",children:n("corpus.links")}),p.jsx("span",{className:"graph-info-value",children:o.edges.length})]})]})]})},qJe=El((n,e)=>({sessions:[],selectedSession:null,events:[],aiOperations:[],chatMessages:[],statistics:null,allEvents:[],allAIOperations:[],allChatMessages:[],loading:!1,error:null,hideEmptySessions:!0,viewScope:"session",filters:{},loadSessions:async()=>{n({loading:!0,error:null});try{const r=await window.electron.history.getSessions();if(r.success){const i=r.sessions.map(o=>({...o,startedAt:new Date(o.startedAt),endedAt:o.endedAt?new Date(o.endedAt):void 0}));n({sessions:i,loading:!1})}else n({error:r.error,loading:!1})}catch(r){n({error:r.message,loading:!1})}},selectSession:async r=>{const i=e().sessions.find(o=>o.id===r);n({selectedSession:i||null}),i&&await Promise.all([e().loadEvents(r),e().loadAIOperations(r),e().loadChatHistory(r)])},loadEvents:async r=>{n({loading:!0});try{const i=await window.electron.history.getEvents(r);if(i.success){const o=i.events.map(s=>({...s,timestamp:new Date(s.timestamp)}));n({events:o,loading:!1})}else n({error:i.error,loading:!1})}catch(i){n({error:i.message,loading:!1})}},loadAIOperations:async r=>{try{const i=await window.electron.history.getAIOperations(r);if(i.success){const o=i.operations.map(s=>({...s,timestamp:new Date(s.timestamp)}));n({aiOperations:o})}}catch(i){console.error("Failed to load AI operations:",i)}},loadChatHistory:async r=>{try{const i=await window.electron.history.getChatHistory(r);if(i.success){const o=i.messages.map(s=>({...s,timestamp:new Date(s.timestamp)}));n({chatMessages:o})}}catch(i){console.error("Failed to load chat history:",i)}},loadStatistics:async()=>{try{const r=await window.electron.history.getStatistics();r.success&&n({statistics:r.statistics})}catch(r){console.error("Failed to load statistics:",r)}},exportReport:async(r,i)=>{n({loading:!0});try{const o=await window.electron.history.exportReport(r,i);if(o.success){const s=new Blob([o.report],{type:i==="json"?"application/json":"text/plain"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a;const c=i==="markdown"?"md":i==="json"?"json":"tex";l.download=`session-report-${r.substring(0,8)}.${c}`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a),n({loading:!1})}else n({error:o.error,loading:!1})}catch(o){n({error:o.message,loading:!1})}},setFilters:r=>{n({filters:{...e().filters,...r}})},searchEvents:async()=>{n({loading:!0});try{const r=await window.electron.history.searchEvents(e().filters);if(r.success){const i=r.events.map(o=>({...o,timestamp:new Date(o.timestamp)}));n({events:i,loading:!1})}else n({error:r.error,loading:!1})}catch(r){n({error:r.message,loading:!1})}},clearError:()=>{n({error:null})},setHideEmptySessions:r=>{n({hideEmptySessions:r})},setViewScope:r=>{n({viewScope:r}),r==="project"&&e().loadAllProjectData()},loadAllProjectData:async()=>{n({loading:!0});try{const[r,i,o]=await Promise.all([window.electron.history.getAllEvents(),window.electron.history.getAllAIOperations(),window.electron.history.getAllChatMessages()]),s=r.success?r.events.map(c=>({...c,timestamp:new Date(c.timestamp)})):[],a=i.success?i.operations.map(c=>({...c,timestamp:new Date(c.timestamp)})):[],l=o.success?o.messages.map(c=>({...c,timestamp:new Date(c.timestamp)})):[];n({allEvents:s,allAIOperations:a,allChatMessages:l,loading:!1})}catch(r){n({error:r.message,loading:!1})}}}));function VJe(n){const{eventType:e,eventData:r}=n;switch(e){case"ai_operation":{const i=r?.operationType||"inconnue";return{label:{rag_query:"Recherche documentaire (RAG)",summarization:"Gnration de rsum",citation_extraction:"Extraction de citations",topic_modeling:"Modlisation thmatique"}[i]||`Opration IA: ${i}`,description:"Une opration d'intelligence artificielle a t effectue sur vos documents."}}case"document_operation":{const i=r?.operationType||"inconnue",o=r?.filePath||"",s=o.split("/").pop()||o;return{label:{save:"Sauvegarde de document",create:"Cration de document",delete:"Suppression de document"}[i]||`Document: ${i}`,description:s?`Fichier: ${s}`:""}}case"pdf_operation":{const i=r?.operationType||"inconnue",o=r?.documentId||"";return{label:{import:"Import de PDF",delete:"Suppression de PDF",reindex:"Rindexation de PDF"}[i]||`PDF: ${i}`,description:o?`Document: ${o}`:""}}case"chat_message":{const i=r?.role||"inconnu";return{label:{user:"Question pose",assistant:"Rponse de l'assistant"}[i]||"Message de chat",description:r?.preview||""}}case"session_start":return{label:"Dbut de session",description:"Ouverture du projet"};case"session_end":return{label:"Fin de session",description:"Fermeture du projet"};case"bibliography_import":return{label:"Import bibliographique",description:r?.count?`${r.count} rfrences importes`:"Rfrences importes"};case"bibliography_update":return{label:"Mise  jour bibliographique",description:"La bibliographie a t modifie"};case"corpus_analysis":return{label:"Analyse du corpus",description:"Analyse thmatique ou statistique effectue"};case"graph_generated":return{label:"Gnration du graphe",description:"Le graphe d'exploration a t gnr"};case"export_pdf":return{label:"Export PDF",description:r?.outputPath?`Export vers: ${r.outputPath.split("/").pop()}`:"Document export en PDF"};case"export_word":return{label:"Export Word",description:r?.outputPath?`Export vers: ${r.outputPath.split("/").pop()}`:"Document export en Word"};case"export_latex":return{label:"Export LaTeX",description:"Document export en LaTeX"};case"search_performed":return{label:"Recherche effectue",description:r?.query?`Requte: "${r.query}"`:""};case"config_changed":return{label:"Configuration modifie",description:r?.key?`Paramtre: ${r.key}`:"Paramtres mis  jour"};default:return{label:mce(e),description:r?WJe(r):""}}}function mce(n){return n.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function WJe(n){const e=[];for(const[r,i]of Object.entries(n)){if(i==null||r==="id")continue;const o=mce(r);if(typeof i=="string"){const s=i.length>50?i.substring(0,50)+"...":i;e.push(`${o}: ${s}`)}else typeof i=="number"?e.push(`${o}: ${i}`):typeof i=="boolean"&&e.push(`${o}: ${i?"Oui":"Non"}`);if(e.length>=3)break}return e.join(" | ")}const UJe=({events:n,title:e="Timeline des vnements"})=>p.jsxs("div",{className:"session-timeline",children:[p.jsx("h3",{children:e}),n.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"Aucun vnement dans cette session"})}):p.jsx("div",{className:"timeline-vertical",children:n.map((r,i)=>{const{label:o,description:s}=VJe({eventType:r.eventType,eventData:r.eventData});return p.jsxs("div",{className:"timeline-item",children:[p.jsxs("div",{className:"timeline-connector",children:[p.jsx("div",{className:"timeline-dot"}),i<n.length-1&&p.jsx("div",{className:"timeline-line"})]}),p.jsxs("div",{className:"timeline-content",children:[p.jsxs("div",{className:"timeline-header",children:[p.jsx("span",{className:"timeline-event-type",children:o}),p.jsx("span",{className:"timeline-time",children:r.timestamp.toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s&&p.jsx("div",{className:"timeline-description",children:s})]})]},r.id)})})]}),KJe=({operations:n})=>{const[e,r]=M.useState(null),i=o=>{r(e===o?null:o)};return p.jsxs("div",{className:"ai-operations-table",children:[p.jsx("h3",{children:"Journal des Oprations IA"}),n.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"Aucune opration IA dans cette session"})}):p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Heure"}),p.jsx("th",{children:"Opration"}),p.jsx("th",{children:"Modle"}),p.jsx("th",{children:"Dure"}),p.jsx("th",{children:"Succs"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:n.map(o=>p.jsxs(_a.Fragment,{children:[p.jsxs("tr",{children:[p.jsx("td",{children:o.timestamp.toLocaleTimeString("fr-FR")}),p.jsx("td",{children:o.operationType}),p.jsx("td",{children:o.modelName||"N/A"}),p.jsx("td",{children:o.durationMs?`${o.durationMs}ms`:"N/A"}),p.jsx("td",{children:o.success?"":""}),p.jsx("td",{children:p.jsx("button",{onClick:()=>i(o.id),children:e===o.id?"Rduire":"Dtails"})})]}),e===o.id&&p.jsx("tr",{className:"expanded-row",children:p.jsx("td",{colSpan:6,children:p.jsxs("div",{className:"operation-details",children:[o.inputText&&p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Entre:"}),p.jsx("pre",{children:o.inputText.substring(0,500)})]}),o.outputText&&p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Sortie:"}),p.jsx("pre",{children:o.outputText.substring(0,500)})]}),o.inputMetadata&&p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Mtadonnes d'entre:"}),p.jsx("pre",{children:JSON.stringify(o.inputMetadata,null,2)})]}),o.outputMetadata&&p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Mtadonnes de sortie:"}),p.jsx("pre",{children:JSON.stringify(o.outputMetadata,null,2)})]}),o.modelParameters&&p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Paramtres du modle:"}),p.jsx("pre",{children:JSON.stringify(o.modelParameters,null,2)})]}),o.errorMessage&&p.jsxs("div",{className:"detail-section error",children:[p.jsx("h4",{children:"Erreur:"}),p.jsx("pre",{children:o.errorMessage})]})]})})})]},o.id))})]})]})},GJe=({messages:n})=>{const{t:e}=qt("common"),r=i=>{const o=i.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"}),s=i.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return`${o} ${s}`};return p.jsxs("div",{className:"chat-history-view",children:[p.jsx("h3",{children:e("journal.chatHistory")}),n.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:e("chat.emptyState.message")})}):p.jsx("div",{className:"chat-messages",children:n.map(i=>p.jsxs("div",{className:`chat-message ${i.role}`,children:[p.jsxs("div",{className:"message-header",children:[p.jsx("span",{className:"message-role",children:i.role==="user"?e("chat.you"):e("chat.assistant")}),p.jsx("span",{className:"message-time",children:r(i.timestamp)})]}),p.jsx("div",{className:"message-content",children:i.content}),i.sources&&i.sources.length>0&&p.jsxs("div",{className:"message-sources",children:[p.jsxs("strong",{children:[e("chat.sources"),":"]}),p.jsx("ul",{children:i.sources.map((o,s)=>p.jsxs("li",{children:[o.documentTitle||"Document"," (",e("chat.page")," ",o.pageNumber,", ",e("chat.similarity"),": ",o.similarity.toFixed(2),")"]},s))})]})]},i.id))})]})},YJe=()=>{const{t:n}=qt("common"),{sessions:e,selectedSession:r,events:i,aiOperations:o,chatMessages:s,statistics:a,allEvents:l,allAIOperations:c,allChatMessages:u,loading:d,error:h,hideEmptySessions:f,viewScope:m,loadSessions:v,selectSession:x,loadStatistics:b,exportReport:w,clearError:S,setHideEmptySessions:_,setViewScope:P,loadAllProjectData:A}=qJe(),[T,E]=M.useState("sessions");M.useEffect(()=>{v(),b()},[v,b]),M.useEffect(()=>{m==="project"&&A()},[m,A]);const L=()=>{window.dispatchEvent(new CustomEvent("show-methodology-modal",{detail:{feature:"journal"}}))},$=f?e.filter(Y=>Y.eventCount>0):e,z=m==="project"?l:i,B=m==="project"?c:o,D=m==="project"?u:s;return d&&e.length===0?p.jsx("div",{className:"journal-panel",children:p.jsxs("div",{className:"journal-loading",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:n("journal.loading")})]})}):p.jsxs("div",{className:"journal-panel",children:[p.jsxs("div",{className:"journal-header",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p.jsx("h2",{children:n("journal.title")}),p.jsx(sc,{content:n("journal.tooltipHelp"),onLearnMore:L})]}),a&&p.jsxs("div",{className:"journal-stats-compact",children:[p.jsxs("span",{children:[a.totalSessions," ",n("journal.sessions")]}),p.jsxs("span",{children:[a.totalEvents," ",n("journal.events")]}),p.jsxs("span",{children:[a.totalAIOperations," ",n("journal.aiOperations")]})]})]}),h&&p.jsxs("div",{className:"journal-error",children:[p.jsx("p",{children:h}),p.jsx("button",{onClick:S,children:n("journal.close")})]}),p.jsxs("div",{className:"journal-scope-selector",children:[p.jsxs("div",{className:"scope-buttons",children:[p.jsx("button",{className:m==="session"?"active":"",onClick:()=>P("session"),children:n("journal.bySession")}),p.jsx("button",{className:m==="project"?"active":"",onClick:()=>P("project"),children:n("journal.projectOverview")})]}),m==="session"&&p.jsxs("label",{className:"hide-empty-checkbox",children:[p.jsx("input",{type:"checkbox",checked:f,onChange:Y=>_(Y.target.checked)}),n("journal.hideEmptySessions")]})]}),p.jsxs("div",{className:"journal-view-tabs",children:[m==="session"&&p.jsx("button",{className:T==="sessions"?"active":"",onClick:()=>E("sessions"),children:n("journal.sessionsTab")}),p.jsx("button",{className:T==="timeline"?"active":"",onClick:()=>E("timeline"),disabled:m==="session"&&!r,children:n("journal.timelineTab")}),p.jsx("button",{className:T==="ai-ops"?"active":"",onClick:()=>E("ai-ops"),disabled:m==="session"&&!r,children:n("journal.aiOpsTab")}),p.jsx("button",{className:T==="chat"?"active":"",onClick:()=>E("chat"),disabled:m==="session"&&!r,children:n("journal.chatHistory")})]}),p.jsxs("div",{className:"journal-content",children:[m==="session"&&T==="sessions"&&p.jsx("div",{className:"sessions-list",children:$.length===0?p.jsx("div",{className:"empty-state",children:f&&e.length>0?p.jsxs(p.Fragment,{children:[p.jsx("p",{children:n("journal.allSessionsEmpty")}),p.jsx("p",{className:"help-text",children:n("journal.uncheckHideEmpty")})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{children:n("journal.noSessionsRecorded")}),p.jsx("p",{className:"help-text",children:n("journal.sessionsAutoCreated")})]})}):$.map(Y=>p.jsxs("div",{className:`session-card ${r?.id===Y.id?"selected":""}`,onClick:()=>x(Y.id),children:[p.jsxs("div",{className:"session-header",children:[p.jsx("span",{className:"session-date",children:Y.startedAt.toLocaleDateString()}),p.jsx("span",{className:"session-time",children:Y.startedAt.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]}),p.jsxs("div",{className:"session-info",children:[p.jsx("span",{className:"session-duration",children:Y.totalDurationMs?`${Math.round(Y.totalDurationMs/1e3/60)} min`:n("journal.active")}),p.jsxs("span",{className:"session-events",children:[Y.eventCount," ",n("journal.events")]})]}),r?.id===Y.id&&p.jsxs("div",{className:"session-actions",children:[p.jsx("button",{onClick:I=>{I.stopPropagation(),w(Y.id,"markdown")},children:n("journal.exportMD")}),p.jsx("button",{onClick:I=>{I.stopPropagation(),w(Y.id,"json")},children:n("journal.exportJSON")}),p.jsx("button",{onClick:I=>{I.stopPropagation(),w(Y.id,"latex")},children:n("journal.exportLaTeX")})]})]},Y.id))}),T==="timeline"&&(m==="project"||r)&&p.jsx(UJe,{events:z,title:n(m==="project"?"journal.fullProjectTimeline":"journal.sessionTimeline")}),T==="ai-ops"&&(m==="project"||r)&&p.jsx(KJe,{operations:B}),T==="chat"&&(m==="project"||r)&&p.jsx(GJe,{messages:D}),m==="project"&&T==="sessions"&&p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:n("journal.selectViewAbove")}),p.jsx("p",{className:"help-text",children:n("journal.projectOverviewHelp")})]})]})]})},eb=El((n,e)=>({sources:[],filteredSources:[],selectedSourceId:null,tpyPath:null,projectInfo:null,isSyncing:!1,syncProgress:null,isPerformingOCR:!1,ocrProgress:null,searchQuery:"",selectedTags:[],selectedArchive:null,selectedCollection:null,statistics:null,availableOCRLanguages:[],openTPYProject:async r=>{try{const i=await window.electron.tropy.openProject(r);return i.success?(n({tpyPath:r,projectInfo:{name:i.projectName||"Unknown",itemCount:i.itemCount||0,lastModified:i.lastModified||new Date().toISOString(),isWatching:!1}}),await e().syncTPY({performOCR:!1,ocrLanguage:"fra"}),{success:!0}):{success:!1,error:i.error}}catch(i){return console.error("Failed to open TPY project:",i),{success:!1,error:i.message}}},getProjectInfo:async()=>{try{const r=await window.electron.tropy.getProjectInfo();r.success&&r.info&&n({projectInfo:r.info,tpyPath:r.info.tpyPath||null})}catch(r){console.error("Failed to get project info:",r)}},syncTPY:async r=>{if(e().isSyncing)return console.warn(" Sync already in progress, skipping"),{success:!1,errors:["Sync already in progress"]};n({isSyncing:!0,syncProgress:null});const i=window.electron.tropy.onSyncProgress(o=>{n({syncProgress:o})});try{const o=await window.electron.tropy.sync(r);return o.success?(await e().refreshSources(),await e().refreshStatistics(),await e().getProjectInfo(),{success:!0,newItems:o.newItems,errors:o.errors}):{success:!1,errors:o.errors}}catch(o){return console.error("Sync failed:",o),{success:!1,errors:[o.message]}}finally{i(),n({isSyncing:!1,syncProgress:null})}},checkSyncNeeded:async()=>{try{return(await window.electron.tropy.checkSyncNeeded()).needed||!1}catch{return!1}},startWatching:async()=>{const{tpyPath:r}=e();if(r)try{await window.electron.tropy.startWatching(r),n(i=>({projectInfo:i.projectInfo?{...i.projectInfo,isWatching:!0}:null})),window.electron.tropy.onFileChanged(async i=>{console.log("TPY file changed:",i),await e().syncTPY({performOCR:!1,ocrLanguage:"fra"})})}catch(i){console.error("Failed to start watching:",i)}},stopWatching:async()=>{try{await window.electron.tropy.stopWatching(),n(r=>({projectInfo:r.projectInfo?{...r.projectInfo,isWatching:!1}:null}))}catch(r){console.error("Failed to stop watching:",r)}},performOCR:async(r,i,o)=>{n({isPerformingOCR:!0,ocrProgress:{current:0,total:i.length}});try{const s=await window.electron.tropy.performBatchOCR(i,o);return s.success&&s.text?(await e().updateTranscription(r,s.text,"manual"),{success:!0,text:s.text}):{success:!1}}catch(s){return console.error("OCR failed:",s),{success:!1}}finally{n({isPerformingOCR:!1,ocrProgress:null})}},importTranscription:async(r,i)=>{try{const o=await window.electron.tropy.importTranscription(i);return o.success&&o.text?(await window.electron.tropy.updateTranscription(r,o.text,"transkribus"),await e().refreshSources(),{success:!0}):{success:!1,error:o.error}}catch(o){return console.error("Import transcription failed:",o),{success:!1,error:o.message}}},loadOCRLanguages:async()=>{try{const r=await window.electron.tropy.getOCRLanguages();r.success&&r.languages&&n({availableOCRLanguages:r.languages})}catch(r){console.error("Failed to load OCR languages:",r)}},refreshSources:async()=>{try{const r=await window.electron.tropy.getAllSources();if(r.success&&r.sources){const i=r.sources.map(o=>({id:o.id,tropyId:o.tropyId,title:o.title,date:o.date,creator:o.creator,archive:o.archive,collection:o.collection,type:o.type,tags:[],transcription:o.transcription,transcriptionSource:o.transcriptionSource,photoCount:0,lastModified:o.lastModified,indexedAt:o.indexedAt}));n({sources:i}),e().applyFilters()}}catch(r){console.error("Failed to refresh sources:",r)}},selectSource:r=>{n({selectedSourceId:r})},getSource:async r=>{try{return(await window.electron.tropy.getSource(r)).source||null}catch{return null}},updateTranscription:async(r,i,o)=>{try{await window.electron.tropy.updateTranscription(r,i,o),await e().refreshSources()}catch(s){console.error("Failed to update transcription:",s)}},searchSources:r=>{n({searchQuery:r}),e().applyFilters()},setTagsFilter:r=>{n({selectedTags:r}),e().applyFilters()},setArchiveFilter:r=>{n({selectedArchive:r}),e().applyFilters()},setCollectionFilter:r=>{n({selectedCollection:r}),e().applyFilters()},clearFilters:()=>{n({searchQuery:"",selectedTags:[],selectedArchive:null,selectedCollection:null}),e().applyFilters()},applyFilters:()=>{const{sources:r,searchQuery:i,selectedTags:o,selectedArchive:s,selectedCollection:a}=e();let l=[...r];if(i.trim()){const c=i.toLowerCase();l=l.filter(u=>u.title.toLowerCase().includes(c)||u.creator?.toLowerCase().includes(c)||u.archive?.toLowerCase().includes(c)||u.collection?.toLowerCase().includes(c)||u.transcription?.toLowerCase().includes(c))}o.length>0&&(l=l.filter(c=>o.every(u=>c.tags.includes(u)))),s&&(l=l.filter(c=>c.archive===s)),a&&(l=l.filter(c=>c.collection===a)),n({filteredSources:l})},refreshStatistics:async()=>{try{const r=await window.electron.tropy.getStatistics();r.success&&r.statistics&&n({statistics:r.statistics})}catch(r){console.error("Failed to refresh statistics:",r)}}})),ZJe=({source:n})=>{const{selectedSourceId:e,selectSource:r}=eb(),i=e===n.id,o=()=>{r(i?null:n.id)};return p.jsxs("div",{className:`primary-source-card ${i?"selected":""} ${n.transcription?"has-transcription":""}`,onClick:o,children:[p.jsx("div",{className:"source-icon",children:p.jsx(Ih,{size:20,strokeWidth:1})}),p.jsxs("div",{className:"source-content",children:[p.jsx("div",{className:"source-title",children:n.title}),p.jsxs("div",{className:"source-meta",children:[n.creator&&p.jsxs("span",{className:"meta-item",children:[p.jsx(bxe,{size:12,strokeWidth:1}),n.creator]}),n.date&&p.jsxs("span",{className:"meta-item",children:[p.jsx(JC,{size:12,strokeWidth:1}),n.date]}),n.archive&&p.jsxs("span",{className:"meta-item",children:[p.jsx(Gye,{size:12,strokeWidth:1}),n.archive]})]}),n.collection&&p.jsx("div",{className:"source-collection",children:n.collection})]}),p.jsx("div",{className:"source-status",children:n.transcription?p.jsx("span",{className:"status-badge transcribed",title:"Has transcription",children:p.jsx(Po,{size:14,strokeWidth:1})}):p.jsx("span",{className:"status-badge no-transcription",title:"No transcription",children:p.jsx(Po,{size:14,strokeWidth:1})})})]})},XJe=({sources:n})=>n.length===0?null:p.jsx("div",{className:"primary-source-list",children:n.map(e=>p.jsx(ZJe,{source:e},e.id))}),JJe=({statistics:n})=>{const e=n.sourceCount>0?Math.round(n.withTranscription/n.sourceCount*100):0,r=Object.entries(n.byArchive).sort((o,s)=>s[1]-o[1]).slice(0,5),i=Object.entries(n.byCollection).sort((o,s)=>s[1]-o[1]).slice(0,5);return p.jsxs("div",{className:"primary-source-stats",children:[p.jsxs("div",{className:"stats-overview",children:[p.jsxs("div",{className:"stat-item",children:[p.jsx(Ih,{size:18,strokeWidth:1}),p.jsx("div",{className:"stat-value",children:n.sourceCount}),p.jsx("div",{className:"stat-label",children:"Sources"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx(Lve,{size:18,strokeWidth:1}),p.jsx("div",{className:"stat-value",children:n.photoCount}),p.jsx("div",{className:"stat-label",children:"Photos"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx(Po,{size:18,strokeWidth:1}),p.jsx("div",{className:"stat-value",children:n.chunkCount}),p.jsx("div",{className:"stat-label",children:"Chunks"})]})]}),p.jsxs("div",{className:"stats-section",children:[p.jsx("h5",{children:"Transcription Progress"}),p.jsxs("div",{className:"transcription-progress",children:[p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),p.jsxs("div",{className:"progress-stats",children:[p.jsxs("span",{className:"with-transcription",children:[n.withTranscription," transcribed"]}),p.jsxs("span",{className:"rate",children:[e,"%"]}),p.jsxs("span",{className:"without-transcription",children:[n.withoutTranscription," remaining"]})]})]})]}),r.length>0&&p.jsxs("div",{className:"stats-section",children:[p.jsxs("h5",{children:[p.jsx(Uye,{size:14,strokeWidth:1}),"Top Archives"]}),p.jsx("ul",{className:"stat-list",children:r.map(([o,s])=>p.jsxs("li",{children:[p.jsx("span",{className:"stat-name",children:o}),p.jsx("span",{className:"stat-count",children:s})]},o))})]}),i.length>0&&p.jsxs("div",{className:"stats-section",children:[p.jsxs("h5",{children:[p.jsx($g,{size:14,strokeWidth:1}),"Top Collections"]}),p.jsx("ul",{className:"stat-list",children:i.map(([o,s])=>p.jsxs("li",{children:[p.jsx("span",{className:"stat-name",children:o}),p.jsx("span",{className:"stat-count",children:s})]},o))})]}),n.tags.length>0&&p.jsxs("div",{className:"stats-section",children:[p.jsxs("h5",{children:[p.jsx(dl,{size:14,strokeWidth:1}),"Tags (",n.tags.length,")"]}),p.jsxs("div",{className:"tags-cloud",children:[n.tags.slice(0,15).map(o=>p.jsx("span",{className:"tag",children:o},o)),n.tags.length>15&&p.jsxs("span",{className:"more-tags",children:["+",n.tags.length-15]})]})]})]})},QJe=({isOpen:n,onClose:e})=>{const{t:r}=qt("common"),{availableOCRLanguages:i,syncTPY:o,isSyncing:s,syncProgress:a,loadOCRLanguages:l}=eb(),[c,u]=M.useState("fra"),[d,h]=M.useState(!1);if(M.useEffect(()=>{n&&i.length===0&&l()},[n,i.length,l]),!n)return null;const f=async()=>{await o({performOCR:!0,ocrLanguage:c,forceReindex:d}),e()};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content ocr-settings-modal",onClick:m=>m.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:[p.jsx(NQ,{size:20,strokeWidth:1}),r("primarySources.ocrSettings","OCR Settings")]}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsx("p",{className:"modal-description",children:r("primarySources.ocrDescription","Configure OCR (Optical Character Recognition) for extracting text from archival photos. Tesseract.js will analyze images and convert them to searchable text.")}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"ocr-language",children:r("primarySources.ocrLanguage","Document Language")}),p.jsx("select",{id:"ocr-language",value:c,onChange:m=>u(m.target.value),children:i.map(m=>p.jsx("option",{value:m.code,children:m.name},m.code))}),p.jsx("span",{className:"form-hint",children:r("primarySources.languageHint","Select the primary language of your archival documents for better accuracy.")})]}),p.jsx("div",{className:"form-group",children:p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:d,onChange:m=>h(m.target.checked)}),p.jsx("span",{children:r("primarySources.forceOCR","Re-run OCR on all sources (ignore existing transcriptions)")})]})}),p.jsxs("div",{className:"ocr-warning",children:[p.jsx(ml,{size:16,strokeWidth:1}),p.jsx("span",{children:r("primarySources.ocrWarning","OCR can take several minutes for large collections. The process runs locally on your computer.")})]}),s&&a&&p.jsxs("div",{className:"ocr-progress",children:[p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${a.current/a.total*100}%`}})}),p.jsxs("span",{className:"progress-text",children:[a.phase==="processing"&&`${r("primarySources.processingOCR","Processing")} ${a.current}/${a.total}`,a.currentItem&&` - ${a.currentItem}`]})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{className:"btn-cancel",onClick:e,children:r("common.cancel","Cancel")}),p.jsxs("button",{className:"btn-primary",onClick:f,disabled:s,children:[p.jsx(Zve,{size:16,strokeWidth:1}),s?r("primarySources.processing","Processing..."):r("primarySources.runOCR","Run OCR")]})]})]})})},eQe=({isOpen:n,onClose:e})=>{const{t:r}=qt("common"),{selectedSourceId:i,importTranscription:o,syncTPY:s}=eb(),[a,l]=M.useState("single"),[c,u]=M.useState("auto"),[d,h]=M.useState(!1),[f,m]=M.useState(null);if(!n)return null;const v=async()=>{if(!i){m({success:!1,message:r("primarySources.selectSourceFirst","Please select a source first")});return}try{const w=await window.electron.dialog.openFile({filters:[{name:"Transcription Files",extensions:["xml","txt"]},{name:"XML Files",extensions:["xml"]},{name:"Text Files",extensions:["txt"]}]});if(!w.canceled&&w.filePaths&&w.filePaths.length>0){h(!0);const S=await o(i,w.filePaths[0]);S.success?m({success:!0,message:r("primarySources.importSuccess","Transcription imported successfully")}):m({success:!1,message:S.error||r("primarySources.importFailed","Import failed")}),h(!1)}}catch(w){m({success:!1,message:w.message||r("primarySources.importFailed","Import failed")}),h(!1)}},x=async()=>{try{const w=await window.electron.dialog.openDirectory();if(!w.canceled&&w.filePaths&&w.filePaths.length>0){h(!0);const S=w.filePaths[0],_=await s({performOCR:!1,ocrLanguage:"fra",transcriptionDirectory:S,forceReindex:!0});_.success?m({success:!0,message:r("primarySources.batchImportSuccess",`Imported transcriptions for ${_.newItems||0} sources`)}):m({success:!1,message:_.errors?.join(", ")||r("primarySources.importFailed","Import failed")}),h(!1)}}catch(w){m({success:!1,message:w.message||r("primarySources.importFailed","Import failed")}),h(!1)}},b=async()=>{m(null),a==="single"?await v():await x()};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content transcription-import-modal",onClick:w=>w.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:[p.jsx(Po,{size:20,strokeWidth:1}),r("primarySources.importTranscription","Import Transcription")]}),p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsx("p",{className:"modal-description",children:r("primarySources.importDescription","Import transcriptions from external tools like Transkribus. Supports ALTO XML, PAGE XML, and plain text formats.")}),p.jsxs("div",{className:"import-mode-selector",children:[p.jsxs("button",{className:`mode-option ${a==="single"?"active":""}`,onClick:()=>l("single"),children:[p.jsx(Po,{size:24,strokeWidth:1}),p.jsxs("div",{className:"mode-content",children:[p.jsx("h4",{children:r("primarySources.singleFile","Single File")}),p.jsx("p",{children:r("primarySources.singleFileDesc","Import one transcription for the selected source")})]})]}),p.jsxs("button",{className:`mode-option ${a==="directory"?"active":""}`,onClick:()=>l("directory"),children:[p.jsx($g,{size:24,strokeWidth:1}),p.jsxs("div",{className:"mode-content",children:[p.jsx("h4",{children:r("primarySources.batchImport","Batch Import")}),p.jsx("p",{children:r("primarySources.batchImportDesc","Import all transcriptions from a folder")})]})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"transcription-format",children:r("primarySources.format","File Format")}),p.jsxs("select",{id:"transcription-format",value:c,onChange:w=>u(w.target.value),children:[p.jsx("option",{value:"auto",children:r("primarySources.autoDetect","Auto-detect")}),p.jsx("option",{value:"transkribus",children:"Transkribus Export"}),p.jsx("option",{value:"alto",children:"ALTO XML"}),p.jsx("option",{value:"page-xml",children:"PAGE XML"}),p.jsx("option",{value:"plain-text",children:r("primarySources.plainText","Plain Text")})]})]}),a==="single"&&!i&&p.jsxs("div",{className:"import-warning",children:[p.jsx(ml,{size:16,strokeWidth:1}),p.jsx("span",{children:r("primarySources.selectSourceWarning","Select a source in the list before importing a single file.")})]}),f&&p.jsxs("div",{className:`import-result ${f.success?"success":"error"}`,children:[f.success?p.jsx(Fu,{size:16,strokeWidth:1}):p.jsx(ml,{size:16,strokeWidth:1}),p.jsx("span",{children:f.message})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{className:"btn-cancel",onClick:e,children:r("common.cancel","Cancel")}),p.jsxs("button",{className:"btn-primary",onClick:b,disabled:d||a==="single"&&!i,children:[p.jsx(S9,{size:16,strokeWidth:1}),d?r("primarySources.importing","Importing..."):r("primarySources.import","Import")]})]})]})})},tQe=()=>{const{t:n}=qt("common"),e=zc(D=>D.currentProject),{sources:r,filteredSources:i,projectInfo:o,isSyncing:s,syncProgress:a,searchQuery:l,statistics:c,searchSources:u,openTPYProject:d,syncTPY:h,startWatching:f,stopWatching:m,refreshSources:v,refreshStatistics:x,loadOCRLanguages:b}=eb(),[w,S]=M.useState(!1),[_,P]=M.useState(!1),[A,T]=M.useState(!1);M.useEffect(()=>{b()},[b]),M.useEffect(()=>{(async()=>e&&(await eb.getState().getProjectInfo(),await v(),await x()))()},[e,v,x]);const E=async()=>{try{const D=await window.electron.dialog.openFile({title:n("primarySources.selectTropyProject","Select Tropy Project"),message:n("primarySources.selectTropyMessage","Choose a .tropy package or .tpy file"),properties:["openFile","openDirectory"],filters:[{name:"Tropy Project",extensions:["tropy","tpy"]}]});if(!D.canceled&&D.filePaths&&D.filePaths.length>0){const Y=D.filePaths[0];if(!Y.endsWith(".tropy")&&!Y.endsWith(".tpy")){alert(n("primarySources.invalidProject","Please select a .tropy package or .tpy file"));return}const I=await d(Y);I.success||alert(`Failed to open Tropy project: ${I.error}`)}}catch(D){console.error("Failed to open Tropy project:",D)}},L=async()=>{const D=await h({performOCR:!1,ocrLanguage:"fra"});!D.success&&D.errors&&D.errors.length>0&&console.error("Sync errors:",D.errors)},$=async()=>{o?.isWatching?await m():await f()},z=c?.withTranscription||0,B=c?.withoutTranscription||0;return e?p.jsxs("div",{className:"primary-sources-panel",children:[p.jsxs("div",{className:"primary-sources-header",children:[p.jsx("button",{className:"toolbar-btn",onClick:E,title:n("primarySources.openProject","Open Tropy Project"),children:p.jsx($g,{size:20,strokeWidth:1})}),o&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:`toolbar-btn ${s?"syncing":""}`,onClick:L,disabled:s,title:n("primarySources.sync","Synchronize"),children:p.jsx(ul,{size:20,strokeWidth:1,className:s?"spinning":""})}),p.jsx("button",{className:`toolbar-btn ${o.isWatching?"active":""}`,onClick:$,title:o.isWatching?n("primarySources.stopWatching","Stop auto-sync"):n("primarySources.startWatching","Enable auto-sync"),children:o.isWatching?p.jsx(e3,{size:20,strokeWidth:1}):p.jsx(gve,{size:20,strokeWidth:1})}),p.jsx("div",{className:"toolbar-separator"}),p.jsx("button",{className:"toolbar-btn",onClick:()=>S(!0),title:n("primarySources.ocr","OCR Settings"),children:p.jsx(NQ,{size:20,strokeWidth:1})}),p.jsx("button",{className:"toolbar-btn",onClick:()=>P(!0),title:n("primarySources.importTranscription","Import Transcription"),children:p.jsx(Po,{size:20,strokeWidth:1})}),p.jsx("div",{className:"toolbar-separator"}),p.jsx("button",{className:"toolbar-btn",onClick:()=>T(!A),title:n("primarySources.statistics","Statistics"),children:p.jsx(gj,{size:20,strokeWidth:1})})]})]}),p.jsxs("div",{className:"primary-sources-content",children:[s&&a&&p.jsxs("div",{className:"sync-progress",children:[p.jsx("div",{className:"sync-progress-bar",children:p.jsx("div",{className:"sync-progress-fill",style:{width:`${a.current/a.total*100}%`}})}),p.jsxs("span",{className:"sync-progress-text",children:[a.phase==="reading"&&n("primarySources.reading","Reading project..."),a.phase==="processing"&&`${n("primarySources.processing","Processing")} ${a.current}/${a.total}`,a.phase==="indexing"&&n("primarySources.indexing","Indexing..."),a.currentItem&&` - ${a.currentItem}`]})]}),o&&p.jsxs("div",{className:"tropy-project-info",children:[p.jsx(Ih,{size:16,strokeWidth:1}),p.jsx("span",{className:"project-name",children:o.name}),p.jsxs("span",{className:"source-count",children:[r.length," sources"]}),o.isWatching&&p.jsx("span",{className:"watching-badge",children:n("primarySources.autoSync","Auto-sync")})]}),A&&c&&p.jsx(JJe,{statistics:c}),p.jsxs(On,{title:n("primarySources.searchAndFilters","Search & Filters"),defaultExpanded:!0,children:[p.jsxs("div",{className:"search-box",children:[p.jsx(yj,{size:16,strokeWidth:1,className:"search-icon"}),p.jsx("input",{type:"text",placeholder:n("primarySources.searchPlaceholder","Search sources..."),value:l,onChange:D=>u(D.target.value)})]}),p.jsxs("div",{className:"transcription-status",children:[p.jsxs("span",{className:"status-item with-transcription",children:[z," ",n("primarySources.withTranscription","with transcription")]}),p.jsxs("span",{className:"status-item without-transcription",children:[B," ",n("primarySources.withoutTranscription","without transcription")]})]})]}),p.jsx(On,{title:n("primarySources.sources","Primary Sources"),defaultExpanded:!0,children:o?r.length===0?p.jsxs("div",{className:"primary-sources-empty",children:[p.jsx(Po,{size:48,strokeWidth:1}),p.jsx("h4",{children:n("primarySources.noSources","No Sources")}),p.jsx("p",{children:n("primarySources.syncPrompt","Click sync to import sources from Tropy")})]}):p.jsx(XJe,{sources:i}):p.jsxs("div",{className:"primary-sources-empty",children:[p.jsx(Ih,{size:48,strokeWidth:1}),p.jsx("h4",{children:n("primarySources.noProject","No Tropy Project")}),p.jsx("p",{children:n("primarySources.openPrompt","Click the folder icon to open a Tropy project (.tropy or .tpy)")})]})})]}),p.jsx(QJe,{isOpen:w,onClose:()=>S(!1)}),p.jsx(eQe,{isOpen:_,onClose:()=>P(!1)})]}):p.jsx("div",{className:"primary-sources-panel",children:p.jsxs("div",{className:"primary-sources-empty",style:{marginTop:"2rem"},children:[p.jsx(Ih,{size:48,strokeWidth:1}),p.jsx("h4",{children:n("primarySources.noClioDeckProject","No Project Open")}),p.jsx("p",{children:n("primarySources.openClioDeckFirst","Open or create a ClioDeck project first to use primary sources.")})]})})},nQe={chat:{title:"Assistant IA avec RAG",description:"L'assistant IA utilise vos documents PDF indexs pour rpondre  vos questions avec des sources prcises.",capabilities:["Recherche smantique dans votre corpus de documents","Rponses contextualises avec citations de pages","Synthse de multiples sources","Conversation avec historique (mmorisation du contexte)"],limitations:["Ne peut accder qu'aux documents que vous avez indexs","La qualit dpend de la qualit des PDFs (OCR, extraction de texte)","Peut produire des hallucinations si les sources sont ambigus","Ne remplace pas la lecture critique des sources primaires","Limit par la fentre de contexte du modle (4096 tokens par dfaut)"],bestPractices:["Vrifiez toujours les citations en retournant aux sources","Indexez des documents de qualit (bon OCR, texte extractible)","Posez des questions prcises et contextualises","Utilisez le RAG pour explorer, pas pour remplacer votre analyse","Croisez les rponses avec vos propres lectures"],academicContext:"Le RAG (Retrieval-Augmented Generation) est un outil d'exploration et de synthse prliminaire. Il ne dispense pas de la lecture critique des sources. Toute information utilise dans vos travaux doit tre vrifie dans les documents originaux."},pdfIndex:{title:"Indexation de PDFs",description:"Convertit vos documents PDF en base vectorielle interrogeable par l'IA.",capabilities:["Extraction automatique du texte des PDFs","Dcoupage en chunks smantiques (500 tokens par dfaut)","Cration d'embeddings vectoriels pour recherche smantique","Extraction automatique des mtadonnes (titre, auteur, anne)","Dtection et extraction des citations bibliographiques"],limitations:["Ncessite des PDFs avec texte extractible (pas seulement des images)","L'OCR automatique n'est pas toujours parfait (caractres spciaux, langues anciennes)","La qualit du chunking affecte la pertinence des rsultats","Les embeddings ne capturent pas toujours les nuances smantiques","Processus gourmand en ressources (CPU/mmoire) pour gros corpus"],bestPractices:["Utilisez des PDFs de bonne qualit (texte selectionnable)","Vrifiez les mtadonnes extraites et corrigez si ncessaire","Indexez par thmatiques cohrentes (ne mlangez pas tout)","Re-indexez si vous modifiez significativement le corpus","Gardez une copie de sauvegarde de vos PDFs originaux"],academicContext:"L'indexation cre une reprsentation vectorielle de vos sources. Cette reprsentation est utile pour la recherche exploratoire, mais ne remplace pas l'organisation thmatique traditionnelle (notes, fiches de lecture, etc.)."},bibliography:{title:"Gestion Bibliographique (BibTeX)",description:"Importe et gre vos rfrences bibliographiques au format BibTeX.",capabilities:["Import de fichiers .bib (Zotero, Mendeley, JabRef, etc.)","Visualisation et recherche dans vos rfrences","Association PDFs  entres bibliographiques","Gnration automatique de citations formates","Export de bibliographies filtres"],limitations:["Format BibTeX uniquement (pas de support direct EndNote, RIS, etc.)","Ncessite que vos cls BibTeX soient uniques","L'association PDF  bib se fait manuellement lors de l'indexation","Pas de gestion des doublons automatique","Pas d'intgration directe avec Zotero/Mendeley (import/export seulement)"],bestPractices:["Maintenez un fichier .bib propre et structur (utilisez Zotero/JabRef)","Utilisez des cls BibTeX cohrentes (ex: auteur_annee_mot)","Exportez rgulirement depuis votre gestionnaire de rfrences","Associez systmatiquement PDFs et entres bib lors de l'indexation","Validez votre .bib avant import (syntaxe correcte)"],academicContext:"BibTeX est le standard de facto en milieu acadmique. ClioDesk s'intgre dans votre workflow existant (Zotero  BibTeX  ClioDesk) sans le remplacer."},corpus:{title:"Exploration de Corpus",description:"Analyse thmatique et visualisation de votre corpus de documents.",capabilities:["Dtection automatique de topics (LDA, NMF)","Visualisation des thmes dominants","Timeline d'volution thmatique","Graphe de relations entre documents","Extraction de termes-cls par document"],limitations:["Ncessite un corpus d'au moins 10-15 documents pour tre pertinent","Les topics gnrs sont des approximations statistiques","Sensible  la qualit du preprocessing (stopwords, langue)","Ne remplace pas une lecture humaine pour comprendre les thmes","Rsultats peuvent varier selon les paramtres (nombre de topics, n-grams)"],bestPractices:["Utilisez sur des corpus thmatiquement cohrents","Exprimentez avec diffrents nombres de topics (5-20)","Interprtez les rsultats avec votre connaissance du domaine","Utilisez comme outil exploratoire, pas comme vrit absolue","Combinez avec vos propres catgorisations thmatiques"],academicContext:"Le topic modeling est une technique de distant reading. Il rvle des patterns macro que la lecture traditionnelle pourrait manquer, mais ne remplace pas le close reading ncessaire  l'analyse historique."},journal:{title:"Journal de Recherche",description:"Traabilit complte de votre processus de recherche et d'criture.",capabilities:["Historique automatique de toutes les sessions de travail","Logs des sauvegardes de documents (avec diffs)","Traabilit des oprations IA (requtes, sources utilises)","Historique persistant des conversations","Export format pour annexes acadmiques (Markdown, LaTeX, JSON)"],limitations:["Ne capture que les actions dans ClioDesk (pas vos notes externes)","Pas de synchronisation cloud (donnes locales uniquement)","L'export LaTeX ncessite post-traitement manuel","Taille de la base peut crotre significativement sur longs projets","Pas de chiffrement des donnes (sensible pour donnes confidentielles)"],bestPractices:["Consultez rgulirement pour suivre votre progression","Exportez priodiquement pour sauvegardes","Utilisez les exports pour documenter votre mthodologie","Intgrez dans vos annexes de thse/mmoire","Nettoyez les sessions obsoltes pour rduire la taille de la DB"],academicContext:"La traabilit mthodologique est de plus en plus exige en sciences humaines numriques. Le journal permet de documenter votre processus de recherche assiste par IA de manire transparente et reproductible."},editor:{title:"diteur Markdown",description:"diteur de texte acadmique avec syntaxe Markdown et prvisualisation.",capabilities:["Syntaxe Markdown complte (titres, listes, liens, images)","Prvisualisation en temps rel","Support LaTeX inline (quations mathmatiques)","Export PDF avec mise en page acadmique","Gestion de projets multi-fichiers"],limitations:["Pas de support des styles Word complexes","Pas de gestion collaborative en temps rel","Export PDF basique (personnalisation limite)","Pas de vrification orthographique intgre","Pas de support des notes de bas de page automatises"],bestPractices:["Utilisez Markdown pour structurer clairement vos textes","Combinez avec Pandoc pour exports avancs (docx, LaTeX)","Gardez vos fichiers .md sous contrle de version (Git)","Organisez vos projets par chapitres/sections","Exportez rgulirement en PDF pour vrifier le rendu"],academicContext:"Markdown est idal pour l'criture acadmique : focus sur le contenu, sparation contenu/mise en forme, interoprabilit, et prennit des formats texte."}},rQe=[{question:"Est-ce que l'IA peut remplacer ma lecture des sources ?",answer:"Non. L'IA est un outil d'exploration et de synthse prliminaire. Vous devez toujours vrifier les citations dans les sources originales et effectuer une lecture critique. L'IA peut acclrer la dcouverte de passages pertinents, mais pas remplacer l'analyse historique.",category:"mthodologie"},{question:"Mes donnes sont-elles envoyes sur internet ?",answer:"Non si vous utilisez Ollama en local. ClioDesk fonctionne entirement hors ligne avec des modles locaux. Vos PDFs, notes et conversations restent sur votre machine. Si vous configurez une API externe (OpenAI, Anthropic), alors oui, les requtes sont envoyes.",category:"confidentialit"},{question:"Comment citer l'usage de ClioDesk dans mes travaux ?",answer:"Documentez votre mthodologie dans une section ddie. Exportez le journal de recherche et incluez-le en annexe. Mentionnez clairement : (1) quels documents ont t indexs, (2) quels modles IA utiliss, (3) comment vous avez vrifi les informations. Transparence mthodologique est essentielle.",category:"acadmique"},{question:"Quelle taille de corpus est recommande ?",answer:"Pour le RAG : pas de limite stricte, mais 20-200 documents est optimal. En dessous de 10, le RAG apporte peu. Au-dessus de 500, les performances peuvent dgrader. Pour le topic modeling : minimum 15-20 documents, optimal 50-200.",category:"technique"},{question:"Le RAG fonctionne-t-il avec des documents en vieux franais / latin ?",answer:"Dpend du modle d'embeddings. Les modles multilingues modernes (multilingual-e5) grent assez bien le franais moderne. Pour vieux franais/latin : rsultats variables. Testez d'abord sur un petit chantillon. L'OCR peut aussi poser problme sur textes anciens.",category:"technique"},{question:"Comment amliorer la qualit des rponses de l'IA ?",answer:"1) Indexez des PDFs de qualit (bon OCR), 2) Posez des questions prcises et contextualises, 3) Utilisez le paramtre 'topK' pour augmenter le nombre de sources, 4) Essayez diffrents modles (llama3.1 vs mistral), 5) Vrifiez toujours les sources cites.",category:"mthodologie"},{question:"Puis-je collaborer avec d'autres chercheurs sur ClioDesk ?",answer:"Pas de collaboration en temps rel intgre. Mais vous pouvez : 1) Partager vos fichiers .md via Git, 2) Exporter/importer les PDFs et .bib, 3) Partager les exports du journal. Pour vrais projets collaboratifs, combinez ClioDesk (travail individuel) + Overleaf/Google Docs (criture collaborative).",category:"workflow"},{question:"Le journal de recherche prend-il beaucoup de place ?",answer:"Environ 1-5 MB pour une session de travail typique (quelques heures). Pour un projet de thse complet (2-3 ans), comptez 50-200 MB. Les logs dtaills (conversations compltes) sont les plus volumineux. Vous pouvez exporter et nettoyer les anciennes sessions.",category:"technique"}],iQe={RAG:"Retrieval-Augmented Generation : Technique qui combine recherche dans une base documentaire + gnration de texte par LLM. Permet au modle de s'appuyer sur vos sources plutt que sa mmoire interne.",Embeddings:"Reprsentation vectorielle du sens d'un texte. Permet de calculer la similarit smantique entre documents/requtes. Base du RAG.",Chunking:"Dcoupage d'un document en petits morceaux (chunks) pour l'indexation. Chunk trop petit = perte de contexte. Chunk trop grand = perte de prcision.",LLM:"Large Language Model : Modle d'IA entran sur d'normes corpus de texte (GPT, Llama, Mistral, etc.). Capacit de comprendre et gnrer du texte.",Ollama:"Plateforme pour excuter des LLMs localement sur votre machine, sans dpendre d'APIs cloud. Open-source et gratuit.","Topic Modeling":"Technique statistique (LDA, NMF) pour dcouvrir des thmes latents dans un corpus. Distant reading.","Vector Store":"Base de donnes optimise pour stocker et chercher des vecteurs (embeddings). SQLite + extension vectorielle dans ClioDesk.",BibTeX:"Format de fichier texte pour grer des bibliographies. Standard LaTeX, support par Zotero, JabRef, Mendeley.",Markdown:"Langage de balisage lger pour formater du texte (# titres, **gras**, etc.). Interoprable et prenne.","Similarity Score":"Score de 0  1 indiquant la proximit smantique entre une requte et un document. Plus proche de 1 = plus pertinent."},JT={features:nQe,faq:rQe,glossary:iQe},oQe=({isOpen:n,onClose:e,initialFeature:r})=>{const{t:i}=qt("common"),[o,s]=M.useState("overview"),[a,l]=M.useState(r||null),[c,u]=M.useState("");if(M.useEffect(()=>{r&&n&&(s("feature"),l(r))},[r,n]),!n)return null;const d=JT.features,h=JT.faq,f=JT.glossary,m=h.filter(b=>b.question.toLowerCase().includes(c.toLowerCase())||b.answer.toLowerCase().includes(c.toLowerCase())),v=Object.entries(f).filter(([b,w])=>b.toLowerCase().includes(c.toLowerCase())||w.toLowerCase().includes(c.toLowerCase())),x=b=>{const w=d[b];return w?p.jsxs("div",{className:"feature-detail",children:[p.jsx("h2",{children:w.title}),p.jsx("p",{className:"feature-description",children:w.description}),p.jsxs("section",{className:"detail-section",children:[p.jsxs("h3",{children:[" ",i("methodology.capabilities")]}),p.jsx("ul",{children:w.capabilities.map((S,_)=>p.jsx("li",{children:S},_))})]}),p.jsxs("section",{className:"detail-section",children:[p.jsxs("h3",{children:[" ",i("methodology.limitations")]}),p.jsx("ul",{className:"limitations-list",children:w.limitations.map((S,_)=>p.jsx("li",{children:S},_))})]}),p.jsxs("section",{className:"detail-section",children:[p.jsxs("h3",{children:[" ",i("methodology.bestPractices")]}),p.jsx("ul",{children:w.bestPractices.map((S,_)=>p.jsx("li",{children:S},_))})]}),p.jsxs("section",{className:"detail-section academic-context",children:[p.jsxs("h3",{children:[" ",i("methodology.academicContext")]}),p.jsx("p",{children:w.academicContext})]})]}):null};return p.jsx("div",{className:"methodology-modal-overlay",onClick:e,children:p.jsxs("div",{className:"methodology-modal",onClick:b=>b.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("div",{className:"modal-title",children:[p.jsx(Vye,{size:24}),p.jsx("h2",{children:i("methodology.title")})]}),p.jsx("button",{className:"close-btn",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"modal-nav",children:[p.jsx("button",{className:o==="overview"?"active":"",onClick:()=>s("overview"),children:i("methodology.overview")}),p.jsx("button",{className:o==="feature"?"active":"",onClick:()=>{s("feature"),a||l("chat")},children:i("methodology.features")}),p.jsx("button",{className:o==="faq"?"active":"",onClick:()=>s("faq"),children:i("methodology.faq")}),p.jsx("button",{className:o==="glossary"?"active":"",onClick:()=>s("glossary"),children:i("methodology.glossary")})]}),(o==="faq"||o==="glossary")&&p.jsxs("div",{className:"search-bar",children:[p.jsx(yj,{size:16}),p.jsx("input",{type:"text",placeholder:i("methodology.searchPlaceholder"),value:c,onChange:b=>u(b.target.value)})]}),p.jsxs("div",{className:"modal-content",children:[o==="overview"&&p.jsxs("div",{className:"overview",children:[p.jsx("h2",{children:i("methodology.welcome")}),p.jsx("p",{className:"intro",children:i("methodology.intro")}),p.jsxs("div",{className:"alert-box",children:[p.jsx(ml,{size:20}),p.jsxs("div",{children:[p.jsx("strong",{children:i("methodology.importantWarning")})," ",i("methodology.importantWarningText")]})]}),p.jsx("h3",{children:i("methodology.mainFeatures")}),p.jsx("div",{className:"feature-cards",children:Object.entries(d).map(([b,w])=>p.jsxs("div",{className:"feature-card",onClick:()=>{l(b),s("feature")},children:[p.jsx("h4",{children:w.title}),p.jsx("p",{children:w.description})]},b))})]}),o==="feature"&&p.jsxs("div",{className:"feature-view",children:[p.jsxs("div",{className:"feature-sidebar",children:[p.jsx("h3",{children:i("methodology.features")}),Object.entries(d).map(([b,w])=>p.jsx("button",{className:a===b?"active":"",onClick:()=>l(b),children:w.title},b))]}),p.jsx("div",{className:"feature-content",children:a&&x(a)})]}),o==="faq"&&p.jsxs("div",{className:"faq-view",children:[p.jsx("h2",{children:i("methodology.faqTitle")}),m.length===0?p.jsxs("p",{className:"no-results",children:[i("methodology.noResults"),' "',c,'"']}):m.map((b,w)=>p.jsxs("div",{className:"faq-item",children:[p.jsx("h4",{children:b.question}),p.jsx("p",{children:b.answer}),p.jsx("span",{className:"faq-category",children:b.category})]},w))]}),o==="glossary"&&p.jsxs("div",{className:"glossary-view",children:[p.jsx("h2",{children:i("methodology.glossaryTitle")}),v.length===0?p.jsxs("p",{className:"no-results",children:[i("methodology.noResults"),' "',c,'"']}):v.map(([b,w])=>p.jsxs("div",{className:"glossary-item",children:[p.jsx("dt",{children:b}),p.jsx("dd",{children:w})]},b))]})]})]})})},gce=[{name:"@milkdown/crepe",license:"MIT",url:"https://github.com/Milkdown/milkdown"},{name:"@milkdown/kit",license:"MIT",url:"https://github.com/Milkdown/milkdown"},{name:"@monaco-editor/react",license:"MIT",url:"https://github.com/suren-atoyan/monaco-react"},{name:"better-sqlite3",license:"MIT",url:"https://github.com/WiseLibs/better-sqlite3"},{name:"docx",license:"MIT",url:"https://docx.js.org"},{name:"docxtemplater",license:"MIT",url:"https://github.com/open-xml-templating/docxtemplater"},{name:"Electron",license:"MIT",url:"https://github.com/electron/electron"},{name:"electron-store",license:"MIT",url:"https://github.com/sindresorhus/electron-store"},{name:"graphology",license:"MIT",url:"https://github.com/graphology/graphology"},{name:"graphology-communities-louvain",license:"MIT",url:"https://github.com/graphology/graphology"},{name:"graphology-layout-forceatlas2",license:"MIT",url:"https://github.com/graphology/graphology"},{name:"hnswlib-node",license:"Apache-2.0",url:"https://github.com/yoshoku/hnswlib-node"},{name:"i18next",license:"MIT",url:"https://www.i18next.com"},{name:"lru-cache",license:"BlueOak-1.0.0",url:"https://github.com/isaacs/node-lru-cache"},{name:"Lucide",license:"ISC",url:"https://lucide.dev"},{name:"marked",license:"MIT",url:"https://marked.js.org"},{name:"natural",license:"MIT",url:"https://github.com/NaturalNode/natural"},{name:"node-llama-cpp",license:"MIT",url:"https://node-llama-cpp.withcat.ai"},{name:"pdf-poppler",license:"ISC",url:"https://github.com/kb47/pdf-poppler"},{name:"pdfjs-dist",license:"Apache-2.0",url:"https://github.com/mozilla/pdfjs-dist"},{name:"PizZip",license:"MIT / GPL-3.0",url:"https://github.com/open-xml-templating/pizzip"},{name:"Puppeteer",license:"Apache-2.0",url:"https://github.com/puppeteer/puppeteer"},{name:"React",license:"MIT",url:"https://reactjs.org"},{name:"react-error-boundary",license:"MIT",url:"https://github.com/bvaughn/react-error-boundary"},{name:"react-force-graph",license:"MIT",url:"https://github.com/vasturiano/react-force-graph"},{name:"react-i18next",license:"MIT",url:"https://github.com/i18next/react-i18next"},{name:"react-resizable-panels",license:"MIT",url:"https://github.com/bvaughn/react-resizable-panels"},{name:"Recharts",license:"MIT",url:"https://github.com/recharts/recharts"},{name:"Tesseract.js",license:"Apache-2.0",url:"https://github.com/naptha/tesseract.js"},{name:"Zod",license:"MIT",url:"https://zod.dev"},{name:"Zustand",license:"MIT",url:"https://github.com/pmndrs/zustand"}],BG=gce.reduce((n,e)=>(n[e.license]||(n[e.license]=[]),n[e.license].push(e),n),{}),sQe=["MIT","Apache-2.0","ISC","BlueOak-1.0.0","MIT / GPL-3.0"],aQe=({isOpen:n,onClose:e})=>{const{t:r}=qt("common"),[i,o]=M.useState(!1);if(!n)return null;const s=a=>{window.electron.shell.openExternal(a)};return p.jsx("div",{className:"about-modal",onClick:e,children:p.jsxs("div",{className:"about-content",onClick:a=>a.stopPropagation(),children:[p.jsxs("div",{className:"about-header",children:[p.jsx("h3",{children:r("about.title")}),p.jsx("button",{className:"close-btn",onClick:e,children:p.jsx(Vr,{size:20})})]}),p.jsxs("div",{className:"about-body",children:[p.jsx("div",{className:"about-section",children:p.jsxs("p",{className:"about-license",children:[p.jsxs("strong",{children:[r("about.license"),":"]})," AGPL"," ",p.jsxs("button",{className:"about-link",onClick:()=>s("https://github.com/inactinique/cliodeck"),children:[r("about.githubRepo")," ",p.jsx(z0,{size:14})]})]})}),p.jsx("div",{className:"about-section",children:p.jsxs("p",{className:"about-description",children:[r("about.description")," ",p.jsxs("button",{className:"about-link",onClick:()=>s("https://inactinique.net"),children:["Frdric Clavert ",p.jsx(z0,{size:14})]})," ",r("about.developedWith")]})}),p.jsxs("div",{className:"about-section about-credits-section",children:[p.jsxs("button",{className:"about-credits-toggle",onClick:()=>o(!i),children:[i?p.jsx(Vp,{size:16}):p.jsx(QC,{size:16}),p.jsx("strong",{children:r("about.openSourceCredits")}),p.jsxs("span",{className:"about-credits-count",children:[gce.length," ",r("about.libraries")]})]}),i&&p.jsxs("div",{className:"about-credits-list",children:[p.jsx("p",{className:"about-credits-intro",children:r("about.creditsIntro")}),sQe.filter(a=>BG[a]).map(a=>p.jsxs("div",{className:"about-license-group",children:[p.jsx("h4",{className:"about-license-group-title",children:a}),p.jsx("div",{className:"about-deps-grid",children:BG[a].map(l=>p.jsxs("button",{className:"about-dep-item",onClick:()=>s(l.url),title:l.url,children:[l.name," ",p.jsx(z0,{size:10})]},l.name))})]},a))]})]})]})]})})},lQe=({leftPanel:n,centerPanel:e})=>{const{t:r}=qt("common"),[i,o]=M.useState("projects"),[s,a]=M.useState("chat"),[l,c]=M.useState(!1),[u,d]=M.useState(!1),[h,f]=M.useState(!1),[m,v]=M.useState(void 0),[x,b]=M.useState(!1),w=_=>{Ye.component("MainLayout","Left tab clicked",{view:_}),o(_)},S=_=>{Ye.component("MainLayout","Right tab clicked",{view:_}),a(_)};return M.useEffect(()=>{const _=L=>{switch(L.detail){case"projects":o("projects");break;case"bibliography":o("bibliography");break;case"primary-sources":o("primary-sources");break;case"chat":a("chat");break;case"corpus":a("corpus");break;case"journal":a("journal");break}},P=()=>{c(!0)},A=()=>{d(!0)},T=L=>{v(L.detail?.feature),f(!0)},E=()=>{b(!0)};return window.addEventListener("switch-panel",_),window.addEventListener("show-pdf-export-dialog",P),window.addEventListener("show-settings-modal",A),window.addEventListener("show-methodology-modal",T),window.addEventListener("show-about-dialog",E),()=>{window.removeEventListener("switch-panel",_),window.removeEventListener("show-pdf-export-dialog",P),window.removeEventListener("show-settings-modal",A),window.removeEventListener("show-methodology-modal",T),window.removeEventListener("show-about-dialog",E)}},[]),p.jsxs("div",{className:"main-layout",children:[p.jsx("button",{className:"floating-help-btn",onClick:()=>f(!0),title:r("methodology.title"),children:p.jsx(PQ,{size:12})}),p.jsx("div",{className:"main-content",children:p.jsxs(eee,{direction:"horizontal",children:[p.jsx(p4,{defaultSize:20,minSize:15,maxSize:35,children:p.jsxs("div",{className:"panel left-panel",children:[p.jsxs("div",{className:"panel-tabs",children:[p.jsx("button",{className:`panel-tab ${i==="projects"?"active":""}`,onClick:()=>w("projects"),title:r("project.title"),children:p.jsx(Nve,{size:20,strokeWidth:1})}),p.jsx("button",{className:`panel-tab ${i==="bibliography"?"active":""}`,onClick:()=>w("bibliography"),title:r("bibliography.title"),children:p.jsx(Ac,{size:20,strokeWidth:1})}),p.jsx("button",{className:`panel-tab primary-sources-tab ${i==="primary-sources"?"active":""}`,onClick:()=>w("primary-sources"),title:r("primarySources.title","Primary Sources"),children:p.jsx(Ih,{size:20,strokeWidth:1})})]}),p.jsxs("div",{className:"panel-content",children:[i==="projects"&&(n||p.jsx(JAe,{})),i==="bibliography"&&p.jsx(_be,{}),i==="primary-sources"&&p.jsx(tQe,{})]})]})}),p.jsx(_9,{className:"resize-handle"}),p.jsx(p4,{defaultSize:50,minSize:30,children:p.jsx("div",{className:"panel center-panel",children:e||p.jsx("div",{className:"panel-placeholder",children:"diteur Markdown (Monaco Editor)"})})}),p.jsx(_9,{className:"resize-handle"}),p.jsx(p4,{defaultSize:30,minSize:20,maxSize:45,children:p.jsxs("div",{className:"panel right-panel",children:[p.jsxs("div",{className:"panel-tabs",children:[p.jsx("button",{className:`panel-tab ${s==="chat"?"active":""}`,onClick:()=>S("chat"),title:r("chat.title"),children:p.jsx(Vve,{size:20,strokeWidth:1})}),p.jsx("button",{className:`panel-tab ${s==="corpus"?"active":""}`,onClick:()=>S("corpus"),title:r("corpus.title"),children:p.jsx(Kve,{size:20,strokeWidth:1})}),p.jsx("button",{className:`panel-tab ${s==="journal"?"active":""}`,onClick:()=>S("journal"),title:r("journal.title"),children:p.jsx(Bye,{size:20,strokeWidth:1})})]}),p.jsxs("div",{className:"panel-content",children:[s==="chat"&&p.jsx(Awe,{}),s==="corpus"&&p.jsx(HJe,{}),s==="journal"&&p.jsx(YJe,{})]})]})})]})}),p.jsx(Kne,{isOpen:l,onClose:()=>c(!1)}),p.jsx(qAe,{isOpen:u,onClose:()=>d(!1)}),p.jsx(oQe,{isOpen:h,onClose:()=>{f(!1),v(void 0)},initialFeature:m}),p.jsx(aQe,{isOpen:x,onClose:()=>b(!1)})]})},cQe=1024;let uQe=0,xa=class{constructor(e,r){this.from=e,this.to=r}};class nn{constructor(e={}){this.id=uQe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Oo.match(e)),r=>{let i=e(r);return i===void 0?null:[this,i]}}}nn.closedBy=new nn({deserialize:n=>n.split(" ")});nn.openedBy=new nn({deserialize:n=>n.split(" ")});nn.group=new nn({deserialize:n=>n.split(" ")});nn.isolate=new nn({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});nn.contextHash=new nn({perNode:!0});nn.lookAhead=new nn({perNode:!0});nn.mounted=new nn({perNode:!0});class K0{constructor(e,r,i,o=!1){this.tree=e,this.overlay=r,this.parser=i,this.bracketed=o}static get(e){return e&&e.props&&e.props[nn.mounted.id]}}const dQe=Object.create(null);class Oo{constructor(e,r,i,o=0){this.name=e,this.props=r,this.id=i,this.flags=o}static define(e){let r=e.props&&e.props.length?Object.create(null):dQe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new Oo(e.name||"",r,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(o)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[s[0].id]=s[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(nn.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let i in e)for(let o of i.split(" "))r[o]=e[i];return i=>{for(let o=i.prop(nn.group),s=-1;s<(o?o.length:0);s++){let a=r[s<0?i.name:o[s]];if(a)return a}}}}Oo.none=new Oo("",Object.create(null),0,8);class hI{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let i of this.types){let o=null;for(let s of e){let a=s(i);if(a){o||(o=Object.assign({},i.props));let l=a[1],c=a[0];c.combine&&c.id in o&&(l=c.combine(o[c.id],l)),o[c.id]=l}}r.push(o?new Oo(i.name,o,i.id,i.flags):i)}return new hI(r)}}const vk=new WeakMap,HG=new WeakMap;var Rn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(Rn||(Rn={}));class Fn{constructor(e,r,i,o,s){if(this.type=e,this.children=r,this.positions=i,this.length=o,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,l]of s)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=K0.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let i of this.children){let o=i.toString();o&&(r&&(r+=","),r+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new iC(this.topNode,e)}cursorAt(e,r=0,i=0){let o=vk.get(this)||this.topNode,s=new iC(o);return s.moveTo(e,r),vk.set(this,s._tree),s}get topNode(){return new ro(this,0,0,null)}resolve(e,r=0){let i=tb(vk.get(this)||this.topNode,e,r,!1);return vk.set(this,i),i}resolveInner(e,r=0){let i=tb(HG.get(this)||this.topNode,e,r,!0);return HG.set(this,i),i}resolveStack(e,r=0){return pQe(this,e,r)}iterate(e){let{enter:r,leave:i,from:o=0,to:s=this.length}=e,a=e.mode||0,l=(a&Rn.IncludeAnonymous)>0;for(let c=this.cursor(a|Rn.IncludeAnonymous);;){let u=!1;if(c.from<=s&&c.to>=o&&(!l&&c.type.isAnonymous||r(c)!==!1)){if(c.firstChild())continue;u=!0}for(;u&&i&&(l||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:mI(Oo.none,this.children,this.positions,0,this.children.length,0,this.length,(r,i,o)=>new Fn(this.type,r,i,o,this.propValues),e.makeTree||((r,i,o)=>new Fn(Oo.none,r,i,o)))}static build(e){return mQe(e)}}Fn.empty=new Fn(Oo.none,[],[],0);class fI{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fI(this.buffer,this.index)}}class Gh{constructor(e,r,i){this.buffer=e,this.length=r,this.set=i}get type(){return Oo.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],i=this.buffer[e+3],o=this.set.types[r],s=o.name;if(/\W/.test(s)&&!o.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,r,i,o,s){let{buffer:a}=this,l=-1;for(let c=e;c!=r&&!(yce(s,o,a[c+1],a[c+2])&&(l=c,i>0));c=a[c+3]);return l}slice(e,r,i){let o=this.buffer,s=new Uint16Array(r-e),a=0;for(let l=e,c=0;l<r;){s[c++]=o[l++],s[c++]=o[l++]-i;let u=s[c++]=o[l++]-i;s[c++]=o[l++]-e,a=Math.max(a,u)}return new Gh(s,a,this.set)}}function yce(n,e,r,i){switch(n){case-2:return r<e;case-1:return i>=e&&r<e;case 0:return r<e&&i>e;case 1:return r<=e&&i>e;case 2:return i>e;case 4:return!0}}function tb(n,e,r,i){for(var o;n.from==n.to||(r<1?n.from>=e:n.from>e)||(r>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof ro&&n.index<0?null:n.parent;if(!a)return n;n=a}let s=i?0:Rn.IgnoreOverlays;if(i)for(let a=n,l=a.parent;l;a=l,l=a.parent)a instanceof ro&&a.index<0&&((o=l.enter(e,r,s))===null||o===void 0?void 0:o.from)!=a.from&&(n=l);for(;;){let a=n.enter(e,r,s);if(!a)return n;n=a}}class vce{cursor(e=0){return new iC(this,e)}getChild(e,r=null,i=null){let o=qG(this,e,r,i);return o.length?o[0]:null}getChildren(e,r=null,i=null){return qG(this,e,r,i)}resolve(e,r=0){return tb(this,e,r,!1)}resolveInner(e,r=0){return tb(this,e,r,!0)}matchContext(e){return NE(this.parent,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),i=this;for(;r;){let o=r.lastChild;if(!o||o.to!=r.to)break;o.type.isError&&o.from==o.to?(i=r,r=o.prevSibling):r=o}return i}get node(){return this}get next(){return this.parent}}class ro extends vce{constructor(e,r,i,o){super(),this._tree=e,this.from=r,this.index=i,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,i,o,s=0){var a;for(let l=this;;){for(let{children:c,positions:u}=l._tree,d=r>0?c.length:-1;e!=d;e+=r){let h=c[e],f=u[e]+l.from;if(!(!(s&Rn.EnterBracketed&&h instanceof Fn&&((a=K0.get(h))===null||a===void 0?void 0:a.overlay)===null&&(f>=i||f+h.length<=i))&&!yce(o,i,f,f+h.length))){if(h instanceof Gh){if(s&Rn.ExcludeBuffers)continue;let m=h.findChild(0,h.buffer.length,r,i-f,o);if(m>-1)return new yc(new hQe(l,h,e,f),null,m)}else if(s&Rn.IncludeAnonymous||!h.type.isAnonymous||pI(h)){let m;if(!(s&Rn.IgnoreMounts)&&(m=K0.get(h))&&!m.overlay)return new ro(m.tree,f,e,l);let v=new ro(h,f,e,l);return s&Rn.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(r<0?h.children.length-1:0,r,i,o,s)}}}if(s&Rn.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+r:e=r<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,r,i=0){let o;if(!(i&Rn.IgnoreOverlays)&&(o=K0.get(this._tree))&&o.overlay){let s=e-this.from,a=i&Rn.EnterBracketed&&o.bracketed;for(let{from:l,to:c}of o.overlay)if((r>0||a?l<=s:l<s)&&(r<0||a?c>=s:c>s))return new ro(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function qG(n,e,r,i){let o=n.cursor(),s=[];if(!o.firstChild())return s;if(r!=null){for(let a=!1;!a;)if(a=o.type.is(r),!o.nextSibling())return s}for(;;){if(i!=null&&o.type.is(i))return s;if(o.type.is(e)&&s.push(o.node),!o.nextSibling())return i==null?s:[]}}function NE(n,e,r=e.length-1){for(let i=n;r>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[r]&&e[r]!=i.name)return!1;r--}}return!0}class hQe{constructor(e,r,i,o){this.parent=e,this.buffer=r,this.index=i,this.start=o}}class yc extends vce{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,i){super(),this.context=e,this._parent=r,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,r,i){let{buffer:o}=this.context,s=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.context.start,i);return s<0?null:new yc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,r,i=0){if(i&Rn.ExcludeBuffers)return null;let{buffer:o}=this.context,s=o.findChild(this.index+4,o.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return s<0?null:new yc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new yc(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new yc(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:i}=this.context,o=this.index+4,s=i.buffer[this.index+3];if(s>o){let a=i.buffer[this.index+1];e.push(i.slice(o,s,a)),r.push(0)}return new Fn(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function xce(n){if(!n.length)return null;let e=0,r=n[0];for(let s=1;s<n.length;s++){let a=n[s];(a.from>r.from||a.to<r.to)&&(r=a,e=s)}let i=r instanceof ro&&r.index<0?null:r.parent,o=n.slice();return i?o[e]=i:o.splice(e,1),new fQe(o,r)}class fQe{constructor(e,r){this.heads=e,this.node=r}get next(){return xce(this.heads)}}function pQe(n,e,r){let i=n.resolveInner(e,r),o=null;for(let s=i instanceof ro?i:i.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(o||(o=[i])).push(a.resolve(e,r)),s=a}else{let a=K0.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let l=new ro(a.tree,a.overlay[0].from+s.from,-1,s);(o||(o=[i])).push(tb(l,e,r,!1))}}return o?xce(o):i}class iC{get name(){return this.type.name}constructor(e,r=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=r&~Rn.EnterBracketed,e instanceof ro)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:i,buffer:o}=this.buffer;return this.type=r||o.set.types[o.buffer[e]],this.from=i+o.buffer[e+1],this.to=i+o.buffer[e+2],!0}yield(e){return e?e instanceof ro?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,i,this.mode));let{buffer:o}=this.buffer,s=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,i=this.mode){return this.buffer?i&Rn.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Rn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Rn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,i=this.stack.length-1;if(e<0){let o=i<0?0:this.stack[i]+4;if(this.index!=o)return this.yieldBuf(r.findChild(o,this.index,-1,0,4))}else{let o=r.buffer[this.index+3];if(o<(i<0?r.buffer.length:r.buffer[this.stack[i]+3]))return this.yieldBuf(o)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,i,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(o.buffer.buffer[s+3]<this.index)return!1;({index:r,parent:i}=o)}else({index:r,_parent:i}=this._tree);for(;i;{index:r,_parent:i}=i)if(r>-1)for(let s=r+e,a=e<0?-1:i._tree.children.length;s!=a;s+=e){let l=i._tree.children[s];if(this.mode&Rn.IncludeAnonymous||l instanceof Gh||!l.type.isAnonymous||pI(l))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,i=0;if(e&&e.context==this.buffer)e:for(let o=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==o){if(o==this.index)return a;r=a,i=s+1;break e}o=this.stack[--s]}for(let o=i;o<this.stack.length;o++)r=new yc(this.buffer,r,this.stack[o]);return this.bufferNode=new yc(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let i=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(o=!0)}for(;;){if(o&&r&&r(this),o=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,o=!0}}}matchContext(e){if(!this.buffer)return NE(this.node.parent,e);let{buffer:r}=this.buffer,{types:i}=r.set;for(let o=e.length-1,s=this.stack.length-1;o>=0;s--){if(s<0)return NE(this._tree,e,o);let a=i[r.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[o]&&e[o]!=a.name)return!1;o--}}return!0}}function pI(n){return n.children.some(e=>e instanceof Gh||!e.type.isAnonymous||pI(e))}function mQe(n){var e;let{buffer:r,nodeSet:i,maxBufferLength:o=cQe,reused:s=[],minRepeatType:a=i.types.length}=n,l=Array.isArray(r)?new fI(r,r.length):r,c=i.types,u=0,d=0;function h(A,T,E,L,$,z){let{id:B,start:D,end:Y,size:I}=l,U=d,Z=u;if(I<0)if(l.next(),I==-1){let G=s[B];E.push(G),L.push(D-A);return}else if(I==-3){u=B;return}else if(I==-4){d=B;return}else throw new RangeError(`Unrecognized record size: ${I}`);let te=c[B],J,oe,q=D-A;if(Y-D<=o&&(oe=b(l.pos-T,$))){let G=new Uint16Array(oe.size-oe.skip),re=l.pos-oe.size,V=G.length;for(;l.pos>re;)V=w(oe.start,G,V);J=new Gh(G,Y-oe.start,i),q=oe.start-A}else{let G=l.pos-I;l.next();let re=[],V=[],ve=B>=a?B:-1,ke=0,pe=Y;for(;l.pos>G;)ve>=0&&l.id==ve&&l.size>=0?(l.end<=pe-o&&(v(re,V,D,ke,l.end,pe,ve,U,Z),ke=re.length,pe=l.end),l.next()):z>2500?f(D,G,re,V):h(D,G,re,V,ve,z+1);if(ve>=0&&ke>0&&ke<re.length&&v(re,V,D,ke,D,pe,ve,U,Z),re.reverse(),V.reverse(),ve>-1&&ke>0){let me=m(te,Z);J=mI(te,re,V,0,re.length,0,Y-D,me,me)}else J=x(te,re,V,Y-D,U-Y,Z)}E.push(J),L.push(q)}function f(A,T,E,L){let $=[],z=0,B=-1;for(;l.pos>T;){let{id:D,start:Y,end:I,size:U}=l;if(U>4)l.next();else{if(B>-1&&Y<B)break;B<0&&(B=I-o),$.push(D,Y,I),z++,l.next()}}if(z){let D=new Uint16Array(z*4),Y=$[$.length-2];for(let I=$.length-3,U=0;I>=0;I-=3)D[U++]=$[I],D[U++]=$[I+1]-Y,D[U++]=$[I+2]-Y,D[U++]=U;E.push(new Gh(D,$[2]-Y,i)),L.push(Y-A)}}function m(A,T){return(E,L,$)=>{let z=0,B=E.length-1,D,Y;if(B>=0&&(D=E[B])instanceof Fn){if(!B&&D.type==A&&D.length==$)return D;(Y=D.prop(nn.lookAhead))&&(z=L[B]+D.length+Y)}return x(A,E,L,$,z,T)}}function v(A,T,E,L,$,z,B,D,Y){let I=[],U=[];for(;A.length>L;)I.push(A.pop()),U.push(T.pop()+E-$);A.push(x(i.types[B],I,U,z-$,D-z,Y)),T.push($-E)}function x(A,T,E,L,$,z,B){if(z){let D=[nn.contextHash,z];B=B?[D].concat(B):[D]}if($>25){let D=[nn.lookAhead,$];B=B?[D].concat(B):[D]}return new Fn(A,T,E,L,B)}function b(A,T){let E=l.fork(),L=0,$=0,z=0,B=E.end-o,D={size:0,start:0,skip:0};e:for(let Y=E.pos-A;E.pos>Y;){let I=E.size;if(E.id==T&&I>=0){D.size=L,D.start=$,D.skip=z,z+=4,L+=4,E.next();continue}let U=E.pos-I;if(I<0||U<Y||E.start<B)break;let Z=E.id>=a?4:0,te=E.start;for(E.next();E.pos>U;){if(E.size<0)if(E.size==-3||E.size==-4)Z+=4;else break e;else E.id>=a&&(Z+=4);E.next()}$=te,L+=I,z+=Z}return(T<0||L==A)&&(D.size=L,D.start=$,D.skip=z),D.size>4?D:void 0}function w(A,T,E){let{id:L,start:$,end:z,size:B}=l;if(l.next(),B>=0&&L<a){let D=E;if(B>4){let Y=l.pos-(B-4);for(;l.pos>Y;)E=w(A,T,E)}T[--E]=D,T[--E]=z-A,T[--E]=$-A,T[--E]=L}else B==-3?u=L:B==-4&&(d=L);return E}let S=[],_=[];for(;l.pos>0;)h(n.start||0,n.bufferStart||0,S,_,-1,0);let P=(e=n.length)!==null&&e!==void 0?e:S.length?_[0]+S[0].length:0;return new Fn(c[n.topID],S.reverse(),_.reverse(),P)}const VG=new WeakMap;function K4(n,e){if(!n.isAnonymous||e instanceof Gh||e.type!=n)return 1;let r=VG.get(e);if(r==null){r=1;for(let i of e.children){if(i.type!=n||!(i instanceof Fn)){r=1;break}r+=K4(n,i)}VG.set(e,r)}return r}function mI(n,e,r,i,o,s,a,l,c){let u=0;for(let v=i;v<o;v++)u+=K4(n,e[v]);let d=Math.ceil(u*1.5/8),h=[],f=[];function m(v,x,b,w,S){for(let _=b;_<w;){let P=_,A=x[_],T=K4(n,v[_]);for(_++;_<w;_++){let E=K4(n,v[_]);if(T+E>=d)break;T+=E}if(_==P+1){if(T>d){let E=v[P];m(E.children,E.positions,0,E.children.length,x[P]+S);continue}h.push(v[P])}else{let E=x[_-1]+v[_-1].length-A;h.push(mI(n,v,x,P,_,A,E,null,c))}f.push(A+S-s)}}return m(e,r,i,o,0),(l||c)(h,f,a)}class Wbt{constructor(){this.map=new WeakMap}setBuffer(e,r,i){let o=this.map.get(e);o||this.map.set(e,o=new Map),o.set(r,i)}getBuffer(e,r){let i=this.map.get(e);return i&&i.get(r)}set(e,r){e instanceof yc?this.setBuffer(e.context.buffer,e.index,r):e instanceof ro&&this.map.set(e.tree,r)}get(e){return e instanceof yc?this.getBuffer(e.context.buffer,e.index):e instanceof ro?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Wu{constructor(e,r,i,o,s=!1,a=!1){this.from=e,this.to=r,this.tree=i,this.offset=o,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],i=!1){let o=[new Wu(0,e.length,e,0,!1,i)];for(let s of r)s.to>e.length&&o.push(s);return o}static applyChanges(e,r,i=128){if(!r.length)return e;let o=[],s=1,a=e.length?e[0]:null;for(let l=0,c=0,u=0;;l++){let d=l<r.length?r[l]:null,h=d?d.fromA:1e9;if(h-c>=i)for(;a&&a.from<h;){let f=a;if(c>=f.from||h<=f.to||u){let m=Math.max(f.from,c)-u,v=Math.min(f.to,h)-u;f=m>=v?null:new Wu(m,v,f.tree,f.offset+u,l>0,!!d)}if(f&&o.push(f),a.to>h)break;a=s<e.length?e[s++]:null}if(!d)break;c=d.toA,u=d.toA-d.toB}return o}}let bce=class{startParse(e,r,i){return typeof e=="string"&&(e=new gQe(e)),i=i?i.length?i.map(o=>new xa(o.from,o.to)):[new xa(0,0)]:[new xa(0,e.length)],this.createParse(e,r||[],i)}parse(e,r,i){let o=this.startParse(e,r,i);for(;;){let s=o.advance();if(s)return s}}};class gQe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}function Kbt(n){return(e,r,i,o)=>new vQe(e,n,r,i,o)}class WG{constructor(e,r,i,o,s,a){this.parser=e,this.parse=r,this.overlay=i,this.bracketed=o,this.target=s,this.from=a}}function UG(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class yQe{constructor(e,r,i,o,s,a,l,c){this.parser=e,this.predicate=r,this.mounts=i,this.index=o,this.start=s,this.bracketed=a,this.target=l,this.prev=c,this.depth=0,this.ranges=[]}}const jE=new nn({perNode:!0});class vQe{constructor(e,r,i,o,s){this.nest=r,this.input=i,this.fragments=o,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let o of this.inner)o.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new Fn(i.type,i.children,i.positions,i.length,i.propValues.concat([[jE,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],r=e.parse.advance();if(r){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[nn.mounted.id]=new K0(r,e.overlay,e.parser,e.bracketed),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].from<e&&(e=Math.min(e,this.inner[r].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].parse.stopAt(e)}startInner(){let e=new wQe(this.fragments),r=null,i=null,o=new iC(new ro(this.baseTree,this.ranges[0].from,0,null),Rn.IncludeAnonymous|Rn.IgnoreMounts);e:for(let s,a;;){let l=!0,c;if(this.stoppedAt!=null&&o.from>=this.stoppedAt)l=!1;else if(e.hasNode(o)){if(r){let u=r.mounts.find(d=>d.frag.from<=o.from&&d.frag.to>=o.to&&d.mount.overlay);if(u)for(let d of u.mount.overlay){let h=d.from+u.pos,f=d.to+u.pos;h>=o.from&&f<=o.to&&!r.ranges.some(m=>m.from<f&&m.to>h)&&r.ranges.push({from:h,to:f})}}l=!1}else if(i&&(a=xQe(i.ranges,o.from,o.to)))l=a!=2;else if(!o.type.isAnonymous&&(s=this.nest(o,this.input))&&(o.from<o.to||!s.overlay)){o.tree||(bQe(o),r&&r.depth++,i&&i.depth++);let u=e.findMounts(o.from,s.parser);if(typeof s.overlay=="function")r=new yQe(s.parser,s.overlay,u,this.inner.length,o.from,!!s.bracketed,o.tree,r);else{let d=YG(this.ranges,s.overlay||(o.from<o.to?[new xa(o.from,o.to)]:[]));d.length&&UG(d),(d.length||!s.overlay)&&this.inner.push(new WG(s.parser,d.length?s.parser.startParse(this.input,ZG(u,d),d):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new xa(h.from-o.from,h.to-o.from)):null,!!s.bracketed,o.tree,d.length?d[0].from:o.from)),s.overlay?d.length&&(i={ranges:d,depth:0,prev:i}):l=!1}}else if(r&&(c=r.predicate(o))&&(c===!0&&(c=new xa(o.from,o.to)),c.from<c.to)){let u=r.ranges.length-1;u>=0&&r.ranges[u].to==c.from?r.ranges[u]={from:r.ranges[u].from,to:c.to}:r.ranges.push(c)}if(l&&o.firstChild())r&&r.depth++,i&&i.depth++;else for(;!o.nextSibling();){if(!o.parent())break e;if(r&&!--r.depth){let u=YG(this.ranges,r.ranges);u.length&&(UG(u),this.inner.splice(r.index,0,new WG(r.parser,r.parser.startParse(this.input,ZG(r.mounts,u),u),r.ranges.map(d=>new xa(d.from-r.start,d.to-r.start)),r.bracketed,r.target,u[0].from))),r=r.prev}i&&!--i.depth&&(i=i.prev)}}}}function xQe(n,e,r){for(let i of n){if(i.from>=r)break;if(i.to>e)return i.from<=e&&i.to>=r?2:1}return 0}function KG(n,e,r,i,o,s){if(e<r){let a=n.buffer[e+1];i.push(n.slice(e,r,a)),o.push(a-s)}}function bQe(n){let{node:e}=n,r=[],i=e.context.buffer;do r.push(n.index),n.parent();while(!n.tree);let o=n.tree,s=o.children.indexOf(i),a=o.children[s],l=a.buffer,c=[s];function u(d,h,f,m,v,x){let b=r[x],w=[],S=[];KG(a,d,b,w,S,m);let _=l[b+1],P=l[b+2];c.push(w.length);let A=x?u(b+4,l[b+3],a.set.types[l[b]],_,P-_,x-1):e.toTree();return w.push(A),S.push(_-m),KG(a,l[b+3],h,w,S,m),new Fn(f,w,S,v)}o.children[s]=u(0,l.length,Oo.none,0,a.length,r.length-1);for(let d of c){let h=n.tree.children[d],f=n.tree.positions[d];n.yield(new ro(h,f+n.from,d,n._tree))}}class GG{constructor(e,r){this.offset=r,this.done=!1,this.cursor=e.cursor(Rn.IncludeAnonymous|Rn.IgnoreMounts)}moveTo(e){let{cursor:r}=this,i=e-this.offset;for(;!this.done&&r.from<i;)r.to>=e&&r.enter(i,1,Rn.IgnoreOverlays|Rn.ExcludeBuffers)||r.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let r=this.cursor.tree;;){if(r==e.tree)return!0;if(r.children.length&&r.positions[0]==0&&r.children[0]instanceof Fn)r=r.children[0];else break}return!1}}class wQe{constructor(e){var r;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(r=i.tree.prop(jE))!==null&&r!==void 0?r:i.to,this.inner=new GG(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let r=this.curFrag=this.fragments[this.fragI];this.curTo=(e=r.tree.prop(jE))!==null&&e!==void 0?e:r.to,this.inner=new GG(r.tree,-r.offset)}}findMounts(e,r){var i;let o=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let a=(i=s.tree)===null||i===void 0?void 0:i.prop(nn.mounted);if(a&&a.parser==r)for(let l=this.fragI;l<this.fragments.length;l++){let c=this.fragments[l];if(c.from>=s.to)break;c.tree==this.curFrag.tree&&o.push({frag:c,pos:s.from-c.offset,mount:a})}}}return o}}function YG(n,e){let r=null,i=e;for(let o=1,s=0;o<n.length;o++){let a=n[o-1].to,l=n[o].from;for(;s<i.length;s++){let c=i[s];if(c.from>=l)break;c.to<=a||(r||(i=r=e.slice()),c.from<a?(r[s]=new xa(c.from,a),c.to>l&&r.splice(s+1,0,new xa(l,c.to))):c.to>l?r[s--]=new xa(l,c.to):r.splice(s--,1))}}return i}function kQe(n,e,r,i){let o=0,s=0,a=!1,l=!1,c=-1e9,u=[];for(;;){let d=o==n.length?1e9:a?n[o].to:n[o].from,h=s==e.length?1e9:l?e[s].to:e[s].from;if(a!=l){let f=Math.max(c,r),m=Math.min(d,h,i);f<m&&u.push(new xa(f,m))}if(c=Math.min(d,h),c==1e9)break;d==c&&(a?(a=!1,o++):a=!0),h==c&&(l?(l=!1,s++):l=!0)}return u}function ZG(n,e){let r=[];for(let{pos:i,mount:o,frag:s}of n){let a=i+(o.overlay?o.overlay[0].from:0),l=a+o.tree.length,c=Math.max(s.from,a),u=Math.min(s.to,l);if(o.overlay){let d=o.overlay.map(f=>new xa(f.from+i,f.to+i)),h=kQe(e,d,c,u);for(let f=0,m=c;;f++){let v=f==h.length,x=v?u:h[f].from;if(x>m&&r.push(new Wu(m,x,o.tree,-a,s.from>=m||s.openStart,s.to<=x||s.openEnd)),v)break;m=h[f].to}}else r.push(new Wu(c,u,o.tree,-a,s.from>=a||s.openStart,s.to<=l||s.openEnd))}return r}let OE=[],wce=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,r=0;e<n.length;e++)(e%2?wce:OE).push(r=r+n[e])})();function SQe(n){if(n<768)return!1;for(let e=0,r=OE.length;;){let i=e+r>>1;if(n<OE[i])r=i;else if(n>=wce[i])e=i+1;else return!0;if(e==r)return!1}}function XG(n){return n>=127462&&n<=127487}const JG=8205;function CQe(n,e,r=!0,i=!0){return(r?kce:_Qe)(n,e,i)}function kce(n,e,r){if(e==n.length)return e;e&&Sce(n.charCodeAt(e))&&Cce(n.charCodeAt(e-1))&&e--;let i=QT(n,e);for(e+=QG(i);e<n.length;){let o=QT(n,e);if(i==JG||o==JG||r&&SQe(o))e+=QG(o),i=o;else if(XG(o)){let s=0,a=e-2;for(;a>=0&&XG(QT(n,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function _Qe(n,e,r){for(;e>0;){let i=kce(n,e-2,r);if(i<e)return i;e--}return 0}function QT(n,e){let r=n.charCodeAt(e);if(!Cce(r)||e+1==n.length)return r;let i=n.charCodeAt(e+1);return Sce(i)?(r-55296<<10)+(i-56320)+65536:r}function Sce(n){return n>=56320&&n<57344}function Cce(n){return n>=55296&&n<56320}function QG(n){return n<65536?1:2}let wn=class _ce{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,i){[e,r]=bg(this,e,r);let o=[];return this.decompose(0,e,o,2),i.length&&i.decompose(0,i.length,o,3),this.decompose(r,this.length,o,1),G4.from(o,this.length-(r-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=bg(this,e,r);let i=[];return this.decompose(e,r,i,0),G4.from(i,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),o=new Yv(this),s=new Yv(e);for(let a=r,l=r;;){if(o.next(a),s.next(a),a=0,o.lineBreak!=s.lineBreak||o.done!=s.done||o.value!=s.value)return!1;if(l+=o.value.length,o.done||l>=i)return!0}}iter(e=1){return new Yv(this,e)}iterRange(e,r=this.length){return new Ace(this,e,r)}iterLines(e,r){let i;if(e==null)i=this.iter();else{r==null&&(r=this.lines+1);let o=this.line(e).from;i=this.iterRange(o,Math.max(o,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new Tce(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_ce.empty:e.length<=32?new Or(e):G4.from(Or.split(e,[]))}};class Or extends wn{constructor(e,r=AQe(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,i,o){for(let s=0;;s++){let a=this.text[s],l=o+a.length;if((r?i:l)>=e)return new TQe(o,l,i,a);o=l+1,i++}}decompose(e,r,i,o){let s=e<=0&&r>=this.length?this:new Or(eY(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(o&1){let a=i.pop(),l=Y4(s.text,a.text.slice(),0,s.length);if(l.length<=32)i.push(new Or(l,a.length+s.length));else{let c=l.length>>1;i.push(new Or(l.slice(0,c)),new Or(l.slice(c)))}}else i.push(s)}replace(e,r,i){if(!(i instanceof Or))return super.replace(e,r,i);[e,r]=bg(this,e,r);let o=Y4(this.text,Y4(i.text,eY(this.text,0,e)),r),s=this.length+i.length-(r-e);return o.length<=32?new Or(o,s):G4.from(Or.split(o,[]),s)}sliceString(e,r=this.length,i=`
`){[e,r]=bg(this,e,r);let o="";for(let s=0,a=0;s<=r&&a<this.text.length;a++){let l=this.text[a],c=s+l.length;s>e&&a&&(o+=i),e<c&&r>s&&(o+=l.slice(Math.max(0,e-s),r-s)),s=c+1}return o}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let i=[],o=-1;for(let s of e)i.push(s),o+=s.length+1,i.length==32&&(r.push(new Or(i,o)),i=[],o=-1);return o>-1&&r.push(new Or(i,o)),r}}let G4=class x0 extends wn{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,r,i,o){for(let s=0;;s++){let a=this.children[s],l=o+a.length,c=i+a.lines-1;if((r?c:l)>=e)return a.lineInner(e,r,i,o);o=l+1,i=c+1}}decompose(e,r,i,o){for(let s=0,a=0;a<=r&&s<this.children.length;s++){let l=this.children[s],c=a+l.length;if(e<=c&&r>=a){let u=o&((a<=e?1:0)|(c>=r?2:0));a>=e&&c<=r&&!u?i.push(l):l.decompose(e-a,r-a,i,u)}a=c+1}}replace(e,r,i){if([e,r]=bg(this,e,r),i.lines<this.lines)for(let o=0,s=0;o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e>=s&&r<=l){let c=a.replace(e-s,r-s,i),u=this.lines-a.lines+c.lines;if(c.lines<u>>4&&c.lines>u>>6){let d=this.children.slice();return d[o]=c,new x0(d,this.length-(r-e)+i.length)}return super.replace(s,l,c)}s=l+1}return super.replace(e,r,i)}sliceString(e,r=this.length,i=`
`){[e,r]=bg(this,e,r);let o="";for(let s=0,a=0;s<this.children.length&&a<=r;s++){let l=this.children[s],c=a+l.length;a>e&&s&&(o+=i),e<c&&r>a&&(o+=l.sliceString(e-a,r-a,i)),a=c+1}return o}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof x0))return 0;let i=0,[o,s,a,l]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=r,s+=r){if(o==a||s==l)return i;let c=this.children[o],u=e.children[s];if(c!=u)return i+c.scanIdentical(u,r);i+=c.length+1}}static from(e,r=e.reduce((i,o)=>i+o.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let v of e)v.flatten(m);return new Or(m,r)}let o=Math.max(32,i>>5),s=o<<1,a=o>>1,l=[],c=0,u=-1,d=[];function h(m){let v;if(m.lines>s&&m instanceof x0)for(let x of m.children)h(x);else m.lines>a&&(c>a||!c)?(f(),l.push(m)):m instanceof Or&&c&&(v=d[d.length-1])instanceof Or&&m.lines+v.lines<=32?(c+=m.lines,u+=m.length+1,d[d.length-1]=new Or(v.text.concat(m.text),v.length+1+m.length)):(c+m.lines>o&&f(),c+=m.lines,u+=m.length+1,d.push(m))}function f(){c!=0&&(l.push(d.length==1?d[0]:x0.from(d,u)),u=-1,c=d.length=0)}for(let m of e)h(m);return f(),l.length==1?l[0]:new x0(l,r)}};wn.empty=new Or([""],0);function AQe(n){let e=-1;for(let r of n)e+=r.length+1;return e}function Y4(n,e,r=0,i=1e9){for(let o=0,s=0,a=!0;s<n.length&&o<=i;s++){let l=n[s],c=o+l.length;c>=r&&(c>i&&(l=l.slice(0,i-o)),o<r&&(l=l.slice(r-o)),a?(e[e.length-1]+=l,a=!1):e.push(l)),o=c+1}return e}function eY(n,e,r){return Y4(n,[""],e,r)}class Yv{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof Or?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,o=this.nodes[i],s=this.offsets[i],a=s>>1,l=o instanceof Or?o.text.length:o.children.length;if(a==(r>0?l:0)){if(i==0)return this.done=!0,this.value="",this;r>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(r>0?0:1)){if(this.offsets[i]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof Or){let c=o.text[a+(r<0?-1:0)];if(this.offsets[i]+=r,c.length>Math.max(0,e))return this.value=e==0?c:r>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=o.children[a+(r<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=r):(r<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(r>0?1:(c instanceof Or?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Ace{constructor(e,r,i){this.value="",this.done=!1,this.cursor=new Yv(e,r>i?-1:1),this.pos=r>i?e.length:0,this.from=Math.min(r,i),this.to=Math.max(r,i)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let i=r<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*r,this.value=o.length<=i?o:r<0?o.slice(o.length-i):o.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Tce{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:i,value:o}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(wn.prototype[Symbol.iterator]=function(){return this.iter()},Yv.prototype[Symbol.iterator]=Ace.prototype[Symbol.iterator]=Tce.prototype[Symbol.iterator]=function(){return this});class TQe{constructor(e,r,i,o){this.from=e,this.to=r,this.number=i,this.text=o}get length(){return this.to-this.from}}function bg(n,e,r){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,r))]}function ti(n,e,r=!0,i=!0){return CQe(n,e,r,i)}function PQe(n){return n>=56320&&n<57344}function MQe(n){return n>=55296&&n<56320}function ts(n,e){let r=n.charCodeAt(e);if(!MQe(r)||e+1==n.length)return r;let i=n.charCodeAt(e+1);return PQe(i)?(r-55296<<10)+(i-56320)+65536:r}function gI(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function uc(n){return n<65536?1:2}const DE=/\r\n?|\n/;var Oi=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Oi||(Oi={}));class Cc{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let i=this.sections[r+1];e+=i<0?this.sections[r]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,i=0,o=0;r<this.sections.length;){let s=this.sections[r++],a=this.sections[r++];a<0?(e(i,o,s),o+=s):o+=a,i+=s}}iterChangedRanges(e,r=!1){IE(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let i=this.sections[r++],o=this.sections[r++];o<0?e.push(i,o):e.push(o,i)}return new Cc(e)}composeDesc(e){return this.empty?e:e.empty?this:Pce(this,e)}mapDesc(e,r=!1){return e.empty?this:RE(this,e,r)}mapPos(e,r=-1,i=Oi.Simple){let o=0,s=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],c=this.sections[a++],u=o+l;if(c<0){if(u>e)return s+(e-o);s+=l}else{if(i!=Oi.Simple&&u>=e&&(i==Oi.TrackDel&&o<e&&u>e||i==Oi.TrackBefore&&o<e||i==Oi.TrackAfter&&u>e))return null;if(u>e||u==e&&r<0&&!l)return e==o||r<0?s:s+c;s+=c}o=u}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return s}touchesRange(e,r=e){for(let i=0,o=0;i<this.sections.length&&o<=r;){let s=this.sections[i++],a=this.sections[i++],l=o+s;if(a>=0&&o<=r&&l>=e)return o<e&&l>r?"cover":!0;o=l}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let i=this.sections[r++],o=this.sections[r++];e+=(e?" ":"")+i+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Cc(e)}static create(e){return new Cc(e)}}class ei extends Cc{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return IE(this,(r,i,o,s,a)=>e=e.replace(o,o+(i-r),a),!1),e}mapDesc(e,r=!1){return RE(this,e,r,!0)}invert(e){let r=this.sections.slice(),i=[];for(let o=0,s=0;o<r.length;o+=2){let a=r[o],l=r[o+1];if(l>=0){r[o]=l,r[o+1]=a;let c=o>>1;for(;i.length<c;)i.push(wn.empty);i.push(a?e.slice(s,s+a):wn.empty)}s+=a}return new ei(r,i)}compose(e){return this.empty?e:e.empty?this:Pce(this,e,!0)}map(e,r=!1){return e.empty?this:RE(this,e,r,!0)}iterChanges(e,r=!1){IE(this,e,r)}get desc(){return Cc.create(this.sections)}filter(e){let r=[],i=[],o=[],s=new nb(this);e:for(let a=0,l=0;;){let c=a==e.length?1e9:e[a++];for(;l<c||l==c&&s.len==0;){if(s.done)break e;let d=Math.min(s.len,c-l);Qi(o,d,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Qi(r,d,h),h>0&&jh(i,r,s.text),s.forward(d),l+=d}let u=e[a++];for(;l<u;){if(s.done)break e;let d=Math.min(s.len,u-l);Qi(r,d,-1),Qi(o,d,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(d),l+=d}}return{changes:new ei(r,i),filtered:Cc.create(o)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let i=this.sections[r],o=this.sections[r+1];o<0?e.push(i):o==0?e.push([i]):e.push([i].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,i){let o=[],s=[],a=0,l=null;function c(d=!1){if(!d&&!o.length)return;a<r&&Qi(o,r-a,-1);let h=new ei(o,s);l=l?l.compose(h.map(l)):h,o=[],s=[],a=0}function u(d){if(Array.isArray(d))for(let h of d)u(h);else if(d instanceof ei){if(d.length!=r)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${r})`);c(),l=l?l.compose(d.map(l)):d}else{let{from:h,to:f=h,insert:m}=d;if(h>f||h<0||f>r)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${r})`);let v=m?typeof m=="string"?wn.of(m.split(i||DE)):m:wn.empty,x=v.length;if(h==f&&x==0)return;h<a&&c(),h>a&&Qi(o,h-a,-1),Qi(o,f-h,x),jh(s,o,v),a=f}}return u(e),c(!l),l}static empty(e){return new ei(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],i=[];for(let o=0;o<e.length;o++){let s=e[o];if(typeof s=="number")r.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)r.push(s[0],0);else{for(;i.length<o;)i.push(wn.empty);i[o]=wn.of(s.slice(1)),r.push(s[0],i[o].length)}}}return new ei(r,i)}static createSet(e,r){return new ei(e,r)}}function Qi(n,e,r,i=!1){if(e==0&&r<=0)return;let o=n.length-2;o>=0&&r<=0&&r==n[o+1]?n[o]+=e:o>=0&&e==0&&n[o]==0?n[o+1]+=r:i?(n[o]+=e,n[o+1]+=r):n.push(e,r)}function jh(n,e,r){if(r.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(r);else{for(;n.length<i;)n.push(wn.empty);n.push(r)}}function IE(n,e,r){let i=n.inserted;for(let o=0,s=0,a=0;a<n.sections.length;){let l=n.sections[a++],c=n.sections[a++];if(c<0)o+=l,s+=l;else{let u=o,d=s,h=wn.empty;for(;u+=l,d+=c,c&&i&&(h=h.append(i[a-2>>1])),!(r||a==n.sections.length||n.sections[a+1]<0);)l=n.sections[a++],c=n.sections[a++];e(o,u,s,d,h),o=u,s=d}}}function RE(n,e,r,i=!1){let o=[],s=i?[]:null,a=new nb(n),l=new nb(e);for(let c=-1;;){if(a.done&&l.len||l.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&l.ins==-1){let u=Math.min(a.len,l.len);Qi(o,u,-1),a.forward(u),l.forward(u)}else if(l.ins>=0&&(a.ins<0||c==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!r))){let u=l.len;for(Qi(o,l.ins,-1);u;){let d=Math.min(a.len,u);a.ins>=0&&c<a.i&&a.len<=d&&(Qi(o,0,a.ins),s&&jh(s,o,a.text),c=a.i),a.forward(d),u-=d}l.next()}else if(a.ins>=0){let u=0,d=a.len;for(;d;)if(l.ins==-1){let h=Math.min(d,l.len);u+=h,d-=h,l.forward(h)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;Qi(o,u,c<a.i?a.ins:0),s&&c<a.i&&jh(s,o,a.text),c=a.i,a.forward(a.len-d)}else{if(a.done&&l.done)return s?ei.createSet(o,s):Cc.create(o);throw new Error("Mismatched change set lengths")}}}function Pce(n,e,r=!1){let i=[],o=r?[]:null,s=new nb(n),a=new nb(e);for(let l=!1;;){if(s.done&&a.done)return o?ei.createSet(i,o):Cc.create(i);if(s.ins==0)Qi(i,s.len,0,l),s.next();else if(a.len==0&&!a.done)Qi(i,0,a.ins,l),o&&jh(o,i,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(s.len2,a.len),u=i.length;if(s.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;Qi(i,c,d,l),o&&d&&jh(o,i,a.text)}else a.ins==-1?(Qi(i,s.off?0:s.len,c,l),o&&jh(o,i,s.textBit(c))):(Qi(i,s.off?0:s.len,a.off?0:a.ins,l),o&&!a.off&&jh(o,i,a.text));l=(s.ins>c||a.ins>=0&&a.len>c)&&(l||i.length>u),s.forward2(c),a.forward(c)}}}}class nb{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?wn.empty:e[r]}textBit(e){let{inserted:r}=this.set,i=this.i-2>>1;return i>=r.length&&!e?wn.empty:r[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class vp{constructor(e,r,i){this.from=e,this.to=r,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let i,o;return this.empty?i=o=e.mapPos(this.from,r):(i=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),i==this.from&&o==this.to?this:new vp(i,o,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return De.range(e,r);let i=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return De.range(this.anchor,i)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return De.range(e.anchor,e.head)}static create(e,r,i){return new vp(e,r,i)}}class De{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:De.create(this.ranges.map(i=>i.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new De([this.main],0)}addRange(e,r=!0){return De.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let i=this.ranges.slice();return i[r]=e,De.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new De(e.ranges.map(r=>vp.fromJSON(r)),e.main)}static single(e,r=e){return new De([De.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,o=0;o<e.length;o++){let s=e[o];if(s.empty?s.from<=i:s.from<i)return De.normalized(e.slice(),r);i=s.to}return new De(e,r)}static cursor(e,r=0,i,o){return vp.create(e,e,(r==0?0:r<0?8:16)|(i==null?7:Math.min(6,i))|(o??16777215)<<6)}static range(e,r,i,o){let s=(i??16777215)<<6|(o==null?7:Math.min(6,o));return r<e?vp.create(r,e,48|s):vp.create(e,r,(r>e?8:0)|s)}static normalized(e,r=0){let i=e[r];e.sort((o,s)=>o.from-s.from),r=e.indexOf(i);for(let o=1;o<e.length;o++){let s=e[o],a=e[o-1];if(s.empty?s.from<=a.to:s.from<a.to){let l=a.from,c=Math.max(s.to,a.to);o<=r&&r--,e.splice(--o,2,s.anchor>s.head?De.range(c,l):De.range(l,c))}}return new De(e,r)}}function Mce(n,e){for(let r of n.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let yI=0;class it{constructor(e,r,i,o,s){this.combine=e,this.compareInput=r,this.compare=i,this.isStatic=o,this.id=yI++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new it(e.combine||(r=>r),e.compareInput||((r,i)=>r===i),e.compare||(e.combine?(r,i)=>r===i:vI),!!e.static,e.enables)}of(e){return new Z4([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new Z4(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new Z4(e,this,2,r)}from(e,r){return r||(r=i=>i),this.compute([e],i=>r(i.field(e)))}}function vI(n,e){return n==e||n.length==e.length&&n.every((r,i)=>r===e[i])}class Z4{constructor(e,r,i,o){this.dependencies=e,this.facet=r,this.type=i,this.value=o,this.id=yI++}dynamicSlot(e){var r;let i=this.value,o=this.facet.compareInput,s=this.id,a=e[s]>>1,l=this.type==2,c=!1,u=!1,d=[];for(let h of this.dependencies)h=="doc"?c=!0:h=="selection"?u=!0:(((r=e[h.id])!==null&&r!==void 0?r:1)&1)==0&&d.push(e[h.id]);return{create(h){return h.values[a]=i(h),1},update(h,f){if(c&&f.docChanged||u&&(f.docChanged||f.selection)||LE(h,d)){let m=i(h);if(l?!tY(m,h.values[a],o):!o(m,h.values[a]))return h.values[a]=m,1}return 0},reconfigure:(h,f)=>{let m,v=f.config.address[s];if(v!=null){let x=sC(f,v);if(this.dependencies.every(b=>b instanceof it?f.facet(b)===h.facet(b):b instanceof ki?f.field(b,!1)==h.field(b,!1):!0)||(l?tY(m=i(h),x,o):o(m=i(h),x)))return h.values[a]=x,0}else m=i(h);return h.values[a]=m,1}}}}function tY(n,e,r){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!r(n[i],e[i]))return!1;return!0}function LE(n,e){let r=!1;for(let i of e)Zv(n,i)&1&&(r=!0);return r}function EQe(n,e,r){let i=r.map(c=>n[c.id]),o=r.map(c=>c.type),s=i.filter(c=>!(c&1)),a=n[e.id]>>1;function l(c){let u=[];for(let d=0;d<i.length;d++){let h=sC(c,i[d]);if(o[d]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(c){for(let u of i)Zv(c,u);return c.values[a]=l(c),1},update(c,u){if(!LE(c,s))return 0;let d=l(c);return e.compare(d,c.values[a])?0:(c.values[a]=d,1)},reconfigure(c,u){let d=LE(c,i),h=u.config.facets[e.id],f=u.facet(e);if(h&&!d&&vI(r,h))return c.values[a]=f,0;let m=l(c);return e.compare(m,f)?(c.values[a]=f,0):(c.values[a]=m,1)}}}const xk=it.define({static:!0});class ki{constructor(e,r,i,o,s){this.id=e,this.createF=r,this.updateF=i,this.compareF=o,this.spec=s,this.provides=void 0}static define(e){let r=new ki(yI++,e.create,e.update,e.compare||((i,o)=>i===o),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(xk).find(i=>i.field==this);return(r?.create||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:i=>(i.values[r]=this.create(i),1),update:(i,o)=>{let s=i.values[r],a=this.updateF(s,o);return this.compareF(s,a)?0:(i.values[r]=a,1)},reconfigure:(i,o)=>{let s=i.facet(xk),a=o.facet(xk),l;return(l=s.find(c=>c.field==this))&&l!=a.find(c=>c.field==this)?(i.values[r]=l.create(i),1):o.config.address[this.id]!=null?(i.values[r]=o.field(this),0):(i.values[r]=this.create(i),1)}}}init(e){return[this,xk.of({field:this,create:e})]}get extension(){return this}}const up={lowest:4,low:3,default:2,high:1,highest:0};function yy(n){return e=>new Ece(e,n)}const hf={highest:yy(up.highest),high:yy(up.high),default:yy(up.default),low:yy(up.low),lowest:yy(up.lowest)};class Ece{constructor(e,r){this.inner=e,this.prec=r}}class wg{of(e){return new zE(this,e)}reconfigure(e){return wg.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class zE{constructor(e,r){this.compartment=e,this.inner=r}}class oC{constructor(e,r,i,o,s,a){for(this.base=e,this.compartments=r,this.dynamicSlots=i,this.address=o,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,i){let o=[],s=Object.create(null),a=new Map;for(let f of NQe(e,r,a))f instanceof ki?o.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),c=[],u=[];for(let f of o)l[f.id]=u.length<<1,u.push(m=>f.slot(m));let d=i?.config.facets;for(let f in s){let m=s[f],v=m[0].facet,x=d&&d[f]||[];if(m.every(b=>b.type==0))if(l[v.id]=c.length<<1|1,vI(x,m))c.push(i.facet(v));else{let b=v.combine(m.map(w=>w.value));c.push(i&&v.compare(b,i.facet(v))?i.facet(v):b)}else{for(let b of m)b.type==0?(l[b.id]=c.length<<1|1,c.push(b.value)):(l[b.id]=u.length<<1,u.push(w=>b.dynamicSlot(w)));l[v.id]=u.length<<1,u.push(b=>EQe(b,v,m))}}let h=u.map(f=>f(l));return new oC(e,a,h,l,c,s)}}function NQe(n,e,r){let i=[[],[],[],[],[]],o=new Map;function s(a,l){let c=o.get(a);if(c!=null){if(c<=l)return;let u=i[c].indexOf(a);u>-1&&i[c].splice(u,1),a instanceof zE&&r.delete(a.compartment)}if(o.set(a,l),Array.isArray(a))for(let u of a)s(u,l);else if(a instanceof zE){if(r.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;r.set(a.compartment,u),s(u,l)}else if(a instanceof Ece)s(a.inner,a.prec);else if(a instanceof ki)i[l].push(a),a.provides&&s(a.provides,l);else if(a instanceof Z4)i[l].push(a),a.facet.extensions&&s(a.facet.extensions,up.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(n,up.default),i.reduce((a,l)=>a.concat(l))}function Zv(n,e){if(e&1)return 2;let r=e>>1,i=n.status[r];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[r]=4;let o=n.computeSlot(n,n.config.dynamicSlots[r]);return n.status[r]=2|o}function sC(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Nce=it.define(),FE=it.define({combine:n=>n.some(e=>e),static:!0}),jce=it.define({combine:n=>n.length?n[0]:void 0,static:!0}),Oce=it.define(),Dce=it.define(),Ice=it.define(),Rce=it.define({combine:n=>n.length?n[0]:!1});class _d{constructor(e,r){this.type=e,this.value=r}static define(){return new jQe}}class jQe{of(e){return new _d(this,e)}}class OQe{constructor(e){this.map=e}of(e){return new Ht(this,e)}}class Ht{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new Ht(this.type,r)}is(e){return this.type==e}static define(e={}){return new OQe(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let i=[];for(let o of e){let s=o.map(r);s&&i.push(s)}return i}}Ht.reconfigure=Ht.define();Ht.appendConfig=Ht.define();class Br{constructor(e,r,i,o,s,a){this.startState=e,this.changes=r,this.selection=i,this.effects=o,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Mce(i,r.newLength),s.some(l=>l.type==Br.time)||(this.annotations=s.concat(Br.time.of(Date.now())))}static create(e,r,i,o,s,a){return new Br(e,r,i,o,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Br.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Br.time=_d.define();Br.userEvent=_d.define();Br.addToHistory=_d.define();Br.remote=_d.define();function DQe(n,e){let r=[];for(let i=0,o=0;;){let s,a;if(i<n.length&&(o==e.length||e[o]>=n[i]))s=n[i++],a=n[i++];else if(o<e.length)s=e[o++],a=e[o++];else return r;!r.length||r[r.length-1]<s?r.push(s,a):r[r.length-1]<a&&(r[r.length-1]=a)}}function Lce(n,e,r){var i;let o,s,a;return r?(o=e.changes,s=ei.empty(e.changes.length),a=n.changes.compose(e.changes)):(o=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(o)),{changes:a,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(o),effects:Ht.mapEffects(n.effects,o).concat(Ht.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function $E(n,e,r){let i=e.selection,o=G0(e.annotations);return e.userEvent&&(o=o.concat(Br.userEvent.of(e.userEvent))),{changes:e.changes instanceof ei?e.changes:ei.of(e.changes||[],r,n.facet(jce)),selection:i&&(i instanceof De?i:De.single(i.anchor,i.head)),effects:G0(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function zce(n,e,r){let i=$E(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(r=!1);let a=!!e[s].sequential;i=Lce(i,$E(n,e[s],a?i.changes.newLength:n.doc.length),a)}let o=Br.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return RQe(r?IQe(o):o)}function IQe(n){let e=n.startState,r=!0;for(let o of e.facet(Oce)){let s=o(n);if(s===!1){r=!1;break}Array.isArray(s)&&(r=r===!0?s:DQe(r,s))}if(r!==!0){let o,s;if(r===!1)s=n.changes.invertedDesc,o=ei.empty(e.doc.length);else{let a=n.changes.filter(r);o=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}n=Br.create(e,o,n.selection&&n.selection.map(s),Ht.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(Dce);for(let o=i.length-1;o>=0;o--){let s=i[o](n);s instanceof Br?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Br?n=s[0]:n=zce(e,G0(s),!1)}return n}function RQe(n){let e=n.startState,r=e.facet(Ice),i=n;for(let o=r.length-1;o>=0;o--){let s=r[o](n);s&&Object.keys(s).length&&(i=Lce(i,$E(e,s,n.changes.newLength),!0))}return i==n?n:Br.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const LQe=[];function G0(n){return n==null?LQe:Array.isArray(n)?n:[n]}var pr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(pr||(pr={}));const zQe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let BE;try{BE=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function FQe(n){if(BE)return BE.test(n);for(let e=0;e<n.length;e++){let r=n[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||zQe.test(r)))return!0}return!1}function $Qe(n){return e=>{if(!/\S/.test(e))return pr.Space;if(FQe(e))return pr.Word;for(let r=0;r<n.length;r++)if(e.indexOf(n[r])>-1)return pr.Word;return pr.Other}}class un{constructor(e,r,i,o,s,a){this.config=e,this.doc=r,this.selection=i,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Zv(this,l<<1);this.computeSlot=null}field(e,r=!0){let i=this.config.address[e.id];if(i==null){if(r)throw new RangeError("Field is not present in this state");return}return Zv(this,i),sC(this,i)}update(...e){return zce(this,e,!0)}applyTransaction(e){let r=this.config,{base:i,compartments:o}=r;for(let l of e.effects)l.is(wg.reconfigure)?(r&&(o=new Map,r.compartments.forEach((c,u)=>o.set(u,c)),r=null),o.set(l.value.compartment,l.value.extension)):l.is(Ht.reconfigure)?(r=null,i=l.value):l.is(Ht.appendConfig)&&(r=null,i=G0(i).concat(l.value));let s;r?s=e.startState.values.slice():(r=oC.resolve(i,o,this),s=new un(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(c,u)=>u.reconfigure(c,this),null).values);let a=e.startState.facet(FE)?e.newSelection:e.newSelection.asSingle();new un(r,e.newDoc,a,s,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:De.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,i=e(r.ranges[0]),o=this.changes(i.changes),s=[i.range],a=G0(i.effects);for(let l=1;l<r.ranges.length;l++){let c=e(r.ranges[l]),u=this.changes(c.changes),d=u.map(o);for(let f=0;f<l;f++)s[f]=s[f].map(d);let h=o.mapDesc(u,!0);s.push(c.range.map(h)),o=o.compose(d),a=Ht.mapEffects(a,d).concat(Ht.mapEffects(G0(c.effects),h))}return{changes:o,selection:De.create(s,r.mainIndex),effects:a}}changes(e=[]){return e instanceof ei?e:ei.of(e,this.doc.length,this.facet(un.lineSeparator))}toText(e){return wn.of(e.split(this.facet(un.lineSeparator)||DE))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(Zv(this,r),sC(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let o=e[i];o instanceof ki&&this.config.address[o.id]!=null&&(r[i]=o.spec.toJSON(this.field(e[i]),this))}return r}static fromJSON(e,r={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let a=i[s],l=e[s];o.push(a.init(c=>a.spec.fromJSON(l,c)))}}return un.create({doc:e.doc,selection:De.fromJSON(e.selection),extensions:r.extensions?o.concat([r.extensions]):o})}static create(e={}){let r=oC.resolve(e.extensions||[],new Map),i=e.doc instanceof wn?e.doc:wn.of((e.doc||"").split(r.staticFacet(un.lineSeparator)||DE)),o=e.selection?e.selection instanceof De?e.selection:De.single(e.selection.anchor,e.selection.head):De.single(0);return Mce(o,i.length),r.staticFacet(FE)||(o=o.asSingle()),new un(r,i,o,r.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(un.tabSize)}get lineBreak(){return this.facet(un.lineSeparator)||`
`}get readOnly(){return this.facet(Rce)}phrase(e,...r){for(let i of this.facet(un.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(i,o)=>{if(o=="$")return"$";let s=+(o||1);return!s||s>r.length?i:r[s-1]})),e}languageDataAt(e,r,i=-1){let o=[];for(let s of this.facet(Nce))for(let a of s(this,r,i))Object.prototype.hasOwnProperty.call(a,e)&&o.push(a[e]);return o}charCategorizer(e){let r=this.languageDataAt("wordChars",e);return $Qe(r.length?r[0]:"")}wordAt(e){let{text:r,from:i,length:o}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-i,l=e-i;for(;a>0;){let c=ti(r,a,!1);if(s(r.slice(c,a))!=pr.Word)break;a=c}for(;l<o;){let c=ti(r,l);if(s(r.slice(l,c))!=pr.Word)break;l=c}return a==l?null:De.range(a+i,l+i)}}un.allowMultipleSelections=FE;un.tabSize=it.define({combine:n=>n.length?n[0]:4});un.lineSeparator=jce;un.readOnly=Rce;un.phrases=it.define({compare(n,e){let r=Object.keys(n),i=Object.keys(e);return r.length==i.length&&r.every(o=>n[o]==e[o])}});un.languageData=Nce;un.changeFilter=Oce;un.transactionFilter=Dce;un.transactionExtender=Ice;wg.reconfigure=Ht.define();function Bc(n,e,r={}){let i={};for(let o of n)for(let s of Object.keys(o)){let a=o[s],l=i[s];if(l===void 0)i[s]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(r,s))i[s]=r[s](l,a);else throw new Error("Config merge conflict for field "+s)}for(let o in e)i[o]===void 0&&(i[o]=e[o]);return i}class Yh{eq(e){return this==e}range(e,r=e){return rb.create(e,r,this)}}Yh.prototype.startSide=Yh.prototype.endSide=0;Yh.prototype.point=!1;Yh.prototype.mapMode=Oi.TrackDel;function xI(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}class rb{constructor(e,r,i){this.from=e,this.to=r,this.value=i}static create(e,r,i){return new rb(e,r,i)}}function HE(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class bI{constructor(e,r,i,o){this.from=e,this.to=r,this.value=i,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,r,i,o=0){let s=i?this.to:this.from;for(let a=o,l=s.length;;){if(a==l)return a;let c=a+l>>1,u=s[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-r;if(c==a)return u>=0?a:l;u>=0?l=c:a=c+1}}between(e,r,i,o){for(let s=this.findIndex(r,-1e9,!0),a=this.findIndex(i,1e9,!1,s);s<a;s++)if(o(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,r){let i=[],o=[],s=[],a=-1,l=-1;for(let c=0;c<this.value.length;c++){let u=this.value[c],d=this.from[c]+e,h=this.to[c]+e,f,m;if(d==h){let v=r.mapPos(d,u.startSide,u.mapMode);if(v==null||(f=m=v,u.startSide!=u.endSide&&(m=r.mapPos(d,u.endSide),m<f)))continue}else if(f=r.mapPos(d,u.startSide),m=r.mapPos(h,u.endSide),f>m||f==m&&u.startSide>0&&u.endSide<=0)continue;(m-f||u.endSide-u.startSide)<0||(a<0&&(a=f),u.point&&(l=Math.max(l,m-f)),i.push(u),o.push(f-a),s.push(m-a))}return{mapped:i.length?new bI(o,s,i,l):null,pos:a}}}class on{constructor(e,r,i,o){this.chunkPos=e,this.chunk=r,this.nextLayer=i,this.maxPoint=o}static create(e,r,i,o){return new on(e,r,i,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:i=!1,filterFrom:o=0,filterTo:s=this.length}=e,a=e.filter;if(r.length==0&&!a)return this;if(i&&(r=r.slice().sort(HE)),this.isEmpty)return r.length?on.of(r):this;let l=new Fce(this,null,-1).goto(0),c=0,u=[],d=new id;for(;l.value||c<r.length;)if(c<r.length&&(l.from-r[c].from||l.startSide-r[c].value.startSide)>=0){let h=r[c++];d.addInner(h.from,h.to,h.value)||u.push(h)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==r.length||this.chunkEnd(l.chunkIndex)<r[c].from)&&(!a||o>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||o>l.to||s<l.from||a(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||u.push(rb.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!u.length?on.empty:this.nextLayer.update({add:u,filter:a,filterFrom:o,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],i=[],o=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],u=e.touchesRange(l,l+c.length);if(u===!1)o=Math.max(o,c.maxPoint),r.push(c),i.push(e.mapPos(l));else if(u===!0){let{mapped:d,pos:h}=c.map(l,e);d&&(o=Math.max(o,d.maxPoint),r.push(d),i.push(h))}}let s=this.nextLayer.map(e);return r.length==0?s:new on(i,r,s||on.empty,o)}between(e,r,i){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],a=this.chunk[o];if(r>=s&&e<=s+a.length&&a.between(s,e-s,r-s,i)===!1)return}this.nextLayer.between(e,r,i)}}iter(e=0){return ib.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return ib.from(e).goto(r)}static compare(e,r,i,o,s=-1){let a=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=r.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),c=nY(a,l,i),u=new vy(a,c,s),d=new vy(l,c,s);i.iterGaps((h,f,m)=>rY(u,h,d,f,m,o)),i.empty&&i.length==0&&rY(u,0,d,0,0,o)}static eq(e,r,i=0,o){o==null&&(o=999999999);let s=e.filter(d=>!d.isEmpty&&r.indexOf(d)<0),a=r.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let l=nY(s,a),c=new vy(s,l,0).goto(i),u=new vy(a,l,0).goto(i);for(;;){if(c.to!=u.to||!qE(c.active,u.active)||c.point&&(!u.point||!xI(c.point,u.point)))return!1;if(c.to>o)return!0;c.next(),u.next()}}static spans(e,r,i,o,s=-1){let a=new vy(e,null,s).goto(r),l=r,c=a.openStart;for(;;){let u=Math.min(a.to,i);if(a.point){let d=a.activeForPoint(a.to),h=a.pointFrom<r?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,c);o.point(l,u,a.point,d,h,a.pointRank),c=Math.min(a.openEnd(u),d.length)}else u>l&&(o.span(l,u,a.active,c),c=a.openEnd(u));if(a.to>i)return c+(a.point&&a.to>i?1:0);l=a.to,a.next()}}static of(e,r=!1){let i=new id;for(let o of e instanceof rb?[e]:r?BQe(e):e)i.add(o.from,o.to,o.value);return i.finish()}static join(e){if(!e.length)return on.empty;let r=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let o=e[i];o!=on.empty;o=o.nextLayer)r=new on(o.chunkPos,o.chunk,r,Math.max(o.maxPoint,r.maxPoint));return r}}on.empty=new on([],[],null,-1);function BQe(n){if(n.length>1)for(let e=n[0],r=1;r<n.length;r++){let i=n[r];if(HE(e,i)>0)return n.slice().sort(HE);e=i}return n}on.empty.nextLayer=on.empty;class id{finishChunk(e){this.chunks.push(new bI(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,i){this.addInner(e,r,i)||(this.nextLayer||(this.nextLayer=new id)).add(e,r,i)}addInner(e,r,i){let o=e-this.lastTo||i.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=r,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let i=r.value.length-1;return this.last=r.value[i],this.lastFrom=r.from[i]+e,this.lastTo=r.to[i]+e,!0}finish(){return this.finishInner(on.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=on.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function nY(n,e,r){let i=new Map;for(let s of n)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&i.set(s.chunk[a],s.chunkPos[a]);let o=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let l=i.get(s.chunk[a]);l!=null&&(r?r.mapPos(l):l)==s.chunkPos[a]&&!r?.touchesRange(l,l+s.chunk[a].length)&&o.add(s.chunk[a])}return o}class Fce{constructor(e,r,i,o=0){this.layer=e,this.skip=r,this.minPoint=i,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,i){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!i||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],i=e+r.from[this.rangeIndex];if(this.from=i,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ib{constructor(e){this.heap=e}static from(e,r=null,i=-1){let o=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&o.push(new Fce(a,r,i,s));return o.length==1?o[0]:new ib(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let i of this.heap)i.goto(e,r);for(let i=this.heap.length>>1;i>=0;i--)eP(this.heap,i);return this.next(),this}forward(e,r){for(let i of this.heap)i.forward(e,r);for(let i=this.heap.length>>1;i>=0;i--)eP(this.heap,i);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),eP(this.heap,0)}}}function eP(n,e){for(let r=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let o=n[i];if(i+1<n.length&&o.compare(n[i+1])>=0&&(o=n[i+1],i++),r.compare(o)<0)break;n[i]=r,n[e]=o,e=i}}class vy{constructor(e,r,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ib.from(e,r,i)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){bk(this.active,e),bk(this.activeTo,e),bk(this.activeRank,e),this.minActive=iY(this.active,this.activeTo)}addActive(e){let r=0,{value:i,to:o,rank:s}=this.cursor;for(;r<this.activeRank.length&&(s-this.activeRank[r]||o-this.activeTo[r])>0;)r++;wk(this.active,r,i),wk(this.activeTo,r,o),wk(this.activeRank,r,s),e&&wk(e,r,this.cursor.from),this.minActive=iY(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&bk(i,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let o=i.length-1;o>=0&&i[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&r.push(this.active[i]);return r.reverse()}openEnd(e){let r=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)r++;return r}}function rY(n,e,r,i,o,s){n.goto(e),r.goto(i);let a=i+o,l=i,c=i-e,u=!!s.boundChange;for(let d=!1;;){let h=n.to+c-r.to,f=h||n.endSide-r.endSide,m=f<0?n.to+c:r.to,v=Math.min(m,a);if(n.point||r.point?(n.point&&r.point&&xI(n.point,r.point)&&qE(n.activeForPoint(n.to),r.activeForPoint(r.to))||s.comparePoint(l,v,n.point,r.point),d=!1):(d&&s.boundChange(l),v>l&&!qE(n.active,r.active)&&s.compareRange(l,v,n.active,r.active),u&&v<a&&(h||n.openEnd(m)!=r.openEnd(m))&&(d=!0)),m>a)break;l=m,f<=0&&n.next(),f>=0&&r.next()}}function qE(n,e){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!=e[r]&&!xI(n[r],e[r]))return!1;return!0}function bk(n,e){for(let r=e,i=n.length-1;r<i;r++)n[r]=n[r+1];n.pop()}function wk(n,e,r){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=r}function iY(n,e){let r=-1,i=1e9;for(let o=0;o<e.length;o++)(e[o]-i||n[o].endSide-n[r].endSide)<0&&(r=o,i=e[o]);return r}function e1(n,e,r=n.length){let i=0;for(let o=0;o<r&&o<n.length;)n.charCodeAt(o)==9?(i+=e-i%e,o++):(i++,o=ti(n,o));return i}function VE(n,e,r,i){for(let o=0,s=0;;){if(s>=e)return o;if(o==n.length)break;s+=n.charCodeAt(o)==9?r-s%r:1,o=ti(n,o)}return i===!0?-1:n.length}const WE="",oY=typeof Symbol>"u"?"__"+WE:Symbol.for(WE),UE=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),sY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Zh{constructor(e,r){this.rules=[];let{finish:i}=r||{};function o(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,l,c,u){let d=[],h=/^@(\w+)\b/.exec(a[0]),f=h&&h[1]=="keyframes";if(h&&l==null)return c.push(a[0]+";");for(let m in l){let v=l[m];if(/&/.test(m))s(m.split(/,\s*/).map(x=>a.map(b=>x.replace(/&/,b))).reduce((x,b)=>x.concat(b)),v,c);else if(v&&typeof v=="object"){if(!h)throw new RangeError("The value of a property ("+m+") should be a primitive value.");s(o(m),v,d,f)}else v!=null&&d.push(m.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+v+";")}(d.length||f)&&c.push((i&&!h&&!u?a.map(i):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)s(o(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=sY[oY]||1;return sY[oY]=e+1,WE+e.toString(36)}static mount(e,r,i){let o=e[UE],s=i&&i.nonce;o?s&&o.setNonce(s):o=new HQe(e,s),o.mount(Array.isArray(r)?r:[r],e)}}let aY=new Map;class HQe{constructor(e,r){let i=e.ownerDocument||e,o=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&o.CSSStyleSheet){let s=aY.get(i);if(s)return e[UE]=s;this.sheet=new o.CSSStyleSheet,aY.set(i,this)}else this.styleTag=i.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[UE]=this}mount(e,r){let i=this.sheet,o=0,s=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<s&&c>-1&&(this.modules.splice(c,1),s--,c=-1),c==-1){if(this.modules.splice(s++,0,l),i)for(let u=0;u<l.rules.length;u++)i.insertRule(l.rules[u],o++)}else{for(;s<c;)o+=this.modules[s++].rules.length;o+=l.rules.length,s++}}if(i)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let l=r.head||r;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}function Nn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var o=r[i];typeof o=="string"?n.setAttribute(i,o):o!=null&&(n[i]=o)}e++}for(;e<arguments.length;e++)$ce(n,arguments[e]);return n}function $ce(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)$ce(n,e[r]);else throw new RangeError("Unsupported child node: "+e)}let yo=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},KE=typeof document<"u"?document:{documentElement:{style:{}}};const GE=/Edge\/(\d+)/.exec(yo.userAgent),Bce=/MSIE \d/.test(yo.userAgent),YE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(yo.userAgent),A6=!!(Bce||YE||GE),lY=!A6&&/gecko\/(\d+)/i.test(yo.userAgent),tP=!A6&&/Chrome\/(\d+)/.exec(yo.userAgent),qQe="webkitFontSmoothing"in KE.documentElement.style,ZE=!A6&&/Apple Computer/.test(yo.vendor),cY=ZE&&(/Mobile\/\w+/.test(yo.userAgent)||yo.maxTouchPoints>2);var st={mac:cY||/Mac/.test(yo.platform),windows:/Win/.test(yo.platform),linux:/Linux|X11/.test(yo.platform),ie:A6,ie_version:Bce?KE.documentMode||6:YE?+YE[1]:GE?+GE[1]:0,gecko:lY,gecko_version:lY?+(/Firefox\/(\d+)/.exec(yo.userAgent)||[0,0])[1]:0,chrome:!!tP,chrome_version:tP?+tP[1]:0,ios:cY,android:/Android\b/.test(yo.userAgent),webkit_version:qQe?+(/\bAppleWebKit\/(\d+)/.exec(yo.userAgent)||[0,0])[1]:0,safari:ZE,safari_version:ZE?+(/\bVersion\/(\d+(\.\d+)?)/.exec(yo.userAgent)||[0,0])[1]:0,tabSize:KE.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function wI(n,e){for(let r in n)r=="class"&&e.class?e.class+=" "+n.class:r=="style"&&e.style?e.style+=";"+n.style:e[r]=n[r];return e}const aC=Object.create(null);function kI(n,e,r){if(n==e)return!0;n||(n=aC),e||(e=aC);let i=Object.keys(n),o=Object.keys(e);if(i.length-0!=o.length-0)return!1;for(let s of i)if(s!=r&&(o.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function VQe(n,e){for(let r=n.attributes.length-1;r>=0;r--){let i=n.attributes[r].name;e[i]==null&&n.removeAttribute(i)}for(let r in e){let i=e[r];r=="style"?n.style.cssText=i:n.getAttribute(r)!=i&&n.setAttribute(r,i)}}function uY(n,e,r){let i=!1;if(e)for(let o in e)r&&o in r||(i=!0,o=="style"?n.style.cssText="":n.removeAttribute(o));if(r)for(let o in r)e&&e[o]==r[o]||(i=!0,o=="style"?n.style.cssText=r[o]:n.setAttribute(o,r[o]));return i}function WQe(n){let e=Object.create(null);for(let r=0;r<n.attributes.length;r++){let i=n.attributes[r];e[i.name]=i.value}return e}class Hc{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Li=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Li||(Li={}));class Et extends Yh{constructor(e,r,i,o){super(),this.startSide=e,this.endSide=r,this.widget=i,this.spec=o}get heightRelevant(){return!1}static mark(e){return new lw(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return r+=i&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new cm(e,r,r,i,e.widget||null,!1)}static replace(e){let r=!!e.block,i,o;if(e.isBlockGap)i=-5e8,o=4e8;else{let{start:s,end:a}=Hce(e,r);i=(s?r?-3e8:-1:5e8)-1,o=(a?r?2e8:1:-6e8)+1}return new cm(e,i,o,r,e.widget||null,!0)}static line(e){return new cw(e)}static set(e,r=!1){return on.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Et.none=on.empty;class lw extends Et{constructor(e){let{start:r,end:i}=Hce(e);super(r?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?wI(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||aC}eq(e){return this==e||e instanceof lw&&this.tagName==e.tagName&&kI(this.attrs,e.attrs)}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}lw.prototype.point=!1;class cw extends Et{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof cw&&this.spec.class==e.spec.class&&kI(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}cw.prototype.mapMode=Oi.TrackBefore;cw.prototype.point=!0;class cm extends Et{constructor(e,r,i,o,s,a){super(r,i,s,e),this.block=o,this.isReplace=a,this.mapMode=o?r<=0?Oi.TrackBefore:Oi.TrackAfter:Oi.TrackDel}get type(){return this.startSide!=this.endSide?Li.WidgetRange:this.startSide<=0?Li.WidgetBefore:Li.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof cm&&UQe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}cm.prototype.point=!0;function Hce(n,e=!1){let{inclusiveStart:r,inclusiveEnd:i}=n;return r==null&&(r=n.inclusive),i==null&&(i=n.inclusive),{start:r??e,end:i??e}}function UQe(n,e){return n==e||!!(n&&e&&n.compare(e))}function Y0(n,e,r,i=0){let o=r.length-1;o>=0&&r[o]+i>=n?r[o]=Math.max(r[o],e):r.push(n,e)}class ob extends Yh{constructor(e,r){super(),this.tagName=e,this.attributes=r}eq(e){return e==this||e instanceof ob&&this.tagName==e.tagName&&kI(this.attributes,e.attributes)}static create(e){return new ob(e.tagName,e.attributes||aC)}static set(e,r=!1){return on.of(e,r)}}ob.prototype.startSide=ob.prototype.endSide=-1;function kg(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function XE(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Xv(n,e){if(!e.anchorNode)return!1;try{return XE(n,e.anchorNode)}catch{return!1}}function X4(n){return n.nodeType==3?sb(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Jv(n,e,r,i){return r?dY(n,e,r,i,-1)||dY(n,e,r,i,1):!1}function Xh(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function lC(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function dY(n,e,r,i,o){for(;;){if(n==r&&e==i)return!0;if(e==(o<0?0:od(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Xh(n)+(o<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=o<0?od(n):0}else return!1}}function od(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function cC(n,e){let r=e?n.left:n.right;return{left:r,right:r,top:n.top,bottom:n.bottom}}function KQe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function qce(n,e){let r=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-n.offsetWidth)<1)&&(r=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:r,scaleY:i}}function GQe(n,e,r,i,o,s,a,l){let c=n.ownerDocument,u=c.defaultView||window;for(let d=n,h=!1;d&&!h;)if(d.nodeType==1){let f,m=d==c.body,v=1,x=1;if(m)f=KQe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(h=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let S=d.getBoundingClientRect();({scaleX:v,scaleY:x}=qce(d,S)),f={left:S.left,right:S.left+d.clientWidth*v,top:S.top,bottom:S.top+d.clientHeight*x}}let b=0,w=0;if(o=="nearest")e.top<f.top?(w=e.top-(f.top+a),r>0&&e.bottom>f.bottom+w&&(w=e.bottom-f.bottom+a)):e.bottom>f.bottom&&(w=e.bottom-f.bottom+a,r<0&&e.top-w<f.top&&(w=e.top-(f.top+a)));else{let S=e.bottom-e.top,_=f.bottom-f.top;w=(o=="center"&&S<=_?e.top+S/2-_/2:o=="start"||o=="center"&&r<0?e.top-a:e.bottom-_+a)-f.top}if(i=="nearest"?e.left<f.left?(b=e.left-(f.left+s),r>0&&e.right>f.right+b&&(b=e.right-f.right+s)):e.right>f.right&&(b=e.right-f.right+s,r<0&&e.left<f.left+b&&(b=e.left-(f.left+s))):b=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,b||w)if(m)u.scrollBy(b,w);else{let S=0,_=0;if(w){let P=d.scrollTop;d.scrollTop+=w/x,_=(d.scrollTop-P)*x}if(b){let P=d.scrollLeft;d.scrollLeft+=b/v,S=(d.scrollLeft-P)*v}e={left:e.left-S,top:e.top-_,right:e.right-S,bottom:e.bottom-_},S&&Math.abs(S-b)<1&&(i="nearest"),_&&Math.abs(_-w)<1&&(o="nearest")}if(m)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function YQe(n){let e=n.ownerDocument,r,i;for(let o=n.parentNode;o&&!(o==e.body||r&&i);)if(o.nodeType==1)!i&&o.scrollHeight>o.clientHeight&&(i=o),!r&&o.scrollWidth>o.clientWidth&&(r=o),o=o.assignedSlot||o.parentNode;else if(o.nodeType==11)o=o.host;else break;return{x:r,y:i}}class ZQe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:i}=e;this.set(r,Math.min(e.anchorOffset,r?od(r):0),i,Math.min(e.focusOffset,i?od(i):0))}set(e,r,i,o){this.anchorNode=e,this.anchorOffset=r,this.focusNode=i,this.focusOffset=o}}let tp=null;st.safari&&st.safari_version>=26&&(tp=!1);function Vce(n){if(n.setActive)return n.setActive();if(tp)return n.focus(tp);let e=[];for(let r=n;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(n.focus(tp==null?{get preventScroll(){return tp={preventScroll:!0},!0}}:void 0),!tp){tp=!1;for(let r=0;r<e.length;){let i=e[r++],o=e[r++],s=e[r++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let hY;function sb(n,e,r=e){let i=hY||(hY=document.createRange());return i.setEnd(n,r),i.setStart(n,e),i}function Z0(n,e,r,i){let o={key:e,code:e,keyCode:r,which:r,cancelable:!0};i&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=i);let s=new KeyboardEvent("keydown",o);s.synthetic=!0,n.dispatchEvent(s);let a=new KeyboardEvent("keyup",o);return a.synthetic=!0,n.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function XQe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function JQe(n,e){let r=e.focusNode,i=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=i)return!1;for(i=Math.min(i,od(r));;)if(i){if(r.nodeType!=1)return!1;let o=r.childNodes[i-1];o.contentEditable=="false"?i--:(r=o,i=od(r))}else{if(r==n)return!0;i=Xh(r),r=r.parentNode}}function Wce(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Uce(n,e){for(let r=n,i=e;;){if(r.nodeType==3&&i>0)return{node:r,offset:i};if(r.nodeType==1&&i>0){if(r.contentEditable=="false")return null;r=r.childNodes[i-1],i=od(r)}else if(r.parentNode&&!lC(r))i=Xh(r),r=r.parentNode;else return null}}function Kce(n,e){for(let r=n,i=e;;){if(r.nodeType==3&&i<r.nodeValue.length)return{node:r,offset:i};if(r.nodeType==1&&i<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[i],i=0}else if(r.parentNode&&!lC(r))i=Xh(r)+1,r=r.parentNode;else return null}}class fl{constructor(e,r,i=!0){this.node=e,this.offset=r,this.precise=i}static before(e,r){return new fl(e.parentNode,Xh(e),r)}static after(e,r){return new fl(e.parentNode,Xh(e)+1,r)}}var $n=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})($n||($n={}));const um=$n.LTR,SI=$n.RTL;function Gce(n){let e=[];for(let r=0;r<n.length;r++)e.push(1<<+n[r]);return e}const QQe=Gce("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),eet=Gce("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),JE=Object.create(null),Kl=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),r=n.charCodeAt(1);JE[e]=r,JE[r]=-e}function Yce(n){return n<=247?QQe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?eet[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const tet=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Lu{get dir(){return this.level%2?SI:um}constructor(e,r,i){this.from=e,this.to=r,this.level=i}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,i,o){let s=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=r&&l.to>=r){if(l.level==i)return a;(s<0||(o!=0?o<0?l.from<r:l.to>r:e[s].level>l.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function Zce(n,e){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(i.from!=o.from||i.to!=o.to||i.direction!=o.direction||!Zce(i.inner,o.inner))return!1}return!0}const In=[];function net(n,e,r,i,o){for(let s=0;s<=i.length;s++){let a=s?i[s-1].to:e,l=s<i.length?i[s].from:r,c=s?256:o;for(let u=a,d=c,h=c;u<l;u++){let f=Yce(n.charCodeAt(u));f==512?f=d:f==8&&h==4&&(f=16),In[u]=f==4?2:f,f&7&&(h=f),d=f}for(let u=a,d=c,h=c;u<l;u++){let f=In[u];if(f==128)u<l-1&&d==In[u+1]&&d&24?f=In[u]=d:In[u]=256;else if(f==64){let m=u+1;for(;m<l&&In[m]==64;)m++;let v=u&&d==8||m<r&&In[m]==8?h==1?1:8:256;for(let x=u;x<m;x++)In[x]=v;u=m-1}else f==8&&h==1&&(In[u]=1);d=f,f&7&&(h=f)}}}function ret(n,e,r,i,o){let s=o==1?2:1;for(let a=0,l=0,c=0;a<=i.length;a++){let u=a?i[a-1].to:e,d=a<i.length?i[a].from:r;for(let h=u,f,m,v;h<d;h++)if(m=JE[f=n.charCodeAt(h)])if(m<0){for(let x=l-3;x>=0;x-=3)if(Kl[x+1]==-m){let b=Kl[x+2],w=b&2?o:b&4?b&1?s:o:0;w&&(In[h]=In[Kl[x]]=w),l=x;break}}else{if(Kl.length==189)break;Kl[l++]=h,Kl[l++]=f,Kl[l++]=c}else if((v=In[h])==2||v==1){let x=v==o;c=x?0:1;for(let b=l-3;b>=0;b-=3){let w=Kl[b+2];if(w&2)break;if(x)Kl[b+2]|=2;else{if(w&4)break;Kl[b+2]|=4}}}}}function iet(n,e,r,i){for(let o=0,s=i;o<=r.length;o++){let a=o?r[o-1].to:n,l=o<r.length?r[o].from:e;for(let c=a;c<l;){let u=In[c];if(u==256){let d=c+1;for(;;)if(d==l){if(o==r.length)break;d=r[o++].to,l=o<r.length?r[o].from:e}else if(In[d]==256)d++;else break;let h=s==1,f=(d<e?In[d]:i)==1,m=h==f?h?1:2:i;for(let v=d,x=o,b=x?r[x-1].to:n;v>c;)v==b&&(v=r[--x].from,b=x?r[x-1].to:n),In[--v]=m;c=d}else s=u,c++}}}function QE(n,e,r,i,o,s,a){let l=i%2?2:1;if(i%2==o%2)for(let c=e,u=0;c<r;){let d=!0,h=!1;if(u==s.length||c<s[u].from){let x=In[c];x!=l&&(d=!1,h=x==16)}let f=!d&&l==1?[]:null,m=d?i:i+1,v=c;e:for(;;)if(u<s.length&&v==s[u].from){if(h)break e;let x=s[u];if(!d)for(let b=x.to,w=u+1;;){if(b==r)break e;if(w<s.length&&s[w].from==b)b=s[w++].to;else{if(In[b]==l)break e;break}}if(u++,f)f.push(x);else{x.from>c&&a.push(new Lu(c,x.from,m));let b=x.direction==um!=!(m%2);eN(n,b?i+1:i,o,x.inner,x.from,x.to,a),c=x.to}v=x.to}else{if(v==r||(d?In[v]!=l:In[v]==l))break;v++}f?QE(n,c,v,i+1,o,f,a):c<v&&a.push(new Lu(c,v,m)),c=v}else for(let c=r,u=s.length;c>e;){let d=!0,h=!1;if(!u||c>s[u-1].to){let x=In[c-1];x!=l&&(d=!1,h=x==16)}let f=!d&&l==1?[]:null,m=d?i:i+1,v=c;e:for(;;)if(u&&v==s[u-1].to){if(h)break e;let x=s[--u];if(!d)for(let b=x.from,w=u;;){if(b==e)break e;if(w&&s[w-1].to==b)b=s[--w].from;else{if(In[b-1]==l)break e;break}}if(f)f.push(x);else{x.to<c&&a.push(new Lu(x.to,c,m));let b=x.direction==um!=!(m%2);eN(n,b?i+1:i,o,x.inner,x.from,x.to,a),c=x.from}v=x.from}else{if(v==e||(d?In[v-1]!=l:In[v-1]==l))break;v--}f?QE(n,v,c,i+1,o,f,a):v<c&&a.push(new Lu(v,c,m)),c=v}}function eN(n,e,r,i,o,s,a){let l=e%2?2:1;net(n,o,s,i,l),ret(n,o,s,i,l),iet(o,s,i,l),QE(n,o,s,e,r,i,a)}function oet(n,e,r){if(!n)return[new Lu(0,0,e==SI?1:0)];if(e==um&&!r.length&&!tet.test(n))return Xce(n.length);if(r.length)for(;n.length>In.length;)In[In.length]=256;let i=[],o=e==um?0:1;return eN(n,o,o,r,0,n.length,i),i}function Xce(n){return[new Lu(0,n,0)]}let Jce="";function set(n,e,r,i,o){var s;let a=i.head-n.from,l=Lu.find(e,a,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),c=e[l],u=c.side(o,r);if(a==u){let f=l+=o?1:-1;if(f<0||f>=e.length)return null;c=e[l=f],a=c.side(!o,r),u=c.side(o,r)}let d=ti(n.text,a,c.forward(o,r));(d<c.from||d>c.to)&&(d=u),Jce=n.text.slice(Math.min(a,d),Math.max(a,d));let h=l==(o?e.length-1:0)?null:e[l+(o?1:-1)];return h&&d==u&&h.level+(o?0:1)<c.level?De.cursor(h.side(!o,r)+n.from,h.forward(o,r)?1:-1,h.level):De.cursor(d+n.from,c.forward(o,r)?-1:1,c.level)}function aet(n,e,r){for(let i=e;i<r;i++){let o=Yce(n.charCodeAt(i));if(o==1)return um;if(o==2||o==4)return SI}return um}const Qce=it.define(),eue=it.define(),tue=it.define(),nue=it.define(),tN=it.define(),rue=it.define(),iue=it.define(),CI=it.define(),_I=it.define(),oue=it.define({combine:n=>n.some(e=>e)}),sue=it.define({combine:n=>n.some(e=>e)}),aue=it.define();class X0{constructor(e,r="nearest",i="nearest",o=5,s=5,a=!1){this.range=e,this.y=r,this.x=i,this.yMargin=o,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new X0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new X0(De.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const kk=Ht.define({map:(n,e)=>n.map(e)}),lue=Ht.define();function as(n,e,r){let i=n.facet(nue);i.length?i[0](e):window.onerror&&window.onerror(String(e),r,void 0,void 0,e)||(r?console.error(r+":",e):console.error(e))}const Mu=it.define({combine:n=>n.length?n[0]:!0});let cet=0;const D0=it.define({combine(n){return n.filter((e,r)=>{for(let i=0;i<r;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class Wr{constructor(e,r,i,o,s){this.id=e,this.create=r,this.domEventHandlers=i,this.domEventObservers=o,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(D0.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(D0.of({plugin:this,arg:e}))}static define(e,r){const{eventHandlers:i,eventObservers:o,provide:s,decorations:a}=r||{};return new Wr(cet++,e,i,o,l=>{let c=[];return a&&c.push(T6.of(u=>{let d=u.plugin(l);return d?a(d):Et.none})),s&&c.push(s(l)),c})}static fromClass(e,r){return Wr.define((i,o)=>new e(i,o),r)}}class nP{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(i){if(as(r.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(r){as(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(i){as(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const cue=it.define(),AI=it.define(),T6=it.define(),uue=it.define(),TI=it.define(),uw=it.define(),due=it.define();function fY(n,e){let r=n.state.facet(due);if(!r.length)return r;let i=r.map(s=>s instanceof Function?s(n):s),o=[];return on.spans(i,e.from,e.to,{point(){},span(s,a,l,c){let u=s-e.from,d=a-e.from,h=o;for(let f=l.length-1;f>=0;f--,c--){let m=l[f].spec.bidiIsolate,v;if(m==null&&(m=aet(e.text,u,d)),c>0&&h.length&&(v=h[h.length-1]).to==u&&v.direction==m)v.to=d,h=v.inner;else{let x={from:u,to:d,direction:m,inner:[]};h.push(x),h=x.inner}}}}),o}const hue=it.define();function PI(n){let e=0,r=0,i=0,o=0;for(let s of n.state.facet(hue)){let a=s(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(r=Math.max(r,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(o=Math.max(o,a.bottom)))}return{left:e,right:r,top:i,bottom:o}}const ev=it.define();class ba{constructor(e,r,i,o){this.fromA=e,this.toA=r,this.fromB=i,this.toB=o}join(e){return new ba(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,i=this;for(;r>0;r--){let o=e[r-1];if(!(o.fromA>i.toA)){if(o.toA<i.fromA)break;i=i.join(o),e.splice(r-1,1)}}return e.splice(r,0,i),e}static extendWithRanges(e,r){if(r.length==0)return e;let i=[];for(let o=0,s=0,a=0;;){let l=o<e.length?e[o].fromB:1e9,c=s<r.length?r[s]:1e9,u=Math.min(l,c);if(u==1e9)break;let d=u+a,h=u,f=d;for(;;)if(s<r.length&&r[s]<=h){let m=r[s+1];s+=2,h=Math.max(h,m);for(let v=o;v<e.length&&e[v].fromB<=h;v++)a=e[v].toA-e[v].toB;f=Math.max(f,m+a)}else if(o<e.length&&e[o].fromB<=h){let m=e[o++];h=Math.max(h,m.toB),f=Math.max(f,m.toA),a=m.toA-m.toB}else break;i.push(new ba(d,f,u,h))}return i}}class uC{constructor(e,r,i){this.view=e,this.state=r,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ei.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let o=[];this.changes.iterChangedRanges((s,a,l,c)=>o.push(new ba(s,a,l,c))),this.changedRanges=o}static create(e,r,i){return new uC(e,r,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const uet=[];class qr{constructor(e,r,i=0){this.dom=e,this.length=r,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return uet}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let r=this.domAttrs;r&&VQe(this.dom,r)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,r=this.posAtStart){let i=r;for(let o of this.children){if(o==e)return i;i+=o.length+o.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,r){return null}domPosFor(e,r){let i=Xh(this.dom),o=this.length?e>0:r>0;return new fl(this.parent.dom,i+(o?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof M6)return e;return null}static get(e){return e.cmTile}}class P6 extends qr{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let r=this.dom,i=null,o,s=e?.node==r?e:null,a=0;for(let l of this.children){if(l.sync(e),a+=l.length+l.breakAfter,o=i?i.nextSibling:r.firstChild,s&&o!=l.dom&&(s.written=!0),l.dom.parentNode==r)for(;o&&o!=l.dom;)o=pY(o);else r.insertBefore(l.dom,o);i=l.dom}for(o=i?i.nextSibling:r.firstChild,s&&o&&(s.written=!0);o;)o=pY(o);this.length=a}}function pY(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class M6 extends P6{constructor(e,r){super(r),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let r=qr.get(e);if(r&&this.owns(r))return r;e=e.parentNode}}blockTiles(e){for(let r=[],i=this,o=0,s=0;;)if(o==i.children.length){if(!r.length)return;i=i.parent,i.breakAfter&&s++,o=r.pop()}else{let a=i.children[o++];if(a instanceof $h)r.push(o),i=a,o=0;else{let l=s+a.length,c=e(a,s);if(c!==void 0)return c;s=l+a.breakAfter}}}resolveBlock(e,r){let i,o=-1,s,a=-1;if(this.blockTiles((l,c)=>{let u=c+l.length;if(e>=c&&e<=u){if(l.isWidget()&&r>=-1&&r<=1){if(l.flags&32)return!0;l.flags&16&&(i=void 0)}(c<e||e==u&&(r<-1?l.length:l.covers(1)))&&(!i||!l.isWidget()&&i.isWidget())&&(i=l,o=e-c),(u>e||e==c&&(r>1?l.length:l.covers(-1)))&&(!s||!l.isWidget()&&s.isWidget())&&(s=l,a=e-c)}}),!i&&!s)throw new Error("No tile at position "+e);return i&&r<0||!s?{tile:i,offset:o}:{tile:s,offset:a}}}class $h extends P6{constructor(e,r){super(e),this.wrapper=r}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,r){let i=new $h(r||document.createElement(e.tagName),e);return r||(i.flags|=4),i}}class Sg extends P6{constructor(e,r){super(e),this.attrs=r}isLine(){return!0}static start(e,r,i){let o=new Sg(r||document.createElement("div"),e);return(!r||!i)&&(o.flags|=4),o}get domAttrs(){return this.attrs}resolveInline(e,r,i){let o=null,s=-1,a=null,l=-1;function c(d,h){for(let f=0,m=0;f<d.children.length&&m<=h;f++){let v=d.children[f],x=m+v.length;x>=h&&(v.isComposite()?c(v,h-m):(!a||a.isHidden&&(r>0||i&&het(a,v)))&&(x>h||v.flags&32)?(a=v,l=h-m):(m<h||v.flags&16&&!v.isHidden)&&(o=v,s=h-m)),m=x}}c(this,e);let u=(r<0?o:a)||o||a;return u?{tile:u,offset:u==o?s:l}:null}coordsIn(e,r){let i=this.resolveInline(e,r,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),r):det(this)}domIn(e,r){let i=this.resolveInline(e,r);if(i){let{tile:o,offset:s}=i;if(this.dom.contains(o.dom))return o.isText()?new fl(o.dom,Math.min(o.dom.nodeValue.length,s)):o.domPosFor(s,o.flags&16?1:o.flags&32?-1:r);let a=i.tile.parent,l=!1;for(let c of a.children){if(l)return new fl(c.dom,0);c==i.tile&&(l=!0)}}return new fl(this.dom,0)}}function det(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let r=X4(e);return r[r.length-1]||null}function het(n,e){let r=n.coordsIn(0,1),i=e.coordsIn(0,1);return r&&i&&i.top<r.bottom}class rs extends P6{constructor(e,r){super(e),this.mark=r}get domAttrs(){return this.mark.attrs}static of(e,r){let i=new rs(r||document.createElement(e.tagName),e);return r||(i.flags|=4),i}}class xp extends qr{constructor(e,r){super(e,r.length),this.text=r}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,r){let i=this.dom.nodeValue.length;e>i&&(e=i);let o=e,s=e,a=0;e==0&&r<0||e==i&&r>=0?st.chrome||st.gecko||(e?(o--,a=1):s<i&&(s++,a=-1)):r<0?o--:s<i&&s++;let l=sb(this.dom,o,s).getClientRects();if(!l.length)return null;let c=l[(a?a<0:r>=0)?0:l.length-1];return st.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(l,u=>u.width)||c),a?cC(c,a<0):c||null}static of(e,r){let i=new xp(r||document.createTextNode(e),e);return r||(i.flags|=2),i}}class dm extends qr{constructor(e,r,i,o){super(e,r,o),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,r){return this.coordsInWidget(e,r,!1)}coordsInWidget(e,r,i){let o=this.widget.coordsAt(this.dom,e,r);if(o)return o;if(i)return cC(this.dom.getBoundingClientRect(),this.length?e==0:r<=0);{let s=this.dom.getClientRects(),a=null;if(!s.length)return null;let l=this.flags&16?!0:this.flags&32?!1:e>0;for(let c=l?s.length-1:0;a=s[c],!(e>0?c==0:c==s.length-1||a.top<a.bottom);c+=l?-1:1);return cC(a,!l)}}get overrideDOMText(){if(!this.length)return wn.empty;let{root:e}=this;if(!e)return wn.empty;let r=this.posAtStart;return e.view.state.doc.slice(r,r+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,r,i,o,s){return s||(s=e.toDOM(r),e.editable||(s.contentEditable="false")),new dm(s,i,e,o)}}class dC extends qr{constructor(e){let r=document.createElement("img");r.className="cm-widgetBuffer",r.setAttribute("aria-hidden","true"),super(r,0,e)}get isHidden(){return!0}get overrideDOMText(){return wn.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class fet{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,r,i){let{tile:o,index:s,beforeBreak:a,parents:l}=this;for(;e||r>0;)if(o.isComposite())if(a){if(!e)break;i&&i.break(),e--,a=!1}else if(s==o.children.length){if(!e&&!l.length)break;i&&i.leave(o),a=!!o.breakAfter,{tile:o,index:s}=l.pop(),s++}else{let c=o.children[s],u=c.breakAfter;(r>0?c.length<=e:c.length<e)&&(!i||i.skip(c,0,c.length)!==!1||!c.isComposite)?(a=!!u,s++,e-=c.length):(l.push({tile:o,index:s}),o=c,s=0,i&&c.isComposite()&&i.enter(c))}else if(s==o.length)a=!!o.breakAfter,{tile:o,index:s}=l.pop(),s++;else if(e){let c=Math.min(e,o.length-s);i&&i.skip(o,s,s+c),e-=c,s+=c}else break;return this.tile=o,this.index=s,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class pet{constructor(e,r,i,o){this.from=e,this.to=r,this.wrapper=i,this.rank=o}}class met{constructor(e,r,i){this.cache=e,this.root=r,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,r,i,o){var s;this.flushBuffer();let a=this.ensureMarks(r,i),l=a.lastChild;if(l&&l.isText()&&!(l.flags&8)){this.cache.reused.set(l,2);let c=a.children[a.children.length-1]=new xp(l.dom,l.text+e);c.parent=a}else a.append(o||xp.of(e,(s=this.cache.find(xp))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,r){let i=this.curLine;i.dom!=r.line.dom&&(i.setDOM(this.cache.reused.has(r.line)?rP(r.line.dom):r.line.dom),this.cache.reused.set(r.line,2));let o=i;for(let l=r.marks.length-1;l>=0;l--){let c=r.marks[l],u=o.lastChild;if(u instanceof rs&&u.mark.eq(c.mark))u.dom!=c.dom&&u.setDOM(rP(c.dom)),o=u;else{if(this.cache.reused.get(c)){let h=qr.get(c.dom);h&&h.setDOM(rP(c.dom))}let d=rs.of(c.mark,c.dom);o.append(d),o=d}this.cache.reused.set(c,2)}let s=qr.get(e.text);s&&this.cache.reused.set(s,2);let a=new xp(e.text,e.text.nodeValue);a.flags|=8,o.append(a)}addInlineWidget(e,r,i){let o=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);o||this.flushBuffer();let s=this.ensureMarks(r,i);!o&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,r,i){this.flushBuffer(),this.ensureMarks(r,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let r=this.afterWidget||this.lastBlock;r.length+=e,this.pos+=e}addLineStart(e,r){var i;e||(e=fue);let o=Sg.start(e,r||((i=this.cache.find(Sg))===null||i===void 0?void 0:i.dom),!!r);this.getBlockPos().append(this.lastBlock=this.curLine=o)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,r){var i;let o=this.curLine;for(let s=e.length-1;s>=0;s--){let a=e[s],l;if(r>0&&(l=o.lastChild)&&l instanceof rs&&l.mark.eq(a))o=l,r--;else{let c=rs.of(a,(i=this.cache.find(rs,u=>u.mark.eq(a)))===null||i===void 0?void 0:i.dom);o.append(c),o=c,r=0}}return o}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!mY(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(st.ios&&mY(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(iP,0,32)||new dm(iP.toDOM(),0,iP,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let r=new pet(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-r.rank||this.wrappers[i-1].to-r.to)<0;)i--;this.wrappers.splice(i,0,r)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let r=this.root;for(let i of this.wrappers){let o=r.lastChild;if(i.from<this.pos&&o instanceof $h&&o.wrapper.eq(i.wrapper))r=o;else{let s=$h.of(i.wrapper,(e=this.cache.find($h,a=>a.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);r.append(s),r=s}}return r}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let r=2|(e<0?16:32),i=this.cache.find(dC,void 0,1);return i&&(i.flags=r),i||new dC(r)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class get{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=o;let l=this.textOff=Math.min(e,o.length);return s?null:o.slice(0,l)}let r=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,r);return this.textOff=r,i}}const hC=[dm,Sg,xp,rs,dC,$h,M6];for(let n=0;n<hC.length;n++)hC[n].bucket=n;class yet{constructor(e){this.view=e,this.buckets=hC.map(()=>[]),this.index=hC.map(()=>0),this.reused=new Map}add(e){let r=e.constructor.bucket,i=this.buckets[r];i.length<6?i.push(e):i[this.index[r]=(this.index[r]+1)%6]=e}find(e,r,i=2){let o=e.bucket,s=this.buckets[o],a=this.index[o];for(let l=s.length-1;l>=0;l--){let c=(l+a)%s.length,u=s[c];if((!r||r(u))&&!this.reused.has(u))return s.splice(c,1),c<a&&this.index[o]--,this.reused.set(u,i),u}return null}findWidget(e,r,i){let o=this.buckets[0];if(o.length)for(let s=0,a=0;;s++){if(s==o.length){if(a)return null;a=1,s=0}let l=o[s];if(!this.reused.has(l)&&(a==0?l.widget.compare(e):l.widget.constructor==e.constructor&&e.updateDOM(l.dom,this.view)))return o.splice(s,1),s<this.index[0]&&this.index[0]--,l.widget==e&&l.length==r&&(l.flags&497)==i?(this.reused.set(l,1),l):(this.reused.set(l,2),new dm(l.dom,r,e,l.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,r=2){if(!this.reused.has(e))return this.reused.set(e,r),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class vet{constructor(e,r,i,o,s){this.view=e,this.decorations=o,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new yet(e),this.text=new get(e.state.doc),this.builder=new met(this.cache,new M6(e,e.contentDOM),on.iter(i)),this.cache.reused.set(r,2),this.old=new fet(r),this.reuseWalker={skip:(a,l,c)=>{if(this.cache.add(a),a.isComposite())return!1},enter:a=>this.cache.add(a),leave:()=>{},break:()=>{}}}run(e,r){let i=r&&this.getCompositionContext(r.text);for(let o=0,s=0,a=0;;){let l=a<e.length?e[a++]:null,c=l?l.fromA:this.old.root.length;if(c>o){let u=c-o;this.preserve(u,!a,!l),o=c,s+=u}if(!l)break;r&&l.fromA<=r.range.fromA&&l.toA>=r.range.toA?(this.forward(l.fromA,r.range.fromA,r.range.fromA<r.range.toA?1:-1),this.emit(s,r.range.fromB),this.cache.clear(),this.builder.addComposition(r,i),this.text.skip(r.range.toB-r.range.fromB),this.forward(r.range.fromA,l.toA),this.emit(r.range.toB,l.toB)):(this.forward(l.fromA,l.toA),this.emit(s,l.toB)),s=l.toB,o=l.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,r,i){let o=wet(this.old),s=this.openMarks;this.old.advance(e,i?1:-1,{skip:(a,l,c)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(c-l);else{let u=c>0||l<a.length?dm.of(a.widget,this.view,c-l,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);u.flags&256?(u.flags&=-2,this.builder.addBlockWidget(u)):(this.builder.ensureLine(null),this.builder.addInlineWidget(u,o,s),s=o.length)}else if(a.isText())this.builder.ensureLine(null),!l&&c==a.length?this.builder.addText(a.text,o,s,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(l,c),o,s)),s=o.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof dC)this.cache.add(a);else if(a instanceof rs)this.builder.ensureLine(null),this.builder.addMark(a,o,s),this.cache.reused.set(a,1),s=o.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof rs&&o.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?o.length&&(o.length=s=0):a instanceof rs&&(o.shift(),s=Math.min(s,o.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,r){let i=null,o=this.builder,s=0,a=on.spans(this.decorations,e,r,{point:(l,c,u,d,h,f)=>{if(u instanceof cm){if(this.disallowBlockEffectsFor[f]){if(u.block)throw new RangeError("Block decorations may not be specified via plugins");if(c>this.view.state.doc.lineAt(l).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=d.length,h>d.length)o.continueWidget(c-l);else{let m=u.widget||(u.block?Cg.block:Cg.inline),v=xet(u),x=this.cache.findWidget(m,c-l,v)||dm.of(m,this.view,c-l,v);u.block?(u.startSide>0&&o.addLineStartIfNotCovered(i),o.addBlockWidget(x)):(o.ensureLine(i),o.addInlineWidget(x,d,h))}i=null}else i=bet(i,u);c>l&&this.text.skip(c-l)},span:(l,c,u,d)=>{for(let h=l;h<c;){let f=this.text.next(Math.min(512,c-h));f==null?(o.addLineStartIfNotCovered(i),o.addBreak(),h++):(o.ensureLine(i),o.addText(f,u,d),h+=f.length),i=null}}});o.addLineStartIfNotCovered(i),this.openWidget=a>s,this.openMarks=a}forward(e,r,i=1){r-e<=10?this.old.advance(r-e,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(r-e-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(e){let r=[],i=null;for(let o=e.parentNode;;o=o.parentNode){let s=qr.get(o);if(o==this.view.contentDOM)break;s instanceof rs?r.push(s):s?.isLine()?i=s:o.nodeName=="DIV"&&!i&&o!=this.view.contentDOM?i=new Sg(o,fue):r.push(rs.of(new lw({tagName:o.nodeName.toLowerCase(),attributes:WQe(o)}),o))}return{line:i,marks:r}}}function mY(n,e){let r=i=>{for(let o of i.children)if((e?o.isText():o.length)||r(o))return!0;return!1};return r(n)}function xet(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const fue={class:"cm-line"};function bet(n,e){let r=e.spec.attributes,i=e.spec.class;return!r&&!i||(n||(n={class:"cm-line"}),r&&wI(r,n),i&&(n.class+=" "+i)),n}function wet(n){let e=[];for(let r=n.parents.length;r>1;r--){let i=r==n.parents.length?n.tile:n.parents[r].tile;i instanceof rs&&e.push(i.mark)}return e}function rP(n){let e=qr.get(n);return e&&e.setDOM(n.cloneNode()),n}class Cg extends Hc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cg.inline=new Cg("span");Cg.block=new Cg("div");const iP=new class extends Hc{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class gY{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Et.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new M6(e,e.contentDOM),this.updateInner([new ba(0,0,0,e.state.doc.length)],null)}update(e){var r;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:h})=>h<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?o=this.domChanged.newSel.head:!Net(e.changes,this.hasComposition)&&!e.selectionSet&&(o=e.state.selection.main.head));let s=o>-1?Cet(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){let{from:d,to:h}=this.hasComposition;i=new ba(d,h,e.changes.mapPos(d,-1),e.changes.mapPos(h,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(st.ie||st.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,l=this.blockWrappers;this.updateDeco();let c=Tet(a,this.decorations,e.changes);c.length&&(i=ba.extendWithRanges(i,c));let u=Met(l,this.blockWrappers,e.changes);return u.length&&(i=ba.extendWithRanges(i,u)),s&&!i.some(d=>d.fromA<=s.range.fromA&&d.toA>=s.range.toA)&&(i=s.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(r||e.length){let a=this.tile,l=new vet(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=l.run(e,r),nN(a,l.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=st.chrome||st.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||i.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof oP&&o.push(s.dom);i.updateGaps(o)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let r of e.transactions)for(let i of r.effects)i.is(lue)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,o=this.view.root.activeElement,s=o==i,a=!s&&!(this.view.state.facet(Mu)||i.tabIndex>-1)&&Xv(i,this.view.observer.selectionRange)&&!(o&&i.contains(o));if(!(s||r||a))return;let l=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,u,d;if(c.empty?d=u=this.inlineDOMNearPos(c.anchor,c.assoc||1):(d=this.inlineDOMNearPos(c.head,c.head==c.from?1:-1),u=this.inlineDOMNearPos(c.anchor,c.anchor==c.from?1:-1)),st.gecko&&c.empty&&!this.hasComposition&&ket(u)){let f=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(f,u.node.childNodes[u.offset]||null)),u=d=new fl(f,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||(!Jv(u.node,u.offset,h.anchorNode,h.anchorOffset)||!Jv(d.node,d.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,c))&&(this.view.observer.ignore(()=>{st.android&&st.chrome&&i.contains(h.focusNode)&&Eet(h.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let f=kg(this.view.root);if(f)if(c.empty){if(st.gecko){let m=_et(u.node,u.offset);if(m&&m!=3){let v=(m==1?Uce:Kce)(u.node,u.offset);v&&(u=new fl(v.node,v.offset))}}f.collapse(u.node,u.offset),c.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=c.bidiLevel)}else if(f.extend){f.collapse(u.node,u.offset);try{f.extend(d.node,d.offset)}catch{}}else{let m=document.createRange();c.anchor>c.head&&([u,d]=[d,u]),m.setEnd(d.node,d.offset),m.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(m)}a&&this.view.root.activeElement==i&&(i.blur(),o&&o.focus())}),this.view.observer.setSelectionRange(u,d)),this.impreciseAnchor=u.precise?null:new fl(h.anchorNode,h.anchorOffset),this.impreciseHead=d.precise?null:new fl(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&Jv(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,i=kg(e.root),{anchorNode:o,anchorOffset:s}=e.observer.selectionRange;if(!i||!r.empty||!r.assoc||!i.modify)return;let a=this.lineAt(r.head,r.assoc);if(!a)return;let l=a.posAtStart;if(r.head==l||r.head==l+a.length)return;let c=this.coordsAt(r.head,-1),u=this.coordsAt(r.head,1);if(!c||!u||c.bottom>u.top)return;let d=this.domAtPos(r.head+r.assoc,r.assoc);i.collapse(d.node,d.offset),i.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=r.from&&i.collapse(o,s)}posFromDOM(e,r){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let o=i.posAtStart;if(i.isComposite()){let s;if(e==i.dom)s=i.dom.childNodes[r];else{let a=od(e)==0?0:r==0?-1:1;for(;;){let l=e.parentNode;if(l==i.dom)break;a==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?a=-1:a=1),e=l}a<0?s=e:s=e.nextSibling}if(s==i.dom.firstChild)return o;for(;s&&!qr.get(s);)s=s.nextSibling;if(!s)return o+i.length;for(let a=0,l=o;;a++){let c=i.children[a];if(c.dom==s)return l;l+=c.length+c.breakAfter}}else return i.isText()?e==i.dom?o+r:o+(r?i.length:0):o}domAtPos(e,r){let{tile:i,offset:o}=this.tile.resolveBlock(e,r);return i.isWidget()?i.domPosFor(e,r):i.domIn(o,r)}inlineDOMNearPos(e,r){let i,o=-1,s=!1,a,l=-1,c=!1;return this.tile.blockTiles((u,d)=>{if(u.isWidget()){if(u.flags&32&&d>=e)return!0;u.flags&16&&(s=!0)}else{let h=d+u.length;if(d<=e&&(i=u,o=e-d,s=h<e),h>=e&&!a&&(a=u,l=e-d,c=d>e),d>e&&a)return!0}}),!i&&!a?this.domAtPos(e,r):(s&&a?i=null:c&&i&&(a=null),i&&r<0||!a?i.domIn(o,r):a.domIn(l,r))}coordsAt(e,r){let{tile:i,offset:o}=this.tile.resolveBlock(e,r);return i.isWidget()?i.widget instanceof oP?null:i.coordsInWidget(o,r,!0):i.coordsIn(o,r)}lineAt(e,r){let{tile:i}=this.tile.resolveBlock(e,r);return i.isLine()?i:null}coordsForChar(e){let{tile:r,offset:i}=this.tile.resolveBlock(e,1);if(!r.isLine())return null;function o(s,a){if(s.isComposite())for(let l of s.children){if(l.length>=a){let c=o(l,a);if(c)return c}if(a-=l.length,a<0)break}else if(s.isText()&&a<s.length){let l=ti(s.text,a);if(l==a)return null;let c=sb(s.dom,a,l).getClientRects();for(let u=0;u<c.length;u++){let d=c[u];if(u==c.length-1||d.top<d.bottom&&d.left<d.right)return d}}return null}return o(r,i)}measureVisibleLineHeights(e){let r=[],{from:i,to:o}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,c=this.view.textDirection==$n.LTR,u=0,d=(h,f,m)=>{for(let v=0;v<h.children.length&&!(f>o);v++){let x=h.children[v],b=f+x.length,w=x.dom.getBoundingClientRect(),{height:S}=w;if(m&&!v&&(u+=w.top-m.top),x instanceof $h)b>i&&d(x,f,w);else if(f>=i&&(u>0&&r.push(-u),r.push(S+u),u=0,a)){let _=x.dom.lastChild,P=_?X4(_):[];if(P.length){let A=P[P.length-1],T=c?A.right-w.left:w.right-A.left;T>l&&(l=T,this.minWidth=s,this.minWidthFrom=f,this.minWidthTo=b)}}m&&v==h.children.length-1&&(u+=m.bottom-w.bottom),f=b+x.breakAfter}};return d(this.tile,0,null),r}textDirectionAt(e){let{tile:r}=this.tile.resolveBlock(e,1);return getComputedStyle(r.dom).direction=="rtl"?$n.RTL:$n.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let l=0,c;for(let u of a.children){if(!u.isText()||/[^ -~]/.test(u.text))return;let d=X4(u.dom);if(d.length!=1)return;l+=d[0].width,c=d[0].height}if(l)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:l/a.length,textHeight:c}}});if(e)return e;let r=document.createElement("div"),i,o,s;return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(r);let a=X4(r.firstChild)[0];i=r.getBoundingClientRect().height,o=a&&a.width?a.width/27:7,s=a&&a.height?a.height:i,r.remove()}),{lineHeight:i,charWidth:o,textHeight:s}}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let i=0,o=0;;o++){let s=o==r.viewports.length?null:r.viewports[o],a=s?s.from-1:this.view.state.doc.length;if(a>i){let l=(r.lineBlockAt(a).bottom-r.lineBlockAt(i).top)/this.view.scaleY;e.push(Et.replace({widget:new oP(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!s)break;i=s.to+1}return Et.set(e)}updateDeco(){let e=1,r=this.view.state.facet(T6).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,o=this.view.state.facet(TI).map((s,a)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(o.length&&(this.dynamicDecorationMap[e++]=i,r.push(on.join(o))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(uue).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(aue))try{if(u(this.view,e.range,e))return!0}catch(d){as(this.view.state,d,"scroll handler")}let{range:r}=e,i=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),o;if(!i)return;!r.empty&&(o=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(i={left:Math.min(i.left,o.left),top:Math.min(i.top,o.top),right:Math.max(i.right,o.right),bottom:Math.max(i.bottom,o.bottom)});let s=PI(this.view),a={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:c}=this.view.scrollDOM;GQe(this.view.scrollDOM,a,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==$n.LTR)}lineHasWidget(e){let r=i=>i.isWidget()||i.children.some(r);return r(this.tile.resolveBlock(e,1).tile)}destroy(){nN(this.tile)}}function nN(n,e){let r=e?.get(n);if(r!=1){r==null&&n.destroy();for(let i of n.children)nN(i,e)}}function ket(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function pue(n,e){let r=n.observer.selectionRange;if(!r.focusNode)return null;let i=Uce(r.focusNode,r.focusOffset),o=Kce(r.focusNode,r.focusOffset),s=i||o;if(o&&i&&o.node!=i.node){let l=qr.get(o.node);if(!l||l.isText()&&l.text!=o.node.nodeValue)s=o;else if(n.docView.lastCompositionAfterCursor){let c=qr.get(i.node);!c||c.isText()&&c.text!=i.node.nodeValue||(s=o)}}if(n.docView.lastCompositionAfterCursor=s!=i,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function Cet(n,e,r){let i=pue(n,r);if(!i)return null;let{node:o,from:s,to:a}=i,l=o.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let c=e.invertedDesc;return{range:new ba(c.mapPos(s),c.mapPos(a),s,a),text:o}}function _et(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let Aet=class{constructor(){this.changes=[]}compareRange(e,r){Y0(e,r,this.changes)}comparePoint(e,r){Y0(e,r,this.changes)}boundChange(e){Y0(e,e,this.changes)}};function Tet(n,e,r){let i=new Aet;return on.compare(n,e,r,i),i.changes}class Pet{constructor(){this.changes=[]}compareRange(e,r){Y0(e,r,this.changes)}comparePoint(){}boundChange(e){Y0(e,e,this.changes)}}function Met(n,e,r){let i=new Pet;return on.compare(n,e,r,i),i.changes}function Eet(n,e){for(let r=n;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function Net(n,e){let r=!1;return e&&n.iterChangedRanges((i,o)=>{i<e.to&&o>e.from&&(r=!0)}),r}class oP extends Hc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function jet(n,e,r=1){let i=n.charCategorizer(e),o=n.doc.lineAt(e),s=e-o.from;if(o.length==0)return De.cursor(e);s==0?r=1:s==o.length&&(r=-1);let a=s,l=s;r<0?a=ti(o.text,s,!1):l=ti(o.text,s);let c=i(o.text.slice(a,l));for(;a>0;){let u=ti(o.text,a,!1);if(i(o.text.slice(u,a))!=c)break;a=u}for(;l<o.length;){let u=ti(o.text,l);if(i(o.text.slice(l,u))!=c)break;l=u}return De.range(a+o.from,l+o.from)}function Oet(n,e,r,i,o){let s=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&r.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,c=Math.floor((o-r.top-(n.defaultLineHeight-l)*.5)/l);s+=c*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(r.from,r.to);return r.from+VE(a,s,n.state.tabSize)}function rN(n,e,r){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let o;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!o||s.type==Li.Text&&(o.type!=s.type||(r<0?s.from<e:s.to>e)))&&(o=s)}}return o||i}return i}function Det(n,e,r,i){let o=rN(n,e.head,e.assoc||-1),s=!i||o.type!=Li.Text||!(n.lineWrapping||o.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(s){let a=n.dom.getBoundingClientRect(),l=n.textDirectionAt(o.from),c=n.posAtCoords({x:r==(l==$n.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(c!=null)return De.cursor(c,r?-1:1)}return De.cursor(r?o.to:o.from,r?-1:1)}function yY(n,e,r,i){let o=n.state.doc.lineAt(e.head),s=n.bidiSpans(o),a=n.textDirectionAt(o.from);for(let l=e,c=null;;){let u=set(o,s,a,l,r),d=Jce;if(!u){if(o.number==(r?n.state.doc.lines:1))return l;d=`
`,o=n.state.doc.line(o.number+(r?1:-1)),s=n.bidiSpans(o),u=n.visualLineSide(o,!r)}if(c){if(!c(d))return l}else{if(!i)return u;c=i(d)}l=u}}function Iet(n,e,r){let i=n.state.charCategorizer(e),o=i(r);return s=>{let a=i(s);return o==pr.Space&&(o=a),o==a}}function Ret(n,e,r,i){let o=e.head,s=r?1:-1;if(o==(r?n.state.doc.length:0))return De.cursor(o,e.assoc);let a=e.goalColumn,l,c=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(o,e.assoc||-1),d=n.documentTop;if(u)a==null&&(a=u.left-c.left),l=s<0?u.top:u.bottom;else{let v=n.viewState.lineBlockAt(o);a==null&&(a=Math.min(c.right-c.left,n.defaultCharacterWidth*(o-v.from))),l=(s<0?v.top:v.bottom)+d}let h=c.left+a,f=i??n.viewState.heightOracle.textHeight>>1,m=iN(n,{x:h,y:l+f*s},!1,s);return De.cursor(m.pos,m.assoc,void 0,a)}function Qv(n,e,r){for(;;){let i=0;for(let o of n)o.between(e-1,e+1,(s,a,l)=>{if(e>s&&e<a){let c=i||r||(e-s<a-e?-1:1);e=c<0?s:a,i=c}});if(!i)return e}}function mue(n,e){let r=null;for(let i=0;i<e.ranges.length;i++){let o=e.ranges[i],s=null;if(o.empty){let a=Qv(n,o.from,0);a!=o.from&&(s=De.cursor(a,-1))}else{let a=Qv(n,o.from,-1),l=Qv(n,o.to,1);(a!=o.from||l!=o.to)&&(s=De.range(o.from==o.anchor?a:l,o.from==o.head?a:l))}s&&(r||(r=e.ranges.slice()),r[i]=s)}return r?De.create(r,e.mainIndex):e}function sP(n,e,r){let i=Qv(n.state.facet(uw).map(o=>o(n)),r.from,e.head>r.from?-1:1);return i==r.from?r:De.cursor(i,i<r.from?1:-1)}class dc{constructor(e,r){this.pos=e,this.assoc=r}}function iN(n,e,r,i){let o=n.contentDOM.getBoundingClientRect(),s=o.top+n.viewState.paddingTop,{x:a,y:l}=e,c=l-s,u;for(;;){if(c<0)return new dc(0,1);if(c>n.viewState.docHeight)return new dc(n.state.doc.length,-1);if(u=n.elementAtHeight(c),i==null)break;if(u.type==Li.Text){let f=n.docView.coordsAt(i<0?u.from:u.to,i);if(f&&(i<0?f.top<=c+s:f.bottom>=c+s))break}let h=n.viewState.heightOracle.textHeight/2;c=i>0?u.bottom+h:u.top-h}if(n.viewport.from>=u.to||n.viewport.to<=u.from){if(r)return null;if(u.type==Li.Text){let h=Oet(n,o,u,a,l);return new dc(h,h==u.from?1:-1)}}if(u.type!=Li.Text)return c<(u.top+u.bottom)/2?new dc(u.from,1):new dc(u.to,-1);let d=n.docView.lineAt(u.from,2);return(!d||d.length!=u.length)&&(d=n.docView.lineAt(u.from,-2)),gue(n,d,u.from,a,l)}function gue(n,e,r,i,o){let s=-1,a=null,l=1e9,c=1e9,u=o,d=o,h=(f,m)=>{for(let v=0;v<f.length;v++){let x=f[v];if(x.top==x.bottom)continue;let b=x.left>i?x.left-i:x.right<i?i-x.right:0,w=x.top>o?x.top-o:x.bottom<o?o-x.bottom:0;x.top<=d&&x.bottom>=u&&(u=Math.min(x.top,u),d=Math.max(x.bottom,d),w=0),(s<0||(w-c||b-l)<0)&&(s>=0&&c&&l<b&&a.top<=d-2&&a.bottom>=u+2?c=0:(s=m,l=b,c=w,a=x))}};if(e.isText()){for(let m=0;m<e.length;){let v=ti(e.text,m);if(h(sb(e.dom,m,v).getClientRects(),m),!l&&!c)break;m=v}return i>(a.left+a.right)/2==(vY(n,s+r)==$n.LTR)?new dc(r+ti(e.text,s),-1):new dc(r+s,1)}else{if(!e.length)return new dc(r,1);for(let x=0;x<e.children.length;x++){let b=e.children[x];if(b.flags&48)continue;let w=(b.dom.nodeType==1?b.dom:sb(b.dom,0,b.length)).getClientRects();if(h(w,x),!l&&!c)break}let f=e.children[s],m=e.posBefore(f,r);return f.isComposite()||f.isText()?gue(n,f,m,Math.max(a.left,Math.min(a.right,i)),o):i>(a.left+a.right)/2==(vY(n,s+r)==$n.LTR)?new dc(m+f.length,-1):new dc(m,1)}}function vY(n,e){let r=n.state.doc.lineAt(e);return n.bidiSpans(r)[Lu.find(n.bidiSpans(r),e-r.from,-1,1)].dir}const tv="";class Let{constructor(e,r){this.points=e,this.view=r,this.text="",this.lineSeparator=r.state.facet(un.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=tv}readRange(e,r){if(!e)return this;let i=e.parentNode;for(let o=e;;){this.findPointBefore(i,o);let s=this.text.length;this.readNode(o);let a=qr.get(o),l=o.nextSibling;if(l==r){a?.breakAfter&&!l&&i!=this.view.contentDOM&&this.lineBreak();break}let c=qr.get(l);(a&&c?a.breakAfter:(a?a.breakAfter:lC(o))||lC(l)&&(o.nodeName!="BR"||a?.isWidget())&&this.text.length>s)&&!Fet(l,r)&&this.lineBreak(),o=l}return this.findPointBefore(i,r),this}readTextNode(e){let r=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,r.length));for(let i=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,l;if(this.lineSeparator?(s=r.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(l=o.exec(r))&&(s=l.index,a=l[0].length),this.append(r.slice(i,s<0?r.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);i=s+a}}readNode(e){let r=qr.get(e),i=r&&r.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let o=i.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==r&&(i.pos=this.text.length)}findPointInside(e,r){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(zet(e,i.node,i.offset)?r:0))}}function zet(n,e,r){for(;;){if(!e||r<od(e))return!1;if(e==n)return!0;r=Xh(e)+1,e=e.parentNode}}function Fet(n,e){let r;for(;!(n==e||!n);n=n.nextSibling){let i=qr.get(n);if(!i?.isWidget())return!1;i&&(r||(r=[])).push(i)}if(r)for(let i of r){let o=i.overrideDOMText;if(o?.length)return!1}return!0}class xY{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class $et{constructor(e,r,i,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=yue(e.docView.tile,r,i,0))){let l=s||a?[]:Het(e),c=new Let(l,e);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=qet(l,this.bounds.from)}else{let l=e.observer.selectionRange,c=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!XE(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!XE(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),d=e.viewport;if((st.ios||st.chrome)&&e.state.selection.main.empty&&c!=u&&(d.from>0||d.to<e.state.doc.length)){let h=Math.min(c,u),f=Math.max(c,u),m=d.from-h,v=d.to-f;(m==0||m==1||h==0)&&(v==0||v==-1||f==e.state.doc.length)&&(c=0,u=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(De.range(u,c)):this.newSel=De.single(u,c)}}}function yue(n,e,r,i){if(n.isComposite()){let o=-1,s=-1,a=-1,l=-1;for(let c=0,u=i,d=i;c<n.children.length;c++){let h=n.children[c],f=u+h.length;if(u<e&&f>r)return yue(h,e,r,u);if(f>=e&&o==-1&&(o=c,s=u),u>r&&h.dom.parentNode==n.dom){a=c,l=d;break}d=f,u=f+h.breakAfter}return{from:s,to:l<0?i+n.length:l,startDOM:(o?n.children[o-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:a<n.children.length&&a>=0?n.children[a].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function vue(n,e){let r,{newSel:i}=e,o=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,c=o.from,u=null;(s===8||st.android&&e.text.length<l-a)&&(c=o.to,u="end");let d=xue(n.state.doc.sliceString(a,l,tv),e.text,c-a,u);d&&(st.chrome&&s==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==tv+tv&&d.toB--,r={from:a+d.from,to:a+d.toA,insert:wn.of(e.text.slice(d.from,d.toB).split(tv))})}else i&&(!n.hasFocus&&n.state.facet(Mu)||fC(i,o))&&(i=null);if(!r&&!i)return!1;if(!r&&e.typeOver&&!o.empty&&i&&i.main.empty?r={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,o.to)}:(st.mac||st.android)&&r&&r.from==r.to&&r.from==o.head-1&&/^\. ?$/.test(r.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&r.insert.length==2&&(i=De.single(i.main.anchor-1,i.main.head-1)),r={from:r.from,to:r.to,insert:wn.of([r.insert.toString().replace("."," ")])}):r&&r.from>=o.from&&r.to<=o.to&&(r.from!=o.from||r.to!=o.to)&&o.to-o.from-(r.to-r.from)<=4?r={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,r.from).append(r.insert).append(n.state.doc.slice(r.to,o.to))}:n.state.doc.lineAt(o.from).to<o.to&&n.docView.lineHasWidget(o.to)&&n.inputState.insertingTextAt>Date.now()-50?r={from:o.from,to:o.to,insert:n.state.toText(n.inputState.insertingText)}:st.chrome&&r&&r.from==r.to&&r.from==o.head&&r.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=De.single(i.main.anchor-1,i.main.head-1)),r={from:o.from,to:o.to,insert:wn.of([" "])}),r)return MI(n,r,i,s);if(i&&!fC(i,o)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=mue(n.state.facet(uw).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:a,userEvent:l}),!0}else return!1}function MI(n,e,r,i=-1){if(st.ios&&n.inputState.flushIOSKey(e))return!0;let o=n.state.selection.main;if(st.android&&(e.to==o.to&&(e.from==o.from||e.from==o.from-1&&n.state.sliceDoc(e.from,o.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Z0(n.contentDOM,"Enter",13)||(e.from==o.from-1&&e.to==o.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>o.head)&&Z0(n.contentDOM,"Backspace",8)||e.from==o.from&&e.to==o.to+1&&e.insert.length==0&&Z0(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,l=()=>a||(a=Bet(n,e,r));return n.state.facet(rue).some(c=>c(n,e.from,e.to,s,l))||n.dispatch(l()),!0}function Bet(n,e,r){let i,o=n.state,s=o.selection.main,a=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let c=e.from<s.from?-1:1,u=c<0?s.from:s.to,d=Qv(o.facet(uw).map(h=>h(n)),u,c);e.from==d&&(a=d)}if(a>-1)i={changes:e,selection:De.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=s.from<e.from?o.sliceDoc(s.from,e.from):"",u=s.to>e.to?o.sliceDoc(e.to,s.to):"";i=o.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let c=o.changes(e),u=r&&r.main.to<=c.newLength?r.main:void 0;if(o.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let d=n.state.sliceDoc(e.from,e.to),h,f=r&&pue(n,r.main.head);if(f){let v=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-v}}else h=n.state.doc.lineAt(s.head);let m=s.to-e.to;i=o.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:c,range:u||v.map(c)};let x=v.to-m,b=x-d.length;if(n.state.sliceDoc(b,x)!=d||x>=h.from&&b<=h.to)return{range:v};let w=o.changes({from:b,to:x,insert:e.insert}),S=v.to-s.to;return{changes:w,range:u?De.range(Math.max(0,u.anchor+S),Math.max(0,u.head+S)):v.map(w)}})}else i={changes:c,selection:u&&o.selection.replaceRange(u)}}let l="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,l+=".compose",n.inputState.compositionFirstChange&&(l+=".start",n.inputState.compositionFirstChange=!1)),o.update(i,{userEvent:l,scrollIntoView:!0})}function xue(n,e,r,i){let o=Math.min(n.length,e.length),s=0;for(;s<o&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==o&&n.length==e.length)return null;let a=n.length,l=e.length;for(;a>0&&l>0&&n.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(i=="end"){let c=Math.max(0,s-Math.min(a,l));r-=a+c-s}if(a<s&&n.length<e.length){let c=r<=s&&r>=a?s-r:0;s-=c,l=s+(l-a),a=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,a=s+(a-l),l=s}return{from:s,toA:a,toB:l}}function Het(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}=n.observer.selectionRange;return r&&(e.push(new xY(r,i)),(o!=r||s!=i)&&e.push(new xY(o,s))),e}function qet(n,e){if(n.length==0)return null;let r=n[0].pos,i=n.length==2?n[1].pos:r;return r>-1&&i>-1?De.single(r+e,i+e):null}function fC(n,e){return e.head==n.main.head&&e.anchor==n.main.anchor}class Vet{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,st.safari&&e.contentDOM.addEventListener("input",()=>null),st.gecko&&ott(e.contentDOM.ownerDocument)}handleEvent(e){!Jet(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,r){let i=this.handlers[e];if(i){for(let o of i.observers)o(this.view,r);for(let o of i.handlers){if(r.defaultPrevented)break;if(o(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=Wet(e),i=this.handlers,o=this.view.contentDOM;for(let s in r)if(s!="scroll"){let a=!r[s].handlers.length,l=i[s];l&&a!=!l.handlers.length&&(o.removeEventListener(s,this.handleEvent),l=null),l||o.addEventListener(s,this.handleEvent,{passive:a})}for(let s in i)s!="scroll"&&!r[s]&&o.removeEventListener(s,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&wue.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),st.android&&st.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return st.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=bue.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Uet.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Z0(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:st.safari&&!st.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bY(n,e){return(r,i)=>{try{return e.call(n,i,r)}catch(o){as(r.state,o)}}}function Wet(n){let e=Object.create(null);function r(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let o=i.spec,s=o&&o.plugin.domEventHandlers,a=o&&o.plugin.domEventObservers;if(s)for(let l in s){let c=s[l];c&&r(l).handlers.push(bY(i.value,c))}if(a)for(let l in a){let c=a[l];c&&r(l).observers.push(bY(i.value,c))}}for(let i in Tl)r(i).handlers.push(Tl[i]);for(let i in Ea)r(i).observers.push(Ea[i]);return e}const bue=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Uet="dthko",wue=[16,17,18,20,91,92,224,225],Sk=6;function Ck(n){return Math.max(0,n)*.7+8}function Ket(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class Get{constructor(e,r,i,o){this.view=e,this.startEvent=r,this.style=i,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=YQe(e.contentDOM),this.atoms=e.state.facet(uw).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(un.allowMultipleSelections)&&Yet(e,r),this.dragging=Xet(e,r)&&Cue(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Ket(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=PI(this.view);e.clientX-c.left<=o+Sk?r=-Ck(o-e.clientX):e.clientX+c.right>=a-Sk&&(r=Ck(e.clientX-a)),e.clientY-c.top<=s+Sk?i=-Ck(s-e.clientY):e.clientY+c.bottom>=l-Sk&&(i=Ck(e.clientY-l)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:r}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(e||r)&&this.view.win.scrollBy(e,r),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:r}=this,i=mue(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Yet(n,e){let r=n.state.facet(Qce);return r.length?r[0](e):st.mac?e.metaKey:e.ctrlKey}function Zet(n,e){let r=n.state.facet(eue);return r.length?r[0](e):st.mac?!e.altKey:!e.ctrlKey}function Xet(n,e){let{main:r}=n.state.selection;if(r.empty)return!1;let i=kg(n.root);if(!i||i.rangeCount==0)return!0;let o=i.getRangeAt(0).getClientRects();for(let s=0;s<o.length;s++){let a=o[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Jet(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,i;r!=n.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(i=qr.get(r))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const Tl=Object.create(null),Ea=Object.create(null),kue=st.ie&&st.ie_version<15||st.ios&&st.webkit_version<604;function Qet(n){let e=n.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.remove(),Sue(n,r.value)},50)}function E6(n,e,r){for(let i of n.facet(e))r=i(r,n);return r}function Sue(n,e){e=E6(n.state,CI,e);let{state:r}=n,i,o=1,s=r.toText(e),a=s.lines==r.selection.ranges.length;if(oN!=null&&r.selection.ranges.every(c=>c.empty)&&oN==s.toString()){let c=-1;i=r.changeByRange(u=>{let d=r.doc.lineAt(u.from);if(d.from==c)return{range:u};c=d.from;let h=r.toText((a?s.line(o++).text:e)+r.lineBreak);return{changes:{from:d.from,insert:h},range:De.cursor(u.from+h.length)}})}else a?i=r.changeByRange(c=>{let u=s.line(o++);return{changes:{from:c.from,to:c.to,insert:u.text},range:De.cursor(c.from+u.length)}}):i=r.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ea.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Tl.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Ea.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ea.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Tl.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let i of n.state.facet(tue))if(r=i(n,e),r)break;if(!r&&e.button==0&&(r=ttt(n,e)),r){let i=!n.hasFocus;n.inputState.startMouseSelection(new Get(n,e,r,i)),i&&n.observer.ignore(()=>{Vce(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let o=n.inputState.mouseSelection;if(o)return o.start(e),o.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function wY(n,e,r,i){if(i==1)return De.cursor(e,r);if(i==2)return jet(n.state,e,r);{let o=n.docView.lineAt(e,r),s=n.state.doc.lineAt(o?o.posAtEnd:e),a=o?o.posAtStart:s.from,l=o?o.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,De.range(a,l)}}const ett=st.ie&&st.ie_version<=11;let kY=null,SY=0,CY=0;function Cue(n){if(!ett)return n.detail;let e=kY,r=CY;return kY=n,CY=Date.now(),SY=!e||r>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(SY+1)%3:1}function ttt(n,e){let r=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=Cue(e),o=n.state.selection;return{update(s){s.docChanged&&(r.pos=s.changes.mapPos(r.pos),o=o.map(s.changes))},get(s,a,l){let c=n.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),u,d=wY(n,c.pos,c.assoc,i);if(r.pos!=c.pos&&!a){let h=wY(n,r.pos,r.assoc,i),f=Math.min(h.from,d.from),m=Math.max(h.to,d.to);d=f<d.from?De.range(f,m):De.range(m,f)}return a?o.replaceRange(o.main.extend(d.from,d.to)):l&&i==1&&o.ranges.length>1&&(u=ntt(o,c.pos))?u:l?o.addRange(d):De.create([d])}}}function ntt(n,e){for(let r=0;r<n.ranges.length;r++){let{from:i,to:o}=n.ranges[r];if(i<=e&&o>=e)return De.create(n.ranges.slice(0,r).concat(n.ranges.slice(r+1)),n.mainIndex==r?0:n.mainIndex-(n.mainIndex>r?1:0))}return null}Tl.dragstart=(n,e)=>{let{selection:{main:r}}=n.state;if(e.target.draggable){let o=n.docView.tile.nearest(e.target);if(o&&o.isWidget()){let s=o.posAtStart,a=s+o.length;(s>=r.to||a<=r.from)&&(r=De.range(s,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",E6(n.state,_I,n.state.sliceDoc(r.from,r.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Tl.dragend=n=>(n.inputState.draggedContent=null,!1);function _Y(n,e,r,i){if(r=E6(n.state,CI,r),!r)return;let o=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,a=i&&s&&Zet(n,e)?{from:s.from,to:s.to}:null,l={from:o,insert:r},c=n.state.changes(a?[a,l]:l);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(o,-1),head:c.mapPos(o,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Tl.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let i=Array(r.length),o=0,s=()=>{++o==r.length&&_Y(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<r.length;a++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[a]=l.result),s()},l.readAsText(r[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return _Y(n,e,i,!0),!0}return!1};Tl.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let r=kue?null:e.clipboardData;return r?(Sue(n,r.getData("text/plain")||r.getData("text/uri-list")),!0):(Qet(n),!1)};function rtt(n,e){let r=n.dom.parentNode;if(!r)return;let i=r.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function itt(n){let e=[],r=[],i=!1;for(let o of n.selection.ranges)o.empty||(e.push(n.sliceDoc(o.from,o.to)),r.push(o));if(!e.length){let o=-1;for(let{from:s}of n.selection.ranges){let a=n.doc.lineAt(s);a.number>o&&(e.push(a.text),r.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),o=a.number}i=!0}return{text:E6(n,_I,e.join(n.lineBreak)),ranges:r,linewise:i}}let oN=null;Tl.copy=Tl.cut=(n,e)=>{let r=kg(n.root);if(r&&!Xv(n.contentDOM,r))return!1;let{text:i,ranges:o,linewise:s}=itt(n.state);if(!i&&!s)return!1;oN=s?i:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"});let a=kue?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",i),!0):(rtt(n,i),!1)};const _ue=_d.define();function Aue(n,e){let r=[];for(let i of n.facet(iue)){let o=i(n,e);o&&r.push(o)}return r.length?n.update({effects:r,annotations:_ue.of(!0)}):null}function Tue(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let r=Aue(n.state,e);r?n.dispatch(r):n.update([])}},10)}Ea.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Tue(n)};Ea.blur=n=>{n.observer.clearSelectionRange(),Tue(n)};Ea.compositionstart=Ea.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Ea.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,st.chrome&&st.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Ea.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Tl.beforeinput=(n,e)=>{var r,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(r=e.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),a=e.getTargetRanges();if(s&&a.length){let l=a[0],c=n.posAtDOM(l.startContainer,l.startOffset),u=n.posAtDOM(l.endContainer,l.endOffset);return MI(n,{from:c,to:u,insert:n.state.toText(s)},null),!0}}let o;if(st.chrome&&st.android&&(o=bue.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(o.key,o.keyCode),o.key=="Backspace"||o.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return st.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),st.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Ea.compositionend(n,e),20),!1};const AY=new Set;function ott(n){AY.has(n)||(AY.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const TY=["pre-wrap","normal","pre-line","break-spaces"];let _g=!1;function PY(){_g=!1}class stt{constructor(e){this.lineWrapping=e,this.doc=wn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,r){let i=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((r-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return TY.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let i=0;i<e.length;i++){let o=e[i];o<0?i++:this.heightSamples[Math.floor(o*10)]||(r=!0,this.heightSamples[Math.floor(o*10)]=!0)}return r}refresh(e,r,i,o,s,a){let l=TY.indexOf(e)>-1,c=Math.abs(r-this.lineHeight)>.3||this.lineWrapping!=l||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=l,this.lineHeight=r,this.charWidth=i,this.textHeight=o,this.lineLength=s,c){this.heightSamples={};for(let u=0;u<a.length;u++){let d=a[u];d<0?u++:this.heightSamples[Math.floor(d*10)]=!0}}return c}}class att{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class ll{constructor(e,r,i,o,s){this.from=e,this.length=r,this.top=i,this.height=o,this._content=s}get type(){return typeof this._content=="number"?Li.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof cm?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ll(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var Yn=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Yn||(Yn={}));const J4=.001;class To{constructor(e,r,i=2){this.length=e,this.height=r,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>J4&&(_g=!0),this.height=e)}replace(e,r,i){return To.of(i)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,i,o){let s=this,a=i.doc;for(let l=o.length-1;l>=0;l--){let{fromA:c,toA:u,fromB:d,toB:h}=o[l],f=s.lineAt(c,Yn.ByPosNoHeight,i.setDoc(r),0,0),m=f.to>=u?f:s.lineAt(u,Yn.ByPosNoHeight,i,0,0);for(h+=m.to-u,u=m.to;l>0&&f.from<=o[l-1].toA;)c=o[l-1].fromA,d=o[l-1].fromB,l--,c<f.from&&(f=s.lineAt(c,Yn.ByPosNoHeight,i,0,0));d+=f.from-c,c=f.from;let v=EI.build(i.setDoc(a),e,d,h);s=pC(s,s.replace(c,u,v))}return s.updateHeight(i,0)}static empty(){return new Ns(0,0,0)}static of(e){if(e.length==1)return e[0];let r=0,i=e.length,o=0,s=0;for(;;)if(r==i)if(o>s*2){let l=e[r-1];l.break?e.splice(--r,1,l.left,null,l.right):e.splice(--r,1,l.left,l.right),i+=1+l.break,o-=l.size}else if(s>o*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(o<s){let l=e[r++];l&&(o+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let a=0;return e[r-1]==null?(a=1,r--):e[r]==null&&(a=1,i++),new ctt(To.of(e.slice(0,r)),a,To.of(e.slice(i)))}}function pC(n,e){return n==e?n:(n.constructor!=e.constructor&&(_g=!0),e)}To.prototype.size=1;const ltt=Et.replace({});class Pue extends To{constructor(e,r,i){super(e,r),this.deco=i,this.spaceAbove=0}mainBlock(e,r){return new ll(r,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,r,i,o){return this.spaceAbove&&e<i+this.spaceAbove?new ll(o,0,i,this.spaceAbove,ltt):this.mainBlock(i,o)}lineAt(e,r,i,o,s){let a=this.mainBlock(o,s);return this.spaceAbove?this.blockAt(0,i,o,s).join(a):a}forEachLine(e,r,i,o,s,a){e<=s+this.length&&r>=s&&a(this.lineAt(0,Yn.ByPos,i,o,s))}setMeasuredHeight(e){let r=e.heights[e.index++];r<0?(this.spaceAbove=-r,r=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(r)}updateHeight(e,r=0,i=!1,o){return o&&o.from<=r&&o.more&&this.setMeasuredHeight(o),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ns extends Pue{constructor(e,r,i){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,r){return new ll(r,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,r,i){let o=i[0];return i.length==1&&(o instanceof Ns||o instanceof Ei&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof Ei?o=new Ns(o.length,this.height,this.spaceAbove):o.height=this.height,this.outdated||(o.outdated=!1),o):To.of(i)}updateHeight(e,r=0,i=!1,o){return o&&o.from<=r&&o.more?this.setMeasuredHeight(o):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ei extends To{constructor(e){super(e,0)}heightMetrics(e,r){let i=e.doc.lineAt(r).number,o=e.doc.lineAt(r+this.length).number,s=o-i+1,a,l=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*s);a=c/s,this.length>s+1&&(l=(this.height-c)/(this.length-s-1))}else a=this.height/s;return{firstLine:i,lastLine:o,perLine:a,perChar:l}}blockAt(e,r,i,o){let{firstLine:s,lastLine:a,perLine:l,perChar:c}=this.heightMetrics(r,o);if(r.lineWrapping){let u=o+(e<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),d=r.doc.lineAt(u),h=l+d.length*c,f=Math.max(i,e-h/2);return new ll(d.from,d.length,f,h,0)}else{let u=Math.max(0,Math.min(a-s,Math.floor((e-i)/l))),{from:d,length:h}=r.doc.line(s+u);return new ll(d,h,i+l*u,l,0)}}lineAt(e,r,i,o,s){if(r==Yn.ByHeight)return this.blockAt(e,i,o,s);if(r==Yn.ByPosNoHeight){let{from:m,to:v}=i.doc.lineAt(e);return new ll(m,v-m,0,0,0)}let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s),u=i.doc.lineAt(e),d=l+u.length*c,h=u.number-a,f=o+l*h+c*(u.from-s-h);return new ll(u.from,u.length,Math.max(o,Math.min(f,o+this.height-d)),d,0)}forEachLine(e,r,i,o,s,a){e=Math.max(e,s),r=Math.min(r,s+this.length);let{firstLine:l,perLine:c,perChar:u}=this.heightMetrics(i,s);for(let d=e,h=o;d<=r;){let f=i.doc.lineAt(d);if(d==e){let v=f.number-l;h+=c*v+u*(e-s-v)}let m=c+u*f.length;a(new ll(f.from,f.length,h,m,0)),h+=m,d=f.to+1}}replace(e,r,i){let o=this.length-r;if(o>0){let s=i[i.length-1];s instanceof Ei?i[i.length-1]=new Ei(s.length+o):i.push(null,new Ei(o-1))}if(e>0){let s=i[0];s instanceof Ei?i[0]=new Ei(e+s.length):i.unshift(new Ei(e-1),null)}return To.of(i)}decomposeLeft(e,r){r.push(new Ei(e-1),null)}decomposeRight(e,r){r.push(null,new Ei(this.length-e-1))}updateHeight(e,r=0,i=!1,o){let s=r+this.length;if(o&&o.from<=r+this.length&&o.more){let a=[],l=Math.max(r,o.from),c=-1;for(o.from>r&&a.push(new Ei(o.from-r-1).updateHeight(e,r));l<=s&&o.more;){let d=e.doc.lineAt(l).length;a.length&&a.push(null);let h=o.heights[o.index++],f=0;h<0&&(f=-h,h=o.heights[o.index++]),c==-1?c=h:Math.abs(h-c)>=J4&&(c=-2);let m=new Ns(d,h,f);m.outdated=!1,a.push(m),l+=d+1}l<=s&&a.push(null,new Ei(s-l).updateHeight(e,l));let u=To.of(a);return(c<0||Math.abs(u.height-this.height)>=J4||Math.abs(c-this.heightMetrics(e,r).perLine)>=J4)&&(_g=!0),pC(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ctt extends To{constructor(e,r,i){super(e.length+r+i.length,e.height+i.height,r|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,r,i,o){let s=i+this.left.height;return e<s?this.left.blockAt(e,r,i,o):this.right.blockAt(e,r,s,o+this.left.length+this.break)}lineAt(e,r,i,o,s){let a=o+this.left.height,l=s+this.left.length+this.break,c=r==Yn.ByHeight?e<a:e<l,u=c?this.left.lineAt(e,r,i,o,s):this.right.lineAt(e,r,i,a,l);if(this.break||(c?u.to<l:u.from>l))return u;let d=r==Yn.ByPosNoHeight?Yn.ByPosNoHeight:Yn.ByPos;return c?u.join(this.right.lineAt(l,d,i,a,l)):this.left.lineAt(l,d,i,o,s).join(u)}forEachLine(e,r,i,o,s,a){let l=o+this.left.height,c=s+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,r,i,o,s,a),r>=c&&this.right.forEachLine(e,r,i,l,c,a);else{let u=this.lineAt(c,Yn.ByPos,i,o,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,o,s,a),u.to>=e&&u.from<=r&&a(u),r>u.to&&this.right.forEachLine(u.to+1,r,i,l,c,a)}}replace(e,r,i){let o=this.left.length+this.break;if(r<o)return this.balanced(this.left.replace(e,r,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,r-o,i));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let l of i)s.push(l);if(e>0&&MY(s,a-1),r<this.length){let l=s.length;this.decomposeRight(r,s),MY(s,l)}return To.of(s)}decomposeLeft(e,r){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(i++,e>=i&&r.push(null)),e>i&&this.right.decomposeLeft(e-i,r)}decomposeRight(e,r){let i=this.left.length,o=i+this.break;if(e>=o)return this.right.decomposeRight(e-o,r);e<i&&this.left.decomposeRight(e,r),this.break&&e<o&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?To.of(this.break?[e,null,r]:[e,r]):(this.left=pC(this.left,e),this.right=pC(this.right,r),this.setHeight(e.height+r.height),this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,i=!1,o){let{left:s,right:a}=this,l=r+s.length+this.break,c=null;return o&&o.from<=r+s.length&&o.more?c=s=s.updateHeight(e,r,i,o):s.updateHeight(e,r,i),o&&o.from<=l+a.length&&o.more?c=a=a.updateHeight(e,l,i,o):a.updateHeight(e,l,i),c?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function MY(n,e){let r,i;n[e]==null&&(r=n[e-1])instanceof Ei&&(i=n[e+1])instanceof Ei&&n.splice(e-1,3,new Ei(r.length+1+i.length))}const utt=5;class EI{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let i=Math.min(r,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof Ns?o.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ns(i-this.pos,-1,0)),this.writtenTo=i,r>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,i){if(e<r||i.heightRelevant){let o=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let a=r-e;i.block?this.addBlock(new Pue(a,o,i)):(a||s||o>=utt)&&this.addLineDeco(o,s,a)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ns(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,r){let i=new Ei(r-e);return this.oracle.doc.lineAt(e).to==r&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ns)return e;let r=new Ns(0,-1,0);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,i){let o=this.ensureLine();o.length+=i,o.collapsed+=i,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=r,this.writtenTo=this.pos=this.pos+i}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Ns)&&!this.isCovered?this.nodes.push(new Ns(0,-1,0)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let o of this.nodes)o instanceof Ns&&o.updateHeight(this.oracle,i),i+=o?o.length:1;return this.nodes}static build(e,r,i,o){let s=new EI(i,e);return on.spans(r,i,o,s,0),s.finish(i)}}function dtt(n,e,r){let i=new htt;return on.compare(n,e,r,i,0),i.changes}class htt{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,i,o){(e<r||i&&i.heightRelevant||o&&o.heightRelevant)&&Y0(e,r,this.changes,5)}}function ftt(n,e){let r=n.getBoundingClientRect(),i=n.ownerDocument,o=i.defaultView||window,s=Math.max(0,r.left),a=Math.min(o.innerWidth,r.right),l=Math.max(0,r.top),c=Math.min(o.innerHeight,r.bottom);for(let u=n.parentNode;u&&u!=i.body;)if(u.nodeType==1){let d=u,h=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&h.overflow!="visible"){let f=d.getBoundingClientRect();s=Math.max(s,f.left),a=Math.min(a,f.right),l=Math.max(l,f.top),c=Math.min(u==n.parentNode?o.innerHeight:c,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?d.offsetParent:d.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-r.left,right:Math.max(s,a)-r.left,top:l-(r.top+e),bottom:Math.max(l,c)-(r.top+e)}}function ptt(n){let e=n.getBoundingClientRect(),r=n.ownerDocument.defaultView||window;return e.left<r.innerWidth&&e.right>0&&e.top<r.innerHeight&&e.bottom>0}function mtt(n,e){let r=n.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class aP{constructor(e,r,i,o){this.from=e,this.to=r,this.size=i,this.displaySize=o}static same(e,r){if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],s=r[i];if(o.from!=s.from||o.to!=s.to||o.size!=s.size)return!1}return!0}draw(e,r){return Et.replace({widget:new gtt(this.displaySize*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class gtt extends Hc{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class EY{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=NY,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=$n.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(AI).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new stt(r),this.stateDeco=jY(e),this.heightMap=To.empty().applyChanges(this.stateDeco,wn.empty,this.heightOracle.setDoc(e.doc),[new ba(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Et.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let i=0;i<=1;i++){let o=i?r.head:r.anchor;if(!e.some(({from:s,to:a})=>o>=s&&o<=a)){let{from:s,to:a}=this.lineBlockAt(o);e.push(new _k(s,a))}}return this.viewports=e.sort((i,o)=>i.from-o.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?NY:new NI(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(nv(e,this.scaler))})}update(e,r=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=jY(this.state);let o=e.changedRanges,s=ba.extendWithRanges(o,dtt(i,this.stateDeco,e?e.changes:ei.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);PY(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=a||_g)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let c=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<c.from||r.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,r));let u=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(sue)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,i=window.getComputedStyle(r),o=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?$n.RTL:$n.LTR;let a=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,l=r.getBoundingClientRect(),c=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,d=0;if(l.width&&l.height){let{scaleX:P,scaleY:A}=qce(r,l);(P>.005&&Math.abs(this.scaleX-P)>.005||A>.005&&Math.abs(this.scaleY-A)>.005)&&(this.scaleX=P,this.scaleY=A,u|=16,a=c=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=Wce(e.scrollDOM);let v=(this.printing?mtt:ftt)(r,this.paddingTop),x=v.top-this.pixelViewport.top,b=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(c=!0)),!this.inView&&!this.scrollTarget&&!ptt(e.dom))return 0;let S=l.width;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),c){let P=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(P)&&(a=!0),a||o.lineWrapping&&Math.abs(S-this.contentDOMWidth)>o.charWidth){let{lineHeight:A,charWidth:T,textHeight:E}=e.docView.measureTextSize();a=A>0&&o.refresh(s,A,T,E,Math.max(5,S/T),P),a&&(e.docView.minWidth=0,u|=16)}x>0&&b>0?d=Math.max(x,b):x<0&&b<0&&(d=Math.min(x,b)),PY();for(let A of this.viewports){let T=A.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(A);this.heightMap=(a?To.empty().applyChanges(this.stateDeco,wn.empty,this.heightOracle,[new ba(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,a,new att(A.from,T))}_g&&(u|=2)}let _=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),u|=this.updateForViewport()),(u&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,c=new _k(o.lineAt(a-i*1e3,Yn.ByHeight,s,0,0).from,o.lineAt(l+(1-i)*1e3,Yn.ByHeight,s,0,0).to);if(r){let{head:u}=r.range;if(u<c.from||u>c.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=o.lineAt(u,Yn.ByPos,s,0,0),f;r.y=="center"?f=(h.top+h.bottom)/2-d/2:r.y=="start"||r.y=="nearest"&&u<c.from?f=h.top:f=h.bottom-d,c=new _k(o.lineAt(f-1e3/2,Yn.ByHeight,s,0,0).from,o.lineAt(f+d+1e3/2,Yn.ByHeight,s,0,0).to)}}return c}mapViewport(e,r){let i=r.mapPos(e.from,-1),o=r.mapPos(e.to,1);return new _k(this.heightMap.lineAt(i,Yn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,Yn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},i=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,Yn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(r,Yn.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||o<=a-Math.max(10,Math.min(-i,250)))&&(r==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&o>a-2*1e3&&s<l+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let i=[];for(let o of e)r.touchesRange(o.from,o.to)||i.push(new aP(r.mapPos(o.from),r.mapPos(o.to),o.size,o.displaySize));return i}ensureLineGaps(e,r){let i=this.heightOracle.lineWrapping,o=i?1e4:2e3,s=o>>1,a=o<<1;if(this.defaultTextDirection!=$n.LTR&&!i)return[];let l=[],c=(d,h,f,m)=>{if(h-d<s)return;let v=this.state.selection.main,x=[v.from];v.empty||x.push(v.to);for(let w of x)if(w>d&&w<h){c(d,w-10,f,m),c(w+10,h,f,m);return}let b=vtt(e,w=>w.from>=f.from&&w.to<=f.to&&Math.abs(w.from-d)<s&&Math.abs(w.to-h)<s&&!x.some(S=>w.from<S&&w.to>S));if(!b){if(h<f.to&&r&&i&&r.visibleRanges.some(_=>_.from<=h&&_.to>=h)){let _=r.moveToLineBoundary(De.cursor(h),!1,!0).head;_>d&&(h=_)}let w=this.gapSize(f,d,h,m),S=i||w<2e6?w:2e6;b=new aP(d,h,w,S)}l.push(b)},u=d=>{if(d.length<a||d.type!=Li.Text)return;let h=ytt(d.from,d.to,this.stateDeco);if(h.total<a)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,m,v;if(i){let x=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,w;if(f!=null){let S=Tk(h,f),_=((this.visibleBottom-this.visibleTop)/2+x)/d.height;b=S-_,w=S+_}else b=(this.visibleTop-d.top-x)/d.height,w=(this.visibleBottom-d.top+x)/d.height;m=Ak(h,b),v=Ak(h,w)}else{let x=h.total*this.heightOracle.charWidth,b=o*this.heightOracle.charWidth,w=0;if(x>2e6)for(let T of e)T.from>=d.from&&T.from<d.to&&T.size!=T.displaySize&&T.from*this.heightOracle.charWidth+w<this.pixelViewport.left&&(w=T.size-T.displaySize);let S=this.pixelViewport.left+w,_=this.pixelViewport.right+w,P,A;if(f!=null){let T=Tk(h,f),E=((_-S)/2+b)/x;P=T-E,A=T+E}else P=(S-b)/x,A=(_+b)/x;m=Ak(h,P),v=Ak(h,A)}m>d.from&&c(d.from,m,d,h),v<d.to&&c(v,d.to,d,h)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(u):u(d);return l}gapSize(e,r,i,o){let s=Tk(o,i)-Tk(o,r);return this.heightOracle.lineWrapping?e.height*s:o.total*this.heightOracle.charWidth*s}updateLineGaps(e){aP.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Et.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let i=[];on.spans(r,this.viewport.from,this.viewport.to,{span(s,a){i.push({from:s,to:a})},point(){}},20);let o=0;if(i.length!=this.visibleRanges.length)o=12;else for(let s=0;s<i.length&&!(o&8);s++){let a=this.visibleRanges[s],l=i[s];(a.from!=l.from||a.to!=l.to)&&(o|=4,e&&e.mapPos(a.from,-1)==l.from&&e.mapPos(a.to,1)==l.to||(o|=8))}return this.visibleRanges=i,o}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||nv(this.heightMap.lineAt(e,Yn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=e&&r.bottom>=e)||nv(this.heightMap.lineAt(this.scaler.fromDOM(e),Yn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return nv(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class _k{constructor(e,r){this.from=e,this.to=r}}function ytt(n,e,r){let i=[],o=n,s=0;return on.spans(r,n,e,{span(){},point(a,l){a>o&&(i.push({from:o,to:a}),s+=a-o),o=l}},20),o<e&&(i.push({from:o,to:e}),s+=e-o),{total:s,ranges:i}}function Ak({total:n,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let i=Math.floor(n*r);for(let o=0;;o++){let{from:s,to:a}=e[o],l=a-s;if(i<=l)return s+i;i-=l}}function Tk(n,e){let r=0;for(let{from:i,to:o}of n.ranges){if(e<=o){r+=e-i;break}r+=o-i}return r/n.total}function vtt(n,e){for(let r of n)if(e(r))return r}const NY={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function jY(n){let e=n.facet(T6).filter(i=>typeof i!="function"),r=n.facet(TI).filter(i=>typeof i!="function");return r.length&&e.push(on.join(r)),e}class NI{constructor(e,r,i){let o=0,s=0,a=0;this.viewports=i.map(({from:l,to:c})=>{let u=r.lineAt(l,Yn.ByPos,e,0,0).top,d=r.lineAt(c,Yn.ByPos,e,0,0).bottom;return o+=d-u,{from:l,to:c,top:u,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(r.height-o);for(let l of this.viewports)l.domTop=a+(l.top-s)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let r=0,i=0,o=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.top)return o+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,o=s.domBottom}}fromDOM(e){for(let r=0,i=0,o=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.domTop)return i+(e-o)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,o=s.domBottom}}eq(e){return e instanceof NI?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((r,i)=>r.from==e.viewports[i].from&&r.to==e.viewports[i].to):!1}}function nv(n,e){if(e.scale==1)return n;let r=e.toDOM(n.top),i=e.toDOM(n.bottom);return new ll(n.from,n.length,r,i-r,Array.isArray(n._content)?n._content.map(o=>nv(o,e)):n._content)}const Pk=it.define({combine:n=>n.join(" ")}),sN=it.define({combine:n=>n.indexOf(!0)>-1}),aN=Zh.newName(),Mue=Zh.newName(),Eue=Zh.newName(),Nue={"&light":"."+Mue,"&dark":"."+Eue};function lN(n,e,r){return new Zh(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,o=>{if(o=="&")return n;if(!r||!r[o])throw new RangeError(`Unsupported selector: ${o}`);return r[o]}):n+" "+i}})}const xtt=lN("."+aN,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Nue),btt={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},lP=st.ie&&st.ie_version<=11;class wtt{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new ZQe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let i of r)this.queue.push(i);(st.ie&&st.ie_version<=11||st.ios&&e.composing)&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&st.android&&e.constructor.EDIT_CONTEXT!==!1&&!(st.chrome&&st.chrome_version<126)&&(this.editContext=new Stt(e),e.state.facet(Mu)&&(e.contentDOM.editContext=this.editContext.editContext)),lP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,i)=>r!=e[i]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,o=this.selectionRange;if(i.state.facet(Mu)?i.root.activeElement!=this.dom:!Xv(this.dom,o))return;let s=o.anchorNode&&i.docView.tile.nearest(o.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(st.ie&&st.ie_version<=11||st.android&&st.chrome)&&!i.state.selection.main.empty&&o.focusNode&&Jv(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=kg(e.root);if(!r)return!1;let i=st.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&ktt(this.view,r)||r;if(!i||this.selectionRange.eq(i))return!1;let o=Xv(this.dom,i);return o&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&JQe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),o&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let i=this.dom;i;)if(i.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=r)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,btt),lP&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),lP&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var i;if(!this.delayedAndroidKey){let o=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Z0(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,i=-1,o=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(o=!0),r==-1?{from:r,to:i}=a:(r=Math.min(a.from,r),i=Math.max(a.to,i)))}return{from:r,to:i,typeOver:o}}readChange(){let{from:e,to:r,typeOver:i}=this.processRecords(),o=this.selectionChanged&&Xv(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new $et(this.view,e,r,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let i=this.view.state,o=vue(this.view,r);return this.view.state==i&&(r.domChanged||r.newSel&&!fC(this.view.state.selection,r.newSel.main))&&this.view.update([]),o}readMutation(e){let r=this.view.docView.tile.nearest(e.target);if(!r||r.isWidget())return null;if(r.markDirty(e.type=="attributes"),e.type=="childList"){let i=OY(r,e.previousSibling||e.target.previousSibling,-1),o=OY(r,e.nextSibling||e.target.nextSibling,1);return{from:i?r.posAfter(i):r.posAtStart,to:o?r.posBefore(o):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Mu)!=e.state.facet(Mu)&&(e.view.contentDOM.editContext=e.state.facet(Mu)?this.editContext.editContext:null))}destroy(){var e,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function OY(n,e,r){for(;e;){let i=qr.get(e);if(i&&i.parent==n)return i;let o=e.parentNode;e=o!=n.dom?o:r>0?e.nextSibling:e.previousSibling}return null}function DY(n,e){let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor,1);return Jv(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function ktt(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return DY(n,o)}let r=null;function i(o){o.preventDefault(),o.stopImmediatePropagation(),r=o.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),r?DY(n,r):null}class Stt{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let r=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let o=e.state.selection.main,{anchor:s,head:a}=o,l=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let u=c-l>i.text.length;l==this.from&&s<this.from?l=s:c==this.to&&s>this.to&&(c=s);let d=xue(e.state.sliceDoc(l,c),i.text,(u?o.from:o.to)-l,u?"end":null);if(!d){let f=De.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));fC(f,o)||e.dispatch({selection:f,userEvent:"select"});return}let h={from:d.from+l,to:d.toA+l,insert:wn.of(i.text.slice(d.from,d.toB).split(`
`))};if((st.mac||st.android)&&h.from==a-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:l,to:c,insert:wn.of([i.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let f=this.to-this.from+(h.to-h.from+h.insert.length);MI(e,h,De.single(this.toEditorPos(i.selectionStart,f),this.toEditorPos(i.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(r.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(r.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let o=[],s=null;for(let a=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);a<l;a++){let c=e.coordsForChar(a);s=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||s||new DOMRect,o.push(s)}r.updateCharacterBounds(i.rangeStart,o)},this.handlers.textformatupdate=i=>{let o=[];for(let s of i.getTextFormats()){let a=s.underlineStyle,l=s.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(l)){let c=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(c<u){let d=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;o.push(Et.mark({attributes:{style:d}}).range(c,u))}}}e.dispatch({effects:lue.of(Et.set(o))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)r.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let o=kg(i.root);o&&o.rangeCount&&this.editContext.updateSelectionBounds(o.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let r=0,i=!1,o=this.pendingContextChange;return e.changes.iterChanges((s,a,l,c,u)=>{if(i)return;let d=u.length-(a-s);if(o&&a>=o.to)if(o.from==s&&o.to==a&&o.insert.eq(u)){o=this.pendingContextChange=null,r+=d,this.to+=d;return}else o=null,this.revertPending(e.state);if(s+=r,a+=r,a<=this.from)this.from+=d,this.to+=d;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),u.toString()),this.to+=d}r+=d}),o&&!i&&this.revertPending(e.state),!i}update(e){let r=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(o=>!o.isUserEvent("input.type")&&o.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||r)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:r}=e.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(e.doc.length,r+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),e.doc.sliceString(r.from,r.to))}setSelection(e){let{main:r}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),o=this.toContextPos(r.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=o)&&this.editContext.updateSelection(i,o)}rangeIsValid(e){let{head:r}=e.selection.main;return!(this.from>0&&r-this.from<500||this.to<e.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(e,r=this.to-this.from){e=Math.min(e,r);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let r=this.composing;return r&&r.drifted?r.contextBase+(e-r.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class rt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(o=>o.forEach(s=>i(s,this)))||(o=>this.update(o)),this.dispatch=this.dispatch.bind(this),this._root=e.root||XQe(e.parent)||document,this.viewState=new EY(e.state||un.create(e)),e.scrollTo&&e.scrollTo.is(kk)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(D0).map(o=>new nP(o));for(let o of this.plugins)o.update(this);this.observer=new wtt(this),this.inputState=new Vet(this),this.inputState.ensureHandlers(this.plugins),this.docView=new gY(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let r=e.length==1&&e[0]instanceof Br?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,i=!1,o,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,l=0,c=null;e.some(f=>f.annotation(_ue))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=Aue(s,a),c||(l=1));let u=this.observer.delayedAndroidKey,d=null;if(u?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(d=null)):this.observer.clear(),s.facet(un.phrases)!=this.state.facet(un.phrases))return this.setState(s);o=uC.create(this,s,e),o.flags|=l;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:m}=f.state.selection;h=new X0(m.empty?m:De.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of f.effects)m.is(kk)&&(h=m.value.clip(this.state))}this.viewState.update(o,h),this.bidiCache=mC.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),r=this.docView.update(o),this.state.facet(ev)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(Pk)!=o.state.facet(Pk)&&(this.viewState.mustMeasureContent=!0),(r||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!o.empty)for(let f of this.state.facet(tN))try{f(o)}catch(m){as(this.state,m,"update listener")}(c||d)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),d&&!vue(this,d)&&u.force&&Z0(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new EY(e),this.plugins=e.facet(D0).map(i=>new nP(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new gY(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(D0),i=e.state.facet(D0);if(r!=i){let o=[];for(let s of i){let a=r.indexOf(s);if(a<0)o.push(new nP(s));else{let l=this.plugins[a];l.mustUpdate=e,o.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);r!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let r=e.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(i){as(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,i=this.scrollDOM,o=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(Wce(i))s=-1,a=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(o);s=m.from,a=m.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];c&4||([this.measureRequests,u]=[u,this.measureRequests]);let d=u.map(m=>{try{return m.read(this)}catch(v){return as(this.state,v),IY}}),h=uC.create(this,this.state,[]),f=!1;h.flags|=c,r?r.flags|=c:r=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let m=0;m<u.length;m++)if(d[m]!=IY)try{let v=u[m];v.write&&v.write(d[m],this)}catch(v){as(this.state,v)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let v=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(v>1||v<-1){o=o+v,i.scrollTop=o/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let l of this.state.facet(tN))l(r)}get themeClasses(){return aN+" "+(this.state.facet(sN)?Eue:Mue)+" "+this.state.facet(Pk)}updateAttrs(){let e=RY(this,cue,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Mu)?"true":"false",class:"cm-content",style:`${st.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),RY(this,AI,r);let i=this.observer.ignore(()=>{let o=uY(this.contentDOM,this.contentAttrs,r),s=uY(this.dom,this.editorAttrs,e);return o||s});return this.editorAttrs=e,this.contentAttrs=r,i}showAnnouncements(e){let r=!0;for(let i of e)for(let o of i.effects)if(o.is(rt.announce)){r&&(this.announceDOM.textContent=""),r=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(ev);let e=this.state.facet(rt.cspNonce);Zh.mount(this.root,this.styleModules.concat(xtt).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.plugin!=e)&&this.pluginMap.set(e,r=this.plugins.find(i=>i.plugin==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,i){return sP(this,e,yY(this,e,r,i))}moveByGroup(e,r){return sP(this,e,yY(this,e,r,i=>Iet(this,e.head,i)))}visualLineSide(e,r){let i=this.bidiSpans(e),o=this.textDirectionAt(e.from),s=i[r?i.length-1:0];return De.cursor(s.side(r,o)+e.from,s.forward(!r,o)?1:-1)}moveToLineBoundary(e,r,i=!0){return Det(this,e,r,i)}moveVertically(e,r,i){return sP(this,e,Ret(this,e,r,i))}domAtPos(e,r=1){return this.docView.domAtPos(e,r)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){this.readMeasured();let i=iN(this,e,r);return i&&i.pos}posAndSideAtCoords(e,r=!0){return this.readMeasured(),iN(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let i=this.docView.coordsAt(e,r);if(!i||i.left==i.right)return i;let o=this.state.doc.lineAt(e),s=this.bidiSpans(o),a=s[Lu.find(s,e-o.from,-1,r)];return cC(i,a.dir==$n.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(oue)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ctt)return Xce(e.length);let r=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==r&&(s.fresh||Zce(s.isolates,i=fY(this,e))))return s.order;i||(i=fY(this,e));let o=oet(e.text,r,i);return this.bidiCache.push(new mC(e.from,e.to,r,i,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||st.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Vce(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return kk.of(new X0(typeof e=="number"?De.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return kk.of(new X0(De.cursor(i.from),"start","start",i.top-e,r,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Wr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Wr.define(()=>({}),{eventObservers:e})}static theme(e,r){let i=Zh.newName(),o=[Pk.of(i),ev.of(lN(`.${i}`,e))];return r&&r.dark&&o.push(sN.of(!0)),o}static baseTheme(e){return hf.lowest(ev.of(lN("."+aN,e,Nue)))}static findFromDOM(e){var r;let i=e.querySelector(".cm-content"),o=i&&qr.get(i)||qr.get(e);return((r=o?.root)===null||r===void 0?void 0:r.view)||null}}rt.styleModule=ev;rt.inputHandler=rue;rt.clipboardInputFilter=CI;rt.clipboardOutputFilter=_I;rt.scrollHandler=aue;rt.focusChangeEffect=iue;rt.perLineTextDirection=oue;rt.exceptionSink=nue;rt.updateListener=tN;rt.editable=Mu;rt.mouseSelectionStyle=tue;rt.dragMovesSelection=eue;rt.clickAddsSelectionRange=Qce;rt.decorations=T6;rt.blockWrappers=uue;rt.outerDecorations=TI;rt.atomicRanges=uw;rt.bidiIsolatedRanges=due;rt.scrollMargins=hue;rt.darkTheme=sN;rt.cspNonce=it.define({combine:n=>n.length?n[0]:""});rt.contentAttributes=AI;rt.editorAttributes=cue;rt.lineWrapping=rt.contentAttributes.of({class:"cm-lineWrapping"});rt.announce=Ht.define();const Ctt=4096,IY={};class mC{constructor(e,r,i,o,s,a){this.from=e,this.to=r,this.dir=i,this.isolates=o,this.fresh=s,this.order=a}static update(e,r){if(r.empty&&!e.some(s=>s.fresh))return e;let i=[],o=e.length?e[e.length-1].dir:$n.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==o&&!r.touchesRange(a.from,a.to)&&i.push(new mC(r.mapPos(a.from,1),r.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function RY(n,e,r){for(let i=n.state.facet(e),o=i.length-1;o>=0;o--){let s=i[o],a=typeof s=="function"?s(n):s;a&&wI(a,r)}return r}const _tt=st.mac?"mac":st.windows?"win":st.linux?"linux":"key";function Att(n,e){const r=n.split(/-(?!$)/);let i=r[r.length-1];i=="Space"&&(i=" ");let o,s,a,l;for(let c=0;c<r.length-1;++c){const u=r[c];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))o=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return o&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Mk(n,e,r){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),r!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Ttt=hf.default(rt.domEventHandlers({keydown(n,e){return Oue(jue(e.state),n,e,"editor")}})),t1=it.define({enables:Ttt}),LY=new WeakMap;function jue(n){let e=n.facet(t1),r=LY.get(e);return r||LY.set(e,r=Ett(e.reduce((i,o)=>i.concat(o),[]))),r}function Ptt(n,e,r){return Oue(jue(n.state),e,n,r)}let Ah=null;const Mtt=4e3;function Ett(n,e=_tt){let r=Object.create(null),i=Object.create(null),o=(a,l)=>{let c=i[a];if(c==null)i[a]=l;else if(c!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,l,c,u,d)=>{var h,f;let m=r[a]||(r[a]=Object.create(null)),v=l.split(/ (?!$)/).map(w=>Att(w,e));for(let w=1;w<v.length;w++){let S=v.slice(0,w).join(" ");o(S,!0),m[S]||(m[S]={preventDefault:!0,stopPropagation:!1,run:[_=>{let P=Ah={view:_,prefix:S,scope:a};return setTimeout(()=>{Ah==P&&(Ah=null)},Mtt),!0}]})}let x=v.join(" ");o(x,!1);let b=m[x]||(m[x]={preventDefault:!1,stopPropagation:!1,run:((f=(h=m._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});c&&b.run.push(c),u&&(b.preventDefault=!0),d&&(b.stopPropagation=!0)};for(let a of n){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of l){let d=r[u]||(r[u]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=a;for(let f in d)d[f].run.push(m=>h(m,cN))}let c=a[e]||a.key;if(c)for(let u of l)s(u,c,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(u,"Shift-"+c,a.shift,a.preventDefault,a.stopPropagation)}return r}let cN=null;function Oue(n,e,r,i){cN=e;let o=Xte(e),s=ts(o,0),a=uc(s)==o.length&&o!=" ",l="",c=!1,u=!1,d=!1;Ah&&Ah.view==r&&Ah.scope==i&&(l=Ah.prefix+" ",wue.indexOf(e.keyCode)<0&&(u=!0,Ah=null));let h=new Set,f=b=>{if(b){for(let w of b.run)if(!h.has(w)&&(h.add(w),w(r)))return b.stopPropagation&&(d=!0),!0;b.preventDefault&&(b.stopPropagation&&(d=!0),u=!0)}return!1},m=n[i],v,x;return m&&(f(m[l+Mk(o,e,!a)])?c=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(st.windows&&e.ctrlKey&&e.altKey)&&!(st.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(v=Yu[e.keyCode])&&v!=o?(f(m[l+Mk(v,e,!0)])||e.shiftKey&&(x=_x[e.keyCode])!=o&&x!=v&&f(m[l+Mk(x,e,!1)]))&&(c=!0):a&&e.shiftKey&&f(m[l+Mk(o,e,!0)])&&(c=!0),!c&&f(m._any)&&(c=!0)),u&&(c=!0),c&&d&&e.stopPropagation(),cN=null,c}class dw{constructor(e,r,i,o,s){this.className=e,this.left=r,this.top=i,this.width=o,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,i){if(i.empty){let o=e.coordsAtPos(i.head,i.assoc||1);if(!o)return[];let s=Due(e);return[new dw(r,o.left-s.left,o.top-s.top,null,o.bottom-o.top)]}else return Ntt(e,r,i)}}function Due(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==$n.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function zY(n,e,r,i){let o=n.coordsAtPos(e,r*2);if(!o)return i;let s=n.dom.getBoundingClientRect(),a=(o.top+o.bottom)/2,l=n.posAtCoords({x:s.left+1,y:a}),c=n.posAtCoords({x:s.right-1,y:a});return l==null||c==null?i:{from:Math.max(i.from,Math.min(l,c)),to:Math.min(i.to,Math.max(l,c))}}function Ntt(n,e,r){if(r.to<=n.viewport.from||r.from>=n.viewport.to)return[];let i=Math.max(r.from,n.viewport.from),o=Math.min(r.to,n.viewport.to),s=n.textDirection==$n.LTR,a=n.contentDOM,l=a.getBoundingClientRect(),c=Due(n),u=a.querySelector(".cm-line"),d=u&&window.getComputedStyle(u),h=l.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),f=l.right-(d?parseInt(d.paddingRight):0),m=rN(n,i,1),v=rN(n,o,-1),x=m.type==Li.Text?m:null,b=v.type==Li.Text?v:null;if(x&&(n.lineWrapping||m.widgetLineBreaks)&&(x=zY(n,i,1,x)),b&&(n.lineWrapping||v.widgetLineBreaks)&&(b=zY(n,o,-1,b)),x&&b&&x.from==b.from&&x.to==b.to)return S(_(r.from,r.to,x));{let A=x?_(r.from,null,x):P(m,!1),T=b?_(null,r.to,b):P(v,!0),E=[];return(x||m).to<(b||v).from-(x&&b?1:0)||m.widgetLineBreaks>1&&A.bottom+n.defaultLineHeight/2<T.top?E.push(w(h,A.bottom,f,T.top)):A.bottom<T.top&&n.elementAtHeight((A.bottom+T.top)/2).type==Li.Text&&(A.bottom=T.top=(A.bottom+T.top)/2),S(A).concat(E).concat(S(T))}function w(A,T,E,L){return new dw(e,A-c.left,T-c.top,E-A,L-T)}function S({top:A,bottom:T,horizontal:E}){let L=[];for(let $=0;$<E.length;$+=2)L.push(w(E[$],A,E[$+1],T));return L}function _(A,T,E){let L=1e9,$=-1e9,z=[];function B(I,U,Z,te,J){let oe=n.coordsAtPos(I,I==E.to?-2:2),q=n.coordsAtPos(Z,Z==E.from?2:-2);!oe||!q||(L=Math.min(oe.top,q.top,L),$=Math.max(oe.bottom,q.bottom,$),J==$n.LTR?z.push(s&&U?h:oe.left,s&&te?f:q.right):z.push(!s&&te?h:q.left,!s&&U?f:oe.right))}let D=A??E.from,Y=T??E.to;for(let I of n.visibleRanges)if(I.to>D&&I.from<Y)for(let U=Math.max(I.from,D),Z=Math.min(I.to,Y);;){let te=n.state.doc.lineAt(U);for(let J of n.bidiSpans(te)){let oe=J.from+te.from,q=J.to+te.from;if(oe>=Z)break;q>U&&B(Math.max(oe,U),A==null&&oe<=D,Math.min(q,Z),T==null&&q>=Y,J.dir)}if(U=te.to+1,U>=Z)break}return z.length==0&&B(D,A==null,Y,T==null,n.textDirection),{top:L,bottom:$,horizontal:z}}function P(A,T){let E=l.top+(T?A.top:A.bottom);return{top:E,bottom:E,horizontal:[]}}}function jtt(n,e){return n.constructor==e.constructor&&n.eq(e)}class Ott{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(Q4)!=e.state.facet(Q4)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let r=0,i=e.facet(Q4);for(;r<i.length&&i[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,i)=>!jtt(r,this.drawn[i]))){let r=this.dom.firstChild,i=0;for(let o of e)o.update&&r&&o.constructor&&this.drawn[i].constructor&&o.update(r,this.drawn[i])?(r=r.nextSibling,i++):this.dom.insertBefore(o.draw(),r);for(;r;){let o=r.nextSibling;r.remove(),r=o}this.drawn=e,st.safari&&st.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Q4=it.define();function Iue(n){return[Wr.define(e=>new Ott(e,n)),Q4.of(n)]}const ab=it.define({combine(n){return Bc(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function Rue(n={}){return[ab.of(n),Dtt,Itt,Rtt,sue.of(!0)]}function Lue(n){return n.startState.facet(ab)!=n.state.facet(ab)}const Dtt=Iue({above:!0,markers(n){let{state:e}=n,r=e.facet(ab),i=[];for(let o of e.selection.ranges){let s=o==e.selection.main;if(o.empty||r.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=o.empty?o:De.cursor(o.head,o.head>o.anchor?-1:1);for(let c of dw.forRange(n,a,l))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=Lue(n);return r&&FY(n.state,e),n.docChanged||n.selectionSet||r},mount(n,e){FY(e.state,n)},class:"cm-cursorLayer"});function FY(n,e){e.style.animationDuration=n.facet(ab).cursorBlinkRate+"ms"}const Itt=Iue({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:dw.forRange(n,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Lue(n)},class:"cm-selectionLayer"}),Rtt=hf.highest(rt.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),zue=Ht.define({map(n,e){return n==null?null:e.mapPos(n)}}),rv=ki.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((r,i)=>i.is(zue)?i.value:r,n)}}),Ltt=Wr.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let r=n.state.field(rv);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(rv)!=r||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(rv),r=e!=null&&n.coordsAtPos(e);if(!r)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:r.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:r.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:r.bottom-r.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/r+"px",this.cursor.style.height=n.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(rv)!=n&&this.view.dispatch({effects:zue.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ztt(){return[rv,Ltt]}function $Y(n,e,r,i,o){e.lastIndex=0;for(let s=n.iterRange(r,i),a=r,l;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)o(a+l.index,l)}function Ftt(n,e){let r=n.visibleRanges;if(r.length==1&&r[0].from==n.viewport.from&&r[0].to==n.viewport.to)return r;let i=[];for(let{from:o,to:s}of r)o=Math.max(n.state.doc.lineAt(o).from,o-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=o?i[i.length-1].to=s:i.push({from:o,to:s});return i}class $tt{constructor(e){const{regexp:r,decoration:i,decorate:o,boundary:s,maxLength:a=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,o)this.addMatch=(l,c,u,d)=>o(d,u,u+l[0].length,l,c);else if(typeof i=="function")this.addMatch=(l,c,u,d)=>{let h=i(l,c,u);h&&d(u,u+l[0].length,h)};else if(i)this.addMatch=(l,c,u,d)=>d(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let r=new id,i=r.add.bind(r);for(let{from:o,to:s}of Ftt(e,this.maxLength))$Y(e.state.doc,this.regexp,o,s,(a,l)=>this.addMatch(l,e,a,i));return r.finish()}updateDeco(e,r){let i=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((s,a,l,c)=>{c>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),o=Math.max(c,o))}),e.viewportMoved||o-i>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,r.map(e.changes),i,o):r}updateRange(e,r,i,o){for(let s of e.visibleRanges){let a=Math.max(s.from,i),l=Math.min(s.to,o);if(l>=a){let c=e.state.doc.lineAt(a),u=c.to<l?e.state.doc.lineAt(l):c,d=Math.max(s.from,c.from),h=Math.min(s.to,u.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){d=a;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){h=l;break}}let f=[],m,v=(x,b,w)=>f.push(w.range(x,b));if(c==u)for(this.regexp.lastIndex=d-c.from;(m=this.regexp.exec(c.text))&&m.index<h-c.from;)this.addMatch(m,e,m.index+c.from,v);else $Y(e.state.doc,this.regexp,d,h,(x,b)=>this.addMatch(b,e,x,v));r=r.update({filterFrom:d,filterTo:h,filter:(x,b)=>x<d||b>h,add:f})}}return r}}const uN=/x/.unicode!=null?"gu":"g",Btt=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,uN),Htt={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let cP=null;function qtt(){var n;if(cP==null&&typeof document<"u"&&document.body){let e=document.body.style;cP=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return cP||!1}const eS=it.define({combine(n){let e=Bc(n,{render:null,specialChars:Btt,addSpecialChars:null});return(e.replaceTabs=!qtt())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,uN)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,uN)),e}});function Vtt(n={}){return[eS.of(n),Wtt()]}let BY=null;function Wtt(){return BY||(BY=Wr.fromClass(class{constructor(n){this.view=n,this.decorations=Et.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(eS)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new $tt({regexp:n.specialChars,decoration:(e,r,i)=>{let{doc:o}=r.state,s=ts(e[0],0);if(s==9){let a=o.lineAt(i),l=r.state.tabSize,c=e1(a.text,l,i-a.from);return Et.replace({widget:new Ytt((l-c%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Et.replace({widget:new Gtt(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(eS);n.startState.facet(eS)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Utt="";function Ktt(n){return n>=32?Utt:n==10?"":String.fromCharCode(9216+n)}class Gtt extends Hc{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=Ktt(this.code),i=e.state.phrase("Control character")+" "+(Htt[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,i,r);if(o)return o;let s=document.createElement("span");return s.textContent=r,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Ytt extends Hc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Ztt(){return Jtt}const Xtt=Et.line({class:"cm-activeLine"}),Jtt=Wr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,r=[];for(let i of n.state.selection.ranges){let o=n.lineBlockAt(i.head);o.from>e&&(r.push(Xtt.range(o.from)),e=o.from)}return Et.set(r)}},{decorations:n=>n.decorations}),dN=2e3;function Qtt(n,e,r){let i=Math.min(e.line,r.line),o=Math.max(e.line,r.line),s=[];if(e.off>dN||r.off>dN||e.col<0||r.col<0){let a=Math.min(e.off,r.off),l=Math.max(e.off,r.off);for(let c=i;c<=o;c++){let u=n.doc.line(c);u.length<=l&&s.push(De.range(u.from+a,u.to+l))}}else{let a=Math.min(e.col,r.col),l=Math.max(e.col,r.col);for(let c=i;c<=o;c++){let u=n.doc.line(c),d=VE(u.text,a,n.tabSize,!0);if(d<0)s.push(De.cursor(u.to));else{let h=VE(u.text,l,n.tabSize);s.push(De.range(u.from+d,u.from+h))}}}return s}function ent(n,e){let r=n.coordsAtPos(n.viewport.from);return r?Math.round(Math.abs((r.left-e)/n.defaultCharacterWidth)):-1}function HY(n,e){let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(r),o=r-i.from,s=o>dN?-1:o==i.length?ent(n,e.clientX):e1(i.text,n.state.tabSize,r-i.from);return{line:i.number,col:s,off:o}}function tnt(n,e){let r=HY(n,e),i=n.state.selection;return r?{update(o){if(o.docChanged){let s=o.changes.mapPos(o.startState.doc.line(r.line).from),a=o.state.doc.lineAt(s);r={line:a.number,col:r.col,off:Math.min(r.off,a.length)},i=i.map(o.changes)}},get(o,s,a){let l=HY(n,o);if(!l)return i;let c=Qtt(n.state,r,l);return c.length?a?De.create(c.concat(i.ranges)):De.create(c):i}}:null}function nnt(n){let e=(r=>r.altKey&&r.button==0);return rt.mouseSelectionStyle.of((r,i)=>e(i)?tnt(r,i):null)}const rnt={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},int={style:"cursor: crosshair"};function ont(n={}){let[e,r]=rnt[n.key||"Alt"],i=Wr.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventObservers:{keydown(o){this.set(o.keyCode==e||r(o))},keyup(o){(o.keyCode==e||!r(o))&&this.set(!1)},mousemove(o){this.set(r(o))}}});return[i,rt.contentAttributes.of(o=>{var s;return!((s=o.plugin(i))===null||s===void 0)&&s.isDown?int:null})]}const Ek="-10000px";class Fue{constructor(e,r,i,o){this.facet=r,this.createTooltipView=i,this.removeTooltipView=o,this.input=e.state.facet(r),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=i(a,s))}update(e,r){var i;let o=e.state.facet(this.facet),s=o.filter(c=>c);if(o===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let a=[],l=r?[]:null;for(let c=0;c<s.length;c++){let u=s[c],d=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==u.create&&(d=h)}if(d<0)a[c]=this.createTooltipView(u,c?a[c-1]:null),l&&(l[c]=!!u.above);else{let h=a[c]=this.tooltipViews[d];l&&(l[c]=r[d]),h.update&&h.update(e)}}}for(let c of this.tooltipViews)a.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return r&&(l.forEach((c,u)=>r[u]=c),r.length=l.length),this.input=o,this.tooltips=s,this.tooltipViews=a,!0}}function snt(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const uP=it.define({combine:n=>{var e,r,i;return{position:st.ios?"absolute":((e=n.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=n.find(o=>o.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((i=n.find(o=>o.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||snt}}}),qY=new WeakMap,jI=Wr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(uP);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Fue(n,OI,(r,i)=>this.createTooltip(r,i),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let r=e||n.geometryChanged,i=n.state.facet(uP);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;r=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(n,e){let r=n.create(this.view),i=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),n.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let o=document.createElement("div");o.className="cm-tooltip-arrow",r.dom.appendChild(o)}return r.dom.style.position=this.position,r.dom.style.top=Ek,r.dom.style.left="0px",this.container.insertBefore(r.dom,i),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var n,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(st.safari){let a=s.getBoundingClientRect();r=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}else r=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(r||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),o=PI(this.view);return{visible:{left:i.left+o.left,top:i.top+o.top,right:i.right-o.right,bottom:i.bottom-o.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,a)=>{let l=this.manager.tooltipViews[a];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(uP).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:r}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:r,space:i,scaleX:o,scaleY:s}=n,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let c=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:d}=u,h=n.pos[l],f=n.size[l];if(!h||c.clip!==!1&&(h.bottom<=Math.max(r.top,i.top)||h.top>=Math.min(r.bottom,i.bottom)||h.right<Math.max(r.left,i.left)-.1||h.left>Math.min(r.right,i.right)+.1)){d.style.top=Ek;continue}let m=c.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,v=m?7:0,x=f.right-f.left,b=(e=qY.get(u))!==null&&e!==void 0?e:f.bottom-f.top,w=u.offset||lnt,S=this.view.textDirection==$n.LTR,_=f.width>i.right-i.left?S?i.left:i.right-f.width:S?Math.max(i.left,Math.min(h.left-(m?14:0)+w.x,i.right-x)):Math.min(Math.max(i.left,h.left-x+(m?14:0)-w.x),i.right-x),P=this.above[l];!c.strictSide&&(P?h.top-b-v-w.y<i.top:h.bottom+b+v+w.y>i.bottom)&&P==i.bottom-h.bottom>h.top-i.top&&(P=this.above[l]=!P);let A=(P?h.top-i.top:i.bottom-h.bottom)-v;if(A<b&&u.resize!==!1){if(A<this.view.defaultLineHeight){d.style.top=Ek;continue}qY.set(u,b),d.style.height=(b=A)/s+"px"}else d.style.height&&(d.style.height="");let T=P?h.top-b-v-w.y:h.bottom+v+w.y,E=_+x;if(u.overlap!==!0)for(let L of a)L.left<E&&L.right>_&&L.top<T+b&&L.bottom>T&&(T=P?L.top-b-2-v:L.bottom+v+2);if(this.position=="absolute"?(d.style.top=(T-n.parent.top)/s+"px",VY(d,(_-n.parent.left)/o)):(d.style.top=T/s+"px",VY(d,_/o)),m){let L=h.left+(S?w.x:-w.x)-(_+14-7);m.style.left=L/o+"px"}u.overlap!==!0&&a.push({left:_,top:T,right:E,bottom:T+b}),d.classList.toggle("cm-tooltip-above",P),d.classList.toggle("cm-tooltip-below",!P),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ek}},{eventObservers:{scroll(){this.maybeMeasure()}}});function VY(n,e){let r=parseInt(n.style.left,10);(isNaN(r)||Math.abs(e-r)>1)&&(n.style.left=e+"px")}const ant=rt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),lnt={x:0,y:0},OI=it.define({enables:[jI,ant]}),gC=it.define({combine:n=>n.reduce((e,r)=>e.concat(r),[])});class N6{static create(e){return new N6(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Fue(e,gC,(r,i)=>this.createHostedView(r,i),r=>r.dom.remove())}createHostedView(e,r){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let i of this.manager.tooltipViews){let o=i[e];if(o!==void 0){if(r===void 0)r=o;else if(r!==o)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const cnt=OI.compute([gC],n=>{let e=n.facet(gC);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var i;return(i=r.end)!==null&&i!==void 0?i:r.pos})),create:N6.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class unt{constructor(e,r,i,o,s){this.view=e,this.source=r,this.field=i,this.setHover=o,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,i=e.docView.tile.nearest(r.target);if(!i)return;let o,s=1;if(i.isWidget())o=i.posAtStart;else{if(o=e.posAtCoords(r),o==null)return;let l=e.coordsAtPos(o);if(!l||r.y<l.top||r.y>l.bottom||r.x<l.left-e.defaultCharacterWidth||r.x>l.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(o)).find(d=>d.from<=o&&d.to>=o),u=c&&c.dir==$n.RTL?-1:1;s=r.x<l.left?-u:u}let a=this.source(e,o,s);if(a?.then){let l=this.pending={pos:o};a.then(c=>{this.pending==l&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>as(e.state,c,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(jI),r=e?e.manager.tooltips.findIndex(i=>i.create==N6.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:o,tooltip:s}=this;if(o.length&&s&&!dnt(s.dom,e)||this.pending){let{pos:a}=o[0]||this.pending,l=(i=(r=o[0])===null||r===void 0?void 0:r.end)!==null&&i!==void 0?i:a;(a==l?this.view.posAtCoords(this.lastMove)!=a:!hnt(this.view,a,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let r=i=>{e.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Nk=4;function dnt(n,e){let{left:r,right:i,top:o,bottom:s}=n.getBoundingClientRect(),a;if(a=n.querySelector(".cm-tooltip-arrow")){let l=a.getBoundingClientRect();o=Math.min(l.top,o),s=Math.max(l.bottom,s)}return e.clientX>=r-Nk&&e.clientX<=i+Nk&&e.clientY>=o-Nk&&e.clientY<=s+Nk}function hnt(n,e,r,i,o,s){let a=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>o||Math.min(a.bottom,l)<o)return!1;let c=n.posAtCoords({x:i,y:o},!1);return c>=e&&c<=r}function fnt(n,e={}){let r=Ht.define(),i=ki.define({create(){return[]},update(o,s){if(o.length&&(e.hideOnChange&&(s.docChanged||s.selection)?o=[]:e.hideOn&&(o=o.filter(a=>!e.hideOn(s,a))),s.docChanged)){let a=[];for(let l of o){let c=s.changes.mapPos(l.pos,-1,Oi.TrackDel);if(c!=null){let u=Object.assign(Object.create(null),l);u.pos=c,u.end!=null&&(u.end=s.changes.mapPos(u.end)),a.push(u)}}o=a}for(let a of s.effects)a.is(r)&&(o=a.value),a.is(pnt)&&(o=[]);return o},provide:o=>gC.from(o)});return{active:i,extension:[i,Wr.define(o=>new unt(o,n,i,r,e.hoverTime||300)),cnt]}}function $ue(n,e){let r=n.plugin(jI);if(!r)return null;let i=r.manager.tooltips.indexOf(e);return i<0?null:r.manager.tooltipViews[i]}const pnt=Ht.define(),WY=it.define({combine(n){let e,r;for(let i of n)e=e||i.topContainer,r=r||i.bottomContainer;return{topContainer:e,bottomContainer:r}}});function DI(n,e){let r=n.plugin(Bue),i=r?r.specs.indexOf(e):-1;return i>-1?r.panels[i]:null}const Bue=Wr.fromClass(class{constructor(n){this.input=n.state.facet(lb),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(n));let e=n.state.facet(WY);this.top=new jk(n,!0,e.topContainer),this.bottom=new jk(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(n){let e=n.state.facet(WY);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new jk(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new jk(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=n.state.facet(lb);if(r!=this.input){let i=r.filter(c=>c),o=[],s=[],a=[],l=[];for(let c of i){let u=this.specs.indexOf(c),d;u<0?(d=c(n.view),l.push(d)):(d=this.panels[u],d.update&&d.update(n)),o.push(d),(d.top?s:a).push(d)}this.specs=i,this.panels=o,this.top.sync(s),this.bottom.sync(a);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>rt.scrollMargins.of(e=>{let r=e.plugin(n);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class jk{constructor(e,r,i){this.view=e,this.top=r,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=UY(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=UY(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function UY(n){let e=n.nextSibling;return n.remove(),e}const lb=it.define({enables:Bue});function mnt(n,e){let r,i=new Promise(a=>r=a),o=a=>gnt(a,e,r);n.state.field(dP,!1)?n.dispatch({effects:Hue.of(o)}):n.dispatch({effects:Ht.appendConfig.of(dP.init(()=>[o]))});let s=que.of(o);return{close:s,result:i.then(a=>((n.win.queueMicrotask||(c=>n.win.setTimeout(c,10)))(()=>{n.state.field(dP).indexOf(o)>-1&&n.dispatch({effects:s})}),a))}}const dP=ki.define({create(){return[]},update(n,e){for(let r of e.effects)r.is(Hue)?n=[r.value].concat(n):r.is(que)&&(n=n.filter(i=>i!=r.value));return n},provide:n=>lb.computeN([n],e=>e.field(n))}),Hue=Ht.define(),que=Ht.define();function gnt(n,e,r){let i=e.content?e.content(n,()=>a(null)):null;if(!i){if(i=Nn("form"),e.input){let l=Nn("input",e.input);/^(text|password|number|email|tel|url)$/.test(l.type)&&l.classList.add("cm-textfield"),l.name||(l.name="input"),i.appendChild(Nn("label",(e.label||"")+": ",l))}else i.appendChild(document.createTextNode(e.label||""));i.appendChild(document.createTextNode(" ")),i.appendChild(Nn("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let o=i.nodeName=="FORM"?[i]:i.querySelectorAll("form");for(let l=0;l<o.length;l++){let c=o[l];c.addEventListener("keydown",u=>{u.keyCode==27?(u.preventDefault(),a(null)):u.keyCode==13&&(u.preventDefault(),a(c))}),c.addEventListener("submit",u=>{u.preventDefault(),a(c)})}let s=Nn("div",i,Nn("button",{onclick:()=>a(null),"aria-label":n.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(s.className=e.class),s.classList.add("cm-dialog");function a(l){s.contains(s.ownerDocument.activeElement)&&n.focus(),r(l)}return{dom:s,top:e.top,mount:()=>{if(e.focus){let l;typeof e.focus=="string"?l=i.querySelector(e.focus):l=i.querySelector("input")||i.querySelector("button"),l&&"select"in l?l.select():l&&"focus"in l&&l.focus()}}}}class sd extends Yh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}sd.prototype.elementClass="";sd.prototype.toDOM=void 0;sd.prototype.mapMode=Oi.TrackBefore;sd.prototype.startSide=sd.prototype.endSide=-1;sd.prototype.point=!0;const tS=it.define(),ynt=it.define(),vnt={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>on.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ex=it.define();function xnt(n){return[Vue(),ex.of({...vnt,...n})]}const KY=it.define({combine:n=>n.some(e=>e)});function Vue(n){return[bnt]}const bnt=Wr.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ex).map(e=>new YY(n,e)),this.fixed=!n.state.facet(KY);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,r=n.view.viewport,i=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(KY)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let r=on.iter(this.view.state.facet(tS),this.view.viewport.from),i=[],o=this.gutters.map(s=>new wnt(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let a=!0;for(let l of s.type)if(l.type==Li.Text&&a){hN(r,i,l.from);for(let c of o)c.line(this.view,l,i);a=!1}else if(l.widget)for(let c of o)c.widget(this.view,l)}else if(s.type==Li.Text){hN(r,i,s.from);for(let a of o)a.line(this.view,s,i)}else if(s.widget)for(let a of o)a.widget(this.view,s);for(let s of o)s.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(ex),r=n.state.facet(ex),i=n.docChanged||n.heightChanged||n.viewportChanged||!on.eq(n.startState.facet(tS),n.state.facet(tS),n.view.viewport.from,n.view.viewport.to);if(e==r)for(let o of this.gutters)o.update(n)&&(i=!0);else{i=!0;let o=[];for(let s of r){let a=e.indexOf(s);a<0?o.push(new YY(this.view,s)):(this.gutters[a].update(n),o.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),o.indexOf(s)<0&&s.destroy();for(let s of o)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=o}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>rt.scrollMargins.of(e=>{let r=e.plugin(n);if(!r||r.gutters.length==0||!r.fixed)return null;let i=r.dom.offsetWidth*e.scaleX,o=r.domAfter?r.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==$n.LTR?{left:i,right:o}:{right:i,left:o}})});function GY(n){return Array.isArray(n)?n:[n]}function hN(n,e,r){for(;n.value&&n.from<=r;)n.from==r&&e.push(n.value),n.next()}class wnt{constructor(e,r,i){this.gutter=e,this.height=i,this.i=0,this.cursor=on.iter(e.markers,r.from)}addElement(e,r,i){let{gutter:o}=this,s=(r.top-this.height)/e.scaleY,a=r.height/e.scaleY;if(this.i==o.elements.length){let l=new Wue(e,a,s,i);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,a,s,i);this.height=r.bottom,this.i++}line(e,r,i){let o=[];hN(this.cursor,o,r.from),i.length&&(o=o.concat(i));let s=this.gutter.config.lineMarker(e,r,o);s&&o.unshift(s);let a=this.gutter;o.length==0&&!a.config.renderEmptyElements||this.addElement(e,r,o)}widget(e,r){let i=this.gutter.config.widgetMarker(e,r.widget,r),o=i?[i]:null;for(let s of e.state.facet(ynt)){let a=s(e,r.widget,r);a&&(o||(o=[])).push(a)}o&&this.addElement(e,r,o)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class YY{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in r.domEventHandlers)this.dom.addEventListener(i,o=>{let s=o.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let c=s.getBoundingClientRect();a=(c.top+c.bottom)/2}else a=o.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);r.domEventHandlers[i](e,l,o)&&o.preventDefault()});this.markers=GY(r.markers(e)),r.initialSpacer&&(this.spacer=new Wue(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=GY(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let i=e.view.viewport;return!on.eq(this.markers,r,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Wue{constructor(e,r,i,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,i,o)}update(e,r,i,o){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),knt(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,r){let i="cm-gutterElement",o=this.dom.firstChild;for(let s=0,a=0;;){let l=a,c=s<r.length?r[s++]:null,u=!1;if(c){let d=c.elementClass;d&&(i+=" "+d);for(let h=a;h<this.markers.length;h++)if(this.markers[h].compare(c)){l=h,u=!0;break}}else l=this.markers.length;for(;a<l;){let d=this.markers[a++];if(d.toDOM){d.destroy(o);let h=o.nextSibling;o.remove(),o=h}}if(!c)break;c.toDOM&&(u?o=o.nextSibling:this.dom.insertBefore(c.toDOM(e),o)),u&&a++}this.dom.className=i,this.markers=r}destroy(){this.setMarkers(null,[])}}function knt(n,e){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].compare(e[r]))return!1;return!0}const Snt=it.define(),Cnt=it.define(),I0=it.define({combine(n){return Bc(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let i=Object.assign({},e);for(let o in r){let s=i[o],a=r[o];i[o]=s?(l,c,u)=>s(l,c,u)||a(l,c,u):a}return i}})}});class hP extends sd{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function fP(n,e){return n.state.facet(I0).formatNumber(e,n.state)}const _nt=ex.compute([I0],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Snt)},lineMarker(e,r,i){return i.some(o=>o.toDOM)?null:new hP(fP(e,e.state.doc.lineAt(r.from).number))},widgetMarker:(e,r,i)=>{for(let o of e.state.facet(Cnt)){let s=o(e,r,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(I0)!=e.state.facet(I0),initialSpacer(e){return new hP(fP(e,ZY(e.state.doc.lines)))},updateSpacer(e,r){let i=fP(r.view,ZY(r.view.state.doc.lines));return i==e.number?e:new hP(i)},domEventHandlers:n.facet(I0).domEventHandlers,side:"before"}));function Ant(n={}){return[I0.of(n),Vue(),_nt]}function ZY(n){let e=9;for(;e<n;)e=e*10+9;return e}const Tnt=new class extends sd{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Pnt=tS.compute(["selection"],n=>{let e=[],r=-1;for(let i of n.selection.ranges){let o=n.doc.lineAt(i.head).from;o>r&&(r=o,e.push(Tnt.range(o)))}return on.of(e)});function Mnt(){return Pnt}let Ent=0;class fa{constructor(e,r,i,o){this.name=e,this.set=r,this.base=i,this.modified=o,this.id=Ent++}toString(){let{name:e}=this;for(let r of this.modified)r.name&&(e=`${r.name}(${e})`);return e}static define(e,r){let i=typeof e=="string"?e:"?";if(e instanceof fa&&(r=e),r?.base)throw new Error("Can not derive from a modified tag");let o=new fa(i,[],null,[]);if(o.set.push(o),r)for(let s of r.set)o.set.push(s);return o}static defineModifier(e){let r=new yC(e);return i=>i.modified.indexOf(r)>-1?i:yC.get(i.base||i,i.modified.concat(r).sort((o,s)=>o.id-s.id))}}let Nnt=0;class yC{constructor(e){this.name=e,this.instances=[],this.id=Nnt++}static get(e,r){if(!r.length)return e;let i=r[0].instances.find(l=>l.base==e&&jnt(r,l.modified));if(i)return i;let o=[],s=new fa(e.name,o,e,r);for(let l of r)l.instances.push(s);let a=Ont(r);for(let l of e.set)if(!l.modified.length)for(let c of a)o.push(yC.get(l,c));return s}}function jnt(n,e){return n.length==e.length&&n.every((r,i)=>r==e[i])}function Ont(n){let e=[[]];for(let r=0;r<n.length;r++)for(let i=0,o=e.length;i<o;i++)e.push(e[i].concat(n[r]));return e.sort((r,i)=>i.length-r.length)}function Dnt(n){let e=Object.create(null);for(let r in n){let i=n[r];Array.isArray(i)||(i=[i]);for(let o of r.split(" "))if(o){let s=[],a=2,l=o;for(let h=0;;){if(l=="..."&&h>0&&h+3==o.length){a=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+o);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==o.length)break;let m=o[h++];if(h==o.length&&m=="!"){a=0;break}if(m!="/")throw new RangeError("Invalid path: "+o);l=o.slice(h)}let c=s.length-1,u=s[c];if(!u)throw new RangeError("Invalid path: "+o);let d=new cb(i,a,c>0?s.slice(0,c):null);e[u]=d.sort(e[u])}}return Uue.add(e)}const Uue=new nn({combine(n,e){let r,i,o;for(;n||e;){if(!n||e&&n.depth>=e.depth?(o=e,e=e.next):(o=n,n=n.next),r&&r.mode==o.mode&&!o.context&&!r.context)continue;let s=new cb(o.tags,o.mode,o.context);r?r.next=s:i=s,r=s}return i}});class cb{constructor(e,r,i,o){this.tags=e,this.mode=r,this.context=i,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}cb.empty=new cb([],2,null);function Kue(n,e){let r=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))r[s.tag.id]=s.class;else for(let a of s.tag)r[a.id]=s.class;let{scope:i,all:o=null}=e||{};return{style:s=>{let a=o;for(let l of s)for(let c of l.set){let u=r[c.id];if(u){a=a?a+" "+u:u;break}}return a},scope:i}}function Int(n,e){let r=null;for(let i of n){let o=i.style(e);o&&(r=r?r+" "+o:o)}return r}function Rnt(n,e,r,i=0,o=n.length){let s=new Lnt(i,Array.isArray(e)?e:[e],r);s.highlightRange(n.cursor(),i,o,"",s.highlighters),s.flush(o)}class Lnt{constructor(e,r,i){this.at=e,this.highlighters=r,this.span=i,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,i,o,s){let{type:a,from:l,to:c}=e;if(l>=i||c<=r)return;a.isTop&&(s=this.highlighters.filter(m=>!m.scope||m.scope(a)));let u=o,d=znt(e)||cb.empty,h=Int(s,d.tags);if(h&&(u&&(u+=" "),u+=h,d.mode==1&&(o+=(o?" ":"")+h)),this.startSpan(Math.max(r,l),u),d.opaque)return;let f=e.tree&&e.tree.prop(nn.mounted);if(f&&f.overlay){let m=e.node.enter(f.overlay[0].from+l,1),v=this.highlighters.filter(b=>!b.scope||b.scope(f.tree.type)),x=e.firstChild();for(let b=0,w=l;;b++){let S=b<f.overlay.length?f.overlay[b]:null,_=S?S.from+l:c,P=Math.max(r,w),A=Math.min(i,_);if(P<A&&x)for(;e.from<A&&(this.highlightRange(e,P,A,o,s),this.startSpan(Math.min(A,e.to),u),!(e.to>=_||!e.nextSibling())););if(!S||_>i)break;w=S.to+l,w>r&&(this.highlightRange(m.cursor(),Math.max(r,S.from+l),Math.min(i,w),"",v),this.startSpan(Math.min(i,w),u))}x&&e.parent()}else if(e.firstChild()){f&&(o="");do if(!(e.to<=r)){if(e.from>=i)break;this.highlightRange(e,r,i,o,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function znt(n){let e=n.type.prop(Uue);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const et=fa.define,Ok=et(),gh=et(),XY=et(gh),JY=et(gh),yh=et(),Dk=et(yh),pP=et(yh),Jl=et(),Hf=et(Jl),Gl=et(),Yl=et(),fN=et(),xy=et(fN),Ik=et(),je={comment:Ok,lineComment:et(Ok),blockComment:et(Ok),docComment:et(Ok),name:gh,variableName:et(gh),typeName:XY,tagName:et(XY),propertyName:JY,attributeName:et(JY),className:et(gh),labelName:et(gh),namespace:et(gh),macroName:et(gh),literal:yh,string:Dk,docString:et(Dk),character:et(Dk),attributeValue:et(Dk),number:pP,integer:et(pP),float:et(pP),bool:et(yh),regexp:et(yh),escape:et(yh),color:et(yh),url:et(yh),keyword:Gl,self:et(Gl),null:et(Gl),atom:et(Gl),unit:et(Gl),modifier:et(Gl),operatorKeyword:et(Gl),controlKeyword:et(Gl),definitionKeyword:et(Gl),moduleKeyword:et(Gl),operator:Yl,derefOperator:et(Yl),arithmeticOperator:et(Yl),logicOperator:et(Yl),bitwiseOperator:et(Yl),compareOperator:et(Yl),updateOperator:et(Yl),definitionOperator:et(Yl),typeOperator:et(Yl),controlOperator:et(Yl),punctuation:fN,separator:et(fN),bracket:xy,angleBracket:et(xy),squareBracket:et(xy),paren:et(xy),brace:et(xy),content:Jl,heading:Hf,heading1:et(Hf),heading2:et(Hf),heading3:et(Hf),heading4:et(Hf),heading5:et(Hf),heading6:et(Hf),contentSeparator:et(Jl),list:et(Jl),quote:et(Jl),emphasis:et(Jl),strong:et(Jl),link:et(Jl),monospace:et(Jl),strikethrough:et(Jl),inserted:et(),deleted:et(),changed:et(),invalid:et(),meta:Ik,documentMeta:et(Ik),annotation:et(Ik),processingInstruction:et(Ik),definition:fa.defineModifier("definition"),constant:fa.defineModifier("constant"),function:fa.defineModifier("function"),standard:fa.defineModifier("standard"),local:fa.defineModifier("local"),special:fa.defineModifier("special")};for(let n in je){let e=je[n];e instanceof fa&&(e.name=n)}Kue([{tag:je.link,class:"tok-link"},{tag:je.heading,class:"tok-heading"},{tag:je.emphasis,class:"tok-emphasis"},{tag:je.strong,class:"tok-strong"},{tag:je.keyword,class:"tok-keyword"},{tag:je.atom,class:"tok-atom"},{tag:je.bool,class:"tok-bool"},{tag:je.url,class:"tok-url"},{tag:je.labelName,class:"tok-labelName"},{tag:je.inserted,class:"tok-inserted"},{tag:je.deleted,class:"tok-deleted"},{tag:je.literal,class:"tok-literal"},{tag:je.string,class:"tok-string"},{tag:je.number,class:"tok-number"},{tag:[je.regexp,je.escape,je.special(je.string)],class:"tok-string2"},{tag:je.variableName,class:"tok-variableName"},{tag:je.local(je.variableName),class:"tok-variableName tok-local"},{tag:je.definition(je.variableName),class:"tok-variableName tok-definition"},{tag:je.special(je.variableName),class:"tok-variableName2"},{tag:je.definition(je.propertyName),class:"tok-propertyName tok-definition"},{tag:je.typeName,class:"tok-typeName"},{tag:je.namespace,class:"tok-namespace"},{tag:je.className,class:"tok-className"},{tag:je.macroName,class:"tok-macroName"},{tag:je.propertyName,class:"tok-propertyName"},{tag:je.operator,class:"tok-operator"},{tag:je.comment,class:"tok-comment"},{tag:je.meta,class:"tok-meta"},{tag:je.invalid,class:"tok-invalid"},{tag:je.punctuation,class:"tok-punctuation"}]);var mP;const bp=new nn;function Gue(n){return it.define({combine:n?e=>e.concat(n):void 0})}const Fnt=new nn;class wa{constructor(e,r,i=[],o=""){this.data=e,this.name=o,un.prototype.hasOwnProperty("tree")||Object.defineProperty(un.prototype,"tree",{get(){return Fi(this)}}),this.parser=r,this.extension=[Jh.of(this),un.languageData.of((s,a,l)=>{let c=QY(s,a,l),u=c.type.prop(bp);if(!u)return[];let d=s.facet(u),h=c.type.prop(Fnt);if(h){let f=c.resolve(a-c.from,l);for(let m of h)if(m.test(f,s)){let v=s.facet(m.facet);return m.type=="replace"?v:v.concat(d)}}return d})].concat(i)}isActiveAt(e,r,i=-1){return QY(e,r,i).type.prop(bp)==this.data}findRegions(e){let r=e.facet(Jh);if(r?.data==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let i=[],o=(s,a)=>{if(s.prop(bp)==this.data){i.push({from:a,to:a+s.length});return}let l=s.prop(nn.mounted);if(l){if(l.tree.prop(bp)==this.data){if(l.overlay)for(let c of l.overlay)i.push({from:c.from+a,to:c.to+a});else i.push({from:a,to:a+s.length});return}else if(l.overlay){let c=i.length;if(o(l.tree,l.overlay[0].from+a),i.length>c)return}}for(let c=0;c<s.children.length;c++){let u=s.children[c];u instanceof Fn&&o(u,s.positions[c]+a)}};return o(Fi(e),0),i}get allowsNesting(){return!0}}wa.setState=Ht.define();function QY(n,e,r){let i=n.facet(Jh),o=Fi(n).topNode;if(!i||i.allowsNesting)for(let s=o;s;s=s.enter(e,r,Rn.ExcludeBuffers|Rn.EnterBracketed))s.type.isTop&&(o=s);return o}class pN extends wa{constructor(e,r,i){super(e,r,[],i),this.parser=r}static define(e){let r=Gue(e.languageData);return new pN(r,e.parser.configure({props:[bp.add(i=>i.isTop?r:void 0)]}),e.name)}configure(e,r){return new pN(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Fi(n){let e=n.field(wa.state,!1);return e?e.tree:Fn.empty}class $nt{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let i=this.cursorPos-this.string.length;return e<i||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-i,r-i)}}let by=null;class Ag{constructor(e,r,i=[],o,s,a,l,c){this.parser=e,this.state=r,this.fragments=i,this.tree=o,this.treeLen=s,this.viewport=a,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,r,i){return new Ag(e,r,[],Fn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new $nt(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Fn.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(Wu.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(Wu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=by;by=this;try{return e()}finally{by=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=eZ(e,r.from,r.to);return e}changes(e,r){let{fragments:i,tree:o,treeLen:s,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((u,d,h,f)=>c.push({fromA:u,toA:d,fromB:h,toB:f})),i=Wu.applyChanges(i,c),o=Fn.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let d=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);d<h&&l.push({from:d,to:h})}}}return new Ag(this.parser,r,i,o,s,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:o,to:s}=this.skipped[i];o<e.to&&s>e.from&&(this.fragments=eZ(this.fragments,o,s),this.skipped.splice(i--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends bce{createParse(r,i,o){let s=o[0].from,a=o[o.length-1].to;return{parsedPos:s,advance(){let c=by;if(c){for(let u of o)c.tempSkipped.push(u);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new Fn(Oo.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return by}}function eZ(n,e,r){return Wu.applyChanges(n,[{fromA:e,toA:r,fromB:e,toB:r}])}class Tg{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,i)||r.takeTree(),new Tg(r)}static init(e){let r=Math.min(3e3,e.doc.length),i=Ag.create(e.facet(Jh).parser,e,{from:0,to:r});return i.work(20,r)||i.takeTree(),new Tg(i)}}wa.state=ki.define({create:Tg.init,update(n,e){for(let r of e.effects)if(r.is(wa.setState))return r.value;return e.startState.facet(Jh)!=e.state.facet(Jh)?Tg.init(e.state):n.apply(e)}});let Yue=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Yue=n=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const gP=typeof navigator<"u"&&(!((mP=navigator.scheduling)===null||mP===void 0)&&mP.isInputPending)?()=>navigator.scheduling.isInputPending():null,Bnt=Wr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(wa.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(wa.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=Yue(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:o}}=this.view,s=i.field(wa.state);if(s.tree==s.context.tree&&s.context.isDone(o+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!gP?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<o&&i.doc.length>o+1e3,c=s.context.work(()=>gP&&gP()||Date.now()>a,o+(l?0:1e5));this.chunkBudget-=Date.now()-r,(c||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:wa.setState.of(new Tg(s.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>as(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Jh=it.define({combine(n){return n.length?n[0]:null},enables:n=>[wa.state,Bnt,rt.contentAttributes.compute([n],e=>{let r=e.facet(n);return r&&r.name?{"data-language":r.name}:{}})]});class Hnt{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}class Ce{constructor(e,r,i,o,s,a=void 0){this.name=e,this.alias=r,this.extensions=i,this.filename=o,this.loadFunc=s,this.support=a,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:r,support:i}=e;if(!r){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");r=()=>Promise.resolve(i)}return new Ce(e.name,(e.alias||[]).concat(e.name).map(o=>o.toLowerCase()),e.extensions||[],e.filename,r,i)}static matchFilename(e,r){for(let o of e)if(o.filename&&o.filename.test(r))return o;let i=/\.([^.]+)$/.exec(r);if(i){for(let o of e)if(o.extensions.indexOf(i[1])>-1)return o}return null}static matchLanguageName(e,r,i=!0){r=r.toLowerCase();for(let o of e)if(o.alias.some(s=>s==r))return o;if(i)for(let o of e)for(let s of o.alias){let a=r.indexOf(s);if(a>-1&&(s.length>2||!/\w/.test(r[a-1])&&!/\w/.test(r[a+s.length])))return o}return null}}const qnt=it.define(),j6=it.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function hm(n){let e=n.facet(j6);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function ub(n,e){let r="",i=n.tabSize,o=n.facet(j6)[0];if(o=="	"){for(;e>=i;)r+="	",e-=i;o=" "}for(let s=0;s<e;s++)r+=o;return r}function II(n,e){n instanceof un&&(n=new O6(n));for(let i of n.state.facet(qnt)){let o=i(n,e);if(o!==void 0)return o}let r=Fi(n.state);return r.length>=e?Vnt(n,r,e):null}class O6{constructor(e,r={}){this.state=e,this.options=r,this.unit=hm(e)}lineAt(e,r=1){let i=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:s}=this.options;return o!=null&&o>=i.from&&o<=i.to?s&&o==e?{text:"",from:e}:(r<0?o<e:o<=e)?{text:i.text.slice(o-i.from),from:o}:{text:i.text.slice(0,o-i.from),from:i.from}:i}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:o}=this.lineAt(e,r);return i.slice(e-o,Math.min(i.length,e+100-o))}column(e,r=1){let{text:i,from:o}=this.lineAt(e,r),s=this.countColumn(i,e-o),a=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return a>-1&&(s+=a-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,r=e.length){return e1(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:i,from:o}=this.lineAt(e,r),s=this.options.overrideIndentation;if(s){let a=s(o);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Zue=new nn;function Vnt(n,e,r){let i=e.resolveStack(r),o=e.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(o!=i.node){let s=[];for(let a=o;a&&!(a.from<i.node.from||a.to>i.node.to||a.from==i.node.from&&a.type==i.node.type);a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)i={node:s[a],next:i}}return Xue(i,n,r)}function Xue(n,e,r){for(let i=n;i;i=i.next){let o=Unt(i.node);if(o)return o(RI.create(e,r,i))}return 0}function Wnt(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Unt(n){let e=n.type.prop(Zue);if(e)return e;let r=n.firstChild,i;if(r&&(i=r.type.prop(nn.closedBy))){let o=n.lastChild,s=o&&i.indexOf(o.name)>-1;return a=>Jue(a,!0,1,void 0,s&&!Wnt(a)?o.from:void 0)}return n.parent==null?Knt:null}function Knt(){return 0}class RI extends O6{constructor(e,r,i){super(e.state,e.options),this.base=e,this.pos=r,this.context=i}get node(){return this.context.node}static create(e,r,i){return new RI(e,r,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(r.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Gnt(i,e))break;r=this.state.doc.lineAt(i.from)}return this.lineIndent(r.from)}continue(){return Xue(this.context.next,this.base,this.pos)}}function Gnt(n,e){for(let r=e;r;r=r.parent)if(n==r)return!0;return!1}function Ynt(n){let e=n.node,r=e.childAfter(e.from),i=e.lastChild;if(!r)return null;let o=n.options.simulateBreak,s=n.state.doc.lineAt(r.from),a=o==null||o<=s.from?s.to:Math.min(s.to,o);for(let l=r.to;;){let c=e.childAfter(l);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=a)return null;let u=/^ */.exec(s.text.slice(r.to-s.from))[0].length;return{from:r.from,to:r.to+u}}l=c.to}}function Zbt({closing:n,align:e=!0,units:r=1}){return i=>Jue(i,e,r,n)}function Jue(n,e,r,i,o){let s=n.textAfter,a=s.match(/^\s*/)[0].length,l=i&&s.slice(a,a+i.length)==i||o==n.pos+a,c=e?Ynt(n):null;return c?l?n.column(c.from):n.column(c.to):n.baseIndent+(l?0:n.unit*r)}const Xbt=n=>n.baseIndent;function Jbt({except:n,units:e=1}={}){return r=>{let i=n&&n.test(r.textAfter);return r.baseIndent+(i?0:e*r.unit)}}const Znt=200;function Xnt(){return un.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let r=n.newDoc,{head:i}=n.newSelection.main,o=r.lineAt(i);if(i>o.from+Znt)return n;let s=r.sliceString(o.from,i);if(!e.some(u=>u.test(s)))return n;let{state:a}=n,l=-1,c=[];for(let{head:u}of a.selection.ranges){let d=a.doc.lineAt(u);if(d.from==l)continue;l=d.from;let h=II(a,d.from);if(h==null)continue;let f=/^\s*/.exec(d.text)[0],m=ub(a,h);f!=m&&c.push({from:d.from,to:d.from+f.length,insert:m})}return c.length?[n,{changes:c,sequential:!0}]:n})}const Jnt=it.define(),Qnt=new nn;function Qbt(n){let e=n.firstChild,r=n.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?n.to:r.from}:null}function ert(n,e,r){let i=Fi(n);if(i.length<r)return null;let o=i.resolveStack(r,1),s=null;for(let a=o;a;a=a.next){let l=a.node;if(l.to<=r||l.from>r)continue;if(s&&l.from<e)break;let c=l.type.prop(Qnt);if(c&&(l.to<i.length-50||i.length==n.doc.length||!trt(l))){let u=c(l,n);u&&u.from<=r&&u.from>=e&&u.to>r&&(s=u)}}return s}function trt(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function vC(n,e,r){for(let i of n.facet(Jnt)){let o=i(n,e,r);if(o)return o}return ert(n,e,r)}function Que(n,e){let r=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return r>=i?void 0:{from:r,to:i}}const D6=Ht.define({map:Que}),hw=Ht.define({map:Que});function ede(n){let e=[];for(let{head:r}of n.state.selection.ranges)e.some(i=>i.from<=r&&i.to>=r)||e.push(n.lineBlockAt(r));return e}const fm=ki.define({create(){return Et.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((r,i)=>n=tZ(n,r,i)),n=n.map(e.changes);for(let r of e.effects)if(r.is(D6)&&!nrt(n,r.value.from,r.value.to)){let{preparePlaceholder:i}=e.state.facet(rde),o=i?Et.replace({widget:new crt(i(e.state,r.value))}):nZ;n=n.update({add:[o.range(r.value.from,r.value.to)]})}else r.is(hw)&&(n=n.update({filter:(i,o)=>r.value.from!=i||r.value.to!=o,filterFrom:r.value.from,filterTo:r.value.to}));return e.selection&&(n=tZ(n,e.selection.main.head)),n},provide:n=>rt.decorations.from(n),toJSON(n,e){let r=[];return n.between(0,e.doc.length,(i,o)=>{r.push(i,o)}),r},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<n.length;){let i=n[r++],o=n[r++];if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(nZ.range(i,o))}return Et.set(e,!0)}});function tZ(n,e,r=e){let i=!1;return n.between(e,r,(o,s)=>{o<r&&s>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:r,filter:(o,s)=>o>=r||s<=e}):n}function xC(n,e,r){var i;let o=null;return(i=n.field(fm,!1))===null||i===void 0||i.between(e,r,(s,a)=>{(!o||o.from>s)&&(o={from:s,to:a})}),o}function nrt(n,e,r){let i=!1;return n.between(e,e,(o,s)=>{o==e&&s==r&&(i=!0)}),i}function tde(n,e){return n.field(fm,!1)?e:e.concat(Ht.appendConfig.of(ide()))}const rrt=n=>{for(let e of ede(n)){let r=vC(n.state,e.from,e.to);if(r)return n.dispatch({effects:tde(n.state,[D6.of(r),nde(n,r)])}),!0}return!1},irt=n=>{if(!n.state.field(fm,!1))return!1;let e=[];for(let r of ede(n)){let i=xC(n.state,r.from,r.to);i&&e.push(hw.of(i),nde(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function nde(n,e,r=!0){let i=n.state.doc.lineAt(e.from).number,o=n.state.doc.lineAt(e.to).number;return rt.announce.of(`${n.state.phrase(r?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${o}.`)}const ort=n=>{let{state:e}=n,r=[];for(let i=0;i<e.doc.length;){let o=n.lineBlockAt(i),s=vC(e,o.from,o.to);s&&r.push(D6.of(s)),i=(s?n.lineBlockAt(s.to):o).to+1}return r.length&&n.dispatch({effects:tde(n.state,r)}),!!r.length},srt=n=>{let e=n.state.field(fm,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,n.state.doc.length,(i,o)=>{r.push(hw.of({from:i,to:o}))}),n.dispatch({effects:r}),!0},art=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:rrt},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:irt},{key:"Ctrl-Alt-[",run:ort},{key:"Ctrl-Alt-]",run:srt}],lrt={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},rde=it.define({combine(n){return Bc(n,lrt)}});function ide(n){return[fm,hrt]}function ode(n,e){let{state:r}=n,i=r.facet(rde),o=a=>{let l=n.lineBlockAt(n.posAtDOM(a.target)),c=xC(n.state,l.from,l.to);c&&n.dispatch({effects:hw.of(c)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,o,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",r.phrase("folded code")),s.title=r.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=o,s}const nZ=Et.replace({widget:new class extends Hc{toDOM(n){return ode(n,null)}}});class crt extends Hc{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ode(e,this.value)}}const urt={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class yP extends sd{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function drt(n={}){let e={...urt,...n},r=new yP(e,!0),i=new yP(e,!1),o=Wr.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Jh)!=a.state.facet(Jh)||a.startState.field(fm,!1)!=a.state.field(fm,!1)||Fi(a.startState)!=Fi(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new id;for(let c of a.viewportLineBlocks){let u=xC(a.state,c.from,c.to)?i:vC(a.state,c.from,c.to)?r:null;u&&l.add(c.from,c.from,u)}return l.finish()}}),{domEventHandlers:s}=e;return[o,xnt({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(o))===null||l===void 0?void 0:l.markers)||on.empty},initialSpacer(){return new yP(e,!1)},domEventHandlers:{...s,click:(a,l,c)=>{if(s.click&&s.click(a,l,c))return!0;let u=xC(a.state,l.from,l.to);if(u)return a.dispatch({effects:hw.of(u)}),!0;let d=vC(a.state,l.from,l.to);return d?(a.dispatch({effects:D6.of(d)}),!0):!1}}}),ide()]}const hrt=rt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class fw{constructor(e,r){this.specs=e;let i;function o(l){let c=Zh.newName();return(i||(i=Object.create(null)))["."+c]=l,c}const s=typeof r.all=="string"?r.all:r.all?o(r.all):void 0,a=r.scope;this.scope=a instanceof wa?l=>l.prop(bp)==a.data:a?l=>l==a:void 0,this.style=Kue(e.map(l=>({tag:l.tag,class:l.class||o(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Zh(i):null,this.themeType=r.themeType}static define(e,r){return new fw(e,r||{})}}const mN=it.define(),sde=it.define({combine(n){return n.length?[n[0]]:null}});function vP(n){let e=n.facet(mN);return e.length?e:n.facet(sde)}function ade(n,e){let r=[prt],i;return n instanceof fw&&(n.module&&r.push(rt.styleModule.of(n.module)),i=n.themeType),e?.fallback?r.push(sde.of(n)):i?r.push(mN.computeN([rt.darkTheme],o=>o.facet(rt.darkTheme)==(i=="dark")?[n]:[])):r.push(mN.of(n)),r}class frt{constructor(e){this.markCache=Object.create(null),this.tree=Fi(e.state),this.decorations=this.buildDeco(e,vP(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=Fi(e.state),i=vP(e.state),o=i!=vP(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);r.length<s.to&&!o&&r.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(r!=this.tree||e.viewportChanged||o)&&(this.tree=r,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,r){if(!r||!this.tree.length)return Et.none;let i=new id;for(let{from:o,to:s}of e.visibleRanges)Rnt(this.tree,r,(a,l,c)=>{i.add(a,l,this.markCache[c]||(this.markCache[c]=Et.mark({class:c})))},o,s);return i.finish()}}const prt=hf.high(Wr.fromClass(frt,{decorations:n=>n.decorations})),mrt=fw.define([{tag:je.meta,color:"#404740"},{tag:je.link,textDecoration:"underline"},{tag:je.heading,textDecoration:"underline",fontWeight:"bold"},{tag:je.emphasis,fontStyle:"italic"},{tag:je.strong,fontWeight:"bold"},{tag:je.strikethrough,textDecoration:"line-through"},{tag:je.keyword,color:"#708"},{tag:[je.atom,je.bool,je.url,je.contentSeparator,je.labelName],color:"#219"},{tag:[je.literal,je.inserted],color:"#164"},{tag:[je.string,je.deleted],color:"#a11"},{tag:[je.regexp,je.escape,je.special(je.string)],color:"#e40"},{tag:je.definition(je.variableName),color:"#00f"},{tag:je.local(je.variableName),color:"#30a"},{tag:[je.typeName,je.namespace],color:"#085"},{tag:je.className,color:"#167"},{tag:[je.special(je.variableName),je.macroName],color:"#256"},{tag:je.definition(je.propertyName),color:"#00c"},{tag:je.comment,color:"#940"},{tag:je.invalid,color:"#f00"}]),grt=rt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),lde=1e4,cde="()[]{}",ude=it.define({combine(n){return Bc(n,{afterCursor:!0,brackets:cde,maxScanDistance:lde,renderMatch:xrt})}}),yrt=Et.mark({class:"cm-matchingBracket"}),vrt=Et.mark({class:"cm-nonmatchingBracket"});function xrt(n){let e=[],r=n.matched?yrt:vrt;return e.push(r.range(n.start.from,n.start.to)),n.end&&e.push(r.range(n.end.from,n.end.to)),e}const brt=ki.define({create(){return Et.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let r=[],i=e.state.facet(ude);for(let o of e.state.selection.ranges){if(!o.empty)continue;let s=vc(e.state,o.head,-1,i)||o.head>0&&vc(e.state,o.head-1,1,i)||i.afterCursor&&(vc(e.state,o.head,1,i)||o.head<e.state.doc.length&&vc(e.state,o.head+1,-1,i));s&&(r=r.concat(i.renderMatch(s,e.state)))}return Et.set(r,!0)},provide:n=>rt.decorations.from(n)}),wrt=[brt,grt];function krt(n={}){return[ude.of(n),wrt]}const Srt=new nn;function gN(n,e,r){let i=n.prop(e<0?nn.openedBy:nn.closedBy);if(i)return i;if(n.name.length==1){let o=r.indexOf(n.name);if(o>-1&&o%2==(e<0?1:0))return[r[o+e]]}return null}function yN(n){let e=n.type.prop(Srt);return e?e(n.node):n}function vc(n,e,r,i={}){let o=i.maxScanDistance||lde,s=i.brackets||cde,a=Fi(n),l=a.resolveInner(e,r);for(let c=l;c;c=c.parent){let u=gN(c.type,r,s);if(u&&c.from<c.to){let d=yN(c);if(d&&(r>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return Crt(n,e,r,c,d,u,s)}}return _rt(n,e,r,a,l.type,o,s)}function Crt(n,e,r,i,o,s,a){let l=i.parent,c={from:o.from,to:o.to},u=0,d=l?.cursor();if(d&&(r<0?d.childBefore(i.from):d.childAfter(i.to)))do if(r<0?d.to<=i.from:d.from>=i.to){if(u==0&&s.indexOf(d.type.name)>-1&&d.from<d.to){let h=yN(d);return{start:c,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(gN(d.type,r,a))u++;else if(gN(d.type,-r,a)){if(u==0){let h=yN(d);return{start:c,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(r<0?d.prevSibling():d.nextSibling());return{start:c,matched:!1}}function _rt(n,e,r,i,o,s,a){let l=r<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=a.indexOf(l);if(c<0||c%2==0!=r>0)return null;let u={from:r<0?e-1:e,to:r>0?e+1:e},d=n.doc.iterRange(e,r>0?n.doc.length:0),h=0;for(let f=0;!d.next().done&&f<=s;){let m=d.value;r<0&&(f+=m.length);let v=e+f*r;for(let x=r>0?0:m.length-1,b=r>0?m.length:-1;x!=b;x+=r){let w=a.indexOf(m[x]);if(!(w<0||i.resolveInner(v+x,1).type!=o))if(w%2==0==r>0)h++;else{if(h==1)return{start:u,end:{from:v+x,to:v+x+1},matched:w>>1==c>>1};h--}}r>0&&(f+=m.length)}return d.done?{start:u,matched:!1}:null}function rZ(n,e,r,i=0,o=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let s=o;for(let a=i;a<e;a++)n.charCodeAt(a)==9?s+=r-s%r:s++;return s}class dde{constructor(e,r,i,o){this.string=e,this.tabSize=r,this.indentUnit=i,this.overrideIndent=o,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let r=this.string.charAt(this.pos),i;if(typeof e=="string"?i=r==e:i=r&&(e instanceof RegExp?e.test(r):e(r)),i)return++this.pos,r}eatWhile(e){let r=this.pos;for(;this.eat(e););return this.pos>r}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let r=this.string.indexOf(e,this.pos);if(r>-1)return this.pos=r,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=rZ(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:rZ(this.string,null,this.tabSize)}match(e,r,i){if(typeof e=="string"){let o=a=>i?a.toLowerCase():a,s=this.string.substr(this.pos,e.length);return o(s)==o(e)?(r!==!1&&(this.pos+=e.length),!0):null}else{let o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&r!==!1&&(this.pos+=o[0].length),o)}}current(){return this.string.slice(this.start,this.pos)}}function Art(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||Trt,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||FI,mergeTokens:n.mergeTokens!==!1}}function Trt(n){if(typeof n!="object")return n;let e={};for(let r in n){let i=n[r];e[r]=i instanceof Array?i.slice():i}return e}const iZ=new WeakMap;class LI extends wa{constructor(e){let r=Gue(e.languageData),i=Art(e),o,s=new class extends bce{createParse(a,l,c){return new Mrt(o,a,l,c)}};super(r,s,[],e.name),this.topNode=jrt(r,this),o=this,this.streamParser=i,this.stateAfter=new nn({perNode:!0}),this.tokenTable=e.tokenTable?new mde(i.tokenTable):Nrt}static define(e){return new LI(e)}getIndent(e){let r,{overrideIndentation:i}=e.options;i&&(r=iZ.get(e.state),r!=null&&r<e.pos-1e4&&(r=void 0));let o=zI(this,e.node.tree,e.node.from,e.node.from,r??e.pos),s,a;if(o?(a=o.state,s=o.pos+1):(a=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let c=e.state.doc.lineAt(s),u=Math.min(e.pos,c.to);if(c.length){let d=i?i(c.from):-1,h=new dde(c.text,e.state.tabSize,e.unit,d<0?void 0:d);for(;h.pos<u-c.from;)fde(this.streamParser.token,h,a)}else this.streamParser.blankLine(a,e.unit);if(u==e.pos)break;s=c.to+1}let l=e.lineAt(e.pos);return i&&r==null&&iZ.set(e.state,l.from),this.streamParser.indent(a,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function zI(n,e,r,i,o){let s=r>=i&&r+e.length<=o&&e.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:r+e.length};for(let a=e.children.length-1;a>=0;a--){let l=e.children[a],c=r+e.positions[a],u=l instanceof Fn&&c<o&&zI(n,l,c,i,o);if(u)return u}return null}function hde(n,e,r,i,o){if(o&&r<=0&&i>=e.length)return e;!o&&r==0&&e.type==n.topNode&&(o=!0);for(let s=e.children.length-1;s>=0;s--){let a=e.positions[s],l=e.children[s],c;if(a<i&&l instanceof Fn){if(!(c=hde(n,l,r-a,i-a,o)))break;return o?new Fn(e.type,e.children.slice(0,s).concat(c),e.positions.slice(0,s+1),a+c.length):c}}return null}function Prt(n,e,r,i,o){for(let s of e){let a=s.from+(s.openStart?25:0),l=s.to-(s.openEnd?25:0),c=a<=r&&l>r&&zI(n,s.tree,0-s.offset,r,l),u;if(c&&c.pos<=i&&(u=hde(n,s.tree,r+s.offset,c.pos+s.offset,!1)))return{state:c.state,tree:u}}return{state:n.streamParser.startState(o?hm(o):4),tree:Fn.empty}}class Mrt{constructor(e,r,i,o){this.lang=e,this.input=r,this.fragments=i,this.ranges=o,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=o[o.length-1].to;let s=Ag.get(),a=o[0].from,{state:l,tree:c}=Prt(e,i,a,this.to,s?.state);this.state=l,this.parsedPos=this.chunkStart=a+c.length;for(let u=0;u<c.children.length;u++)this.chunks.push(c.children[u]),this.chunkPos.push(c.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&o.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(hm(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ag.get(),r=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(r,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=r?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,r),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let r=this.input.chunk(e);if(this.input.lineChunks)r==`
`&&(r="");else{let i=r.indexOf(`
`);i>-1&&(r=r.slice(0,i))}return e+r.length<=this.to?r:r.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,r=this.lineAfter(e),i=e+r.length;for(let o=this.rangeIndex;;){let s=this.ranges[o].to;if(s>=i||(r=r.slice(0,s-(i-r.length)),o++,o==this.ranges.length))break;let a=this.ranges[o].from,l=this.lineAfter(a);r+=l,i=a+l.length}return{line:r,end:i}}skipGapsTo(e,r,i){for(;;){let o=this.ranges[this.rangeIndex].to,s=e+r;if(i>0?o>s:o>=s)break;let a=this.ranges[++this.rangeIndex].from;r+=a-o}return r}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,r,i,o){let s=4;if(this.ranges.length>1){o=this.skipGapsTo(r,o,1),r+=o;let l=this.chunk.length;o=this.skipGapsTo(i,o,-1),i+=o,s+=this.chunk.length-l}let a=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&a>=0&&this.chunk[a]==e&&this.chunk[a+2]==r?this.chunk[a+2]=i:this.chunk.push(e,r,i,s),o}parseLine(e){let{line:r,end:i}=this.nextLine(),o=0,{streamParser:s}=this.lang,a=new dde(r,e?e.state.tabSize:4,e?hm(e.state):2);if(a.eol())s.blankLine(this.state,a.indentUnit);else for(;!a.eol();){let l=fde(s.token,a,this.state);if(l&&(o=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+a.start,this.parsedPos+a.pos,o)),a.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Fn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ert,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Fn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Fn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function fde(n,e,r){e.start=e.pos;for(let i=0;i<10;i++){let o=n(e,r);if(e.pos>e.start)return o}throw new Error("Stream parser failed to advance stream.")}const FI=Object.create(null),db=[Oo.none],Ert=new hI(db),oZ=[],sZ=Object.create(null),pde=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pde[n]=gde(FI,e);class mde{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),pde)}resolve(e){return e?this.table[e]||(this.table[e]=gde(this.extra,e)):0}}const Nrt=new mde(FI);function xP(n,e){oZ.indexOf(n)>-1||(oZ.push(n),console.warn(e))}function gde(n,e){let r=[];for(let l of e.split(" ")){let c=[];for(let u of l.split(".")){let d=n[u]||je[u];d?typeof d=="function"?c.length?c=c.map(d):xP(u,`Modifier ${u} used at start of tag`):c.length?xP(u,`Tag ${u} used as modifier`):c=Array.isArray(d)?d:[d]:xP(u,`Unknown highlighting tag ${u}`)}for(let u of c)r.push(u)}if(!r.length)return 0;let i=e.replace(/ /g,"_"),o=i+" "+r.map(l=>l.id),s=sZ[o];if(s)return s.id;let a=sZ[o]=Oo.define({id:db.length,name:i,props:[Dnt({[i]:r})]});return db.push(a),a.id}function jrt(n,e){let r=Oo.define({id:db.length,name:"Document",props:[bp.add(()=>n),Zue.add(()=>i=>e.getIndent(i))],top:!0});return db.push(r),r}$n.RTL,$n.LTR;function Re(n){return new Hnt(LI.define(n))}function ih(n){return _e(()=>import("./index-DHsgoODe.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.sql({dialect:e[n]}))}const Ort=[Ce.of({name:"C",extensions:["c","h","ino"],load(){return _e(()=>import("./index-Cz9f_FiJ.js"),__vite__mapDeps([2,1]),import.meta.url).then(n=>n.cpp())}}),Ce.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return _e(()=>import("./index-Cz9f_FiJ.js"),__vite__mapDeps([2,1]),import.meta.url).then(n=>n.cpp())}}),Ce.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return ih("Cassandra")}}),Ce.of({name:"CSS",extensions:["css"],load(){return _e(()=>import("./index-nGS5OfXi.js"),__vite__mapDeps([3,1]),import.meta.url).then(n=>n.css())}}),Ce.of({name:"Go",extensions:["go"],load(){return _e(()=>import("./index-C2rqtGAT.js"),__vite__mapDeps([4,1]),import.meta.url).then(n=>n.go())}}),Ce.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return _e(()=>import("./index-YGlbzJ-E.js"),__vite__mapDeps([5,1,3,6]),import.meta.url).then(n=>n.html())}}),Ce.of({name:"Java",extensions:["java"],load(){return _e(()=>import("./index-Rz7Fc2yB.js"),__vite__mapDeps([7,1]),import.meta.url).then(n=>n.java())}}),Ce.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return _e(()=>import("./index-DDBdpbcw.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript())}}),Ce.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load(){return _e(()=>import("./index-7T-kSdKA.js"),__vite__mapDeps([8,5,1,3,6]),import.meta.url).then(n=>n.jinja())}}),Ce.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return _e(()=>import("./index-B92fcfR5.js"),__vite__mapDeps([9,1]),import.meta.url).then(n=>n.json())}}),Ce.of({name:"JSX",extensions:["jsx"],load(){return _e(()=>import("./index-DDBdpbcw.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript({jsx:!0}))}}),Ce.of({name:"LESS",extensions:["less"],load(){return _e(()=>import("./index-meqCNPAc.js"),__vite__mapDeps([10,3,1]),import.meta.url).then(n=>n.less())}}),Ce.of({name:"Liquid",extensions:["liquid"],load(){return _e(()=>import("./index-xzEkjeFd.js"),__vite__mapDeps([11,5,1,3,6]),import.meta.url).then(n=>n.liquid())}}),Ce.of({name:"MariaDB SQL",load(){return ih("MariaSQL")}}),Ce.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return _e(()=>import("./index-iZQ0uvtM.js"),__vite__mapDeps([12,5,1,3,6]),import.meta.url).then(n=>n.markdown())}}),Ce.of({name:"MS SQL",load(){return ih("MSSQL")}}),Ce.of({name:"MySQL",load(){return ih("MySQL")}}),Ce.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return _e(()=>import("./index-D9AVU4TJ.js"),__vite__mapDeps([13,1,5,3,6]),import.meta.url).then(n=>n.php())}}),Ce.of({name:"PLSQL",extensions:["pls"],load(){return ih("PLSQL")}}),Ce.of({name:"PostgreSQL",load(){return ih("PostgreSQL")}}),Ce.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return _e(()=>import("./index-QUA0BMfw.js"),__vite__mapDeps([14,1]),import.meta.url).then(n=>n.python())}}),Ce.of({name:"Rust",extensions:["rs"],load(){return _e(()=>import("./index-Dq3ztgvg.js"),__vite__mapDeps([15,1]),import.meta.url).then(n=>n.rust())}}),Ce.of({name:"Sass",extensions:["sass"],load(){return _e(()=>import("./index-DuakhLYG.js"),__vite__mapDeps([16,1,3]),import.meta.url).then(n=>n.sass({indented:!0}))}}),Ce.of({name:"SCSS",extensions:["scss"],load(){return _e(()=>import("./index-DuakhLYG.js"),__vite__mapDeps([16,1,3]),import.meta.url).then(n=>n.sass())}}),Ce.of({name:"SQL",extensions:["sql"],load(){return ih("StandardSQL")}}),Ce.of({name:"SQLite",load(){return ih("SQLite")}}),Ce.of({name:"TSX",extensions:["tsx"],load(){return _e(()=>import("./index-DDBdpbcw.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript({jsx:!0,typescript:!0}))}}),Ce.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return _e(()=>import("./index-DDBdpbcw.js"),__vite__mapDeps([6,1]),import.meta.url).then(n=>n.javascript({typescript:!0}))}}),Ce.of({name:"WebAssembly",extensions:["wat","wast"],load(){return _e(()=>import("./index-xVTCmqNr.js"),__vite__mapDeps([17,1]),import.meta.url).then(n=>n.wast())}}),Ce.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return _e(()=>import("./index-DVPnvN3T.js"),__vite__mapDeps([18,1]),import.meta.url).then(n=>n.xml())}}),Ce.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return _e(()=>import("./index-Cu4sRNhv.js"),__vite__mapDeps([19,1]),import.meta.url).then(n=>n.yaml())}}),Ce.of({name:"APL",extensions:["dyalog","apl"],load(){return _e(()=>import("./apl-B4CMkyY2.js"),[],import.meta.url).then(n=>Re(n.apl))}}),Ce.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return _e(()=>import("./asciiarmor-Df11BRmG.js"),[],import.meta.url).then(n=>Re(n.asciiArmor))}}),Ce.of({name:"ASN.1",extensions:["asn","asn1"],load(){return _e(()=>import("./asn1-EdZsLKOL.js"),[],import.meta.url).then(n=>Re(n.asn1({})))}}),Ce.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return _e(()=>import("./asterisk-B-8jnY81.js"),[],import.meta.url).then(n=>Re(n.asterisk))}}),Ce.of({name:"Brainfuck",extensions:["b","bf"],load(){return _e(()=>import("./brainfuck-C4LP7Hcl.js"),[],import.meta.url).then(n=>Re(n.brainfuck))}}),Ce.of({name:"Cobol",extensions:["cob","cpy"],load(){return _e(()=>import("./cobol-CWcv1MsR.js"),[],import.meta.url).then(n=>Re(n.cobol))}}),Ce.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.csharp))}}),Ce.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return _e(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(n=>Re(n.clojure))}}),Ce.of({name:"ClojureScript",extensions:["cljs"],load(){return _e(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(n=>Re(n.clojure))}}),Ce.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return _e(()=>import("./css-BnMrqG3P.js"),[],import.meta.url).then(n=>Re(n.gss))}}),Ce.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return _e(()=>import("./cmake-BQqOBYOt.js"),[],import.meta.url).then(n=>Re(n.cmake))}}),Ce.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return _e(()=>import("./coffeescript-S37ZYGWr.js"),[],import.meta.url).then(n=>Re(n.coffeeScript))}}),Ce.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return _e(()=>import("./commonlisp-DBKNyK5s.js"),[],import.meta.url).then(n=>Re(n.commonLisp))}}),Ce.of({name:"Cypher",extensions:["cyp","cypher"],load(){return _e(()=>import("./cypher-C_CwsFkJ.js"),[],import.meta.url).then(n=>Re(n.cypher))}}),Ce.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return _e(()=>import("./python-BuPzkPfP.js"),[],import.meta.url).then(n=>Re(n.cython))}}),Ce.of({name:"Crystal",extensions:["cr"],load(){return _e(()=>import("./crystal-SjHAIU92.js"),[],import.meta.url).then(n=>Re(n.crystal))}}),Ce.of({name:"D",extensions:["d"],load(){return _e(()=>import("./d-pRatUO7H.js"),[],import.meta.url).then(n=>Re(n.d))}}),Ce.of({name:"Dart",extensions:["dart"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.dart))}}),Ce.of({name:"diff",extensions:["diff","patch"],load(){return _e(()=>import("./diff-DbItnlRl.js"),[],import.meta.url).then(n=>Re(n.diff))}}),Ce.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return _e(()=>import("./dockerfile-BKs6k2Af.js"),__vite__mapDeps([20,21]),import.meta.url).then(n=>Re(n.dockerFile))}}),Ce.of({name:"DTD",extensions:["dtd"],load(){return _e(()=>import("./dtd-DF_7sFjM.js"),[],import.meta.url).then(n=>Re(n.dtd))}}),Ce.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return _e(()=>import("./dylan-DwRh75JA.js"),[],import.meta.url).then(n=>Re(n.dylan))}}),Ce.of({name:"EBNF",load(){return _e(()=>import("./ebnf-CDyGwa7X.js"),[],import.meta.url).then(n=>Re(n.ebnf))}}),Ce.of({name:"ECL",extensions:["ecl"],load(){return _e(()=>import("./ecl-Cabwm37j.js"),[],import.meta.url).then(n=>Re(n.ecl))}}),Ce.of({name:"edn",extensions:["edn"],load(){return _e(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(n=>Re(n.clojure))}}),Ce.of({name:"Eiffel",extensions:["e"],load(){return _e(()=>import("./eiffel-CnydiIhH.js"),[],import.meta.url).then(n=>Re(n.eiffel))}}),Ce.of({name:"Elm",extensions:["elm"],load(){return _e(()=>import("./elm-vLlmbW-K.js"),[],import.meta.url).then(n=>Re(n.elm))}}),Ce.of({name:"Erlang",extensions:["erl"],load(){return _e(()=>import("./erlang-BNw1qcRV.js"),[],import.meta.url).then(n=>Re(n.erlang))}}),Ce.of({name:"Esper",load(){return _e(()=>import("./sql-D0XecflT.js"),[],import.meta.url).then(n=>Re(n.esper))}}),Ce.of({name:"Factor",extensions:["factor"],load(){return _e(()=>import("./factor-kuTfRLto.js"),__vite__mapDeps([22,21]),import.meta.url).then(n=>Re(n.factor))}}),Ce.of({name:"FCL",load(){return _e(()=>import("./fcl-Kvtd6kyn.js"),[],import.meta.url).then(n=>Re(n.fcl))}}),Ce.of({name:"Forth",extensions:["forth","fth","4th"],load(){return _e(()=>import("./forth-Ffai-XNe.js"),[],import.meta.url).then(n=>Re(n.forth))}}),Ce.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return _e(()=>import("./fortran-DYz_wnZ1.js"),[],import.meta.url).then(n=>Re(n.fortran))}}),Ce.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return _e(()=>import("./mllike-CXdrOF99.js"),[],import.meta.url).then(n=>Re(n.fSharp))}}),Ce.of({name:"Gas",extensions:["s"],load(){return _e(()=>import("./gas-Bneqetm1.js"),[],import.meta.url).then(n=>Re(n.gas))}}),Ce.of({name:"Gherkin",extensions:["feature"],load(){return _e(()=>import("./gherkin-heZmZLOM.js"),[],import.meta.url).then(n=>Re(n.gherkin))}}),Ce.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return _e(()=>import("./groovy-D9Dt4D0W.js"),[],import.meta.url).then(n=>Re(n.groovy))}}),Ce.of({name:"Haskell",extensions:["hs"],load(){return _e(()=>import("./haskell-Cw1EW3IL.js"),[],import.meta.url).then(n=>Re(n.haskell))}}),Ce.of({name:"Haxe",extensions:["hx"],load(){return _e(()=>import("./haxe-H-WmDvRZ.js"),[],import.meta.url).then(n=>Re(n.haxe))}}),Ce.of({name:"HXML",extensions:["hxml"],load(){return _e(()=>import("./haxe-H-WmDvRZ.js"),[],import.meta.url).then(n=>Re(n.hxml))}}),Ce.of({name:"HTTP",load(){return _e(()=>import("./http-DBlCnlav.js"),[],import.meta.url).then(n=>Re(n.http))}}),Ce.of({name:"IDL",extensions:["pro"],load(){return _e(()=>import("./idl-BEugSyMb.js"),[],import.meta.url).then(n=>Re(n.idl))}}),Ce.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return _e(()=>import("./javascript-iXu5QeM3.js"),[],import.meta.url).then(n=>Re(n.jsonld))}}),Ce.of({name:"Julia",extensions:["jl"],load(){return _e(()=>import("./julia-DuME0IfC.js"),[],import.meta.url).then(n=>Re(n.julia))}}),Ce.of({name:"Kotlin",extensions:["kt","kts"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.kotlin))}}),Ce.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return _e(()=>import("./livescript-BwQOo05w.js"),[],import.meta.url).then(n=>Re(n.liveScript))}}),Ce.of({name:"Lua",extensions:["lua"],load(){return _e(()=>import("./lua-BgMRiT3U.js"),[],import.meta.url).then(n=>Re(n.lua))}}),Ce.of({name:"mIRC",extensions:["mrc"],load(){return _e(()=>import("./mirc-CjQqDB4T.js"),[],import.meta.url).then(n=>Re(n.mirc))}}),Ce.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return _e(()=>import("./mathematica-DTrFuWx2.js"),[],import.meta.url).then(n=>Re(n.mathematica))}}),Ce.of({name:"Modelica",extensions:["mo"],load(){return _e(()=>import("./modelica-Dc1JOy9r.js"),[],import.meta.url).then(n=>Re(n.modelica))}}),Ce.of({name:"MUMPS",extensions:["mps"],load(){return _e(()=>import("./mumps-BT43cFF4.js"),[],import.meta.url).then(n=>Re(n.mumps))}}),Ce.of({name:"Mbox",extensions:["mbox"],load(){return _e(()=>import("./mbox-CNhZ1qSd.js"),[],import.meta.url).then(n=>Re(n.mbox))}}),Ce.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return _e(()=>import("./nginx-DdIZxoE0.js"),[],import.meta.url).then(n=>Re(n.nginx))}}),Ce.of({name:"NSIS",extensions:["nsh","nsi"],load(){return _e(()=>import("./nsis-LdVXkNf5.js"),__vite__mapDeps([23,21]),import.meta.url).then(n=>Re(n.nsis))}}),Ce.of({name:"NTriples",extensions:["nt","nq"],load(){return _e(()=>import("./ntriples-BfvgReVJ.js"),[],import.meta.url).then(n=>Re(n.ntriples))}}),Ce.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.objectiveC))}}),Ce.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.objectiveCpp))}}),Ce.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return _e(()=>import("./mllike-CXdrOF99.js"),[],import.meta.url).then(n=>Re(n.oCaml))}}),Ce.of({name:"Octave",extensions:["m"],load(){return _e(()=>import("./octave-Ck1zUtKM.js"),[],import.meta.url).then(n=>Re(n.octave))}}),Ce.of({name:"Oz",extensions:["oz"],load(){return _e(()=>import("./oz-BzwKVEFT.js"),[],import.meta.url).then(n=>Re(n.oz))}}),Ce.of({name:"Pascal",extensions:["p","pas"],load(){return _e(()=>import("./pascal--L3eBynH.js"),[],import.meta.url).then(n=>Re(n.pascal))}}),Ce.of({name:"Perl",extensions:["pl","pm"],load(){return _e(()=>import("./perl-CdXCOZ3F.js"),[],import.meta.url).then(n=>Re(n.perl))}}),Ce.of({name:"Pig",extensions:["pig"],load(){return _e(()=>import("./pig-CevX1Tat.js"),[],import.meta.url).then(n=>Re(n.pig))}}),Ce.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return _e(()=>import("./powershell-CFHJl5sT.js"),[],import.meta.url).then(n=>Re(n.powerShell))}}),Ce.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return _e(()=>import("./properties-C78fOPTZ.js"),[],import.meta.url).then(n=>Re(n.properties))}}),Ce.of({name:"ProtoBuf",extensions:["proto"],load(){return _e(()=>import("./protobuf-ChK-085T.js"),[],import.meta.url).then(n=>Re(n.protobuf))}}),Ce.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return _e(()=>import("./pug-DeIclll2.js"),__vite__mapDeps([24,25]),import.meta.url).then(n=>Re(n.pug))}}),Ce.of({name:"Puppet",extensions:["pp"],load(){return _e(()=>import("./puppet-DMA9R1ak.js"),[],import.meta.url).then(n=>Re(n.puppet))}}),Ce.of({name:"Q",extensions:["q"],load(){return _e(()=>import("./q-pXgVlZs6.js"),[],import.meta.url).then(n=>Re(n.q))}}),Ce.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return _e(()=>import("./r-B6wPVr8A.js"),[],import.meta.url).then(n=>Re(n.r))}}),Ce.of({name:"RPM Changes",load(){return _e(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(n=>Re(n.rpmChanges))}}),Ce.of({name:"RPM Spec",extensions:["spec"],load(){return _e(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(n=>Re(n.rpmSpec))}}),Ce.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return _e(()=>import("./ruby-B2Rjki9n.js"),[],import.meta.url).then(n=>Re(n.ruby))}}),Ce.of({name:"SAS",extensions:["sas"],load(){return _e(()=>import("./sas-B4kiWyti.js"),[],import.meta.url).then(n=>Re(n.sas))}}),Ce.of({name:"Scala",extensions:["scala"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.scala))}}),Ce.of({name:"Scheme",extensions:["scm","ss"],load(){return _e(()=>import("./scheme-C41bIUwD.js"),[],import.meta.url).then(n=>Re(n.scheme))}}),Ce.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return _e(()=>import("./shell-CjFT_Tl9.js"),[],import.meta.url).then(n=>Re(n.shell))}}),Ce.of({name:"Sieve",extensions:["siv","sieve"],load(){return _e(()=>import("./sieve-C3Gn_uJK.js"),[],import.meta.url).then(n=>Re(n.sieve))}}),Ce.of({name:"Smalltalk",extensions:["st"],load(){return _e(()=>import("./smalltalk-CnHTOXQT.js"),[],import.meta.url).then(n=>Re(n.smalltalk))}}),Ce.of({name:"Solr",load(){return _e(()=>import("./solr-DehyRSwq.js"),[],import.meta.url).then(n=>Re(n.solr))}}),Ce.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return _e(()=>import("./mllike-CXdrOF99.js"),[],import.meta.url).then(n=>Re(n.sml))}}),Ce.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return _e(()=>import("./sparql-DkYu6x3z.js"),[],import.meta.url).then(n=>Re(n.sparql))}}),Ce.of({name:"Spreadsheet",alias:["excel","formula"],load(){return _e(()=>import("./spreadsheet-BCZA_wO0.js"),[],import.meta.url).then(n=>Re(n.spreadsheet))}}),Ce.of({name:"Squirrel",extensions:["nut"],load(){return _e(()=>import("./clike-B9uivgTg.js"),[],import.meta.url).then(n=>Re(n.squirrel))}}),Ce.of({name:"Stylus",extensions:["styl"],load(){return _e(()=>import("./stylus-B533Al4x.js"),[],import.meta.url).then(n=>Re(n.stylus))}}),Ce.of({name:"Swift",extensions:["swift"],load(){return _e(()=>import("./swift-BzpIVaGY.js"),[],import.meta.url).then(n=>Re(n.swift))}}),Ce.of({name:"sTeX",load(){return _e(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(n=>Re(n.stex))}}),Ce.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return _e(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(n=>Re(n.stex))}}),Ce.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return _e(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(n=>Re(n.verilog))}}),Ce.of({name:"Tcl",extensions:["tcl"],load(){return _e(()=>import("./tcl-DVfN8rqt.js"),[],import.meta.url).then(n=>Re(n.tcl))}}),Ce.of({name:"Textile",extensions:["textile"],load(){return _e(()=>import("./textile-CnDTJFAw.js"),[],import.meta.url).then(n=>Re(n.textile))}}),Ce.of({name:"TiddlyWiki",load(){return _e(()=>import("./tiddlywiki-DO-Gjzrf.js"),[],import.meta.url).then(n=>Re(n.tiddlyWiki))}}),Ce.of({name:"Tiki wiki",load(){return _e(()=>import("./tiki-DGYXhP31.js"),[],import.meta.url).then(n=>Re(n.tiki))}}),Ce.of({name:"TOML",extensions:["toml"],load(){return _e(()=>import("./toml-Bm5Em-hy.js"),[],import.meta.url).then(n=>Re(n.toml))}}),Ce.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return _e(()=>import("./troff-wAsdV37c.js"),[],import.meta.url).then(n=>Re(n.troff))}}),Ce.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return _e(()=>import("./ttcn-CfJYG6tj.js"),[],import.meta.url).then(n=>Re(n.ttcn))}}),Ce.of({name:"TTCN_CFG",extensions:["cfg"],load(){return _e(()=>import("./ttcn-cfg-B9xdYoR4.js"),[],import.meta.url).then(n=>Re(n.ttcnCfg))}}),Ce.of({name:"Turtle",extensions:["ttl"],load(){return _e(()=>import("./turtle-B1tBg_DP.js"),[],import.meta.url).then(n=>Re(n.turtle))}}),Ce.of({name:"Web IDL",extensions:["webidl"],load(){return _e(()=>import("./webidl-ZXfAyPTL.js"),[],import.meta.url).then(n=>Re(n.webIDL))}}),Ce.of({name:"VB.NET",extensions:["vb"],load(){return _e(()=>import("./vb-CmGdzxic.js"),[],import.meta.url).then(n=>Re(n.vb))}}),Ce.of({name:"VBScript",extensions:["vbs"],load(){return _e(()=>import("./vbscript-BuJXcnF6.js"),[],import.meta.url).then(n=>Re(n.vbScript))}}),Ce.of({name:"Velocity",extensions:["vtl"],load(){return _e(()=>import("./velocity-D8B20fx6.js"),[],import.meta.url).then(n=>Re(n.velocity))}}),Ce.of({name:"Verilog",extensions:["v"],load(){return _e(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(n=>Re(n.verilog))}}),Ce.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return _e(()=>import("./vhdl-lSbBsy5d.js"),[],import.meta.url).then(n=>Re(n.vhdl))}}),Ce.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load(){return _e(()=>import("./xquery-DzFWVndE.js"),[],import.meta.url).then(n=>Re(n.xQuery))}}),Ce.of({name:"Yacas",extensions:["ys"],load(){return _e(()=>import("./yacas-BJ4BC0dw.js"),[],import.meta.url).then(n=>Re(n.yacas))}}),Ce.of({name:"Z80",extensions:["z80"],load(){return _e(()=>import("./z80-Hz9HOZM7.js"),[],import.meta.url).then(n=>Re(n.z80))}}),Ce.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return _e(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(n=>Re(n.mscgen))}}),Ce.of({name:"X",extensions:["xu"],load(){return _e(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(n=>Re(n.xu))}}),Ce.of({name:"MsGenny",extensions:["msgenny"],load(){return _e(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(n=>Re(n.msgenny))}}),Ce.of({name:"Vue",extensions:["vue"],load(){return _e(()=>import("./index-Bv1EcC7f.js"),__vite__mapDeps([26,5,1,3,6]),import.meta.url).then(n=>n.vue())}}),Ce.of({name:"Angular Template",load(){return _e(()=>import("./index-BzJSCMvL.js"),__vite__mapDeps([27,5,1,3,6]),import.meta.url).then(n=>n.angular())}})],Drt="#e5c07b",aZ="#e06c75",Irt="#56b6c2",Rrt="#ffffff",nS="#abb2bf",vN="#7d8799",Lrt="#61afef",zrt="#98c379",lZ="#d19a66",Frt="#c678dd",$rt="#21252b",cZ="#2c313a",uZ="#282c34",bP="#353a42",Brt="#3E4451",dZ="#528bff",Hrt=rt.theme({"&":{color:nS,backgroundColor:uZ},".cm-content":{caretColor:dZ},".cm-cursor, .cm-dropCursor":{borderLeftColor:dZ},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Brt},".cm-panels":{backgroundColor:$rt,color:nS},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:uZ,color:vN,border:"none"},".cm-activeLineGutter":{backgroundColor:cZ},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:bP},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:bP,borderBottomColor:bP},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:cZ,color:nS}}},{dark:!0}),qrt=fw.define([{tag:je.keyword,color:Frt},{tag:[je.name,je.deleted,je.character,je.propertyName,je.macroName],color:aZ},{tag:[je.function(je.variableName),je.labelName],color:Lrt},{tag:[je.color,je.constant(je.name),je.standard(je.name)],color:lZ},{tag:[je.definition(je.name),je.separator],color:nS},{tag:[je.typeName,je.className,je.number,je.changed,je.annotation,je.modifier,je.self,je.namespace],color:Drt},{tag:[je.operator,je.operatorKeyword,je.url,je.escape,je.regexp,je.link,je.special(je.string)],color:Irt},{tag:[je.meta,je.comment],color:vN},{tag:je.strong,fontWeight:"bold"},{tag:je.emphasis,fontStyle:"italic"},{tag:je.strikethrough,textDecoration:"line-through"},{tag:je.link,color:vN,textDecoration:"underline"},{tag:je.heading,fontWeight:"bold",color:aZ},{tag:[je.atom,je.bool,je.special(je.variableName)],color:lZ},{tag:[je.processingInstruction,je.string,je.inserted],color:zrt},{tag:je.invalid,color:Rrt}]),Vrt=[Hrt,ade(qrt)];let Wrt=n=>crypto.getRandomValues(new Uint8Array(n)),Urt=(n,e,r)=>{let i=(2<<Math.log2(n.length-1))-1,o=-~(1.6*i*e/n.length);return(s=e)=>{let a="";for(;;){let l=r(o),c=o|0;for(;c--;)if(a+=n[l[c]&i]||"",a.length>=s)return a}}},$I=(n,e=21)=>Urt(n,e|0,Wrt);$I("abcedfghicklmn",10);function zt(n,e){const r=OAe(n),i=o=>async()=>{i.key=r,await o.wait($v);const s=e(o);return o.get(ht).create(r,s),i.run=a=>o.get(ht).call(n,a),()=>{o.get(ht).remove(r)}};return i}function so(n){const e=r=>async()=>{await r.wait(Ao);const i=n(r);return r.update(Mx,o=>[...o,i]),e.inputRule=i,()=>{r.update(Mx,o=>o.filter(s=>s!==i))}};return e}function Krt(n){const e=r=>async()=>{await r.wait(Ao);const i=n(r);return r.update(Ox,o=>[...o,i]),e.pasteRule=i,()=>{r.update(Ox,o=>o.filter(s=>s!==i))}};return e}function Grt(n,e){const r=i=>async()=>{const o=e(i);return i.update(Fv,s=>[...s.filter(a=>a[0]!==n),[n,o]]),r.id=n,r.schema=o,()=>{i.update(Fv,s=>s.filter(([a])=>a!==n))}};return r.type=i=>{const o=i.get(vl).marks[n];if(!o)throw k5e(n);return o},r}function BI(n,e){const r=i=>async()=>{const o=e(i);return i.update(zv,s=>[...s.filter(a=>a[0]!==n),[n,o]]),r.id=n,r.schema=o,()=>{i.update(zv,s=>s.filter(([a])=>a!==n))}};return r.type=i=>{const o=i.get(vl).nodes[n];if(!o)throw w5e(n);return o},r}function Kr(n){let e;const r=i=>async()=>(await i.wait(Ao),e=n(i),i.update(Zu,o=>[...o,e]),()=>{i.update(Zu,o=>o.filter(s=>s!==e))});return r.plugin=()=>e,r.key=()=>e.spec.key,r}function yde(n){const e=r=>async()=>{await r.wait(Bv);const i=r.get(JS),o=n(r),s=i.addObjectKeymap(o);return e.keymap=o,()=>{s()}};return e}function pw(n,e){const r=i=>async()=>{await i.wait(Ao);const o=e(i);return n.type(i)instanceof WS?i.update(Nx,s=>[...s,[n.id,o]]):i.update(jx,s=>[...s,[n.id,o]]),r.view=o,r.type=n,()=>{n.type(i)instanceof WS?i.update(Nx,s=>s.filter(a=>a[0]!==n.id)):i.update(jx,s=>s.filter(a=>a[0]!==n.id))}};return r}function En(n,e){const r=rn(n,e),i=o=>(o.inject(r),()=>()=>{o.remove(r)});return i.key=r,i}function Ir(n,e){const r=En(e,n),i=BI(n,s=>s.get(r.key)(s)),o=[r,i];return o.id=i.id,o.node=i,o.type=s=>i.type(s),o.ctx=r,o.key=r.key,o.extendSchema=s=>{const a=s(e);return Ir(n,a)},o}function n1(n,e){const r=En(e,n),i=Grt(n,s=>s.get(r.key)(s)),o=[r,i];return o.id=i.id,o.mark=i,o.type=s=>i.type(s),o.ctx=r,o.key=r.key,o.extendSchema=s=>{const a=s(e);return n1(n,a)},o}function ys(n,e){const r=Object.fromEntries(Object.entries(e).map(([a,{shortcuts:l,priority:c}])=>[a,{shortcuts:l,priority:c}])),i=En(r,`${n}Keymap`),o=yde(a=>{const l=a.get(i.key),c=Object.entries(e).flatMap(([u,{command:d}])=>{const h=l[u],f=[h.shortcuts].flat(),m=h.priority;return f.map(v=>[v,{key:v,onRun:d,priority:m}])});return Object.fromEntries(c)}),s=[i,o];return s.ctx=i,s.shortcuts=o,s.key=i.key,s.keymap=o.keymap,s}const Dl=(n,e=()=>({}))=>En(e,`${n}Attr`),mw=(n,e=()=>({}))=>En(e,`${n}Attr`);function qc(n,e,r){const i=En({},n),o=a=>async()=>{await a.wait(Ep);const c={plugin:e(a),options:a.get(i.key)};return a.update(Ex,u=>[...u,c]),()=>{a.update(Ex,u=>u.filter(d=>d!==c))}},s=[i,o];return s.id=n,s.plugin=o,s.options=i,s}function Yrt(n){return e=>{const r=e.get(fn);return e.get(vl),e.get(q0)(r.state.doc)}}function Zrt(n,e=!1){return r=>{const i=r.get(fn),s=r.get(H0)(n);if(!s)return;if(!e){const{state:d}=i;return i.dispatch(d.tr.replace(0,d.doc.content.size,new Qe(s.content,0,0)))}const a=r.get(vl),l=r.get(N4),c=r.get(Zu),u=Kj.create({schema:a,doc:s,plugins:c,...l});i.updateState(u)}}const bC=Math.min,Rp=Math.max,wC=Math.round,Rk=Math.floor,_c=n=>({x:n,y:n}),Xrt={left:"right",right:"left",bottom:"top",top:"bottom"},Jrt={start:"end",end:"start"};function hZ(n,e,r){return Rp(n,bC(e,r))}function I6(n,e){return typeof n=="function"?n(e):n}function pm(n){return n.split("-")[0]}function R6(n){return n.split("-")[1]}function vde(n){return n==="x"?"y":"x"}function xde(n){return n==="y"?"height":"width"}const Qrt=new Set(["top","bottom"]);function Oh(n){return Qrt.has(pm(n))?"y":"x"}function bde(n){return vde(Oh(n))}function eit(n,e,r){r===void 0&&(r=!1);const i=R6(n),o=bde(n),s=xde(o);let a=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=kC(a)),[a,kC(a)]}function tit(n){const e=kC(n);return[xN(n),e,xN(e)]}function xN(n){return n.replace(/start|end/g,e=>Jrt[e])}const fZ=["left","right"],pZ=["right","left"],nit=["top","bottom"],rit=["bottom","top"];function iit(n,e,r){switch(n){case"top":case"bottom":return r?e?pZ:fZ:e?fZ:pZ;case"left":case"right":return e?nit:rit;default:return[]}}function oit(n,e,r,i){const o=R6(n);let s=iit(pm(n),r==="start",i);return o&&(s=s.map(a=>a+"-"+o),e&&(s=s.concat(s.map(xN)))),s}function kC(n){return n.replace(/left|right|bottom|top/g,e=>Xrt[e])}function sit(n){return{top:0,right:0,bottom:0,left:0,...n}}function ait(n){return typeof n!="number"?sit(n):{top:n,right:n,bottom:n,left:n}}function SC(n){const{x:e,y:r,width:i,height:o}=n;return{width:i,height:o,top:r,left:e,right:e+i,bottom:r+o,x:e,y:r}}function mZ(n,e,r){let{reference:i,floating:o}=n;const s=Oh(e),a=bde(e),l=xde(a),c=pm(e),u=s==="y",d=i.x+i.width/2-o.width/2,h=i.y+i.height/2-o.height/2,f=i[l]/2-o[l]/2;let m;switch(c){case"top":m={x:d,y:i.y-o.height};break;case"bottom":m={x:d,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:h};break;case"left":m={x:i.x-o.width,y:h};break;default:m={x:i.x,y:i.y}}switch(R6(e)){case"start":m[a]-=f*(r&&u?-1:1);break;case"end":m[a]+=f*(r&&u?-1:1);break}return m}const lit=async(n,e,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:a}=r,l=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:o}),{x:d,y:h}=mZ(u,i,c),f=i,m={},v=0;for(let x=0;x<l.length;x++){const{name:b,fn:w}=l[x],{x:S,y:_,data:P,reset:A}=await w({x:d,y:h,initialPlacement:i,placement:f,strategy:o,middlewareData:m,rects:u,platform:a,elements:{reference:n,floating:e}});d=S??d,h=_??h,m={...m,[b]:{...m[b],...P}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(f=A.placement),A.rects&&(u=A.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:o}):A.rects),{x:d,y:h}=mZ(u,f,c)),x=-1)}return{x:d,y:h,placement:f,strategy:o,middlewareData:m}};async function wde(n,e){var r;e===void 0&&(e={});const{x:i,y:o,platform:s,rects:a,elements:l,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=I6(e,n),v=ait(m),b=l[f?h==="floating"?"reference":"floating":h],w=SC(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(b)))==null||r?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),S=h==="floating"?{x:i,y:o,width:a.floating.width,height:a.floating.height}:a.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),P=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},A=SC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:_,strategy:c}):S);return{top:(w.top-A.top+v.top)/P.y,bottom:(A.bottom-w.bottom+v.bottom)/P.y,left:(w.left-A.left+v.left)/P.x,right:(A.right-w.right+v.right)/P.x}}const cit=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var r,i;const{placement:o,middlewareData:s,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=I6(n,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const w=pm(o),S=Oh(l),_=pm(l)===l,P=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=f||(_||!x?[kC(l)]:tit(l)),T=v!=="none";!f&&T&&A.push(...oit(l,x,v,P));const E=[l,...A],L=await wde(e,b),$=[];let z=((i=s.flip)==null?void 0:i.overflows)||[];if(d&&$.push(L[w]),h){const I=eit(o,a,P);$.push(L[I[0]],L[I[1]])}if(z=[...z,{placement:o,overflows:$}],!$.every(I=>I<=0)){var B,D;const I=(((B=s.flip)==null?void 0:B.index)||0)+1,U=E[I];if(U&&(!(h==="alignment"?S!==Oh(U):!1)||z.every(J=>Oh(J.placement)===S?J.overflows[0]>0:!0)))return{data:{index:I,overflows:z},reset:{placement:U}};let Z=(D=z.filter(te=>te.overflows[0]<=0).sort((te,J)=>te.overflows[1]-J.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(m){case"bestFit":{var Y;const te=(Y=z.filter(J=>{if(T){const oe=Oh(J.placement);return oe===S||oe==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(oe=>oe>0).reduce((oe,q)=>oe+q,0)]).sort((J,oe)=>J[1]-oe[1])[0])==null?void 0:Y[0];te&&(Z=te);break}case"initialPlacement":Z=l;break}if(o!==Z)return{reset:{placement:Z}}}return{}}}},uit=new Set(["left","top"]);async function dit(n,e){const{placement:r,platform:i,elements:o}=n,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),a=pm(r),l=R6(r),c=Oh(r)==="y",u=uit.has(a)?-1:1,d=s&&c?-1:1,h=I6(e,n);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const hit=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var r,i;const{x:o,y:s,placement:a,middlewareData:l}=e,c=await dit(e,n);return a===((r=l.offset)==null?void 0:r.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:o+c.x,y:s+c.y,data:{...c,placement:a}}}}},fit=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:r,y:i,placement:o}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:w,y:S}=b;return{x:w,y:S}}},...c}=I6(n,e),u={x:r,y:i},d=await wde(e,c),h=Oh(pm(o)),f=vde(h);let m=u[f],v=u[h];if(s){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",S=m+d[b],_=m-d[w];m=hZ(S,m,_)}if(a){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",S=v+d[b],_=v-d[w];v=hZ(S,v,_)}const x=l.fn({...e,[f]:m,[h]:v});return{...x,data:{x:x.x-r,y:x.y-i,enabled:{[f]:s,[h]:a}}}}}};function L6(){return typeof window<"u"}function r1(n){return kde(n)?(n.nodeName||"").toLowerCase():"#document"}function qs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Vc(n){var e;return(e=(kde(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function kde(n){return L6()?n instanceof Node||n instanceof qs(n).Node:!1}function Pl(n){return L6()?n instanceof Element||n instanceof qs(n).Element:!1}function Dc(n){return L6()?n instanceof HTMLElement||n instanceof qs(n).HTMLElement:!1}function gZ(n){return!L6()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof qs(n).ShadowRoot}const pit=new Set(["inline","contents"]);function gw(n){const{overflow:e,overflowX:r,overflowY:i,display:o}=Ml(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!pit.has(o)}const mit=new Set(["table","td","th"]);function git(n){return mit.has(r1(n))}const yit=[":popover-open",":modal"];function z6(n){return yit.some(e=>{try{return n.matches(e)}catch{return!1}})}const vit=["transform","translate","scale","rotate","perspective"],xit=["transform","translate","scale","rotate","perspective","filter"],bit=["paint","layout","strict","content"];function HI(n){const e=qI(),r=Pl(n)?Ml(n):n;return vit.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||xit.some(i=>(r.willChange||"").includes(i))||bit.some(i=>(r.contain||"").includes(i))}function wit(n){let e=Qh(n);for(;Dc(e)&&!Pg(e);){if(HI(e))return e;if(z6(e))return null;e=Qh(e)}return null}function qI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kit=new Set(["html","body","#document"]);function Pg(n){return kit.has(r1(n))}function Ml(n){return qs(n).getComputedStyle(n)}function F6(n){return Pl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Qh(n){if(r1(n)==="html")return n;const e=n.assignedSlot||n.parentNode||gZ(n)&&n.host||Vc(n);return gZ(e)?e.host:e}function Sde(n){const e=Qh(n);return Pg(e)?n.ownerDocument?n.ownerDocument.body:n.body:Dc(e)&&gw(e)?e:Sde(e)}function hb(n,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);const o=Sde(n),s=o===((i=n.ownerDocument)==null?void 0:i.body),a=qs(o);if(s){const l=bN(a);return e.concat(a,a.visualViewport||[],gw(o)?o:[],l&&r?hb(l):[])}return e.concat(o,hb(o,[],r))}function bN(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Cde(n){const e=Ml(n);let r=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=Dc(n),s=o?n.offsetWidth:r,a=o?n.offsetHeight:i,l=wC(r)!==s||wC(i)!==a;return l&&(r=s,i=a),{width:r,height:i,$:l}}function VI(n){return Pl(n)?n:n.contextElement}function J0(n){const e=VI(n);if(!Dc(e))return _c(1);const r=e.getBoundingClientRect(),{width:i,height:o,$:s}=Cde(e);let a=(s?wC(r.width):r.width)/i,l=(s?wC(r.height):r.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Sit=_c(0);function _de(n){const e=qs(n);return!qI()||!e.visualViewport?Sit:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Cit(n,e,r){return e===void 0&&(e=!1),!r||e&&r!==qs(n)?!1:e}function mm(n,e,r,i){e===void 0&&(e=!1),r===void 0&&(r=!1);const o=n.getBoundingClientRect(),s=VI(n);let a=_c(1);e&&(i?Pl(i)&&(a=J0(i)):a=J0(n));const l=Cit(s,r,i)?_de(s):_c(0);let c=(o.left+l.x)/a.x,u=(o.top+l.y)/a.y,d=o.width/a.x,h=o.height/a.y;if(s){const f=qs(s),m=i&&Pl(i)?qs(i):i;let v=f,x=bN(v);for(;x&&i&&m!==v;){const b=J0(x),w=x.getBoundingClientRect(),S=Ml(x),_=w.left+(x.clientLeft+parseFloat(S.paddingLeft))*b.x,P=w.top+(x.clientTop+parseFloat(S.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=_,u+=P,v=qs(x),x=bN(v)}}return SC({width:d,height:h,x:c,y:u})}function $6(n,e){const r=F6(n).scrollLeft;return e?e.left+r:mm(Vc(n)).left+r}function Ade(n,e){const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-$6(n,r),o=r.top+e.scrollTop;return{x:i,y:o}}function _it(n){let{elements:e,rect:r,offsetParent:i,strategy:o}=n;const s=o==="fixed",a=Vc(i),l=e?z6(e.floating):!1;if(i===a||l&&s)return r;let c={scrollLeft:0,scrollTop:0},u=_c(1);const d=_c(0),h=Dc(i);if((h||!h&&!s)&&((r1(i)!=="body"||gw(a))&&(c=F6(i)),Dc(i))){const m=mm(i);u=J0(i),d.x=m.x+i.clientLeft,d.y=m.y+i.clientTop}const f=a&&!h&&!s?Ade(a,c):_c(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function Ait(n){return Array.from(n.getClientRects())}function Tit(n){const e=Vc(n),r=F6(n),i=n.ownerDocument.body,o=Rp(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Rp(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+$6(n);const l=-r.scrollTop;return Ml(i).direction==="rtl"&&(a+=Rp(e.clientWidth,i.clientWidth)-o),{width:o,height:s,x:a,y:l}}const yZ=25;function Pit(n,e){const r=qs(n),i=Vc(n),o=r.visualViewport;let s=i.clientWidth,a=i.clientHeight,l=0,c=0;if(o){s=o.width,a=o.height;const d=qI();(!d||d&&e==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}const u=$6(i);if(u<=0){const d=i.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,v=Math.abs(i.clientWidth-h.clientWidth-m);v<=yZ&&(s-=v)}else u<=yZ&&(s+=u);return{width:s,height:a,x:l,y:c}}const Mit=new Set(["absolute","fixed"]);function Eit(n,e){const r=mm(n,!0,e==="fixed"),i=r.top+n.clientTop,o=r.left+n.clientLeft,s=Dc(n)?J0(n):_c(1),a=n.clientWidth*s.x,l=n.clientHeight*s.y,c=o*s.x,u=i*s.y;return{width:a,height:l,x:c,y:u}}function vZ(n,e,r){let i;if(e==="viewport")i=Pit(n,r);else if(e==="document")i=Tit(Vc(n));else if(Pl(e))i=Eit(e,r);else{const o=_de(n);i={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return SC(i)}function Tde(n,e){const r=Qh(n);return r===e||!Pl(r)||Pg(r)?!1:Ml(r).position==="fixed"||Tde(r,e)}function Nit(n,e){const r=e.get(n);if(r)return r;let i=hb(n,[],!1).filter(l=>Pl(l)&&r1(l)!=="body"),o=null;const s=Ml(n).position==="fixed";let a=s?Qh(n):n;for(;Pl(a)&&!Pg(a);){const l=Ml(a),c=HI(a);!c&&l.position==="fixed"&&(o=null),(s?!c&&!o:!c&&l.position==="static"&&!!o&&Mit.has(o.position)||gw(a)&&!c&&Tde(n,a))?i=i.filter(d=>d!==a):o=l,a=Qh(a)}return e.set(n,i),i}function jit(n){let{element:e,boundary:r,rootBoundary:i,strategy:o}=n;const a=[...r==="clippingAncestors"?z6(e)?[]:Nit(e,this._c):[].concat(r),i],l=a[0],c=a.reduce((u,d)=>{const h=vZ(e,d,o);return u.top=Rp(h.top,u.top),u.right=bC(h.right,u.right),u.bottom=bC(h.bottom,u.bottom),u.left=Rp(h.left,u.left),u},vZ(e,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Oit(n){const{width:e,height:r}=Cde(n);return{width:e,height:r}}function Dit(n,e,r){const i=Dc(e),o=Vc(e),s=r==="fixed",a=mm(n,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=_c(0);function u(){c.x=$6(o)}if(i||!i&&!s)if((r1(e)!=="body"||gw(o))&&(l=F6(e)),i){const m=mm(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else o&&u();s&&!i&&o&&u();const d=o&&!i&&!s?Ade(o,l):_c(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function wP(n){return Ml(n).position==="static"}function xZ(n,e){if(!Dc(n)||Ml(n).position==="fixed")return null;if(e)return e(n);let r=n.offsetParent;return Vc(n)===r&&(r=r.ownerDocument.body),r}function Pde(n,e){const r=qs(n);if(z6(n))return r;if(!Dc(n)){let o=Qh(n);for(;o&&!Pg(o);){if(Pl(o)&&!wP(o))return o;o=Qh(o)}return r}let i=xZ(n,e);for(;i&&git(i)&&wP(i);)i=xZ(i,e);return i&&Pg(i)&&wP(i)&&!HI(i)?r:i||wit(n)||r}const Iit=async function(n){const e=this.getOffsetParent||Pde,r=this.getDimensions,i=await r(n.floating);return{reference:Dit(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Rit(n){return Ml(n).direction==="rtl"}const Lit={convertOffsetParentRelativeRectToViewportRelativeRect:_it,getDocumentElement:Vc,getClippingRect:jit,getOffsetParent:Pde,getElementRects:Iit,getClientRects:Ait,getDimensions:Oit,getScale:J0,isElement:Pl,isRTL:Rit};function Mde(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function zit(n,e){let r=null,i;const o=Vc(n);function s(){var l;clearTimeout(i),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=n.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const v=Rk(h),x=Rk(o.clientWidth-(d+f)),b=Rk(o.clientHeight-(h+m)),w=Rk(d),_={rootMargin:-v+"px "+-x+"px "+-b+"px "+-w+"px",threshold:Rp(0,bC(1,c))||1};let P=!0;function A(T){const E=T[0].intersectionRatio;if(E!==c){if(!P)return a();E?a(!1,E):i=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!Mde(u,n.getBoundingClientRect())&&a(),P=!1}try{r=new IntersectionObserver(A,{..._,root:o.ownerDocument})}catch{r=new IntersectionObserver(A,_)}r.observe(n)}return a(!0),s}function bZ(n,e,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,u=VI(n),d=o||s?[...u?hb(u):[],...hb(e)]:[];d.forEach(w=>{o&&w.addEventListener("scroll",r,{passive:!0}),s&&w.addEventListener("resize",r)});const h=u&&l?zit(u,r):null;let f=-1,m=null;a&&(m=new ResizeObserver(w=>{let[S]=w;S&&S.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let v,x=c?mm(n):null;c&&b();function b(){const w=mm(n);x&&!Mde(x,w)&&r(),x=w,v=requestAnimationFrame(b)}return r(),()=>{var w;d.forEach(S=>{o&&S.removeEventListener("scroll",r),s&&S.removeEventListener("resize",r)}),h?.(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const gm=hit,Fit=fit,WI=cit,Ic=(n,e,r)=>{const i=new Map,o={platform:Lit,...r},s={...o.platform,_c:i};return lit(n,e,{...o,platform:s})};function yw(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-block",...e}}),n}const $it=n=>!kc(r=>r.type.name==="table")(n),B6=En({filterNodes:$it},"blockConfig");yw(B6,{displayName:"Ctx<blockConfig>"});function Bit(n,e,r){if(!n.dom.parentElement)return null;try{const o=n.posAtCoords({left:e.x,top:e.y})?.inside;if(o==null||o<0)return null;let s=n.state.doc.resolve(o),a=n.state.doc.nodeAt(o),l=n.nodeDOM(o);const c=d=>{const h=s.depth>=1&&s.index(s.depth)===0;if(!(d||h))return;const m=s.before(s.depth);a=n.state.doc.nodeAt(m),l=n.nodeDOM(m),s=n.state.doc.resolve(m),r(s,a)||c(!0)},u=r(s,a);return c(!u),!l||!a?null:{node:a,$pos:s,el:l}}catch{return null}}const wZ=Z2.ie&&Z2.ie_version<15||Z2.ios&&Z2.webkit_version<604,kZ=20;class Hit{constructor(){this.#e=()=>{if(!this.#n)return null;const e=this.#n,r=this.#s;if(r&&Tt.isSelectable(e.node)){const i=Tt.create(r.state.doc,e.$pos.pos);return r.dispatch(r.state.tr.setSelection(i)),r.focus(),this.#r=i,i}return null},this.#r=null,this.#n=null,this.#a=void 0,this.#i=!1,this.#u=()=>{this.#l?.({type:"hide"}),this.#n=null},this.#c=e=>{this.#n=e,this.#l?.({type:"show",active:e})},this.bind=(e,r)=>{this.#t=e,this.#l=r},this.addEvent=e=>{e.addEventListener("mousedown",this.#d),e.addEventListener("mouseup",this.#f),e.addEventListener("dragstart",this.#h),e.addEventListener("dragend",this.#p)},this.removeEvent=e=>{e.removeEventListener("mousedown",this.#d),e.removeEventListener("mouseup",this.#f),e.removeEventListener("dragstart",this.#h),e.removeEventListener("dragend",this.#p)},this.unBind=()=>{this.#l=void 0},this.#d=()=>{this.#a=this.#n?.el.getBoundingClientRect(),this.#e()},this.#f=()=>{if(!this.#i){requestAnimationFrame(()=>{this.#a&&this.#s?.focus()});return}this.#i=!1,this.#r=null},this.#h=e=>{this.#i=!0;const r=this.#s;if(!r)return;r.dom.dataset.dragging="true";const i=this.#r;if(e.dataTransfer&&i){const o=i.content();e.dataTransfer.effectAllowed="copyMove";const{dom:s,text:a}=r.serializeForClipboard(o);e.dataTransfer.clearData(),e.dataTransfer.setData(wZ?"Text":"text/html",s.innerHTML),wZ||e.dataTransfer.setData("text/plain",a);const l=this.#n?.el;l&&e.dataTransfer.setDragImage(l,0,0),r.dragging={slice:o,move:!0}}},this.#p=()=>{this.#s&&this.#m(this.#s)},this.keydownCallback=e=>(this.#u(),this.#i=!1,e.dom.dataset.dragging="false",!1),this.#g=qb((e,r)=>{if(!e.editable)return;const i=e.dom.getBoundingClientRect(),o=i.left+i.width/2;if(!(e.root.elementFromPoint(o,r.clientY)instanceof Element)){this.#u();return}const a=this.#o;if(!a)return;const l=Bit(e,{x:o,y:r.clientY},a);if(!l){this.#u();return}this.#c(l)},200),this.mousemoveCallback=(e,r)=>(e.composing||!e.editable||this.#g(e,r),!1),this.dragoverCallback=(e,r)=>{if(this.#i){const i=this.#s?.dom.parentElement;if(!i)return!1;const o=i.scrollHeight>i.clientHeight,s=i.getBoundingClientRect();if(o){if(i.scrollTop>0&&Math.abs(r.y-s.y)<kZ){const c=i.scrollTop>10?i.scrollTop-10:0;return i.scrollTop=c,!1}const a=Math.round(e.dom.getBoundingClientRect().height);if(Math.round(i.scrollTop+s.height)<a&&Math.abs(r.y-(s.height+s.y))<kZ){const c=i.scrollTop+10;return i.scrollTop=c,!1}}}return!1},this.dragenterCallback=e=>{e.dragging&&(this.#i=!0,e.dom.dataset.dragging="true")},this.dragleaveCallback=(e,r)=>{const i=r.clientX,o=r.clientY;(i<0||o<0||i>window.innerWidth||o>window.innerHeight)&&(this.#n=null,this.#m(e))},this.dropCallback=e=>(this.#m(e),!1),this.dragendCallback=e=>{this.#m(e)},this.#m=e=>{this.#i=!1,e.dom.dataset.dragging="false"}}#t;#e;#r;#n;#a;#i;get#o(){try{return this.#t?.get(B6.key).filterNodes}catch{return}}get#s(){return this.#t?.get(fn)}#l;#u;#c;#d;#f;#h;#p;#g;#m}const UI=En(()=>new Hit,"blockService"),H6=En({},"blockServiceInstance");yw(UI,{displayName:"Ctx<blockService>"});yw(H6,{displayName:"Ctx<blockServiceInstance>"});const q6=En({},"blockSpec");yw(q6,{displayName:"Ctx<blockSpec>"});const KI=Kr(n=>{const e=new lr("MILKDOWN_BLOCK"),i=n.get(UI.key)();n.set(H6.key,i);const o=n.get(q6.key);return new ar({key:e,...o,props:{...o.props,handleDOMEvents:{drop:s=>i.dropCallback(s),pointermove:(s,a)=>i.mousemoveCallback(s,a),keydown:s=>i.keydownCallback(s),dragover:(s,a)=>i.dragoverCallback(s,a),dragleave:(s,a)=>i.dragleaveCallback(s,a),dragenter:s=>i.dragenterCallback(s),dragend:s=>i.dragendCallback(s)}}})});yw(KI,{displayName:"Prose<block>"});class qit{constructor(e){this.#n=null,this.#i=!1,this.update=()=>{requestAnimationFrame(()=>{if(!this.#i)try{this.#d(),this.#i=!0}catch{}})},this.destroy=()=>{this.#r?.unBind(),this.#r?.removeEvent(this.#t),this.#t.remove()},this.show=r=>{const i=r.el,o=this.#e.get(fn).dom,s={ctx:this.#e,active:r,editorDom:o,blockDom:this.#t},a={contextElement:i,getBoundingClientRect:()=>this.#u?this.#u(s):i.getBoundingClientRect()},l=[WI()];if(this.#l){const c=this.#l(s),u=gm(c);l.push(u)}Ic(a,this.#t,{placement:this.#c?this.#c(s):"left",middleware:[...l,...this.#o],...this.#s}).then(({x:c,y:u})=>{Object.assign(this.#t.style,{left:`${c}px`,top:`${u}px`}),this.#t.dataset.show="true"}).catch(console.error)},this.hide=()=>{this.#t.dataset.show="false"},this.#e=e.ctx,this.#t=e.content,this.#l=e.getOffset,this.#u=e.getPosition,this.#c=e.getPlacement,this.#o=e.middleware??[],this.#s=e.floatingUIOptions??{},this.#a=e.root,this.hide()}#t;#e;#r;#n;#a;#i;#o;#s;#l;#u;#c;get active(){return this.#n}#d(){const e=this.#e.get(fn);(this.#a??e.dom.parentElement??document.body).appendChild(this.#t);const i=this.#e.get(H6.key);i.bind(this.#e,o=>{o.type==="hide"?(this.hide(),this.#n=null):o.type==="show"&&(this.show(o.active),this.#n=o.active)}),this.#r=i,this.#r.addEvent(this.#t),this.#t.draggable=!0}}const V6=[q6,B6,UI,H6,KI];V6.key=q6.key;V6.pluginKey=KI.key;function Vit(n,e){return function(r,i){let{$from:o,$to:s,node:a}=r.selection;if(a&&a.isBlock||o.depth<2||!o.sameParent(s))return!1;let l=o.node(-1);if(l.type!=n)return!1;if(o.parent.content.size==0&&o.node(-1).childCount==o.indexAfter(-1)){if(o.depth==3||o.node(-3).type!=n||o.index(-2)!=o.node(-2).childCount-1)return!1;if(i){let h=Ue.empty,f=o.index(-1)?1:o.index(-2)?2:3;for(let w=o.depth-f;w>=o.depth-3;w--)h=Ue.from(o.node(w).copy(h));let m=o.indexAfter(-1)<o.node(-2).childCount?1:o.indexAfter(-2)<o.node(-3).childCount?2:3;h=h.append(Ue.from(n.createAndFill()));let v=o.before(o.depth-(f-1)),x=r.tr.replace(v,o.after(-m),new Qe(h,4-f,0)),b=-1;x.doc.nodesBetween(v,x.doc.content.size,(w,S)=>{if(b>-1)return!1;w.isTextblock&&w.content.size==0&&(b=S+1)}),b>-1&&x.setSelection($t.near(x.doc.resolve(b))),i(x.scrollIntoView())}return!0}let c=s.pos==o.end()?l.contentMatchAt(0).defaultType:null,u=r.tr.delete(o.pos,s.pos),d=c?[null,{type:c}]:void 0;return Dv(u.doc,o.pos,2,d)?(i&&i(u.split(o.pos,2,d).scrollIntoView()),!0):!1}}function Wit(n){return function(e,r){let{$from:i,$to:o}=e.selection,s=i.blockRange(o,a=>a.childCount>0&&a.firstChild.type==n);return s?r?i.node(s.depth-1).type==n?Uit(e,r,n,s):Kit(e,r,s):!0:!1}}function Uit(n,e,r,i){let o=n.tr,s=i.end,a=i.$to.end(i.depth);s<a&&(o.step(new no(s-1,a,s,a,new Qe(Ue.from(r.create(null,i.parent.copy())),1,0),1,!0)),i=new Pee(o.doc.resolve(i.$from.pos),o.doc.resolve(a),i.depth));const l=x3(i);if(l==null)return!1;o.lift(i,l);let c=o.doc.resolve(o.mapping.map(s,-1)-1);return b3(o.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&o.join(c.pos),e(o.scrollIntoView()),!0}function Kit(n,e,r){let i=n.tr,o=r.parent;for(let m=r.end,v=r.endIndex-1,x=r.startIndex;v>x;v--)m-=o.child(v).nodeSize,i.delete(m-1,m+1);let s=i.doc.resolve(r.start),a=s.nodeAfter;if(i.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let l=r.startIndex==0,c=r.endIndex==o.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(l?0:1),d+1,a.content.append(c?Ue.empty:Ue.from(o))))return!1;let h=s.pos,f=h+a.nodeSize;return i.step(new no(h-(l?1:0),f+(c?1:0),h+1,f-1,new Qe((l?Ue.empty:Ue.from(o.copy(Ue.empty))).append(c?Ue.empty:Ue.from(o.copy(Ue.empty))),l?0:1,c?0:1),l?0:1)),e(i.scrollIntoView()),!0}function Git(n){return function(e,r){let{$from:i,$to:o}=e.selection,s=i.blockRange(o,u=>u.childCount>0&&u.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let l=s.parent,c=l.child(a-1);if(c.type!=n)return!1;if(r){let u=c.lastChild&&c.lastChild.type==l.type,d=Ue.from(u?n.create():null),h=new Qe(Ue.from(n.create(null,Ue.from(l.type.create(null,d)))),u?3:1,0),f=s.start,m=s.end;r(e.tr.step(new no(f-(u?3:1),m,f,m,h,1,!0)).scrollIntoView())}return!0}}function Yit(n){const e=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return af(n,"definition",function(i){const o=SZ(i.identifier);o&&!e.get(o)&&e.set(o,i)}),r;function r(i){const o=SZ(i);return e.get(o)}}function SZ(n){return String(n||"").toUpperCase()}function Zit(){return function(n){const e=Yit(n);af(n,function(r,i,o){if(r.type==="definition"&&o!==void 0&&typeof i=="number")return o.children.splice(i,1),[F9,i];if(r.type==="imageReference"||r.type==="linkReference"){const s=e(r.identifier);if(s&&o&&typeof i=="number")return o.children[i]=r.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:r.alt}:{type:"link",url:s.url,title:s.title,children:r.children},[F9,i]}})}}function Ede(n,e){if(!(e.childCount>=1&&e.lastChild?.type.name==="hardbreak")){n.next(e.content);return}const i=[];e.content.forEach((o,s,a)=>{a!==e.childCount-1&&i.push(o)}),n.next(Ue.fromArray(i))}function Oe(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...e}}),n}const GI=mw("emphasis");Oe(GI,{displayName:"Attr<emphasis>",group:"Emphasis"});const Cm=n1("emphasis",n=>({attrs:{marker:{default:n.get(Lv).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",n.get(GI.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,r,i)=>{e.openMark(i,{marker:r.marker}),e.next(r.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,r)=>{e.withMark(r,"emphasis",void 0,{marker:r.attrs.marker})}}}));Oe(Cm.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});Oe(Cm.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const W6=zt("ToggleEmphasis",n=>()=>S3(Cm.type(n)));Oe(W6,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const Nde=so(n=>Ob(/(?:^|[^*])\*([^*]+)\*$/,Cm.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:r})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:r+1}}));Oe(Nde,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const jde=so(n=>Ob(/\b_(?![_\s])(.*?[^_\s])_\b/,Cm.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:r})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:r+1}}));Oe(jde,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const YI=ys("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const e=n.get(ht);return()=>e.call(W6.key)}}});Oe(YI.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});Oe(YI.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const ZI=mw("strong");Oe(ZI,{displayName:"Attr<strong>",group:"Strong"});const i1=n1("strong",n=>({attrs:{marker:{default:n.get(Lv).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",n.get(ZI.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,r,i)=>{e.openMark(i,{marker:r.marker}),e.next(r.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,r)=>{e.withMark(r,"strong",void 0,{marker:r.attrs.marker})}}}));Oe(i1.mark,{displayName:"MarkSchema<strong>",group:"Strong"});Oe(i1.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const U6=zt("ToggleStrong",n=>()=>S3(i1.type(n)));Oe(U6,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const Ode=so(n=>Ob(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),i1.type(n),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));Oe(Ode,{displayName:"InputRule<strong>",group:"Strong"});const XI=ys("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const e=n.get(ht);return()=>e.call(U6.key)}}});Oe(XI.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});Oe(XI.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const JI=mw("inlineCode");Oe(JI,{displayName:"Attr<inlineCode>",group:"InlineCode"});const zu=n1("inlineCode",n=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",n.get(JI.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,r,i)=>{e.openMark(i),e.addText(r.value),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,r,i)=>{e.withMark(r,"inlineCode",i.text||"")}}}));Oe(zu.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});Oe(zu.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const K6=zt("ToggleInlineCode",n=>()=>(e,r)=>{const{selection:i,tr:o}=e;if(i.empty)return!1;const{from:s,to:a}=i;return e.doc.rangeHasMark(s,a,zu.type(n))?(r?.(o.removeMark(s,a,zu.type(n))),!0):(Object.keys(e.schema.marks).filter(u=>u!==zu.type.name).map(u=>e.schema.marks[u]).forEach(u=>{o.removeMark(s,a,u)}),r?.(o.addMark(s,a,zu.type(n).create())),!0)});Oe(K6,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const Dde=so(n=>Ob(/(?:`)([^`]+)(?:`)$/,zu.type(n)));Oe(Dde,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const QI=ys("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const e=n.get(ht);return()=>e.call(K6.key)}}});Oe(QI.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});Oe(QI.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const eR=mw("link");Oe(eR,{displayName:"Attr<link>",group:"Link"});const bl=n1("link",n=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Nl(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...n.get(eR.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,r,i)=>{const o=r.url,s=r.title;e.openMark(i,{href:o,title:s}),e.next(r.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,r)=>{e.withMark(r,"link",void 0,{title:r.attrs.title,url:r.attrs.href})}}}));Oe(bl.mark,{displayName:"MarkSchema<link>",group:"Link"});const Ide=zt("ToggleLink",n=>(e={})=>S3(bl.type(n),e));Oe(Ide,{displayName:"Command<toggleLinkCommand>",group:"Link"});const Rde=zt("UpdateLink",n=>(e={})=>(r,i)=>{if(!i)return!1;let o,s=-1;const{selection:a}=r,{from:l,to:c}=a;if(r.doc.nodesBetween(l,l===c?c+1:c,(v,x)=>{if(bl.type(n).isInSet(v.marks))return o=v,s=x,!1}),!o)return!1;const u=o.marks.find(({type:v})=>v===bl.type(n));if(!u)return!1;const d=s,h=s+o.nodeSize,{tr:f}=r,m=bl.type(n).create({...u.attrs,...e});return m?(i(f.removeMark(d,h,u).addMark(d,h,m).setSelection(new xt(f.selection.$anchor)).scrollIntoView()),!0):!1});Oe(Rde,{displayName:"Command<updateLinkCommand>",group:"Link"});const Lde=BI("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,e,r)=>{n.injectRoot(e,r)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,e)=>{n.openNode("root"),n.next(e.content)}}}));Oe(Lde,{displayName:"NodeSchema<doc>",group:"Doc"});function Xit(n){return zj(n,e=>e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes(e.value?.trim()),(e,r)=>{if(!r.length)return;const i=r[r.length-1];if(!i)return;const o=i.children.indexOf(e);o!==-1&&i.children.splice(o,1)},!0)}const G6=qc("remark-preserve-empty-line",()=>()=>Xit);Oe(G6.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});Oe(G6.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const tR=Dl("paragraph");Oe(tR,{displayName:"Attr<paragraph>",group:"Paragraph"});const Il=Ir("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",n.get(tR.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,r,i)=>{e.openNode(i),r.children?e.next(r.children):e.addText(r.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,r)=>{const o=n.get(fn).state?.doc.lastChild;e.openNode("paragraph"),(!r.content||r.content.size===0)&&r!==o&&Jit(n)?e.addNode("html",void 0,"<br />"):Ede(e,r),e.closeNode()}}}));function Jit(n){let e=!1;try{n.get(G6.id),e=!0}catch{e=!1}return e}Oe(Il.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});Oe(Il.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const nR=zt("TurnIntoText",n=>()=>Cx(Il.type(n)));Oe(nR,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const rR=ys("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const e=n.get(ht);return()=>e.call(nR.key)}}});Oe(rR.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});Oe(rR.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const Qit=Array(6).fill(0).map((n,e)=>e+1);function eot(n){return n.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const Y6=En(eot,"headingIdGenerator");Oe(Y6,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const iR=Dl("heading");Oe(iR,{displayName:"Attr<heading>",group:"Heading"});const Ds=Ir("heading",n=>{const e=n.get(Y6.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:Qit.map(r=>({tag:`h${r}`,getAttrs:i=>{if(!(i instanceof HTMLElement))throw Nl(i);return{level:r,id:i.id}}})),toDOM:r=>[`h${r.attrs.level}`,{...n.get(iR.key)(r),id:r.attrs.id||e(r)},0],parseMarkdown:{match:({type:r})=>r==="heading",runner:(r,i,o)=>{const s=i.depth;r.openNode(o,{level:s}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="heading",runner:(r,i)=>{r.openNode("heading",void 0,{depth:i.attrs.level}),Ede(r,i),r.closeNode()}}}});Oe(Ds.node,{displayName:"NodeSchema<heading>",group:"Heading"});Oe(Ds.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const zde=so(n=>Qj(/^(?<hashes>#+)\s$/,Ds.type(n),e=>{const r=e.groups?.hashes?.length||0,i=n.get(fn),{$from:o}=i.state.selection,s=o.node();if(s.type.name==="heading"){let a=Number(s.attrs.level)+Number(r);return a>6&&(a=6),{level:a}}return{level:r}}));Oe(zde,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const vh=zt("WrapInHeading",n=>e=>(e??=1,e<1?Cx(Il.type(n)):Cx(Ds.type(n),{level:e})));Oe(vh,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const oR=zt("DowngradeHeading",n=>()=>(e,r,i)=>{const{$from:o}=e.selection,s=o.node();if(s.type!==Ds.type(n)||!e.selection.empty||o.parentOffset!==0)return!1;const a=s.attrs.level-1;return a?(r?.(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...s.attrs,level:a})),!0):Cx(Il.type(n))(e,r,i)});Oe(oR,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const sR=ys("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const e=n.get(ht);return()=>e.call(vh.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const e=n.get(ht);return()=>e.call(vh.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const e=n.get(ht);return()=>e.call(vh.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const e=n.get(ht);return()=>e.call(vh.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const e=n.get(ht);return()=>e.call(vh.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const e=n.get(ht);return()=>e.call(vh.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const e=n.get(ht);return()=>e.call(oR.key)}}});Oe(sR.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});Oe(sR.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const aR=Dl("blockquote");Oe(aR,{displayName:"Attr<blockquote>",group:"Blockquote"});const o1=Ir("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",n.get(aR.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,r,i)=>{e.openNode(i).next(r.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,r)=>{e.openNode("blockquote").next(r.content).closeNode()}}}));Oe(o1.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});Oe(o1.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const Fde=so(n=>Jj(/^\s*>\s$/,o1.type(n)));Oe(Fde,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const lR=zt("WrapInBlockquote",n=>()=>Xj(o1.type(n)));Oe(lR,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const cR=ys("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const e=n.get(ht);return()=>e.call(lR.key)}}});Oe(cR.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});Oe(cR.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const uR=Dl("codeBlock",()=>({pre:{},code:{}}));Oe(uR,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Rc=Ir("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Nl(e);return{language:e.dataset.language}}}],toDOM:e=>{const r=n.get(uR.key)(e),i=e.attrs.language,o=i&&i.length>0?{"data-language":i}:void 0;return["pre",{...r.pre,...o},["code",r.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,r,i)=>{const o=r.lang??"",s=r.value;e.openNode(i,{language:o}),s&&e.addText(s),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,r)=>{e.addNode("code",void 0,r.content.firstChild?.text||"",{lang:r.attrs.language})}}}));Oe(Rc.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});Oe(Rc.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const $de=so(n=>Qj(/^```(?<language>[a-z]*)?[\s\n]$/,Rc.type(n),e=>({language:e.groups?.language??""})));Oe($de,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const dR=zt("CreateCodeBlock",n=>(e="")=>Cx(Rc.type(n),{language:e}));Oe(dR,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const tot=zt("UpdateCodeBlockLanguage",()=>({pos:n,language:e}={pos:-1,language:""})=>(r,i)=>n>=0?(i?.(r.tr.setNodeAttribute(n,"language",e)),!0):!1);Oe(tot,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const hR=ys("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const e=n.get(ht);return()=>e.call(dR.key)}}});Oe(hR.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});Oe(hR.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const fR=Dl("image");Oe(fR,{displayName:"Attr<image>",group:"Image"});const _m=Ir("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Nl(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...n.get(fR.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,r,i)=>{const o=r.url,s=r.alt,a=r.title;e.addNode(i,{src:o,alt:s,title:a})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,r)=>{e.addNode("image",void 0,void 0,{title:r.attrs.title,url:r.attrs.src,alt:r.attrs.alt})}}}));Oe(_m.node,{displayName:"NodeSchema<image>",group:"Image"});Oe(_m.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const Bde=zt("InsertImage",n=>(e={})=>(r,i)=>{if(!i)return!0;const{src:o="",alt:s="",title:a=""}=e,l=_m.type(n).create({src:o,alt:s,title:a});return l&&i(r.tr.replaceSelectionWith(l).scrollIntoView()),!0});Oe(Bde,{displayName:"Command<insertImageCommand>",group:"Image"});const Hde=zt("UpdateImage",n=>(e={})=>(r,i)=>{const o=B8e(r.selection,_m.type(n));if(!o)return!1;const{node:s,pos:a}=o,l={...s.attrs},{src:c,alt:u,title:d}=e;return c!==void 0&&(l.src=c),u!==void 0&&(l.alt=u),d!==void 0&&(l.title=d),i?.(r.tr.setNodeMarkup(a,void 0,l).scrollIntoView()),!0});Oe(Hde,{displayName:"Command<updateImageCommand>",group:"Image"});const not=so(n=>new fs(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,r,i,o)=>{const[s,a,l="",c]=r;return s?e.tr.replaceWith(i,o,_m.type(n).create({src:l,alt:a,title:c})):null}));Oe(not,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const CC=Dl("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));Oe(CC,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Lp=Ir("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",n.get(CC.key)(e)," "]:["br",n.get(CC.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,r,i)=>{e.addNode(i,{isInline:!!r.data?.isInline})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,r)=>{r.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));Oe(Lp.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});Oe(Lp.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const pR=zt("InsertHardbreak",n=>()=>(e,r)=>{const{selection:i,tr:o}=e;if(!(i instanceof xt))return!1;if(i.empty){const s=i.$from.node();if(s.childCount>0&&s.lastChild?.type.name==="hardbreak")return r?.(o.replaceRangeWith(i.to-1,i.to,e.schema.node("paragraph")).setSelection($t.near(o.doc.resolve(i.to))).scrollIntoView()),!0}return r?.(o.setMeta("hardbreak",!0).replaceSelectionWith(Lp.type(n).create()).scrollIntoView()),!0});Oe(pR,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const mR=ys("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const e=n.get(ht);return()=>e.call(pR.key)}}});Oe(mR.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});Oe(mR.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const gR=Dl("hr");Oe(gR,{displayName:"Attr<hr>",group:"Hr"});const s1=Ir("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",n.get(gR.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,r,i)=>{e.addNode(i)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));Oe(s1.node,{displayName:"NodeSchema<hr>",group:"Hr"});Oe(s1.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const qde=so(n=>new fs(/^(?:---|___\s|\*\*\*\s)$/,(e,r,i,o)=>{const{tr:s}=e;return r[0]&&s.replaceWith(i-1,o,s1.type(n).create()),s}));Oe(qde,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const Vde=zt("InsertHr",n=>()=>(e,r)=>{if(!r)return!0;const i=Il.node.type(n).create(),{tr:o,selection:s}=e,{from:a}=s,l=s1.type(n).create();if(!l)return!0;const c=o.replaceSelectionWith(l).insert(a,i),u=$t.findFrom(c.doc.resolve(a),1,!0);return u&&r(c.setSelection(u).scrollIntoView()),!0});Oe(Vde,{displayName:"Command<insertHrCommand>",group:"Hr"});const yR=Dl("bulletList");Oe(yR,{displayName:"Attr<bulletList>",group:"BulletList"});const Am=Ir("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Nl(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...n.get(yR.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:r})=>e==="list"&&!r,runner:(e,r,i)=>{const o=r.spread!=null?`${r.spread}`:"false";e.openNode(i,{spread:o}).next(r.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,r)=>{e.openNode("list",void 0,{ordered:!1,spread:r.attrs.spread}).next(r.content).closeNode()}}}));Oe(Am.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});Oe(Am.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const Wde=so(n=>Jj(/^\s*([-+*])\s$/,Am.type(n)));Oe(Wde,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const vR=zt("WrapInBulletList",n=>()=>Xj(Am.type(n)));Oe(vR,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const xR=ys("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const e=n.get(ht);return()=>e.call(vR.key)}}});Oe(xR.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});Oe(xR.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const bR=Dl("orderedList");Oe(bR,{displayName:"Attr<orderedList>",group:"OrderedList"});const Tm=Ir("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Nl(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...n.get(bR.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:r})=>e==="list"&&!!r,runner:(e,r,i)=>{const o=r.spread!=null?`${r.spread}`:"true";e.openNode(i,{spread:o}).next(r.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,r)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:r.attrs.spread==="true"}),e.next(r.content),e.closeNode()}}}));Oe(Tm.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});Oe(Tm.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const Ude=so(n=>Jj(/^\s*(\d+)\.\s$/,Tm.type(n),e=>({order:Number(e[1])}),(e,r)=>r.childCount+r.attrs.order===Number(e[1])));Oe(Ude,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const wR=zt("WrapInOrderedList",n=>()=>Xj(Tm.type(n)));Oe(wR,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const kR=ys("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const e=n.get(ht);return()=>e.call(wR.key)}}});Oe(kR.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});Oe(kR.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const SR=Dl("listItem");Oe(SR,{displayName:"Attr<listItem>",group:"ListItem"});const Rl=Ir("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Nl(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...n.get(SR.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,r,i)=>{const o=r.label!=null?`${r.label}.`:"",s=r.label!=null?"ordered":"bullet",a=r.spread!=null?`${r.spread}`:"true";e.openNode(i,{label:o,listType:s,spread:a}),e.next(r.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,r)=>{e.openNode("listItem",void 0,{spread:r.attrs.spread}),e.next(r.content),e.closeNode()}}}));Oe(Rl.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});Oe(Rl.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const CR=zt("SinkListItem",n=>()=>Git(Rl.type(n)));Oe(CR,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const _R=zt("LiftListItem",n=>()=>Wit(Rl.type(n)));Oe(_R,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const AR=zt("SplitListItem",n=>()=>Vit(Rl.type(n)));Oe(AR,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function rot(n){return(e,r,i)=>{const{selection:o}=e;if(!(o instanceof xt))return!1;const{empty:s,$from:a}=o;return!s||a.parentOffset!==0||a.node(-1).type!==Rl.type(n)?!1:Rte(e,r,i)}}const TR=zt("LiftFirstListItem",n=>()=>rot(n));Oe(TR,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const PR=ys("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const e=n.get(ht);return()=>e.call(AR.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const e=n.get(ht);return()=>e.call(CR.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const e=n.get(ht);return()=>e.call(_R.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const e=n.get(ht);return()=>e.call(TR.key)}}});Oe(PR.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});Oe(PR.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const Kde=BI("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,e)=>{n.addText(e.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,e)=>{n.addNode("text",void 0,e.text)}}}));Oe(Kde,{displayName:"NodeSchema<text>",group:"Text"});const MR=Dl("html");Oe(MR,{displayName:"Attr<html>",group:"Html"});const ER=Ir("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const r=document.createElement("span"),i={...n.get(MR.key)(e),"data-value":e.attrs.value,"data-type":"html"};return r.textContent=e.attrs.value,["span",i,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,r,i)=>{e.addNode(i,{value:r.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,r)=>{e.addNode("html",void 0,r.attrs.value)}}}));Oe(ER.node,{displayName:"NodeSchema<html>",group:"Html"});Oe(ER.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const iot=[Lde,tR,Il,Y6,iR,Ds,CC,Lp,aR,o1,uR,Rc,gR,s1,fR,_m,yR,Am,bR,Tm,SR,Rl,GI,Cm,ZI,i1,JI,zu,eR,bl,MR,ER,Kde].flat(),oot=[Fde,Wde,Ude,$de,qde,zde].flat(),sot=[Nde,jde,Dde,Ode],b0=zt("IsMarkSelected",()=>n=>e=>{if(!n)return!1;const{doc:r,selection:i}=e;return r.rangeHasMark(i.from,i.to,n)}),Gde=zt("IsNoteSelected",()=>n=>e=>n?Zte(e,n).hasNode:!1),_i=zt("ClearTextInCurrentBlock",()=>()=>(n,e)=>{let r=n.tr;const{$from:i,$to:o}=r.selection,{pos:s}=i,{pos:a}=o,l=s-i.node().content.size;return l<0?!1:(r=r.deleteRange(l,a),e?.(r),!0)}),yu=zt("SetBlockType",()=>n=>(e,r)=>{const{nodeType:i,attrs:o=null}=n??{};if(!i)return!1;const s=e.tr,{from:a,to:l}=s.selection;try{s.setBlockType(a,l,i,o)}catch{return!1}return r?.(s),!0}),iv=zt("WrapInBlockType",()=>n=>(e,r)=>{const{nodeType:i,attrs:o=null}=n??{};if(!i)return!1;let s=e.tr;try{const{$from:a,$to:l}=s.selection,c=a.blockRange(l),u=c&&Wj(c,i,o);if(!u)return!1;s=s.wrap(c,u)}catch{return!1}return r?.(s),!0}),ov=zt("AddBlockType",()=>n=>(e,r)=>{const{nodeType:i,attrs:o=null}=n??{};if(!i)return!1;const s=e.tr;try{const a=i instanceof $u?i:i.createAndFill(o);if(!a)return!1;s.replaceSelectionWith(a)}catch{return!1}return r?.(s),!0}),Yde=zt("SelectTextNearPos",()=>n=>(e,r)=>{const{pos:i}=n??{};if(i==null)return!1;const o=(a,l,c)=>Math.min(Math.max(a,l),c),s=e.tr;try{const a=e.doc.resolve(o(i,0,e.doc.content.size));s.setSelection(xt.near(a))}catch{return!1}return r?.(s.scrollIntoView()),!0}),aot=[nR,lR,vh,oR,dR,pR,Vde,Bde,Hde,wR,vR,CR,AR,_R,TR,W6,K6,U6,Ide,Rde,b0,Gde,_i,yu,iv,ov,Yde],lot=[cR,hR,mR,sR,PR,kR,xR,rR,YI,QI,XI].flat(),NR=qc("remarkAddOrderInList",()=>()=>n=>{af(n,"list",e=>{if(e.ordered){const r=e.start??1;e.children.forEach((i,o)=>{i.label=o+r})}})});Oe(NR.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});Oe(NR.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const jR=qc("remarkLineBreak",()=>()=>n=>{const e=/[\t ]*(?:\r?\n|\r)/g;af(n,"text",(r,i,o)=>{if(!r.value||typeof r.value!="string")return;const s=[];let a=0;e.lastIndex=0;let l=e.exec(r.value);for(;l;){const u=l.index;a!==u&&s.push({type:"text",value:r.value.slice(a,u)}),s.push({type:"break",data:{isInline:!0}}),a=u+l[0].length,l=e.exec(r.value)}if(s.length>0&&o&&typeof i=="number")return a<r.value.length&&s.push({type:"text",value:r.value.slice(a)}),o.children.splice(i,1,...s),i+s.length})});Oe(jR.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});Oe(jR.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const OR=qc("remarkInlineLink",()=>Zit);Oe(OR.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});Oe(OR.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const cot=n=>!!n.children,uot=n=>n.type==="html";function dot(n,e){return r(n,0,null)[0];function r(i,o,s){if(cot(i)){const a=[];for(let l=0,c=i.children.length;l<c;l++){const u=i.children[l];if(u){const d=r(u,l,i);if(d)for(let h=0,f=d.length;h<f;h++){const m=d[h];m&&a.push(m)}}}i.children=a}return e(i,o,s)}}const hot=["root","blockquote","listItem"],DR=qc("remarkHTMLTransformer",()=>()=>n=>{dot(n,(e,r,i)=>uot(e)?(i&&hot.includes(i.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});Oe(DR.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});Oe(DR.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const IR=qc("remarkMarker",()=>()=>(n,e)=>{const r=i=>e.value.charAt(i.position.start.offset);af(n,i=>["strong","emphasis"].includes(i.type),i=>{i.marker=r(i)})});Oe(IR.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});Oe(IR.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const Zde=Kr(()=>{let n=!1;const e=new lr("MILKDOWN_INLINE_NODES_CURSOR"),r=new ar({key:e,state:{init(){return!1},apply(i){if(!i.selection.empty)return!1;const o=i.selection.$from,s=o.nodeBefore,a=o.nodeAfter;return!!(s&&a&&s.isInline&&!s.isText&&a.isInline&&!a.isText)}},props:{handleDOMEvents:{compositionend:(i,o)=>n?(n=!1,requestAnimationFrame(()=>{if(r.getState(i.state)){const a=i.state.selection.from;o.preventDefault(),i.dispatch(i.state.tr.insertText(o.data||"",a))}}),!0):!1,compositionstart:i=>(r.getState(i.state)&&(n=!0),!1),beforeinput:(i,o)=>{if(r.getState(i.state)&&o instanceof InputEvent&&o.data&&!n){const a=i.state.selection.from;return o.preventDefault(),i.dispatch(i.state.tr.insertText(o.data||"",a)),!0}return!1}},decorations(i){if(r.getState(i)){const a=i.selection.$from.pos,l=document.createElement("span"),c=No.widget(a,l,{side:-1}),u=document.createElement("span"),d=No.widget(a,u);return setTimeout(()=>{l.contentEditable="true",u.contentEditable="true"}),Ln.create(i.doc,[c,d])}return Ln.empty}}});return r});Oe(Zde,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const Xde=Kr(n=>new ar({key:new lr("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,r,i)=>{if(!e.length)return;const[o]=e;if(!o)return;const[s]=o.steps;if(o.getMeta("hardbreak")){if(!(s instanceof mi))return;const{from:c}=s;return i.tr.setNodeMarkup(c,Lp.type(n),void 0,[])}if(s instanceof Nu){let c=i.tr;const{from:u,to:d}=s;return i.doc.nodesBetween(u,d,(h,f)=>{h.type===Lp.type(n)&&(c=c.setNodeMarkup(f,Lp.type(n),void 0,[]))}),c}}}));Oe(Xde,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const RR=En(["table","code_block"],"hardbreakFilterNodes");Oe(RR,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const Jde=Kr(n=>{const e=n.get(RR.key);return new ar({key:new lr("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(r,i)=>{const o=r.getMeta("hardbreak"),[s]=r.steps;if(o&&s){const{from:a}=s,l=i.doc.resolve(a);let c=l.depth,u=!0;for(;c>0;)e.includes(l.node(c).type.name)&&(u=!1),c--;return u}return!0}})});Oe(Jde,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const Qde=Kr(n=>{const e=new lr("MILKDOWN_HEADING_ID"),r=i=>{if(i.composing)return;const o=n.get(Y6.key),s=i.state.tr.setMeta("addToHistory",!1);let a=!1;const l={};i.state.doc.descendants((c,u)=>{if(c.type===Ds.type(n)){if(c.textContent.trim().length===0)return;const d=c.attrs;let h=o(c);l[h]?(l[h]+=1,h+=`-#${l[h]}`):l[h]=1,d.id!==h&&(a=!0,s.setMeta(e,!0).setNodeMarkup(u,void 0,{...d,id:h}))}}),a&&i.dispatch(s)};return new ar({key:e,view:i=>(r(i),{update:(o,s)=>{o.state.doc.eq(s.doc)||r(o)}})})});Oe(Qde,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const ehe=Kr(n=>{const e=(r,i,o)=>{if(!o.selection||r.some(h=>h.getMeta("addToHistory")===!1||!h.isGeneric))return null;const s=Tm.type(n),a=Am.type(n),l=Rl.type(n),c=(h,f)=>{let m=!1;const v=`${f+1}.`;return h.label!==v&&(h.label=v,m=!0),m};let u=o.tr,d=!1;return o.doc.descendants((h,f,m,v)=>{if(h.type===a){const x=h.maybeChild(0);x?.type===l&&x.attrs.listType==="ordered"&&(d=!0,u.setNodeMarkup(f,s,{spread:"true"}),h.descendants((b,w,S,_)=>{if(b.type===l){const P={...b.attrs};c(P,_)&&(u=u.setNodeMarkup(w,void 0,P))}return!1}))}else if(h.type===l&&m?.type===s){const x={...h.attrs};let b=!1;x.listType!=="ordered"&&(x.listType="ordered",b=!0),m?.maybeChild(0)&&(b=c(x,v)),b&&(u=u.setNodeMarkup(f,void 0,x),d=!0)}}),d?u.setMeta("addToHistory",!1):null};return new ar({key:new lr("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:e})});Oe(ehe,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const fot=[Xde,RR,Jde,Zde,NR,OR,jR,DR,IR,G6,Qde,ehe].flat(),pot=[iot,oot,sot,aot,lot,fot].flat();function LR(n){const e=Object.create(null);for(const r of n.split(","))e[r]=1;return r=>r in e}const Zn={},tx=[],wl=()=>{},the=()=>!1,Z6=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),zR=n=>n.startsWith("onUpdate:"),$i=Object.assign,FR=(n,e)=>{const r=n.indexOf(e);r>-1&&n.splice(r,1)},mot=Object.prototype.hasOwnProperty,Cn=(n,e)=>mot.call(n,e),Zt=Array.isArray,nx=n=>X6(n)==="[object Map]",got=n=>X6(n)==="[object Set]",Gt=n=>typeof n=="function",bi=n=>typeof n=="string",a1=n=>typeof n=="symbol",Mr=n=>n!==null&&typeof n=="object",nhe=n=>(Mr(n)||Gt(n))&&Gt(n.then)&&Gt(n.catch),yot=Object.prototype.toString,X6=n=>yot.call(n),vot=n=>X6(n).slice(8,-1),xot=n=>X6(n)==="[object Object]",$R=n=>bi(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,rx=LR(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),J6=n=>{const e=Object.create(null);return(r=>e[r]||(e[r]=n(r)))},bot=/-\w/g,ef=J6(n=>n.replace(bot,e=>e.slice(1).toUpperCase())),wot=/\B([A-Z])/g,Pm=J6(n=>n.replace(wot,"-$1").toLowerCase()),rhe=J6(n=>n.charAt(0).toUpperCase()+n.slice(1)),kP=J6(n=>n?`on${rhe(n)}`:""),Bh=(n,e)=>!Object.is(n,e),SP=(n,...e)=>{for(let r=0;r<n.length;r++)n[r](...e)},_C=(n,e,r,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:r})},kot=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let CZ;const zp=()=>CZ||(CZ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function BR(n){if(Zt(n)){const e={};for(let r=0;r<n.length;r++){const i=n[r],o=bi(i)?Aot(i):BR(i);if(o)for(const s in o)e[s]=o[s]}return e}else if(bi(n)||Mr(n))return n}const Sot=/;(?![^(]*\))/g,Cot=/:([^]+)/,_ot=/\/\*[^]*?\*\//g;function Aot(n){const e={};return n.replace(_ot,"").split(Sot).forEach(r=>{if(r){const i=r.split(Cot);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function HR(n){let e="";if(bi(n))e=n;else if(Zt(n))for(let r=0;r<n.length;r++){const i=HR(n[r]);i&&(e+=i+" ")}else if(Mr(n))for(const r in n)n[r]&&(e+=r+" ");return e.trim()}const Tot="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pot=LR(Tot);function ihe(n){return!!n||n===""}let Jo;class Mot{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jo,!e&&Jo&&(this.index=(Jo.scopes||(Jo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Jo;try{return Jo=this,e()}finally{Jo=r}}}on(){++this._on===1&&(this.prevScope=Jo,Jo=this)}off(){this._on>0&&--this._on===0&&(Jo=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Eot(){return Jo}let Kn;const CP=new WeakSet;class ohe{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jo&&Jo.active&&Jo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,CP.has(this)&&(CP.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ahe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_Z(this),lhe(this);const e=Kn,r=kl;Kn=this,kl=!0;try{return this.fn()}finally{che(this),Kn=e,kl=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)WR(e);this.deps=this.depsTail=void 0,_Z(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?CP.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wN(this)&&this.run()}get dirty(){return wN(this)}}let she=0,ix,ox;function ahe(n,e=!1){if(n.flags|=8,e){n.next=ox,ox=n;return}n.next=ix,ix=n}function qR(){she++}function VR(){if(--she>0)return;if(ox){let e=ox;for(ox=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let n;for(;ix;){let e=ix;for(ix=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=r}}if(n)throw n}function lhe(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function che(n){let e,r=n.depsTail,i=r;for(;i;){const o=i.prevDep;i.version===-1?(i===r&&(r=o),WR(i),Not(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}n.deps=e,n.depsTail=r}function wN(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(uhe(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function uhe(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===fb)||(n.globalVersion=fb,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!wN(n))))return;n.flags|=2;const e=n.dep,r=Kn,i=kl;Kn=n,kl=!0;try{lhe(n);const o=n.fn(n._value);(e.version===0||Bh(o,n._value))&&(n.flags|=128,n._value=o,e.version++)}catch(o){throw e.version++,o}finally{Kn=r,kl=i,che(n),n.flags&=-3}}function WR(n,e=!1){const{dep:r,prevSub:i,nextSub:o}=n;if(i&&(i.nextSub=o,n.prevSub=void 0),o&&(o.prevSub=i,n.nextSub=void 0),r.subs===n&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)WR(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function Not(n){const{prevDep:e,nextDep:r}=n;e&&(e.nextDep=r,n.prevDep=void 0),r&&(r.prevDep=e,n.nextDep=void 0)}let kl=!0;const dhe=[];function ad(){dhe.push(kl),kl=!1}function ld(){const n=dhe.pop();kl=n===void 0?!0:n}function _Z(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const r=Kn;Kn=void 0;try{e()}finally{Kn=r}}}let fb=0;class jot{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class UR{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Kn||!kl||Kn===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Kn)r=this.activeLink=new jot(Kn,this),Kn.deps?(r.prevDep=Kn.depsTail,Kn.depsTail.nextDep=r,Kn.depsTail=r):Kn.deps=Kn.depsTail=r,hhe(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=Kn.depsTail,r.nextDep=void 0,Kn.depsTail.nextDep=r,Kn.depsTail=r,Kn.deps===r&&(Kn.deps=i)}return r}trigger(e){this.version++,fb++,this.notify(e)}notify(e){qR();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{VR()}}}function hhe(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)hhe(i)}const r=n.dep.subs;r!==n&&(n.prevSub=r,r&&(r.nextSub=n)),n.dep.subs=n}}const kN=new WeakMap,Fp=Symbol(""),SN=Symbol(""),pb=Symbol("");function to(n,e,r){if(kl&&Kn){let i=kN.get(n);i||kN.set(n,i=new Map);let o=i.get(r);o||(i.set(r,o=new UR),o.map=i,o.key=r),o.track()}}function Eu(n,e,r,i,o,s){const a=kN.get(n);if(!a){fb++;return}const l=c=>{c&&c.trigger()};if(qR(),e==="clear")a.forEach(l);else{const c=Zt(n),u=c&&$R(r);if(c&&r==="length"){const d=Number(i);a.forEach((h,f)=>{(f==="length"||f===pb||!a1(f)&&f>=d)&&l(h)})}else switch((r!==void 0||a.has(void 0))&&l(a.get(r)),u&&l(a.get(pb)),e){case"add":c?u&&l(a.get("length")):(l(a.get(Fp)),nx(n)&&l(a.get(SN)));break;case"delete":c||(l(a.get(Fp)),nx(n)&&l(a.get(SN)));break;case"set":nx(n)&&l(a.get(Fp));break}}VR()}function d0(n){const e=Sn(n);return e===n?e:(to(e,"iterate",pb),Sl(n)?e:e.map(cd))}function KR(n){return to(n=Sn(n),"iterate",pb),n}function xh(n,e){return tf(n)?mb(Q0(n)?cd(e):e):cd(e)}const Oot={__proto__:null,[Symbol.iterator](){return _P(this,Symbol.iterator,n=>xh(this,n))},concat(...n){return d0(this).concat(...n.map(e=>Zt(e)?d0(e):e))},entries(){return _P(this,"entries",n=>(n[1]=xh(this,n[1]),n))},every(n,e){return hu(this,"every",n,e,void 0,arguments)},filter(n,e){return hu(this,"filter",n,e,r=>r.map(i=>xh(this,i)),arguments)},find(n,e){return hu(this,"find",n,e,r=>xh(this,r),arguments)},findIndex(n,e){return hu(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return hu(this,"findLast",n,e,r=>xh(this,r),arguments)},findLastIndex(n,e){return hu(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return hu(this,"forEach",n,e,void 0,arguments)},includes(...n){return AP(this,"includes",n)},indexOf(...n){return AP(this,"indexOf",n)},join(n){return d0(this).join(n)},lastIndexOf(...n){return AP(this,"lastIndexOf",n)},map(n,e){return hu(this,"map",n,e,void 0,arguments)},pop(){return wy(this,"pop")},push(...n){return wy(this,"push",n)},reduce(n,...e){return AZ(this,"reduce",n,e)},reduceRight(n,...e){return AZ(this,"reduceRight",n,e)},shift(){return wy(this,"shift")},some(n,e){return hu(this,"some",n,e,void 0,arguments)},splice(...n){return wy(this,"splice",n)},toReversed(){return d0(this).toReversed()},toSorted(n){return d0(this).toSorted(n)},toSpliced(...n){return d0(this).toSpliced(...n)},unshift(...n){return wy(this,"unshift",n)},values(){return _P(this,"values",n=>xh(this,n))}};function _P(n,e,r){const i=KR(n),o=i[e]();return i!==n&&!Sl(n)&&(o._next=o.next,o.next=()=>{const s=o._next();return s.done||(s.value=r(s.value)),s}),o}const Dot=Array.prototype;function hu(n,e,r,i,o,s){const a=KR(n),l=a!==n&&!Sl(n),c=a[e];if(c!==Dot[e]){const h=c.apply(n,s);return l?cd(h):h}let u=r;a!==n&&(l?u=function(h,f){return r.call(this,xh(n,h),f,n)}:r.length>2&&(u=function(h,f){return r.call(this,h,f,n)}));const d=c.call(a,u,i);return l&&o?o(d):d}function AZ(n,e,r,i){const o=KR(n);let s=r;return o!==n&&(Sl(n)?r.length>3&&(s=function(a,l,c){return r.call(this,a,l,c,n)}):s=function(a,l,c){return r.call(this,a,xh(n,l),c,n)}),o[e](s,...i)}function AP(n,e,r){const i=Sn(n);to(i,"iterate",pb);const o=i[e](...r);return(o===-1||o===!1)&&XR(r[0])?(r[0]=Sn(r[0]),i[e](...r)):o}function wy(n,e,r=[]){ad(),qR();const i=Sn(n)[e].apply(n,r);return VR(),ld(),i}const Iot=LR("__proto__,__v_isRef,__isVue"),fhe=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(a1));function Rot(n){a1(n)||(n=String(n));const e=Sn(this);return to(e,"has",n),e.hasOwnProperty(n)}class phe{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,i){if(r==="__v_skip")return e.__v_skip;const o=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return s;if(r==="__v_raw")return i===(o?s?Uot:vhe:s?yhe:ghe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=Zt(e);if(!o){let c;if(a&&(c=Oot[r]))return c;if(r==="hasOwnProperty")return Rot}const l=Reflect.get(e,r,io(e)?e:i);if((a1(r)?fhe.has(r):Iot(r))||(o||to(e,"get",r),s))return l;if(io(l)){const c=a&&$R(r)?l:l.value;return o&&Mr(c)?_N(c):c}return Mr(l)?o?_N(l):YR(l):l}}class mhe extends phe{constructor(e=!1){super(!1,e)}set(e,r,i,o){let s=e[r];const a=Zt(e)&&$R(r);if(!this._isShallow){const u=tf(s);if(!Sl(i)&&!tf(i)&&(s=Sn(s),i=Sn(i)),!a&&io(s)&&!io(i))return u||(s.value=i),!0}const l=a?Number(r)<e.length:Cn(e,r),c=Reflect.set(e,r,i,io(e)?e:o);return e===Sn(o)&&(l?Bh(i,s)&&Eu(e,"set",r,i):Eu(e,"add",r,i)),c}deleteProperty(e,r){const i=Cn(e,r);e[r];const o=Reflect.deleteProperty(e,r);return o&&i&&Eu(e,"delete",r,void 0),o}has(e,r){const i=Reflect.has(e,r);return(!a1(r)||!fhe.has(r))&&to(e,"has",r),i}ownKeys(e){return to(e,"iterate",Zt(e)?"length":Fp),Reflect.ownKeys(e)}}class Lot extends phe{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const zot=new mhe,Fot=new Lot,$ot=new mhe(!0);const CN=n=>n,Lk=n=>Reflect.getPrototypeOf(n);function Bot(n,e,r){return function(...i){const o=this.__v_raw,s=Sn(o),a=nx(s),l=n==="entries"||n===Symbol.iterator&&a,c=n==="keys"&&a,u=o[n](...i),d=r?CN:e?mb:cd;return!e&&to(s,"iterate",c?SN:Fp),$i(Object.create(u),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:l?[d(h[0]),d(h[1])]:d(h),done:f}}})}}function zk(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Hot(n,e){const r={get(o){const s=this.__v_raw,a=Sn(s),l=Sn(o);n||(Bh(o,l)&&to(a,"get",o),to(a,"get",l));const{has:c}=Lk(a),u=e?CN:n?mb:cd;if(c.call(a,o))return u(s.get(o));if(c.call(a,l))return u(s.get(l));s!==a&&s.get(o)},get size(){const o=this.__v_raw;return!n&&to(Sn(o),"iterate",Fp),o.size},has(o){const s=this.__v_raw,a=Sn(s),l=Sn(o);return n||(Bh(o,l)&&to(a,"has",o),to(a,"has",l)),o===l?s.has(o):s.has(o)||s.has(l)},forEach(o,s){const a=this,l=a.__v_raw,c=Sn(l),u=e?CN:n?mb:cd;return!n&&to(c,"iterate",Fp),l.forEach((d,h)=>o.call(s,u(d),u(h),a))}};return $i(r,n?{add:zk("add"),set:zk("set"),delete:zk("delete"),clear:zk("clear")}:{add(o){!e&&!Sl(o)&&!tf(o)&&(o=Sn(o));const s=Sn(this);return Lk(s).has.call(s,o)||(s.add(o),Eu(s,"add",o,o)),this},set(o,s){!e&&!Sl(s)&&!tf(s)&&(s=Sn(s));const a=Sn(this),{has:l,get:c}=Lk(a);let u=l.call(a,o);u||(o=Sn(o),u=l.call(a,o));const d=c.call(a,o);return a.set(o,s),u?Bh(s,d)&&Eu(a,"set",o,s):Eu(a,"add",o,s),this},delete(o){const s=Sn(this),{has:a,get:l}=Lk(s);let c=a.call(s,o);c||(o=Sn(o),c=a.call(s,o)),l&&l.call(s,o);const u=s.delete(o);return c&&Eu(s,"delete",o,void 0),u},clear(){const o=Sn(this),s=o.size!==0,a=o.clear();return s&&Eu(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=Bot(o,n,e)}),r}function GR(n,e){const r=Hot(n,e);return(i,o,s)=>o==="__v_isReactive"?!n:o==="__v_isReadonly"?n:o==="__v_raw"?i:Reflect.get(Cn(r,o)&&o in i?r:i,o,s)}const qot={get:GR(!1,!1)},Vot={get:GR(!1,!0)},Wot={get:GR(!0,!1)};const ghe=new WeakMap,yhe=new WeakMap,vhe=new WeakMap,Uot=new WeakMap;function Kot(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Got(n){return n.__v_skip||!Object.isExtensible(n)?0:Kot(vot(n))}function YR(n){return tf(n)?n:ZR(n,!1,zot,qot,ghe)}function Yot(n){return ZR(n,!1,$ot,Vot,yhe)}function _N(n){return ZR(n,!0,Fot,Wot,vhe)}function ZR(n,e,r,i,o){if(!Mr(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=Got(n);if(s===0)return n;const a=o.get(n);if(a)return a;const l=new Proxy(n,s===2?i:r);return o.set(n,l),l}function Q0(n){return tf(n)?Q0(n.__v_raw):!!(n&&n.__v_isReactive)}function tf(n){return!!(n&&n.__v_isReadonly)}function Sl(n){return!!(n&&n.__v_isShallow)}function XR(n){return n?!!n.__v_raw:!1}function Sn(n){const e=n&&n.__v_raw;return e?Sn(e):n}function Zot(n){return!Cn(n,"__v_skip")&&Object.isExtensible(n)&&_C(n,"__v_skip",!0),n}const cd=n=>Mr(n)?YR(n):n,mb=n=>Mr(n)?_N(n):n;function io(n){return n?n.__v_isRef===!0:!1}function mt(n){return xhe(n,!1)}function AC(n){return xhe(n,!0)}function xhe(n,e){return io(n)?n:new Xot(n,e)}class Xot{constructor(e,r){this.dep=new UR,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Sn(e),this._value=r?e:cd(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,i=this.__v_isShallow||Sl(e)||tf(e);e=i?e:Sn(e),Bh(e,r)&&(this._rawValue=e,this._value=i?e:cd(e),this.dep.trigger())}}function Jot(n){return io(n)?n.value:n}const Qot={get:(n,e,r)=>e==="__v_raw"?n:Jot(Reflect.get(n,e,r)),set:(n,e,r,i)=>{const o=n[e];return io(o)&&!io(r)?(o.value=r,!0):Reflect.set(n,e,r,i)}};function bhe(n){return Q0(n)?n:new Proxy(n,Qot)}class est{constructor(e,r,i){this.fn=e,this.setter=r,this._value=void 0,this.dep=new UR(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Kn!==this)return ahe(this,!0),!0}get value(){const e=this.dep.track();return uhe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function tst(n,e,r=!1){let i,o;return Gt(n)?i=n:(i=n.get,o=n.set),new est(i,o,r)}const Fk={},TC=new WeakMap;let np;function nst(n,e=!1,r=np){if(r){let i=TC.get(r);i||TC.set(r,i=[]),i.push(n)}}function rst(n,e,r=Zn){const{immediate:i,deep:o,once:s,scheduler:a,augmentJob:l,call:c}=r,u=P=>o?P:Sl(P)||o===!1||o===0?Th(P,1):Th(P);let d,h,f,m,v=!1,x=!1;if(io(n)?(h=()=>n.value,v=Sl(n)):Q0(n)?(h=()=>u(n),v=!0):Zt(n)?(x=!0,v=n.some(P=>Q0(P)||Sl(P)),h=()=>n.map(P=>{if(io(P))return P.value;if(Q0(P))return u(P);if(Gt(P))return c?c(P,2):P()})):Gt(n)?e?h=c?()=>c(n,2):n:h=()=>{if(f){ad();try{f()}finally{ld()}}const P=np;np=d;try{return c?c(n,3,[m]):n(m)}finally{np=P}}:h=wl,e&&o){const P=h,A=o===!0?1/0:o;h=()=>Th(P(),A)}const b=Eot(),w=()=>{d.stop(),b&&b.active&&FR(b.effects,d)};if(s&&e){const P=e;e=(...A)=>{P(...A),w()}}let S=x?new Array(n.length).fill(Fk):Fk;const _=P=>{if(!(!(d.flags&1)||!d.dirty&&!P))if(e){const A=d.run();if(o||v||(x?A.some((T,E)=>Bh(T,S[E])):Bh(A,S))){f&&f();const T=np;np=d;try{const E=[A,S===Fk?void 0:x&&S[0]===Fk?[]:S,m];S=A,c?c(e,3,E):e(...E)}finally{np=T}}}else d.run()};return l&&l(_),d=new ohe(h),d.scheduler=a?()=>a(_,!1):_,m=P=>nst(P,!1,d),f=d.onStop=()=>{const P=TC.get(d);if(P){if(c)c(P,4);else for(const A of P)A();TC.delete(d)}},e?i?_(!0):S=d.run():a?a(_.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function Th(n,e=1/0,r){if(e<=0||!Mr(n)||n.__v_skip||(r=r||new Map,(r.get(n)||0)>=e))return n;if(r.set(n,e),e--,io(n))Th(n.value,e,r);else if(Zt(n))for(let i=0;i<n.length;i++)Th(n[i],e,r);else if(got(n)||nx(n))n.forEach(i=>{Th(i,e,r)});else if(xot(n)){for(const i in n)Th(n[i],e,r);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&Th(n[i],e,r)}return n}function vw(n,e,r,i){try{return i?n(...i):n()}catch(o){Q6(o,e,r)}}function Lc(n,e,r,i){if(Gt(n)){const o=vw(n,e,r,i);return o&&nhe(o)&&o.catch(s=>{Q6(s,e,r)}),o}if(Zt(n)){const o=[];for(let s=0;s<n.length;s++)o.push(Lc(n[s],e,r,i));return o}}function Q6(n,e,r,i=!0){const o=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Zn;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const d=l.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](n,c,u)===!1)return}l=l.parent}if(s){ad(),vw(s,null,10,[n,c,u]),ld();return}}ist(n,r,o,i,a)}function ist(n,e,r,i=!0,o=!1){if(o)throw n;console.error(n)}const vo=[];let rc=-1;const eg=[];let bh=null,w0=0;const whe=Promise.resolve();let PC=null;function ost(n){const e=PC||whe;return n?e.then(this?n.bind(this):n):e}function sst(n){let e=rc+1,r=vo.length;for(;e<r;){const i=e+r>>>1,o=vo[i],s=gb(o);s<n||s===n&&o.flags&2?e=i+1:r=i}return e}function JR(n){if(!(n.flags&1)){const e=gb(n),r=vo[vo.length-1];!r||!(n.flags&2)&&e>=gb(r)?vo.push(n):vo.splice(sst(e),0,n),n.flags|=1,khe()}}function khe(){PC||(PC=whe.then(Che))}function ast(n){Zt(n)?eg.push(...n):bh&&n.id===-1?bh.splice(w0+1,0,n):n.flags&1||(eg.push(n),n.flags|=1),khe()}function TZ(n,e,r=rc+1){for(;r<vo.length;r++){const i=vo[r];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;vo.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function She(n){if(eg.length){const e=[...new Set(eg)].sort((r,i)=>gb(r)-gb(i));if(eg.length=0,bh){bh.push(...e);return}for(bh=e,w0=0;w0<bh.length;w0++){const r=bh[w0];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}bh=null,w0=0}}const gb=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Che(n){try{for(rc=0;rc<vo.length;rc++){const e=vo[rc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),vw(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;rc<vo.length;rc++){const e=vo[rc];e&&(e.flags&=-2)}rc=-1,vo.length=0,She(),PC=null,(vo.length||eg.length)&&Che()}}let hc,sv=[],AN=!1;function e7(n,...e){hc?hc.emit(n,...e):AN||sv.push({event:n,args:e})}function _he(n,e){var r,i;hc=n,hc?(hc.enabled=!0,sv.forEach(({event:o,args:s})=>hc.emit(o,...s)),sv=[]):typeof window<"u"&&window.HTMLElement&&!((i=(r=window.navigator)==null?void 0:r.userAgent)!=null&&i.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{_he(s,e)}),setTimeout(()=>{hc||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,AN=!0,sv=[])},3e3)):(AN=!0,sv=[])}function lst(n,e){e7("app:init",n,e,{Fragment:gi,Text:ww,Comment:ym,Static:iS})}function cst(n){e7("app:unmount",n)}const ust=QR("component:added"),Ahe=QR("component:updated"),dst=QR("component:removed"),hst=n=>{hc&&typeof hc.cleanupBuffer=="function"&&!hc.cleanupBuffer(n)&&dst(n)};function QR(n){return e=>{e7(n,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}function fst(n,e,r){e7("component:emit",n.appContext.app,n,e,r)}let xc=null,The=null;function MC(n){const e=xc;return xc=n,The=n&&n.type.__scopeId||null,e}function pst(n,e=xc,r){if(!e||n._n)return n;const i=(...o)=>{i._d;const s=MC(e);let a;try{a=n(...o)}finally{MC(s),i._d}return __VUE_PROD_DEVTOOLS__&&Ahe(e),a};return i._n=!0,i._c=!0,i._d=!0,i}function qf(n,e,r,i){const o=n.dirs,s=e&&e.dirs;for(let a=0;a<o.length;a++){const l=o[a];s&&(l.oldValue=s[a].value);let c=l.dir[i];c&&(ad(),Lc(c,r,8,[n.el,l,n,e]),ld())}}function mst(n,e){if(wo){let r=wo.provides;const i=wo.parent&&wo.parent.provides;i===r&&(r=wo.provides=Object.create(i)),r[n]=e}}function rS(n,e,r=!1){const i=mat();if(i||tg){let o=tg?tg._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&n in o)return o[n];if(arguments.length>1)return r&&Gt(e)?e.call(i&&i.proxy):e}}const gst=Symbol.for("v-scx"),yst=()=>rS(gst);function l1(n,e){return eL(n,null,e)}function $p(n,e,r){return eL(n,e,r)}function eL(n,e,r=Zn){const{immediate:i,deep:o,flush:s,once:a}=r,l=$i({},r),c=e&&i||!e&&s!=="post";let u;if(yb){if(s==="sync"){const m=yst();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=wl,m.resume=wl,m.pause=wl,m}}const d=wo;l.call=(m,v,x)=>Lc(m,d,v,x);let h=!1;s==="post"?l.scheduler=m=>{Ms(m,d&&d.suspense)}:s!=="sync"&&(h=!0,l.scheduler=(m,v)=>{v?m():JR(m)}),l.augmentJob=m=>{e&&(m.flags|=4),h&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const f=rst(n,e,l);return yb&&(u?u.push(f):c&&f()),f}function vst(n,e,r){const i=this.proxy,o=bi(n)?n.includes(".")?Phe(i,n):()=>i[n]:n.bind(i,i);let s;Gt(e)?s=e:(s=e.handler,r=e);const a=kw(this),l=eL(o,s.bind(i),r);return a(),l}function Phe(n,e){const r=e.split(".");return()=>{let i=n;for(let o=0;o<r.length&&i;o++)i=i[r[o]];return i}}const xst=Symbol("_vte"),bst=n=>n.__isTeleport,wst=Symbol("_leaveCb");function tL(n,e){n.shapeFlag&6&&n.component?(n.transition=e,tL(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function qi(n,e){return Gt(n)?$i({name:n.name},e,{setup:n}):n}function Mhe(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const EC=new WeakMap;function sx(n,e,r,i,o=!1){if(Zt(n)){n.forEach((v,x)=>sx(v,e&&(Zt(e)?e[x]:e),r,i,o));return}if(ax(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&sx(n,e,r,i.component.subTree);return}const s=i.shapeFlag&4?oL(i.component):i.el,a=o?null:s,{i:l,r:c}=n,u=e&&e.r,d=l.refs===Zn?l.refs={}:l.refs,h=l.setupState,f=Sn(h),m=h===Zn?the:v=>Cn(f,v);if(u!=null&&u!==c){if(PZ(e),bi(u))d[u]=null,m(u)&&(h[u]=null);else if(io(u)){u.value=null;const v=e;v.k&&(d[v.k]=null)}}if(Gt(c))vw(c,l,12,[a,d]);else{const v=bi(c),x=io(c);if(v||x){const b=()=>{if(n.f){const w=v?m(c)?h[c]:d[c]:c.value;if(o)Zt(w)&&FR(w,s);else if(Zt(w))w.includes(s)||w.push(s);else if(v)d[c]=[s],m(c)&&(h[c]=d[c]);else{const S=[s];c.value=S,n.k&&(d[n.k]=S)}}else v?(d[c]=a,m(c)&&(h[c]=a)):x&&(c.value=a,n.k&&(d[n.k]=a))};if(a){const w=()=>{b(),EC.delete(n)};w.id=-1,EC.set(n,w),Ms(w,r)}else PZ(n),b()}}}function PZ(n){const e=EC.get(n);e&&(e.flags|=8,EC.delete(n))}zp().requestIdleCallback;zp().cancelIdleCallback;const ax=n=>!!n.type.__asyncLoader,Ehe=n=>n.type.__isKeepAlive;function kst(n,e){Nhe(n,"a",e)}function Sst(n,e){Nhe(n,"da",e)}function Nhe(n,e,r=wo){const i=n.__wdc||(n.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return n()});if(t7(e,i,r),r){let o=r.parent;for(;o&&o.parent;)Ehe(o.parent.vnode)&&Cst(i,e,r,o),o=o.parent}}function Cst(n,e,r,i){const o=t7(e,n,i,!0);bw(()=>{FR(i[e],o)},r)}function t7(n,e,r=wo,i=!1){if(r){const o=r[n]||(r[n]=[]),s=e.__weh||(e.__weh=(...a)=>{ad();const l=kw(r),c=Lc(e,r,n,a);return l(),ld(),c});return i?o.unshift(s):o.push(s),s}}const Ad=n=>(e,r=wo)=>{(!yb||n==="sp")&&t7(n,(...i)=>e(...i),r)},_st=Ad("bm"),xw=Ad("m"),Ast=Ad("bu"),Tst=Ad("u"),Pst=Ad("bum"),bw=Ad("um"),Mst=Ad("sp"),Est=Ad("rtg"),Nst=Ad("rtc");function jst(n,e=wo){t7("ec",n,e)}const Ost=Symbol.for("v-ndc"),TN=n=>n?Yhe(n)?oL(n):TN(n.parent):null,lx=$i(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>TN(n.parent),$root:n=>TN(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>__VUE_OPTIONS_API__?Ohe(n):n.type,$forceUpdate:n=>n.f||(n.f=()=>{JR(n.update)}),$nextTick:n=>n.n||(n.n=ost.bind(n.proxy)),$watch:n=>__VUE_OPTIONS_API__?vst.bind(n):wl}),TP=(n,e)=>n!==Zn&&!n.__isScriptSetup&&Cn(n,e),Dst={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:i,data:o,props:s,accessCache:a,type:l,appContext:c}=n;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return o[e];case 4:return r[e];case 3:return s[e]}else{if(TP(i,e))return a[e]=1,i[e];if(__VUE_OPTIONS_API__&&o!==Zn&&Cn(o,e))return a[e]=2,o[e];if(Cn(s,e))return a[e]=3,s[e];if(r!==Zn&&Cn(r,e))return a[e]=4,r[e];(!__VUE_OPTIONS_API__||PN)&&(a[e]=0)}}const u=lx[e];let d,h;if(u)return e==="$attrs"&&to(n.attrs,"get",""),u(n);if((d=l.__cssModules)&&(d=d[e]))return d;if(r!==Zn&&Cn(r,e))return a[e]=4,r[e];if(h=c.config.globalProperties,Cn(h,e))return h[e]},set({_:n},e,r){const{data:i,setupState:o,ctx:s}=n;return TP(o,e)?(o[e]=r,!0):__VUE_OPTIONS_API__&&i!==Zn&&Cn(i,e)?(i[e]=r,!0):Cn(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=r,!0)},has({_:{data:n,setupState:e,accessCache:r,ctx:i,appContext:o,props:s,type:a}},l){let c;return!!(r[l]||__VUE_OPTIONS_API__&&n!==Zn&&l[0]!=="$"&&Cn(n,l)||TP(e,l)||Cn(s,l)||Cn(i,l)||Cn(lx,l)||Cn(o.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(n,e,r){return r.get!=null?n._.accessCache[e]=0:Cn(r,"value")&&this.set(n,e,r.value,null),Reflect.defineProperty(n,e,r)}};function MZ(n){return Zt(n)?n.reduce((e,r)=>(e[r]=null,e),{}):n}let PN=!0;function Ist(n){const e=Ohe(n),r=n.proxy,i=n.ctx;PN=!1,e.beforeCreate&&EZ(e.beforeCreate,n,"bc");const{data:o,computed:s,methods:a,watch:l,provide:c,inject:u,created:d,beforeMount:h,mounted:f,beforeUpdate:m,updated:v,activated:x,deactivated:b,beforeDestroy:w,beforeUnmount:S,destroyed:_,unmounted:P,render:A,renderTracked:T,renderTriggered:E,errorCaptured:L,serverPrefetch:$,expose:z,inheritAttrs:B,components:D,directives:Y,filters:I}=e;if(u&&Rst(u,i,null),a)for(const te in a){const J=a[te];Gt(J)&&(i[te]=J.bind(r))}if(o){const te=o.call(r,r);Mr(te)&&(n.data=YR(te))}if(PN=!0,s)for(const te in s){const J=s[te],oe=Gt(J)?J.bind(r,r):Gt(J.get)?J.get.bind(r,r):wl,q=!Gt(J)&&Gt(J.set)?J.set.bind(r):wl,G=Eg({get:oe,set:q});Object.defineProperty(i,te,{enumerable:!0,configurable:!0,get:()=>G.value,set:re=>G.value=re})}if(l)for(const te in l)jhe(l[te],i,r,te);if(c){const te=Gt(c)?c.call(r):c;Reflect.ownKeys(te).forEach(J=>{mst(J,te[J])})}d&&EZ(d,n,"c");function Z(te,J){Zt(J)?J.forEach(oe=>te(oe.bind(r))):J&&te(J.bind(r))}if(Z(_st,h),Z(xw,f),Z(Ast,m),Z(Tst,v),Z(kst,x),Z(Sst,b),Z(jst,L),Z(Nst,T),Z(Est,E),Z(Pst,S),Z(bw,P),Z(Mst,$),Zt(z))if(z.length){const te=n.exposed||(n.exposed={});z.forEach(J=>{Object.defineProperty(te,J,{get:()=>r[J],set:oe=>r[J]=oe,enumerable:!0})})}else n.exposed||(n.exposed={});A&&n.render===wl&&(n.render=A),B!=null&&(n.inheritAttrs=B),D&&(n.components=D),Y&&(n.directives=Y),$&&Mhe(n)}function Rst(n,e,r=wl){Zt(n)&&(n=MN(n));for(const i in n){const o=n[i];let s;Mr(o)?"default"in o?s=rS(o.from||i,o.default,!0):s=rS(o.from||i):s=rS(o),io(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[i]=s}}function EZ(n,e,r){Lc(Zt(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,r)}function jhe(n,e,r,i){let o=i.includes(".")?Phe(r,i):()=>r[i];if(bi(n)){const s=e[n];Gt(s)&&$p(o,s)}else if(Gt(n))$p(o,n.bind(r));else if(Mr(n))if(Zt(n))n.forEach(s=>jhe(s,e,r,i));else{const s=Gt(n.handler)?n.handler.bind(r):e[n.handler];Gt(s)&&$p(o,s,n)}}function Ohe(n){const e=n.type,{mixins:r,extends:i}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,l=s.get(e);let c;return l?c=l:!o.length&&!r&&!i?c=e:(c={},o.length&&o.forEach(u=>NC(c,u,a,!0)),NC(c,e,a)),Mr(e)&&s.set(e,c),c}function NC(n,e,r,i=!1){const{mixins:o,extends:s}=e;s&&NC(n,s,r,!0),o&&o.forEach(a=>NC(n,a,r,!0));for(const a in e)if(!(i&&a==="expose")){const l=Lst[a]||r&&r[a];n[a]=l?l(n[a],e[a]):e[a]}return n}const Lst={data:NZ,props:jZ,emits:jZ,methods:av,computed:av,beforeCreate:go,created:go,beforeMount:go,mounted:go,beforeUpdate:go,updated:go,beforeDestroy:go,beforeUnmount:go,destroyed:go,unmounted:go,activated:go,deactivated:go,errorCaptured:go,serverPrefetch:go,components:av,directives:av,watch:Fst,provide:NZ,inject:zst};function NZ(n,e){return e?n?function(){return $i(Gt(n)?n.call(this,this):n,Gt(e)?e.call(this,this):e)}:e:n}function zst(n,e){return av(MN(n),MN(e))}function MN(n){if(Zt(n)){const e={};for(let r=0;r<n.length;r++)e[n[r]]=n[r];return e}return n}function go(n,e){return n?[...new Set([].concat(n,e))]:e}function av(n,e){return n?$i(Object.create(null),n,e):e}function jZ(n,e){return n?Zt(n)&&Zt(e)?[...new Set([...n,...e])]:$i(Object.create(null),MZ(n),MZ(e??{})):e}function Fst(n,e){if(!n)return e;if(!e)return n;const r=$i(Object.create(null),n);for(const i in e)r[i]=go(n[i],e[i]);return r}function Dhe(){return{app:null,config:{isNativeTag:the,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $st=0;function Bst(n,e){return function(i,o=null){Gt(i)||(i=$i({},i)),o!=null&&!Mr(o)&&(o=null);const s=Dhe(),a=new WeakSet,l=[];let c=!1;const u=s.app={_uid:$st++,_component:i,_props:o,_container:null,_context:s,_instance:null,version:FZ,get config(){return s.config},set config(d){},use(d,...h){return a.has(d)||(d&&Gt(d.install)?(a.add(d),d.install(u,...h)):Gt(d)&&(a.add(d),d(u,...h))),u},mixin(d){return __VUE_OPTIONS_API__&&(s.mixins.includes(d)||s.mixins.push(d)),u},component(d,h){return h?(s.components[d]=h,u):s.components[d]},directive(d,h){return h?(s.directives[d]=h,u):s.directives[d]},mount(d,h,f){if(!c){const m=u._ceVNode||pl(i,o);return m.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),n(m,d,f),c=!0,u._container=d,d.__vue_app__=u,__VUE_PROD_DEVTOOLS__&&(u._instance=m.component,lst(u,FZ)),oL(m.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Lc(l,u._instance,16),n(null,u._container),__VUE_PROD_DEVTOOLS__&&(u._instance=null,cst(u)),delete u._container.__vue_app__)},provide(d,h){return s.provides[d]=h,u},runWithContext(d){const h=tg;tg=u;try{return d()}finally{tg=h}}};return u}}let tg=null;const Hst=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${ef(e)}Modifiers`]||n[`${Pm(e)}Modifiers`];function qst(n,e,...r){if(n.isUnmounted)return;const i=n.vnode.props||Zn;let o=r;const s=e.startsWith("update:"),a=s&&Hst(i,e.slice(7));a&&(a.trim&&(o=r.map(d=>bi(d)?d.trim():d)),a.number&&(o=r.map(kot))),__VUE_PROD_DEVTOOLS__&&fst(n,e,o);let l,c=i[l=kP(e)]||i[l=kP(ef(e))];!c&&s&&(c=i[l=kP(Pm(e))]),c&&Lc(c,n,6,o);const u=i[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,Lc(u,n,6,o)}}const Vst=new WeakMap;function Ihe(n,e,r=!1){const i=__VUE_OPTIONS_API__&&r?Vst:e.emitsCache,o=i.get(n);if(o!==void 0)return o;const s=n.emits;let a={},l=!1;if(__VUE_OPTIONS_API__&&!Gt(n)){const c=u=>{const d=Ihe(u,e,!0);d&&(l=!0,$i(a,d))};!r&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!l?(Mr(n)&&i.set(n,null),null):(Zt(s)?s.forEach(c=>a[c]=null):$i(a,s),Mr(n)&&i.set(n,a),a)}function n7(n,e){return!n||!Z6(e)?!1:(e=e.slice(2).replace(/Once$/,""),Cn(n,e[0].toLowerCase()+e.slice(1))||Cn(n,Pm(e))||Cn(n,e))}function OZ(n){const{type:e,vnode:r,proxy:i,withProxy:o,propsOptions:[s],slots:a,attrs:l,emit:c,render:u,renderCache:d,props:h,data:f,setupState:m,ctx:v,inheritAttrs:x}=n,b=MC(n);let w,S;try{if(r.shapeFlag&4){const P=o||i,A=P;w=lc(u.call(A,P,d,h,m,f,v)),S=l}else{const P=e;w=lc(P.length>1?P(h,{attrs:l,slots:a,emit:c}):P(h,null)),S=e.props?l:Wst(l)}}catch(P){Q6(P,n,1),w=pl(ym)}let _=w;if(S&&x!==!1){const P=Object.keys(S),{shapeFlag:A}=_;P.length&&A&7&&(s&&P.some(zR)&&(S=Ust(S,s)),_=Mg(_,S,!1,!0))}return r.dirs&&(_=Mg(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&tL(_,r.transition),w=_,MC(b),w}const Wst=n=>{let e;for(const r in n)(r==="class"||r==="style"||Z6(r))&&((e||(e={}))[r]=n[r]);return e},Ust=(n,e)=>{const r={};for(const i in n)(!zR(i)||!(i.slice(9)in e))&&(r[i]=n[i]);return r};function Kst(n,e,r){const{props:i,children:o,component:s}=n,{props:a,children:l,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return i?DZ(i,a,u):!!a;if(c&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(a[f]!==i[f]&&!n7(u,f))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:i===a?!1:i?a?DZ(i,a,u):!0:!!a;return!1}function DZ(n,e,r){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let o=0;o<i.length;o++){const s=i[o];if(e[s]!==n[s]&&!n7(r,s))return!0}return!1}function Gst({vnode:n,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=r,e=e.parent;else break}}const Rhe={},Lhe=()=>Object.create(Rhe),zhe=n=>Object.getPrototypeOf(n)===Rhe;function Yst(n,e,r,i=!1){const o={},s=Lhe();n.propsDefaults=Object.create(null),Fhe(n,e,o,s);for(const a in n.propsOptions[0])a in o||(o[a]=void 0);r?n.props=i?o:Yot(o):n.type.props?n.props=o:n.props=s,n.attrs=s}function Zst(n,e,r,i){const{props:o,attrs:s,vnode:{patchFlag:a}}=n,l=Sn(o),[c]=n.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const d=n.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(n7(n.emitsOptions,f))continue;const m=e[f];if(c)if(Cn(s,f))m!==s[f]&&(s[f]=m,u=!0);else{const v=ef(f);o[v]=EN(c,l,v,m,n,!1)}else m!==s[f]&&(s[f]=m,u=!0)}}}else{Fhe(n,e,o,s)&&(u=!0);let d;for(const h in l)(!e||!Cn(e,h)&&((d=Pm(h))===h||!Cn(e,d)))&&(c?r&&(r[h]!==void 0||r[d]!==void 0)&&(o[h]=EN(c,l,h,void 0,n,!0)):delete o[h]);if(s!==l)for(const h in s)(!e||!Cn(e,h))&&(delete s[h],u=!0)}u&&Eu(n.attrs,"set","")}function Fhe(n,e,r,i){const[o,s]=n.propsOptions;let a=!1,l;if(e)for(let c in e){if(rx(c))continue;const u=e[c];let d;o&&Cn(o,d=ef(c))?!s||!s.includes(d)?r[d]=u:(l||(l={}))[d]=u:n7(n.emitsOptions,c)||(!(c in i)||u!==i[c])&&(i[c]=u,a=!0)}if(s){const c=Sn(r),u=l||Zn;for(let d=0;d<s.length;d++){const h=s[d];r[h]=EN(o,c,h,u[h],n,!Cn(u,h))}}return a}function EN(n,e,r,i,o,s){const a=n[r];if(a!=null){const l=Cn(a,"default");if(l&&i===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&Gt(c)){const{propsDefaults:u}=o;if(r in u)i=u[r];else{const d=kw(o);i=u[r]=c.call(null,e),d()}}else i=c;o.ce&&o.ce._setProp(r,i)}a[0]&&(s&&!l?i=!1:a[1]&&(i===""||i===Pm(r))&&(i=!0))}return i}const Xst=new WeakMap;function $he(n,e,r=!1){const i=__VUE_OPTIONS_API__&&r?Xst:e.propsCache,o=i.get(n);if(o)return o;const s=n.props,a={},l=[];let c=!1;if(__VUE_OPTIONS_API__&&!Gt(n)){const d=h=>{c=!0;const[f,m]=$he(h,e,!0);$i(a,f),m&&l.push(...m)};!r&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!s&&!c)return Mr(n)&&i.set(n,tx),tx;if(Zt(s))for(let d=0;d<s.length;d++){const h=ef(s[d]);IZ(h)&&(a[h]=Zn)}else if(s)for(const d in s){const h=ef(d);if(IZ(h)){const f=s[d],m=a[h]=Zt(f)||Gt(f)?{type:f}:$i({},f),v=m.type;let x=!1,b=!0;if(Zt(v))for(let w=0;w<v.length;++w){const S=v[w],_=Gt(S)&&S.name;if(_==="Boolean"){x=!0;break}else _==="String"&&(b=!1)}else x=Gt(v)&&v.name==="Boolean";m[0]=x,m[1]=b,(x||Cn(m,"default"))&&l.push(h)}}const u=[a,l];return Mr(n)&&i.set(n,u),u}function IZ(n){return n[0]!=="$"&&!rx(n)}const nL=n=>n==="_"||n==="_ctx"||n==="$stable",rL=n=>Zt(n)?n.map(lc):[lc(n)],Jst=(n,e,r)=>{if(e._n)return e;const i=pst((...o)=>rL(e(...o)),r);return i._c=!1,i},Bhe=(n,e,r)=>{const i=n._ctx;for(const o in n){if(nL(o))continue;const s=n[o];if(Gt(s))e[o]=Jst(o,s,i);else if(s!=null){const a=rL(s);e[o]=()=>a}}},Hhe=(n,e)=>{const r=rL(e);n.slots.default=()=>r},qhe=(n,e,r)=>{for(const i in e)(r||!nL(i))&&(n[i]=e[i])},Qst=(n,e,r)=>{const i=n.slots=Lhe();if(n.vnode.shapeFlag&32){const o=e._;o?(qhe(i,e,r),r&&_C(i,"_",o,!0)):Bhe(e,i)}else e&&Hhe(n,e)},eat=(n,e,r)=>{const{vnode:i,slots:o}=n;let s=!0,a=Zn;if(i.shapeFlag&32){const l=e._;l?r&&l===1?s=!1:qhe(o,e,r):(s=!e.$stable,Bhe(e,o)),a=e}else e&&(Hhe(n,e),a={default:1});if(s)for(const l in o)!nL(l)&&a[l]==null&&delete o[l]};function tat(){typeof __VUE_OPTIONS_API__!="boolean"&&(zp().__VUE_OPTIONS_API__=!0),typeof __VUE_PROD_DEVTOOLS__!="boolean"&&(zp().__VUE_PROD_DEVTOOLS__=!1),typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(zp().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const Ms=sat;function nat(n){return rat(n)}function rat(n,e){tat();const r=zp();r.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&_he(r.__VUE_DEVTOOLS_GLOBAL_HOOK__,r);const{insert:i,remove:o,patchProp:s,createElement:a,createText:l,createComment:c,setText:u,setElementText:d,parentNode:h,nextSibling:f,setScopeId:m=wl,insertStaticContent:v}=n,x=(F,X,ie,de=null,fe=null,be=null,Pe=void 0,Ie=null,Le=!!X.dynamicChildren)=>{if(F===X)return;F&&!ky(F,X)&&(de=me(F),re(F,fe,be,!0),F=null),X.patchFlag===-2&&(Le=!1,X.dynamicChildren=null);const{type:Ne,ref:at,shapeFlag:Ze}=X;switch(Ne){case ww:b(F,X,ie,de);break;case ym:w(F,X,ie,de);break;case iS:F==null&&S(X,ie,de,Pe);break;case gi:D(F,X,ie,de,fe,be,Pe,Ie,Le);break;default:Ze&1?A(F,X,ie,de,fe,be,Pe,Ie,Le):Ze&6?Y(F,X,ie,de,fe,be,Pe,Ie,Le):(Ze&64||Ze&128)&&Ne.process(F,X,ie,de,fe,be,Pe,Ie,Le,ze)}at!=null&&fe?sx(at,F&&F.ref,be,X||F,!X):at==null&&F&&F.ref!=null&&sx(F.ref,null,be,F,!0)},b=(F,X,ie,de)=>{if(F==null)i(X.el=l(X.children),ie,de);else{const fe=X.el=F.el;X.children!==F.children&&u(fe,X.children)}},w=(F,X,ie,de)=>{F==null?i(X.el=c(X.children||""),ie,de):X.el=F.el},S=(F,X,ie,de)=>{[F.el,F.anchor]=v(F.children,X,ie,de,F.el,F.anchor)},_=({el:F,anchor:X},ie,de)=>{let fe;for(;F&&F!==X;)fe=f(F),i(F,ie,de),F=fe;i(X,ie,de)},P=({el:F,anchor:X})=>{let ie;for(;F&&F!==X;)ie=f(F),o(F),F=ie;o(X)},A=(F,X,ie,de,fe,be,Pe,Ie,Le)=>{if(X.type==="svg"?Pe="svg":X.type==="math"&&(Pe="mathml"),F==null)T(X,ie,de,fe,be,Pe,Ie,Le);else{const Ne=F.el&&F.el._isVueCE?F.el:null;try{Ne&&Ne._beginPatch(),$(F,X,fe,be,Pe,Ie,Le)}finally{Ne&&Ne._endPatch()}}},T=(F,X,ie,de,fe,be,Pe,Ie)=>{let Le,Ne;const{props:at,shapeFlag:Ze,transition:ct,dirs:bt}=F;if(Le=F.el=a(F.type,be,at&&at.is,at),Ze&8?d(Le,F.children):Ze&16&&L(F.children,Le,null,de,fe,PP(F,be),Pe,Ie),bt&&qf(F,null,de,"created"),E(Le,F,F.scopeId,Pe,de),at){for(const Ee in at)Ee!=="value"&&!rx(Ee)&&s(Le,Ee,null,at[Ee],be,de);"value"in at&&s(Le,"value",null,at.value,be),(Ne=at.onVnodeBeforeMount)&&Zl(Ne,de,F)}__VUE_PROD_DEVTOOLS__&&(_C(Le,"__vnode",F,!0),_C(Le,"__vueParentComponent",de,!0)),bt&&qf(F,null,de,"beforeMount");const ge=iat(fe,ct);ge&&ct.beforeEnter(Le),i(Le,X,ie),((Ne=at&&at.onVnodeMounted)||ge||bt)&&Ms(()=>{Ne&&Zl(Ne,de,F),ge&&ct.enter(Le),bt&&qf(F,null,de,"mounted")},fe)},E=(F,X,ie,de,fe)=>{if(ie&&m(F,ie),de)for(let be=0;be<de.length;be++)m(F,de[be]);if(fe){let be=fe.subTree;if(X===be||Khe(be.type)&&(be.ssContent===X||be.ssFallback===X)){const Pe=fe.vnode;E(F,Pe,Pe.scopeId,Pe.slotScopeIds,fe.parent)}}},L=(F,X,ie,de,fe,be,Pe,Ie,Le=0)=>{for(let Ne=Le;Ne<F.length;Ne++){const at=F[Ne]=Ie?wh(F[Ne]):lc(F[Ne]);x(null,at,X,ie,de,fe,be,Pe,Ie)}},$=(F,X,ie,de,fe,be,Pe)=>{const Ie=X.el=F.el;__VUE_PROD_DEVTOOLS__&&(Ie.__vnode=X);let{patchFlag:Le,dynamicChildren:Ne,dirs:at}=X;Le|=F.patchFlag&16;const Ze=F.props||Zn,ct=X.props||Zn;let bt;if(ie&&Vf(ie,!1),(bt=ct.onVnodeBeforeUpdate)&&Zl(bt,ie,X,F),at&&qf(X,F,ie,"beforeUpdate"),ie&&Vf(ie,!0),(Ze.innerHTML&&ct.innerHTML==null||Ze.textContent&&ct.textContent==null)&&d(Ie,""),Ne?z(F.dynamicChildren,Ne,Ie,ie,de,PP(X,fe),be):Pe||J(F,X,Ie,null,ie,de,PP(X,fe),be,!1),Le>0){if(Le&16)B(Ie,Ze,ct,ie,fe);else if(Le&2&&Ze.class!==ct.class&&s(Ie,"class",null,ct.class,fe),Le&4&&s(Ie,"style",Ze.style,ct.style,fe),Le&8){const ge=X.dynamicProps;for(let Ee=0;Ee<ge.length;Ee++){const Xe=ge[Ee],Ct=Ze[Xe],Mt=ct[Xe];(Mt!==Ct||Xe==="value")&&s(Ie,Xe,Ct,Mt,fe,ie)}}Le&1&&F.children!==X.children&&d(Ie,X.children)}else!Pe&&Ne==null&&B(Ie,Ze,ct,ie,fe);((bt=ct.onVnodeUpdated)||at)&&Ms(()=>{bt&&Zl(bt,ie,X,F),at&&qf(X,F,ie,"updated")},de)},z=(F,X,ie,de,fe,be,Pe)=>{for(let Ie=0;Ie<X.length;Ie++){const Le=F[Ie],Ne=X[Ie],at=Le.el&&(Le.type===gi||!ky(Le,Ne)||Le.shapeFlag&198)?h(Le.el):ie;x(Le,Ne,at,null,de,fe,be,Pe,!0)}},B=(F,X,ie,de,fe)=>{if(X!==ie){if(X!==Zn)for(const be in X)!rx(be)&&!(be in ie)&&s(F,be,X[be],null,fe,de);for(const be in ie){if(rx(be))continue;const Pe=ie[be],Ie=X[be];Pe!==Ie&&be!=="value"&&s(F,be,Ie,Pe,fe,de)}"value"in ie&&s(F,"value",X.value,ie.value,fe)}},D=(F,X,ie,de,fe,be,Pe,Ie,Le)=>{const Ne=X.el=F?F.el:l(""),at=X.anchor=F?F.anchor:l("");let{patchFlag:Ze,dynamicChildren:ct,slotScopeIds:bt}=X;bt&&(Ie=Ie?Ie.concat(bt):bt),F==null?(i(Ne,ie,de),i(at,ie,de),L(X.children||[],ie,at,fe,be,Pe,Ie,Le)):Ze>0&&Ze&64&&ct&&F.dynamicChildren&&F.dynamicChildren.length===ct.length?(z(F.dynamicChildren,ct,ie,fe,be,Pe,Ie),(X.key!=null||fe&&X===fe.subTree)&&Vhe(F,X,!0)):J(F,X,ie,at,fe,be,Pe,Ie,Le)},Y=(F,X,ie,de,fe,be,Pe,Ie,Le)=>{X.slotScopeIds=Ie,F==null?X.shapeFlag&512?fe.ctx.activate(X,ie,de,Pe,Le):I(X,ie,de,fe,be,Pe,Le):U(F,X,Le)},I=(F,X,ie,de,fe,be,Pe)=>{const Ie=F.component=pat(F,de,fe);if(Ehe(F)&&(Ie.ctx.renderer=ze),gat(Ie,!1,Pe),Ie.asyncDep){if(fe&&fe.registerDep(Ie,Z,Pe),!F.el){const Le=Ie.subTree=pl(ym);w(null,Le,X,ie),F.placeholder=Le.el}}else Z(Ie,F,X,ie,fe,be,Pe)},U=(F,X,ie)=>{const de=X.component=F.component;if(Kst(F,X,ie))if(de.asyncDep&&!de.asyncResolved){te(de,X,ie);return}else de.next=X,de.update();else X.el=F.el,de.vnode=X},Z=(F,X,ie,de,fe,be,Pe)=>{const Ie=()=>{if(F.isMounted){let{next:Ze,bu:ct,u:bt,parent:ge,vnode:Ee}=F;{const Vn=Whe(F);if(Vn){Ze&&(Ze.el=Ee.el,te(F,Ze,Pe)),Vn.asyncDep.then(()=>{F.isUnmounted||Ie()});return}}let Xe=Ze,Ct;Vf(F,!1),Ze?(Ze.el=Ee.el,te(F,Ze,Pe)):Ze=Ee,ct&&SP(ct),(Ct=Ze.props&&Ze.props.onVnodeBeforeUpdate)&&Zl(Ct,ge,Ze,Ee),Vf(F,!0);const Mt=OZ(F),an=F.subTree;F.subTree=Mt,x(an,Mt,h(an.el),me(an),F,fe,be),Ze.el=Mt.el,Xe===null&&Gst(F,Mt.el),bt&&Ms(bt,fe),(Ct=Ze.props&&Ze.props.onVnodeUpdated)&&Ms(()=>Zl(Ct,ge,Ze,Ee),fe),__VUE_PROD_DEVTOOLS__&&Ahe(F)}else{let Ze;const{el:ct,props:bt}=X,{bm:ge,m:Ee,parent:Xe,root:Ct,type:Mt}=F,an=ax(X);Vf(F,!1),ge&&SP(ge),!an&&(Ze=bt&&bt.onVnodeBeforeMount)&&Zl(Ze,Xe,X),Vf(F,!0);{Ct.ce&&Ct.ce._def.shadowRoot!==!1&&Ct.ce._injectChildStyle(Mt);const Vn=F.subTree=OZ(F);x(null,Vn,ie,de,F,fe,be),X.el=Vn.el}if(Ee&&Ms(Ee,fe),!an&&(Ze=bt&&bt.onVnodeMounted)){const Vn=X;Ms(()=>Zl(Ze,Xe,Vn),fe)}(X.shapeFlag&256||Xe&&ax(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&F.a&&Ms(F.a,fe),F.isMounted=!0,__VUE_PROD_DEVTOOLS__&&ust(F),X=ie=de=null}};F.scope.on();const Le=F.effect=new ohe(Ie);F.scope.off();const Ne=F.update=Le.run.bind(Le),at=F.job=Le.runIfDirty.bind(Le);at.i=F,at.id=F.uid,Le.scheduler=()=>JR(at),Vf(F,!0),Ne()},te=(F,X,ie)=>{X.component=F;const de=F.vnode.props;F.vnode=X,F.next=null,Zst(F,X.props,de,ie),eat(F,X.children,ie),ad(),TZ(F),ld()},J=(F,X,ie,de,fe,be,Pe,Ie,Le=!1)=>{const Ne=F&&F.children,at=F?F.shapeFlag:0,Ze=X.children,{patchFlag:ct,shapeFlag:bt}=X;if(ct>0){if(ct&128){q(Ne,Ze,ie,de,fe,be,Pe,Ie,Le);return}else if(ct&256){oe(Ne,Ze,ie,de,fe,be,Pe,Ie,Le);return}}bt&8?(at&16&&pe(Ne,fe,be),Ze!==Ne&&d(ie,Ze)):at&16?bt&16?q(Ne,Ze,ie,de,fe,be,Pe,Ie,Le):pe(Ne,fe,be,!0):(at&8&&d(ie,""),bt&16&&L(Ze,ie,de,fe,be,Pe,Ie,Le))},oe=(F,X,ie,de,fe,be,Pe,Ie,Le)=>{F=F||tx,X=X||tx;const Ne=F.length,at=X.length,Ze=Math.min(Ne,at);let ct;for(ct=0;ct<Ze;ct++){const bt=X[ct]=Le?wh(X[ct]):lc(X[ct]);x(F[ct],bt,ie,null,fe,be,Pe,Ie,Le)}Ne>at?pe(F,fe,be,!0,!1,Ze):L(X,ie,de,fe,be,Pe,Ie,Le,Ze)},q=(F,X,ie,de,fe,be,Pe,Ie,Le)=>{let Ne=0;const at=X.length;let Ze=F.length-1,ct=at-1;for(;Ne<=Ze&&Ne<=ct;){const bt=F[Ne],ge=X[Ne]=Le?wh(X[Ne]):lc(X[Ne]);if(ky(bt,ge))x(bt,ge,ie,null,fe,be,Pe,Ie,Le);else break;Ne++}for(;Ne<=Ze&&Ne<=ct;){const bt=F[Ze],ge=X[ct]=Le?wh(X[ct]):lc(X[ct]);if(ky(bt,ge))x(bt,ge,ie,null,fe,be,Pe,Ie,Le);else break;Ze--,ct--}if(Ne>Ze){if(Ne<=ct){const bt=ct+1,ge=bt<at?X[bt].el:de;for(;Ne<=ct;)x(null,X[Ne]=Le?wh(X[Ne]):lc(X[Ne]),ie,ge,fe,be,Pe,Ie,Le),Ne++}}else if(Ne>ct)for(;Ne<=Ze;)re(F[Ne],fe,be,!0),Ne++;else{const bt=Ne,ge=Ne,Ee=new Map;for(Ne=ge;Ne<=ct;Ne++){const dn=X[Ne]=Le?wh(X[Ne]):lc(X[Ne]);dn.key!=null&&Ee.set(dn.key,Ne)}let Xe,Ct=0;const Mt=ct-ge+1;let an=!1,Vn=0;const Wn=new Array(Mt);for(Ne=0;Ne<Mt;Ne++)Wn[Ne]=0;for(Ne=bt;Ne<=Ze;Ne++){const dn=F[Ne];if(Ct>=Mt){re(dn,fe,be,!0);continue}let Xt;if(dn.key!=null)Xt=Ee.get(dn.key);else for(Xe=ge;Xe<=ct;Xe++)if(Wn[Xe-ge]===0&&ky(dn,X[Xe])){Xt=Xe;break}Xt===void 0?re(dn,fe,be,!0):(Wn[Xt-ge]=Ne+1,Xt>=Vn?Vn=Xt:an=!0,x(dn,X[Xt],ie,null,fe,be,Pe,Ie,Le),Ct++)}const Yr=an?oat(Wn):tx;for(Xe=Yr.length-1,Ne=Mt-1;Ne>=0;Ne--){const dn=ge+Ne,Xt=X[dn],Rr=X[dn+1],yr=dn+1<at?Rr.el||Uhe(Rr):de;Wn[Ne]===0?x(null,Xt,ie,yr,fe,be,Pe,Ie,Le):an&&(Xe<0||Ne!==Yr[Xe]?G(Xt,ie,yr,2):Xe--)}}},G=(F,X,ie,de,fe=null)=>{const{el:be,type:Pe,transition:Ie,children:Le,shapeFlag:Ne}=F;if(Ne&6){G(F.component.subTree,X,ie,de);return}if(Ne&128){F.suspense.move(X,ie,de);return}if(Ne&64){Pe.move(F,X,ie,ze);return}if(Pe===gi){i(be,X,ie);for(let Ze=0;Ze<Le.length;Ze++)G(Le[Ze],X,ie,de);i(F.anchor,X,ie);return}if(Pe===iS){_(F,X,ie);return}if(de!==2&&Ne&1&&Ie)if(de===0)Ie.beforeEnter(be),i(be,X,ie),Ms(()=>Ie.enter(be),fe);else{const{leave:Ze,delayLeave:ct,afterLeave:bt}=Ie,ge=()=>{F.ctx.isUnmounted?o(be):i(be,X,ie)},Ee=()=>{be._isLeaving&&be[wst](!0),Ze(be,()=>{ge(),bt&&bt()})};ct?ct(be,ge,Ee):Ee()}else i(be,X,ie)},re=(F,X,ie,de=!1,fe=!1)=>{const{type:be,props:Pe,ref:Ie,children:Le,dynamicChildren:Ne,shapeFlag:at,patchFlag:Ze,dirs:ct,cacheIndex:bt}=F;if(Ze===-2&&(fe=!1),Ie!=null&&(ad(),sx(Ie,null,ie,F,!0),ld()),bt!=null&&(X.renderCache[bt]=void 0),at&256){X.ctx.deactivate(F);return}const ge=at&1&&ct,Ee=!ax(F);let Xe;if(Ee&&(Xe=Pe&&Pe.onVnodeBeforeUnmount)&&Zl(Xe,X,F),at&6)ke(F.component,ie,de);else{if(at&128){F.suspense.unmount(ie,de);return}ge&&qf(F,null,X,"beforeUnmount"),at&64?F.type.remove(F,X,ie,ze,de):Ne&&!Ne.hasOnce&&(be!==gi||Ze>0&&Ze&64)?pe(Ne,X,ie,!1,!0):(be===gi&&Ze&384||!fe&&at&16)&&pe(Le,X,ie),de&&V(F)}(Ee&&(Xe=Pe&&Pe.onVnodeUnmounted)||ge)&&Ms(()=>{Xe&&Zl(Xe,X,F),ge&&qf(F,null,X,"unmounted")},ie)},V=F=>{const{type:X,el:ie,anchor:de,transition:fe}=F;if(X===gi){ve(ie,de);return}if(X===iS){P(F);return}const be=()=>{o(ie),fe&&!fe.persisted&&fe.afterLeave&&fe.afterLeave()};if(F.shapeFlag&1&&fe&&!fe.persisted){const{leave:Pe,delayLeave:Ie}=fe,Le=()=>Pe(ie,be);Ie?Ie(F.el,be,Le):Le()}else be()},ve=(F,X)=>{let ie;for(;F!==X;)ie=f(F),o(F),F=ie;o(X)},ke=(F,X,ie)=>{const{bum:de,scope:fe,job:be,subTree:Pe,um:Ie,m:Le,a:Ne}=F;RZ(Le),RZ(Ne),de&&SP(de),fe.stop(),be&&(be.flags|=8,re(Pe,F,X,ie)),Ie&&Ms(Ie,X),Ms(()=>{F.isUnmounted=!0},X),__VUE_PROD_DEVTOOLS__&&hst(F)},pe=(F,X,ie,de=!1,fe=!1,be=0)=>{for(let Pe=be;Pe<F.length;Pe++)re(F[Pe],X,ie,de,fe)},me=F=>{if(F.shapeFlag&6)return me(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const X=f(F.anchor||F.el),ie=X&&X[xst];return ie?f(ie):X};let Me=!1;const le=(F,X,ie)=>{let de;F==null?X._vnode&&(re(X._vnode,null,null,!0),de=X._vnode.component):x(X._vnode||null,F,X,null,null,null,ie),X._vnode=F,Me||(Me=!0,TZ(de),She(),Me=!1)},ze={p:x,um:re,m:G,r:V,mt:I,mc:L,pc:J,pbc:z,n:me,o:n};return{render:le,hydrate:void 0,createApp:Bst(le)}}function PP({type:n,props:e},r){return r==="svg"&&n==="foreignObject"||r==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Vf({effect:n,job:e},r){r?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function iat(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Vhe(n,e,r=!1){const i=n.children,o=e.children;if(Zt(i)&&Zt(o))for(let s=0;s<i.length;s++){const a=i[s];let l=o[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[s]=wh(o[s]),l.el=a.el),!r&&l.patchFlag!==-2&&Vhe(a,l)),l.type===ww&&(l.patchFlag!==-1?l.el=a.el:l.__elIndex=s+(n.type===gi?1:0)),l.type===ym&&!l.el&&(l.el=a.el)}}function oat(n){const e=n.slice(),r=[0];let i,o,s,a,l;const c=n.length;for(i=0;i<c;i++){const u=n[i];if(u!==0){if(o=r[r.length-1],n[o]<u){e[i]=o,r.push(i);continue}for(s=0,a=r.length-1;s<a;)l=s+a>>1,n[r[l]]<u?s=l+1:a=l;u<n[r[s]]&&(s>0&&(e[i]=r[s-1]),r[s]=i)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=e[a];return r}function Whe(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Whe(e)}function RZ(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}function Uhe(n){if(n.placeholder)return n.placeholder;const e=n.component;return e?Uhe(e.subTree):null}const Khe=n=>n.__isSuspense;function sat(n,e){e&&e.pendingBranch?Zt(n)?e.effects.push(...n):e.effects.push(n):ast(n)}const gi=Symbol.for("v-fgt"),ww=Symbol.for("v-txt"),ym=Symbol.for("v-cmt"),iS=Symbol.for("v-stc");function jC(n){return n?n.__v_isVNode===!0:!1}function ky(n,e){return n.type===e.type&&n.key===e.key}const Ghe=({key:n})=>n??null,oS=({ref:n,ref_key:e,ref_for:r})=>(typeof n=="number"&&(n=""+n),n!=null?bi(n)||io(n)||Gt(n)?{i:xc,r:n,k:e,f:!!r}:n:null);function aat(n,e=null,r=null,i=0,o=null,s=n===gi?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Ghe(e),ref:e&&oS(e),scopeId:The,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:xc};return l?(iL(c,r),s&128&&n.normalize(c)):r&&(c.shapeFlag|=bi(r)?8:16),c}const pl=lat;function lat(n,e=null,r=null,i=0,o=null,s=!1){if((!n||n===Ost)&&(n=ym),jC(n)){const l=Mg(n,e,!0);return r&&iL(l,r),l.patchFlag=-2,l}if(bat(n)&&(n=n.__vccOpts),e){e=cat(e);let{class:l,style:c}=e;l&&!bi(l)&&(e.class=HR(l)),Mr(c)&&(XR(c)&&!Zt(c)&&(c=$i({},c)),e.style=BR(c))}const a=bi(n)?1:Khe(n)?128:bst(n)?64:Mr(n)?4:Gt(n)?2:0;return aat(n,e,r,i,o,a,s,!0)}function cat(n){return n?XR(n)||zhe(n)?$i({},n):n:null}function Mg(n,e,r=!1,i=!1){const{props:o,ref:s,patchFlag:a,children:l,transition:c}=n,u=e?dat(o||{},e):o,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Ghe(u),ref:e&&e.ref?r&&s?Zt(s)?s.concat(oS(e)):[s,oS(e)]:oS(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==gi?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Mg(n.ssContent),ssFallback:n.ssFallback&&Mg(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&i&&tL(d,c.clone(d)),d}function uat(n=" ",e=0){return pl(ww,null,n,e)}function lc(n){return n==null||typeof n=="boolean"?pl(ym):Zt(n)?pl(gi,null,n.slice()):jC(n)?wh(n):pl(ww,null,String(n))}function wh(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Mg(n)}function iL(n,e){let r=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Zt(e))r=16;else if(typeof e=="object")if(i&65){const o=e.default;o&&(o._c&&(o._d=!1),iL(n,o()),o._c&&(o._d=!0));return}else{r=32;const o=e._;!o&&!zhe(e)?e._ctx=xc:o===3&&xc&&(xc.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Gt(e)?(e={default:e,_ctx:xc},r=32):(e=String(e),i&64?(r=16,e=[uat(e)]):r=8);n.children=e,n.shapeFlag|=r}function dat(...n){const e={};for(let r=0;r<n.length;r++){const i=n[r];for(const o in i)if(o==="class")e.class!==i.class&&(e.class=HR([e.class,i.class]));else if(o==="style")e.style=BR([e.style,i.style]);else if(Z6(o)){const s=e[o],a=i[o];a&&s!==a&&!(Zt(s)&&s.includes(a))&&(e[o]=s?[].concat(s,a):a)}else o!==""&&(e[o]=i[o])}return e}function Zl(n,e,r,i=null){Lc(n,e,7,[r,i])}const hat=Dhe();let fat=0;function pat(n,e,r){const i=n.type,o=(e?e.appContext:n.appContext)||hat,s={uid:fat++,vnode:n,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mot(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$he(i,o),emitsOptions:Ihe(i,o),emit:null,emitted:null,propsDefaults:Zn,inheritAttrs:i.inheritAttrs,ctx:Zn,data:Zn,props:Zn,attrs:Zn,slots:Zn,refs:Zn,setupState:Zn,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=qst.bind(null,s),n.ce&&n.ce(s),s}let wo=null;const mat=()=>wo||xc;let OC,NN;{const n=zp(),e=(r,i)=>{let o;return(o=n[r])||(o=n[r]=[]),o.push(i),s=>{o.length>1?o.forEach(a=>a(s)):o[0](s)}};OC=e("__VUE_INSTANCE_SETTERS__",r=>wo=r),NN=e("__VUE_SSR_SETTERS__",r=>yb=r)}const kw=n=>{const e=wo;return OC(n),n.scope.on(),()=>{n.scope.off(),OC(e)}},LZ=()=>{wo&&wo.scope.off(),OC(null)};function Yhe(n){return n.vnode.shapeFlag&4}let yb=!1;function gat(n,e=!1,r=!1){e&&NN(e);const{props:i,children:o}=n.vnode,s=Yhe(n);Yst(n,i,s,e),Qst(n,o,r||e);const a=s?yat(n,e):void 0;return e&&NN(!1),a}function yat(n,e){const r=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Dst);const{setup:i}=r;if(i){ad();const o=n.setupContext=i.length>1?xat(n):null,s=kw(n),a=vw(i,n,0,[n.props,o]),l=nhe(a);if(ld(),s(),(l||n.sp)&&!ax(n)&&Mhe(n),l){if(a.then(LZ,LZ),e)return a.then(c=>{zZ(n,c)}).catch(c=>{Q6(c,n,0)});n.asyncDep=a}else zZ(n,a)}else Zhe(n)}function zZ(n,e,r){Gt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Mr(e)&&(__VUE_PROD_DEVTOOLS__&&(n.devtoolsRawSetupState=e),n.setupState=bhe(e)),Zhe(n)}function Zhe(n,e,r){const i=n.type;if(n.render||(n.render=i.render||wl),__VUE_OPTIONS_API__){const o=kw(n);ad();try{Ist(n)}finally{ld(),o()}}}const vat={get(n,e){return to(n,"get",""),n[e]}};function xat(n){const e=r=>{n.exposed=r||{}};return{attrs:new Proxy(n.attrs,vat),slots:n.slots,emit:n.emit,expose:e}}function oL(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(bhe(Zot(n.exposed)),{get(e,r){if(r in e)return e[r];if(r in lx)return lx[r](n)},has(e,r){return r in e||r in lx}})):n.proxy}function bat(n){return Gt(n)&&"__vccOpts"in n}const Eg=(n,e)=>tst(n,e,yb);function Ae(n,e,r){{const i=arguments.length;return i===2?Mr(e)&&!Zt(e)?jC(e)?pl(n,null,[e]):pl(n,e):pl(n,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&jC(r)&&(r=[r]),pl(n,e,r))}}const FZ="3.5.27";let jN;const $Z=typeof window<"u"&&window.trustedTypes;if($Z)try{jN=$Z.createPolicy("vue",{createHTML:n=>n})}catch{}const Xhe=jN?n=>jN.createHTML(n):n=>n,wat="http://www.w3.org/2000/svg",kat="http://www.w3.org/1998/Math/MathML",wu=typeof document<"u"?document:null,BZ=wu&&wu.createElement("template"),Sat={insert:(n,e,r)=>{e.insertBefore(n,r||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,r,i)=>{const o=e==="svg"?wu.createElementNS(wat,n):e==="mathml"?wu.createElementNS(kat,n):r?wu.createElement(n,{is:r}):wu.createElement(n);return n==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:n=>wu.createTextNode(n),createComment:n=>wu.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>wu.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,r,i,o,s){const a=r?r.previousSibling:e.lastChild;if(o&&(o===s||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),r),!(o===s||!(o=o.nextSibling)););else{BZ.innerHTML=Xhe(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const l=BZ.content;if(i==="svg"||i==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Cat=Symbol("_vtc");function _at(n,e,r){const i=n[Cat];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):r?n.setAttribute("class",e):n.className=e}const HZ=Symbol("_vod"),Aat=Symbol("_vsh"),Tat=Symbol(""),Pat=/(?:^|;)\s*display\s*:/;function Mat(n,e,r){const i=n.style,o=bi(r);let s=!1;if(r&&!o){if(e)if(bi(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();r[l]==null&&sS(i,l,"")}else for(const a in e)r[a]==null&&sS(i,a,"");for(const a in r)a==="display"&&(s=!0),sS(i,a,r[a])}else if(o){if(e!==r){const a=i[Tat];a&&(r+=";"+a),i.cssText=r,s=Pat.test(r)}}else e&&n.removeAttribute("style");HZ in n&&(n[HZ]=s?i.display:"",n[Aat]&&(i.display="none"))}const qZ=/\s*!important$/;function sS(n,e,r){if(Zt(r))r.forEach(i=>sS(n,e,i));else if(r==null&&(r=""),e.startsWith("--"))n.setProperty(e,r);else{const i=Eat(n,e);qZ.test(r)?n.setProperty(Pm(i),r.replace(qZ,""),"important"):n[i]=r}}const VZ=["Webkit","Moz","ms"],MP={};function Eat(n,e){const r=MP[e];if(r)return r;let i=ef(e);if(i!=="filter"&&i in n)return MP[e]=i;i=rhe(i);for(let o=0;o<VZ.length;o++){const s=VZ[o]+i;if(s in n)return MP[e]=s}return e}const WZ="http://www.w3.org/1999/xlink";function UZ(n,e,r,i,o,s=Pot(e)){i&&e.startsWith("xlink:")?r==null?n.removeAttributeNS(WZ,e.slice(6,e.length)):n.setAttributeNS(WZ,e,r):r==null||s&&!ihe(r)?n.removeAttribute(e):n.setAttribute(e,s?"":a1(r)?String(r):r)}function KZ(n,e,r,i,o){if(e==="innerHTML"||e==="textContent"){r!=null&&(n[e]=e==="innerHTML"?Xhe(r):r);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?n.getAttribute("value")||"":n.value,c=r==null?n.type==="checkbox"?"on":"":String(r);(l!==c||!("_value"in n))&&(n.value=c),r==null&&n.removeAttribute(e),n._value=r;return}let a=!1;if(r===""||r==null){const l=typeof n[e];l==="boolean"?r=ihe(r):r==null&&l==="string"?(r="",a=!0):l==="number"&&(r=0,a=!0)}try{n[e]=r}catch{}a&&n.removeAttribute(o||e)}function Nat(n,e,r,i){n.addEventListener(e,r,i)}function jat(n,e,r,i){n.removeEventListener(e,r,i)}const GZ=Symbol("_vei");function Oat(n,e,r,i,o=null){const s=n[GZ]||(n[GZ]={}),a=s[e];if(i&&a)a.value=i;else{const[l,c]=Dat(e);if(i){const u=s[e]=Lat(i,o);Nat(n,l,u,c)}else a&&(jat(n,l,a,c),s[e]=void 0)}}const YZ=/(?:Once|Passive|Capture)$/;function Dat(n){let e;if(YZ.test(n)){e={};let i;for(;i=n.match(YZ);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Pm(n.slice(2)),e]}let EP=0;const Iat=Promise.resolve(),Rat=()=>EP||(Iat.then(()=>EP=0),EP=Date.now());function Lat(n,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Lc(zat(i,r.value),e,5,[i])};return r.value=n,r.attached=Rat(),r}function zat(n,e){if(Zt(e)){const r=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{r.call(n),n._stopped=!0},e.map(i=>o=>!o._stopped&&i&&i(o))}else return e}const ZZ=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Fat=(n,e,r,i,o,s)=>{const a=o==="svg";e==="class"?_at(n,i,a):e==="style"?Mat(n,r,i):Z6(e)?zR(e)||Oat(n,e,r,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$at(n,e,i,a))?(KZ(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&UZ(n,e,i,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!bi(i))?KZ(n,ef(e),i,s,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),UZ(n,e,i,a))};function $at(n,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&ZZ(e)&&Gt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&n.tagName==="IFRAME"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=n.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return ZZ(e)&&bi(r)?!1:e in n}const Bat=$i({patchProp:Fat},Sat);let XZ;function Hat(){return XZ||(XZ=nat(Bat))}const Ll=((...n)=>{const e=Hat().createApp(...n),{mount:r}=e;return e.mount=i=>{const o=Vat(i);if(!o)return;const s=e._component;!Gt(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=r(o,!1,qat(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},e});function qat(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Vat(n){return bi(n)?document.querySelector(n):n}function Wat(n){const e=En({},`${n}_SLASH_SPEC`),r=Kr(o=>{const s=o.get(e.key);return new ar({key:new lr(`${n}_SLASH`),...s})}),i=[e,r];return i.key=e.key,i.pluginKey=r.key,e.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${n}`},r.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${n}`},i}class Uat{constructor(e){this.#t=!1,this.onShow=()=>{},this.onHide=()=>{},this.#u=(r,i)=>{const{state:o,composing:s}=r,{selection:a,doc:l}=o,{ranges:c}=a,u=Math.min(...c.map(m=>m.$from.pos)),d=Math.max(...c.map(m=>m.$to.pos)),h=i&&i.doc.eq(l)&&i.selection.eq(a);if(this.#t||((this.#n??r.dom.parentElement??document.body).appendChild(this.element),this.#t=!0),s||h)return;if(!this.#o(r,i)){this.hide();return}Ic({getBoundingClientRect:()=>_3(r,u,d)},this.element,{placement:"bottom-start",middleware:[WI(),gm(this.#l),...this.#e],...this.#r}).then(({x:m,y:v})=>{Object.assign(this.element.style,{left:`${m}px`,top:`${v}px`})}).catch(console.error),this.show()},this.update=(r,i)=>{this.#s(r,i)},this.getContent=(r,i=o=>o.type.name==="paragraph")=>{const{selection:o}=r.state,{empty:s,$from:a}=o,l=r.state.selection instanceof xt;if(typeof document>"u")return;const c=this.element.contains(document.activeElement),u=!r.hasFocus()&&!c,d=!r.editable,f=!$8e(i)(r.state.selection);if(!(u||d||!s||!l||f))return a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"")},this.destroy=()=>{this.#s.cancel()},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=e.content,this.#a=e.debounce??200,this.#o=e.shouldShow??this.#c,this.#i=e.trigger??"/",this.#l=e.offset,this.#e=e.middleware??[],this.#r=e.floatingUIOptions??{},this.#n=e.root,this.#s=Hb(this.#u,this.#a)}#t;#e;#r;#n;#a;#i;#o;#s;#l;#u;#c(e){const r=this.getContent(e);if(!r)return!1;const i=r.at(-1);return i?Array.isArray(this.#i)?this.#i.includes(i):this.#i===i:!1}}const{entries:Jhe,setPrototypeOf:JZ,isFrozen:Kat,getPrototypeOf:Gat,getOwnPropertyDescriptor:Yat}=Object;let{freeze:Do,seal:Na,create:ON}=Object,{apply:DN,construct:IN}=typeof Reflect<"u"&&Reflect;Do||(Do=function(e){return e});Na||(Na=function(e){return e});DN||(DN=function(e,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return e.apply(r,o)});IN||(IN=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return new e(...i)});const $k=Io(Array.prototype.forEach),Zat=Io(Array.prototype.lastIndexOf),QZ=Io(Array.prototype.pop),Sy=Io(Array.prototype.push),Xat=Io(Array.prototype.splice),aS=Io(String.prototype.toLowerCase),NP=Io(String.prototype.toString),jP=Io(String.prototype.match),Cy=Io(String.prototype.replace),Jat=Io(String.prototype.indexOf),Qat=Io(String.prototype.trim),el=Io(Object.prototype.hasOwnProperty),fo=Io(RegExp.prototype.test),_y=elt(TypeError);function Io(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return DN(n,e,i)}}function elt(n){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return IN(n,r)}}function Qt(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:aS;JZ&&JZ(n,null);let i=e.length;for(;i--;){let o=e[i];if(typeof o=="string"){const s=r(o);s!==o&&(Kat(e)||(e[i]=s),o=s)}n[o]=!0}return n}function tlt(n){for(let e=0;e<n.length;e++)el(n,e)||(n[e]=null);return n}function Ql(n){const e=ON(null);for(const[r,i]of Jhe(n))el(n,r)&&(Array.isArray(i)?e[r]=tlt(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=Ql(i):e[r]=i);return e}function Ay(n,e){for(;n!==null;){const i=Yat(n,e);if(i){if(i.get)return Io(i.get);if(typeof i.value=="function")return Io(i.value)}n=Gat(n)}function r(){return null}return r}const eX=Do(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),OP=Do(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),DP=Do(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nlt=Do(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),IP=Do(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),rlt=Do(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),tX=Do(["#text"]),nX=Do(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),RP=Do(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rX=Do(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Bk=Do(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ilt=Na(/\{\{[\w\W]*|[\w\W]*\}\}/gm),olt=Na(/<%[\w\W]*|[\w\W]*%>/gm),slt=Na(/\$\{[\w\W]*/gm),alt=Na(/^data-[\-\w.\u00B7-\uFFFF]+$/),llt=Na(/^aria-[\-\w]+$/),Qhe=Na(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),clt=Na(/^(?:\w+script|data):/i),ult=Na(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),efe=Na(/^html$/i),dlt=Na(/^[a-z][.\w]*(-[.\w]+)+$/i);var iX=Object.freeze({__proto__:null,ARIA_ATTR:llt,ATTR_WHITESPACE:ult,CUSTOM_ELEMENT:dlt,DATA_ATTR:alt,DOCTYPE_NAME:efe,ERB_EXPR:olt,IS_ALLOWED_URI:Qhe,IS_SCRIPT_OR_DATA:clt,MUSTACHE_EXPR:ilt,TMPLIT_EXPR:slt});const Ty={element:1,text:3,progressingInstruction:7,comment:8,document:9},hlt=function(){return typeof window>"u"?null:window},flt=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const o="data-tt-policy-suffix";r&&r.hasAttribute(o)&&(i=r.getAttribute(o));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},oX=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tfe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hlt();const e=wt=>tfe(wt);if(e.version="3.3.1",e.removed=[],!n||!n.document||n.document.nodeType!==Ty.document||!n.Element)return e.isSupported=!1,e;let{document:r}=n;const i=r,o=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:m}=n,v=c.prototype,x=Ay(v,"cloneNode"),b=Ay(v,"remove"),w=Ay(v,"nextSibling"),S=Ay(v,"childNodes"),_=Ay(v,"parentNode");if(typeof a=="function"){const wt=r.createElement("template");wt.content&&wt.content.ownerDocument&&(r=wt.content.ownerDocument)}let P,A="";const{implementation:T,createNodeIterator:E,createDocumentFragment:L,getElementsByTagName:$}=r,{importNode:z}=i;let B=oX();e.isSupported=typeof Jhe=="function"&&typeof _=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:D,ERB_EXPR:Y,TMPLIT_EXPR:I,DATA_ATTR:U,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:J,CUSTOM_ELEMENT:oe}=iX;let{IS_ALLOWED_URI:q}=iX,G=null;const re=Qt({},[...eX,...OP,...DP,...IP,...tX]);let V=null;const ve=Qt({},[...nX,...RP,...rX,...Bk]);let ke=Object.seal(ON(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,me=null;const Me=Object.seal(ON(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let le=!0,ze=!0,nt=!1,F=!0,X=!1,ie=!0,de=!1,fe=!1,be=!1,Pe=!1,Ie=!1,Le=!1,Ne=!0,at=!1;const Ze="user-content-";let ct=!0,bt=!1,ge={},Ee=null;const Xe=Qt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ct=null;const Mt=Qt({},["audio","video","img","source","image","track"]);let an=null;const Vn=Qt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wn="http://www.w3.org/1998/Math/MathML",Yr="http://www.w3.org/2000/svg",dn="http://www.w3.org/1999/xhtml";let Xt=dn,Rr=!1,yr=null;const Md=Qt({},[Wn,Yr,dn],NP);let $a=Qt({},["mi","mo","mn","ms","mtext"]),$o=Qt({},["annotation-xml"]);const Ba=Qt({},["title","style","font","a","script"]);let Ha=null;const vf=["application/xhtml+xml","text/html"],xf="text/html";let Qn=null,Xs=null;const Ed=r.createElement("form"),Nd=function(ae){return ae instanceof RegExp||ae instanceof Function},Js=function(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Xs&&Xs===ae)){if((!ae||typeof ae!="object")&&(ae={}),ae=Ql(ae),Ha=vf.indexOf(ae.PARSER_MEDIA_TYPE)===-1?xf:ae.PARSER_MEDIA_TYPE,Qn=Ha==="application/xhtml+xml"?NP:aS,G=el(ae,"ALLOWED_TAGS")?Qt({},ae.ALLOWED_TAGS,Qn):re,V=el(ae,"ALLOWED_ATTR")?Qt({},ae.ALLOWED_ATTR,Qn):ve,yr=el(ae,"ALLOWED_NAMESPACES")?Qt({},ae.ALLOWED_NAMESPACES,NP):Md,an=el(ae,"ADD_URI_SAFE_ATTR")?Qt(Ql(Vn),ae.ADD_URI_SAFE_ATTR,Qn):Vn,Ct=el(ae,"ADD_DATA_URI_TAGS")?Qt(Ql(Mt),ae.ADD_DATA_URI_TAGS,Qn):Mt,Ee=el(ae,"FORBID_CONTENTS")?Qt({},ae.FORBID_CONTENTS,Qn):Xe,pe=el(ae,"FORBID_TAGS")?Qt({},ae.FORBID_TAGS,Qn):Ql({}),me=el(ae,"FORBID_ATTR")?Qt({},ae.FORBID_ATTR,Qn):Ql({}),ge=el(ae,"USE_PROFILES")?ae.USE_PROFILES:!1,le=ae.ALLOW_ARIA_ATTR!==!1,ze=ae.ALLOW_DATA_ATTR!==!1,nt=ae.ALLOW_UNKNOWN_PROTOCOLS||!1,F=ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,X=ae.SAFE_FOR_TEMPLATES||!1,ie=ae.SAFE_FOR_XML!==!1,de=ae.WHOLE_DOCUMENT||!1,Pe=ae.RETURN_DOM||!1,Ie=ae.RETURN_DOM_FRAGMENT||!1,Le=ae.RETURN_TRUSTED_TYPE||!1,be=ae.FORCE_BODY||!1,Ne=ae.SANITIZE_DOM!==!1,at=ae.SANITIZE_NAMED_PROPS||!1,ct=ae.KEEP_CONTENT!==!1,bt=ae.IN_PLACE||!1,q=ae.ALLOWED_URI_REGEXP||Qhe,Xt=ae.NAMESPACE||dn,$a=ae.MATHML_TEXT_INTEGRATION_POINTS||$a,$o=ae.HTML_INTEGRATION_POINTS||$o,ke=ae.CUSTOM_ELEMENT_HANDLING||{},ae.CUSTOM_ELEMENT_HANDLING&&Nd(ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&Nd(ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&typeof ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ke.allowCustomizedBuiltInElements=ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(ze=!1),Ie&&(Pe=!0),ge&&(G=Qt({},tX),V=[],ge.html===!0&&(Qt(G,eX),Qt(V,nX)),ge.svg===!0&&(Qt(G,OP),Qt(V,RP),Qt(V,Bk)),ge.svgFilters===!0&&(Qt(G,DP),Qt(V,RP),Qt(V,Bk)),ge.mathMl===!0&&(Qt(G,IP),Qt(V,rX),Qt(V,Bk))),ae.ADD_TAGS&&(typeof ae.ADD_TAGS=="function"?Me.tagCheck=ae.ADD_TAGS:(G===re&&(G=Ql(G)),Qt(G,ae.ADD_TAGS,Qn))),ae.ADD_ATTR&&(typeof ae.ADD_ATTR=="function"?Me.attributeCheck=ae.ADD_ATTR:(V===ve&&(V=Ql(V)),Qt(V,ae.ADD_ATTR,Qn))),ae.ADD_URI_SAFE_ATTR&&Qt(an,ae.ADD_URI_SAFE_ATTR,Qn),ae.FORBID_CONTENTS&&(Ee===Xe&&(Ee=Ql(Ee)),Qt(Ee,ae.FORBID_CONTENTS,Qn)),ae.ADD_FORBID_CONTENTS&&(Ee===Xe&&(Ee=Ql(Ee)),Qt(Ee,ae.ADD_FORBID_CONTENTS,Qn)),ct&&(G["#text"]=!0),de&&Qt(G,["html","head","body"]),G.table&&(Qt(G,["tbody"]),delete pe.tbody),ae.TRUSTED_TYPES_POLICY){if(typeof ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw _y('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _y('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');P=ae.TRUSTED_TYPES_POLICY,A=P.createHTML("")}else P===void 0&&(P=flt(m,o)),P!==null&&typeof A=="string"&&(A=P.createHTML(""));Do&&Do(ae),Xs=ae}},Zc=Qt({},[...OP,...DP,...nlt]),qa=Qt({},[...IP,...rlt]),Nm=function(ae){let He=_(ae);(!He||!He.tagName)&&(He={namespaceURI:Xt,tagName:"template"});const ut=aS(ae.tagName),An=aS(He.tagName);return yr[ae.namespaceURI]?ae.namespaceURI===Yr?He.namespaceURI===dn?ut==="svg":He.namespaceURI===Wn?ut==="svg"&&(An==="annotation-xml"||$a[An]):!!Zc[ut]:ae.namespaceURI===Wn?He.namespaceURI===dn?ut==="math":He.namespaceURI===Yr?ut==="math"&&$o[An]:!!qa[ut]:ae.namespaceURI===dn?He.namespaceURI===Yr&&!$o[An]||He.namespaceURI===Wn&&!$a[An]?!1:!qa[ut]&&(Ba[ut]||!Zc[ut]):!!(Ha==="application/xhtml+xml"&&yr[ae.namespaceURI]):!1},Zr=function(ae){Sy(e.removed,{element:ae});try{_(ae).removeChild(ae)}catch{b(ae)}},lo=function(ae,He){try{Sy(e.removed,{attribute:He.getAttributeNode(ae),from:He})}catch{Sy(e.removed,{attribute:null,from:He})}if(He.removeAttribute(ae),ae==="is")if(Pe||Ie)try{Zr(He)}catch{}else try{He.setAttribute(ae,"")}catch{}},$l=function(ae){let He=null,ut=null;if(be)ae="<remove></remove>"+ae;else{const er=jP(ae,/^[\r\n\t ]+/);ut=er&&er[0]}Ha==="application/xhtml+xml"&&Xt===dn&&(ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ae+"</body></html>");const An=P?P.createHTML(ae):ae;if(Xt===dn)try{He=new f().parseFromString(An,Ha)}catch{}if(!He||!He.documentElement){He=T.createDocument(Xt,"template",null);try{He.documentElement.innerHTML=Rr?A:An}catch{}}const Wt=He.body||He.documentElement;return ae&&ut&&Wt.insertBefore(r.createTextNode(ut),Wt.childNodes[0]||null),Xt===dn?$.call(He,de?"html":"body")[0]:de?He.documentElement:Wt},Xc=function(ae){return E.call(ae.ownerDocument||ae,ae,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},jd=function(ae){return ae instanceof h&&(typeof ae.nodeName!="string"||typeof ae.textContent!="string"||typeof ae.removeChild!="function"||!(ae.attributes instanceof d)||typeof ae.removeAttribute!="function"||typeof ae.setAttribute!="function"||typeof ae.namespaceURI!="string"||typeof ae.insertBefore!="function"||typeof ae.hasChildNodes!="function")},bf=function(ae){return typeof l=="function"&&ae instanceof l};function Bo(wt,ae,He){$k(wt,ut=>{ut.call(e,ae,He,Xs)})}const xs=function(ae){let He=null;if(Bo(B.beforeSanitizeElements,ae,null),jd(ae))return Zr(ae),!0;const ut=Qn(ae.nodeName);if(Bo(B.uponSanitizeElement,ae,{tagName:ut,allowedTags:G}),ie&&ae.hasChildNodes()&&!bf(ae.firstElementChild)&&fo(/<[/\w!]/g,ae.innerHTML)&&fo(/<[/\w!]/g,ae.textContent)||ae.nodeType===Ty.progressingInstruction||ie&&ae.nodeType===Ty.comment&&fo(/<[/\w]/g,ae.data))return Zr(ae),!0;if(!(Me.tagCheck instanceof Function&&Me.tagCheck(ut))&&(!G[ut]||pe[ut])){if(!pe[ut]&&Dd(ut)&&(ke.tagNameCheck instanceof RegExp&&fo(ke.tagNameCheck,ut)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(ut)))return!1;if(ct&&!Ee[ut]){const An=_(ae)||ae.parentNode,Wt=S(ae)||ae.childNodes;if(Wt&&An){const er=Wt.length;for(let Er=er-1;Er>=0;--Er){const co=x(Wt[Er],!0);co.__removalCount=(ae.__removalCount||0)+1,An.insertBefore(co,w(ae))}}}return Zr(ae),!0}return ae instanceof c&&!Nm(ae)||(ut==="noscript"||ut==="noembed"||ut==="noframes")&&fo(/<\/no(script|embed|frames)/i,ae.innerHTML)?(Zr(ae),!0):(X&&ae.nodeType===Ty.text&&(He=ae.textContent,$k([D,Y,I],An=>{He=Cy(He,An," ")}),ae.textContent!==He&&(Sy(e.removed,{element:ae.cloneNode()}),ae.textContent=He)),Bo(B.afterSanitizeElements,ae,null),!1)},Od=function(ae,He,ut){if(Ne&&(He==="id"||He==="name")&&(ut in r||ut in Ed))return!1;if(!(ze&&!me[He]&&fo(U,He))){if(!(le&&fo(Z,He))){if(!(Me.attributeCheck instanceof Function&&Me.attributeCheck(He,ae))){if(!V[He]||me[He]){if(!(Dd(ae)&&(ke.tagNameCheck instanceof RegExp&&fo(ke.tagNameCheck,ae)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(ae))&&(ke.attributeNameCheck instanceof RegExp&&fo(ke.attributeNameCheck,He)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(He,ae))||He==="is"&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&fo(ke.tagNameCheck,ut)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(ut))))return!1}else if(!an[He]){if(!fo(q,Cy(ut,J,""))){if(!((He==="src"||He==="xlink:href"||He==="href")&&ae!=="script"&&Jat(ut,"data:")===0&&Ct[ae])){if(!(nt&&!fo(te,Cy(ut,J,"")))){if(ut)return!1}}}}}}}return!0},Dd=function(ae){return ae!=="annotation-xml"&&jP(ae,oe)},wf=function(ae){Bo(B.beforeSanitizeAttributes,ae,null);const{attributes:He}=ae;if(!He||jd(ae))return;const ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0};let An=He.length;for(;An--;){const Wt=He[An],{name:er,namespaceURI:Er,value:co}=Wt,Ho=Qn(er),Id=co;let vr=er==="value"?Id:Qat(Id);if(ut.attrName=Ho,ut.attrValue=vr,ut.keepAttr=!0,ut.forceKeepAttr=void 0,Bo(B.uponSanitizeAttribute,ae,ut),vr=ut.attrValue,at&&(Ho==="id"||Ho==="name")&&(lo(er,ae),vr=Ze+vr),ie&&fo(/((--!?|])>)|<\/(style|title|textarea)/i,vr)){lo(er,ae);continue}if(Ho==="attributename"&&jP(vr,"href")){lo(er,ae);continue}if(ut.forceKeepAttr)continue;if(!ut.keepAttr){lo(er,ae);continue}if(!F&&fo(/\/>/i,vr)){lo(er,ae);continue}X&&$k([D,Y,I],Vi=>{vr=Cy(vr,Vi," ")});const Bl=Qn(ae.nodeName);if(!Od(Bl,Ho,vr)){lo(er,ae);continue}if(P&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Er)switch(m.getAttributeType(Bl,Ho)){case"TrustedHTML":{vr=P.createHTML(vr);break}case"TrustedScriptURL":{vr=P.createScriptURL(vr);break}}if(vr!==Id)try{Er?ae.setAttributeNS(Er,er,vr):ae.setAttribute(er,vr),jd(ae)?Zr(ae):QZ(e.removed)}catch{lo(er,ae)}}Bo(B.afterSanitizeAttributes,ae,null)},kf=function wt(ae){let He=null;const ut=Xc(ae);for(Bo(B.beforeSanitizeShadowDOM,ae,null);He=ut.nextNode();)Bo(B.uponSanitizeShadowNode,He,null),xs(He),wf(He),He.content instanceof s&&wt(He.content);Bo(B.afterSanitizeShadowDOM,ae,null)};return e.sanitize=function(wt){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He=null,ut=null,An=null,Wt=null;if(Rr=!wt,Rr&&(wt="<!-->"),typeof wt!="string"&&!bf(wt))if(typeof wt.toString=="function"){if(wt=wt.toString(),typeof wt!="string")throw _y("dirty is not a string, aborting")}else throw _y("toString is not a function");if(!e.isSupported)return wt;if(fe||Js(ae),e.removed=[],typeof wt=="string"&&(bt=!1),bt){if(wt.nodeName){const co=Qn(wt.nodeName);if(!G[co]||pe[co])throw _y("root node is forbidden and cannot be sanitized in-place")}}else if(wt instanceof l)He=$l("<!---->"),ut=He.ownerDocument.importNode(wt,!0),ut.nodeType===Ty.element&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?He=ut:He.appendChild(ut);else{if(!Pe&&!X&&!de&&wt.indexOf("<")===-1)return P&&Le?P.createHTML(wt):wt;if(He=$l(wt),!He)return Pe?null:Le?A:""}He&&be&&Zr(He.firstChild);const er=Xc(bt?wt:He);for(;An=er.nextNode();)xs(An),wf(An),An.content instanceof s&&kf(An.content);if(bt)return wt;if(Pe){if(Ie)for(Wt=L.call(He.ownerDocument);He.firstChild;)Wt.appendChild(He.firstChild);else Wt=He;return(V.shadowroot||V.shadowrootmode)&&(Wt=z.call(i,Wt,!0)),Wt}let Er=de?He.outerHTML:He.innerHTML;return de&&G["!doctype"]&&He.ownerDocument&&He.ownerDocument.doctype&&He.ownerDocument.doctype.name&&fo(efe,He.ownerDocument.doctype.name)&&(Er="<!DOCTYPE "+He.ownerDocument.doctype.name+`>
`+Er),X&&$k([D,Y,I],co=>{Er=Cy(Er,co," ")}),P&&Le?P.createHTML(Er):Er},e.setConfig=function(){let wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Js(wt),fe=!0},e.clearConfig=function(){Xs=null,fe=!1},e.isValidAttribute=function(wt,ae,He){Xs||Js({});const ut=Qn(wt),An=Qn(ae);return Od(ut,An,He)},e.addHook=function(wt,ae){typeof ae=="function"&&Sy(B[wt],ae)},e.removeHook=function(wt,ae){if(ae!==void 0){const He=Zat(B[wt],ae);return He===-1?void 0:Xat(B[wt],He,1)[0]}return QZ(B[wt])},e.removeHooks=function(wt){B[wt]=[]},e.removeAllHooks=function(){B=oX()},e}var La=tfe();function Ng({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}Ng.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var plt=Object.defineProperty,sX=Object.getOwnPropertySymbols,mlt=Object.prototype.hasOwnProperty,glt=Object.prototype.propertyIsEnumerable,aX=(n,e,r)=>e in n?plt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ylt=(n,e)=>{for(var r in e||(e={}))mlt.call(e,r)&&aX(n,r,e[r]);if(sX)for(var r of sX(e))glt.call(e,r)&&aX(n,r,e[r]);return n};function Sw(n,e){return Object.assign(n,{meta:ylt({package:"@milkdown/components"},e)}),n}const vlt={imageIcon:"",captionIcon:"",uploadButton:"Upload file",confirmButton:"Confirm ",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:n=>Promise.resolve(URL.createObjectURL(n))},r7=En(vlt,"imageBlockConfigCtx");Sw(r7,{displayName:"Config<image-block>",group:"ImageBlock"});function xlt(n){return af(n,"paragraph",(e,r,i)=>{var o,s;if(((o=e.children)==null?void 0:o.length)!==1)return;const a=(s=e.children)==null?void 0:s[0];if(!a||a.type!=="image")return;const{url:l,alt:c,title:u}=a,d={type:"image-block",url:l,alt:c,title:u};i.children.splice(r,1,d)})}const sL=qc("remark-image-block",()=>()=>xlt);Sw(sL.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"});Sw(sL.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var blt=Object.defineProperty,lX=Object.getOwnPropertySymbols,wlt=Object.prototype.hasOwnProperty,klt=Object.prototype.propertyIsEnumerable,cX=(n,e,r)=>e in n?blt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Slt=(n,e)=>{for(var r in e||(e={}))wlt.call(e,r)&&cX(n,r,e[r]);if(lX)for(var r of lX(e))klt.call(e,r)&&cX(n,r,e[r]);return n};const RN="image-block",i7=Ir("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${RN}"]`,getAttrs:n=>{var e;if(!(n instanceof HTMLElement))throw Nl(n);return{src:n.getAttribute("src")||"",caption:n.getAttribute("caption")||"",ratio:Number((e=n.getAttribute("ratio"))!=null?e:1)}}}],toDOM:n=>["img",Slt({"data-type":RN},n.attrs)],parseMarkdown:{match:({type:n})=>n==="image-block",runner:(n,e,r)=>{const i=e.url,o=e.title;let s=Number(e.alt||1);(Number.isNaN(s)||s===0)&&(s=1),n.addNode(r,{src:i,caption:o,ratio:s})}},toMarkdown:{match:n=>n.type.name==="image-block",runner:(n,e)=>{n.openNode("paragraph"),n.addNode("image",void 0,void 0,{title:e.attrs.caption,url:e.attrs.src,alt:`${Number.parseFloat(e.attrs.ratio).toFixed(2)}`}),n.closeNode()}}}));Sw(i7.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"});function cx({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}cx.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Clt=$I("abcdefg",8),_lt=qi({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:n,src:e,setLink:r,onUpload:i,imageIcon:o,uploadButton:s,confirmButton:a,uploadPlaceholderText:l,className:c}){var u,d;const h=mt(!1),f=mt(),m=mt((u=e.value)!=null?u:""),v=mt(Clt()),x=mt(((d=e.value)==null?void 0:d.length)!==0),b=P=>{const T=P.target.value;x.value=T.length!==0,m.value=T},w=P=>{var A,T;P.key==="Enter"&&r((T=(A=f.value)==null?void 0:A.value)!=null?T:"")},S=()=>{var P,A;r((A=(P=f.value)==null?void 0:P.value)!=null?A:"")},_=P=>{var A;const T=(A=P.target.files)==null?void 0:A[0];T&&i(T).then(E=>{E&&(r(E),x.value=!0)}).catch(E=>{console.error("An error occurred while uploading image"),console.error(E)})};return()=>Ae("div",{class:Vt("image-edit",c)},Ae(cx,{icon:o,class:"image-icon"}),Ae("div",{class:Vt("link-importer",h.value&&"focus")},Ae("input",{ref:f,draggable:"true",onDragstart:P=>{P.preventDefault(),P.stopPropagation()},disabled:n.value,class:"link-input-area",value:m.value,onInput:b,onKeydown:w,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!x.value&&Ae("div",{class:"placeholder"},Ae("input",{disabled:n.value,class:"hidden",id:v.value,type:"file",accept:"image/*",onChange:_}),Ae("label",{class:"uploader",for:v.value},Ae(cx,{icon:s})),Ae("span",{class:"text",onClick:()=>{var P;return(P=f.value)==null?void 0:P.focus()}},l))),m.value&&Ae("div",{class:"confirm",onClick:()=>S()},Ae(cx,{icon:a})))}}),Alt=qi({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:n,caption:e,ratio:r,readonly:i,setAttr:o,config:s}){var a;const l=mt(),c=mt(),u=mt(!!((a=e.value)!=null&&a.length)),d=mt(0),h=()=>{var S;const _=l.value;if(!_)return;const P=_.closest(".milkdown-image-block");if(!P)return;const A=P.getBoundingClientRect().width;if(!A)return;const T=_.height,E=_.width,L=E<A?T:A*(T/E),$=(L*((S=r.value)!=null?S:1)).toFixed(2);_.dataset.origin=L.toFixed(2),_.dataset.height=$,_.style.height=`${$}px`},f=S=>{S.preventDefault(),S.stopPropagation(),!i.value&&(u.value=!u.value)},m=S=>{const P=S.target.value;d.value&&window.clearTimeout(d.value),d.value=window.setTimeout(()=>{o("caption",P)},1e3)},v=S=>{const P=S.target.value;d.value&&(window.clearTimeout(d.value),d.value=0),o("caption",P)},x=S=>{S.preventDefault();const _=l.value;if(!_)return;const P=_.getBoundingClientRect().top,A=S.clientY-P,T=Number(A<100?100:A).toFixed(2);_.dataset.height=T,_.style.height=`${T}px`},b=()=>{window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",b);const S=l.value;if(!S)return;const _=Number(S.dataset.origin),P=Number(S.dataset.height),A=Number.parseFloat(Number(P/_).toFixed(2));Number.isNaN(A)||o("ratio",A)},w=S=>{i.value||(S.preventDefault(),S.stopPropagation(),window.addEventListener("pointermove",x),window.addEventListener("pointerup",b))};return()=>Ae(gi,null,Ae("div",{class:"image-wrapper"},Ae("div",{class:"operation"},Ae("div",{class:"operation-item",onPointerdown:f},Ae(cx,{icon:s.captionIcon}))),Ae("img",{ref:l,"data-type":RN,onLoad:h,src:n.value,alt:e.value}),Ae("div",{ref:c,class:"image-resize-handle",onPointerdown:w})),u.value&&Ae("input",{draggable:"true",onDragstart:S=>{S.preventDefault(),S.stopPropagation()},class:"caption-input",placeholder:s?.captionPlaceholderText,onInput:m,onBlur:v,value:e.value}))}});var Tlt=Object.defineProperty,uX=Object.getOwnPropertySymbols,Plt=Object.prototype.hasOwnProperty,Mlt=Object.prototype.propertyIsEnumerable,dX=(n,e,r)=>e in n?Tlt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Elt=(n,e)=>{for(var r in e||(e={}))Plt.call(e,r)&&dX(n,r,e[r]);if(uX)for(var r of uX(e))Mlt.call(e,r)&&dX(n,r,e[r]);return n};const Nlt=qi({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(n){const{src:e}=n;return()=>{var r;return(r=e.value)!=null&&r.length?Ae(Alt,Elt({},n)):Ae(_lt,{src:n.src,selected:n.selected,readonly:n.readonly,setLink:i=>n.setAttr("src",i),imageIcon:n.config.imageIcon,uploadButton:n.config.uploadButton,confirmButton:n.config.confirmButton,uploadPlaceholderText:n.config.uploadPlaceholderText,onUpload:n.config.onUpload})}}}),nfe=pw(i7.node,n=>(e,r,i)=>{const o=mt(e.attrs.src),s=mt(e.attrs.caption),a=mt(e.attrs.ratio),l=mt(!1),c=mt(!r.editable),u=(b,w)=>{if(!r.editable)return;const S=i();S!=null&&r.dispatch(r.state.tr.setNodeAttribute(S,b,b==="src"?La.sanitize(w):w))},d=n.get(r7.key),h=Ll(Nlt,{src:o,caption:s,ratio:a,selected:l,readonly:c,setAttr:u,config:d}),f=document.createElement("div");f.className="milkdown-image-block";const m=l1(()=>{l.value?f.classList.add("selected"):f.classList.remove("selected")}),v=d.proxyDomURL,x=b=>{if(!v)o.value=b.attrs.src;else{const w=v(b.attrs.src);typeof w=="string"?o.value=w:w.then(S=>{o.value=S}).catch(console.error)}a.value=b.attrs.ratio,s.value=b.attrs.caption,c.value=!r.editable};return x(e),h.mount(f),{dom:f,update:b=>b.type!==e.type?!1:(x(b),!0),stopEvent:b=>b.target instanceof HTMLInputElement,selectNode:()=>{l.value=!0},deselectNode:()=>{l.value=!1},destroy:()=>{m(),h.unmount(),f.remove()}}});Sw(nfe,{displayName:"NodeView<image-block>",group:"ImageBlock"});const jlt=[sL,i7,nfe,r7].flat();let LN,zN;if(typeof WeakMap<"u"){let n=new WeakMap;LN=e=>n.get(e),zN=(e,r)=>(n.set(e,r),r)}else{const n=[];let r=0;LN=i=>{for(let o=0;o<n.length;o+=2)if(n[o]==i)return n[o+1]},zN=(i,o)=>(r==10&&(r=0),n[r++]=i,n[r++]=o)}var _n=class{constructor(n,e,r,i){this.width=n,this.height=e,this.map=r,this.problems=i}findCell(n){for(let e=0;e<this.map.length;e++){const r=this.map[e];if(r!=n)continue;const i=e%this.width,o=e/this.width|0;let s=i+1,a=o+1;for(let l=1;s<this.width&&this.map[e+l]==r;l++)s++;for(let l=1;a<this.height&&this.map[e+this.width*l]==r;l++)a++;return{left:i,top:o,right:s,bottom:a}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,r){const{left:i,right:o,top:s,bottom:a}=this.findCell(n);return e=="horiz"?(r<0?i==0:o==this.width)?null:this.map[s*this.width+(r<0?i-1:o)]:(r<0?s==0:a==this.height)?null:this.map[i+this.width*(r<0?s-1:a)]}rectBetween(n,e){const{left:r,right:i,top:o,bottom:s}=this.findCell(n),{left:a,right:l,top:c,bottom:u}=this.findCell(e);return{left:Math.min(r,a),top:Math.min(o,c),right:Math.max(i,l),bottom:Math.max(s,u)}}cellsInRect(n){const e=[],r={};for(let i=n.top;i<n.bottom;i++)for(let o=n.left;o<n.right;o++){const s=i*this.width+o,a=this.map[s];r[a]||(r[a]=!0,!(o==n.left&&o&&this.map[s-1]==a||i==n.top&&i&&this.map[s-this.width]==a)&&e.push(a))}return e}positionAt(n,e,r){for(let i=0,o=0;;i++){const s=o+r.child(i).nodeSize;if(i==n){let a=e+n*this.width;const l=(n+1)*this.width;for(;a<l&&this.map[a]<o;)a++;return a==l?s-1:this.map[a]}o=s}}static get(n){return LN(n)||zN(n,Olt(n))}};function Olt(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=Dlt(n),r=n.childCount,i=[];let o=0,s=null;const a=[];for(let u=0,d=e*r;u<d;u++)i[u]=0;for(let u=0,d=0;u<r;u++){const h=n.child(u);d++;for(let v=0;;v++){for(;o<i.length&&i[o]!=0;)o++;if(v==h.childCount)break;const x=h.child(v),{colspan:b,rowspan:w,colwidth:S}=x.attrs;for(let _=0;_<w;_++){if(_+u>=r){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:w-_});break}const P=o+_*e;for(let A=0;A<b;A++){i[P+A]==0?i[P+A]=d:(s||(s=[])).push({type:"collision",row:u,pos:d,n:b-A});const T=S&&S[A];if(T){const E=(P+A)%e*2,L=a[E];L==null||L!=T&&a[E+1]==1?(a[E]=T,a[E+1]=1):L==T&&a[E+1]++}}}o+=b,d+=x.nodeSize}const f=(u+1)*e;let m=0;for(;o<f;)i[o++]==0&&m++;m&&(s||(s=[])).push({type:"missing",row:u,n:m}),d++}(e===0||r===0)&&(s||(s=[])).push({type:"zero_sized"});const l=new _n(e,r,i,s);let c=!1;for(let u=0;!c&&u<a.length;u+=2)a[u]!=null&&a[u+1]<r&&(c=!0);return c&&Ilt(l,a,n),l}function Dlt(n){let e=-1,r=!1;for(let i=0;i<n.childCount;i++){const o=n.child(i);let s=0;if(r)for(let a=0;a<i;a++){const l=n.child(a);for(let c=0;c<l.childCount;c++){const u=l.child(c);a+u.attrs.rowspan>i&&(s+=u.attrs.colspan)}}for(let a=0;a<o.childCount;a++){const l=o.child(a);s+=l.attrs.colspan,l.attrs.rowspan>1&&(r=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Ilt(n,e,r){n.problems||(n.problems=[]);const i={};for(let o=0;o<n.map.length;o++){const s=n.map[o];if(i[s])continue;i[s]=!0;const a=r.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let l=null;const c=a.attrs;for(let u=0;u<c.colspan;u++){const d=e[(o+u)%n.width*2];d!=null&&(!c.colwidth||c.colwidth[u]!=d)&&((l||(l=Rlt(c)))[u]=d)}l&&n.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function Rlt(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let r=0;r<n.colspan;r++)e.push(0);return e}function hX(n,e){if(typeof n=="string")return{};const r=n.getAttribute("data-colwidth"),i=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map(a=>Number(a)):null,o=Number(n.getAttribute("colspan")||1),s={colspan:o,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:i&&i.length==o?i:null};for(const a in e){const l=e[a].getFromDOM,c=l&&l(n);c!=null&&(s[a]=c)}return s}function fX(n,e){const r={};n.attrs.colspan!=1&&(r.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(r.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(r["data-colwidth"]=n.attrs.colwidth.join(","));for(const i in e){const o=e[i].setDOMAttr;o&&o(n.attrs[i],r)}return r}function Llt(n){if(n!==null){if(!Array.isArray(n))throw new TypeError("colwidth must be null or an array");for(const e of n)if(typeof e!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function zlt(n){const e=n.cellAttributes||{},r={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:Llt}};for(const i in e)r[i]={default:e[i].default,validate:e[i].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:i=>hX(i,e)}],toDOM(i){return["td",fX(i,e),0]}},table_header:{content:n.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:i=>hX(i,e)}],toDOM(i){return["th",fX(i,e),0]}}}}function ja(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const r in n.nodes){const i=n.nodes[r],o=i.spec.tableRole;o&&(e[o]=i)}}return e}const Ph=new lr("selectingCells");function jg(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function za(n){const e=n.selection.$head;for(let r=e.depth;r>0;r--)if(e.node(r).type.spec.tableRole=="row")return!0;return!1}function o7(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const r=jg(e.$head)||Flt(e.$head);if(r)return r;throw new RangeError(`No cell found around position ${e.head}`)}function Flt(n){for(let e=n.nodeAfter,r=n.pos;e;e=e.firstChild,r++){const i=e.type.spec.tableRole;if(i=="cell"||i=="header_cell")return n.doc.resolve(r)}for(let e=n.nodeBefore,r=n.pos;e;e=e.lastChild,r--){const i=e.type.spec.tableRole;if(i=="cell"||i=="header_cell")return n.doc.resolve(r-e.nodeSize)}}function FN(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function $lt(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function aL(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function rfe(n,e,r){const i=n.node(-1),o=_n.get(i),s=n.start(-1),a=o.nextCell(n.pos-s,e,r);return a==null?null:n.node(0).resolve(s+a)}function vm(n,e,r=1){const i={...n,colspan:n.colspan-r};return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(e,r),i.colwidth.some(o=>o>0)||(i.colwidth=null)),i}function Blt(n,e,r=1){const i={...n,colspan:n.colspan+r};if(i.colwidth){i.colwidth=i.colwidth.slice();for(let o=0;o<r;o++)i.colwidth.splice(e,0,0)}return i}function Hlt(n,e,r){const i=ja(e.type.schema).header_cell;for(let o=0;o<n.height;o++)if(e.nodeAt(n.map[r+o*n.width]).type!=i)return!1;return!0}var Hn=class vu extends $t{constructor(e,r=e){const i=e.node(-1),o=_n.get(i),s=e.start(-1),a=o.rectBetween(e.pos-s,r.pos-s),l=e.node(0),c=o.cellsInRect(a).filter(d=>d!=r.pos-s);c.unshift(r.pos-s);const u=c.map(d=>{const h=i.nodeAt(d);if(!h)throw new RangeError(`No cell with offset ${d} found`);const f=s+d+1;return new jte(l.resolve(f),l.resolve(f+h.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=r}map(e,r){const i=e.resolve(r.map(this.$anchorCell.pos)),o=e.resolve(r.map(this.$headCell.pos));if(FN(i)&&FN(o)&&aL(i,o)){const s=this.$anchorCell.node(-1)!=i.node(-1);return s&&this.isRowSelection()?vu.rowSelection(i,o):s&&this.isColSelection()?vu.colSelection(i,o):new vu(i,o)}return xt.between(i,o)}content(){const e=this.$anchorCell.node(-1),r=_n.get(e),i=this.$anchorCell.start(-1),o=r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),s={},a=[];for(let c=o.top;c<o.bottom;c++){const u=[];for(let d=c*r.width+o.left,h=o.left;h<o.right;h++,d++){const f=r.map[d];if(s[f])continue;s[f]=!0;const m=r.findCell(f);let v=e.nodeAt(f);if(!v)throw new RangeError(`No cell with offset ${f} found`);const x=o.left-m.left,b=m.right-o.right;if(x>0||b>0){let w=v.attrs;if(x>0&&(w=vm(w,0,x)),b>0&&(w=vm(w,w.colspan-b,b)),m.left<o.left){if(v=v.type.createAndFill(w),!v)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(w)}`)}else v=v.type.create(w,v.content)}if(m.top<o.top||m.bottom>o.bottom){const w={...v.attrs,rowspan:Math.min(m.bottom,o.bottom)-Math.max(m.top,o.top)};m.top<o.top?v=v.type.createAndFill(w):v=v.type.create(w,v.content)}u.push(v)}a.push(e.child(c).copy(Ue.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:a;return new Qe(Ue.from(l),1,1)}replace(e,r=Qe.empty){const i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){const{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replace(u.map(l.pos),u.map(c.pos),a?Qe.empty:r)}const s=$t.findFrom(e.doc.resolve(e.mapping.slice(i).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,r){this.replace(e,new Qe(Ue.from(r),0,0))}forEachCell(e){const r=this.$anchorCell.node(-1),i=_n.get(r),o=this.$anchorCell.start(-1),s=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let a=0;a<s.length;a++)e(r.nodeAt(s[a]),o+s[a])}isColSelection(){const e=this.$anchorCell.index(-1),r=this.$headCell.index(-1);if(Math.min(e,r)>0)return!1;const i=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=r+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,o)==this.$headCell.node(-1).childCount}static colSelection(e,r=e){const i=e.node(-1),o=_n.get(i),s=e.start(-1),a=o.findCell(e.pos-s),l=o.findCell(r.pos-s),c=e.node(0);return a.top<=l.top?(a.top>0&&(e=c.resolve(s+o.map[a.left])),l.bottom<o.height&&(r=c.resolve(s+o.map[o.width*(o.height-1)+l.right-1]))):(l.top>0&&(r=c.resolve(s+o.map[l.left])),a.bottom<o.height&&(e=c.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))),new vu(e,r)}isRowSelection(){const e=this.$anchorCell.node(-1),r=_n.get(e),i=this.$anchorCell.start(-1),o=r.colCount(this.$anchorCell.pos-i),s=r.colCount(this.$headCell.pos-i);if(Math.min(o,s)>0)return!1;const a=o+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,l)==r.width}eq(e){return e instanceof vu&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,r=e){const i=e.node(-1),o=_n.get(i),s=e.start(-1),a=o.findCell(e.pos-s),l=o.findCell(r.pos-s),c=e.node(0);return a.left<=l.left?(a.left>0&&(e=c.resolve(s+o.map[a.top*o.width])),l.right<o.width&&(r=c.resolve(s+o.map[o.width*(l.top+1)-1]))):(l.left>0&&(r=c.resolve(s+o.map[l.top*o.width])),a.right<o.width&&(e=c.resolve(s+o.map[o.width*(a.top+1)-1]))),new vu(e,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,r){return new vu(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,i=r){return new vu(e.resolve(r),e.resolve(i))}getBookmark(){return new qlt(this.$anchorCell.pos,this.$headCell.pos)}};Hn.prototype.visible=!1;$t.jsonID("cell",Hn);var qlt=class ife{constructor(e,r){this.anchor=e,this.head=r}map(e){return new ife(e.map(this.anchor),e.map(this.head))}resolve(e){const r=e.resolve(this.anchor),i=e.resolve(this.head);return r.parent.type.spec.tableRole=="row"&&i.parent.type.spec.tableRole=="row"&&r.index()<r.parent.childCount&&i.index()<i.parent.childCount&&aL(r,i)?new Hn(r,i):$t.near(i,1)}};function Vlt(n){if(!(n.selection instanceof Hn))return null;const e=[];return n.selection.forEachCell((r,i)=>{e.push(No.node(i,i+r.nodeSize,{class:"selectedCell"}))}),Ln.create(n.doc,e)}function Wlt({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let r=n.pos,i=e.pos,o=n.depth;for(;o>=0&&!(n.after(o+1)<n.end(o));o--,r++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,i--);return r==i&&/row|table/.test(n.node(o).type.spec.tableRole)}function Ult({$from:n,$to:e}){let r,i;for(let o=n.depth;o>0;o--){const s=n.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){i=s;break}}return r!==i&&e.parentOffset===0}function Klt(n,e,r){const i=(e||n).selection,o=(e||n).doc;let s,a;if(i instanceof Tt&&(a=i.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")s=Hn.create(o,i.from);else if(a=="row"){const l=o.resolve(i.from+1);s=Hn.rowSelection(l,l)}else if(!r){const l=_n.get(i.node),c=i.from+1,u=c+l.map[l.width*l.height-1];s=Hn.create(o,c+1,u)}}else i instanceof xt&&Wlt(i)?s=xt.create(o,i.from):i instanceof xt&&Ult(i)&&(s=xt.create(o,i.$from.start(),i.$from.end()));return s&&(e||(e=n.tr)).setSelection(s),e}const Glt=new lr("fix-tables");function ofe(n,e,r,i){const o=n.childCount,s=e.childCount;e:for(let a=0,l=0;a<s;a++){const c=e.child(a);for(let u=l,d=Math.min(o,a+3);u<d;u++)if(n.child(u)==c){l=u+1,r+=c.nodeSize;continue e}i(c,r),l<o&&n.child(l).sameMarkup(c)?ofe(n.child(l),c,r+1,i):c.nodesBetween(0,c.content.size,i,r+1),r+=c.nodeSize}}function Ylt(n,e){let r;const i=(o,s)=>{o.type.spec.tableRole=="table"&&(r=Zlt(n,o,s,r))};return e?e.doc!=n.doc&&ofe(e.doc,n.doc,0,i):n.doc.descendants(i),r}function Zlt(n,e,r,i){const o=_n.get(e);if(!o.problems)return i;i||(i=n.tr);const s=[];for(let c=0;c<o.height;c++)s.push(0);for(let c=0;c<o.problems.length;c++){const u=o.problems[c];if(u.type=="collision"){const d=e.nodeAt(u.pos);if(!d)continue;const h=d.attrs;for(let f=0;f<h.rowspan;f++)s[u.row+f]+=u.n;i.setNodeMarkup(i.mapping.map(r+1+u.pos),null,vm(h,h.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const d=e.nodeAt(u.pos);if(!d)continue;i.setNodeMarkup(i.mapping.map(r+1+u.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const d=e.nodeAt(u.pos);if(!d)continue;i.setNodeMarkup(i.mapping.map(r+1+u.pos),null,{...d.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const d=i.mapping.map(r);i.delete(d,d+e.nodeSize)}}let a,l;for(let c=0;c<s.length;c++)s[c]&&(a==null&&(a=c),l=c);for(let c=0,u=r+1;c<o.height;c++){const d=e.child(c),h=u+d.nodeSize,f=s[c];if(f>0){let m="cell";d.firstChild&&(m=d.firstChild.type.spec.tableRole);const v=[];for(let b=0;b<f;b++){const w=ja(n.schema)[m].createAndFill();w&&v.push(w)}const x=(c==0||a==c-1)&&l==c?u+1:h-1;i.insert(i.mapping.map(x),v)}u=h}return i.setMeta(Glt,{fixTables:!0})}function sfe(n){const e=_n.get(n),r=[],i=e.height,o=e.width;for(let s=0;s<i;s++){const a=[];for(let l=0;l<o;l++){const c=s*o+l,u=e.map[c];if(s>0){const d=c-o;if(u===e.map[d]){a.push(null);continue}}if(l>0){const d=c-1;if(u===e.map[d]){a.push(null);continue}}a.push(n.nodeAt(u))}r.push(a)}return r}function afe(n,e){const r=[],i=_n.get(n),o=i.height,s=i.width;for(let a=0;a<o;a++){const l=n.child(a),c=[];for(let d=0;d<s;d++){const h=e[a][d];if(!h)continue;const f=i.map[a*i.width+d],m=n.nodeAt(f);if(!m)continue;const v=m.type.createChecked(h.attrs,h.content,h.marks);c.push(v)}const u=l.type.createChecked(l.attrs,c,l.marks);r.push(u)}return n.type.createChecked(n.attrs,r,n.marks)}function lfe(n,e,r,i){const o=e[0]>r[0]?-1:1,s=n.splice(e[0],e.length),a=s.length%2===0?1:0;let l;return l=o===-1?r[0]:r[r.length-1]-a,n.splice(l,0,...s),n}function c1(n){return Xlt(e=>e.type.spec.tableRole==="table",n)}function Xlt(n,e){for(let r=e.depth;r>=0;r-=1){const i=e.node(r);if(n(i))return{node:i,pos:r===0?0:e.before(r),start:e.start(r),depth:r}}return null}function k0(n,e){const r=c1(e.$from);if(!r)return;const i=_n.get(r.node);if(!(n<0||n>i.width-1))return i.cellsInRect({left:n,right:n+1,top:0,bottom:i.height}).map(o=>{const s=r.node.nodeAt(o),a=o+r.start;return{pos:a,start:a+1,node:s,depth:r.depth+2}})}function S0(n,e){const r=c1(e.$from);if(!r)return;const i=_n.get(r.node);if(!(n<0||n>i.height-1))return i.cellsInRect({left:0,right:i.width,top:n,bottom:n+1}).map(o=>{const s=r.node.nodeAt(o),a=o+r.start;return{pos:a,start:a+1,node:s,depth:r.depth+2}})}function pX(n,e,r=e){let i=e,o=r;for(let d=e;d>=0;d--){const h=k0(d,n.selection);h&&h.forEach(f=>{const m=f.node.attrs.colspan+d-1;m>=i&&(i=d),m>o&&(o=m)})}for(let d=e;d<=o;d++){const h=k0(d,n.selection);h&&h.forEach(f=>{const m=f.node.attrs.colspan+d-1;f.node.attrs.colspan>1&&m>o&&(o=m)})}const s=[];for(let d=i;d<=o;d++){const h=k0(d,n.selection);h&&h.length>0&&s.push(d)}i=s[0],o=s[s.length-1];const a=k0(i,n.selection),l=S0(0,n.selection);if(!a||!l)return;const c=n.doc.resolve(a[a.length-1].pos);let u;for(let d=o;d>=i;d--){const h=k0(d,n.selection);if(h&&h.length>0){for(let f=l.length-1;f>=0;f--)if(l[f].pos===h[0].pos){u=h[0];break}if(u)break}}if(u)return{$anchor:c,$head:n.doc.resolve(u.pos),indexes:s}}function mX(n,e,r=e){let i=e,o=r;for(let d=e;d>=0;d--){const h=S0(d,n.selection);h&&h.forEach(f=>{const m=f.node.attrs.rowspan+d-1;m>=i&&(i=d),m>o&&(o=m)})}for(let d=e;d<=o;d++){const h=S0(d,n.selection);h&&h.forEach(f=>{const m=f.node.attrs.rowspan+d-1;f.node.attrs.rowspan>1&&m>o&&(o=m)})}const s=[];for(let d=i;d<=o;d++){const h=S0(d,n.selection);h&&h.length>0&&s.push(d)}i=s[0],o=s[s.length-1];const a=S0(i,n.selection),l=k0(0,n.selection);if(!a||!l)return;const c=n.doc.resolve(a[a.length-1].pos);let u;for(let d=o;d>=i;d--){const h=S0(d,n.selection);if(h&&h.length>0){for(let f=l.length-1;f>=0;f--)if(l[f].pos===h[0].pos){u=h[0];break}if(u)break}}if(u)return{$anchor:c,$head:n.doc.resolve(u.pos),indexes:s}}function gX(n){return n[0].map((e,r)=>n.map(i=>i[r]))}function Jlt(n){var e,r;const{tr:i,originIndex:o,targetIndex:s,select:a,pos:l}=n,c=c1(i.doc.resolve(l));if(!c)return!1;const u=(e=pX(i,o))===null||e===void 0?void 0:e.indexes,d=(r=pX(i,s))===null||r===void 0?void 0:r.indexes;if(!u||!d||u.includes(s))return!1;const h=Qlt(c.node,u,d);if(i.replaceWith(c.pos,c.pos+c.node.nodeSize,h),!a)return!0;const f=_n.get(h),m=c.start,v=s,x=f.positionAt(f.height-1,v,h),b=i.doc.resolve(m+x),w=f.positionAt(0,v,h),S=i.doc.resolve(m+w);return i.setSelection(Hn.colSelection(b,S)),!0}function Qlt(n,e,r,i){let o=gX(sfe(n));return o=lfe(o,e,r),o=gX(o),afe(n,o)}function ect(n){var e,r;const{tr:i,originIndex:o,targetIndex:s,select:a,pos:l}=n,c=c1(i.doc.resolve(l));if(!c)return!1;const u=(e=mX(i,o))===null||e===void 0?void 0:e.indexes,d=(r=mX(i,s))===null||r===void 0?void 0:r.indexes;if(!u||!d||u.includes(s))return!1;const h=tct(c.node,u,d);if(i.replaceWith(c.pos,c.pos+c.node.nodeSize,h),!a)return!0;const f=_n.get(h),m=c.start,v=s,x=f.positionAt(v,f.width-1,h),b=i.doc.resolve(m+x),w=f.positionAt(v,0,h),S=i.doc.resolve(m+w);return i.setSelection(Hn.rowSelection(b,S)),!0}function tct(n,e,r,i){let o=sfe(n);return o=lfe(o,e,r),afe(n,o)}function ff(n){const e=n.selection,r=o7(n),i=r.node(-1),o=r.start(-1),s=_n.get(i);return{...e instanceof Hn?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(r.pos-o),tableStart:o,map:s,table:i}}function cfe(n,{map:e,tableStart:r,table:i},o){let s=o>0?-1:0;Hlt(e,i,o+s)&&(s=o==0||o==e.width?null:0);for(let a=0;a<e.height;a++){const l=a*e.width+o;if(o>0&&o<e.width&&e.map[l-1]==e.map[l]){const c=e.map[l],u=i.nodeAt(c);n.setNodeMarkup(n.mapping.map(r+c),null,Blt(u.attrs,o-e.colCount(c))),a+=u.attrs.rowspan-1}else{const c=s==null?ja(i.type.schema).cell:i.nodeAt(e.map[l+s]).type,u=e.positionAt(a,o,i);n.insert(n.mapping.map(r+u),c.createAndFill())}}return n}function nct(n,e){if(!za(n))return!1;if(e){const r=ff(n);e(cfe(n.tr,r,r.left))}return!0}function rct(n,e){if(!za(n))return!1;if(e){const r=ff(n);e(cfe(n.tr,r,r.right))}return!0}function ict(n,{map:e,table:r,tableStart:i},o){const s=n.mapping.maps.length;for(let a=0;a<e.height;){const l=a*e.width+o,c=e.map[l],u=r.nodeAt(c),d=u.attrs;if(o>0&&e.map[l-1]==c||o<e.width-1&&e.map[l+1]==c)n.setNodeMarkup(n.mapping.slice(s).map(i+c),null,vm(d,o-e.colCount(c)));else{const h=n.mapping.slice(s).map(i+c);n.delete(h,h+u.nodeSize)}a+=d.rowspan}}function oct(n,e){if(!za(n))return!1;if(e){const r=ff(n),i=n.tr;if(r.left==0&&r.right==r.map.width)return!1;for(let o=r.right-1;ict(i,r,o),o!=r.left;o--){const s=r.tableStart?i.doc.nodeAt(r.tableStart-1):i.doc;if(!s)throw new RangeError("No table found");r.table=s,r.map=_n.get(s)}e(i)}return!0}function sct(n,{map:e,table:r,tableStart:i},o){let s=0;for(let u=0;u<o;u++)s+=r.child(u).nodeSize;const a=s+r.child(o).nodeSize,l=n.mapping.maps.length;n.delete(s+i,a+i);const c=new Set;for(let u=0,d=o*e.width;u<e.width;u++,d++){const h=e.map[d];if(!c.has(h)){if(c.add(h),o>0&&h==e.map[d-e.width]){const f=r.nodeAt(h).attrs;n.setNodeMarkup(n.mapping.slice(l).map(h+i),null,{...f,rowspan:f.rowspan-1}),u+=f.colspan-1}else if(o<e.height&&h==e.map[d+e.width]){const f=r.nodeAt(h),m=f.attrs,v=f.type.create({...m,rowspan:f.attrs.rowspan-1},f.content),x=e.positionAt(o+1,u,r);n.insert(n.mapping.slice(l).map(i+x),v),u+=m.colspan-1}}}}function act(n,e){if(!za(n))return!1;if(e){const r=ff(n),i=n.tr;if(r.top==0&&r.bottom==r.map.height)return!1;for(let o=r.bottom-1;sct(i,r,o),o!=r.top;o--){const s=r.tableStart?i.doc.nodeAt(r.tableStart-1):i.doc;if(!s)throw new RangeError("No table found");r.table=s,r.map=_n.get(r.table)}e(i)}return!0}function lct(n,e){return function(r,i){if(!za(r))return!1;const o=o7(r);if(o.nodeAfter.attrs[n]===e)return!1;if(i){const s=r.tr;r.selection instanceof Hn?r.selection.forEachCell((a,l)=>{a.attrs[n]!==e&&s.setNodeMarkup(l,null,{...a.attrs,[n]:e})}):s.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[n]:e}),i(s)}return!0}}function cct(n){return function(e,r){if(!za(e))return!1;if(r){const i=ja(e.schema),o=ff(e),s=e.tr,a=o.map.cellsInRect(n=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:n=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),l=a.map(c=>o.table.nodeAt(c));for(let c=0;c<a.length;c++)l[c].type==i.header_cell&&s.setNodeMarkup(o.tableStart+a[c],i.cell,l[c].attrs);if(s.steps.length===0)for(let c=0;c<a.length;c++)s.setNodeMarkup(o.tableStart+a[c],i.header_cell,l[c].attrs);r(s)}return!0}}function yX(n,e,r){const i=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let o=0;o<i.length;o++){const s=e.table.nodeAt(i[o]);if(s&&s.type!==r.header_cell)return!1}return!0}function lL(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?cct(n):function(r,i){if(!za(r))return!1;if(i){const o=ja(r.schema),s=ff(r),a=r.tr,l=yX("row",s,o),c=yX("column",s,o),u=(n==="column"?l:n==="row"&&c)?1:0,d=n=="column"?{left:0,top:u,right:1,bottom:s.map.height}:n=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,h=n=="column"?c?o.cell:o.header_cell:n=="row"?l?o.cell:o.header_cell:o.cell;s.map.cellsInRect(d).forEach(f=>{const m=f+s.tableStart,v=a.doc.nodeAt(m);v&&a.setNodeMarkup(m,h,v.attrs)}),i(a)}return!0}}lL("row",{useDeprecatedLogic:!0});lL("column",{useDeprecatedLogic:!0});lL("cell",{useDeprecatedLogic:!0});function uct(n,e){if(e<0){const r=n.nodeBefore;if(r)return n.pos-r.nodeSize;for(let i=n.index(-1)-1,o=n.before();i>=0;i--){const s=n.node(-1).child(i),a=s.lastChild;if(a)return o-1-a.nodeSize;o-=s.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const r=n.node(-1);for(let i=n.indexAfter(-1),o=n.after();i<r.childCount;i++){const s=r.child(i);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function ufe(n){return function(e,r){if(!za(e))return!1;const i=uct(o7(e),n);if(i==null)return!1;if(r){const o=e.doc.resolve(i);r(e.tr.setSelection(xt.between(o,$lt(o))).scrollIntoView())}return!0}}function dct(n,e){const r=n.selection.$anchor;for(let i=r.depth;i>0;i--)if(r.node(i).type.spec.tableRole=="table")return e&&e(n.tr.delete(r.before(i),r.after(i)).scrollIntoView()),!0;return!1}function Hk(n,e){const r=n.selection;if(!(r instanceof Hn))return!1;if(e){const i=n.tr,o=ja(n.schema).cell.createAndFill().content;r.forEachCell((s,a)=>{s.content.eq(o)||i.replace(i.mapping.map(a+1),i.mapping.map(a+s.nodeSize-1),new Qe(o,0,0))}),i.docChanged&&e(i)}return!0}function hct(n){return(e,r)=>{const{from:i,to:o,select:s=!0,pos:a=e.selection.from}=n,l=e.tr;return ect({tr:l,originIndex:i,targetIndex:o,select:s,pos:a})?(r?.(l),!0):!1}}function fct(n){return(e,r)=>{const{from:i,to:o,select:s=!0,pos:a=e.selection.from}=n,l=e.tr;return Jlt({tr:l,originIndex:i,targetIndex:o,select:s,pos:a})?(r?.(l),!0):!1}}function pct(n){if(n.size===0)return null;let{content:e,openStart:r,openEnd:i}=n;for(;e.childCount==1&&(r>0&&i>0||e.child(0).type.spec.tableRole=="table");)r--,i--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,a=o.type.schema,l=[];if(s=="row")for(let c=0;c<e.childCount;c++){let u=e.child(c).content;const d=c?0:Math.max(0,r-1),h=c<e.childCount-1?0:Math.max(0,i-1);(d||h)&&(u=$N(ja(a).row,new Qe(u,d,h)).content),l.push(u)}else if(s=="cell"||s=="header_cell")l.push(r||i?$N(ja(a).row,new Qe(e,r,i)).content:e);else return null;return mct(a,l)}function mct(n,e){const r=[];for(let o=0;o<e.length;o++){const s=e[o];for(let a=s.childCount-1;a>=0;a--){const{rowspan:l,colspan:c}=s.child(a).attrs;for(let u=o;u<o+l;u++)r[u]=(r[u]||0)+c}}let i=0;for(let o=0;o<r.length;o++)i=Math.max(i,r[o]);for(let o=0;o<r.length;o++)if(o>=e.length&&e.push(Ue.empty),r[o]<i){const s=ja(n).cell.createAndFill(),a=[];for(let l=r[o];l<i;l++)a.push(s);e[o]=e[o].append(Ue.from(a))}return{height:e.length,width:i,rows:e}}function $N(n,e){const r=n.createAndFill();return new Nte(r).replace(0,r.content.size,e).doc}function gct({width:n,height:e,rows:r},i,o){if(n!=i){const s=[],a=[];for(let l=0;l<r.length;l++){const c=r[l],u=[];for(let d=s[l]||0,h=0;d<i;h++){let f=c.child(h%c.childCount);d+f.attrs.colspan>i&&(f=f.type.createChecked(vm(f.attrs,f.attrs.colspan,d+f.attrs.colspan-i),f.content)),u.push(f),d+=f.attrs.colspan;for(let m=1;m<f.attrs.rowspan;m++)s[l+m]=(s[l+m]||0)+f.attrs.colspan}a.push(Ue.from(u))}r=a,n=i}if(e!=o){const s=[];for(let a=0,l=0;a<o;a++,l++){const c=[],u=r[l%e];for(let d=0;d<u.childCount;d++){let h=u.child(d);a+h.attrs.rowspan>o&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,o-h.attrs.rowspan)},h.content)),c.push(h)}s.push(Ue.from(c))}r=s,e=o}return{width:n,height:e,rows:r}}function yct(n,e,r,i,o,s,a){const l=n.doc.type.schema,c=ja(l);let u,d;if(o>e.width)for(let h=0,f=0;h<e.height;h++){const m=r.child(h);f+=m.nodeSize;const v=[];let x;m.lastChild==null||m.lastChild.type==c.cell?x=u||(u=c.cell.createAndFill()):x=d||(d=c.header_cell.createAndFill());for(let b=e.width;b<o;b++)v.push(x);n.insert(n.mapping.slice(a).map(f-1+i),v)}if(s>e.height){const h=[];for(let v=0,x=(e.height-1)*e.width;v<Math.max(e.width,o);v++){const b=v>=e.width?!1:r.nodeAt(e.map[x+v]).type==c.header_cell;h.push(b?d||(d=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const f=c.row.create(null,Ue.from(h)),m=[];for(let v=e.height;v<s;v++)m.push(f);n.insert(n.mapping.slice(a).map(i+r.nodeSize-2),m)}return!!(u||d)}function vX(n,e,r,i,o,s,a,l){if(a==0||a==e.height)return!1;let c=!1;for(let u=o;u<s;u++){const d=a*e.width+u,h=e.map[d];if(e.map[d-e.width]==h){c=!0;const f=r.nodeAt(h),{top:m,left:v}=e.findCell(h);n.setNodeMarkup(n.mapping.slice(l).map(h+i),null,{...f.attrs,rowspan:a-m}),n.insert(n.mapping.slice(l).map(e.positionAt(a,v,r)),f.type.createAndFill({...f.attrs,rowspan:m+f.attrs.rowspan-a})),u+=f.attrs.colspan-1}}return c}function xX(n,e,r,i,o,s,a,l){if(a==0||a==e.width)return!1;let c=!1;for(let u=o;u<s;u++){const d=u*e.width+a,h=e.map[d];if(e.map[d-1]==h){c=!0;const f=r.nodeAt(h),m=e.colCount(h),v=n.mapping.slice(l).map(h+i);n.setNodeMarkup(v,null,vm(f.attrs,a-m,f.attrs.colspan-(a-m))),n.insert(v+f.nodeSize,f.type.createAndFill(vm(f.attrs,0,a-m))),u+=f.attrs.rowspan-1}}return c}function bX(n,e,r,i,o){let s=r?n.doc.nodeAt(r-1):n.doc;if(!s)throw new Error("No table found");let a=_n.get(s);const{top:l,left:c}=i,u=c+o.width,d=l+o.height,h=n.tr;let f=0;function m(){if(s=r?h.doc.nodeAt(r-1):h.doc,!s)throw new Error("No table found");a=_n.get(s),f=h.mapping.maps.length}yct(h,a,s,r,u,d,f)&&m(),vX(h,a,s,r,c,u,l,f)&&m(),vX(h,a,s,r,c,u,d,f)&&m(),xX(h,a,s,r,l,d,c,f)&&m(),xX(h,a,s,r,l,d,u,f)&&m();for(let v=l;v<d;v++){const x=a.positionAt(v,c,s),b=a.positionAt(v,u,s);h.replace(h.mapping.slice(f).map(x+r),h.mapping.slice(f).map(b+r),new Qe(o.rows[v-l],0,0))}m(),h.setSelection(new Hn(h.doc.resolve(r+a.positionAt(l,c,s)),h.doc.resolve(r+a.positionAt(d-1,u-1,s)))),e(h)}const vct=eO({ArrowLeft:qk("horiz",-1),ArrowRight:qk("horiz",1),ArrowUp:qk("vert",-1),ArrowDown:qk("vert",1),"Shift-ArrowLeft":Vk("horiz",-1),"Shift-ArrowRight":Vk("horiz",1),"Shift-ArrowUp":Vk("vert",-1),"Shift-ArrowDown":Vk("vert",1),Backspace:Hk,"Mod-Backspace":Hk,Delete:Hk,"Mod-Delete":Hk});function lS(n,e,r){return r.eq(n.selection)?!1:(e&&e(n.tr.setSelection(r).scrollIntoView()),!0)}function qk(n,e){return(r,i,o)=>{if(!o)return!1;const s=r.selection;if(s instanceof Hn)return lS(r,i,$t.near(s.$headCell,e));if(n!="horiz"&&!s.empty)return!1;const a=dfe(o,n,e);if(a==null)return!1;if(n=="horiz")return lS(r,i,$t.near(r.doc.resolve(s.head+e),e));{const l=r.doc.resolve(a),c=rfe(l,n,e);let u;return c?u=$t.near(c,1):e<0?u=$t.near(r.doc.resolve(l.before(-1)),-1):u=$t.near(r.doc.resolve(l.after(-1)),1),lS(r,i,u)}}}function Vk(n,e){return(r,i,o)=>{if(!o)return!1;const s=r.selection;let a;if(s instanceof Hn)a=s;else{const c=dfe(o,n,e);if(c==null)return!1;a=new Hn(r.doc.resolve(c))}const l=rfe(a.$headCell,n,e);return l?lS(r,i,new Hn(a.$anchorCell,l)):!1}}function xct(n,e){const r=n.state.doc,i=jg(r.resolve(e));return i?(n.dispatch(n.state.tr.setSelection(new Hn(i))),!0):!1}function bct(n,e,r){if(!za(n.state))return!1;let i=pct(r);const o=n.state.selection;if(o instanceof Hn){i||(i={width:1,height:1,rows:[Ue.from($N(ja(n.state.schema).cell,r))]});const s=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),l=_n.get(s).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return i=gct(i,l.right-l.left,l.bottom-l.top),bX(n.state,n.dispatch,a,l,i),!0}else if(i){const s=o7(n.state),a=s.start(-1);return bX(n.state,n.dispatch,a,_n.get(s.node(-1)).findCell(s.pos-a),i),!0}else return!1}function wct(n,e){var r;if(e.button!=0||e.ctrlKey||e.metaKey)return;const i=wX(n,e.target);let o;if(e.shiftKey&&n.state.selection instanceof Hn)s(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&i&&(o=jg(n.state.selection.$anchor))!=null&&((r=LP(n,e))===null||r===void 0?void 0:r.pos)!=o.pos)s(o,e),e.preventDefault();else if(!i)return;function s(c,u){let d=LP(n,u);const h=Ph.getState(n.state)==null;if(!d||!aL(c,d))if(h)d=c;else return;const f=new Hn(c,d);if(h||!n.state.selection.eq(f)){const m=n.state.tr.setSelection(f);h&&m.setMeta(Ph,c.pos),n.dispatch(m)}}function a(){n.root.removeEventListener("mouseup",a),n.root.removeEventListener("dragstart",a),n.root.removeEventListener("mousemove",l),Ph.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Ph,-1))}function l(c){const u=c,d=Ph.getState(n.state);let h;if(d!=null)h=n.state.doc.resolve(d);else if(wX(n,u.target)!=i&&(h=LP(n,e),!h))return a();h&&s(h,u)}n.root.addEventListener("mouseup",a),n.root.addEventListener("dragstart",a),n.root.addEventListener("mousemove",l)}function dfe(n,e,r){if(!(n.state.selection instanceof xt))return null;const{$head:i}=n.state.selection;for(let o=i.depth-1;o>=0;o--){const s=i.node(o);if((r<0?i.index(o):i.indexAfter(o))!=(r<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=i.before(o),l=e=="vert"?r>0?"down":"up":r>0?"right":"left";return n.endOfTextblock(l)?a:null}}return null}function wX(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function LP(n,e){const r=n.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return null;let{inside:i,pos:o}=r;return i>=0&&jg(n.state.doc.resolve(i))||jg(n.state.doc.resolve(o))}var kct=class{constructor(n,e){this.node=n,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),BN(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,BN(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function BN(n,e,r,i,o,s){let a=0,l=!0,c=e.firstChild;const u=n.firstChild;if(u){for(let h=0,f=0;h<u.childCount;h++){const{colspan:m,colwidth:v}=u.child(h).attrs;for(let x=0;x<m;x++,f++){const b=o==f?s:v&&v[x],w=b?b+"px":"";if(a+=b||i,b||(l=!1),c)c.style.width!=w&&(c.style.width=w),c=c.nextSibling;else{const S=document.createElement("col");S.style.width=w,e.appendChild(S)}}}for(;c;){var d;const h=c.nextSibling;(d=c.parentNode)===null||d===void 0||d.removeChild(c),c=h}l?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}}const Ls=new lr("tableColumnResizing");function Sct({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:r=100,View:i=kct,lastColumnResizable:o=!0}={}){const s=new ar({key:Ls,state:{init(a,l){var c;const u=(c=s.spec)===null||c===void 0||(c=c.props)===null||c===void 0?void 0:c.nodeViews,d=ja(l.schema).table.name;return i&&u&&(u[d]=(h,f)=>new i(h,r,f)),new Cct(-1,!1)},apply(a,l){return l.apply(a)}},props:{attributes:a=>{const l=Ls.getState(a);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,l)=>{_ct(a,l,n,o)},mouseleave:a=>{Act(a)},mousedown:(a,l)=>{Tct(a,l,e,r)}},decorations:a=>{const l=Ls.getState(a);if(l&&l.activeHandle>-1)return jct(a,l.activeHandle)},nodeViews:{}}});return s}var Cct=class cS{constructor(e,r){this.activeHandle=e,this.dragging=r}apply(e){const r=this,i=e.getMeta(Ls);if(i&&i.setHandle!=null)return new cS(i.setHandle,!1);if(i&&i.setDragging!==void 0)return new cS(r.activeHandle,i.setDragging);if(r.activeHandle>-1&&e.docChanged){let o=e.mapping.map(r.activeHandle,-1);return FN(e.doc.resolve(o))||(o=-1),new cS(o,r.dragging)}return r}};function _ct(n,e,r,i){if(!n.editable)return;const o=Ls.getState(n.state);if(o&&!o.dragging){const s=Mct(e.target);let a=-1;if(s){const{left:l,right:c}=s.getBoundingClientRect();e.clientX-l<=r?a=kX(n,e,"left",r):c-e.clientX<=r&&(a=kX(n,e,"right",r))}if(a!=o.activeHandle){if(!i&&a!==-1){const l=n.state.doc.resolve(a),c=l.node(-1),u=_n.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}hfe(n,a)}}}function Act(n){if(!n.editable)return;const e=Ls.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&hfe(n,-1)}function Tct(n,e,r,i){var o;if(!n.editable)return!1;const s=(o=n.dom.ownerDocument.defaultView)!==null&&o!==void 0?o:window,a=Ls.getState(n.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const l=n.state.doc.nodeAt(a.activeHandle),c=Pct(n,a.activeHandle,l.attrs);n.dispatch(n.state.tr.setMeta(Ls,{setDragging:{startX:e.clientX,startWidth:c}}));function u(h){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",d);const f=Ls.getState(n.state);f?.dragging&&(Ect(n,f.activeHandle,SX(f.dragging,h,r)),n.dispatch(n.state.tr.setMeta(Ls,{setDragging:null})))}function d(h){if(!h.which)return u(h);const f=Ls.getState(n.state);if(f&&f.dragging){const m=SX(f.dragging,h,r);CX(n,f.activeHandle,m,i)}}return CX(n,a.activeHandle,c,i),s.addEventListener("mouseup",u),s.addEventListener("mousemove",d),e.preventDefault(),!0}function Pct(n,e,{colspan:r,colwidth:i}){const o=i&&i[i.length-1];if(o)return o;const s=n.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=r;if(i)for(let c=0;c<r;c++)i[c]&&(a-=i[c],l--);return a/l}function Mct(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function kX(n,e,r,i){const o=r=="right"?-i:i,s=n.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:a}=s,l=jg(n.state.doc.resolve(a));if(!l)return-1;if(r=="right")return l.pos;const c=_n.get(l.node(-1)),u=l.start(-1),d=c.map.indexOf(l.pos-u);return d%c.width==0?-1:u+c.map[d-1]}function SX(n,e,r){const i=e.clientX-n.startX;return Math.max(r,n.startWidth+i)}function hfe(n,e){n.dispatch(n.state.tr.setMeta(Ls,{setHandle:e}))}function Ect(n,e,r){const i=n.state.doc.resolve(e),o=i.node(-1),s=_n.get(o),a=i.start(-1),l=s.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1,c=n.state.tr;for(let u=0;u<s.height;u++){const d=u*s.width+l;if(u&&s.map[d]==s.map[d-s.width])continue;const h=s.map[d],f=o.nodeAt(h).attrs,m=f.colspan==1?0:l-s.colCount(h);if(f.colwidth&&f.colwidth[m]==r)continue;const v=f.colwidth?f.colwidth.slice():Nct(f.colspan);v[m]=r,c.setNodeMarkup(a+h,null,{...f,colwidth:v})}c.docChanged&&n.dispatch(c)}function CX(n,e,r,i){const o=n.state.doc.resolve(e),s=o.node(-1),a=o.start(-1),l=_n.get(s).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;let c=n.domAtPos(o.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&BN(s,c.firstChild,c,i,l,r)}function Nct(n){return Array(n).fill(0)}function jct(n,e){const r=[],i=n.doc.resolve(e),o=i.node(-1);if(!o)return Ln.empty;const s=_n.get(o),a=i.start(-1),l=s.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<s.height;u++){const d=l+u*s.width;if((l==s.width-1||s.map[d]!=s.map[d+1])&&(u==0||s.map[d]!=s.map[d-s.width])){var c;const h=s.map[d],f=a+h+o.nodeAt(h).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",!((c=Ls.getState(n))===null||c===void 0)&&c.dragging&&r.push(No.node(a+h,a+h+o.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),r.push(No.widget(f,m))}}return Ln.create(n.doc,r)}function Oct({allowTableNodeSelection:n=!1}={}){return new ar({key:Ph,state:{init(){return null},apply(e,r){const i=e.getMeta(Ph);if(i!=null)return i==-1?null:i;if(r==null||!e.docChanged)return r;const{deleted:o,pos:s}=e.mapping.mapResult(r);return o?null:s}},props:{decorations:Vlt,handleDOMEvents:{mousedown:wct},createSelectionBetween(e){return Ph.getState(e.state)!=null?e.state.selection:null},handleTripleClick:xct,handleKeyDown:vct,handlePaste:bct},appendTransaction(e,r,i){return Klt(i,Ylt(i,r),n)}})}var DC=typeof navigator<"u"?navigator:null,cL=DC&&DC.userAgent||"",Dct=/Edge\/(\d+)/.exec(cL),Ict=/MSIE \d/.exec(cL),Rct=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cL),Lct=!!(Ict||Rct||Dct),zct=!Lct&&!!DC&&/Apple Computer/.test(DC.vendor),ffe=new lr("safari-ime-span"),HN=!1,Fct={key:ffe,props:{decorations:$ct,handleDOMEvents:{compositionstart:()=>{HN=!0},compositionend:()=>{HN=!1}}}};function $ct(n){const{$from:e,$to:r,to:i}=n.selection;if(HN&&e.sameParent(r)){const o=No.widget(i,Bct,{ignoreSelection:!0,key:"safari-ime-span"});return Ln.create(n.doc,[o])}}function Bct(n){const e=n.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var Hct=new ar(zct?Fct:{key:ffe});function _X(n,e){const r=String(n);if(typeof e!="string")throw new TypeError("Expected character");let i=0,o=r.indexOf(e);for(;o!==-1;)i++,o=r.indexOf(e,o+e.length);return i}function qct(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Vct(n,e,r){const o=y3((r||{}).ignore||[]),s=Wct(e);let a=-1;for(;++a<s.length;)zj(n,"text",l);function l(u,d){let h=-1,f;for(;++h<d.length;){const m=d[h],v=f?f.children:void 0;if(o(m,v?v.indexOf(m):void 0,f))return;f=m}if(f)return c(u,d)}function c(u,d){const h=d[d.length-1],f=s[a][0],m=s[a][1];let v=0;const b=h.children.indexOf(u);let w=!1,S=[];f.lastIndex=0;let _=f.exec(u.value);for(;_;){const P=_.index,A={index:_.index,input:_.input,stack:[...d,u]};let T=m(..._,A);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?f.lastIndex=P+1:(v!==P&&S.push({type:"text",value:u.value.slice(v,P)}),Array.isArray(T)?S.push(...T):T&&S.push(T),v=P+_[0].length,w=!0),!f.global)break;_=f.exec(u.value)}return w?(v<u.value.length&&S.push({type:"text",value:u.value.slice(v)}),h.children.splice(b,1,...S)):S=[u],b+S.length}}function Wct(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!n[0]||Array.isArray(n[0])?n:[n];let i=-1;for(;++i<r.length;){const o=r[i];e.push([Uct(o[0]),Kct(o[1])])}return e}function Uct(n){return typeof n=="string"?new RegExp(qct(n),"g"):n}function Kct(n){return typeof n=="function"?n:function(){return n}}const zP="phrasing",FP=["autolink","link","image","label"];function Gct(){return{transforms:[tut],enter:{literalAutolink:Zct,literalAutolinkEmail:$P,literalAutolinkHttp:$P,literalAutolinkWww:$P},exit:{literalAutolink:eut,literalAutolinkEmail:Qct,literalAutolinkHttp:Xct,literalAutolinkWww:Jct}}}function Yct(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:zP,notInConstruct:FP},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:zP,notInConstruct:FP},{character:":",before:"[ps]",after:"\\/",inConstruct:zP,notInConstruct:FP}]}}function Zct(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function $P(n){this.config.enter.autolinkProtocol.call(this,n)}function Xct(n){this.config.exit.autolinkProtocol.call(this,n)}function Jct(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function Qct(n){this.config.exit.autolinkEmail.call(this,n)}function eut(n){this.exit(n)}function tut(n){Vct(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,nut],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),rut]],{ignore:["link","linkReference"]})}function nut(n,e,r,i,o){let s="";if(!pfe(o)||(/^w/i.test(e)&&(r=e+r,e="",s="http://"),!iut(r)))return!1;const a=out(r+i);if(!a[0])return!1;const l={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function rut(n,e,r,i){return!pfe(i,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+r,children:[{type:"text",value:e+"@"+r}]}}function iut(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function out(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let r=e[0],i=r.indexOf(")");const o=_X(n,"(");let s=_X(n,")");for(;i!==-1&&o>s;)n+=r.slice(0,i+1),r=r.slice(i+1),i=r.indexOf(")"),s++;return[n,r]}function pfe(n,e){const r=n.input.charCodeAt(n.index-1);return(n.index===0||Yp(r)||m3(r))&&(!e||r!==47)}mfe.peek=put;function sut(){this.buffer()}function aut(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function lut(){this.buffer()}function cut(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function uut(n){const e=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=yl(this.sliceSerialize(n)).toLowerCase(),r.label=e}function dut(n){this.exit(n)}function hut(n){const e=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=yl(this.sliceSerialize(n)).toLowerCase(),r.label=e}function fut(n){this.exit(n)}function put(){return"["}function mfe(n,e,r,i){const o=r.createTracker(i);let s=o.move("[^");const a=r.enter("footnoteReference"),l=r.enter("reference");return s+=o.move(r.safe(r.associationId(n),{after:"]",before:s})),l(),a(),s+=o.move("]"),s}function mut(){return{enter:{gfmFootnoteCallString:sut,gfmFootnoteCall:aut,gfmFootnoteDefinitionLabelString:lut,gfmFootnoteDefinition:cut},exit:{gfmFootnoteCallString:uut,gfmFootnoteCall:dut,gfmFootnoteDefinitionLabelString:hut,gfmFootnoteDefinition:fut}}}function gut(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:r,footnoteReference:mfe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(i,o,s,a){const l=s.createTracker(a);let c=l.move("[^");const u=s.enter("footnoteDefinition"),d=s.enter("label");return c+=l.move(s.safe(s.associationId(i),{before:c,after:"]"})),d(),c+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,l.current()),e?gfe:yut))),u(),c}}function yut(n,e,r){return e===0?n:gfe(n,e,r)}function gfe(n,e,r){return(r?"":"    ")+n}const vut=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];yfe.peek=Sut;function xut(){return{canContainEols:["delete"],enter:{strikethrough:wut},exit:{strikethrough:kut}}}function but(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:vut}],handlers:{delete:yfe}}}function wut(n){this.enter({type:"delete",children:[]},n)}function kut(n){this.exit(n)}function yfe(n,e,r,i){const o=r.createTracker(i),s=r.enter("strikethrough");let a=o.move("~~");return a+=r.containerPhrasing(n,{...o.current(),before:a,after:"~"}),a+=o.move("~~"),s(),a}function Sut(){return"~"}function Cut(n){return n.length}function _ut(n,e){const r=e||{},i=(r.align||[]).concat(),o=r.stringLength||Cut,s=[],a=[],l=[],c=[];let u=0,d=-1;for(;++d<n.length;){const x=[],b=[];let w=-1;for(n[d].length>u&&(u=n[d].length);++w<n[d].length;){const S=Aut(n[d][w]);if(r.alignDelimiters!==!1){const _=o(S);b[w]=_,(c[w]===void 0||_>c[w])&&(c[w]=_)}x.push(S)}a[d]=x,l[d]=b}let h=-1;if(typeof i=="object"&&"length"in i)for(;++h<u;)s[h]=AX(i[h]);else{const x=AX(i);for(;++h<u;)s[h]=x}h=-1;const f=[],m=[];for(;++h<u;){const x=s[h];let b="",w="";x===99?(b=":",w=":"):x===108?b=":":x===114&&(w=":");let S=r.alignDelimiters===!1?1:Math.max(1,c[h]-b.length-w.length);const _=b+"-".repeat(S)+w;r.alignDelimiters!==!1&&(S=b.length+S+w.length,S>c[h]&&(c[h]=S),m[h]=S),f[h]=_}a.splice(1,0,f),l.splice(1,0,m),d=-1;const v=[];for(;++d<a.length;){const x=a[d],b=l[d];h=-1;const w=[];for(;++h<u;){const S=x[h]||"";let _="",P="";if(r.alignDelimiters!==!1){const A=c[h]-(b[h]||0),T=s[h];T===114?_=" ".repeat(A):T===99?A%2?(_=" ".repeat(A/2+.5),P=" ".repeat(A/2-.5)):(_=" ".repeat(A/2),P=_):P=" ".repeat(A)}r.delimiterStart!==!1&&!h&&w.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&S==="")&&(r.delimiterStart!==!1||h)&&w.push(" "),r.alignDelimiters!==!1&&w.push(_),w.push(S),r.alignDelimiters!==!1&&w.push(P),r.padding!==!1&&w.push(" "),(r.delimiterEnd!==!1||h!==u-1)&&w.push("|")}v.push(r.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return v.join(`
`)}function Aut(n){return n==null?"":String(n)}function AX(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Tut(){return{enter:{table:Put,tableData:TX,tableHeader:TX,tableRow:Eut},exit:{codeText:Nut,table:Mut,tableData:BP,tableHeader:BP,tableRow:BP}}}function Put(n){const e=n._align;this.enter({type:"table",align:e.map(function(r){return r==="none"?null:r}),children:[]},n),this.data.inTable=!0}function Mut(n){this.exit(n),this.data.inTable=void 0}function Eut(n){this.enter({type:"tableRow",children:[]},n)}function BP(n){this.exit(n)}function TX(n){this.enter({type:"tableCell",children:[]},n)}function Nut(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,jut));const r=this.stack[this.stack.length-1];r.type,r.value=e,this.exit(n)}function jut(n,e){return e==="|"?e:n}function Out(n){const e=n||{},r=e.tableCellPadding,i=e.tablePipeAlign,o=e.stringLength,s=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:a,tableCell:c,tableRow:l}};function a(m,v,x,b){return u(d(m,x,b),m.align)}function l(m,v,x,b){const w=h(m,x,b),S=u([w]);return S.slice(0,S.indexOf(`
`))}function c(m,v,x,b){const w=x.enter("tableCell"),S=x.enter("phrasing"),_=x.containerPhrasing(m,{...b,before:s,after:s});return S(),w(),_}function u(m,v){return _ut(m,{align:v,alignDelimiters:i,padding:r,stringLength:o})}function d(m,v,x){const b=m.children;let w=-1;const S=[],_=v.enter("table");for(;++w<b.length;)S[w]=h(b[w],v,x);return _(),S}function h(m,v,x){const b=m.children;let w=-1;const S=[],_=v.enter("tableRow");for(;++w<b.length;)S[w]=c(b[w],m,v,x);return _(),S}function f(m,v,x){let b=$j.inlineCode(m,v,x);return x.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function Dut(){return{exit:{taskListCheckValueChecked:PX,taskListCheckValueUnchecked:PX,paragraph:Rut}}}function Iut(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Lut}}}function PX(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function Rut(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const i=r.children[0];if(i&&i.type==="text"){const o=e.children;let s=-1,a;for(;++s<o.length;){const l=o[s];if(l.type==="paragraph"){a=l;break}}a===r&&(i.value=i.value.slice(1),i.value.length===0?r.children.shift():r.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,r.position.start=Object.assign({},i.position.start)))}}this.exit(n)}function Lut(n,e,r,i){const o=n.children[0],s=typeof n.checked=="boolean"&&o&&o.type==="paragraph",a="["+(n.checked?"x":" ")+"] ",l=r.createTracker(i);s&&l.move(a);let c=$j.listItem(n,e,r,{...i,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+a}}function zut(){return[Gct(),mut(),xut(),Tut(),Dut()]}function Fut(n){return{extensions:[Yct(),gut(n),but(),Out(n),Iut()]}}const $ut={tokenize:Uut,partial:!0},vfe={tokenize:Kut,partial:!0},xfe={tokenize:Gut,partial:!0},bfe={tokenize:Yut,partial:!0},But={tokenize:Zut,partial:!0},wfe={name:"wwwAutolink",tokenize:Vut,previous:Sfe},kfe={name:"protocolAutolink",tokenize:Wut,previous:Cfe},Td={name:"emailAutolink",tokenize:qut,previous:_fe},Wc={};function Hut(){return{text:Wc}}let Wf=48;for(;Wf<123;)Wc[Wf]=Td,Wf++,Wf===58?Wf=65:Wf===91&&(Wf=97);Wc[43]=Td;Wc[45]=Td;Wc[46]=Td;Wc[95]=Td;Wc[72]=[Td,kfe];Wc[104]=[Td,kfe];Wc[87]=[Td,wfe];Wc[119]=[Td,wfe];function qut(n,e,r){const i=this;let o,s;return a;function a(h){return!qN(h)||!_fe.call(i,i.previous)||uL(i.events)?r(h):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),l(h))}function l(h){return qN(h)?(n.consume(h),l):h===64?(n.consume(h),c):r(h)}function c(h){return h===46?n.check(But,d,u)(h):h===45||h===95||is(h)?(s=!0,n.consume(h),c):d(h)}function u(h){return n.consume(h),o=!0,c}function d(h){return s&&o&&xo(i.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(h)):r(h)}}function Vut(n,e,r){const i=this;return o;function o(a){return a!==87&&a!==119||!Sfe.call(i,i.previous)||uL(i.events)?r(a):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check($ut,n.attempt(vfe,n.attempt(xfe,s),r),r)(a))}function s(a){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(a)}}function Wut(n,e,r){const i=this;let o="",s=!1;return a;function a(h){return(h===72||h===104)&&Cfe.call(i,i.previous)&&!uL(i.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),o+=String.fromCodePoint(h),n.consume(h),l):r(h)}function l(h){if(xo(h)&&o.length<5)return o+=String.fromCodePoint(h),n.consume(h),l;if(h===58){const f=o.toLowerCase();if(f==="http"||f==="https")return n.consume(h),c}return r(h)}function c(h){return h===47?(n.consume(h),s?u:(s=!0,c)):r(h)}function u(h){return h===null||US(h)||Bn(h)||Yp(h)||m3(h)?r(h):n.attempt(vfe,n.attempt(xfe,d),r)(h)}function d(h){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(h)}}function Uut(n,e,r){let i=0;return o;function o(a){return(a===87||a===119)&&i<3?(i++,n.consume(a),o):a===46&&i===3?(n.consume(a),s):r(a)}function s(a){return a===null?r(a):e(a)}}function Kut(n,e,r){let i,o,s;return a;function a(u){return u===46||u===95?n.check(bfe,c,l)(u):u===null||Bn(u)||Yp(u)||u!==45&&m3(u)?c(u):(s=!0,n.consume(u),a)}function l(u){return u===95?i=!0:(o=i,i=void 0),n.consume(u),a}function c(u){return o||i||!s?r(u):e(u)}}function Gut(n,e){let r=0,i=0;return o;function o(a){return a===40?(r++,n.consume(a),o):a===41&&i<r?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?n.check(bfe,e,s)(a):a===null||Bn(a)||Yp(a)?e(a):(n.consume(a),o)}function s(a){return a===41&&i++,n.consume(a),o}}function Yut(n,e,r){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(n.consume(l),i):l===38?(n.consume(l),s):l===93?(n.consume(l),o):l===60||l===null||Bn(l)||Yp(l)?e(l):r(l)}function o(l){return l===null||l===40||l===91||Bn(l)||Yp(l)?e(l):i(l)}function s(l){return xo(l)?a(l):r(l)}function a(l){return l===59?(n.consume(l),i):xo(l)?(n.consume(l),a):r(l)}}function Zut(n,e,r){return i;function i(s){return n.consume(s),o}function o(s){return is(s)?r(s):e(s)}}function Sfe(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||Bn(n)}function Cfe(n){return!xo(n)}function _fe(n){return!(n===47||qN(n))}function qN(n){return n===43||n===45||n===46||n===95||is(n)}function uL(n){let e=n.length,r=!1;for(;e--;){const i=n[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){r=!0;break}if(i._gfmAutolinkLiteralWalkedInto){r=!1;break}}return n.length>0&&!r&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const Xut={tokenize:odt,partial:!0};function Jut(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:ndt,continuation:{tokenize:rdt},exit:idt}},text:{91:{name:"gfmFootnoteCall",tokenize:tdt},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Qut,resolveTo:edt}}}}function Qut(n,e,r){const i=this;let o=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;o--;){const c=i.events[o][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return r(c);const u=yl(i.sliceSerialize({start:a.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?r(c):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(c),n.exit("gfmFootnoteCallLabelMarker"),e(c))}}function edt(n,e){let r=n.length;for(;r--;)if(n[r][1].type==="labelImage"&&n[r][0]==="enter"){n[r][1];break}n[r+1][1].type="data",n[r+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},n[r+3][1].start),end:Object.assign({},n[n.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},n[r+3][1].end),end:Object.assign({},n[r+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},n[n.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[n[r+1],n[r+2],["enter",i,e],n[r+3],n[r+4],["enter",o,e],["exit",o,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],n[n.length-2],n[n.length-1],["exit",i,e]];return n.splice(r,n.length-r+1,...l),n}function tdt(n,e,r){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,a;return l;function l(h){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),c}function c(h){return h!==94?r(h):(n.enter("gfmFootnoteCallMarker"),n.consume(h),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",u)}function u(h){if(s>999||h===93&&!a||h===null||h===91||Bn(h))return r(h);if(h===93){n.exit("chunkString");const f=n.exit("gfmFootnoteCallString");return o.includes(yl(i.sliceSerialize(f)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):r(h)}return Bn(h)||(a=!0),s++,n.consume(h),h===92?d:u}function d(h){return h===91||h===92||h===93?(n.consume(h),s++,u):u(h)}}function ndt(n,e,r){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,a=0,l;return c;function c(v){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(v),n.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(v){return v===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(v),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",d):r(v)}function d(v){if(a>999||v===93&&!l||v===null||v===91||Bn(v))return r(v);if(v===93){n.exit("chunkString");const x=n.exit("gfmFootnoteDefinitionLabelString");return s=yl(i.sliceSerialize(x)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(v),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),f}return Bn(v)||(l=!0),a++,n.consume(v),v===92?h:d}function h(v){return v===91||v===92||v===93?(n.consume(v),a++,d):d(v)}function f(v){return v===58?(n.enter("definitionMarker"),n.consume(v),n.exit("definitionMarker"),o.includes(s)||o.push(s),tn(n,m,"gfmFootnoteDefinitionWhitespace")):r(v)}function m(v){return e(v)}}function rdt(n,e,r){return n.check(Nb,e,n.attempt(Xut,e,r))}function idt(n){n.exit("gfmFootnoteDefinition")}function odt(n,e,r){const i=this;return tn(n,o,"gfmFootnoteDefinitionIndent",5);function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):r(s)}}function sdt(n){let r=(n||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:o};return r==null&&(r=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},h={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},f=[["enter",d,l],["enter",a[u][1],l],["exit",a[u][1],l],["enter",h,l]],m=l.parser.constructs.insideSpan.null;m&&Bs(f,f.length,0,g3(m,a.slice(u+1,c),l)),Bs(f,f.length,0,[["exit",h,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",d,l]]),Bs(a,u-1,c-u+3,f),c=u+f.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function s(a,l,c){const u=this.previous,d=this.events;let h=0;return f;function f(v){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(v):(a.enter("strikethroughSequenceTemporary"),m(v))}function m(v){const x=sg(u);if(v===126)return h>1?c(v):(a.consume(v),h++,m);if(h<2&&!r)return c(v);const b=a.exit("strikethroughSequenceTemporary"),w=sg(v);return b._open=!w||w===2&&!!x,b._close=!x||x===2&&!!w,l(v)}}}class adt{constructor(){this.map=[]}add(e,r,i){ldt(this,e,r,i)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let r=this.map.length;const i=[];for(;r>0;)r-=1,i.push(e.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),e.length=this.map[r][0];i.push(e.slice()),e.length=0;let o=i.pop();for(;o;){for(const s of o)e.push(s);o=i.pop()}this.map.length=0}}function ldt(n,e,r,i){let o=0;if(!(r===0&&i.length===0)){for(;o<n.map.length;){if(n.map[o][0]===e){n.map[o][1]+=r,n.map[o][2].push(...i);return}o+=1}n.map.push([e,r,i])}}function cdt(n,e){let r=!1;const i=[];for(;e<n.length;){const o=n[e];if(r){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(r=!0);e+=1}return i}function udt(){return{flow:{null:{name:"table",tokenize:ddt,resolveAll:hdt}}}}function ddt(n,e,r){const i=this;let o=0,s=0,a;return l;function l(z){let B=i.events.length-1;for(;B>-1;){const I=i.events[B][1].type;if(I==="lineEnding"||I==="linePrefix")B--;else break}const D=B>-1?i.events[B][1].type:null,Y=D==="tableHead"||D==="tableRow"?T:c;return Y===T&&i.parser.lazy[i.now().line]?r(z):Y(z)}function c(z){return n.enter("tableHead"),n.enter("tableRow"),u(z)}function u(z){return z===124||(a=!0,s+=1),d(z)}function d(z){return z===null?r(z):_t(z)?s>1?(s=0,i.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),m):r(z):sn(z)?tn(n,d,"whitespace")(z):(s+=1,a&&(a=!1,o+=1),z===124?(n.enter("tableCellDivider"),n.consume(z),n.exit("tableCellDivider"),a=!0,d):(n.enter("data"),h(z)))}function h(z){return z===null||z===124||Bn(z)?(n.exit("data"),d(z)):(n.consume(z),z===92?f:h)}function f(z){return z===92||z===124?(n.consume(z),h):h(z)}function m(z){return i.interrupt=!1,i.parser.lazy[i.now().line]?r(z):(n.enter("tableDelimiterRow"),a=!1,sn(z)?tn(n,v,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):v(z))}function v(z){return z===45||z===58?b(z):z===124?(a=!0,n.enter("tableCellDivider"),n.consume(z),n.exit("tableCellDivider"),x):A(z)}function x(z){return sn(z)?tn(n,b,"whitespace")(z):b(z)}function b(z){return z===58?(s+=1,a=!0,n.enter("tableDelimiterMarker"),n.consume(z),n.exit("tableDelimiterMarker"),w):z===45?(s+=1,w(z)):z===null||_t(z)?P(z):A(z)}function w(z){return z===45?(n.enter("tableDelimiterFiller"),S(z)):A(z)}function S(z){return z===45?(n.consume(z),S):z===58?(a=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(z),n.exit("tableDelimiterMarker"),_):(n.exit("tableDelimiterFiller"),_(z))}function _(z){return sn(z)?tn(n,P,"whitespace")(z):P(z)}function P(z){return z===124?v(z):z===null||_t(z)?!a||o!==s?A(z):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(z)):A(z)}function A(z){return r(z)}function T(z){return n.enter("tableRow"),E(z)}function E(z){return z===124?(n.enter("tableCellDivider"),n.consume(z),n.exit("tableCellDivider"),E):z===null||_t(z)?(n.exit("tableRow"),e(z)):sn(z)?tn(n,E,"whitespace")(z):(n.enter("data"),L(z))}function L(z){return z===null||z===124||Bn(z)?(n.exit("data"),E(z)):(n.consume(z),z===92?$:L)}function $(z){return z===92||z===124?(n.consume(z),L):L(z)}}function hdt(n,e){let r=-1,i=!0,o=0,s=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,u,d,h;const f=new adt;for(;++r<n.length;){const m=n[r],v=m[1];m[0]==="enter"?v.type==="tableHead"?(l=!1,c!==0&&(MX(f,e,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},f.add(r,0,[["enter",u,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(i=!0,h=void 0,s=[0,0,0,0],a=[0,r+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},f.add(r,0,[["enter",d,e]])),o=v.type==="tableDelimiterRow"?2:d?3:1):o&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(i=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],h=Wk(f,e,s,o,void 0,h),s=[0,0,0,0]),a[2]=r)):v.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(a[0]=a[1],h=Wk(f,e,s,o,void 0,h)),s=a,a=[s[1],r,0,0])):v.type==="tableHead"?(l=!0,c=r):v.type==="tableRow"||v.type==="tableDelimiterRow"?(c=r,s[1]!==0?(a[0]=a[1],h=Wk(f,e,s,o,r,h)):a[1]!==0&&(h=Wk(f,e,a,o,r,h)),o=0):o&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(a[3]=r)}for(c!==0&&MX(f,e,c,u,d),f.consume(e.events),r=-1;++r<e.events.length;){const m=e.events[r];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=cdt(e.events,r))}return n}function Wk(n,e,r,i,o,s){const a=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";r[0]!==0&&(s.end=Object.assign({},C0(e.events,r[0])),n.add(r[0],0,[["exit",s,e]]));const c=C0(e.events,r[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},n.add(r[1],0,[["enter",s,e]]),r[2]!==0){const u=C0(e.events,r[2]),d=C0(e.events,r[3]),h={type:l,start:Object.assign({},u),end:Object.assign({},d)};if(n.add(r[2],0,[["enter",h,e]]),i!==2){const f=e.events[r[2]],m=e.events[r[3]];if(f[1].end=Object.assign({},m[1].end),f[1].type="chunkText",f[1].contentType="text",r[3]>r[2]+1){const v=r[2]+1,x=r[3]-r[2]-1;n.add(v,x,[])}}n.add(r[3]+1,0,[["exit",h,e]])}return o!==void 0&&(s.end=Object.assign({},C0(e.events,o)),n.add(o,0,[["exit",s,e]]),s=void 0),s}function MX(n,e,r,i,o){const s=[],a=C0(e.events,r);o&&(o.end=Object.assign({},a),s.push(["exit",o,e])),i.end=Object.assign({},a),s.push(["exit",i,e]),n.add(r+1,0,s)}function C0(n,e){const r=n[e],i=r[0]==="enter"?"start":"end";return r[1][i]}const fdt={name:"tasklistCheck",tokenize:mdt};function pdt(){return{text:{91:fdt}}}function mdt(n,e,r){const i=this;return o;function o(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?r(c):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(c),n.exit("taskListCheckMarker"),s)}function s(c){return Bn(c)?(n.enter("taskListCheckValueUnchecked"),n.consume(c),n.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(n.enter("taskListCheckValueChecked"),n.consume(c),n.exit("taskListCheckValueChecked"),a):r(c)}function a(c){return c===93?(n.enter("taskListCheckMarker"),n.consume(c),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),l):r(c)}function l(c){return _t(c)?e(c):sn(c)?n.check({tokenize:gdt},e,r)(c):r(c)}}function gdt(n,e,r){return tn(n,i,"whitespace");function i(o){return o===null?r(o):e(o)}}function ydt(n){return Bee([Hut(),Jut(),sdt(n),udt(),pdt()])}const vdt={};function xdt(n){const e=this,r=n||vdt,i=e.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(ydt(r)),s.push(zut()),a.push(Fut(r))}function Rt(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-gfm",...e}}),n}const dL=mw("strike_through");Rt(dL,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const u1=n1("strike_through",n=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",n.get(dL.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,r,i)=>{e.openMark(i),e.next(r.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,r)=>{e.withMark(r,"delete")}}}));Rt(u1.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});Rt(u1.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const s7=zt("ToggleStrikeThrough",n=>()=>S3(u1.type(n)));Rt(s7,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const Afe=so(n=>Ob(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),u1.type(n)));Rt(Afe,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const hL=ys("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:n=>{const e=n.get(ht);return()=>e.call(s7.key)}}});Rt(hL.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});Rt(hL.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const Cw=zlt({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:n=>n.style.textAlign||"left",setDOMAttr:(n,e)=>{e.style=`text-align: ${n||"left"}`}}}}),pf=Ir("table",()=>({...Cw.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="table",runner:(n,e,r)=>{const i=e.align,o=e.children.map((s,a)=>({...s,align:i,isHeader:a===0}));n.openNode(r),n.next(o),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table",runner:(n,e)=>{const r=e.content.firstChild?.content;if(!r)return;const i=[];r.forEach(o=>{i.push(o.attrs.alignment)}),n.openNode("table",void 0,{align:i}),n.next(e.content),n.closeNode()}}}));Rt(pf.node,{displayName:"NodeSchema<table>",group:"Table"});Rt(pf.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const a7=Ir("table_header_row",()=>({...Cw.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"},{tag:"tr",getAttrs:n=>n instanceof HTMLElement&&n.querySelector("th")?{}:!1}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:n=>!!(n.type==="tableRow"&&n.isHeader),runner:(n,e,r)=>{const i=e.align,o=e.children.map((s,a)=>({...s,align:i[a],isHeader:e.isHeader}));n.openNode(r),n.next(o),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header_row",runner:(n,e)=>{n.openNode("tableRow",void 0,{isHeader:!0}),n.next(e.content),n.closeNode()}}}));Rt(a7.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});Rt(a7.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const _w=Ir("table_row",()=>({...Cw.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:n=>n.type==="tableRow",runner:(n,e,r)=>{const i=e.align,o=e.children.map((s,a)=>({...s,align:i[a]}));n.openNode(r),n.next(o),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_row",runner:(n,e)=>{e.content.size!==0&&(n.openNode("tableRow"),n.next(e.content),n.closeNode())}}}));Rt(_w.node,{displayName:"NodeSchema<tableRow>",group:"Table"});Rt(_w.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const Aw=Ir("table_cell",()=>({...Cw.table_cell,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!n.isHeader,runner:(n,e,r)=>{const i=e.align;n.openNode(r,{alignment:i}).openNode(n.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:n=>n.type.name==="table_cell",runner:(n,e)=>{n.openNode("tableCell").next(e.content).closeNode()}}}));Rt(Aw.node,{displayName:"NodeSchema<tableCell>",group:"Table"});Rt(Aw.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const Tw=Ir("table_header",()=>({...Cw.table_header,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!!n.isHeader,runner:(n,e,r)=>{const i=e.align;n.openNode(r,{alignment:i}),n.openNode(n.schema.nodes.paragraph),n.next(e.children),n.closeNode(),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header",runner:(n,e)=>{n.openNode("tableCell"),n.next(e.content),n.closeNode()}}}));Rt(Tw.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});Rt(Tw.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function fL(n,e=3,r=3){const i=Array(r).fill(0).map(()=>Aw.type(n).createAndFill()),o=Array(r).fill(0).map(()=>Tw.type(n).createAndFill()),s=Array(e).fill(0).map((a,l)=>l===0?a7.type(n).create(null,o):_w.type(n).create(null,i));return pf.type(n).create(null,s)}function Tfe(n){return(e,r)=>i=>{r=r??i.selection.from;const o=i.doc.resolve(r),s=Yte(c=>c.type.name==="table")(o),a=s?{node:s.node,from:s.start}:void 0,l=n==="row";if(a){const c=_n.get(a.node);if(e>=0&&e<(l?c.height:c.width)){const u=c.positionAt(l?e:c.height-1,l?c.width-1:e,a.node),d=i.doc.resolve(a.from+u),h=l?Hn.rowSelection:Hn.colSelection,f=c.positionAt(l?e:0,l?0:e,a.node),m=i.doc.resolve(a.from+f);return Gte(i.setSelection(h(d,m)))}}return i}}const bdt=Tfe("row"),wdt=Tfe("col");function Pfe(n,e,{map:r,tableStart:i,table:o},s){const a=Array(s).fill(0).reduce((c,u,d)=>c+o.child(d).nodeSize,i),l=Array(r.width).fill(0).map((c,u)=>{const d=o.nodeAt(r.map[u]);return Aw.type(n).createAndFill({alignment:d?.attrs.alignment})});return e.insert(a,_w.type(n).create(null,l)),e}function kdt(n){const e=c1(n.$from);if(!e)return;const r=_n.get(e.node);return r.cellsInRect({left:0,right:r.width,top:0,bottom:r.height}).map(o=>{const s=e.node.nodeAt(o),a=o+e.start;return{pos:a,start:a+1,node:s}})}function Sdt(n){const e=kdt(n.selection);if(e&&e[0]){const r=n.doc.resolve(e[0].pos),i=e[e.length-1];if(i){const o=n.doc.resolve(i.pos);return Gte(n.setSelection(new Hn(o,r)))}}return n}const pL=zt("GoToPrevTableCell",()=>()=>ufe(-1));Rt(pL,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const mL=zt("GoToNextTableCell",()=>()=>ufe(1));Rt(mL,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const gL=zt("ExitTable",n=>()=>(e,r)=>{if(!za(e))return!1;const{$head:i}=e.selection,o=z8e(i,pf.type(n));if(!o)return!1;const{to:s}=o,a=e.tr.replaceWith(s,s,Il.type(n).createAndFill());return a.setSelection($t.near(a.doc.resolve(s),1)).scrollIntoView(),r?.(a),!0});Rt(gL,{displayName:"Command<breakTableCommand>",group:"Table"});const Mfe=zt("InsertTable",n=>({row:e,col:r}={})=>(i,o)=>{const{selection:s,tr:a}=i,{from:l}=s,c=fL(n,e,r),u=a.replaceSelectionWith(c),d=$t.findFrom(u.doc.resolve(l),1,!0);return d&&u.setSelection(d),o?.(u),!0});Rt(Mfe,{displayName:"Command<insertTableCommand>",group:"Table"});const yL=zt("MoveRow",()=>({from:n,to:e,pos:r}={})=>hct({from:n??0,to:e??0,pos:r}));Rt(yL,{displayName:"Command<moveRowCommand>",group:"Table"});const vL=zt("MoveCol",()=>({from:n,to:e,pos:r}={})=>fct({from:n??0,to:e??0,pos:r}));Rt(vL,{displayName:"Command<moveColCommand>",group:"Table"});const wp=zt("SelectRow",()=>(n={index:0})=>(e,r)=>{const{tr:i}=e;return!!r?.(bdt(n.index,n.pos)(i))});Rt(wp,{displayName:"Command<selectRowCommand>",group:"Table"});const kp=zt("SelectCol",()=>(n={index:0})=>(e,r)=>{const{tr:i}=e;return!!r?.(wdt(n.index,n.pos)(i))});Rt(kp,{displayName:"Command<selectColCommand>",group:"Table"});const Efe=zt("SelectTable",()=>()=>(n,e)=>{const{tr:r}=n;return!!e?.(Sdt(r))});Rt(Efe,{displayName:"Command<selectTableCommand>",group:"Table"});const xL=zt("DeleteSelectedCells",()=>()=>(n,e)=>{const{selection:r}=n;if(!(r instanceof Hn))return!1;const i=r.isRowSelection(),o=r.isColSelection();return i&&o?dct(n,e):o?oct(n,e):act(n,e)});Rt(xL,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const bL=zt("AddColBefore",()=>()=>nct);Rt(bL,{displayName:"Command<addColBeforeCommand>",group:"Table"});const wL=zt("AddColAfter",()=>()=>rct);Rt(wL,{displayName:"Command<addColAfterCommand>",group:"Table"});const kL=zt("AddRowBefore",n=>()=>(e,r)=>{if(!za(e))return!1;if(r){const i=ff(e);r(Pfe(n,e.tr,i,i.top))}return!0});Rt(kL,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const SL=zt("AddRowAfter",n=>()=>(e,r)=>{if(!za(e))return!1;if(r){const i=ff(e);r(Pfe(n,e.tr,i,i.bottom))}return!0});Rt(SL,{displayName:"Command<addRowAfterCommand>",group:"Table"});const CL=zt("SetAlign",()=>(n="left")=>lct("alignment",n));Rt(CL,{displayName:"Command<setAlignCommand>",group:"Table"});const Nfe=so(n=>new fs(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,r,i,o)=>{const s=e.doc.resolve(i);if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),pf.type(n)))return null;const a=Math.max(Number(r.groups?.row??0),2),l=fL(n,a,Number(r.groups?.col)),c=e.tr.replaceRangeWith(i,o,l);return c.setSelection(xt.create(c.doc,i+3)).scrollIntoView()}));Rt(Nfe,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const jfe=Krt(n=>({run:(e,r,i)=>{if(i)return e;let o=e.content;return e.content.forEach((s,a,l)=>{if(s?.type!==pf.type(n))return;const c=s.childCount,u=s.lastChild?.childCount??0;if(c===0||u===0){o=o.replaceChild(l,Il.type(n).create());return}const d=s.firstChild;if(!(u>0&&d&&d.childCount===0))return;const f=Array(u).fill(0).map(()=>Tw.type(n).createAndFill()),m=new Qe(Ue.from(f),0,0),v=d.replace(0,0,m),x=s.replace(0,d.nodeSize,new Qe(Ue.from(v),0,0));o=o.replaceChild(l,x)}),new Qe(Ue.from(o),e.openStart,e.openEnd)}}));Rt(jfe,{displayName:"PasteRule<table>",group:"Table"});const _L=ys("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:n=>{const e=n.get(ht);return()=>e.call(mL.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:n=>{const e=n.get(ht);return()=>e.call(pL.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:n=>{const e=n.get(ht);return()=>e.call(gL.key)}}});Rt(_L.ctx,{displayName:"KeymapCtx<table>",group:"Table"});Rt(_L.shortcuts,{displayName:"Keymap<table>",group:"Table"});const HP="footnote_definition",EX="footnoteDefinition",AL=Ir("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${HP}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw Nl(n);return{label:n.dataset.label}},contentElement:"dd"}],toDOM:n=>{const e=n.attrs.label;return["dl",{"data-label":e,"data-type":HP},["dt",e],["dd",0]]},parseMarkdown:{match:({type:n})=>n===EX,runner:(n,e,r)=>{n.openNode(r,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:n=>n.type.name===HP,runner:(n,e)=>{n.openNode(EX,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));Rt(AL.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});Rt(AL.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const qP="footnote_reference",TL=Ir("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${qP}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw Nl(n);return{label:n.dataset.label}}}],toDOM:n=>{const e=n.attrs.label;return["sup",{"data-label":e,"data-type":qP},e]},parseMarkdown:{match:({type:n})=>n==="footnoteReference",runner:(n,e,r)=>{n.addNode(r,{label:e.label})}},toMarkdown:{match:n=>n.type.name===qP,runner:(n,e)=>{n.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));Rt(TL.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});Rt(TL.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const PL=Rl.extendSchema(n=>e=>{const r=n(e);return{...r,attrs:{...r.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:i=>{if(!(i instanceof HTMLElement))throw Nl(i);return{label:i.dataset.label,listType:i.dataset.listType,spread:i.dataset.spread,checked:i.dataset.checked?i.dataset.checked==="true":null}}},...r?.parseDOM||[]],toDOM:i=>r.toDOM&&i.attrs.checked==null?r.toDOM(i):["li",{"data-item-type":"task","data-label":i.attrs.label,"data-list-type":i.attrs.listType,"data-spread":i.attrs.spread,"data-checked":i.attrs.checked},0],parseMarkdown:{match:({type:i})=>i==="listItem",runner:(i,o,s)=>{if(o.checked==null){r.parseMarkdown.runner(i,o,s);return}const a=o.label!=null?`${o.label}.`:"",l=o.checked!=null?!!o.checked:null,c=o.label!=null?"ordered":"bullet",u=o.spread!=null?`${o.spread}`:"true";i.openNode(s,{label:a,listType:c,spread:u,checked:l}),i.next(o.children),i.closeNode()}},toMarkdown:{match:i=>i.type.name==="list_item",runner:(i,o)=>{if(o.attrs.checked==null){r.toMarkdown.runner(i,o);return}const s=o.attrs.label,a=o.attrs.listType,l=o.attrs.spread==="true",c=o.attrs.checked;i.openNode("listItem",void 0,{label:s,listType:a,spread:l,checked:c}),i.next(o.content),i.closeNode()}}}});Rt(PL.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});Rt(PL.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const Ofe=so(()=>new fs(/^\[(?<checked>\s|x)\]\s$/,(n,e,r,i)=>{const o=n.doc.resolve(r);let s=0,a=o.node(s);for(;a&&a.type.name!=="list_item";)s--,a=o.node(s);if(!a||a.attrs.checked!=null)return null;const l=e.groups?.checked==="x",c=o.before(s),u=n.tr;return u.deleteRange(r,i).setNodeMarkup(c,void 0,{...a.attrs,checked:l}),u}));Rt(Ofe,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const Cdt=[hL,_L].flat(),_dt=[Nfe,Ofe],Adt=[Afe],Tdt=[jfe],Dfe=Kr(()=>Hct);Rt(Dfe,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const Pdt=Kr(()=>Sct({}));Rt(Pdt,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const Ife=Kr(()=>Oct({allowTableNodeSelection:!0}));Rt(Ife,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const ML=qc("remarkGFM",()=>xdt);Rt(ML.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});Rt(ML.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const Mdt=new lr("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function Edt(n,e){let r=0;return e.forEach((i,o,s)=>{i===n&&(r=s)}),r}const Rfe=Kr(()=>new ar({key:Mdt,appendTransaction:(n,e,r)=>{let i;const o=(s,a)=>{if(i||(i=r.tr),s.type.name!=="table_cell")return;const l=r.doc.resolve(a),c=l.node(l.depth),d=l.node(l.depth-1).firstChild;if(!d)return;const h=Edt(s,c),f=d.maybeChild(h);if(!f)return;const m=f.attrs.alignment,v=s.attrs.alignment;m!==v&&i.setNodeMarkup(a,void 0,{...s.attrs,alignment:m})};return e.doc!==r.doc&&r.doc.descendants(o),i}}));Rt(Rfe,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const Ndt=[Rfe,Dfe,ML,Ife].flat(),jdt=[PL,pf,a7,_w,Tw,Aw,AL,TL,dL,u1].flat(),Odt=[mL,pL,gL,Mfe,yL,vL,wp,kp,Efe,xL,kL,SL,bL,wL,CL,s7],Lfe=[jdt,_dt,Tdt,Adt,Cdt,Odt,Ndt].flat(),Ddt=n=>{let{state:e}=n,r=e.doc.lineAt(e.selection.main.from),i=NL(n.state,r.from);return i.line?Idt(n):i.block?Ldt(n):!1};function EL(n,e){return({state:r,dispatch:i})=>{if(r.readOnly)return!1;let o=n(e,r);return o?(i(r.update(o)),!0):!1}}const Idt=EL($dt,0),Rdt=EL(zfe,0),Ldt=EL((n,e)=>zfe(n,e,Fdt(e)),0);function NL(n,e){let r=n.languageDataAt("commentTokens",e,1);return r.length?r[0]:{}}const Py=50;function zdt(n,{open:e,close:r},i,o){let s=n.sliceDoc(i-Py,i),a=n.sliceDoc(o,o+Py),l=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(a)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&a.slice(c,c+r.length)==r)return{open:{pos:i-l,margin:l&&1},close:{pos:o+c,margin:c&&1}};let d,h;o-i<=2*Py?d=h=n.sliceDoc(i,o):(d=n.sliceDoc(i,i+Py),h=n.sliceDoc(o-Py,o));let f=/^\s*/.exec(d)[0].length,m=/\s*$/.exec(h)[0].length,v=h.length-m-r.length;return d.slice(f,f+e.length)==e&&h.slice(v,v+r.length)==r?{open:{pos:i+f+e.length,margin:/\s/.test(d.charAt(f+e.length))?1:0},close:{pos:o-m-r.length,margin:/\s/.test(h.charAt(v-1))?1:0}}:null}function Fdt(n){let e=[];for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=r.to<=i.to?i:n.doc.lineAt(r.to);o.from>i.from&&o.from==r.to&&(o=r.to==i.to+1?i:n.doc.lineAt(r.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=o.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:o.to})}return e}function zfe(n,e,r=e.selection.ranges){let i=r.map(s=>NL(e,s.from).block);if(!i.every(s=>s))return null;let o=r.map((s,a)=>zdt(e,i[a],s.from,s.to));if(n!=2&&!o.every(s=>s))return{changes:e.changes(r.map((s,a)=>o[a]?[]:[{from:s.from,insert:i[a].open+" "},{from:s.to,insert:" "+i[a].close}]))};if(n!=1&&o.some(s=>s)){let s=[];for(let a=0,l;a<o.length;a++)if(l=o[a]){let c=i[a],{open:u,close:d}=l;s.push({from:u.pos-c.open.length,to:u.pos+u.margin},{from:d.pos-d.margin,to:d.pos+c.close.length})}return{changes:s}}return null}function $dt(n,e,r=e.selection.ranges){let i=[],o=-1;for(let{from:s,to:a}of r){let l=i.length,c=1e9,u=NL(e,s).line;if(u){for(let d=s;d<=a;){let h=e.doc.lineAt(d);if(h.from>o&&(s==a||a>h.from)){o=h.from;let f=/^\s*/.exec(h.text)[0].length,m=f==h.length,v=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<c&&(c=f),i.push({line:h,comment:v,token:u,indent:f,empty:m,single:!1})}d=h.to+1}if(c<1e9)for(let d=l;d<i.length;d++)i[d].indent<i[d].line.text.length&&(i[d].indent=c);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:c,indent:u,empty:d,single:h}of i)(h||!d)&&s.push({from:l.from+u,insert:c+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:l,token:c}of i)if(l>=0){let u=a.from+l,d=u+c.length;a.text[d-a.from]==" "&&d++,s.push({from:u,to:d})}return{changes:s}}return null}const VN=_d.define(),Bdt=_d.define(),Hdt=it.define(),Ffe=it.define({combine(n){return Bc(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(i,o)=>e(i,o)||r(i,o)})}}),$fe=ki.define({create(){return ux.empty},update(n,e){let r=e.state.facet(Ffe),i=e.annotation(VN);if(i){let c=ls.fromTransaction(e,i.selection),u=i.side,d=u==0?n.undone:n.done;return c?d=IC(d,d.length,r.minDepth,c):d=qfe(d,e.startState.selection),new ux(u==0?i.rest:d,u==0?d:i.rest)}let o=e.annotation(Bdt);if((o=="full"||o=="before")&&(n=n.isolate()),e.annotation(Br.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=ls.fromTransaction(e),a=e.annotation(Br.time),l=e.annotation(Br.userEvent);return s?n=n.addChanges(s,a,l,r,e):e.selection&&(n=n.addSelection(e.startState.selection,a,l,r.newGroupDelay)),(o=="full"||o=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new ux(n.done.map(ls.fromJSON),n.undone.map(ls.fromJSON))}});function qdt(n={}){return[$fe,Ffe.of(n),rt.domEventHandlers({beforeinput(e,r){let i=e.inputType=="historyUndo"?Bfe:e.inputType=="historyRedo"?WN:null;return i?(e.preventDefault(),i(r)):!1}})]}function l7(n,e){return function({state:r,dispatch:i}){if(!e&&r.readOnly)return!1;let o=r.field($fe,!1);if(!o)return!1;let s=o.pop(n,r,e);return s?(i(s),!0):!1}}const Bfe=l7(0,!1),WN=l7(1,!1),Vdt=l7(0,!0),Wdt=l7(1,!0);class ls{constructor(e,r,i,o,s){this.changes=e,this.effects=r,this.mapped=i,this.startSelection=o,this.selectionsAfter=s}setSelAfter(e){return new ls(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new ls(e.changes&&ei.fromJSON(e.changes),[],e.mapped&&Cc.fromJSON(e.mapped),e.startSelection&&De.fromJSON(e.startSelection),e.selectionsAfter.map(De.fromJSON))}static fromTransaction(e,r){let i=ka;for(let o of e.startState.facet(Hdt)){let s=o(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new ls(e.changes.invert(e.startState.doc),i,void 0,r||e.startState.selection,ka)}static selection(e){return new ls(void 0,ka,void 0,void 0,e)}}function IC(n,e,r,i){let o=e+1>r+20?e-r-1:0,s=n.slice(o,e);return s.push(i),s}function Udt(n,e){let r=[],i=!1;return n.iterChangedRanges((o,s)=>r.push(o,s)),e.iterChangedRanges((o,s,a,l)=>{for(let c=0;c<r.length;){let u=r[c++],d=r[c++];l>=u&&a<=d&&(i=!0)}}),i}function Kdt(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((r,i)=>r.empty!=e.ranges[i].empty).length===0}function Hfe(n,e){return n.length?e.length?n.concat(e):n:e}const ka=[],Gdt=200;function qfe(n,e){if(n.length){let r=n[n.length-1],i=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-Gdt));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),IC(n,n.length-1,1e9,r.setSelAfter(i)))}else return[ls.selection([e])]}function Ydt(n){let e=n[n.length-1],r=n.slice();return r[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function VP(n,e){if(!n.length)return n;let r=n.length,i=ka;for(;r;){let o=Zdt(n[r-1],e,i);if(o.changes&&!o.changes.empty||o.effects.length){let s=n.slice(0,r);return s[r-1]=o,s}else e=o.mapped,r--,i=o.selectionsAfter}return i.length?[ls.selection(i)]:ka}function Zdt(n,e,r){let i=Hfe(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):ka,r);if(!n.changes)return ls.selection(i);let o=n.changes.map(e),s=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(s):s;return new ls(o,Ht.mapEffects(n.effects,e),a,n.startSelection.map(s),i)}const Xdt=/^(input\.type|delete)($|\.)/;let ux=class lv{constructor(e,r,i=0,o=void 0){this.done=e,this.undone=r,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new lv(this.done,this.undone):this}addChanges(e,r,i,o,s){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||Xdt.test(i))&&(!l.selectionsAfter.length&&r-this.prevTime<o.newGroupDelay&&o.joinToEvent(s,Udt(l.changes,e.changes))||i=="input.type.compose")?a=IC(a,a.length-1,o.minDepth,new ls(e.changes.compose(l.changes),Hfe(Ht.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,ka)):a=IC(a,a.length,o.minDepth,e),new lv(a,ka,r,i)}addSelection(e,r,i,o){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ka;return s.length>0&&r-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Kdt(s[s.length-1],e)?this:new lv(qfe(this.done,e),this.undone,r,i)}addMapping(e){return new lv(VP(this.done,e),VP(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,i){let o=e==0?this.done:this.undone;if(o.length==0)return null;let s=o[o.length-1],a=s.selectionsAfter[0]||r.selection;if(i&&s.selectionsAfter.length)return r.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:VN.of({side:e,rest:Ydt(o),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=o.length==1?ka:o.slice(0,o.length-1);return s.mapped&&(l=VP(l,s.mapped)),r.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:VN.of({side:e,rest:l,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};ux.empty=new ux(ka,ka);const Jdt=[{key:"Mod-z",run:Bfe,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:WN,preventDefault:!0},{linux:"Ctrl-Shift-z",run:WN,preventDefault:!0},{key:"Mod-u",run:Vdt,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Wdt,preventDefault:!0}];function d1(n,e){return De.create(n.ranges.map(e),n.mainIndex)}function zl(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Fl({state:n,dispatch:e},r){let i=d1(n.selection,r);return i.eq(n.selection,!0)?!1:(e(zl(n,i)),!0)}function c7(n,e){return De.cursor(e?n.to:n.from)}function Vfe(n,e){return Fl(n,r=>r.empty?n.moveByChar(r,e):c7(r,e))}function ao(n){return n.textDirectionAt(n.state.selection.main.head)==$n.LTR}const Wfe=n=>Vfe(n,!ao(n)),Ufe=n=>Vfe(n,ao(n));function Kfe(n,e){return Fl(n,r=>r.empty?n.moveByGroup(r,e):c7(r,e))}const Qdt=n=>Kfe(n,!ao(n)),eht=n=>Kfe(n,ao(n));function tht(n,e,r){if(e.type.prop(r))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function u7(n,e,r){let i=Fi(n).resolveInner(e.head),o=r?nn.closedBy:nn.openedBy;for(let c=e.head;;){let u=r?i.childAfter(c):i.childBefore(c);if(!u)break;tht(n,u,o)?i=u:c=r?u.to:u.from}let s=i.type.prop(o),a,l;return s&&(a=r?vc(n,i.from,1):vc(n,i.to,-1))&&a.matched?l=r?a.end.to:a.end.from:l=r?i.to:i.from,De.cursor(l,r?-1:1)}const nht=n=>Fl(n,e=>u7(n.state,e,!ao(n))),rht=n=>Fl(n,e=>u7(n.state,e,ao(n)));function Gfe(n,e){return Fl(n,r=>{if(!r.empty)return c7(r,e);let i=n.moveVertically(r,e);return i.head!=r.head?i:n.moveToLineBoundary(r,e)})}const Yfe=n=>Gfe(n,!1),Zfe=n=>Gfe(n,!0);function Xfe(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,r=0,i=0,o;if(e){for(let s of n.state.facet(rt.scrollMargins)){let a=s(n);a?.top&&(r=Math.max(a?.top,r)),a?.bottom&&(i=Math.max(a?.bottom,i))}o=n.scrollDOM.clientHeight-r-i}else o=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,o-5)}}function Jfe(n,e){let r=Xfe(n),{state:i}=n,o=d1(i.selection,a=>a.empty?n.moveVertically(a,e,r.height):c7(a,e));if(o.eq(i.selection))return!1;let s;if(r.selfScroll){let a=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),c=l.top+r.marginTop,u=l.bottom-r.marginBottom;a&&a.top>c&&a.bottom<u&&(s=rt.scrollIntoView(o.main.head,{y:"start",yMargin:a.top-c}))}return n.dispatch(zl(i,o),{effects:s}),!0}const NX=n=>Jfe(n,!1),UN=n=>Jfe(n,!0);function mf(n,e,r){let i=n.lineBlockAt(e.head),o=n.moveToLineBoundary(e,r);if(o.head==e.head&&o.head!=(r?i.to:i.from)&&(o=n.moveToLineBoundary(e,r,!1)),!r&&o.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(o=De.cursor(i.from+s))}return o}const iht=n=>Fl(n,e=>mf(n,e,!0)),oht=n=>Fl(n,e=>mf(n,e,!1)),sht=n=>Fl(n,e=>mf(n,e,!ao(n))),aht=n=>Fl(n,e=>mf(n,e,ao(n))),lht=n=>Fl(n,e=>De.cursor(n.lineBlockAt(e.head).from,1)),cht=n=>Fl(n,e=>De.cursor(n.lineBlockAt(e.head).to,-1));function uht(n,e,r){let i=!1,o=d1(n.selection,s=>{let a=vc(n,s.head,-1)||vc(n,s.head,1)||s.head>0&&vc(n,s.head-1,1)||s.head<n.doc.length&&vc(n,s.head+1,-1);if(!a||!a.end)return s;i=!0;let l=a.start.from==s.head?a.end.to:a.end.from;return De.cursor(l)});return i?(e(zl(n,o)),!0):!1}const dht=({state:n,dispatch:e})=>uht(n,e);function Fa(n,e){let r=d1(n.state.selection,i=>{let o=e(i);return De.range(i.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return r.eq(n.state.selection)?!1:(n.dispatch(zl(n.state,r)),!0)}function Qfe(n,e){return Fa(n,r=>n.moveByChar(r,e))}const epe=n=>Qfe(n,!ao(n)),tpe=n=>Qfe(n,ao(n));function npe(n,e){return Fa(n,r=>n.moveByGroup(r,e))}const hht=n=>npe(n,!ao(n)),fht=n=>npe(n,ao(n)),pht=n=>Fa(n,e=>u7(n.state,e,!ao(n))),mht=n=>Fa(n,e=>u7(n.state,e,ao(n)));function rpe(n,e){return Fa(n,r=>n.moveVertically(r,e))}const ipe=n=>rpe(n,!1),ope=n=>rpe(n,!0);function spe(n,e){return Fa(n,r=>n.moveVertically(r,e,Xfe(n).height))}const jX=n=>spe(n,!1),OX=n=>spe(n,!0),ght=n=>Fa(n,e=>mf(n,e,!0)),yht=n=>Fa(n,e=>mf(n,e,!1)),vht=n=>Fa(n,e=>mf(n,e,!ao(n))),xht=n=>Fa(n,e=>mf(n,e,ao(n))),bht=n=>Fa(n,e=>De.cursor(n.lineBlockAt(e.head).from)),wht=n=>Fa(n,e=>De.cursor(n.lineBlockAt(e.head).to)),DX=({state:n,dispatch:e})=>(e(zl(n,{anchor:0})),!0),IX=({state:n,dispatch:e})=>(e(zl(n,{anchor:n.doc.length})),!0),RX=({state:n,dispatch:e})=>(e(zl(n,{anchor:n.selection.main.anchor,head:0})),!0),LX=({state:n,dispatch:e})=>(e(zl(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),kht=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Sht=({state:n,dispatch:e})=>{let r=d7(n).map(({from:i,to:o})=>De.range(i,Math.min(o+1,n.doc.length)));return e(n.update({selection:De.create(r),userEvent:"select"})),!0},Cht=({state:n,dispatch:e})=>{let r=d1(n.selection,i=>{let o=Fi(n),s=o.resolveStack(i.from,1);if(i.empty){let a=o.resolveStack(i.from,-1);a.node.from>=s.node.from&&a.node.to<=s.node.to&&(s=a)}for(let a=s;a;a=a.next){let{node:l}=a;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&a.next)return De.range(l.to,l.from)}return i});return r.eq(n.selection)?!1:(e(zl(n,r)),!0)};function ape(n,e){let{state:r}=n,i=r.selection,o=r.selection.ranges.slice();for(let s of r.selection.ranges){let a=r.doc.lineAt(s.head);if(e?a.to<n.state.doc.length:a.from>0)for(let l=s;;){let c=n.moveVertically(l,e);if(c.head<a.from||c.head>a.to){o.some(u=>u.head==c.head)||o.push(c);break}else{if(c.head==l.head)break;l=c}}}return o.length==i.ranges.length?!1:(n.dispatch(zl(r,De.create(o,o.length-1))),!0)}const _ht=n=>ape(n,!1),Aht=n=>ape(n,!0),Tht=({state:n,dispatch:e})=>{let r=n.selection,i=null;return r.ranges.length>1?i=De.create([r.main]):r.main.empty||(i=De.create([De.cursor(r.main.head)])),i?(e(zl(n,i)),!0):!1};function Pw(n,e){if(n.state.readOnly)return!1;let r="delete.selection",{state:i}=n,o=i.changeByRange(s=>{let{from:a,to:l}=s;if(a==l){let c=e(s);c<a?(r="delete.backward",c=Uk(n,c,!1)):c>a&&(r="delete.forward",c=Uk(n,c,!0)),a=Math.min(a,c),l=Math.max(l,c)}else a=Uk(n,a,!1),l=Uk(n,l,!0);return a==l?{range:s}:{changes:{from:a,to:l},range:De.cursor(a,a<s.head?-1:1)}});return o.changes.empty?!1:(n.dispatch(i.update(o,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?rt.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Uk(n,e,r){if(n instanceof rt)for(let i of n.state.facet(rt.atomicRanges).map(o=>o(n)))i.between(e,e,(o,s)=>{o<e&&s>e&&(e=r?s:o)});return e}const lpe=(n,e,r)=>Pw(n,i=>{let o=i.from,{state:s}=n,a=s.doc.lineAt(o),l,c;if(r&&!e&&o>a.from&&o<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,o-a.from))){if(l[l.length-1]=="	")return o-1;let u=e1(l,s.tabSize),d=u%hm(s)||hm(s);for(let h=0;h<d&&l[l.length-1-h]==" ";h++)o--;c=o}else c=ti(a.text,o-a.from,e,e)+a.from,c==o&&a.number!=(e?s.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,o-a.from))&&(c=ti(a.text,c-a.from,!1,!1)+a.from);return c}),KN=n=>lpe(n,!1,!0),cpe=n=>lpe(n,!0,!1),upe=(n,e)=>Pw(n,r=>{let i=r.head,{state:o}=n,s=o.doc.lineAt(i),a=o.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==r.head&&s.number!=(e?o.doc.lines:1)&&(i+=e?1:-1);break}let c=ti(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,c)-s.from,Math.max(i,c)-s.from),d=a(u);if(l!=null&&d!=l)break;(u!=" "||i!=r.head)&&(l=d),i=c}return i}),dpe=n=>upe(n,!1),Pht=n=>upe(n,!0),Mht=n=>Pw(n,e=>{let r=n.lineBlockAt(e.head).to;return e.head<r?r:Math.min(n.state.doc.length,e.head+1)}),Eht=n=>Pw(n,e=>{let r=n.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),Nht=n=>Pw(n,e=>{let r=n.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(n.state.doc.length,e.head+1)}),jht=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:wn.of(["",""])},range:De.cursor(i.from)}));return e(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},Oht=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let o=i.from,s=n.doc.lineAt(o),a=o==s.from?o-1:ti(s.text,o-s.from,!1)+s.from,l=o==s.to?o+1:ti(s.text,o-s.from,!0)+s.from;return{changes:{from:a,to:l,insert:n.doc.slice(o,l).append(n.doc.slice(a,o))},range:De.cursor(l)}});return r.changes.empty?!1:(e(n.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function d7(n){let e=[],r=-1;for(let i of n.selection.ranges){let o=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),r>=o.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(i)}else e.push({from:o.from,to:s.to,ranges:[i]});r=s.number+1}return e}function hpe(n,e,r){if(n.readOnly)return!1;let i=[],o=[];for(let s of d7(n)){if(r?s.to==n.doc.length:s.from==0)continue;let a=n.doc.lineAt(r?s.to+1:s.from-1),l=a.length+1;if(r){i.push({from:s.to,to:a.to},{from:s.from,insert:a.text+n.lineBreak});for(let c of s.ranges)o.push(De.range(Math.min(n.doc.length,c.anchor+l),Math.min(n.doc.length,c.head+l)))}else{i.push({from:a.from,to:s.from},{from:s.to,insert:n.lineBreak+a.text});for(let c of s.ranges)o.push(De.range(c.anchor-l,c.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:De.create(o,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Dht=({state:n,dispatch:e})=>hpe(n,e,!1),Iht=({state:n,dispatch:e})=>hpe(n,e,!0);function fpe(n,e,r){if(n.readOnly)return!1;let i=[];for(let s of d7(n))r?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});let o=n.changes(i);return e(n.update({changes:o,selection:n.selection.map(o,r?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Rht=({state:n,dispatch:e})=>fpe(n,e,!1),Lht=({state:n,dispatch:e})=>fpe(n,e,!0),zht=n=>{if(n.state.readOnly)return!1;let{state:e}=n,r=e.changes(d7(e).map(({from:o,to:s})=>(o>0?o--:s<e.doc.length&&s++,{from:o,to:s}))),i=d1(e.selection,o=>{let s;if(n.lineWrapping){let a=n.lineBlockAt(o.head),l=n.coordsAtPos(o.head,o.assoc||1);l&&(s=a.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(o,!0,s)}).map(r);return n.dispatch({changes:r,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Fht(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=Fi(n).resolveInner(e),i=r.childBefore(e),o=r.childAfter(e),s;return i&&o&&i.to<=e&&o.from>=e&&(s=i.type.prop(nn.closedBy))&&s.indexOf(o.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(o.from).from&&!/\S/.test(n.sliceDoc(i.to,o.from))?{from:i.to,to:o.from}:null}const zX=ppe(!1),$ht=ppe(!0);function ppe(n){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let i=e.changeByRange(o=>{let{from:s,to:a}=o,l=e.doc.lineAt(s),c=!n&&s==a&&Fht(e,s);n&&(s=a=(a<=l.to?l:e.doc.lineAt(a)).to);let u=new O6(e,{simulateBreak:s,simulateDoubleBreak:!!c}),d=II(u,s);for(d==null&&(d=e1(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;c?{from:s,to:a}=c:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let h=["",ub(e,d)];return c&&h.push(ub(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:a,insert:wn.of(h)},range:De.cursor(s+1+h[1].length)}});return r(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function jL(n,e){let r=-1;return n.changeByRange(i=>{let o=[];for(let a=i.from;a<=i.to;){let l=n.doc.lineAt(a);l.number>r&&(i.empty||i.to>l.from)&&(e(l,o,i),r=l.number),a=l.to+1}let s=n.changes(o);return{changes:o,range:De.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Bht=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=Object.create(null),i=new O6(n,{overrideIndentation:s=>{let a=r[s];return a??-1}}),o=jL(n,(s,a,l)=>{let c=II(i,s.from);if(c==null)return;/\S/.test(s.text)||(c=0);let u=/^\s*/.exec(s.text)[0],d=ub(n,c);(u!=d||l.from<s.from+u.length)&&(r[s.from]=c,a.push({from:s.from,to:s.from+u.length,insert:d}))});return o.changes.empty||e(n.update(o,{userEvent:"indent"})),!0},mpe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(jL(n,(r,i)=>{i.push({from:r.from,insert:n.facet(j6)})}),{userEvent:"input.indent"})),!0),gpe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(jL(n,(r,i)=>{let o=/^\s*/.exec(r.text)[0];if(!o)return;let s=e1(o,n.tabSize),a=0,l=ub(n,Math.max(0,s-hm(n)));for(;a<o.length&&a<l.length&&o.charCodeAt(a)==l.charCodeAt(a);)a++;i.push({from:r.from+a,to:r.from+o.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),Hht=n=>(n.setTabFocusMode(),!0),qht=[{key:"Ctrl-b",run:Wfe,shift:epe,preventDefault:!0},{key:"Ctrl-f",run:Ufe,shift:tpe},{key:"Ctrl-p",run:Yfe,shift:ipe},{key:"Ctrl-n",run:Zfe,shift:ope},{key:"Ctrl-a",run:lht,shift:bht},{key:"Ctrl-e",run:cht,shift:wht},{key:"Ctrl-d",run:cpe},{key:"Ctrl-h",run:KN},{key:"Ctrl-k",run:Mht},{key:"Ctrl-Alt-h",run:dpe},{key:"Ctrl-o",run:jht},{key:"Ctrl-t",run:Oht},{key:"Ctrl-v",run:UN}],Vht=[{key:"ArrowLeft",run:Wfe,shift:epe,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Qdt,shift:hht,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:sht,shift:vht,preventDefault:!0},{key:"ArrowRight",run:Ufe,shift:tpe,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:eht,shift:fht,preventDefault:!0},{mac:"Cmd-ArrowRight",run:aht,shift:xht,preventDefault:!0},{key:"ArrowUp",run:Yfe,shift:ipe,preventDefault:!0},{mac:"Cmd-ArrowUp",run:DX,shift:RX},{mac:"Ctrl-ArrowUp",run:NX,shift:jX},{key:"ArrowDown",run:Zfe,shift:ope,preventDefault:!0},{mac:"Cmd-ArrowDown",run:IX,shift:LX},{mac:"Ctrl-ArrowDown",run:UN,shift:OX},{key:"PageUp",run:NX,shift:jX},{key:"PageDown",run:UN,shift:OX},{key:"Home",run:oht,shift:yht,preventDefault:!0},{key:"Mod-Home",run:DX,shift:RX},{key:"End",run:iht,shift:ght,preventDefault:!0},{key:"Mod-End",run:IX,shift:LX},{key:"Enter",run:zX,shift:zX},{key:"Mod-a",run:kht},{key:"Backspace",run:KN,shift:KN,preventDefault:!0},{key:"Delete",run:cpe,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:dpe,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Pht,preventDefault:!0},{mac:"Mod-Backspace",run:Eht,preventDefault:!0},{mac:"Mod-Delete",run:Nht,preventDefault:!0}].concat(qht.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),ype=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:nht,shift:pht},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:rht,shift:mht},{key:"Alt-ArrowUp",run:Dht},{key:"Shift-Alt-ArrowUp",run:Rht},{key:"Alt-ArrowDown",run:Iht},{key:"Shift-Alt-ArrowDown",run:Lht},{key:"Mod-Alt-ArrowUp",run:_ht},{key:"Mod-Alt-ArrowDown",run:Aht},{key:"Escape",run:Tht},{key:"Mod-Enter",run:$ht},{key:"Alt-l",mac:"Ctrl-l",run:Sht},{key:"Mod-i",run:Cht,preventDefault:!0},{key:"Mod-[",run:gpe},{key:"Mod-]",run:mpe},{key:"Mod-Alt-\\",run:Bht},{key:"Shift-Mod-k",run:zht},{key:"Shift-Mod-\\",run:dht},{key:"Mod-/",run:Ddt},{key:"Alt-A",run:Rdt},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Hht}].concat(Vht),Wht={key:"Tab",run:mpe,shift:gpe};var RC=200,xi=function(){};xi.prototype.append=function(e){return e.length?(e=xi.from(e),!this.length&&e||e.length<RC&&this.leafAppend(e)||this.length<RC&&e.leafPrepend(this)||this.appendInner(e)):this};xi.prototype.prepend=function(e){return e.length?xi.from(e).append(this):this};xi.prototype.appendInner=function(e){return new Uht(this,e)};xi.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?xi.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};xi.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};xi.prototype.forEach=function(e,r,i){r===void 0&&(r=0),i===void 0&&(i=this.length),r<=i?this.forEachInner(e,r,i,0):this.forEachInvertedInner(e,r,i,0)};xi.prototype.map=function(e,r,i){r===void 0&&(r=0),i===void 0&&(i=this.length);var o=[];return this.forEach(function(s,a){return o.push(e(s,a))},r,i),o};xi.from=function(e){return e instanceof xi?e:e&&e.length?new vpe(e):xi.empty};var vpe=(function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,a,l){for(var c=s;c<a;c++)if(o(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,a,l){for(var c=s-1;c>=a;c--)if(o(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=RC)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=RC)return new e(o.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e})(xi);xi.empty=new vpe([]);var Uht=(function(n){function e(r,i){n.call(this),this.left=r,this.right=i,this.length=r.length+i.length,this.depth=Math.max(r.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,o,s,a){var l=this.left.length;if(o<l&&this.left.forEachInner(i,o,Math.min(s,l),a)===!1||s>l&&this.right.forEachInner(i,Math.max(o-l,0),Math.min(this.length,s)-l,a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){var l=this.left.length;if(o>l&&this.right.forEachInvertedInner(i,o-l,Math.max(s,l)-l,a+l)===!1||s<l&&this.left.forEachInvertedInner(i,Math.min(o,l),s,a)===!1)return!1},e.prototype.sliceInner=function(i,o){if(i==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(i,o):i>=s?this.right.slice(i-s,o-s):this.left.slice(i,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(i){var o=this.right.leafAppend(i);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(i){var o=this.left.leafPrepend(i);if(o)return new e(o,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e})(xi);const Kht=500;class cl{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let o,s;r&&(o=this.remapping(i,this.items.length),s=o.maps.length);let a=e.tr,l,c,u=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){o||(o=this.remapping(i,f+1),s=o.maps.length),s--,d.push(h);return}if(o){d.push(new ic(h.map));let m=h.step.map(o.slice(s)),v;m&&a.maybeStep(m).doc&&(v=a.mapping.maps[a.mapping.maps.length-1],u.push(new ic(v,void 0,void 0,u.length+d.length))),s--,v&&o.appendMap(v,s)}else a.maybeStep(h.step);if(h.selection)return l=o?h.selection.map(o.slice(s)):h.selection,c=new cl(this.items.slice(0,i).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:l}}addTransform(e,r,i,o){let s=[],a=this.eventCount,l=this.items,c=!o&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new ic(e.mapping.maps[d],h,r),m;(m=c&&c.merge(f))&&(f=m,d?s.pop():l=l.slice(0,l.length-1)),s.push(f),r&&(a++,r=void 0),o||(c=f)}let u=a-i.depth;return u>Yht&&(l=Ght(l,u),a-=u),new cl(l.append(s),a)}remapping(e,r){let i=new kx;return this.items.forEach((o,s)=>{let a=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?i.maps.length-o.mirrorOffset:void 0;i.appendMap(o.map,a)},e,r),i}addMaps(e){return this.eventCount==0?this:new cl(this.items.append(e.map(r=>new ic(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let i=[],o=Math.max(0,this.items.length-r),s=e.mapping,a=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},o);let c=r;this.items.forEach(f=>{let m=s.getMirror(--c);if(m==null)return;a=Math.min(a,m);let v=s.maps[m];if(f.step){let x=e.steps[m].invert(e.docs[m]),b=f.selection&&f.selection.map(s.slice(c+1,m));b&&l++,i.push(new ic(v,x,b))}else i.push(new ic(v))},o);let u=[];for(let f=r;f<a;f++)u.push(new ic(s.maps[f]));let d=this.items.slice(0,o).append(u).append(i),h=new cl(d,l);return h.emptyItemCount()>Kht&&(h=h.compress(this.items.length-i.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),i=r.maps.length,o=[],s=0;return this.items.forEach((a,l)=>{if(l>=e)o.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(r.slice(i)),u=c&&c.getMap();if(i--,u&&r.appendMap(u,i),c){let d=a.selection&&a.selection.map(r.slice(i));d&&s++;let h=new ic(u.invert(),c,d),f,m=o.length-1;(f=o.length&&o[m].merge(h))?o[m]=f:o.push(h)}}else a.map&&i--},this.items.length,0),new cl(xi.from(o.reverse()),s)}}cl.empty=new cl(xi.empty,0);function Ght(n,e){let r;return n.forEach((i,o)=>{if(i.selection&&e--==0)return r=o,!1}),n.slice(r)}class ic{constructor(e,r,i,o){this.map=e,this.step=r,this.selection=i,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new ic(r.getMap().invert(),r,this.selection)}}}class kh{constructor(e,r,i,o,s){this.done=e,this.undone=r,this.prevRanges=i,this.prevTime=o,this.prevComposition=s}}const Yht=20;function Zht(n,e,r,i){let o=r.getMeta(Bp),s;if(o)return o.historyState;r.getMeta(Qht)&&(n=new kh(n.done,n.undone,null,0,-1));let a=r.getMeta("appendedTransaction");if(r.steps.length==0)return n;if(a&&a.getMeta(Bp))return a.getMeta(Bp).redo?new kh(n.done.addTransform(r,void 0,i,uS(e)),n.undone,FX(r.mapping.maps),n.prevTime,n.prevComposition):new kh(n.done,n.undone.addTransform(r,void 0,i,uS(e)),null,n.prevTime,n.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let l=r.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=l&&(n.prevTime<(r.time||0)-i.newGroupDelay||!Xht(r,n.prevRanges)),u=a?WP(n.prevRanges,r.mapping):FX(r.mapping.maps);return new kh(n.done.addTransform(r,c?e.selection.getBookmark():void 0,i,uS(e)),cl.empty,u,r.time,l??n.prevComposition)}else return(s=r.getMeta("rebased"))?new kh(n.done.rebased(r,s),n.undone.rebased(r,s),WP(n.prevRanges,r.mapping),n.prevTime,n.prevComposition):new kh(n.done.addMaps(r.mapping.maps),n.undone.addMaps(r.mapping.maps),WP(n.prevRanges,r.mapping),n.prevTime,n.prevComposition)}function Xht(n,e){if(!e)return!1;if(!n.docChanged)return!0;let r=!1;return n.mapping.maps[0].forEach((i,o)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&o>=e[s]&&(r=!0)}),r}function FX(n){let e=[];for(let r=n.length-1;r>=0&&e.length==0;r--)n[r].forEach((i,o,s,a)=>e.push(s,a));return e}function WP(n,e){if(!n)return null;let r=[];for(let i=0;i<n.length;i+=2){let o=e.map(n[i],1),s=e.map(n[i+1],-1);o<=s&&r.push(o,s)}return r}function Jht(n,e,r){let i=uS(e),o=Bp.get(e).spec.config,s=(r?n.undone:n.done).popEvent(e,i);if(!s)return null;let a=s.selection.resolve(s.transform.doc),l=(r?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new kh(r?l:s.remaining,r?s.remaining:l,null,0,-1);return s.transform.setSelection(a).setMeta(Bp,{redo:r,historyState:c})}let UP=!1,$X=null;function uS(n){let e=n.plugins;if($X!=e){UP=!1,$X=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){UP=!0;break}}return UP}const Bp=new lr("history"),Qht=new lr("closeHistory");function eft(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new ar({key:Bp,state:{init(){return new kh(cl.empty,cl.empty,null,0,-1)},apply(e,r,i){return Zht(r,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,r){let i=r.inputType,o=i=="historyUndo"?h7:i=="historyRedo"?Og:null;return!o||!e.editable?!1:(r.preventDefault(),o(e.state,e.dispatch))}}}})}function xpe(n,e){return(r,i)=>{let o=Bp.getState(r);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(i){let s=Jht(o,r,n);s&&i(e?s.scrollIntoView():s)}return!0}}const h7=xpe(!1,!0),Og=xpe(!0,!0);var tft=Object.defineProperty,BX=Object.getOwnPropertySymbols,nft=Object.prototype.hasOwnProperty,rft=Object.prototype.propertyIsEnumerable,HX=(n,e,r)=>e in n?tft(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ift=(n,e)=>{for(var r in e||(e={}))nft.call(e,r)&&HX(n,r,e[r]);if(BX)for(var r of BX(e))rft.call(e,r)&&HX(n,r,e[r]);return n};function bpe(n,e){return Object.assign(n,{meta:ift({package:"@milkdown/components"},e)}),n}const oft={extensions:[],languages:[],expandIcon:"",searchIcon:"",clearSearchIcon:"",searchPlaceholder:"Search language",noResultText:"No result",copyText:"Copy",copyIcon:"",onCopy:()=>{},renderLanguage:n=>n,renderPreview:()=>null,previewToggleButton:n=>n?"Edit":"Hide",previewLabel:"Preview",previewLoading:"Loading..."},Mw=En(oft,"codeBlockConfigCtx");bpe(Mw,{displayName:"Config<code-block>",group:"CodeBlock"});class sft{constructor(e){this.languages=e,this.map={},e.forEach(r=>{r.alias.forEach(i=>{this.map[i]=r})})}getAll(){return this.languages.map(e=>({name:e.name,alias:e.alias}))}load(e){const i=this.map[e.toLowerCase()];return i?i.support?Promise.resolve(i.support):i.load():Promise.resolve(void 0)}}function ng({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}ng.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var aft=(n,e,r)=>new Promise((i,o)=>{var s=c=>{try{l(r.next(c))}catch(u){o(u)}},a=c=>{try{l(r.throw(c))}catch(u){o(u)}},l=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,a);l((r=r.apply(n,e)).next())});function lft(n){return aft(this,null,function*(){try{return navigator.clipboard.writeText(n)}catch{const r=document.createElement("textarea"),i=document.activeElement;r.value=n,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";const o=document.getSelection(),s=o?o.rangeCount>0&&o.getRangeAt(0):null;document.body.appendChild(r),r.select(),r.selectionStart=0,r.selectionEnd=n.length,document.execCommand("copy"),document.body.removeChild(r),s&&(o.removeAllRanges(),o.addRange(s)),i&&i.focus()}})}const cft=qi({props:{copyText:{type:String,required:!0},copyIcon:{type:String,required:!0},onCopy:{type:Function,required:!0},text:{type:String,required:!0}},setup(n){const e=()=>{lft(n.text).then(()=>n.onCopy(n.text)).catch(console.error)};return()=>Ae(gi,null,Ae("button",{type:"button",class:"copy-button",onClick:e},Ae(ng,{icon:n.copyIcon}),n.copyText))}}),uft=qi({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:n,config:e,setLanguage:r,getAllLanguages:i,getReadOnly:o}){const s=mt(),a=mt(!1),l=mt(),c=mt(),u=mt("");$p([a,s,c],()=>{u.value="";const x=s.value,b=c.value;!x||!b||Ic(x,b,{placement:"bottom-start"}).then(({x:w,y:S})=>{Object.assign(b.style,{left:`${w}px`,top:`${S}px`})}).catch(console.error)});const d=x=>{if(x.preventDefault(),x.stopPropagation(),o())return;const b=!a.value;a.value=b,b&&setTimeout(()=>{var w;return(w=l.value)==null?void 0:w.focus()},0)},h=x=>{const b=x.target;u.value=b.value},f=x=>{x.key==="Escape"&&(u.value="")},m=Eg(()=>{var x;if(!a.value)return[];const b=(x=i())!=null?x:[],w=b.find(_=>_.name.toLowerCase()===n.value.toLowerCase()),S=b.filter(_=>{const P=u.value.toLowerCase();return(_.name.toLowerCase().includes(P)||_.alias.some(A=>A.toLowerCase().includes(P)))&&_!==w});return S.length===0?[]:w?[w,...S]:S}),v=x=>{const b=x.target;if(s.value&&s.value.contains(b))return;const w=c.value,S=s.value;!S||!w||S.dataset.expanded==="true"&&(w.contains(b)||(a.value=!1))};return xw(()=>{window.addEventListener("click",v)}),bw(()=>{window.removeEventListener("click",v)}),()=>Ae(gi,null,Ae("button",{type:"button",ref:s,class:"language-button",onClick:d,"data-expanded":String(a.value)},n.value||"Text",Ae("div",{class:"expand-icon"},Ae(ng,{icon:e.expandIcon}))),Ae("div",{ref:c,class:"language-picker"},a.value?Ae("div",{class:"list-wrapper"},Ae("div",{class:"search-box"},Ae("div",{class:"search-icon"},Ae(ng,{icon:e.searchIcon})),Ae("input",{ref:l,class:"search-input",placeholder:e.searchPlaceholder,value:u.value,onInput:h,onKeydown:f}),Ae("div",{class:Vt("clear-icon",u.value.length===0&&"hidden"),onMousedown:x=>{x.preventDefault(),u.value=""}},Ae(ng,{icon:e.clearSearchIcon}))),Ae("ul",{class:"language-list",role:"listbox",onKeydown:x=>{if(x.key==="Enter"){const b=document.activeElement;b instanceof HTMLElement&&b.dataset.language&&r(b.dataset.language)}}},m.value.length?m.value.map(x=>Ae("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":x.name.toLowerCase()===n.value.toLowerCase(),"data-language":x.name,onClick:()=>{r(x.name),a.value=!1}},e.renderLanguage(x.name,x.name.toLowerCase()===n.value.toLowerCase()))):Ae("li",{class:"language-list-item no-result"},e.noResultText))):null))}}),dft=qi({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(n){const{previewOnlyMode:e,config:r,preview:i}=n,o=mt();return l1(()=>{const s=o.value;if(!s)return;for(;s.firstChild;)s.removeChild(s.firstChild);const a=i.value;(typeof a=="string"||a instanceof Element)&&(s.innerHTML=La.sanitize(a))}),()=>i.value?Ae("div",{class:"preview-panel"},!e.value&&Ae(gi,null,Ae("div",{class:"preview-divider"}),Ae("div",{class:"preview-label"},r.previewLabel)),Ae("div",{ref:o,class:"preview"})):null}}),hft=qi({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(n){var e;const r=(e=n.config.previewOnlyByDefault)!=null?e:n.getReadOnly(),i=mt(r),o=mt(),s=mt(null);xw(()=>{for(var l;(l=o.value)!=null&&l.firstChild;)o.value.removeChild(o.value.firstChild);o.value&&o.value.appendChild(n.codemirror.dom)}),$p(()=>[n.text.value,n.language.value],()=>{const l=n.config.renderPreview(n.language.value,n.text.value,u=>s.value=u);l&&(s.value=l),l===void 0&&!s.value&&(s.value=La.sanitize(n.config.previewLoading)),l===null&&(s.value=null)},{immediate:!0});const a=()=>{};return()=>{var l;return Ae(gi,null,Ae("div",{class:"tools"},Ae(uft,{language:n.language,config:n.config,setLanguage:n.setLanguage,getAllLanguages:n.getAllLanguages,getReadOnly:n.getReadOnly}),Ae("div",{class:"tools-button-group"},Ae(cft,{copyIcon:n.config.copyIcon,copyText:n.config.copyText,onCopy:(l=n.config.onCopy)!=null?l:a,text:n.text.value}),s.value?Ae("button",{class:"preview-toggle-button",onClick:()=>i.value=!i.value},Ae(ng,{icon:n.config.previewToggleButton(i.value)})):null)),Ae("div",{ref:o,class:Vt("codemirror-host",s.value&&i.value&&"hidden")}),Ae(dft,{text:n.text,language:n.language,config:n.config,previewOnlyMode:i,preview:s}))}}});class fft{constructor(e,r,i,o,s){this.node=e,this.view=r,this.getPos=i,this.loader=o,this.config=s,this.selected=mt(!1),this.language=mt(""),this.text=mt(""),this.updating=!1,this.languageName="",this.forwardUpdate=a=>{var l;if(this.updating||!this.cm.hasFocus)return;let c=((l=this.getPos())!=null?l:0)+1;const{main:u}=a.state.selection,d=c+u.from,h=c+u.to,f=this.view.state.selection;if(a.docChanged||f.from!==d||f.to!==h){const m=this.view.state.tr;a.changes.iterChanges((v,x,b,w,S)=>{S.length?m.replaceWith(c+v,c+x,this.view.state.schema.text(S.toString())):m.delete(c+v,c+x),c+=w-b-(x-v)}),m.setSelection(xt.create(m.doc,d,h)),this.view.dispatch(m)}},this.createApp=()=>Ll(hft,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{const a=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>Fte(a.state,a.dispatch)?(a.focus(),!0):!1},{key:"Mod-z",run:()=>h7(a.state,a.dispatch)},{key:"Shift-Mod-z",run:()=>Og(a.state,a.dispatch)},{key:"Mod-y",run:()=>Og(a.state,a.dispatch)},{key:"Backspace",run:()=>{var l;const c=this.cm.state.selection.ranges;if(c.length>1)return!1;const u=c[0];if(u&&(!u.empty||u.anchor>0)||this.cm.state.doc.lines>=2)return!1;const d=this.view.state,h=(l=this.getPos())!=null?l:0,f=d.tr.replaceWith(h,h+this.node.nodeSize,d.schema.nodes.paragraph.createChecked({},this.node.content));return f.setSelection(xt.near(f.doc.resolve(h))),this.view.dispatch(f),this.view.focus(),!0}}]},this.maybeEscape=(a,l)=>{var c;const{state:u}=this.cm;let d=u.selection.main;if(!d.empty||(a==="line"&&(d=u.doc.lineAt(d.head)),l<0?d.from>0:d.to<u.doc.length))return!1;const h=((c=this.getPos())!=null?c:0)+(l<0?0:this.node.nodeSize),f=xt.near(this.view.state.doc.resolve(h),l),m=this.view.state.tr.setSelection(f).scrollIntoView();return this.view.dispatch(m),this.view.focus(),!0},this.setLanguage=a=>{var l;this.view.dispatch(this.view.state.tr.setNodeAttribute((l=this.getPos())!=null?l:0,"language",a))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new wg,this.readOnlyConf=new wg,this.cm=new rt({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(un.readOnly.of(!this.view.editable)),Rue(),t1.of(this.codeMirrorKeymap()),this.languageConf.of([]),un.changeFilter.of(()=>this.view.editable),...s.extensions,rt.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=l1(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(e){const r=document.createElement("div");return r.className="milkdown-code-block",this.text.value=this.node.textContent,e.mount(r),r}updateLanguage(){const e=this.node.attrs.language;if(e===this.languageName)return;this.language.value=e,this.loader.load(e??"").then(i=>{i&&(this.cm.dispatch({effects:this.languageConf.reconfigure(i)}),this.languageName=e)}).catch(console.error)}setSelection(e,r){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:e,head:r}}),this.updating=!1)}update(e){if(e.type!==this.node.type)return!1;if(this.updating)return!0;this.node=e,this.text.value=e.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(un.readOnly.of(!this.view.editable))});const r=pft(this.cm.state.doc.toString(),e.textContent);return r&&(this.updating=!0,this.cm.dispatch({changes:{from:r.from,to:r.to,insert:r.text},scrollIntoView:!0}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}function pft(n,e){if(n===e)return null;let r=0,i=n.length,o=e.length;for(;r<i&&n.charCodeAt(r)===e.charCodeAt(r);)++r;for(;i>r&&o>r&&n.charCodeAt(i-1)===e.charCodeAt(o-1);)i--,o--;return{from:r,to:i,text:e.slice(r,o)}}const wpe=pw(Rc.node,n=>{const e=n.get(Mw.key),r=new sft(e.languages);return(i,o,s)=>new fft(i,o,s,r,e)});bpe(wpe,{displayName:"NodeView<code-block>",group:"CodeBlock"});const mft=[wpe,Mw],qX=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Dg{constructor(e,r,i=0,o=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,o),this.bufferStart=i,this.normalize=s?l=>s(qX(l)):qX,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ts(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=gI(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=uc(e);let o=this.normalize(r);if(o.length)for(let s=0,a=i;;s++){let l=o.charCodeAt(s),c=this.match(l,a,this.bufferPos+this.bufferStart);if(s==o.length-1){if(c)return this.value=c,this;break}a==i&&s<r.length&&r.charCodeAt(s)==l&&a++}}}match(e,r,i){let o=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?o={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?o={from:r,to:i}:this.matches.push(1,r)),o&&this.test&&!this.test(o.from,o.to,this.buffer,this.bufferStart)&&(o=null),o}}typeof Symbol<"u"&&(Dg.prototype[Symbol.iterator]=function(){return this});const kpe={from:-1,to:-1,match:/.*/.exec("")},OL="gm"+(/x/.unicode==null?"":"u");class Spe{constructor(e,r,i,o=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=kpe,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new Cpe(e,r,i,o,s);this.re=new RegExp(r,OL+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let a=e.lineAt(o);this.curLineStart=a.from,this.matchPos=LC(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let i=this.curLineStart+r.index,o=i+r[0].length;if(this.matchPos=LC(this.text,o+(i==o?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<o||i>this.value.to)&&(!this.test||this.test(i,o,r)))return this.value={from:i,to:o,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const KP=new WeakMap;class rg{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,i){let o=KP.get(e);if(!o||o.from>=i||o.to<=r){let l=new rg(r,e.sliceString(r,i));return KP.set(e,l),l}if(o.from==r&&o.to==i)return o;let{text:s,from:a}=o;return a>r&&(s=e.sliceString(r,a)+s,a=r),o.to<i&&(s+=e.sliceString(o.to,i)),KP.set(e,new rg(a,s)),new rg(r,s.slice(r-a,i-a))}}class Cpe{constructor(e,r,i,o,s){this.text=e,this.to=s,this.done=!1,this.value=kpe,this.matchPos=LC(e,o),this.re=new RegExp(r,OL+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=rg.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let i=this.flat.from+r.index,o=i+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,o,r)))return this.value={from:i,to:o,match:r},this.matchPos=LC(this.text,o+(i==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=rg.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Spe.prototype[Symbol.iterator]=Cpe.prototype[Symbol.iterator]=function(){return this});function gft(n){try{return new RegExp(n,OL),!0}catch{return!1}}function LC(n,e){if(e>=n.length)return e;let r=n.lineAt(e),i;for(;e<r.to&&(i=r.text.charCodeAt(e-r.from))>=56320&&i<57344;)e++;return e}const yft=n=>{let{state:e}=n,r=String(e.doc.lineAt(n.state.selection.main.head).number),{close:i,result:o}=mnt(n,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:r},focus:!0,submitLabel:e.phrase("go")});return o.then(s=>{let a=s&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.elements.line.value);if(!a){n.dispatch({effects:i});return}let l=e.doc.lineAt(e.selection.main.head),[,c,u,d,h]=a,f=d?+d.slice(1):0,m=u?+u:l.number;if(u&&h){let b=m/100;c&&(b=b*(c=="-"?-1:1)+l.number/e.doc.lines),m=Math.round(e.doc.lines*b)}else u&&c&&(m=m*(c=="-"?-1:1)+l.number);let v=e.doc.line(Math.max(1,Math.min(e.doc.lines,m))),x=De.cursor(v.from+Math.max(0,Math.min(f,v.length)));n.dispatch({effects:[i,rt.scrollIntoView(x.from,{y:"center"})],selection:x})}),!0},vft={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},xft=it.define({combine(n){return Bc(n,vft,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function bft(n){return[_ft,Cft]}const wft=Et.mark({class:"cm-selectionMatch"}),kft=Et.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function VX(n,e,r,i){return(r==0||n(e.sliceDoc(r-1,r))!=pr.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=pr.Word)}function Sft(n,e,r,i){return n(e.sliceDoc(r,r+1))==pr.Word&&n(e.sliceDoc(i-1,i))==pr.Word}const Cft=Wr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(xft),{state:r}=n,i=r.selection;if(i.ranges.length>1)return Et.none;let o=i.main,s,a=null;if(o.empty){if(!e.highlightWordAroundCursor)return Et.none;let c=r.wordAt(o.head);if(!c)return Et.none;a=r.charCategorizer(o.head),s=r.sliceDoc(c.from,c.to)}else{let c=o.to-o.from;if(c<e.minSelectionLength||c>200)return Et.none;if(e.wholeWords){if(s=r.sliceDoc(o.from,o.to),a=r.charCategorizer(o.head),!(VX(a,r,o.from,o.to)&&Sft(a,r,o.from,o.to)))return Et.none}else if(s=r.sliceDoc(o.from,o.to),!s)return Et.none}let l=[];for(let c of n.visibleRanges){let u=new Dg(r.doc,s,c.from,c.to);for(;!u.next().done;){let{from:d,to:h}=u.value;if((!a||VX(a,r,d,h))&&(o.empty&&d<=o.from&&h>=o.to?l.push(kft.range(d,h)):(d>=o.to||h<=o.from)&&l.push(wft.range(d,h)),l.length>e.maxMatches))return Et.none}}return Et.set(l)}},{decorations:n=>n.decorations}),_ft=rt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Aft=({state:n,dispatch:e})=>{let{selection:r}=n,i=De.create(r.ranges.map(o=>n.wordAt(o.head)||De.cursor(o.head)),r.mainIndex);return i.eq(r)?!1:(e(n.update({selection:i})),!0)};function Tft(n,e){let{main:r,ranges:i}=n.selection,o=n.wordAt(r.head),s=o&&o.from==r.from&&o.to==r.to;for(let a=!1,l=new Dg(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new Dg(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(c=>c.from==l.value.from))continue;if(s){let c=n.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const Pft=({state:n,dispatch:e})=>{let{ranges:r}=n.selection;if(r.some(s=>s.from===s.to))return Aft({state:n,dispatch:e});let i=n.sliceDoc(r[0].from,r[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let o=Tft(n,i);return o?(e(n.update({selection:n.selection.addRange(De.range(o.from,o.to),!1),effects:rt.scrollIntoView(o.to)})),!0):!1},h1=it.define({combine(n){return Bc(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Hft(e),scrollToMatch:e=>rt.scrollIntoView(e)})}});class _pe{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||gft(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new Dft(this):new Nft(this)}getCursor(e,r=0,i){let o=e.doc?e:un.create({doc:e});return i==null&&(i=o.doc.length),this.regexp?A0(this,o,r,i):_0(this,o,r,i)}}class Ape{constructor(e){this.spec=e}}function Mft(n,e,r){return(i,o,s,a)=>{if(r&&!r(i,o,s,a))return!1;let l=i>=a&&o<=a+s.length?s.slice(i-a,o-a):e.doc.sliceString(i,o);return n(l,e,i,o)}}function _0(n,e,r,i){let o;return n.wholeWord&&(o=Eft(e.doc,e.charCategorizer(e.selection.main.head))),n.test&&(o=Mft(n.test,e,o)),new Dg(e.doc,n.unquoted,r,i,n.caseSensitive?void 0:s=>s.toLowerCase(),o)}function Eft(n,e){return(r,i,o,s)=>((s>r||s+o.length<i)&&(s=Math.max(0,r-2),o=n.sliceString(s,Math.min(n.length,i+2))),(e(zC(o,r-s))!=pr.Word||e(FC(o,r-s))!=pr.Word)&&(e(FC(o,i-s))!=pr.Word||e(zC(o,i-s))!=pr.Word))}class Nft extends Ape{constructor(e){super(e)}nextMatch(e,r,i){let o=_0(this.spec,e,i,e.doc.length).nextOverlapping();if(o.done){let s=Math.min(e.doc.length,r+this.spec.unquoted.length);o=_0(this.spec,e,0,s).nextOverlapping()}return o.done||o.value.from==r&&o.value.to==i?null:o.value}prevMatchInRange(e,r,i){for(let o=i;;){let s=Math.max(r,o-1e4-this.spec.unquoted.length),a=_0(this.spec,e,s,o),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(s==r)return null;o-=1e4}}prevMatch(e,r,i){let o=this.prevMatchInRange(e,0,r);return o||(o=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),o&&(o.from!=r||o.to!=i)?o:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let i=_0(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=r)return null;o.push(i.value)}return o}highlight(e,r,i,o){let s=_0(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)o(s.value.from,s.value.to)}}function jft(n,e,r){return(i,o,s)=>(!r||r(i,o,s))&&n(s[0],e,i,o)}function A0(n,e,r,i){let o;return n.wholeWord&&(o=Oft(e.charCategorizer(e.selection.main.head))),n.test&&(o=jft(n.test,e,o)),new Spe(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:o},r,i)}function zC(n,e){return n.slice(ti(n,e,!1),e)}function FC(n,e){return n.slice(e,ti(n,e))}function Oft(n){return(e,r,i)=>!i[0].length||(n(zC(i.input,i.index))!=pr.Word||n(FC(i.input,i.index))!=pr.Word)&&(n(FC(i.input,i.index+i[0].length))!=pr.Word||n(zC(i.input,i.index+i[0].length))!=pr.Word)}class Dft extends Ape{nextMatch(e,r,i){let o=A0(this.spec,e,i,e.doc.length).next();return o.done&&(o=A0(this.spec,e,0,r).next()),o.done?null:o.value}prevMatchInRange(e,r,i){for(let o=1;;o++){let s=Math.max(r,i-o*1e4),a=A0(this.spec,e,s,i),l=null;for(;!a.next().done;)l=a.value;if(l&&(s==r||l.from>s+10))return l;if(s==r)return null}}prevMatch(e,r,i){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(r,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let o=i.length;o>0;o--){let s=+i.slice(0,o);if(s>0&&s<e.match.length)return e.match[s]+i.slice(o)}return r})}matchAll(e,r){let i=A0(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=r)return null;o.push(i.value)}return o}highlight(e,r,i,o){let s=A0(this.spec,e,Math.max(0,r-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)o(s.value.from,s.value.to)}}const vb=Ht.define(),DL=Ht.define(),Hh=ki.define({create(n){return new GP(GN(n).create(),null)},update(n,e){for(let r of e.effects)r.is(vb)?n=new GP(r.value.create(),n.panel):r.is(DL)&&(n=new GP(n.query,r.value?IL:null));return n},provide:n=>lb.from(n,e=>e.panel)});class GP{constructor(e,r){this.query=e,this.panel=r}}const Ift=Et.mark({class:"cm-searchMatch"}),Rft=Et.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Lft=Wr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Hh))}update(n){let e=n.state.field(Hh);(e!=n.startState.field(Hh)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Et.none;let{view:r}=this,i=new id;for(let o=0,s=r.visibleRanges,a=s.length;o<a;o++){let{from:l,to:c}=s[o];for(;o<a-1&&c>s[o+1].from-500;)c=s[++o].to;n.highlight(r.state,l,c,(u,d)=>{let h=r.state.selection.ranges.some(f=>f.from==u&&f.to==d);i.add(u,d,h?Rft:Ift)})}return i.finish()}},{decorations:n=>n.decorations});function Ew(n){return e=>{let r=e.state.field(Hh,!1);return r&&r.query.spec.valid?n(e,r):Mpe(e)}}const $C=Ew((n,{query:e})=>{let{to:r}=n.state.selection.main,i=e.nextMatch(n.state,r,r);if(!i)return!1;let o=De.single(i.from,i.to),s=n.state.facet(h1);return n.dispatch({selection:o,effects:[RL(n,i),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),Ppe(n),!0}),BC=Ew((n,{query:e})=>{let{state:r}=n,{from:i}=r.selection.main,o=e.prevMatch(r,i,i);if(!o)return!1;let s=De.single(o.from,o.to),a=n.state.facet(h1);return n.dispatch({selection:s,effects:[RL(n,o),a.scrollToMatch(s.main,n)],userEvent:"select.search"}),Ppe(n),!0}),zft=Ew((n,{query:e})=>{let r=e.matchAll(n.state,1e3);return!r||!r.length?!1:(n.dispatch({selection:De.create(r.map(i=>De.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Fft=({state:n,dispatch:e})=>{let r=n.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:i,to:o}=r.main,s=[],a=0;for(let l=new Dg(n.doc,n.sliceDoc(i,o));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(a=s.length),s.push(De.range(l.value.from,l.value.to))}return e(n.update({selection:De.create(s,a),userEvent:"select.search.matches"})),!0},WX=Ew((n,{query:e})=>{let{state:r}=n,{from:i,to:o}=r.selection.main;if(r.readOnly)return!1;let s=e.nextMatch(r,i,i);if(!s)return!1;let a=s,l=[],c,u,d=[];a.from==i&&a.to==o&&(u=r.toText(e.getReplacement(a)),l.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(r,a.from,a.to),d.push(rt.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(i).number)+".")));let h=n.state.changes(l);return a&&(c=De.single(a.from,a.to).map(h),d.push(RL(n,a)),d.push(r.facet(h1).scrollToMatch(c.main,n))),n.dispatch({changes:h,selection:c,effects:d,userEvent:"input.replace"}),!0}),$ft=Ew((n,{query:e})=>{if(n.state.readOnly)return!1;let r=e.matchAll(n.state,1e9).map(o=>{let{from:s,to:a}=o;return{from:s,to:a,insert:e.getReplacement(o)}});if(!r.length)return!1;let i=n.state.phrase("replaced $ matches",r.length)+".";return n.dispatch({changes:r,effects:rt.announce.of(i),userEvent:"input.replace.all"}),!0});function IL(n){return n.state.facet(h1).createPanel(n)}function GN(n,e){var r,i,o,s,a;let l=n.selection.main,c=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!c)return e;let u=n.facet(h1);return new _pe({search:((r=e?.literal)!==null&&r!==void 0?r:u.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(o=e?.literal)!==null&&o!==void 0?o:u.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}function Tpe(n){let e=DI(n,IL);return e&&e.dom.querySelector("[main-field]")}function Ppe(n){let e=Tpe(n);e&&e==n.root.activeElement&&e.select()}const Mpe=n=>{let e=n.state.field(Hh,!1);if(e&&e.panel){let r=Tpe(n);if(r&&r!=n.root.activeElement){let i=GN(n.state,e.query.spec);i.valid&&n.dispatch({effects:vb.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[DL.of(!0),e?vb.of(GN(n.state,e.query.spec)):Ht.appendConfig.of(Vft)]});return!0},Epe=n=>{let e=n.state.field(Hh,!1);if(!e||!e.panel)return!1;let r=DI(n,IL);return r&&r.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:DL.of(!1)}),!0},Bft=[{key:"Mod-f",run:Mpe,scope:"editor search-panel"},{key:"F3",run:$C,shift:BC,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:$C,shift:BC,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Epe,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Fft},{key:"Mod-Alt-g",run:yft},{key:"Mod-d",run:Pft,preventDefault:!0}];class Hft{constructor(e){this.view=e;let r=this.query=e.state.field(Hh).query.spec;this.commit=this.commit.bind(this),this.searchField=Nn("input",{value:r.search,placeholder:Cs(e,"Find"),"aria-label":Cs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Nn("input",{value:r.replace,placeholder:Cs(e,"Replace"),"aria-label":Cs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Nn("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=Nn("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=Nn("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function i(o,s,a){return Nn("button",{class:"cm-button",name:o,onclick:s,type:"button"},a)}this.dom=Nn("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,i("next",()=>$C(e),[Cs(e,"next")]),i("prev",()=>BC(e),[Cs(e,"previous")]),i("select",()=>zft(e),[Cs(e,"all")]),Nn("label",null,[this.caseField,Cs(e,"match case")]),Nn("label",null,[this.reField,Cs(e,"regexp")]),Nn("label",null,[this.wordField,Cs(e,"by word")]),...e.state.readOnly?[]:[Nn("br"),this.replaceField,i("replace",()=>WX(e),[Cs(e,"replace")]),i("replaceAll",()=>$ft(e),[Cs(e,"replace all")])],Nn("button",{name:"close",onclick:()=>Epe(e),"aria-label":Cs(e,"close"),type:"button"},[""])])}commit(){let e=new _pe({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:vb.of(e)}))}keydown(e){Ptt(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?BC:$C)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),WX(this.view))}update(e){for(let r of e.transactions)for(let i of r.effects)i.is(vb)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(h1).top}}function Cs(n,e){return n.state.phrase(e)}const Kk=30,Gk=/[\s\.,:;?!]/;function RL(n,{from:e,to:r}){let i=n.state.doc.lineAt(e),o=n.state.doc.lineAt(r).to,s=Math.max(i.from,e-Kk),a=Math.min(o,r+Kk),l=n.state.sliceDoc(s,a);if(s!=i.from){for(let c=0;c<Kk;c++)if(!Gk.test(l[c+1])&&Gk.test(l[c])){l=l.slice(c);break}}if(a!=o){for(let c=l.length-1;c>l.length-Kk;c--)if(!Gk.test(l[c-1])&&Gk.test(l[c])){l=l.slice(0,c);break}}return rt.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const qft=rt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Vft=[Hh,hf.low(Lft),qft];class Npe{constructor(e,r,i,o){this.state=e,this.pos=r,this.explicit=i,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let r=Fi(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),i=Math.max(r.from,this.pos-250),o=r.text.slice(i-r.from,this.pos-r.from),s=o.search(jpe(e,!1));return s<0?null:{from:i+s,to:this.pos,text:o.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,r,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(r),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function UX(n){let e=Object.keys(n).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Wft(n){let e=Object.create(null),r=Object.create(null);for(let{label:o}of n){e[o[0]]=!0;for(let s=1;s<o.length;s++)r[o[s]]=!0}let i=UX(e)+UX(r)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Uft(n){let e=n.map(o=>typeof o=="string"?{label:o}:o),[r,i]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:Wft(e);return o=>{let s=o.matchBefore(i);return s||o.explicit?{from:s?s.from:o.pos,options:e,validFor:r}:null}}function ewt(n,e){return r=>{for(let i=Fi(r.state).resolveInner(r.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(r)}}class KX{constructor(e,r,i,o){this.completion=e,this.source=r,this.match=i,this.score=o}}function Hp(n){return n.selection.main.from}function jpe(n,e){var r;let{source:i}=n,o=e&&i[0]!="^",s=i[i.length-1]!="$";return!o&&!s?n:new RegExp(`${o?"^":""}(?:${i})${s?"$":""}`,(r=n.flags)!==null&&r!==void 0?r:n.ignoreCase?"i":"")}const LL=_d.define();function Kft(n,e,r,i){let{main:o}=n.selection,s=r-o.from,a=i-o.from;return{...n.changeByRange(l=>{if(l!=o&&r!=i&&n.sliceDoc(l.from+s,l.from+a)!=n.sliceDoc(r,i))return{range:l};let c=n.toText(e);return{changes:{from:l.from+s,to:i==o.from?l.to:l.from+a,insert:c},range:De.cursor(l.from+s+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const GX=new WeakMap;function Gft(n){if(!Array.isArray(n))return n;let e=GX.get(n);return e||GX.set(n,e=Uft(n)),e}const HC=Ht.define(),xb=Ht.define();class Yft{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let i=ts(e,r),o=uc(i);this.chars.push(i);let s=e.slice(r,r+o),a=s.toUpperCase();this.folded.push(ts(a==s?s.toLowerCase():a,0)),r+=o}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:r,folded:i,any:o,precise:s,byWord:a}=this;if(r.length==1){let S=ts(e,0),_=uc(S),P=_==e.length?0:-100;if(S!=r[0])if(S==i[0])P+=-200;else return null;return this.ret(P,[0,_])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=r.length,u=0;if(l<0){for(let S=0,_=Math.min(e.length,200);S<_&&u<c;){let P=ts(e,S);(P==r[u]||P==i[u])&&(o[u++]=S),S+=uc(P)}if(u<c)return null}let d=0,h=0,f=!1,m=0,v=-1,x=-1,b=/[a-z]/.test(e),w=!0;for(let S=0,_=Math.min(e.length,200),P=0;S<_&&h<c;){let A=ts(e,S);l<0&&(d<c&&A==r[d]&&(s[d++]=S),m<c&&(A==r[m]||A==i[m]?(m==0&&(v=S),x=S+1,m++):m=0));let T,E=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(T=gI(A))!=T.toLowerCase()?1:T!=T.toUpperCase()?2:0;(!S||E==1&&b||P==0&&E!=0)&&(r[h]==A||i[h]==A&&(f=!0)?a[h++]=S:a.length&&(w=!1)),P=E,S+=uc(A)}return h==c&&a[0]==0&&w?this.result(-100+(f?-200:0),a,e):m==c&&v==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):m==c?this.ret(-900-e.length,[v,x]):h==c?this.result(-100+(f?-200:0)+-700+(w?0:-1100),a,e):r.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,r,i){let o=[],s=0;for(let a of r){let l=a+(this.astral?uc(ts(i,a)):1);s&&o[s-1]==a?o[s-1]=l:(o[s++]=a,o[s++]=l)}return this.ret(e-i.length,o)}}class Zft{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let r=e.slice(0,this.pattern.length),i=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,r.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const yi=it.define({combine(n){return Bc(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Xft,filterStrict:!1,compareCompletions:(e,r)=>(e.sortText||e.label).localeCompare(r.sortText||r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>i=>YX(e(i),r(i)),optionClass:(e,r)=>i=>YX(e(i),r(i)),addToOptions:(e,r)=>e.concat(r),filterStrict:(e,r)=>e||r})}});function YX(n,e){return n?e?n+" "+e:n:e}function Xft(n,e,r,i,o,s){let a=n.textDirection==$n.RTL,l=a,c=!1,u="top",d,h,f=e.left-o.left,m=o.right-e.right,v=i.right-i.left,x=i.bottom-i.top;if(l&&f<Math.min(v,m)?l=!1:!l&&m<Math.min(v,f)&&(l=!0),v<=(l?f:m))d=Math.max(o.top,Math.min(r.top,o.bottom-x))-e.top,h=Math.min(400,l?f:m);else{c=!0,h=Math.min(400,(a?e.right:o.right-e.left)-30);let S=o.bottom-e.bottom;S>=x||S>e.top?d=r.bottom-e.top:(u="bottom",d=e.bottom-r.top)}let b=(e.bottom-e.top)/s.offsetHeight,w=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${d/b}px; max-width: ${h/w}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function Jft(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(r){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),r.type&&i.classList.add(...r.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(r,i,o,s){let a=document.createElement("span");a.className="cm-completionLabel";let l=r.displayLabel||r.label,c=0;for(let u=0;u<s.length;){let d=s[u++],h=s[u++];d>c&&a.appendChild(document.createTextNode(l.slice(c,d)));let f=a.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(d,h))),f.className="cm-completionMatchedText",c=h}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(r){if(!r.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=r.detail,i},position:80}),e.sort((r,i)=>r.position-i.position).map(r=>r.render)}function YP(n,e,r){if(n<=r)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let o=Math.floor(e/r);return{from:o*r,to:(o+1)*r}}let i=Math.floor((n-e)/r);return{from:n-(i+1)*r,to:n-i*r}}class Qft{constructor(e,r,i){this.view=e,this.stateField=r,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let o=e.state.field(r),{options:s,selected:a}=o.open,l=e.state.facet(yi);this.optionContent=Jft(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=YP(s.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:u}=e.state.field(r).open;for(let d=c.target,h;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(h=/-(\d+)$/.exec(d.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(yi).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:xb.of(null)})}),this.showOptions(s,o.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let i=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=o){let{options:s,selected:a,disabled:l}=i.open;(!o.open||o.open.options!=s)&&(this.range=YP(s.length,a,e.state.facet(yi).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of r.split(" "))i&&this.dom.classList.add(i);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;(r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=YP(r.options.length,r.selected,this.view.state.facet(yi).maxRenderedOptions),this.showOptions(r.options,e.id));let i=this.updateSelectedOption(r.selected);if(i){this.destroyInfo();let{completion:o}=r.options[r.selected],{info:s}=o;if(!s)return;let a=typeof s=="string"?document.createTextNode(s):s(o);if(!a)return;"then"in a?a.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,o)}).catch(l=>as(this.view.state,l,"completion info")):(this.addInfoPane(a,o),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,r){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:s}=e;i.appendChild(o),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)i.nodeName!="LI"||!i.id?o--:o==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),r=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return r&&tpt(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return o.top>Math.min(s.bottom,r.bottom)-10||o.bottom<Math.max(s.top,r.top)+10?null:this.view.state.facet(yi).positionInfo(this.view,r,o,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,i){const o=document.createElement("ul");o.id=r,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions")),o.addEventListener("mousedown",a=>{a.target==o&&a.preventDefault()});let s=null;for(let a=i.from;a<i.to;a++){let{completion:l,match:c}=e[a],{section:u}=l;if(u){let f=typeof u=="string"?u:u.name;if(f!=s&&(a>i.from||i.from==0))if(s=f,typeof u!="string"&&u.header)o.appendChild(u.header(u));else{let m=o.appendChild(document.createElement("completion-section"));m.textContent=f}}const d=o.appendChild(document.createElement("li"));d.id=r+"-"+a,d.setAttribute("role","option");let h=this.optionClass(l);h&&(d.className=h);for(let f of this.optionContent){let m=f(l,this.view.state,this.view,c);m&&d.appendChild(m)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ept(n,e){return r=>new Qft(r,n,e)}function tpt(n,e){let r=n.getBoundingClientRect(),i=e.getBoundingClientRect(),o=r.height/n.offsetHeight;i.top<r.top?n.scrollTop-=(r.top-i.top)/o:i.bottom>r.bottom&&(n.scrollTop+=(i.bottom-r.bottom)/o)}function ZX(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function npt(n,e){let r=[],i=null,o=null,s=d=>{r.push(d);let{section:h}=d.completion;if(h){i||(i=[]);let f=typeof h=="string"?h:h.name;i.some(m=>m.name==f)||i.push(typeof h=="string"?{name:f}:h)}},a=e.facet(yi);for(let d of n)if(d.hasResult()){let h=d.result.getMatch;if(d.result.filter===!1)for(let f of d.result.options)s(new KX(f,d.source,h?h(f):[],1e9-r.length));else{let f=e.sliceDoc(d.from,d.to),m,v=a.filterStrict?new Zft(f):new Yft(f);for(let x of d.result.options)if(m=v.match(x.label)){let b=x.displayLabel?h?h(x,m.matched):[]:m.matched,w=m.score+(x.boost||0);if(s(new KX(x,d.source,b,w)),typeof x.section=="object"&&x.section.rank==="dynamic"){let{name:S}=x.section;o||(o=Object.create(null)),o[S]=Math.max(w,o[S]||-1e9)}}}}if(i){let d=Object.create(null),h=0,f=(m,v)=>(m.rank==="dynamic"&&v.rank==="dynamic"?o[v.name]-o[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof v.rank=="number"?v.rank:1e9)||(m.name<v.name?-1:1);for(let m of i.sort(f))h-=1e5,d[m.name]=h;for(let m of r){let{section:v}=m.completion;v&&(m.score+=d[typeof v=="string"?v:v.name])}}let l=[],c=null,u=a.compareCompletions;for(let d of r.sort((h,f)=>f.score-h.score||u(h.completion,f.completion))){let h=d.completion;!c||c.label!=h.label||c.detail!=h.detail||c.type!=null&&h.type!=null&&c.type!=h.type||c.apply!=h.apply||c.boost!=h.boost?l.push(d):ZX(d.completion)>ZX(c)&&(l[l.length-1]=d),c=d.completion}return l}class R0{constructor(e,r,i,o,s,a){this.options=e,this.attrs=r,this.tooltip=i,this.timestamp=o,this.selected=s,this.disabled=a}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new R0(this.options,XX(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,i,o,s,a){if(o&&!a&&e.some(u=>u.isPending))return o.setDisabled();let l=npt(e,r);if(!l.length)return o&&e.some(u=>u.isPending)?o.setDisabled():null;let c=r.facet(yi).selectOnOpen?0:-1;if(o&&o.selected!=c&&o.selected!=-1){let u=o.options[o.selected].completion;for(let d=0;d<l.length;d++)if(l[d].completion==u){c=d;break}}return new R0(l,XX(i,c),{pos:e.reduce((u,d)=>d.hasResult()?Math.min(u,d.from):u,1e8),create:lpt,above:s.aboveCursor},o?o.timestamp:Date.now(),c,!1)}map(e){return new R0(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new R0(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class qC{constructor(e,r,i){this.active=e,this.id=r,this.open=i}static start(){return new qC(spt,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,i=r.facet(yi),s=(i.override||r.languageDataAt("autocomplete",Hp(r)).map(Gft)).map(c=>(this.active.find(d=>d.source==c)||new Sa(c,this.active.some(d=>d.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((c,u)=>c==this.active[u])&&(s=this.active);let a=this.open,l=e.effects.some(c=>c.is(zL));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!rpt(s,this.active)||l?a=R0.build(s,r,this.id,a,i,l):a&&a.disabled&&!s.some(c=>c.isPending)&&(a=null),!a&&s.every(c=>!c.isPending)&&s.some(c=>c.hasResult())&&(s=s.map(c=>c.hasResult()?new Sa(c.source,0):c));for(let c of e.effects)c.is(Dpe)&&(a=a&&a.setSelected(c.value,this.id));return s==this.active&&a==this.open?this:new qC(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ipt:opt}}function rpt(n,e){if(n==e)return!0;for(let r=0,i=0;;){for(;r<n.length&&!n[r].hasResult();)r++;for(;i<e.length&&!e[i].hasResult();)i++;let o=r==n.length,s=i==e.length;if(o||s)return o==s;if(n[r++].result!=e[i++].result)return!1}}const ipt={"aria-autocomplete":"list"},opt={};function XX(n,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(r["aria-activedescendant"]=n+"-"+e),r}const spt=[];function Ope(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(LL);if(i&&e.activateOnCompletion(i))return 12}let r=n.isUserEvent("input.type");return r&&e.activateOnTyping?5:r?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Sa{constructor(e,r,i=!1){this.source=e,this.state=r,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,r){let i=Ope(e,r),o=this;(i&8||i&16&&this.touches(e))&&(o=new Sa(o.source,0)),i&4&&o.state==0&&(o=new Sa(this.source,1)),o=o.updateFor(e,i);for(let s of e.effects)if(s.is(HC))o=new Sa(o.source,1,s.value);else if(s.is(xb))o=new Sa(o.source,0);else if(s.is(zL))for(let a of s.value)a.source==o.source&&(o=a);return o}updateFor(e,r){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Hp(e.state))}}class ig extends Sa{constructor(e,r,i,o,s,a){super(e,3,r),this.limit=i,this.result=o,this.from=s,this.to=a}hasResult(){return!0}updateFor(e,r){var i;if(!(r&3))return this.map(e.changes);let o=this.result;o.map&&!e.changes.empty&&(o=o.map(o,e.changes));let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Hp(e.state);if(l>a||!o||r&2&&(Hp(e.startState)==this.from||l<this.limit))return new Sa(this.source,r&4?1:0);let c=e.changes.mapPos(this.limit);return apt(o.validFor,e.state,s,a)?new ig(this.source,this.explicit,c,o,s,a):o.update&&(o=o.update(o,s,a,new Npe(e.state,l,!1)))?new ig(this.source,this.explicit,c,o,o.from,(i=o.to)!==null&&i!==void 0?i:Hp(e.state)):new Sa(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ig(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Sa(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function apt(n,e,r,i){if(!n)return!1;let o=e.sliceDoc(r,i);return typeof n=="function"?n(o,r,i,e):jpe(n,!0).test(o)}const zL=Ht.define({map(n,e){return n.map(r=>r.map(e))}}),Dpe=Ht.define(),ns=ki.define({create(){return qC.start()},update(n,e){return n.update(e)},provide:n=>[OI.from(n,e=>e.tooltip),rt.contentAttributes.from(n,e=>e.attrs)]});function FL(n,e){const r=e.completion.apply||e.completion.label;let i=n.state.field(ns).active.find(o=>o.source==e.source);return i instanceof ig?(typeof r=="string"?n.dispatch({...Kft(n.state,r,i.from,i.to),annotations:LL.of(e.completion)}):r(n,e.completion,i.from,i.to),!0):!1}const lpt=ept(ns,FL);function Yk(n,e="option"){return r=>{let i=r.state.field(ns,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<r.state.facet(yi).interactionDelay)return!1;let o=1,s;e=="page"&&(s=$ue(r,i.open.tooltip))&&(o=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,l=i.open.selected>-1?i.open.selected+o*(n?1:-1):n?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),r.dispatch({effects:Dpe.of(l)}),!0}}const cpt=n=>{let e=n.state.field(ns,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(yi).interactionDelay?!1:FL(n,e.open.options[e.open.selected])},ZP=n=>n.state.field(ns,!1)?(n.dispatch({effects:HC.of(!0)}),!0):!1,upt=n=>{let e=n.state.field(ns,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(n.dispatch({effects:xb.of(null)}),!0)};class dpt{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const hpt=50,fpt=1e3,ppt=Wr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(ns).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(ns),r=n.state.facet(yi);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ns)==e)return;let i=n.transactions.some(s=>{let a=Ope(s,r);return a&8||(s.selection||s.docChanged)&&!(a&3)});for(let s=0;s<this.running.length;s++){let a=this.running[s];if(i||a.context.abortOnDocChange&&n.docChanged||a.updates.length+n.transactions.length>hpt&&Date.now()-a.time>fpt){for(let l of a.context.abortListeners)try{l()}catch(c){as(this.view.state,c)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(a=>a.is(HC)))&&(this.pendingStart=!0);let o=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),o):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(ns);for(let r of e.active)r.isPending&&!this.running.some(i=>i.active.source==r.source)&&this.startQuery(r);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(yi).updateSyncTime))}startQuery(n){let{state:e}=this.view,r=Hp(e),i=new Npe(e,r,n.explicit,this.view),o=new dpt(n,i);this.running.push(o),Promise.resolve(n.source(i)).then(s=>{o.context.aborted||(o.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:xb.of(null)}),as(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(yi).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(yi),i=this.view.state.field(ns);for(let o=0;o<this.running.length;o++){let s=this.running[o];if(s.done===void 0)continue;if(this.running.splice(o--,1),s.done){let l=Hp(s.updates.length?s.updates[0].startState:this.view.state),c=Math.min(l,s.done.from+(s.active.explicit?0:1)),u=new ig(s.active.source,s.active.explicit,c,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:l);for(let d of s.updates)u=u.update(d,r);if(u.hasResult()){e.push(u);continue}}let a=i.active.find(l=>l.source==s.active.source);if(a&&a.isPending)if(s.done==null){let l=new Sa(s.active.source,0);for(let c of s.updates)l=l.update(c,r);l.isPending||e.push(l)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:zL.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(ns,!1);if(e&&e.tooltip&&this.view.state.facet(yi).closeOnBlur){let r=e.open&&$ue(this.view,e.open.tooltip);(!r||!r.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:xb.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:HC.of(!1)}),20),this.composing=0}}}),mpt=typeof navigator=="object"&&/Win/.test(navigator.platform),gpt=hf.highest(rt.domEventHandlers({keydown(n,e){let r=e.state.field(ns,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||n.key.length>1||n.ctrlKey&&!(mpt&&n.altKey)||n.metaKey)return!1;let i=r.open.options[r.open.selected],o=r.active.find(a=>a.source==i.source),s=i.completion.commitCharacters||o.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&FL(e,i),!1}})),Ipe=rt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ypt{constructor(e,r,i,o){this.field=e,this.line=r,this.from=i,this.to=o}}class $L{constructor(e,r,i){this.field=e,this.from=r,this.to=i}map(e){let r=e.mapPos(this.from,-1,Oi.TrackDel),i=e.mapPos(this.to,1,Oi.TrackDel);return r==null||i==null?null:new $L(this.field,r,i)}}class BL{constructor(e,r){this.lines=e,this.fieldPositions=r}instantiate(e,r){let i=[],o=[r],s=e.doc.lineAt(r),a=/^\s*/.exec(s.text)[0];for(let c of this.lines){if(i.length){let u=a,d=/^\t*/.exec(c)[0].length;for(let h=0;h<d;h++)u+=e.facet(j6);o.push(r+u.length-d),c=u+c.slice(d)}i.push(c),r+=c.length+1}let l=this.fieldPositions.map(c=>new $L(c.field,o[c.line]+c.from,o[c.line]+c.to));return{text:i,ranges:l}}static parse(e){let r=[],i=[],o=[],s;for(let a of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(a);){let l=s[1]?+s[1]:null,c=s[2]||s[3]||"",u=-1,d=c.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<r.length;h++)(l!=null?r[h].seq==l:d&&r[h].name==d)&&(u=h);if(u<0){let h=0;for(;h<r.length&&(l==null||r[h].seq!=null&&r[h].seq<l);)h++;r.splice(h,0,{seq:l,name:d}),u=h;for(let f of o)f.field>=u&&f.field++}for(let h of o)if(h.line==i.length&&h.from>s.index){let f=s[2]?3+(s[1]||"").length:2;h.from-=f,h.to-=f}o.push(new ypt(u,i.length,s.index,s.index+d.length)),a=a.slice(0,s.index)+c+a.slice(s.index+s[0].length)}a=a.replace(/\\([{}])/g,(l,c,u)=>{for(let d of o)d.line==i.length&&d.from>u&&(d.from--,d.to--);return c}),i.push(a)}return new BL(i,o)}}let vpt=Et.widget({widget:new class extends Hc{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),xpt=Et.mark({class:"cm-snippetField"});class f1{constructor(e,r){this.ranges=e,this.active=r,this.deco=Et.set(e.map(i=>(i.from==i.to?vpt:xpt).range(i.from,i.to)),!0)}map(e){let r=[];for(let i of this.ranges){let o=i.map(e);if(!o)return null;r.push(o)}return new f1(r,this.active)}selectionInsideField(e){return e.ranges.every(r=>this.ranges.some(i=>i.field==this.active&&i.from<=r.from&&i.to>=r.to))}}const Nw=Ht.define({map(n,e){return n&&n.map(e)}}),bpt=Ht.define(),bb=ki.define({create(){return null},update(n,e){for(let r of e.effects){if(r.is(Nw))return r.value;if(r.is(bpt)&&n)return new f1(n.ranges,r.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>rt.decorations.from(n,e=>e?e.deco:Et.none)});function HL(n,e){return De.create(n.filter(r=>r.field==e).map(r=>De.range(r.from,r.to)))}function wpt(n){let e=BL.parse(n);return(r,i,o,s)=>{let{text:a,ranges:l}=e.instantiate(r.state,o),{main:c}=r.state.selection,u={changes:{from:o,to:s==c.from?c.to:s,insert:wn.of(a)},scrollIntoView:!0,annotations:i?[LL.of(i),Br.userEvent.of("input.complete")]:void 0};if(l.length&&(u.selection=HL(l,0)),l.some(d=>d.field>0)){let d=new f1(l,0),h=u.effects=[Nw.of(d)];r.state.field(bb,!1)===void 0&&h.push(Ht.appendConfig.of([bb,Apt,Tpt,Ipe]))}r.dispatch(r.state.update(u))}}function Rpe(n){return({state:e,dispatch:r})=>{let i=e.field(bb,!1);if(!i||n<0&&i.active==0)return!1;let o=i.active+n,s=n>0&&!i.ranges.some(a=>a.field==o+n);return r(e.update({selection:HL(i.ranges,o),effects:Nw.of(s?null:new f1(i.ranges,o)),scrollIntoView:!0})),!0}}const kpt=({state:n,dispatch:e})=>n.field(bb,!1)?(e(n.update({effects:Nw.of(null)})),!0):!1,Spt=Rpe(1),Cpt=Rpe(-1),_pt=[{key:"Tab",run:Spt,shift:Cpt},{key:"Escape",run:kpt}],JX=it.define({combine(n){return n.length?n[0]:_pt}}),Apt=hf.highest(t1.compute([JX],n=>n.facet(JX)));function twt(n,e){return{...e,apply:wpt(n)}}const Tpt=rt.domEventHandlers({mousedown(n,e){let r=e.state.field(bb,!1),i;if(!r||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let o=r.ranges.find(s=>s.from<=i&&s.to>=i);return!o||o.field==r.active?!1:(e.dispatch({selection:HL(r.ranges,o.field),effects:Nw.of(r.ranges.some(s=>s.field>o.field)?new f1(r.ranges,o.field):null),scrollIntoView:!0}),!0)}}),wb={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Sp=Ht.define({map(n,e){let r=e.mapPos(n,-1,Oi.TrackAfter);return r??void 0}}),qL=new class extends Yh{};qL.startSide=1;qL.endSide=-1;const Lpe=ki.define({create(){return on.empty},update(n,e){if(n=n.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=r.from&&i<=r.to})}for(let r of e.effects)r.is(Sp)&&(n=n.update({add:[qL.range(r.value,r.value+1)]}));return n}});function Ppt(){return[Ept,Lpe]}const XP="()[]{}<>";function zpe(n){for(let e=0;e<XP.length;e+=2)if(XP.charCodeAt(e)==n)return XP.charAt(e+1);return gI(n<128?n:n+1)}function Fpe(n,e){return n.languageDataAt("closeBrackets",e)[0]||wb}const Mpt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Ept=rt.inputHandler.of((n,e,r,i)=>{if((Mpt?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let o=n.state.selection.main;if(i.length>2||i.length==2&&uc(ts(i,0))==1||e!=o.from||r!=o.to)return!1;let s=Opt(n.state,i);return s?(n.dispatch(s),!0):!1}),Npt=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Fpe(n,n.selection.main.head).brackets||wb.brackets,o=null,s=n.changeByRange(a=>{if(a.empty){let l=Dpt(n.doc,a.head);for(let c of i)if(c==l&&f7(n.doc,a.head)==zpe(ts(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:De.cursor(a.head-c.length)}}return{range:o=a}});return o||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},jpt=[{key:"Backspace",run:Npt}];function Opt(n,e){let r=Fpe(n,n.selection.main.head),i=r.brackets||wb.brackets;for(let o of i){let s=zpe(ts(o,0));if(e==o)return s==o?Lpt(n,o,i.indexOf(o+o+o)>-1,r):Ipt(n,o,s,r.before||wb.before);if(e==s&&$pe(n,n.selection.main.from))return Rpt(n,o,s)}return null}function $pe(n,e){let r=!1;return n.field(Lpe).between(0,n.doc.length,i=>{i==e&&(r=!0)}),r}function f7(n,e){let r=n.sliceString(e,e+2);return r.slice(0,uc(ts(r,0)))}function Dpt(n,e){let r=n.sliceString(e-2,e);return uc(ts(r,0))==r.length?r:r.slice(1)}function Ipt(n,e,r,i){let o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:r,from:a.to}],effects:Sp.of(a.to+e.length),range:De.range(a.anchor+e.length,a.head+e.length)};let l=f7(n.doc,a.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+r,from:a.head},effects:Sp.of(a.head+e.length),range:De.cursor(a.head+e.length)}:{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Rpt(n,e,r){let i=null,o=n.changeByRange(s=>s.empty&&f7(n.doc,s.head)==r?{changes:{from:s.head,to:s.head+r.length,insert:r},range:De.cursor(s.head+r.length)}:i={range:s});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Lpt(n,e,r,i){let o=i.stringPrefixes||wb.stringPrefixes,s=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Sp.of(l.to+e.length),range:De.range(l.anchor+e.length,l.head+e.length)};let c=l.head,u=f7(n.doc,c),d;if(u==e){if(QX(n,c))return{changes:{insert:e+e,from:c},effects:Sp.of(c+e.length),range:De.cursor(c+e.length)};if($pe(n,c)){let f=r&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+f.length,insert:f},range:De.cursor(c+f.length)}}}else{if(r&&n.sliceDoc(c-2*e.length,c)==e+e&&(d=eJ(n,c-2*e.length,o))>-1&&QX(n,d))return{changes:{insert:e+e+e+e,from:c},effects:Sp.of(c+e.length),range:De.cursor(c+e.length)};if(n.charCategorizer(c)(u)!=pr.Word&&eJ(n,c,o)>-1&&!zpt(n,c,e,o))return{changes:{insert:e+e,from:c},effects:Sp.of(c+e.length),range:De.cursor(c+e.length)}}return{range:s=l}});return s?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function QX(n,e){let r=Fi(n).resolveInner(e+1);return r.parent&&r.from==e}function zpt(n,e,r,i){let o=Fi(n).resolveInner(e,-1),s=i.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=n.sliceDoc(o.from,Math.min(o.to,o.from+r.length+s)),c=l.indexOf(r);if(!c||c>-1&&i.indexOf(l.slice(0,c))>-1){let d=o.firstChild;for(;d&&d.from==o.from&&d.to-d.from>r.length+c;){if(n.sliceDoc(d.to-r.length,d.to)==r)return!1;d=d.firstChild}return!0}let u=o.to==e&&o.parent;if(!u)break;o=u}return!1}function eJ(n,e,r){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=pr.Word)return e;for(let o of r){let s=e-o.length;if(n.sliceDoc(s,e)==o&&i(n.sliceDoc(s-1,s))!=pr.Word)return s}return-1}function Fpt(n={}){return[gpt,ns,yi.of(n),ppt,$pt,Ipe]}const Bpe=[{key:"Ctrl-Space",run:ZP},{mac:"Alt-`",run:ZP},{mac:"Alt-i",run:ZP},{key:"Escape",run:upt},{key:"ArrowDown",run:Yk(!0)},{key:"ArrowUp",run:Yk(!1)},{key:"PageDown",run:Yk(!0,"page")},{key:"PageUp",run:Yk(!1,"page")},{key:"Enter",run:cpt}],$pt=hf.highest(t1.computeN([yi],n=>n.facet(yi).defaultKeymap?[Bpe]:[]));class tJ{constructor(e,r,i){this.from=e,this.to=r,this.diagnostic=i}}class dp{constructor(e,r,i){this.diagnostics=e,this.panel=r,this.selected=i}static init(e,r,i){let o=i.facet(kb).markerFilter;o&&(e=o(e,i));let s=e.slice().sort((m,v)=>m.from-v.from||m.to-v.to),a=new id,l=[],c=0,u=i.doc.iter(),d=0,h=i.doc.length;for(let m=0;;){let v=m==s.length?null:s[m];if(!v&&!l.length)break;let x,b;if(l.length)x=c,b=l.reduce((_,P)=>Math.min(_,P.to),v&&v.from>x?v.from:1e8);else{if(x=v.from,x>h)break;b=v.to,l.push(v),m++}for(;m<s.length;){let _=s[m];if(_.from==x&&(_.to>_.from||_.to==x))l.push(_),m++,b=Math.min(_.to,b);else{b=Math.min(_.from,b);break}}b=Math.min(b,h);let w=!1;if(l.some(_=>_.from==x&&(_.to==b||b==h))&&(w=x==b,!w&&b-x<10)){let _=x-(d+u.value.length);_>0&&(u.next(_),d=x);for(let P=x;;){if(P>=b){w=!0;break}if(!u.lineBreak&&d+u.value.length>P)break;P=d+u.value.length,d+=u.value.length,u.next()}}let S=Qpt(l);if(w)a.add(x,x,Et.widget({widget:new Ypt(S),diagnostics:l.slice()}));else{let _=l.reduce((P,A)=>A.markClass?P+" "+A.markClass:P,"");a.add(x,b,Et.mark({class:"cm-lintRange cm-lintRange-"+S+_,diagnostics:l.slice(),inclusiveEnd:l.some(P=>P.to>b)}))}if(c=b,c==h)break;for(let _=0;_<l.length;_++)l[_].to<=c&&l.splice(_--,1)}let f=a.finish();return new dp(f,r,Ig(f))}}function Ig(n,e=null,r=0){let i=null;return n.between(r,1e9,(o,s,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!i)i=new tJ(o,s,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new tJ(i.from,s,i.diagnostic)}}),i}function Bpt(n,e){let r=e.pos,i=e.end||r,o=n.state.facet(kb).hideOn(n,r,i);if(o!=null)return o;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(a=>a.is(Hpe))||n.changes.touchesRange(s.from,Math.max(s.to,i)))}function Hpt(n,e){return n.field($s,!1)?e:e.concat(Ht.appendConfig.of(emt))}const Hpe=Ht.define(),VL=Ht.define(),qpe=Ht.define(),$s=ki.define({create(){return new dp(Et.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let r=n.diagnostics.map(e.changes),i=null,o=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=Ig(r,n.selected.diagnostic,s)||Ig(r,null,s)}!r.size&&o&&e.state.facet(kb).autoPanel&&(o=null),n=new dp(r,o,i)}for(let r of e.effects)if(r.is(Hpe)){let i=e.state.facet(kb).autoPanel?r.value.length?Sb.open:null:n.panel;n=dp.init(r.value,i,e.state)}else r.is(VL)?n=new dp(n.diagnostics,r.value?Sb.open:null,n.selected):r.is(qpe)&&(n=new dp(n.diagnostics,n.panel,r.value));return n},provide:n=>[lb.from(n,e=>e.panel),rt.decorations.from(n,e=>e.diagnostics)]}),qpt=Et.mark({class:"cm-lintRange cm-lintRange-active"});function Vpt(n,e,r){let{diagnostics:i}=n.state.field($s),o,s=-1,a=-1;i.between(e-(r<0?1:0),e+(r>0?1:0),(c,u,{spec:d})=>{if(e>=c&&e<=u&&(c==u||(e>c||r>0)&&(e<u||r<0)))return o=d.diagnostics,s=c,a=u,!1});let l=n.state.facet(kb).tooltipFilter;return o&&l&&(o=l(o,n.state)),o?{pos:s,end:a,above:n.state.doc.lineAt(s).to<a,create(){return{dom:Wpt(n,o)}}}:null}function Wpt(n,e){return Nn("ul",{class:"cm-tooltip-lint"},e.map(r=>Wpe(n,r,!1)))}const Upt=n=>{let e=n.state.field($s,!1);(!e||!e.panel)&&n.dispatch({effects:Hpt(n.state,[VL.of(!0)])});let r=DI(n,Sb.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},nJ=n=>{let e=n.state.field($s,!1);return!e||!e.panel?!1:(n.dispatch({effects:VL.of(!1)}),!0)},Kpt=n=>{let e=n.state.field($s,!1);if(!e)return!1;let r=n.state.selection.main,i=e.diagnostics.iter(r.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==r.from&&i.to==r.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Gpt=[{key:"Mod-Shift-m",run:Upt,preventDefault:!0},{key:"F8",run:Kpt}],kb=it.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Bc(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:rJ,tooltipFilter:rJ,needsRefresh:(e,r)=>e?r?i=>e(i)||r(i):e:r,hideOn:(e,r)=>e?r?(i,o,s)=>e(i,o,s)||r(i,o,s):e:r,autoPanel:(e,r)=>e||r})}}});function rJ(n,e){return n?e?(r,i)=>e(n(r,i),i):n:e}function Vpe(n){let e=[];if(n)e:for(let{name:r}of n){for(let i=0;i<r.length;i++){let o=r[i];if(/[a-zA-Z]/.test(o)&&!e.some(s=>s.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function Wpe(n,e,r){var i;let o=r?Vpe(e.actions):[];return Nn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Nn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,a)=>{let l=!1,c=m=>{if(m.preventDefault(),l)return;l=!0;let v=Ig(n.state.field($s).diagnostics,e);v&&s.apply(n,v.from,v.to)},{name:u}=s,d=o[a]?u.indexOf(o[a]):-1,h=d<0?u:[u.slice(0,d),Nn("u",u.slice(d,d+1)),u.slice(d+1)],f=s.markClass?" "+s.markClass:"";return Nn("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:c,onmousedown:c,"aria-label":` Action: ${u}${d<0?"":` (access key "${o[a]})"`}.`},h)}),e.source&&Nn("div",{class:"cm-diagnosticSource"},e.source))}class Ypt extends Hc{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Nn("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class iJ{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Wpe(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Sb{constructor(e){this.view=e,this.items=[];let r=o=>{if(o.keyCode==27)nJ(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=Vpe(s.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==o.keyCode){let c=Ig(this.view.state.field($s).diagnostics,s);c&&s.actions[l].apply(e,c.from,c.to)}}else return;o.preventDefault()},i=o=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(o.target)&&this.moveSelection(s)};this.list=Nn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:i}),this.dom=Nn("div",{class:"cm-panel-lint"},this.list,Nn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nJ(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field($s).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field($s),i=0,o=!1,s=null,a=new Set;for(e.between(0,this.view.state.doc.length,(l,c,{spec:u})=>{for(let d of u.diagnostics){if(a.has(d))continue;a.add(d);let h=-1,f;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==d){h=m;break}h<0?(f=new iJ(this.view,d),this.items.splice(i,0,f),o=!0):(f=this.items[h],h>i&&(this.items.splice(i,h-i),o=!0)),r&&f.diagnostic==r.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new iJ(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:c})=>{let u=c.height/this.list.offsetHeight;l.top<c.top?this.list.scrollTop-=(c.top-l.top)/u:l.bottom>c.bottom&&(this.list.scrollTop+=(l.bottom-c.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function r(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)r();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field($s),i=Ig(r.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:qpe.of(i)})}static open(e){return new Sb(e)}}function Zpt(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Zk(n){return Zpt(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Xpt=rt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Zk("#d11")},".cm-lintRange-warning":{backgroundImage:Zk("orange")},".cm-lintRange-info":{backgroundImage:Zk("#999")},".cm-lintRange-hint":{backgroundImage:Zk("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Jpt(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Qpt(n){let e="hint",r=1;for(let i of n){let o=Jpt(i.severity);o>r&&(r=o,e=i.severity)}return e}const emt=[$s,rt.decorations.compute([$s],n=>{let{selected:e,panel:r}=n.field($s);return!e||!r||e.from==e.to?Et.none:Et.set([qpt.range(e.from,e.to)])}),fnt(Vpt,{hideOn:Bpt}),Xpt],tmt=[Ant(),Mnt(),Vtt(),qdt(),drt(),Rue(),ztt(),un.allowMultipleSelections.of(!0),Xnt(),ade(mrt,{fallback:!0}),krt(),Ppt(),Fpt(),nnt(),ont(),Ztt(),bft(),t1.of([...jpt,...ype,...Bft,...Jdt,...art,...Bpe,...Gpt])];function nmt(n){return n.nodeType===1}function rmt(n){return nmt(n)&&n.namespaceURI==="http://www.w3.org/1999/xhtml"}function imt(n){let e=[[-1,n.state.doc]],r=[];for(;e.length>0;){const[i,o]=e.pop();if(i>=0){let s=n.nodeDOM(i);if(s&&rmt(s)){let{top:a,bottom:l,left:c,right:u}=s.getBoundingClientRect();r.push([i,[c,a,u,a]],[i+o.nodeSize,[c,l,u,l]])}}if(o.isBlock&&!o.isTextblock){let s=i+1;for(let a of o.children)e.push([s,a]),s+=a.nodeSize}}return r}function omt(n,e){let r=[],i,o;const s=()=>{const d=n.dom.getBoundingClientRect(),h=n.state.doc;return r&&i&&o&&d.width===o.width&&d.height===o.height&&d.x===o.x&&d.y===o.y&&i.eq(h)||(o=d,i=h,r=imt(n)),r},a=(d,h)=>{if(!n.editable||n.isDestroyed)return;const f=(x,b)=>{const[w,S]=x,[_,P]=b;return sJ(d,S)-sJ(d,P)||w-_};let m=s();m.sort(f),m=m.slice(0,8);const v=m.find(x=>e?.({view:n,pos:x[0],event:h})!==!1);if(!(v&&amt(n,v[0])))return v};let l,c;return(d,h)=>(l&&smt(l,d)||(l=d,c=a(d,h)),c)}function smt(n,e){return n[0]===e[0]&&n[1]===e[1]}function oJ(n,e){return Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1])}function sJ(n,e){return Math.min(oJ(n,[e[0],e[1]]),oJ(n,[e[2],e[3]]))}function amt(n,e){const r=n.dragging;if(!r)return;const{move:i}=r;if(!i)return;const o=n.state.selection;if(!(o instanceof Tt))return;const{from:s,to:a}=o;return s<=e&&e<=a}function lmt(n){let e;return new ar({key:new lr("prosekit-drop-indicator"),view:r=>(e=omt(r,n.onDrag),umt(r,e,n)),props:{handleDrop(r,i,o,s){if(!e)return!1;const a=e([i.clientX,i.clientY],i);if(!a)return!1;i.preventDefault();let l=a[0],c=r.state.tr;if(s){let{node:m}=r.dragging||{};m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return!0;let f=c.doc.resolve(u);if(d&&Tt.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Tt(f));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((v,x,b,w)=>m=w),c.setSelection(cmt(r,f,c.doc.resolve(m)))}return r.focus(),r.dispatch(c.setMeta("uiEvent","drop")),!0}}})}function cmt(n,e,r,i){return n.someProp("createSelectionBetween",o=>o(n,e,r))||xt.between(e,r,i)}function umt(n,e,r){let i=n.dom,o,s,a,l=!1;const c=()=>{o&&clearTimeout(o),l=!1,o=setTimeout(()=>{l||r.onHide?.()},30)},u=h=>{l=!0;const{clientX:f,clientY:m}=h;if(s===f&&a===m)return;s=f,a=m;let v=e([f,m],h);if(v){const[x,[b,w,S,_]]=v,P={p1:{x:b,y:w},p2:{x:S,y:_}};r.onShow?.({view:n,pos:x,line:P})}else{c();return}};return i.addEventListener("dragover",u),i.addEventListener("dragend",c),i.addEventListener("drop",c),i.addEventListener("dragleave",c),{destroy:()=>{i.removeEventListener("dragover",u),i.removeEventListener("dragend",c),i.removeEventListener("drop",c),i.removeEventListener("dragleave",c)}}}class Pr extends $t{constructor(e){super(e,e)}map(e,r){let i=e.resolve(r.map(this.head));return Pr.valid(i)?new Pr(i):$t.near(i)}content(){return Qe.empty}eq(e){return e instanceof Pr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Pr(e.resolve(r.pos))}getBookmark(){return new WL(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!dmt(e)||!hmt(e))return!1;let i=r.type.spec.allowGapCursor;if(i!=null)return i;let o=r.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,r,i=!1){e:for(;;){if(!i&&Pr.valid(e))return e;let o=e.pos,s=null;for(let a=e.depth;;a--){let l=e.node(a);if(r>0?e.indexAfter(a)<l.childCount:e.index(a)>0){s=l.child(r>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;o+=r;let c=e.doc.resolve(o);if(Pr.valid(c))return c}for(;;){let a=r>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!Tt.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*r),i=!1;continue e}break}s=a,o+=r;let l=e.doc.resolve(o);if(Pr.valid(l))return l}return null}}}Pr.prototype.visible=!1;Pr.findFrom=Pr.findGapCursorFrom;$t.jsonID("gapcursor",Pr);class WL{constructor(e){this.pos=e}map(e){return new WL(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Pr.valid(r)?new Pr(r):$t.near(r)}}function Upe(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function dmt(n){for(let e=n.depth;e>=0;e--){let r=n.index(e),i=n.node(e);if(r==0){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(r-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||Upe(o.type))return!0;if(o.inlineContent)return!1}}return!0}function hmt(n){for(let e=n.depth;e>=0;e--){let r=n.indexAfter(e),i=n.node(e);if(r==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(r);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||Upe(o.type))return!0;if(o.inlineContent)return!1}}return!0}function fmt(){return new ar({props:{decorations:ymt,createSelectionBetween(n,e,r){return e.pos==r.pos&&Pr.valid(r)?new Pr(r):null},handleClick:mmt,handleKeyDown:pmt,handleDOMEvents:{beforeinput:gmt}}})}const pmt=eO({ArrowLeft:Xk("horiz",-1),ArrowRight:Xk("horiz",1),ArrowUp:Xk("vert",-1),ArrowDown:Xk("vert",1)});function Xk(n,e){const r=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,o,s){let a=i.selection,l=e>0?a.$to:a.$from,c=a.empty;if(a instanceof xt){if(!s.endOfTextblock(r)||l.depth==0)return!1;c=!1,l=i.doc.resolve(e>0?l.after():l.before())}let u=Pr.findGapCursorFrom(l,e,c);return u?(o&&o(i.tr.setSelection(new Pr(u))),!0):!1}}function mmt(n,e,r){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!Pr.valid(i))return!1;let o=n.posAtCoords({left:r.clientX,top:r.clientY});return o&&o.inside>-1&&Tt.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Pr(i))),!0)}function gmt(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Pr))return!1;let{$from:r}=n.state.selection,i=r.parent.contentMatchAt(r.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let o=Ue.empty;for(let a=i.length-1;a>=0;a--)o=Ue.from(i[a].createAndFill(null,o));let s=n.state.tr.replace(r.pos,r.pos,new Qe(o,0,0));return s.setSelection(xt.near(s.doc.resolve(r.pos+1))),n.dispatch(s),!1}function ymt(n){if(!(n.selection instanceof Pr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ln.create(n.doc,[No.widget(n.selection.head,e,{key:"gapcursor"})])}function jw(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-cursor",...e}}),n}const Cb=En(null,"dropIndicatorState");jw(Cb,{displayName:"Ctx<dropIndicatorState>"});const p7=En({width:2,color:!1,class:"milkdown-drop-indicator"},"dropIndicatorConfig");jw(p7,{displayName:"Ctx<dropIndicatorConfig>"});const vmt=new lr("MILKDOWN_DROP_INDICATOR_DOM"),Kpe=Kr(n=>new ar({key:vmt,view:e=>{const r=n.get(p7.key),i=document.createElement("div");Object.assign(i.style,{position:"fixed",pointerEvents:"none",display:"none",backgroundColor:r.color,top:"0",left:"0"}),i.classList.add(r.class),i.classList.add("milkdown-drop-indicator"),e.dom.parentNode?.appendChild(i);const o=n.use(Cb.key),s=a=>{xmt(i,a,r)};return o.on(s),{destroy:()=>{o.off(s),i.remove()}}}}));jw(Kpe,{displayName:"Prose<dropIndicatorDOM>"});function xmt(n,e,r){if(!e){Object.assign(n.style,{display:"none"});return}const{line:i}=e,{width:o}=r,{p1:{x:s,y:a},p2:{x:l,y:c}}=i,u=a===c;let d,h,f=a,m=s;u?(d=l-s,h=o,f-=o/2):(d=o,h=c-a,m-=o/2),f=Math.round(f),m=Math.round(m),Object.assign(n.style,{display:"block",width:`${d}px`,height:`${h}px`,transform:`translate(${m}px, ${f}px)`})}const Gpe=Kr(n=>lmt({onShow:o=>{n.set(Cb.key,o)},onHide:()=>{n.set(Cb.key,null)},onDrag:()=>!0}));jw(Gpe,{displayName:"Prose<dropIndicator>"});const Ype=Kr(()=>fmt());jw(Ype,{displayName:"Prose<gapCursor>"});const bmt=[Ype,p7,Cb,Kpe,Gpe].flat();function wmt(n){var e;const r=(e=void 0)!=null?e:!1;let i=typeof document>"u"?null:document.createElement("div");return new ar({key:kmt,view:o=>{r!==!0&&Amt(o.state.schema,r||[]);const s=o.dom.ownerDocument;i=i||document.createElement("div");const a=i,l=()=>{Cmt(o,a)};let c;return window.ResizeObserver&&(c=new window.ResizeObserver(()=>l()),c.observe(o.dom)),s.addEventListener("selectionchange",l),{update:()=>{l()},destroy:()=>{s.removeEventListener("selectionchange",l),c&&c.unobserve(o.dom)}}},props:{handleKeyDown:(o,s)=>{var a;const{selection:l}=o.state;if(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey||s.isComposing||!["ArrowLeft","ArrowRight"].includes(s.key)||!YN(l)||!l.empty)return!1;const c=l.$head,[u,d]=Zpe(c),h=o.state.storedMarks||c.marks();if(u&&d&&!Yt.sameSet(u,d)){if(s.key==="ArrowLeft"&&!Yt.sameSet(u,h))return o.dispatch(o.state.tr.setStoredMarks(u)),!0;if(s.key==="ArrowRight"&&!Yt.sameSet(d,h))return o.dispatch(o.state.tr.setStoredMarks(d)),!0}return s.key==="ArrowLeft"&&c.textOffset===1?(o.dispatch(o.state.tr.setSelection(xt.create(o.state.doc,c.pos-1)).setStoredMarks(c.marks())),!0):s.key==="ArrowRight"&&c.textOffset+1===((a=c.parent.maybeChild(c.index()))==null?void 0:a.nodeSize)?(o.dispatch(o.state.tr.setSelection(xt.create(o.state.doc,c.pos+1)).setStoredMarks(c.marks())),!0):!1},decorations:o=>{if(!(!i||!YN(o.selection)||!o.selection.empty))return Ln.create(o.doc,[No.widget(0,i,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}var kmt=new lr("prosemirror-virtual-cursor");function Smt(n,e){var r;const i=window.getSelection();if(!i||!i.rangeCount)return null;const o=(r=i?.getRangeAt(0))==null?void 0:r.cloneRange();if(!o)return null;o.collapse(e);const s=o.getClientRects(),a=s?.length?s[s.length-1]:null;return a?.height?a:n.coordsAtPos(n.state.selection.head)}function Zpe(n){const e=n.index(),r=n.parent.maybeChild(e);let i=n.textOffset?r:null;return!i&&e>0&&(i=n.parent.maybeChild(e-1)),[i?.marks,r?.marks]}function YN(n){return n&&typeof n=="object"&&"$cursor"in n}function Cmt(n,e){if(!n||!n.dom||n.isDestroyed||!e)return;const{state:r,dom:i}=n,{selection:o}=r;if(!YN(o))return;const s=Smt(n,o.$head===o.$from);if(!s)return e;const a=i.getBoundingClientRect();let l="prosemirror-virtual-cursor";const c=r.selection.$head,[u,d]=Zpe(c),h=r.storedMarks||c.marks();o.$cursor&&u&&d&&h&&!Yt.sameSet(u,d)&&(Yt.sameSet(u,h)?l+=" prosemirror-virtual-cursor-left":Yt.sameSet(d,h)&&(l+=" prosemirror-virtual-cursor-right")),e.className=l,_mt(e,"prosemirror-virtual-cursor-animation"),e.style.height=`${s.bottom-s.top}px`,e.style.left=`${s.left-a.left}px`,e.style.top=`${s.top-a.top}px`}function _mt(n,e){n.classList.remove(e),n.offsetWidth,n.classList.add(e)}function Amt(n,e){for(const[r,i]of Object.entries(n.marks))i.spec.inclusive===!1&&!e.includes(r)&&console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${r}" mark or adding it to the "skipWarning" option.`)}var Tmt=Object.defineProperty,aJ=Object.getOwnPropertySymbols,Pmt=Object.prototype.hasOwnProperty,Mmt=Object.prototype.propertyIsEnumerable,lJ=(n,e,r)=>e in n?Tmt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Emt=(n,e)=>{for(var r in e||(e={}))Pmt.call(e,r)&&lJ(n,r,e[r]);if(aJ)for(var r of aJ(e))Mmt.call(e,r)&&lJ(n,r,e[r]);return n};function Xpe(n,e){return Object.assign(n,{meta:Emt({package:"@milkdown/components"},e)}),n}const Nmt={imageIcon:"",uploadButton:"Upload",confirmButton:"",uploadPlaceholderText:"/Paste",onUpload:n=>Promise.resolve(URL.createObjectURL(n))},m7=En(Nmt,"inlineImageConfigCtx");Xpe(m7,{displayName:"Config<image-inline>",group:"ImageInline"});function dS({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}dS.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const jmt=$I("abcdefg",8),Omt=qi({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:n,src:e,setLink:r,onUpload:i,imageIcon:o,uploadButton:s,confirmButton:a,uploadPlaceholderText:l,className:c}){var u,d;const h=mt(!1),f=mt(),m=mt((u=e.value)!=null?u:""),v=mt(jmt()),x=mt(((d=e.value)==null?void 0:d.length)!==0),b=P=>{const T=P.target.value;x.value=T.length!==0,m.value=T},w=P=>{var A,T;P.key==="Enter"&&r((T=(A=f.value)==null?void 0:A.value)!=null?T:"")},S=()=>{var P,A;r((A=(P=f.value)==null?void 0:P.value)!=null?A:"")},_=P=>{var A;const T=(A=P.target.files)==null?void 0:A[0];T&&i(T).then(E=>{E&&(r(E),x.value=!0)}).catch(E=>{console.error("An error occurred while uploading image"),console.error(E)})};return()=>Ae("div",{class:Vt("image-edit",c)},Ae(dS,{icon:o,class:"image-icon"}),Ae("div",{class:Vt("link-importer",h.value&&"focus")},Ae("input",{ref:f,draggable:"true",onDragstart:P=>{P.preventDefault(),P.stopPropagation()},disabled:n.value,class:"link-input-area",value:m.value,onInput:b,onKeydown:w,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!x.value&&Ae("div",{class:"placeholder"},Ae("input",{disabled:n.value,class:"hidden",id:v.value,type:"file",accept:"image/*",onChange:_}),Ae("label",{class:"uploader",for:v.value},Ae(dS,{icon:s})),Ae("span",{class:"text",onClick:()=>{var P;return(P=f.value)==null?void 0:P.focus()}},l))),m.value&&Ae("div",{class:"confirm",onClick:()=>S()},Ae(dS,{icon:a})))}}),Dmt=qi({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(n){const{src:e,alt:r,title:i}=n;return()=>{var o;return(o=e.value)!=null&&o.length?Ae("img",{class:"image-inline",src:e.value,alt:r.value,title:i.value}):Ae(Omt,{src:n.src,selected:n.selected,readonly:n.readonly,setLink:s=>n.setAttr("src",s),imageIcon:n.config.imageIcon,uploadButton:n.config.uploadButton,confirmButton:n.config.confirmButton,uploadPlaceholderText:n.config.uploadPlaceholderText,onUpload:n.config.onUpload,className:"empty-image-inline"})}}}),Jpe=pw(_m.node,n=>(e,r,i)=>{const o=mt(e.attrs.src),s=mt(e.attrs.alt),a=mt(e.attrs.title),l=mt(!1),c=mt(!r.editable),u=(b,w)=>{if(!r.editable)return;const S=i();S!=null&&r.dispatch(r.state.tr.setNodeAttribute(S,b,b==="src"?La.sanitize(w):w))},d=n.get(m7.key),h=Ll(Dmt,{src:o,alt:s,title:a,selected:l,readonly:c,setAttr:u,config:d}),f=document.createElement("span");f.className="milkdown-image-inline";const m=l1(()=>{l.value?f.classList.add("selected"):f.classList.remove("selected")}),v=d.proxyDomURL,x=b=>{if(!v)o.value=b.attrs.src;else{const w=v(b.attrs.src);typeof w=="string"?o.value=w:w.then(S=>{o.value=S}).catch(console.error)}s.value=b.attrs.alt,a.value=b.attrs.title};return x(e),h.mount(f),{dom:f,update:b=>b.type!==e.type?!1:(x(b),!0),stopEvent:b=>b.target instanceof HTMLInputElement,selectNode:()=>{l.value=!0},deselectNode:()=>{l.value=!1},destroy:()=>{m(),h.unmount(),f.remove()}}});Xpe(Jpe,{displayName:"NodeView<image-inline>",group:"ImageInline"});const Imt=[m7,Jpe];class es{constructor(e,r,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=i}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new es(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Vs{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Vs(r,es.range(this,e))}}class We{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+e,o,s,a=r&&r.loc;if(a&&a.start<=a.end){var l=a.lexer.input;o=a.start,s=a.end,o===l.length?i+=" at end of input: ":i+=" at position "+(o+1)+": ";var c=l.slice(o,s).replace(/[^]/g,"$&"),u;o>15?u=""+l.slice(o-15,o):u=l.slice(0,o);var d;s+15<l.length?d=l.slice(s,s+15)+"":d=l.slice(s),i+=u+c+d}var h=new Error(i);return h.name="ParseError",h.__proto__=We.prototype,h.position=o,o!=null&&s!=null&&(h.length=s-o),h.rawMessage=e,h}}We.prototype.__proto__=Error.prototype;var Rmt=function(e,r){return e===void 0?r:e},Lmt=/([A-Z])/g,zmt=function(e){return e.replace(Lmt,"-$1").toLowerCase()},Fmt={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},$mt=/[&><"']/g;function Bmt(n){return String(n).replace($mt,e=>Fmt[e])}var Qpe=function n(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?n(e.body[0]):e:e.type==="font"?n(e.body):e},Hmt=function(e){var r=Qpe(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},qmt=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Vmt=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},yn={deflt:Rmt,escape:Bmt,hyphenate:zmt,getBaseElem:Qpe,isCharacterBox:Hmt,protocolFromUrl:Vmt},hS={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:n=>"#"+n},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(n,e)=>(e.push(n),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:n=>Math.max(0,n),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:n=>Math.max(0,n),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:n=>Math.max(0,n),cli:"-e, --max-expand <n>",cliProcessor:n=>n==="Infinity"?1/0:parseInt(n)},globalGroup:{type:"boolean",cli:!1}};function Wmt(n){if(n.default)return n.default;var e=n.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class UL{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in hS)if(hS.hasOwnProperty(r)){var i=hS[r];this[r]=e[r]!==void 0?i.processor?i.processor(e[r]):e[r]:Wmt(i)}}reportNonstrict(e,r,i){var o=this.strict;if(typeof o=="function"&&(o=o(e,r,i)),!(!o||o==="ignore")){if(o===!0||o==="error")throw new We("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),i);o==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+o+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,i){var o=this.strict;if(typeof o=="function")try{o=o(e,r,i)}catch{o="error"}return!o||o==="ignore"?!1:o===!0||o==="error"?!0:o==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+o+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=yn.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var i=typeof this.trust=="function"?this.trust(e):this.trust;return!!i}}class oh{constructor(e,r,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=i}sup(){return cc[Umt[this.id]]}sub(){return cc[Kmt[this.id]]}fracNum(){return cc[Gmt[this.id]]}fracDen(){return cc[Ymt[this.id]]}cramp(){return cc[Zmt[this.id]]}text(){return cc[Xmt[this.id]]}isTight(){return this.size>=2}}var KL=0,VC=1,og=2,Uu=3,_b=4,Ca=5,Rg=6,_o=7,cc=[new oh(KL,0,!1),new oh(VC,0,!0),new oh(og,1,!1),new oh(Uu,1,!0),new oh(_b,2,!1),new oh(Ca,2,!0),new oh(Rg,3,!1),new oh(_o,3,!0)],Umt=[_b,Ca,_b,Ca,Rg,_o,Rg,_o],Kmt=[Ca,Ca,Ca,Ca,_o,_o,_o,_o],Gmt=[og,Uu,_b,Ca,Rg,_o,Rg,_o],Ymt=[Uu,Uu,Ca,Ca,_o,_o,_o,_o],Zmt=[VC,VC,Uu,Uu,Ca,Ca,_o,_o],Xmt=[KL,VC,og,Uu,og,Uu,og,Uu],It={DISPLAY:cc[KL],TEXT:cc[og],SCRIPT:cc[_b],SCRIPTSCRIPT:cc[Rg]},ZN=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Jmt(n){for(var e=0;e<ZN.length;e++)for(var r=ZN[e],i=0;i<r.blocks.length;i++){var o=r.blocks[i];if(n>=o[0]&&n<=o[1])return r.name}return null}var fS=[];ZN.forEach(n=>n.blocks.forEach(e=>fS.push(...e)));function eme(n){for(var e=0;e<fS.length;e+=2)if(n>=fS[e]&&n<=fS[e+1])return!0;return!1}var h0=80,Qmt=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},e0t=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},t0t=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},n0t=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},r0t=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},i0t=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},o0t=function(e,r,i){var o=i-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+o+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},s0t=function(e,r,i){r=1e3*r;var o="";switch(e){case"sqrtMain":o=Qmt(r,h0);break;case"sqrtSize1":o=e0t(r,h0);break;case"sqrtSize2":o=t0t(r,h0);break;case"sqrtSize3":o=n0t(r,h0);break;case"sqrtSize4":o=r0t(r,h0);break;case"sqrtTall":o=o0t(r,h0,i)}return o},a0t=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},cJ={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},l0t=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ow{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var bc={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Jk={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},uJ={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function c0t(n,e){bc[n]=e}function GL(n,e,r){if(!bc[e])throw new Error("Font metrics not found for font: "+e+".");var i=n.charCodeAt(0),o=bc[e][i];if(!o&&n[0]in uJ&&(i=uJ[n[0]].charCodeAt(0),o=bc[e][i]),!o&&r==="text"&&eme(i)&&(o=bc[e][77]),o)return{depth:o[0],height:o[1],italic:o[2],skew:o[3],width:o[4]}}var JP={};function u0t(n){var e;if(n>=5?e=0:n>=3?e=1:e=2,!JP[e]){var r=JP[e]={cssEmPerMu:Jk.quad[e]/18};for(var i in Jk)Jk.hasOwnProperty(i)&&(r[i]=Jk[i][e])}return JP[e]}var d0t=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],dJ=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],hJ=function(e,r){return r.size<2?e:d0t[e-1][r.size-1]};class _u{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||_u.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=dJ[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return new _u(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:hJ(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:dJ[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=hJ(_u.BASESIZE,e);return this.size===r&&this.textSize===_u.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==_u.BASESIZE?["sizing","reset-size"+this.size,"size"+_u.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=u0t(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}_u.BASESIZE=6;var XN={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},h0t={ex:!0,em:!0,mu:!0},tme=function(e){return typeof e!="string"&&(e=e.unit),e in XN||e in h0t||e==="ex"},Cr=function(e,r){var i;if(e.unit in XN)i=XN[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")i=r.fontMetrics().cssEmPerMu;else{var o;if(r.style.isTight()?o=r.havingStyle(r.style.text()):o=r,e.unit==="ex")i=o.fontMetrics().xHeight;else if(e.unit==="em")i=o.fontMetrics().quad;else throw new We("Invalid unit: '"+e.unit+"'");o!==r&&(i*=o.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*i,r.maxSize)},Je=function(e){return+e.toFixed(4)+"em"},nf=function(e){return e.filter(r=>r).join(" ")},nme=function(e,r,i){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},r){r.style.isTight()&&this.classes.push("mtight");var o=r.getColor();o&&(this.style.color=o)}},rme=function(e){var r=document.createElement(e);r.className=nf(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(r.style[i]=this.style[i]);for(var o in this.attributes)this.attributes.hasOwnProperty(o)&&r.setAttribute(o,this.attributes[o]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r},f0t=/[\s"'>/=\x00-\x1f]/,ime=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+yn.escape(nf(this.classes))+'"');var i="";for(var o in this.style)this.style.hasOwnProperty(o)&&(i+=yn.hyphenate(o)+":"+this.style[o]+";");i&&(r+=' style="'+yn.escape(i)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(f0t.test(s))throw new We("Invalid attribute name '"+s+"'");r+=" "+s+'="'+yn.escape(this.attributes[s])+'"'}r+=">";for(var a=0;a<this.children.length;a++)r+=this.children[a].toMarkup();return r+="</"+e+">",r};class Dw{constructor(e,r,i,o){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,nme.call(this,e,i,o),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return rme.call(this,"span")}toMarkup(){return ime.call(this,"span")}}class YL{constructor(e,r,i,o){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,nme.call(this,r,o),this.children=i||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return rme.call(this,"a")}toMarkup(){return ime.call(this,"a")}}class p0t{constructor(e,r,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=i}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+yn.escape(this.src)+'"'+(' alt="'+yn.escape(this.alt)+'"'),r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=yn.hyphenate(i)+":"+this.style[i]+";");return r&&(e+=' style="'+yn.escape(r)+'"'),e+="'/>",e}}var m0t={:"",:"",:"",:""};class Oa{constructor(e,r,i,o,s,a,l,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=i||0,this.italic=o||0,this.skew=s||0,this.width=a||0,this.classes=l||[],this.style=c||{},this.maxFontSize=0;var u=Jmt(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=m0t[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=Je(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=nf(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(r=r||document.createElement("span"),r.style[i]=this.style[i]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=yn.escape(nf(this.classes)),r+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var o in this.style)this.style.hasOwnProperty(o)&&(i+=yn.hyphenate(o)+":"+this.style[o]+";");i&&(e=!0,r+=' style="'+yn.escape(i)+'"');var s=yn.escape(this.text);return e?(r+=">",r+=s,r+="</span>",r):s}}class ud{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&r.setAttribute(i,this.attributes[i]);for(var o=0;o<this.children.length;o++)r.appendChild(this.children[o].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+yn.escape(this.attributes[r])+'"');e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</svg>",e}}class rf{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",cJ[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+yn.escape(this.alternate)+'"/>':'<path d="'+yn.escape(cJ[this.pathName])+'"/>'}}class JN{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&r.setAttribute(i,this.attributes[i]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+yn.escape(this.attributes[r])+'"');return e+="/>",e}}function fJ(n){if(n instanceof Oa)return n;throw new Error("Expected symbolNode but got "+String(n)+".")}function g0t(n){if(n instanceof Dw)return n;throw new Error("Expected span<HtmlDomNode> but got "+String(n)+".")}var y0t={bin:1,close:1,inner:1,open:1,punct:1,rel:1},v0t={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Xn={math:{},text:{}};function j(n,e,r,i,o,s){Xn[n][o]={font:e,group:r,replace:i},s&&i&&(Xn[n][i]=Xn[n][o])}var R="math",$e="text",H="main",ee="ams",gr="accent-token",lt="bin",Fo="close",p1="inner",Dt="mathord",Gr="op-token",Zs="open",g7="punct",ne="rel",Pd="spacing",ce="textord";j(R,H,ne,"","\\equiv",!0);j(R,H,ne,"","\\prec",!0);j(R,H,ne,"","\\succ",!0);j(R,H,ne,"","\\sim",!0);j(R,H,ne,"","\\perp");j(R,H,ne,"","\\preceq",!0);j(R,H,ne,"","\\succeq",!0);j(R,H,ne,"","\\simeq",!0);j(R,H,ne,"","\\mid",!0);j(R,H,ne,"","\\ll",!0);j(R,H,ne,"","\\gg",!0);j(R,H,ne,"","\\asymp",!0);j(R,H,ne,"","\\parallel");j(R,H,ne,"","\\bowtie",!0);j(R,H,ne,"","\\smile",!0);j(R,H,ne,"","\\sqsubseteq",!0);j(R,H,ne,"","\\sqsupseteq",!0);j(R,H,ne,"","\\doteq",!0);j(R,H,ne,"","\\frown",!0);j(R,H,ne,"","\\ni",!0);j(R,H,ne,"","\\propto",!0);j(R,H,ne,"","\\vdash",!0);j(R,H,ne,"","\\dashv",!0);j(R,H,ne,"","\\owns");j(R,H,g7,".","\\ldotp");j(R,H,g7,"","\\cdotp");j(R,H,ce,"#","\\#");j($e,H,ce,"#","\\#");j(R,H,ce,"&","\\&");j($e,H,ce,"&","\\&");j(R,H,ce,"","\\aleph",!0);j(R,H,ce,"","\\forall",!0);j(R,H,ce,"","\\hbar",!0);j(R,H,ce,"","\\exists",!0);j(R,H,ce,"","\\nabla",!0);j(R,H,ce,"","\\flat",!0);j(R,H,ce,"","\\ell",!0);j(R,H,ce,"","\\natural",!0);j(R,H,ce,"","\\clubsuit",!0);j(R,H,ce,"","\\wp",!0);j(R,H,ce,"","\\sharp",!0);j(R,H,ce,"","\\diamondsuit",!0);j(R,H,ce,"","\\Re",!0);j(R,H,ce,"","\\heartsuit",!0);j(R,H,ce,"","\\Im",!0);j(R,H,ce,"","\\spadesuit",!0);j(R,H,ce,"","\\S",!0);j($e,H,ce,"","\\S");j(R,H,ce,"","\\P",!0);j($e,H,ce,"","\\P");j(R,H,ce,"","\\dag");j($e,H,ce,"","\\dag");j($e,H,ce,"","\\textdagger");j(R,H,ce,"","\\ddag");j($e,H,ce,"","\\ddag");j($e,H,ce,"","\\textdaggerdbl");j(R,H,Fo,"","\\rmoustache",!0);j(R,H,Zs,"","\\lmoustache",!0);j(R,H,Fo,"","\\rgroup",!0);j(R,H,Zs,"","\\lgroup",!0);j(R,H,lt,"","\\mp",!0);j(R,H,lt,"","\\ominus",!0);j(R,H,lt,"","\\uplus",!0);j(R,H,lt,"","\\sqcap",!0);j(R,H,lt,"","\\ast");j(R,H,lt,"","\\sqcup",!0);j(R,H,lt,"","\\bigcirc",!0);j(R,H,lt,"","\\bullet",!0);j(R,H,lt,"","\\ddagger");j(R,H,lt,"","\\wr",!0);j(R,H,lt,"","\\amalg");j(R,H,lt,"&","\\And");j(R,H,ne,"","\\longleftarrow",!0);j(R,H,ne,"","\\Leftarrow",!0);j(R,H,ne,"","\\Longleftarrow",!0);j(R,H,ne,"","\\longrightarrow",!0);j(R,H,ne,"","\\Rightarrow",!0);j(R,H,ne,"","\\Longrightarrow",!0);j(R,H,ne,"","\\leftrightarrow",!0);j(R,H,ne,"","\\longleftrightarrow",!0);j(R,H,ne,"","\\Leftrightarrow",!0);j(R,H,ne,"","\\Longleftrightarrow",!0);j(R,H,ne,"","\\mapsto",!0);j(R,H,ne,"","\\longmapsto",!0);j(R,H,ne,"","\\nearrow",!0);j(R,H,ne,"","\\hookleftarrow",!0);j(R,H,ne,"","\\hookrightarrow",!0);j(R,H,ne,"","\\searrow",!0);j(R,H,ne,"","\\leftharpoonup",!0);j(R,H,ne,"","\\rightharpoonup",!0);j(R,H,ne,"","\\swarrow",!0);j(R,H,ne,"","\\leftharpoondown",!0);j(R,H,ne,"","\\rightharpoondown",!0);j(R,H,ne,"","\\nwarrow",!0);j(R,H,ne,"","\\rightleftharpoons",!0);j(R,ee,ne,"","\\nless",!0);j(R,ee,ne,"","\\@nleqslant");j(R,ee,ne,"","\\@nleqq");j(R,ee,ne,"","\\lneq",!0);j(R,ee,ne,"","\\lneqq",!0);j(R,ee,ne,"","\\@lvertneqq");j(R,ee,ne,"","\\lnsim",!0);j(R,ee,ne,"","\\lnapprox",!0);j(R,ee,ne,"","\\nprec",!0);j(R,ee,ne,"","\\npreceq",!0);j(R,ee,ne,"","\\precnsim",!0);j(R,ee,ne,"","\\precnapprox",!0);j(R,ee,ne,"","\\nsim",!0);j(R,ee,ne,"","\\@nshortmid");j(R,ee,ne,"","\\nmid",!0);j(R,ee,ne,"","\\nvdash",!0);j(R,ee,ne,"","\\nvDash",!0);j(R,ee,ne,"","\\ntriangleleft");j(R,ee,ne,"","\\ntrianglelefteq",!0);j(R,ee,ne,"","\\subsetneq",!0);j(R,ee,ne,"","\\@varsubsetneq");j(R,ee,ne,"","\\subsetneqq",!0);j(R,ee,ne,"","\\@varsubsetneqq");j(R,ee,ne,"","\\ngtr",!0);j(R,ee,ne,"","\\@ngeqslant");j(R,ee,ne,"","\\@ngeqq");j(R,ee,ne,"","\\gneq",!0);j(R,ee,ne,"","\\gneqq",!0);j(R,ee,ne,"","\\@gvertneqq");j(R,ee,ne,"","\\gnsim",!0);j(R,ee,ne,"","\\gnapprox",!0);j(R,ee,ne,"","\\nsucc",!0);j(R,ee,ne,"","\\nsucceq",!0);j(R,ee,ne,"","\\succnsim",!0);j(R,ee,ne,"","\\succnapprox",!0);j(R,ee,ne,"","\\ncong",!0);j(R,ee,ne,"","\\@nshortparallel");j(R,ee,ne,"","\\nparallel",!0);j(R,ee,ne,"","\\nVDash",!0);j(R,ee,ne,"","\\ntriangleright");j(R,ee,ne,"","\\ntrianglerighteq",!0);j(R,ee,ne,"","\\@nsupseteqq");j(R,ee,ne,"","\\supsetneq",!0);j(R,ee,ne,"","\\@varsupsetneq");j(R,ee,ne,"","\\supsetneqq",!0);j(R,ee,ne,"","\\@varsupsetneqq");j(R,ee,ne,"","\\nVdash",!0);j(R,ee,ne,"","\\precneqq",!0);j(R,ee,ne,"","\\succneqq",!0);j(R,ee,ne,"","\\@nsubseteqq");j(R,ee,lt,"","\\unlhd");j(R,ee,lt,"","\\unrhd");j(R,ee,ne,"","\\nleftarrow",!0);j(R,ee,ne,"","\\nrightarrow",!0);j(R,ee,ne,"","\\nLeftarrow",!0);j(R,ee,ne,"","\\nRightarrow",!0);j(R,ee,ne,"","\\nleftrightarrow",!0);j(R,ee,ne,"","\\nLeftrightarrow",!0);j(R,ee,ne,"","\\vartriangle");j(R,ee,ce,"","\\hslash");j(R,ee,ce,"","\\triangledown");j(R,ee,ce,"","\\lozenge");j(R,ee,ce,"","\\circledS");j(R,ee,ce,"","\\circledR");j($e,ee,ce,"","\\circledR");j(R,ee,ce,"","\\measuredangle",!0);j(R,ee,ce,"","\\nexists");j(R,ee,ce,"","\\mho");j(R,ee,ce,"","\\Finv",!0);j(R,ee,ce,"","\\Game",!0);j(R,ee,ce,"","\\backprime");j(R,ee,ce,"","\\blacktriangle");j(R,ee,ce,"","\\blacktriangledown");j(R,ee,ce,"","\\blacksquare");j(R,ee,ce,"","\\blacklozenge");j(R,ee,ce,"","\\bigstar");j(R,ee,ce,"","\\sphericalangle",!0);j(R,ee,ce,"","\\complement",!0);j(R,ee,ce,"","\\eth",!0);j($e,H,ce,"","");j(R,ee,ce,"","\\diagup");j(R,ee,ce,"","\\diagdown");j(R,ee,ce,"","\\square");j(R,ee,ce,"","\\Box");j(R,ee,ce,"","\\Diamond");j(R,ee,ce,"","\\yen",!0);j($e,ee,ce,"","\\yen",!0);j(R,ee,ce,"","\\checkmark",!0);j($e,ee,ce,"","\\checkmark");j(R,ee,ce,"","\\beth",!0);j(R,ee,ce,"","\\daleth",!0);j(R,ee,ce,"","\\gimel",!0);j(R,ee,ce,"","\\digamma",!0);j(R,ee,ce,"","\\varkappa");j(R,ee,Zs,"","\\@ulcorner",!0);j(R,ee,Fo,"","\\@urcorner",!0);j(R,ee,Zs,"","\\@llcorner",!0);j(R,ee,Fo,"","\\@lrcorner",!0);j(R,ee,ne,"","\\leqq",!0);j(R,ee,ne,"","\\leqslant",!0);j(R,ee,ne,"","\\eqslantless",!0);j(R,ee,ne,"","\\lesssim",!0);j(R,ee,ne,"","\\lessapprox",!0);j(R,ee,ne,"","\\approxeq",!0);j(R,ee,lt,"","\\lessdot");j(R,ee,ne,"","\\lll",!0);j(R,ee,ne,"","\\lessgtr",!0);j(R,ee,ne,"","\\lesseqgtr",!0);j(R,ee,ne,"","\\lesseqqgtr",!0);j(R,ee,ne,"","\\doteqdot");j(R,ee,ne,"","\\risingdotseq",!0);j(R,ee,ne,"","\\fallingdotseq",!0);j(R,ee,ne,"","\\backsim",!0);j(R,ee,ne,"","\\backsimeq",!0);j(R,ee,ne,"","\\subseteqq",!0);j(R,ee,ne,"","\\Subset",!0);j(R,ee,ne,"","\\sqsubset",!0);j(R,ee,ne,"","\\preccurlyeq",!0);j(R,ee,ne,"","\\curlyeqprec",!0);j(R,ee,ne,"","\\precsim",!0);j(R,ee,ne,"","\\precapprox",!0);j(R,ee,ne,"","\\vartriangleleft");j(R,ee,ne,"","\\trianglelefteq");j(R,ee,ne,"","\\vDash",!0);j(R,ee,ne,"","\\Vvdash",!0);j(R,ee,ne,"","\\smallsmile");j(R,ee,ne,"","\\smallfrown");j(R,ee,ne,"","\\bumpeq",!0);j(R,ee,ne,"","\\Bumpeq",!0);j(R,ee,ne,"","\\geqq",!0);j(R,ee,ne,"","\\geqslant",!0);j(R,ee,ne,"","\\eqslantgtr",!0);j(R,ee,ne,"","\\gtrsim",!0);j(R,ee,ne,"","\\gtrapprox",!0);j(R,ee,lt,"","\\gtrdot");j(R,ee,ne,"","\\ggg",!0);j(R,ee,ne,"","\\gtrless",!0);j(R,ee,ne,"","\\gtreqless",!0);j(R,ee,ne,"","\\gtreqqless",!0);j(R,ee,ne,"","\\eqcirc",!0);j(R,ee,ne,"","\\circeq",!0);j(R,ee,ne,"","\\triangleq",!0);j(R,ee,ne,"","\\thicksim");j(R,ee,ne,"","\\thickapprox");j(R,ee,ne,"","\\supseteqq",!0);j(R,ee,ne,"","\\Supset",!0);j(R,ee,ne,"","\\sqsupset",!0);j(R,ee,ne,"","\\succcurlyeq",!0);j(R,ee,ne,"","\\curlyeqsucc",!0);j(R,ee,ne,"","\\succsim",!0);j(R,ee,ne,"","\\succapprox",!0);j(R,ee,ne,"","\\vartriangleright");j(R,ee,ne,"","\\trianglerighteq");j(R,ee,ne,"","\\Vdash",!0);j(R,ee,ne,"","\\shortmid");j(R,ee,ne,"","\\shortparallel");j(R,ee,ne,"","\\between",!0);j(R,ee,ne,"","\\pitchfork",!0);j(R,ee,ne,"","\\varpropto");j(R,ee,ne,"","\\blacktriangleleft");j(R,ee,ne,"","\\therefore",!0);j(R,ee,ne,"","\\backepsilon");j(R,ee,ne,"","\\blacktriangleright");j(R,ee,ne,"","\\because",!0);j(R,ee,ne,"","\\llless");j(R,ee,ne,"","\\gggtr");j(R,ee,lt,"","\\lhd");j(R,ee,lt,"","\\rhd");j(R,ee,ne,"","\\eqsim",!0);j(R,H,ne,"","\\Join");j(R,ee,ne,"","\\Doteq",!0);j(R,ee,lt,"","\\dotplus",!0);j(R,ee,lt,"","\\smallsetminus");j(R,ee,lt,"","\\Cap",!0);j(R,ee,lt,"","\\Cup",!0);j(R,ee,lt,"","\\doublebarwedge",!0);j(R,ee,lt,"","\\boxminus",!0);j(R,ee,lt,"","\\boxplus",!0);j(R,ee,lt,"","\\divideontimes",!0);j(R,ee,lt,"","\\ltimes",!0);j(R,ee,lt,"","\\rtimes",!0);j(R,ee,lt,"","\\leftthreetimes",!0);j(R,ee,lt,"","\\rightthreetimes",!0);j(R,ee,lt,"","\\curlywedge",!0);j(R,ee,lt,"","\\curlyvee",!0);j(R,ee,lt,"","\\circleddash",!0);j(R,ee,lt,"","\\circledast",!0);j(R,ee,lt,"","\\centerdot");j(R,ee,lt,"","\\intercal",!0);j(R,ee,lt,"","\\doublecap");j(R,ee,lt,"","\\doublecup");j(R,ee,lt,"","\\boxtimes",!0);j(R,ee,ne,"","\\dashrightarrow",!0);j(R,ee,ne,"","\\dashleftarrow",!0);j(R,ee,ne,"","\\leftleftarrows",!0);j(R,ee,ne,"","\\leftrightarrows",!0);j(R,ee,ne,"","\\Lleftarrow",!0);j(R,ee,ne,"","\\twoheadleftarrow",!0);j(R,ee,ne,"","\\leftarrowtail",!0);j(R,ee,ne,"","\\looparrowleft",!0);j(R,ee,ne,"","\\leftrightharpoons",!0);j(R,ee,ne,"","\\curvearrowleft",!0);j(R,ee,ne,"","\\circlearrowleft",!0);j(R,ee,ne,"","\\Lsh",!0);j(R,ee,ne,"","\\upuparrows",!0);j(R,ee,ne,"","\\upharpoonleft",!0);j(R,ee,ne,"","\\downharpoonleft",!0);j(R,H,ne,"","\\origof",!0);j(R,H,ne,"","\\imageof",!0);j(R,ee,ne,"","\\multimap",!0);j(R,ee,ne,"","\\leftrightsquigarrow",!0);j(R,ee,ne,"","\\rightrightarrows",!0);j(R,ee,ne,"","\\rightleftarrows",!0);j(R,ee,ne,"","\\twoheadrightarrow",!0);j(R,ee,ne,"","\\rightarrowtail",!0);j(R,ee,ne,"","\\looparrowright",!0);j(R,ee,ne,"","\\curvearrowright",!0);j(R,ee,ne,"","\\circlearrowright",!0);j(R,ee,ne,"","\\Rsh",!0);j(R,ee,ne,"","\\downdownarrows",!0);j(R,ee,ne,"","\\upharpoonright",!0);j(R,ee,ne,"","\\downharpoonright",!0);j(R,ee,ne,"","\\rightsquigarrow",!0);j(R,ee,ne,"","\\leadsto");j(R,ee,ne,"","\\Rrightarrow",!0);j(R,ee,ne,"","\\restriction");j(R,H,ce,"","`");j(R,H,ce,"$","\\$");j($e,H,ce,"$","\\$");j($e,H,ce,"$","\\textdollar");j(R,H,ce,"%","\\%");j($e,H,ce,"%","\\%");j(R,H,ce,"_","\\_");j($e,H,ce,"_","\\_");j($e,H,ce,"_","\\textunderscore");j(R,H,ce,"","\\angle",!0);j(R,H,ce,"","\\infty",!0);j(R,H,ce,"","\\prime");j(R,H,ce,"","\\triangle");j(R,H,ce,"","\\Gamma",!0);j(R,H,ce,"","\\Delta",!0);j(R,H,ce,"","\\Theta",!0);j(R,H,ce,"","\\Lambda",!0);j(R,H,ce,"","\\Xi",!0);j(R,H,ce,"","\\Pi",!0);j(R,H,ce,"","\\Sigma",!0);j(R,H,ce,"","\\Upsilon",!0);j(R,H,ce,"","\\Phi",!0);j(R,H,ce,"","\\Psi",!0);j(R,H,ce,"","\\Omega",!0);j(R,H,ce,"A","");j(R,H,ce,"B","");j(R,H,ce,"E","");j(R,H,ce,"Z","");j(R,H,ce,"H","");j(R,H,ce,"I","");j(R,H,ce,"K","");j(R,H,ce,"M","");j(R,H,ce,"N","");j(R,H,ce,"O","");j(R,H,ce,"P","");j(R,H,ce,"T","");j(R,H,ce,"X","");j(R,H,ce,"","\\neg",!0);j(R,H,ce,"","\\lnot");j(R,H,ce,"","\\top");j(R,H,ce,"","\\bot");j(R,H,ce,"","\\emptyset");j(R,ee,ce,"","\\varnothing");j(R,H,Dt,"","\\alpha",!0);j(R,H,Dt,"","\\beta",!0);j(R,H,Dt,"","\\gamma",!0);j(R,H,Dt,"","\\delta",!0);j(R,H,Dt,"","\\epsilon",!0);j(R,H,Dt,"","\\zeta",!0);j(R,H,Dt,"","\\eta",!0);j(R,H,Dt,"","\\theta",!0);j(R,H,Dt,"","\\iota",!0);j(R,H,Dt,"","\\kappa",!0);j(R,H,Dt,"","\\lambda",!0);j(R,H,Dt,"","\\mu",!0);j(R,H,Dt,"","\\nu",!0);j(R,H,Dt,"","\\xi",!0);j(R,H,Dt,"","\\omicron",!0);j(R,H,Dt,"","\\pi",!0);j(R,H,Dt,"","\\rho",!0);j(R,H,Dt,"","\\sigma",!0);j(R,H,Dt,"","\\tau",!0);j(R,H,Dt,"","\\upsilon",!0);j(R,H,Dt,"","\\phi",!0);j(R,H,Dt,"","\\chi",!0);j(R,H,Dt,"","\\psi",!0);j(R,H,Dt,"","\\omega",!0);j(R,H,Dt,"","\\varepsilon",!0);j(R,H,Dt,"","\\vartheta",!0);j(R,H,Dt,"","\\varpi",!0);j(R,H,Dt,"","\\varrho",!0);j(R,H,Dt,"","\\varsigma",!0);j(R,H,Dt,"","\\varphi",!0);j(R,H,lt,"","*",!0);j(R,H,lt,"+","+");j(R,H,lt,"","-",!0);j(R,H,lt,"","\\cdot",!0);j(R,H,lt,"","\\circ",!0);j(R,H,lt,"","\\div",!0);j(R,H,lt,"","\\pm",!0);j(R,H,lt,"","\\times",!0);j(R,H,lt,"","\\cap",!0);j(R,H,lt,"","\\cup",!0);j(R,H,lt,"","\\setminus",!0);j(R,H,lt,"","\\land");j(R,H,lt,"","\\lor");j(R,H,lt,"","\\wedge",!0);j(R,H,lt,"","\\vee",!0);j(R,H,ce,"","\\surd");j(R,H,Zs,"","\\langle",!0);j(R,H,Zs,"","\\lvert");j(R,H,Zs,"","\\lVert");j(R,H,Fo,"?","?");j(R,H,Fo,"!","!");j(R,H,Fo,"","\\rangle",!0);j(R,H,Fo,"","\\rvert");j(R,H,Fo,"","\\rVert");j(R,H,ne,"=","=");j(R,H,ne,":",":");j(R,H,ne,"","\\approx",!0);j(R,H,ne,"","\\cong",!0);j(R,H,ne,"","\\ge");j(R,H,ne,"","\\geq",!0);j(R,H,ne,"","\\gets");j(R,H,ne,">","\\gt",!0);j(R,H,ne,"","\\in",!0);j(R,H,ne,"","\\@not");j(R,H,ne,"","\\subset",!0);j(R,H,ne,"","\\supset",!0);j(R,H,ne,"","\\subseteq",!0);j(R,H,ne,"","\\supseteq",!0);j(R,ee,ne,"","\\nsubseteq",!0);j(R,ee,ne,"","\\nsupseteq",!0);j(R,H,ne,"","\\models");j(R,H,ne,"","\\leftarrow",!0);j(R,H,ne,"","\\le");j(R,H,ne,"","\\leq",!0);j(R,H,ne,"<","\\lt",!0);j(R,H,ne,"","\\rightarrow",!0);j(R,H,ne,"","\\to");j(R,ee,ne,"","\\ngeq",!0);j(R,ee,ne,"","\\nleq",!0);j(R,H,Pd,"","\\ ");j(R,H,Pd,"","\\space");j(R,H,Pd,"","\\nobreakspace");j($e,H,Pd,"","\\ ");j($e,H,Pd,""," ");j($e,H,Pd,"","\\space");j($e,H,Pd,"","\\nobreakspace");j(R,H,Pd,null,"\\nobreak");j(R,H,Pd,null,"\\allowbreak");j(R,H,g7,",",",");j(R,H,g7,";",";");j(R,ee,lt,"","\\barwedge",!0);j(R,ee,lt,"","\\veebar",!0);j(R,H,lt,"","\\odot",!0);j(R,H,lt,"","\\oplus",!0);j(R,H,lt,"","\\otimes",!0);j(R,H,ce,"","\\partial",!0);j(R,H,lt,"","\\oslash",!0);j(R,ee,lt,"","\\circledcirc",!0);j(R,ee,lt,"","\\boxdot",!0);j(R,H,lt,"","\\bigtriangleup");j(R,H,lt,"","\\bigtriangledown");j(R,H,lt,"","\\dagger");j(R,H,lt,"","\\diamond");j(R,H,lt,"","\\star");j(R,H,lt,"","\\triangleleft");j(R,H,lt,"","\\triangleright");j(R,H,Zs,"{","\\{");j($e,H,ce,"{","\\{");j($e,H,ce,"{","\\textbraceleft");j(R,H,Fo,"}","\\}");j($e,H,ce,"}","\\}");j($e,H,ce,"}","\\textbraceright");j(R,H,Zs,"{","\\lbrace");j(R,H,Fo,"}","\\rbrace");j(R,H,Zs,"[","\\lbrack",!0);j($e,H,ce,"[","\\lbrack",!0);j(R,H,Fo,"]","\\rbrack",!0);j($e,H,ce,"]","\\rbrack",!0);j(R,H,Zs,"(","\\lparen",!0);j(R,H,Fo,")","\\rparen",!0);j($e,H,ce,"<","\\textless",!0);j($e,H,ce,">","\\textgreater",!0);j(R,H,Zs,"","\\lfloor",!0);j(R,H,Fo,"","\\rfloor",!0);j(R,H,Zs,"","\\lceil",!0);j(R,H,Fo,"","\\rceil",!0);j(R,H,ce,"\\","\\backslash");j(R,H,ce,"","|");j(R,H,ce,"","\\vert");j($e,H,ce,"|","\\textbar",!0);j(R,H,ce,"","\\|");j(R,H,ce,"","\\Vert");j($e,H,ce,"","\\textbardbl");j($e,H,ce,"~","\\textasciitilde");j($e,H,ce,"\\","\\textbackslash");j($e,H,ce,"^","\\textasciicircum");j(R,H,ne,"","\\uparrow",!0);j(R,H,ne,"","\\Uparrow",!0);j(R,H,ne,"","\\downarrow",!0);j(R,H,ne,"","\\Downarrow",!0);j(R,H,ne,"","\\updownarrow",!0);j(R,H,ne,"","\\Updownarrow",!0);j(R,H,Gr,"","\\coprod");j(R,H,Gr,"","\\bigvee");j(R,H,Gr,"","\\bigwedge");j(R,H,Gr,"","\\biguplus");j(R,H,Gr,"","\\bigcap");j(R,H,Gr,"","\\bigcup");j(R,H,Gr,"","\\int");j(R,H,Gr,"","\\intop");j(R,H,Gr,"","\\iint");j(R,H,Gr,"","\\iiint");j(R,H,Gr,"","\\prod");j(R,H,Gr,"","\\sum");j(R,H,Gr,"","\\bigotimes");j(R,H,Gr,"","\\bigoplus");j(R,H,Gr,"","\\bigodot");j(R,H,Gr,"","\\oint");j(R,H,Gr,"","\\oiint");j(R,H,Gr,"","\\oiiint");j(R,H,Gr,"","\\bigsqcup");j(R,H,Gr,"","\\smallint");j($e,H,p1,"","\\textellipsis");j(R,H,p1,"","\\mathellipsis");j($e,H,p1,"","\\ldots",!0);j(R,H,p1,"","\\ldots",!0);j(R,H,p1,"","\\@cdots",!0);j(R,H,p1,"","\\ddots",!0);j(R,H,ce,"","\\varvdots");j($e,H,ce,"","\\varvdots");j(R,H,gr,"","\\acute");j(R,H,gr,"","\\grave");j(R,H,gr,"","\\ddot");j(R,H,gr,"~","\\tilde");j(R,H,gr,"","\\bar");j(R,H,gr,"","\\breve");j(R,H,gr,"","\\check");j(R,H,gr,"^","\\hat");j(R,H,gr,"","\\vec");j(R,H,gr,"","\\dot");j(R,H,gr,"","\\mathring");j(R,H,Dt,"","\\@imath");j(R,H,Dt,"","\\@jmath");j(R,H,ce,"","");j(R,H,ce,"","");j($e,H,ce,"","\\i",!0);j($e,H,ce,"","\\j",!0);j($e,H,ce,"","\\ss",!0);j($e,H,ce,"","\\ae",!0);j($e,H,ce,"","\\oe",!0);j($e,H,ce,"","\\o",!0);j($e,H,ce,"","\\AE",!0);j($e,H,ce,"","\\OE",!0);j($e,H,ce,"","\\O",!0);j($e,H,gr,"","\\'");j($e,H,gr,"","\\`");j($e,H,gr,"","\\^");j($e,H,gr,"","\\~");j($e,H,gr,"","\\=");j($e,H,gr,"","\\u");j($e,H,gr,"","\\.");j($e,H,gr,"","\\c");j($e,H,gr,"","\\r");j($e,H,gr,"","\\v");j($e,H,gr,"",'\\"');j($e,H,gr,"","\\H");j($e,H,gr,"","\\textcircled");var ome={"--":!0,"---":!0,"``":!0,"''":!0};j($e,H,ce,"","--",!0);j($e,H,ce,"","\\textendash");j($e,H,ce,"","---",!0);j($e,H,ce,"","\\textemdash");j($e,H,ce,"","`",!0);j($e,H,ce,"","\\textquoteleft");j($e,H,ce,"","'",!0);j($e,H,ce,"","\\textquoteright");j($e,H,ce,"","``",!0);j($e,H,ce,"","\\textquotedblleft");j($e,H,ce,"","''",!0);j($e,H,ce,"","\\textquotedblright");j(R,H,ce,"","\\degree",!0);j($e,H,ce,"","\\degree");j($e,H,ce,"","\\textdegree",!0);j(R,H,ce,"","\\pounds");j(R,H,ce,"","\\mathsterling",!0);j($e,H,ce,"","\\pounds");j($e,H,ce,"","\\textsterling",!0);j(R,ee,ce,"","\\maltese");j($e,ee,ce,"","\\maltese");var pJ='0123456789/@."';for(var QP=0;QP<pJ.length;QP++){var mJ=pJ.charAt(QP);j(R,H,ce,mJ,mJ)}var gJ='0123456789!@*()-=+";:?/.,';for(var e9=0;e9<gJ.length;e9++){var yJ=gJ.charAt(e9);j($e,H,ce,yJ,yJ)}var WC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var t9=0;t9<WC.length;t9++){var Qk=WC.charAt(t9);j(R,H,Dt,Qk,Qk),j($e,H,ce,Qk,Qk)}j(R,ee,ce,"C","");j($e,ee,ce,"C","");j(R,ee,ce,"H","");j($e,ee,ce,"H","");j(R,ee,ce,"N","");j($e,ee,ce,"N","");j(R,ee,ce,"P","");j($e,ee,ce,"P","");j(R,ee,ce,"Q","");j($e,ee,ce,"Q","");j(R,ee,ce,"R","");j($e,ee,ce,"R","");j(R,ee,ce,"Z","");j($e,ee,ce,"Z","");j(R,H,Dt,"h","");j($e,H,Dt,"h","");var Lt="";for(var po=0;po<WC.length;po++){var Ar=WC.charAt(po);Lt=String.fromCharCode(55349,56320+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56372+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56424+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56580+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56684+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56736+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56788+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56840+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56944+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),po<26&&(Lt=String.fromCharCode(55349,56632+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt),Lt=String.fromCharCode(55349,56476+po),j(R,H,Dt,Ar,Lt),j($e,H,ce,Ar,Lt))}Lt="";j(R,H,Dt,"k",Lt);j($e,H,ce,"k",Lt);for(var Uf=0;Uf<10;Uf++){var sh=Uf.toString();Lt=String.fromCharCode(55349,57294+Uf),j(R,H,Dt,sh,Lt),j($e,H,ce,sh,Lt),Lt=String.fromCharCode(55349,57314+Uf),j(R,H,Dt,sh,Lt),j($e,H,ce,sh,Lt),Lt=String.fromCharCode(55349,57324+Uf),j(R,H,Dt,sh,Lt),j($e,H,ce,sh,Lt),Lt=String.fromCharCode(55349,57334+Uf),j(R,H,Dt,sh,Lt),j($e,H,ce,sh,Lt)}var QN="";for(var n9=0;n9<QN.length;n9++){var e4=QN.charAt(n9);j(R,H,Dt,e4,e4),j($e,H,ce,e4,e4)}var t4=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],vJ=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],x0t=function(e,r){var i=e.charCodeAt(0),o=e.charCodeAt(1),s=(i-55296)*1024+(o-56320)+65536,a=r==="math"?0:1;if(119808<=s&&s<120484){var l=Math.floor((s-119808)/26);return[t4[l][2],t4[l][a]]}else if(120782<=s&&s<=120831){var c=Math.floor((s-120782)/10);return[vJ[c][2],vJ[c][a]]}else{if(s===120485||s===120486)return[t4[0][2],t4[0][a]];if(120486<s&&s<120782)return["",""];throw new We("Unsupported character: "+e)}},y7=function(e,r,i){return Xn[i][e]&&Xn[i][e].replace&&(e=Xn[i][e].replace),{value:e,metrics:GL(e,r,i)}},tl=function(e,r,i,o,s){var a=y7(e,r,i),l=a.metrics;e=a.value;var c;if(l){var u=l.italic;(i==="text"||o&&o.font==="mathit")&&(u=0),c=new Oa(e,l.height,l.depth,u,l.skew,l.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+i+"'")),c=new Oa(e,0,0,0,0,0,s);if(o){c.maxFontSize=o.sizeMultiplier,o.style.isTight()&&c.classes.push("mtight");var d=o.getColor();d&&(c.style.color=d)}return c},b0t=function(e,r,i,o){return o===void 0&&(o=[]),i.font==="boldsymbol"&&y7(e,"Main-Bold",r).metrics?tl(e,"Main-Bold",r,i,o.concat(["mathbf"])):e==="\\"||Xn[r][e].font==="main"?tl(e,"Main-Regular",r,i,o):tl(e,"AMS-Regular",r,i,o.concat(["amsrm"]))},w0t=function(e,r,i,o,s){return s!=="textord"&&y7(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},k0t=function(e,r,i){var o=e.mode,s=e.text,a=["mord"],l=o==="math"||o==="text"&&r.font,c=l?r.font:r.fontFamily,u="",d="";if(s.charCodeAt(0)===55349&&([u,d]=x0t(s,o)),u.length>0)return tl(s,u,o,r,a.concat(d));if(c){var h,f;if(c==="boldsymbol"){var m=w0t(s,o,r,a,i);h=m.fontName,f=[m.fontClass]}else l?(h=lme[c].fontName,f=[c]):(h=n4(c,r.fontWeight,r.fontShape),f=[c,r.fontWeight,r.fontShape]);if(y7(s,h,o).metrics)return tl(s,h,o,r,a.concat(f));if(ome.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var v=[],x=0;x<s.length;x++)v.push(tl(s[x],h,o,r,a.concat(f)));return ame(v)}}if(i==="mathord")return tl(s,"Math-Italic",o,r,a.concat(["mathnormal"]));if(i==="textord"){var b=Xn[o][s]&&Xn[o][s].font;if(b==="ams"){var w=n4("amsrm",r.fontWeight,r.fontShape);return tl(s,w,o,r,a.concat("amsrm",r.fontWeight,r.fontShape))}else if(b==="main"||!b){var S=n4("textrm",r.fontWeight,r.fontShape);return tl(s,S,o,r,a.concat(r.fontWeight,r.fontShape))}else{var _=n4(b,r.fontWeight,r.fontShape);return tl(s,_,o,r,a.concat(_,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},S0t=(n,e)=>{if(nf(n.classes)!==nf(e.classes)||n.skew!==e.skew||n.maxFontSize!==e.maxFontSize)return!1;if(n.classes.length===1){var r=n.classes[0];if(r==="mbin"||r==="mord")return!1}for(var i in n.style)if(n.style.hasOwnProperty(i)&&n.style[i]!==e.style[i])return!1;for(var o in e.style)if(e.style.hasOwnProperty(o)&&n.style[o]!==e.style[o])return!1;return!0},C0t=n=>{for(var e=0;e<n.length-1;e++){var r=n[e],i=n[e+1];r instanceof Oa&&i instanceof Oa&&S0t(r,i)&&(r.text+=i.text,r.height=Math.max(r.height,i.height),r.depth=Math.max(r.depth,i.depth),r.italic=i.italic,n.splice(e+1,1),e--)}return n},ZL=function(e){for(var r=0,i=0,o=0,s=0;s<e.children.length;s++){var a=e.children[s];a.height>r&&(r=a.height),a.depth>i&&(i=a.depth),a.maxFontSize>o&&(o=a.maxFontSize)}e.height=r,e.depth=i,e.maxFontSize=o},Qo=function(e,r,i,o){var s=new Dw(e,r,i,o);return ZL(s),s},sme=(n,e,r,i)=>new Dw(n,e,r,i),_0t=function(e,r,i){var o=Qo([e],[],r);return o.height=Math.max(i||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),o.style.borderBottomWidth=Je(o.height),o.maxFontSize=1,o},A0t=function(e,r,i,o){var s=new YL(e,r,i,o);return ZL(s),s},ame=function(e){var r=new Ow(e);return ZL(r),r},T0t=function(e,r){return e instanceof Ow?Qo([],[e],r):e},P0t=function(e){if(e.positionType==="individualShift"){for(var r=e.children,i=[r[0]],o=-r[0].shift-r[0].elem.depth,s=o,a=1;a<r.length;a++){var l=-r[a].shift-s-r[a].elem.depth,c=l-(r[a-1].elem.height+r[a-1].elem.depth);s=s+l,i.push({type:"kern",size:c}),i.push(r[a])}return{children:i,depth:o}}var u;if(e.positionType==="top"){for(var d=e.positionData,h=0;h<e.children.length;h++){var f=e.children[h];d-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}u=d}else if(e.positionType==="bottom")u=-e.positionData;else{var m=e.children[0];if(m.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")u=-m.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")u=-m.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:u}},M0t=function(e,r){for(var{children:i,depth:o}=P0t(e),s=0,a=0;a<i.length;a++){var l=i[a];if(l.type==="elem"){var c=l.elem;s=Math.max(s,c.maxFontSize,c.height)}}s+=2;var u=Qo(["pstrut"],[]);u.style.height=Je(s);for(var d=[],h=o,f=o,m=o,v=0;v<i.length;v++){var x=i[v];if(x.type==="kern")m+=x.size;else{var b=x.elem,w=x.wrapperClasses||[],S=x.wrapperStyle||{},_=Qo(w,[u,b],void 0,S);_.style.top=Je(-s-m-b.depth),x.marginLeft&&(_.style.marginLeft=x.marginLeft),x.marginRight&&(_.style.marginRight=x.marginRight),d.push(_),m+=b.height+b.depth}h=Math.min(h,m),f=Math.max(f,m)}var P=Qo(["vlist"],d);P.style.height=Je(f);var A;if(h<0){var T=Qo([],[]),E=Qo(["vlist"],[T]);E.style.height=Je(-h);var L=Qo(["vlist-s"],[new Oa("")]);A=[Qo(["vlist-r"],[P,L]),Qo(["vlist-r"],[E])]}else A=[Qo(["vlist-r"],[P])];var $=Qo(["vlist-t"],A);return A.length===2&&$.classes.push("vlist-t2"),$.height=f,$.depth=-h,$},E0t=(n,e)=>{var r=Qo(["mspace"],[],e),i=Cr(n,e);return r.style.marginRight=Je(i),r},n4=function(e,r,i){var o="";switch(e){case"amsrm":o="AMS";break;case"textrm":o="Main";break;case"textsf":o="SansSerif";break;case"texttt":o="Typewriter";break;default:o=e}var s;return r==="textbf"&&i==="textit"?s="BoldItalic":r==="textbf"?s="Bold":r==="textit"?s="Italic":s="Regular",o+"-"+s},lme={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},cme={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},N0t=function(e,r){var[i,o,s]=cme[e],a=new rf(i),l=new ud([a],{width:Je(o),height:Je(s),style:"width:"+Je(o),viewBox:"0 0 "+1e3*o+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),c=sme(["overlay"],[l],r);return c.height=s,c.style.height=Je(s),c.style.width=Je(o),c},xe={fontMap:lme,makeSymbol:tl,mathsym:b0t,makeSpan:Qo,makeSvgSpan:sme,makeLineSpan:_0t,makeAnchor:A0t,makeFragment:ame,wrapFragment:T0t,makeVList:M0t,makeOrd:k0t,makeGlue:E0t,staticSvg:N0t,svgData:cme,tryCombineChars:C0t},kr={number:3,unit:"mu"},Kf={number:4,unit:"mu"},fu={number:5,unit:"mu"},j0t={mord:{mop:kr,mbin:Kf,mrel:fu,minner:kr},mop:{mord:kr,mop:kr,mrel:fu,minner:kr},mbin:{mord:Kf,mop:Kf,mopen:Kf,minner:Kf},mrel:{mord:fu,mop:fu,mopen:fu,minner:fu},mopen:{},mclose:{mop:kr,mbin:Kf,mrel:fu,minner:kr},mpunct:{mord:kr,mop:kr,mrel:fu,mopen:kr,mclose:kr,mpunct:kr,minner:kr},minner:{mord:kr,mop:kr,mbin:Kf,mrel:fu,mopen:kr,mpunct:kr,minner:kr}},O0t={mord:{mop:kr},mop:{mord:kr,mop:kr},mbin:{},mrel:{},mopen:{},mclose:{mop:kr},mpunct:{},minner:{mop:kr}},ume={},UC={},KC={};function tt(n){for(var{type:e,names:r,props:i,handler:o,htmlBuilder:s,mathmlBuilder:a}=n,l={type:e,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:o},c=0;c<r.length;++c)ume[r[c]]=l;e&&(s&&(UC[e]=s),a&&(KC[e]=a))}function Mm(n){var{type:e,htmlBuilder:r,mathmlBuilder:i}=n;tt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:i})}var GC=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Dr=function(e){return e.type==="ordgroup"?e.body:[e]},dd=xe.makeSpan,D0t=["leftmost","mbin","mopen","mrel","mop","mpunct"],I0t=["rightmost","mrel","mclose","mpunct"],R0t={display:It.DISPLAY,text:It.TEXT,script:It.SCRIPT,scriptscript:It.SCRIPTSCRIPT},L0t={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ni=function(e,r,i,o){o===void 0&&(o=[null,null]);for(var s=[],a=0;a<e.length;a++){var l=mn(e[a],r);if(l instanceof Ow){var c=l.children;s.push(...c)}else s.push(l)}if(xe.tryCombineChars(s),!i)return s;var u=r;if(e.length===1){var d=e[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(R0t[d.style]))}var h=dd([o[0]||"leftmost"],[],r),f=dd([o[1]||"rightmost"],[],r),m=i==="root";return xJ(s,(v,x)=>{var b=x.classes[0],w=v.classes[0];b==="mbin"&&I0t.includes(w)?x.classes[0]="mord":w==="mbin"&&D0t.includes(b)&&(v.classes[0]="mord")},{node:h},f,m),xJ(s,(v,x)=>{var b=ej(x),w=ej(v),S=b&&w?v.hasClass("mtight")?O0t[b][w]:j0t[b][w]:null;if(S)return xe.makeGlue(S,u)},{node:h},f,m),s},xJ=function n(e,r,i,o,s){o&&e.push(o);for(var a=0;a<e.length;a++){var l=e[a],c=dme(l);if(c){n(c.children,r,i,null,s);continue}var u=!l.hasClass("mspace");if(u){var d=r(l,i.node);d&&(i.insertAfter?i.insertAfter(d):(e.unshift(d),a++))}u?i.node=l:s&&l.hasClass("newline")&&(i.node=dd(["leftmost"])),i.insertAfter=(h=>f=>{e.splice(h+1,0,f),a++})(a)}o&&e.pop()},dme=function(e){return e instanceof Ow||e instanceof YL||e instanceof Dw&&e.hasClass("enclosing")?e:null},z0t=function n(e,r){var i=dme(e);if(i){var o=i.children;if(o.length){if(r==="right")return n(o[o.length-1],"right");if(r==="left")return n(o[0],"left")}}return e},ej=function(e,r){return e?(r&&(e=z0t(e,r)),L0t[e.classes[0]]||null):null},Ab=function(e,r){var i=["nulldelimiter"].concat(e.baseSizingClasses());return dd(r.concat(i))},mn=function(e,r,i){if(!e)return dd();if(UC[e.type]){var o=UC[e.type](e,r);if(i&&r.size!==i.size){o=dd(r.sizingClasses(i),[o],r);var s=r.sizeMultiplier/i.sizeMultiplier;o.height*=s,o.depth*=s}return o}else throw new We("Got group of unknown type: '"+e.type+"'")};function r4(n,e){var r=dd(["base"],n,e),i=dd(["strut"]);return i.style.height=Je(r.height+r.depth),r.depth&&(i.style.verticalAlign=Je(-r.depth)),r.children.unshift(i),r}function tj(n,e){var r=null;n.length===1&&n[0].type==="tag"&&(r=n[0].tag,n=n[0].body);var i=ni(n,e,"root"),o;i.length===2&&i[1].hasClass("tag")&&(o=i.pop());for(var s=[],a=[],l=0;l<i.length;l++)if(a.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var c=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,a.push(i[l]),i[l].hasClass("nobreak")&&(c=!0);c||(s.push(r4(a,e)),a=[])}else i[l].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(r4(a,e)),a=[]),s.push(i[l]));a.length>0&&s.push(r4(a,e));var u;r?(u=r4(ni(r,e,!0)),u.classes=["tag"],s.push(u)):o&&s.push(o);var d=dd(["katex-html"],s);if(d.setAttribute("aria-hidden","true"),u){var h=u.children[0];h.style.height=Je(d.height+d.depth),d.depth&&(h.style.verticalAlign=Je(-d.depth))}return d}function hme(n){return new Ow(n)}class zs{constructor(e,r,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=i||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=nf(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof wc&&this.children[i+1]instanceof wc){for(var o=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof wc;)o+=this.children[++i].toText();e.appendChild(new wc(o).toNode())}else e.appendChild(this.children[i].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=yn.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+yn.escape(nf(this.classes))+'"'),e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class wc{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return yn.escape(this.toText())}toText(){return this.text}}class F0t{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Je(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Je(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ve={MathNode:zs,TextNode:wc,SpaceNode:F0t,newDocumentFragment:hme},Da=function(e,r,i){return Xn[r][e]&&Xn[r][e].replace&&e.charCodeAt(0)!==55349&&!(ome.hasOwnProperty(e)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(e=Xn[r][e].replace),new Ve.TextNode(e)},XL=function(e){return e.length===1?e[0]:new Ve.MathNode("mrow",e)},JL=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var i=r.font;if(!i||i==="mathnormal")return null;var o=e.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var s=e.text;if(["\\imath","\\jmath"].includes(s))return null;Xn[o][s]&&Xn[o][s].replace&&(s=Xn[o][s].replace);var a=xe.fontMap[i].fontName;return GL(s,a,o)?xe.fontMap[i].variant:null};function r9(n){if(!n)return!1;if(n.type==="mi"&&n.children.length===1){var e=n.children[0];return e instanceof wc&&e.text==="."}else if(n.type==="mo"&&n.children.length===1&&n.getAttribute("separator")==="true"&&n.getAttribute("lspace")==="0em"&&n.getAttribute("rspace")==="0em"){var r=n.children[0];return r instanceof wc&&r.text===","}else return!1}var vs=function(e,r,i){if(e.length===1){var o=qn(e[0],r);return i&&o instanceof zs&&o.type==="mo"&&(o.setAttribute("lspace","0em"),o.setAttribute("rspace","0em")),[o]}for(var s=[],a,l=0;l<e.length;l++){var c=qn(e[l],r);if(c instanceof zs&&a instanceof zs){if(c.type==="mtext"&&a.type==="mtext"&&c.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...c.children);continue}else if(c.type==="mn"&&a.type==="mn"){a.children.push(...c.children);continue}else if(r9(c)&&a.type==="mn"){a.children.push(...c.children);continue}else if(c.type==="mn"&&r9(a))c.children=[...a.children,...c.children],s.pop();else if((c.type==="msup"||c.type==="msub")&&c.children.length>=1&&(a.type==="mn"||r9(a))){var u=c.children[0];u instanceof zs&&u.type==="mn"&&(u.children=[...a.children,...u.children],s.pop())}else if(a.type==="mi"&&a.children.length===1){var d=a.children[0];if(d instanceof wc&&d.text===""&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var h=c.children[0];h instanceof wc&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),s.pop())}}}s.push(c),a=c}return s},of=function(e,r,i){return XL(vs(e,r,i))},qn=function(e,r){if(!e)return new Ve.MathNode("mrow");if(KC[e.type]){var i=KC[e.type](e,r);return i}else throw new We("Got group of unknown type: '"+e.type+"'")};function bJ(n,e,r,i,o){var s=vs(n,r),a;s.length===1&&s[0]instanceof zs&&["mrow","mtable"].includes(s[0].type)?a=s[0]:a=new Ve.MathNode("mrow",s);var l=new Ve.MathNode("annotation",[new Ve.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var c=new Ve.MathNode("semantics",[a,l]),u=new Ve.MathNode("math",[c]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&u.setAttribute("display","block");var d=o?"katex":"katex-mathml";return xe.makeSpan([d],[u])}var fme=function(e){return new _u({style:e.displayMode?It.DISPLAY:It.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},pme=function(e,r){if(r.displayMode){var i=["katex-display"];r.leqno&&i.push("leqno"),r.fleqn&&i.push("fleqn"),e=xe.makeSpan(i,[e])}return e},$0t=function(e,r,i){var o=fme(i),s;if(i.output==="mathml")return bJ(e,r,o,i.displayMode,!0);if(i.output==="html"){var a=tj(e,o);s=xe.makeSpan(["katex"],[a])}else{var l=bJ(e,r,o,i.displayMode,!1),c=tj(e,o);s=xe.makeSpan(["katex"],[l,c])}return pme(s,i)},B0t=function(e,r,i){var o=fme(i),s=tj(e,o),a=xe.makeSpan(["katex"],[s]);return pme(a,i)},H0t={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},q0t=function(e){var r=new Ve.MathNode("mo",[new Ve.TextNode(H0t[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},V0t={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},W0t=function(e){return e.type==="ordgroup"?e.body.length:1},U0t=function(e,r){function i(){var l=4e5,c=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(c)){var u=e,d=W0t(u.base),h,f,m;if(d>5)c==="widehat"||c==="widecheck"?(h=420,l=2364,m=.42,f=c+"4"):(h=312,l=2340,m=.34,f="tilde4");else{var v=[1,1,2,2,3,3][d];c==="widehat"||c==="widecheck"?(l=[0,1062,2364,2364,2364][v],h=[0,239,300,360,420][v],m=[0,.24,.3,.3,.36,.42][v],f=c+v):(l=[0,600,1033,2339,2340][v],h=[0,260,286,306,312][v],m=[0,.26,.286,.3,.306,.34][v],f="tilde"+v)}var x=new rf(f),b=new ud([x],{width:"100%",height:Je(m),viewBox:"0 0 "+l+" "+h,preserveAspectRatio:"none"});return{span:xe.makeSvgSpan([],[b],r),minWidth:0,height:m}}else{var w=[],S=V0t[c],[_,P,A]=S,T=A/1e3,E=_.length,L,$;if(E===1){var z=S[3];L=["hide-tail"],$=[z]}else if(E===2)L=["halfarrow-left","halfarrow-right"],$=["xMinYMin","xMaxYMin"];else if(E===3)L=["brace-left","brace-center","brace-right"],$=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var B=0;B<E;B++){var D=new rf(_[B]),Y=new ud([D],{width:"400em",height:Je(T),viewBox:"0 0 "+l+" "+A,preserveAspectRatio:$[B]+" slice"}),I=xe.makeSvgSpan([L[B]],[Y],r);if(E===1)return{span:I,minWidth:P,height:T};I.style.height=Je(T),w.push(I)}return{span:xe.makeSpan(["stretchy"],w,r),minWidth:P,height:T}}}var{span:o,minWidth:s,height:a}=i();return o.height=a,o.style.height=Je(a),s>0&&(o.style.minWidth=Je(s)),o},K0t=function(e,r,i,o,s){var a,l=e.height+e.depth+i+o;if(/fbox|color|angl/.test(r)){if(a=xe.makeSpan(["stretchy",r],[],s),r==="fbox"){var c=s.color&&s.getColor();c&&(a.style.borderColor=c)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new JN({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new JN({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new ud(u,{width:"100%",height:Je(l)});a=xe.makeSvgSpan([],[d],s)}return a.height=l,a.style.height=Je(l),a},hd={encloseSpan:K0t,mathMLnode:q0t,svgSpan:U0t};function Ut(n,e){if(!n||n.type!==e)throw new Error("Expected node of type "+e+", but got "+(n?"node of type "+n.type:String(n)));return n}function QL(n){var e=v7(n);if(!e)throw new Error("Expected node of symbol group type, but got "+(n?"node of type "+n.type:String(n)));return e}function v7(n){return n&&(n.type==="atom"||v0t.hasOwnProperty(n.type))?n:null}var ez=(n,e)=>{var r,i,o;n&&n.type==="supsub"?(i=Ut(n.base,"accent"),r=i.base,n.base=r,o=g0t(mn(n,e)),n.base=i):(i=Ut(n,"accent"),r=i.base);var s=mn(r,e.havingCrampedStyle()),a=i.isShifty&&yn.isCharacterBox(r),l=0;if(a){var c=yn.getBaseElem(r),u=mn(c,e.havingCrampedStyle());l=fJ(u).skew}var d=i.label==="\\c",h=d?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),f;if(i.isStretchy)f=hd.svgSpan(i,e),f=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+Je(2*l)+")",marginLeft:Je(2*l)}:void 0}]},e);else{var m,v;i.label==="\\vec"?(m=xe.staticSvg("vec",e),v=xe.svgData.vec[1]):(m=xe.makeOrd({mode:i.mode,text:i.label},e,"textord"),m=fJ(m),m.italic=0,v=m.width,d&&(h+=m.depth)),f=xe.makeSpan(["accent-body"],[m]);var x=i.label==="\\textcircled";x&&(f.classes.push("accent-full"),h=s.height);var b=l;x||(b-=v/2),f.style.left=Je(b),i.label==="\\textcircled"&&(f.style.top=".2em"),f=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:f}]},e)}var w=xe.makeSpan(["mord","accent"],[f],e);return o?(o.children[0]=w,o.height=Math.max(w.height,o.height),o.classes[0]="mord",o):w},mme=(n,e)=>{var r=n.isStretchy?hd.mathMLnode(n.label):new Ve.MathNode("mo",[Da(n.label,n.mode)]),i=new Ve.MathNode("mover",[qn(n.base,e),r]);return i.setAttribute("accent","true"),i},G0t=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(n=>"\\"+n).join("|"));tt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(n,e)=>{var r=GC(e[0]),i=!G0t.test(n.funcName),o=!i||n.funcName==="\\widehat"||n.funcName==="\\widetilde"||n.funcName==="\\widecheck";return{type:"accent",mode:n.parser.mode,label:n.funcName,isStretchy:i,isShifty:o,base:r}},htmlBuilder:ez,mathmlBuilder:mme});tt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(n,e)=>{var r=e[0],i=n.parser.mode;return i==="math"&&(n.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+n.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:n.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:ez,mathmlBuilder:mme});tt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=e[0];return{type:"accentUnder",mode:r.mode,label:i,base:o}},htmlBuilder:(n,e)=>{var r=mn(n.base,e),i=hd.svgSpan(n,e),o=n.label==="\\utilde"?.12:0,s=xe.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:o},{type:"elem",elem:r}]},e);return xe.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(n,e)=>{var r=hd.mathMLnode(n.label),i=new Ve.MathNode("munder",[qn(n.base,e),r]);return i.setAttribute("accentunder","true"),i}});var i4=n=>{var e=new Ve.MathNode("mpadded",n?[n]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};tt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,r){var{parser:i,funcName:o}=n;return{type:"xArrow",mode:i.mode,label:o,body:e[0],below:r[0]}},htmlBuilder(n,e){var r=e.style,i=e.havingStyle(r.sup()),o=xe.wrapFragment(mn(n.body,i,e),e),s=n.label.slice(0,2)==="\\x"?"x":"cd";o.classes.push(s+"-arrow-pad");var a;n.below&&(i=e.havingStyle(r.sub()),a=xe.wrapFragment(mn(n.below,i,e),e),a.classes.push(s+"-arrow-pad"));var l=hd.svgSpan(n,e),c=-e.fontMetrics().axisHeight+.5*l.height,u=-e.fontMetrics().axisHeight-.5*l.height-.111;(o.depth>.25||n.label==="\\xleftequilibrium")&&(u-=o.depth);var d;if(a){var h=-e.fontMetrics().axisHeight+a.height+.5*l.height+.111;d=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:u},{type:"elem",elem:l,shift:c},{type:"elem",elem:a,shift:h}]},e)}else d=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:u},{type:"elem",elem:l,shift:c}]},e);return d.children[0].children[0].children[1].classes.push("svg-align"),xe.makeSpan(["mrel","x-arrow"],[d],e)},mathmlBuilder(n,e){var r=hd.mathMLnode(n.label);r.setAttribute("minsize",n.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(n.body){var o=i4(qn(n.body,e));if(n.below){var s=i4(qn(n.below,e));i=new Ve.MathNode("munderover",[r,s,o])}else i=new Ve.MathNode("mover",[r,o])}else if(n.below){var a=i4(qn(n.below,e));i=new Ve.MathNode("munder",[r,a])}else i=i4(),i=new Ve.MathNode("mover",[r,i]);return i}});var Y0t=xe.makeSpan;function gme(n,e){var r=ni(n.body,e,!0);return Y0t([n.mclass],r,e)}function yme(n,e){var r,i=vs(n.body,e);return n.mclass==="minner"?r=new Ve.MathNode("mpadded",i):n.mclass==="mord"?n.isCharacterBox?(r=i[0],r.type="mi"):r=new Ve.MathNode("mi",i):(n.isCharacterBox?(r=i[0],r.type="mo"):r=new Ve.MathNode("mo",i),n.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):n.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):n.mclass==="mopen"||n.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):n.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}tt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(n,e){var{parser:r,funcName:i}=n,o=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+i.slice(5),body:Dr(o),isCharacterBox:yn.isCharacterBox(o)}},htmlBuilder:gme,mathmlBuilder:yme});var x7=n=>{var e=n.type==="ordgroup"&&n.body.length?n.body[0]:n;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};tt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(n,e){var{parser:r}=n;return{type:"mclass",mode:r.mode,mclass:x7(e[0]),body:Dr(e[1]),isCharacterBox:yn.isCharacterBox(e[1])}}});tt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(n,e){var{parser:r,funcName:i}=n,o=e[1],s=e[0],a;i!=="\\stackrel"?a=x7(o):a="mrel";var l={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:Dr(o)},c={type:"supsub",mode:s.mode,base:l,sup:i==="\\underset"?null:s,sub:i==="\\underset"?s:null};return{type:"mclass",mode:r.mode,mclass:a,body:[c],isCharacterBox:yn.isCharacterBox(c)}},htmlBuilder:gme,mathmlBuilder:yme});tt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:r}=n;return{type:"pmb",mode:r.mode,mclass:x7(e[0]),body:Dr(e[0])}},htmlBuilder(n,e){var r=ni(n.body,e,!0),i=xe.makeSpan([n.mclass],r,e);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(n,e){var r=vs(n.body,e),i=new Ve.MathNode("mstyle",r);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var Z0t={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},wJ=()=>({type:"styling",body:[],mode:"math",style:"display"}),kJ=n=>n.type==="textord"&&n.text==="@",X0t=(n,e)=>(n.type==="mathord"||n.type==="atom")&&n.text===e;function J0t(n,e,r){var i=Z0t[n];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(i,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var o=r.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:i,mode:"math",family:"rel"},a=r.callFunction("\\Big",[s],[]),l=r.callFunction("\\\\cdright",[e[1]],[]),c={type:"ordgroup",mode:"math",body:[o,a,l]};return r.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Q0t(n){var e=[];for(n.gullet.beginGroup(),n.gullet.macros.set("\\cr","\\\\\\relax"),n.gullet.beginGroup();;){e.push(n.parseExpression(!1,"\\\\")),n.gullet.endGroup(),n.gullet.beginGroup();var r=n.fetch().text;if(r==="&"||r==="\\\\")n.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new We("Expected \\\\ or \\cr or \\end",n.nextToken)}for(var i=[],o=[i],s=0;s<e.length;s++){for(var a=e[s],l=wJ(),c=0;c<a.length;c++)if(!kJ(a[c]))l.body.push(a[c]);else{i.push(l),c+=1;var u=QL(a[c]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var h=0;h<2;h++){for(var f=!0,m=c+1;m<a.length;m++){if(X0t(a[m],u)){f=!1,c=m;break}if(kJ(a[m]))throw new We("Missing a "+u+" character to complete a CD arrow.",a[m]);d[h].body.push(a[m])}if(f)throw new We("Missing a "+u+" character to complete a CD arrow.",a[c])}else throw new We('Expected one of "<>AV=|." after @',a[c]);var v=J0t(u,d,n),x={type:"styling",body:[v],mode:"math",style:"display"};i.push(x),l=wJ()}s%2===0?i.push(l):i.shift(),i=[],o.push(i)}n.gullet.endGroup(),n.gullet.endGroup();var b=new Array(o[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:o,arraystretch:1,addJot:!0,rowGaps:[null],cols:b,colSeparationType:"CD",hLinesBeforeRow:new Array(o.length+1).fill([])}}tt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(n,e){var{parser:r,funcName:i}=n;return{type:"cdlabel",mode:r.mode,side:i.slice(4),label:e[0]}},htmlBuilder(n,e){var r=e.havingStyle(e.style.sup()),i=xe.wrapFragment(mn(n.label,r,e),e);return i.classes.push("cd-label-"+n.side),i.style.bottom=Je(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(n,e){var r=new Ve.MathNode("mrow",[qn(n.label,e)]);return r=new Ve.MathNode("mpadded",[r]),r.setAttribute("width","0"),n.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Ve.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});tt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(n,e){var{parser:r}=n;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(n,e){var r=xe.wrapFragment(mn(n.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(n,e){return new Ve.MathNode("mrow",[qn(n.fragment,e)])}});tt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(n,e){for(var{parser:r}=n,i=Ut(e[0],"ordgroup"),o=i.body,s="",a=0;a<o.length;a++){var l=Ut(o[a],"textord");s+=l.text}var c=parseInt(s),u;if(isNaN(c))throw new We("\\@char has non-numeric argument "+s);if(c<0||c>=1114111)throw new We("\\@char with invalid code point "+s);return c<=65535?u=String.fromCharCode(c):(c-=65536,u=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var vme=(n,e)=>{var r=ni(n.body,e.withColor(n.color),!1);return xe.makeFragment(r)},xme=(n,e)=>{var r=vs(n.body,e.withColor(n.color)),i=new Ve.MathNode("mstyle",r);return i.setAttribute("mathcolor",n.color),i};tt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(n,e){var{parser:r}=n,i=Ut(e[0],"color-token").color,o=e[1];return{type:"color",mode:r.mode,color:i,body:Dr(o)}},htmlBuilder:vme,mathmlBuilder:xme});tt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(n,e){var{parser:r,breakOnTokenText:i}=n,o=Ut(e[0],"color-token").color;r.gullet.macros.set("\\current@color",o);var s=r.parseExpression(!0,i);return{type:"color",mode:r.mode,color:o,body:s}},htmlBuilder:vme,mathmlBuilder:xme});tt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(n,e,r){var{parser:i}=n,o=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,s=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:s,size:o&&Ut(o,"size").value}},htmlBuilder(n,e){var r=xe.makeSpan(["mspace"],[],e);return n.newLine&&(r.classes.push("newline"),n.size&&(r.style.marginTop=Je(Cr(n.size,e)))),r},mathmlBuilder(n,e){var r=new Ve.MathNode("mspace");return n.newLine&&(r.setAttribute("linebreak","newline"),n.size&&r.setAttribute("height",Je(Cr(n.size,e)))),r}});var nj={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},bme=n=>{var e=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new We("Expected a control sequence",n);return e},egt=n=>{var e=n.gullet.popToken();return e.text==="="&&(e=n.gullet.popToken(),e.text===" "&&(e=n.gullet.popToken())),e},wme=(n,e,r,i)=>{var o=n.gullet.macros.get(r.text);o==null&&(r.noexpand=!0,o={tokens:[r],numArgs:0,unexpandable:!n.gullet.isExpandable(r.text)}),n.gullet.macros.set(e,o,i)};tt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e,funcName:r}=n;e.consumeSpaces();var i=e.fetch();if(nj[i.text])return(r==="\\global"||r==="\\\\globallong")&&(i.text=nj[i.text]),Ut(e.parseFunction(),"internal");throw new We("Invalid token after macro prefix",i)}});tt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:r}=n,i=e.gullet.popToken(),o=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(o))throw new We("Expected a control sequence",i);for(var s=0,a,l=[[]];e.gullet.future().text!=="{";)if(i=e.gullet.popToken(),i.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),l[s].push("{");break}if(i=e.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new We('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==s+1)throw new We('Argument number "'+i.text+'" out of order');s++,l.push([])}else{if(i.text==="EOF")throw new We("Expected a macro definition");l[s].push(i.text)}var{tokens:c}=e.gullet.consumeArg();return a&&c.unshift(a),(r==="\\edef"||r==="\\xdef")&&(c=e.gullet.expandTokens(c),c.reverse()),e.gullet.macros.set(o,{tokens:c,numArgs:s,delimiters:l},r===nj[r]),{type:"internal",mode:e.mode}}});tt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:r}=n,i=bme(e.gullet.popToken());e.gullet.consumeSpaces();var o=egt(e);return wme(e,i,o,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});tt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:r}=n,i=bme(e.gullet.popToken()),o=e.gullet.popToken(),s=e.gullet.popToken();return wme(e,i,s,r==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(o),{type:"internal",mode:e.mode}}});var cv=function(e,r,i){var o=Xn.math[e]&&Xn.math[e].replace,s=GL(o||e,r,i);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return s},tz=function(e,r,i,o){var s=i.havingBaseStyle(r),a=xe.makeSpan(o.concat(s.sizingClasses(i)),[e],i),l=s.sizeMultiplier/i.sizeMultiplier;return a.height*=l,a.depth*=l,a.maxFontSize=s.sizeMultiplier,a},kme=function(e,r,i){var o=r.havingBaseStyle(i),s=(1-r.sizeMultiplier/o.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Je(s),e.height-=s,e.depth+=s},tgt=function(e,r,i,o,s,a){var l=xe.makeSymbol(e,"Main-Regular",s,o),c=tz(l,r,o,a);return i&&kme(c,o,r),c},ngt=function(e,r,i,o){return xe.makeSymbol(e,"Size"+r+"-Regular",i,o)},Sme=function(e,r,i,o,s,a){var l=ngt(e,r,s,o),c=tz(xe.makeSpan(["delimsizing","size"+r],[l],o),It.TEXT,o,a);return i&&kme(c,o,It.TEXT),c},i9=function(e,r,i){var o;r==="Size1-Regular"?o="delim-size1":o="delim-size4";var s=xe.makeSpan(["delimsizinginner",o],[xe.makeSpan([],[xe.makeSymbol(e,r,i)])]);return{type:"elem",elem:s}},o9=function(e,r,i){var o=bc["Size4-Regular"][e.charCodeAt(0)]?bc["Size4-Regular"][e.charCodeAt(0)][4]:bc["Size1-Regular"][e.charCodeAt(0)][4],s=new rf("inner",a0t(e,Math.round(1e3*r))),a=new ud([s],{width:Je(o),height:Je(r),style:"width:"+Je(o),viewBox:"0 0 "+1e3*o+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),l=xe.makeSvgSpan([],[a],i);return l.height=r,l.style.height=Je(r),l.style.width=Je(o),{type:"elem",elem:l}},rj=.008,o4={type:"kern",size:-1*rj},rgt=["|","\\lvert","\\rvert","\\vert"],igt=["\\|","\\lVert","\\rVert","\\Vert"],Cme=function(e,r,i,o,s,a){var l,c,u,d,h="",f=0;l=u=d=e,c=null;var m="Size1-Regular";e==="\\uparrow"?u=d="":e==="\\Uparrow"?u=d="":e==="\\downarrow"?l=u="":e==="\\Downarrow"?l=u="":e==="\\updownarrow"?(l="\\uparrow",u="",d="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",u="",d="\\Downarrow"):rgt.includes(e)?(u="",h="vert",f=333):igt.includes(e)?(u="",h="doublevert",f=556):e==="["||e==="\\lbrack"?(l="",u="",d="",m="Size4-Regular",h="lbrack",f=667):e==="]"||e==="\\rbrack"?(l="",u="",d="",m="Size4-Regular",h="rbrack",f=667):e==="\\lfloor"||e===""?(u=l="",d="",m="Size4-Regular",h="lfloor",f=667):e==="\\lceil"||e===""?(l="",u=d="",m="Size4-Regular",h="lceil",f=667):e==="\\rfloor"||e===""?(u=l="",d="",m="Size4-Regular",h="rfloor",f=667):e==="\\rceil"||e===""?(l="",u=d="",m="Size4-Regular",h="rceil",f=667):e==="("||e==="\\lparen"?(l="",u="",d="",m="Size4-Regular",h="lparen",f=875):e===")"||e==="\\rparen"?(l="",u="",d="",m="Size4-Regular",h="rparen",f=875):e==="\\{"||e==="\\lbrace"?(l="",c="",d="",u="",m="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="",c="",d="",u="",m="Size4-Regular"):e==="\\lgroup"||e===""?(l="",d="",u="",m="Size4-Regular"):e==="\\rgroup"||e===""?(l="",d="",u="",m="Size4-Regular"):e==="\\lmoustache"||e===""?(l="",d="",u="",m="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(l="",d="",u="",m="Size4-Regular");var v=cv(l,m,s),x=v.height+v.depth,b=cv(u,m,s),w=b.height+b.depth,S=cv(d,m,s),_=S.height+S.depth,P=0,A=1;if(c!==null){var T=cv(c,m,s);P=T.height+T.depth,A=2}var E=x+_+P,L=Math.max(0,Math.ceil((r-E)/(A*w))),$=E+L*A*w,z=o.fontMetrics().axisHeight;i&&(z*=o.sizeMultiplier);var B=$/2-z,D=[];if(h.length>0){var Y=$-x-_,I=Math.round($*1e3),U=l0t(h,Math.round(Y*1e3)),Z=new rf(h,U),te=(f/1e3).toFixed(3)+"em",J=(I/1e3).toFixed(3)+"em",oe=new ud([Z],{width:te,height:J,viewBox:"0 0 "+f+" "+I}),q=xe.makeSvgSpan([],[oe],o);q.height=I/1e3,q.style.width=te,q.style.height=J,D.push({type:"elem",elem:q})}else{if(D.push(i9(d,m,s)),D.push(o4),c===null){var G=$-x-_+2*rj;D.push(o9(u,G,o))}else{var re=($-x-_-P)/2+2*rj;D.push(o9(u,re,o)),D.push(o4),D.push(i9(c,m,s)),D.push(o4),D.push(o9(u,re,o))}D.push(o4),D.push(i9(l,m,s))}var V=o.havingBaseStyle(It.TEXT),ve=xe.makeVList({positionType:"bottom",positionData:B,children:D},V);return tz(xe.makeSpan(["delimsizing","mult"],[ve],V),It.TEXT,o,a)},s9=80,a9=.08,l9=function(e,r,i,o,s){var a=s0t(e,o,i),l=new rf(e,a),c=new ud([l],{width:"400em",height:Je(r),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return xe.makeSvgSpan(["hide-tail"],[c],s)},ogt=function(e,r){var i=r.havingBaseSizing(),o=Pme("\\surd",e*i.sizeMultiplier,Tme,i),s=i.sizeMultiplier,a=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),l,c=0,u=0,d=0,h;return o.type==="small"?(d=1e3+1e3*a+s9,e<1?s=1:e<1.4&&(s=.7),c=(1+a+a9)/s,u=(1+a)/s,l=l9("sqrtMain",c,d,a,r),l.style.minWidth="0.853em",h=.833/s):o.type==="large"?(d=(1e3+s9)*dx[o.size],u=(dx[o.size]+a)/s,c=(dx[o.size]+a+a9)/s,l=l9("sqrtSize"+o.size,c,d,a,r),l.style.minWidth="1.02em",h=1/s):(c=e+a+a9,u=e+a,d=Math.floor(1e3*e+a)+s9,l=l9("sqrtTall",c,d,a,r),l.style.minWidth="0.742em",h=1.056),l.height=u,l.style.height=Je(c),{span:l,advanceWidth:h,ruleWidth:(r.fontMetrics().sqrtRuleThickness+a)*s}},_me=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],sgt=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Ame=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],dx=[0,1.2,1.8,2.4,3],agt=function(e,r,i,o,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),_me.includes(e)||Ame.includes(e))return Sme(e,r,!1,i,o,s);if(sgt.includes(e))return Cme(e,dx[r],!1,i,o,s);throw new We("Illegal delimiter: '"+e+"'")},lgt=[{type:"small",style:It.SCRIPTSCRIPT},{type:"small",style:It.SCRIPT},{type:"small",style:It.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],cgt=[{type:"small",style:It.SCRIPTSCRIPT},{type:"small",style:It.SCRIPT},{type:"small",style:It.TEXT},{type:"stack"}],Tme=[{type:"small",style:It.SCRIPTSCRIPT},{type:"small",style:It.SCRIPT},{type:"small",style:It.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],ugt=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Pme=function(e,r,i,o){for(var s=Math.min(2,3-o.style.size),a=s;a<i.length&&i[a].type!=="stack";a++){var l=cv(e,ugt(i[a]),"math"),c=l.height+l.depth;if(i[a].type==="small"){var u=o.havingBaseStyle(i[a].style);c*=u.sizeMultiplier}if(c>r)return i[a]}return i[i.length-1]},Mme=function(e,r,i,o,s,a){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var l;Ame.includes(e)?l=lgt:_me.includes(e)?l=Tme:l=cgt;var c=Pme(e,r,l,o);return c.type==="small"?tgt(e,c.style,i,o,s,a):c.type==="large"?Sme(e,c.size,i,o,s,a):Cme(e,r,i,o,s,a)},dgt=function(e,r,i,o,s,a){var l=o.fontMetrics().axisHeight*o.sizeMultiplier,c=901,u=5/o.fontMetrics().ptPerEm,d=Math.max(r-l,i+l),h=Math.max(d/500*c,2*d-u);return Mme(e,h,!0,o,s,a)},Ku={sqrtImage:ogt,sizedDelim:agt,sizeToMaxHeight:dx,customSizedDelim:Mme,leftRightDelim:dgt},SJ={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},hgt=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function b7(n,e){var r=v7(n);if(r&&hgt.includes(r.text))return r;throw r?new We("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",n):new We("Invalid delimiter type '"+n.type+"'",n)}tt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(n,e)=>{var r=b7(e[0],n);return{type:"delimsizing",mode:n.parser.mode,size:SJ[n.funcName].size,mclass:SJ[n.funcName].mclass,delim:r.text}},htmlBuilder:(n,e)=>n.delim==="."?xe.makeSpan([n.mclass]):Ku.sizedDelim(n.delim,n.size,e,n.mode,[n.mclass]),mathmlBuilder:n=>{var e=[];n.delim!=="."&&e.push(Da(n.delim,n.mode));var r=new Ve.MathNode("mo",e);n.mclass==="mopen"||n.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var i=Je(Ku.sizeToMaxHeight[n.size]);return r.setAttribute("minsize",i),r.setAttribute("maxsize",i),r}});function CJ(n){if(!n.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}tt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var r=n.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new We("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:n.parser.mode,delim:b7(e[0],n).text,color:r}}});tt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var r=b7(e[0],n),i=n.parser;++i.leftrightDepth;var o=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var s=Ut(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:o,left:r.text,right:s.delim,rightColor:s.color}},htmlBuilder:(n,e)=>{CJ(n);for(var r=ni(n.body,e,!0,["mopen","mclose"]),i=0,o=0,s=!1,a=0;a<r.length;a++)r[a].isMiddle?s=!0:(i=Math.max(r[a].height,i),o=Math.max(r[a].depth,o));i*=e.sizeMultiplier,o*=e.sizeMultiplier;var l;if(n.left==="."?l=Ab(e,["mopen"]):l=Ku.leftRightDelim(n.left,i,o,e,n.mode,["mopen"]),r.unshift(l),s)for(var c=1;c<r.length;c++){var u=r[c],d=u.isMiddle;d&&(r[c]=Ku.leftRightDelim(d.delim,i,o,d.options,n.mode,[]))}var h;if(n.right===".")h=Ab(e,["mclose"]);else{var f=n.rightColor?e.withColor(n.rightColor):e;h=Ku.leftRightDelim(n.right,i,o,f,n.mode,["mclose"])}return r.push(h),xe.makeSpan(["minner"],r,e)},mathmlBuilder:(n,e)=>{CJ(n);var r=vs(n.body,e);if(n.left!=="."){var i=new Ve.MathNode("mo",[Da(n.left,n.mode)]);i.setAttribute("fence","true"),r.unshift(i)}if(n.right!=="."){var o=new Ve.MathNode("mo",[Da(n.right,n.mode)]);o.setAttribute("fence","true"),n.rightColor&&o.setAttribute("mathcolor",n.rightColor),r.push(o)}return XL(r)}});tt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var r=b7(e[0],n);if(!n.parser.leftrightDepth)throw new We("\\middle without preceding \\left",r);return{type:"middle",mode:n.parser.mode,delim:r.text}},htmlBuilder:(n,e)=>{var r;if(n.delim===".")r=Ab(e,[]);else{r=Ku.sizedDelim(n.delim,1,e,n.mode,[]);var i={delim:n.delim,options:e};r.isMiddle=i}return r},mathmlBuilder:(n,e)=>{var r=n.delim==="\\vert"||n.delim==="|"?Da("|","text"):Da(n.delim,n.mode),i=new Ve.MathNode("mo",[r]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var nz=(n,e)=>{var r=xe.wrapFragment(mn(n.body,e),e),i=n.label.slice(1),o=e.sizeMultiplier,s,a=0,l=yn.isCharacterBox(n.body);if(i==="sout")s=xe.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/o,a=-.5*e.fontMetrics().xHeight;else if(i==="phase"){var c=Cr({number:.6,unit:"pt"},e),u=Cr({number:.35,unit:"ex"},e),d=e.havingBaseSizing();o=o/d.sizeMultiplier;var h=r.height+r.depth+c+u;r.style.paddingLeft=Je(h/2+c);var f=Math.floor(1e3*h*o),m=i0t(f),v=new ud([new rf("phase",m)],{width:"400em",height:Je(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=xe.makeSvgSpan(["hide-tail"],[v],e),s.style.height=Je(h),a=r.depth+c+u}else{/cancel/.test(i)?l||r.classes.push("cancel-pad"):i==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var x=0,b=0,w=0;/box/.test(i)?(w=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),x=e.fontMetrics().fboxsep+(i==="colorbox"?0:w),b=x):i==="angl"?(w=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),x=4*w,b=Math.max(0,.25-r.depth)):(x=l?.2:0,b=x),s=hd.encloseSpan(r,i,x,b,e),/fbox|boxed|fcolorbox/.test(i)?(s.style.borderStyle="solid",s.style.borderWidth=Je(w)):i==="angl"&&w!==.049&&(s.style.borderTopWidth=Je(w),s.style.borderRightWidth=Je(w)),a=r.depth+b,n.backgroundColor&&(s.style.backgroundColor=n.backgroundColor,n.borderColor&&(s.style.borderColor=n.borderColor))}var S;if(n.backgroundColor)S=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:a},{type:"elem",elem:r,shift:0}]},e);else{var _=/cancel|phase/.test(i)?["svg-align"]:[];S=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:s,shift:a,wrapperClasses:_}]},e)}return/cancel/.test(i)&&(S.height=r.height,S.depth=r.depth),/cancel/.test(i)&&!l?xe.makeSpan(["mord","cancel-lap"],[S],e):xe.makeSpan(["mord"],[S],e)},rz=(n,e)=>{var r=0,i=new Ve.MathNode(n.label.indexOf("colorbox")>-1?"mpadded":"menclose",[qn(n.body,e)]);switch(n.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*r+"pt"),i.setAttribute("height","+"+2*r+"pt"),i.setAttribute("lspace",r+"pt"),i.setAttribute("voffset",r+"pt"),n.label==="\\fcolorbox"){var o=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);i.setAttribute("style","border: "+o+"em solid "+String(n.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return n.backgroundColor&&i.setAttribute("mathbackground",n.backgroundColor),i};tt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(n,e,r){var{parser:i,funcName:o}=n,s=Ut(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:i.mode,label:o,backgroundColor:s,body:a}},htmlBuilder:nz,mathmlBuilder:rz});tt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(n,e,r){var{parser:i,funcName:o}=n,s=Ut(e[0],"color-token").color,a=Ut(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:i.mode,label:o,backgroundColor:a,borderColor:s,body:l}},htmlBuilder:nz,mathmlBuilder:rz});tt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(n,e){var{parser:r}=n;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});tt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(n,e){var{parser:r,funcName:i}=n,o=e[0];return{type:"enclose",mode:r.mode,label:i,body:o}},htmlBuilder:nz,mathmlBuilder:rz});tt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(n,e){var{parser:r}=n;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var Eme={};function Uc(n){for(var{type:e,names:r,props:i,handler:o,htmlBuilder:s,mathmlBuilder:a}=n,l={type:e,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:o},c=0;c<r.length;++c)Eme[r[c]]=l;s&&(UC[e]=s),a&&(KC[e]=a)}var Nme={};function K(n,e){Nme[n]=e}function _J(n){var e=[];n.consumeSpaces();var r=n.fetch().text;for(r==="\\relax"&&(n.consume(),n.consumeSpaces(),r=n.fetch().text);r==="\\hline"||r==="\\hdashline";)n.consume(),e.push(r==="\\hdashline"),n.consumeSpaces(),r=n.fetch().text;return e}var w7=n=>{var e=n.parser.settings;if(!e.displayMode)throw new We("{"+n.envName+"} can be used only in display mode.")};function iz(n){if(n.indexOf("ed")===-1)return n.indexOf("*")===-1}function gf(n,e,r){var{hskipBeforeAndAfter:i,addJot:o,cols:s,arraystretch:a,colSeparationType:l,autoTag:c,singleRow:u,emptySingleRow:d,maxNumCols:h,leqno:f}=e;if(n.gullet.beginGroup(),u||n.gullet.macros.set("\\cr","\\\\\\relax"),!a){var m=n.gullet.expandMacroAsText("\\arraystretch");if(m==null)a=1;else if(a=parseFloat(m),!a||a<0)throw new We("Invalid \\arraystretch: "+m)}n.gullet.beginGroup();var v=[],x=[v],b=[],w=[],S=c!=null?[]:void 0;function _(){c&&n.gullet.macros.set("\\@eqnsw","1",!0)}function P(){S&&(n.gullet.macros.get("\\df@tag")?(S.push(n.subparse([new Vs("\\df@tag")])),n.gullet.macros.set("\\df@tag",void 0,!0)):S.push(!!c&&n.gullet.macros.get("\\@eqnsw")==="1"))}for(_(),w.push(_J(n));;){var A=n.parseExpression(!1,u?"\\end":"\\\\");n.gullet.endGroup(),n.gullet.beginGroup(),A={type:"ordgroup",mode:n.mode,body:A},r&&(A={type:"styling",mode:n.mode,style:r,body:[A]}),v.push(A);var T=n.fetch().text;if(T==="&"){if(h&&v.length===h){if(u||l)throw new We("Too many tab characters: &",n.nextToken);n.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}n.consume()}else if(T==="\\end"){P(),v.length===1&&A.type==="styling"&&A.body[0].body.length===0&&(x.length>1||!d)&&x.pop(),w.length<x.length+1&&w.push([]);break}else if(T==="\\\\"){n.consume();var E=void 0;n.gullet.future().text!==" "&&(E=n.parseSizeGroup(!0)),b.push(E?E.value:null),P(),w.push(_J(n)),v=[],x.push(v),_()}else throw new We("Expected & or \\\\ or \\cr or \\end",n.nextToken)}return n.gullet.endGroup(),n.gullet.endGroup(),{type:"array",mode:n.mode,addJot:o,arraystretch:a,body:x,cols:s,rowGaps:b,hskipBeforeAndAfter:i,hLinesBeforeRow:w,colSeparationType:l,tags:S,leqno:f}}function oz(n){return n.slice(0,1)==="d"?"display":"text"}var Kc=function(e,r){var i,o,s=e.body.length,a=e.hLinesBeforeRow,l=0,c=new Array(s),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),h=1/r.fontMetrics().ptPerEm,f=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var m=r.havingStyle(It.SCRIPT).sizeMultiplier;f=.2778*(m/r.sizeMultiplier)}var v=e.colSeparationType==="CD"?Cr({number:3,unit:"ex"},r):12*h,x=3*h,b=e.arraystretch*v,w=.7*b,S=.3*b,_=0;function P(Pe){for(var Ie=0;Ie<Pe.length;++Ie)Ie>0&&(_+=.25),u.push({pos:_,isDashed:Pe[Ie]})}for(P(a[0]),i=0;i<e.body.length;++i){var A=e.body[i],T=w,E=S;l<A.length&&(l=A.length);var L=new Array(A.length);for(o=0;o<A.length;++o){var $=mn(A[o],r);E<$.depth&&(E=$.depth),T<$.height&&(T=$.height),L[o]=$}var z=e.rowGaps[i],B=0;z&&(B=Cr(z,r),B>0&&(B+=S,E<B&&(E=B),B=0)),e.addJot&&(E+=x),L.height=T,L.depth=E,_+=T,L.pos=_,_+=E+B,c[i]=L,P(a[i+1])}var D=_/2+r.fontMetrics().axisHeight,Y=e.cols||[],I=[],U,Z,te=[];if(e.tags&&e.tags.some(Pe=>Pe))for(i=0;i<s;++i){var J=c[i],oe=J.pos-D,q=e.tags[i],G=void 0;q===!0?G=xe.makeSpan(["eqn-num"],[],r):q===!1?G=xe.makeSpan([],[],r):G=xe.makeSpan([],ni(q,r,!0),r),G.depth=J.depth,G.height=J.height,te.push({type:"elem",elem:G,shift:oe})}for(o=0,Z=0;o<l||Z<Y.length;++o,++Z){for(var re=Y[Z]||{},V=!0;re.type==="separator";){if(V||(U=xe.makeSpan(["arraycolsep"],[]),U.style.width=Je(r.fontMetrics().doubleRuleSep),I.push(U)),re.separator==="|"||re.separator===":"){var ve=re.separator==="|"?"solid":"dashed",ke=xe.makeSpan(["vertical-separator"],[],r);ke.style.height=Je(_),ke.style.borderRightWidth=Je(d),ke.style.borderRightStyle=ve,ke.style.margin="0 "+Je(-d/2);var pe=_-D;pe&&(ke.style.verticalAlign=Je(-pe)),I.push(ke)}else throw new We("Invalid separator type: "+re.separator);Z++,re=Y[Z]||{},V=!1}if(!(o>=l)){var me=void 0;(o>0||e.hskipBeforeAndAfter)&&(me=yn.deflt(re.pregap,f),me!==0&&(U=xe.makeSpan(["arraycolsep"],[]),U.style.width=Je(me),I.push(U)));var Me=[];for(i=0;i<s;++i){var le=c[i],ze=le[o];if(ze){var nt=le.pos-D;ze.depth=le.depth,ze.height=le.height,Me.push({type:"elem",elem:ze,shift:nt})}}Me=xe.makeVList({positionType:"individualShift",children:Me},r),Me=xe.makeSpan(["col-align-"+(re.align||"c")],[Me]),I.push(Me),(o<l-1||e.hskipBeforeAndAfter)&&(me=yn.deflt(re.postgap,f),me!==0&&(U=xe.makeSpan(["arraycolsep"],[]),U.style.width=Je(me),I.push(U)))}}if(c=xe.makeSpan(["mtable"],I),u.length>0){for(var F=xe.makeLineSpan("hline",r,d),X=xe.makeLineSpan("hdashline",r,d),ie=[{type:"elem",elem:c,shift:0}];u.length>0;){var de=u.pop(),fe=de.pos-D;de.isDashed?ie.push({type:"elem",elem:X,shift:fe}):ie.push({type:"elem",elem:F,shift:fe})}c=xe.makeVList({positionType:"individualShift",children:ie},r)}if(te.length===0)return xe.makeSpan(["mord"],[c],r);var be=xe.makeVList({positionType:"individualShift",children:te},r);return be=xe.makeSpan(["tag"],[be],r),xe.makeFragment([c,be])},fgt={c:"center ",l:"left ",r:"right "},Gc=function(e,r){for(var i=[],o=new Ve.MathNode("mtd",[],["mtr-glue"]),s=new Ve.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var l=e.body[a],c=[],u=0;u<l.length;u++)c.push(new Ve.MathNode("mtd",[qn(l[u],r)]));e.tags&&e.tags[a]&&(c.unshift(o),c.push(o),e.leqno?c.unshift(s):c.push(s)),i.push(new Ve.MathNode("mtr",c))}var d=new Ve.MathNode("mtable",i),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);d.setAttribute("rowspacing",Je(h));var f="",m="";if(e.cols&&e.cols.length>0){var v=e.cols,x="",b=!1,w=0,S=v.length;v[0].type==="separator"&&(f+="top ",w=1),v[v.length-1].type==="separator"&&(f+="bottom ",S-=1);for(var _=w;_<S;_++)v[_].type==="align"?(m+=fgt[v[_].align],b&&(x+="none "),b=!0):v[_].type==="separator"&&b&&(x+=v[_].separator==="|"?"solid ":"dashed ",b=!1);d.setAttribute("columnalign",m.trim()),/[sd]/.test(x)&&d.setAttribute("columnlines",x.trim())}if(e.colSeparationType==="align"){for(var P=e.cols||[],A="",T=1;T<P.length;T++)A+=T%2?"0em ":"1em ";d.setAttribute("columnspacing",A.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var E="",L=e.hLinesBeforeRow;f+=L[0].length>0?"left ":"",f+=L[L.length-1].length>0?"right ":"";for(var $=1;$<L.length-1;$++)E+=L[$].length===0?"none ":L[$][0]?"dashed ":"solid ";return/[sd]/.test(E)&&d.setAttribute("rowlines",E.trim()),f!==""&&(d=new Ve.MathNode("menclose",[d]),d.setAttribute("notation",f.trim())),e.arraystretch&&e.arraystretch<1&&(d=new Ve.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},jme=function(e,r){e.envName.indexOf("ed")===-1&&w7(e);var i=[],o=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",a=gf(e.parser,{cols:i,addJot:!0,autoTag:s?void 0:iz(e.envName),emptySingleRow:!0,colSeparationType:o,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),l,c=0,u={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",h=0;h<r[0].body.length;h++){var f=Ut(r[0].body[h],"textord");d+=f.text}l=Number(d),c=l*2}var m=!c;a.body.forEach(function(w){for(var S=1;S<w.length;S+=2){var _=Ut(w[S],"styling"),P=Ut(_.body[0],"ordgroup");P.body.unshift(u)}if(m)c<w.length&&(c=w.length);else{var A=w.length/2;if(l<A)throw new We("Too many math in a row: "+("expected "+l+", but got "+A),w[0])}});for(var v=0;v<c;++v){var x="r",b=0;v%2===1?x="l":v>0&&m&&(b=1),i[v]={type:"align",align:x,pregap:b,postgap:0}}return a.colSeparationType=m?"align":"alignat",a};Uc({type:"array",names:["array","darray"],props:{numArgs:1},handler(n,e){var r=v7(e[0]),i=r?[e[0]]:Ut(e[0],"ordgroup").body,o=i.map(function(a){var l=QL(a),c=l.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new We("Unknown column alignment: "+c,a)}),s={cols:o,hskipBeforeAndAfter:!0,maxNumCols:o.length};return gf(n.parser,s,oz(n.envName))},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(n){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[n.envName.replace("*","")],r="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(n.envName.charAt(n.envName.length-1)==="*"){var o=n.parser;if(o.consumeSpaces(),o.fetch().text==="["){if(o.consume(),o.consumeSpaces(),r=o.fetch().text,"lcr".indexOf(r)===-1)throw new We("Expected l or c or r",o.nextToken);o.consume(),o.consumeSpaces(),o.expect("]"),o.consume(),i.cols=[{type:"align",align:r}]}}var s=gf(n.parser,i,oz(n.envName)),a=Math.max(0,...s.body.map(l=>l.length));return s.cols=new Array(a).fill({type:"align",align:r}),e?{type:"leftright",mode:n.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(n){var e={arraystretch:.5},r=gf(n.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["subarray"],props:{numArgs:1},handler(n,e){var r=v7(e[0]),i=r?[e[0]]:Ut(e[0],"ordgroup").body,o=i.map(function(a){var l=QL(a),c=l.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new We("Unknown column alignment: "+c,a)});if(o.length>1)throw new We("{subarray} can contain only one column");var s={cols:o,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=gf(n.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new We("{subarray} can contain only one column");return s},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(n){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=gf(n.parser,e,oz(n.envName));return{type:"leftright",mode:n.mode,body:[r],left:n.envName.indexOf("r")>-1?".":"\\{",right:n.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:jme,htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(n){["gather","gather*"].includes(n.envName)&&w7(n);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:iz(n.envName),emptySingleRow:!0,leqno:n.parser.settings.leqno};return gf(n.parser,e,"display")},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:jme,htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(n){w7(n);var e={autoTag:iz(n.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:n.parser.settings.leqno};return gf(n.parser,e,"display")},htmlBuilder:Kc,mathmlBuilder:Gc});Uc({type:"array",names:["CD"],props:{numArgs:0},handler(n){return w7(n),Q0t(n.parser)},htmlBuilder:Kc,mathmlBuilder:Gc});K("\\nonumber","\\gdef\\@eqnsw{0}");K("\\notag","\\nonumber");tt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(n,e){throw new We(n.funcName+" valid only within array environment")}});var AJ=Eme;tt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(n,e){var{parser:r,funcName:i}=n,o=e[0];if(o.type!=="ordgroup")throw new We("Invalid environment name",o);for(var s="",a=0;a<o.body.length;++a)s+=Ut(o.body[a],"textord").text;if(i==="\\begin"){if(!AJ.hasOwnProperty(s))throw new We("No such environment: "+s,o);var l=AJ[s],{args:c,optArgs:u}=r.parseArguments("\\begin{"+s+"}",l),d={mode:r.mode,envName:s,parser:r},h=l.handler(d,c,u);r.expect("\\end",!1);var f=r.nextToken,m=Ut(r.parseFunction(),"environment");if(m.name!==s)throw new We("Mismatch: \\begin{"+s+"} matched by \\end{"+m.name+"}",f);return h}return{type:"environment",mode:r.mode,name:s,nameGroup:o}}});var Ome=(n,e)=>{var r=n.font,i=e.withFont(r);return mn(n.body,i)},Dme=(n,e)=>{var r=n.font,i=e.withFont(r);return qn(n.body,i)},TJ={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};tt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=GC(e[0]),s=i;return s in TJ&&(s=TJ[s]),{type:"font",mode:r.mode,font:s.slice(1),body:o}},htmlBuilder:Ome,mathmlBuilder:Dme});tt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(n,e)=>{var{parser:r}=n,i=e[0],o=yn.isCharacterBox(i);return{type:"mclass",mode:r.mode,mclass:x7(i),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:i}],isCharacterBox:o}}});tt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{parser:r,funcName:i,breakOnTokenText:o}=n,{mode:s}=r,a=r.parseExpression(!0,o),l="math"+i.slice(1);return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:r.mode,body:a}}},htmlBuilder:Ome,mathmlBuilder:Dme});var Ime=(n,e)=>{var r=e;return n==="display"?r=r.id>=It.SCRIPT.id?r.text():It.DISPLAY:n==="text"&&r.size===It.DISPLAY.size?r=It.TEXT:n==="script"?r=It.SCRIPT:n==="scriptscript"&&(r=It.SCRIPTSCRIPT),r},sz=(n,e)=>{var r=Ime(n.size,e.style),i=r.fracNum(),o=r.fracDen(),s;s=e.havingStyle(i);var a=mn(n.numer,s,e);if(n.continued){var l=8.5/e.fontMetrics().ptPerEm,c=3.5/e.fontMetrics().ptPerEm;a.height=a.height<l?l:a.height,a.depth=a.depth<c?c:a.depth}s=e.havingStyle(o);var u=mn(n.denom,s,e),d,h,f;n.hasBarLine?(n.barSize?(h=Cr(n.barSize,e),d=xe.makeLineSpan("frac-line",e,h)):d=xe.makeLineSpan("frac-line",e),h=d.height,f=d.height):(d=null,h=0,f=e.fontMetrics().defaultRuleThickness);var m,v,x;r.size===It.DISPLAY.size||n.size==="display"?(m=e.fontMetrics().num1,h>0?v=3*f:v=7*f,x=e.fontMetrics().denom1):(h>0?(m=e.fontMetrics().num2,v=f):(m=e.fontMetrics().num3,v=3*f),x=e.fontMetrics().denom2);var b;if(d){var S=e.fontMetrics().axisHeight;m-a.depth-(S+.5*h)<v&&(m+=v-(m-a.depth-(S+.5*h))),S-.5*h-(u.height-x)<v&&(x+=v-(S-.5*h-(u.height-x)));var _=-(S-.5*h);b=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:x},{type:"elem",elem:d,shift:_},{type:"elem",elem:a,shift:-m}]},e)}else{var w=m-a.depth-(u.height-x);w<v&&(m+=.5*(v-w),x+=.5*(v-w)),b=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:x},{type:"elem",elem:a,shift:-m}]},e)}s=e.havingStyle(r),b.height*=s.sizeMultiplier/e.sizeMultiplier,b.depth*=s.sizeMultiplier/e.sizeMultiplier;var P;r.size===It.DISPLAY.size?P=e.fontMetrics().delim1:r.size===It.SCRIPTSCRIPT.size?P=e.havingStyle(It.SCRIPT).fontMetrics().delim2:P=e.fontMetrics().delim2;var A,T;return n.leftDelim==null?A=Ab(e,["mopen"]):A=Ku.customSizedDelim(n.leftDelim,P,!0,e.havingStyle(r),n.mode,["mopen"]),n.continued?T=xe.makeSpan([]):n.rightDelim==null?T=Ab(e,["mclose"]):T=Ku.customSizedDelim(n.rightDelim,P,!0,e.havingStyle(r),n.mode,["mclose"]),xe.makeSpan(["mord"].concat(s.sizingClasses(e)),[A,xe.makeSpan(["mfrac"],[b]),T],e)},az=(n,e)=>{var r=new Ve.MathNode("mfrac",[qn(n.numer,e),qn(n.denom,e)]);if(!n.hasBarLine)r.setAttribute("linethickness","0px");else if(n.barSize){var i=Cr(n.barSize,e);r.setAttribute("linethickness",Je(i))}var o=Ime(n.size,e.style);if(o.size!==e.style.size){r=new Ve.MathNode("mstyle",[r]);var s=o.size===It.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",s),r.setAttribute("scriptlevel","0")}if(n.leftDelim!=null||n.rightDelim!=null){var a=[];if(n.leftDelim!=null){var l=new Ve.MathNode("mo",[new Ve.TextNode(n.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}if(a.push(r),n.rightDelim!=null){var c=new Ve.MathNode("mo",[new Ve.TextNode(n.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),a.push(c)}return XL(a)}return r};tt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=e[0],s=e[1],a,l=null,c=null,u="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,l="(",c=")";break;case"\\\\bracefrac":a=!1,l="\\{",c="\\}";break;case"\\\\brackfrac":a=!1,l="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:o,denom:s,hasBarLine:a,leftDelim:l,rightDelim:c,size:u,barSize:null}},htmlBuilder:sz,mathmlBuilder:az});tt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=e[0],s=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:o,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});tt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(n){var{parser:e,funcName:r,token:i}=n,o;switch(r){case"\\over":o="\\frac";break;case"\\choose":o="\\binom";break;case"\\atop":o="\\\\atopfrac";break;case"\\brace":o="\\\\bracefrac";break;case"\\brack":o="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:o,token:i}}});var PJ=["display","text","script","scriptscript"],MJ=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};tt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(n,e){var{parser:r}=n,i=e[4],o=e[5],s=GC(e[0]),a=s.type==="atom"&&s.family==="open"?MJ(s.text):null,l=GC(e[1]),c=l.type==="atom"&&l.family==="close"?MJ(l.text):null,u=Ut(e[2],"size"),d,h=null;u.isBlank?d=!0:(h=u.value,d=h.number>0);var f="auto",m=e[3];if(m.type==="ordgroup"){if(m.body.length>0){var v=Ut(m.body[0],"textord");f=PJ[Number(v.text)]}}else m=Ut(m,"textord"),f=PJ[Number(m.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:d,barSize:h,leftDelim:a,rightDelim:c,size:f}},htmlBuilder:sz,mathmlBuilder:az});tt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(n,e){var{parser:r,funcName:i,token:o}=n;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Ut(e[0],"size").value,token:o}}});tt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=e[0],s=qmt(Ut(e[1],"infix").size),a=e[2],l=s.number>0;return{type:"genfrac",mode:r.mode,numer:o,denom:a,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:sz,mathmlBuilder:az});var Rme=(n,e)=>{var r=e.style,i,o;n.type==="supsub"?(i=n.sup?mn(n.sup,e.havingStyle(r.sup()),e):mn(n.sub,e.havingStyle(r.sub()),e),o=Ut(n.base,"horizBrace")):o=Ut(n,"horizBrace");var s=mn(o.base,e.havingBaseStyle(It.DISPLAY)),a=hd.svgSpan(o,e),l;if(o.isOver?(l=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),l.children[0].children[0].children[1].classes.push("svg-align")):(l=xe.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),l.children[0].children[0].children[0].classes.push("svg-align")),i){var c=xe.makeSpan(["mord",o.isOver?"mover":"munder"],[l],e);o.isOver?l=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:i}]},e):l=xe.makeVList({positionType:"bottom",positionData:c.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:c}]},e)}return xe.makeSpan(["mord",o.isOver?"mover":"munder"],[l],e)},pgt=(n,e)=>{var r=hd.mathMLnode(n.label);return new Ve.MathNode(n.isOver?"mover":"munder",[qn(n.base,e),r])};tt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(n,e){var{parser:r,funcName:i}=n;return{type:"horizBrace",mode:r.mode,label:i,isOver:/^\\over/.test(i),base:e[0]}},htmlBuilder:Rme,mathmlBuilder:pgt});tt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(n,e)=>{var{parser:r}=n,i=e[1],o=Ut(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:o})?{type:"href",mode:r.mode,href:o,body:Dr(i)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(n,e)=>{var r=ni(n.body,e,!1);return xe.makeAnchor(n.href,[],r,e)},mathmlBuilder:(n,e)=>{var r=of(n.body,e);return r instanceof zs||(r=new zs("mrow",[r])),r.setAttribute("href",n.href),r}});tt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(n,e)=>{var{parser:r}=n,i=Ut(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:i}))return r.formatUnsupportedCmd("\\url");for(var o=[],s=0;s<i.length;s++){var a=i[s];a==="~"&&(a="\\textasciitilde"),o.push({type:"textord",mode:"text",text:a})}var l={type:"text",mode:r.mode,font:"\\texttt",body:o};return{type:"href",mode:r.mode,href:i,body:Dr(l)}}});tt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(n,e){var{parser:r}=n;return{type:"hbox",mode:r.mode,body:Dr(e[0])}},htmlBuilder(n,e){var r=ni(n.body,e,!1);return xe.makeFragment(r)},mathmlBuilder(n,e){return new Ve.MathNode("mrow",vs(n.body,e))}});tt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(n,e)=>{var{parser:r,funcName:i,token:o}=n,s=Ut(e[0],"raw").string,a=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,c={};switch(i){case"\\htmlClass":c.class=s,l={command:"\\htmlClass",class:s};break;case"\\htmlId":c.id=s,l={command:"\\htmlId",id:s};break;case"\\htmlStyle":c.style=s,l={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var u=s.split(","),d=0;d<u.length;d++){var h=u[d],f=h.indexOf("=");if(f<0)throw new We("\\htmlData key/value '"+h+"' missing equals sign");var m=h.slice(0,f),v=h.slice(f+1);c["data-"+m.trim()]=v}l={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(l)?{type:"html",mode:r.mode,attributes:c,body:Dr(a)}:r.formatUnsupportedCmd(i)},htmlBuilder:(n,e)=>{var r=ni(n.body,e,!1),i=["enclosing"];n.attributes.class&&i.push(...n.attributes.class.trim().split(/\s+/));var o=xe.makeSpan(i,r,e);for(var s in n.attributes)s!=="class"&&n.attributes.hasOwnProperty(s)&&o.setAttribute(s,n.attributes[s]);return o},mathmlBuilder:(n,e)=>of(n.body,e)});tt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(n,e)=>{var{parser:r}=n;return{type:"htmlmathml",mode:r.mode,html:Dr(e[0]),mathml:Dr(e[1])}},htmlBuilder:(n,e)=>{var r=ni(n.html,e,!1);return xe.makeFragment(r)},mathmlBuilder:(n,e)=>of(n.mathml,e)});var c9=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new We("Invalid size: '"+e+"' in \\includegraphics");var i={number:+(r[1]+r[2]),unit:r[3]};if(!tme(i))throw new We("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};tt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(n,e,r)=>{var{parser:i}=n,o={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},l="";if(r[0])for(var c=Ut(r[0],"raw").string,u=c.split(","),d=0;d<u.length;d++){var h=u[d].split("=");if(h.length===2){var f=h[1].trim();switch(h[0].trim()){case"alt":l=f;break;case"width":o=c9(f);break;case"height":s=c9(f);break;case"totalheight":a=c9(f);break;default:throw new We("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var m=Ut(e[0],"url").url;return l===""&&(l=m,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:m})?{type:"includegraphics",mode:i.mode,alt:l,width:o,height:s,totalheight:a,src:m}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(n,e)=>{var r=Cr(n.height,e),i=0;n.totalheight.number>0&&(i=Cr(n.totalheight,e)-r);var o=0;n.width.number>0&&(o=Cr(n.width,e));var s={height:Je(r+i)};o>0&&(s.width=Je(o)),i>0&&(s.verticalAlign=Je(-i));var a=new p0t(n.src,n.alt,s);return a.height=r,a.depth=i,a},mathmlBuilder:(n,e)=>{var r=new Ve.MathNode("mglyph",[]);r.setAttribute("alt",n.alt);var i=Cr(n.height,e),o=0;if(n.totalheight.number>0&&(o=Cr(n.totalheight,e)-i,r.setAttribute("valign",Je(-o))),r.setAttribute("height",Je(i+o)),n.width.number>0){var s=Cr(n.width,e);r.setAttribute("width",Je(s))}return r.setAttribute("src",n.src),r}});tt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(n,e){var{parser:r,funcName:i}=n,o=Ut(e[0],"size");if(r.settings.strict){var s=i[1]==="m",a=o.value.unit==="mu";s?(a||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+o.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):a&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:o.value}},htmlBuilder(n,e){return xe.makeGlue(n.dimension,e)},mathmlBuilder(n,e){var r=Cr(n.dimension,e);return new Ve.SpaceNode(r)}});tt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=e[0];return{type:"lap",mode:r.mode,alignment:i.slice(5),body:o}},htmlBuilder:(n,e)=>{var r;n.alignment==="clap"?(r=xe.makeSpan([],[mn(n.body,e)]),r=xe.makeSpan(["inner"],[r],e)):r=xe.makeSpan(["inner"],[mn(n.body,e)]);var i=xe.makeSpan(["fix"],[]),o=xe.makeSpan([n.alignment],[r,i],e),s=xe.makeSpan(["strut"]);return s.style.height=Je(o.height+o.depth),o.depth&&(s.style.verticalAlign=Je(-o.depth)),o.children.unshift(s),o=xe.makeSpan(["thinbox"],[o],e),xe.makeSpan(["mord","vbox"],[o],e)},mathmlBuilder:(n,e)=>{var r=new Ve.MathNode("mpadded",[qn(n.body,e)]);if(n.alignment!=="rlap"){var i=n.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",i+"width")}return r.setAttribute("width","0px"),r}});tt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){var{funcName:r,parser:i}=n,o=i.mode;i.switchMode("math");var s=r==="\\("?"\\)":"$",a=i.parseExpression(!1,s);return i.expect(s),i.switchMode(o),{type:"styling",mode:i.mode,style:"text",body:a}}});tt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){throw new We("Mismatched "+n.funcName)}});var EJ=(n,e)=>{switch(e.style.size){case It.DISPLAY.size:return n.display;case It.TEXT.size:return n.text;case It.SCRIPT.size:return n.script;case It.SCRIPTSCRIPT.size:return n.scriptscript;default:return n.text}};tt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(n,e)=>{var{parser:r}=n;return{type:"mathchoice",mode:r.mode,display:Dr(e[0]),text:Dr(e[1]),script:Dr(e[2]),scriptscript:Dr(e[3])}},htmlBuilder:(n,e)=>{var r=EJ(n,e),i=ni(r,e,!1);return xe.makeFragment(i)},mathmlBuilder:(n,e)=>{var r=EJ(n,e);return of(r,e)}});var Lme=(n,e,r,i,o,s,a)=>{n=xe.makeSpan([],[n]);var l=r&&yn.isCharacterBox(r),c,u;if(e){var d=mn(e,i.havingStyle(o.sup()),i);u={elem:d,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var h=mn(r,i.havingStyle(o.sub()),i);c={elem:h,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-h.height)}}var f;if(u&&c){var m=i.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+n.depth+a;f=xe.makeVList({positionType:"bottom",positionData:m,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:Je(-s)},{type:"kern",size:c.kern},{type:"elem",elem:n},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Je(s)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(c){var v=n.height-a;f=xe.makeVList({positionType:"top",positionData:v,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:Je(-s)},{type:"kern",size:c.kern},{type:"elem",elem:n}]},i)}else if(u){var x=n.depth+a;f=xe.makeVList({positionType:"bottom",positionData:x,children:[{type:"elem",elem:n},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Je(s)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return n;var b=[f];if(c&&s!==0&&!l){var w=xe.makeSpan(["mspace"],[],i);w.style.marginRight=Je(s),b.unshift(w)}return xe.makeSpan(["mop","op-limits"],b,i)},zme=["\\smallint"],m1=(n,e)=>{var r,i,o=!1,s;n.type==="supsub"?(r=n.sup,i=n.sub,s=Ut(n.base,"op"),o=!0):s=Ut(n,"op");var a=e.style,l=!1;a.size===It.DISPLAY.size&&s.symbol&&!zme.includes(s.name)&&(l=!0);var c;if(s.symbol){var u=l?"Size2-Regular":"Size1-Regular",d="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(d=s.name.slice(1),s.name=d==="oiint"?"\\iint":"\\iiint"),c=xe.makeSymbol(s.name,u,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),d.length>0){var h=c.italic,f=xe.staticSvg(d+"Size"+(l?"2":"1"),e);c=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:f,shift:l?.08:0}]},e),s.name="\\"+d,c.classes.unshift("mop"),c.italic=h}}else if(s.body){var m=ni(s.body,e,!0);m.length===1&&m[0]instanceof Oa?(c=m[0],c.classes[0]="mop"):c=xe.makeSpan(["mop"],m,e)}else{for(var v=[],x=1;x<s.name.length;x++)v.push(xe.mathsym(s.name[x],s.mode,e));c=xe.makeSpan(["mop"],v,e)}var b=0,w=0;return(c instanceof Oa||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(b=(c.height-c.depth)/2-e.fontMetrics().axisHeight,w=c.italic),o?Lme(c,r,i,e,a,w,b):(b&&(c.style.position="relative",c.style.top=Je(b)),c)},Iw=(n,e)=>{var r;if(n.symbol)r=new zs("mo",[Da(n.name,n.mode)]),zme.includes(n.name)&&r.setAttribute("largeop","false");else if(n.body)r=new zs("mo",vs(n.body,e));else{r=new zs("mi",[new wc(n.name.slice(1))]);var i=new zs("mo",[Da("","text")]);n.parentIsSupSub?r=new zs("mrow",[r,i]):r=hme([r,i])}return r},mgt={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};tt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=i;return o.length===1&&(o=mgt[o]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:o}},htmlBuilder:m1,mathmlBuilder:Iw});tt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var{parser:r}=n,i=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Dr(i)}},htmlBuilder:m1,mathmlBuilder:Iw});var ggt={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};tt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(n){var{parser:e,funcName:r}=n;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:m1,mathmlBuilder:Iw});tt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(n){var{parser:e,funcName:r}=n;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:m1,mathmlBuilder:Iw});tt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(n){var{parser:e,funcName:r}=n,i=r;return i.length===1&&(i=ggt[i]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:m1,mathmlBuilder:Iw});var Fme=(n,e)=>{var r,i,o=!1,s;n.type==="supsub"?(r=n.sup,i=n.sub,s=Ut(n.base,"operatorname"),o=!0):s=Ut(n,"operatorname");var a;if(s.body.length>0){for(var l=s.body.map(h=>{var f=h.text;return typeof f=="string"?{type:"textord",mode:h.mode,text:f}:h}),c=ni(l,e.withFont("mathrm"),!0),u=0;u<c.length;u++){var d=c[u];d instanceof Oa&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=xe.makeSpan(["mop"],c,e)}else a=xe.makeSpan(["mop"],[],e);return o?Lme(a,r,i,e,e.style,0,0):a},ygt=(n,e)=>{for(var r=vs(n.body,e.withFont("mathrm")),i=!0,o=0;o<r.length;o++){var s=r[o];if(!(s instanceof Ve.SpaceNode))if(s instanceof Ve.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var a=s.children[0];s.children.length===1&&a instanceof Ve.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var l=r.map(d=>d.toText()).join("");r=[new Ve.TextNode(l)]}var c=new Ve.MathNode("mi",r);c.setAttribute("mathvariant","normal");var u=new Ve.MathNode("mo",[Da("","text")]);return n.parentIsSupSub?new Ve.MathNode("mrow",[c,u]):Ve.newDocumentFragment([c,u])};tt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(n,e)=>{var{parser:r,funcName:i}=n,o=e[0];return{type:"operatorname",mode:r.mode,body:Dr(o),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Fme,mathmlBuilder:ygt});K("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Mm({type:"ordgroup",htmlBuilder(n,e){return n.semisimple?xe.makeFragment(ni(n.body,e,!1)):xe.makeSpan(["mord"],ni(n.body,e,!0),e)},mathmlBuilder(n,e){return of(n.body,e,!0)}});tt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(n,e){var{parser:r}=n,i=e[0];return{type:"overline",mode:r.mode,body:i}},htmlBuilder(n,e){var r=mn(n.body,e.havingCrampedStyle()),i=xe.makeLineSpan("overline-line",e),o=e.fontMetrics().defaultRuleThickness,s=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*o},{type:"elem",elem:i},{type:"kern",size:o}]},e);return xe.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(n,e){var r=new Ve.MathNode("mo",[new Ve.TextNode("")]);r.setAttribute("stretchy","true");var i=new Ve.MathNode("mover",[qn(n.body,e),r]);return i.setAttribute("accent","true"),i}});tt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:r}=n,i=e[0];return{type:"phantom",mode:r.mode,body:Dr(i)}},htmlBuilder:(n,e)=>{var r=ni(n.body,e.withPhantom(),!1);return xe.makeFragment(r)},mathmlBuilder:(n,e)=>{var r=vs(n.body,e);return new Ve.MathNode("mphantom",r)}});tt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:r}=n,i=e[0];return{type:"hphantom",mode:r.mode,body:i}},htmlBuilder:(n,e)=>{var r=xe.makeSpan([],[mn(n.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var i=0;i<r.children.length;i++)r.children[i].height=0,r.children[i].depth=0;return r=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),xe.makeSpan(["mord"],[r],e)},mathmlBuilder:(n,e)=>{var r=vs(Dr(n.body),e),i=new Ve.MathNode("mphantom",r),o=new Ve.MathNode("mpadded",[i]);return o.setAttribute("height","0px"),o.setAttribute("depth","0px"),o}});tt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:r}=n,i=e[0];return{type:"vphantom",mode:r.mode,body:i}},htmlBuilder:(n,e)=>{var r=xe.makeSpan(["inner"],[mn(n.body,e.withPhantom())]),i=xe.makeSpan(["fix"],[]);return xe.makeSpan(["mord","rlap"],[r,i],e)},mathmlBuilder:(n,e)=>{var r=vs(Dr(n.body),e),i=new Ve.MathNode("mphantom",r),o=new Ve.MathNode("mpadded",[i]);return o.setAttribute("width","0px"),o}});tt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(n,e){var{parser:r}=n,i=Ut(e[0],"size").value,o=e[1];return{type:"raisebox",mode:r.mode,dy:i,body:o}},htmlBuilder(n,e){var r=mn(n.body,e),i=Cr(n.dy,e);return xe.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(n,e){var r=new Ve.MathNode("mpadded",[qn(n.body,e)]),i=n.dy.number+n.dy.unit;return r.setAttribute("voffset",i),r}});tt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(n){var{parser:e}=n;return{type:"internal",mode:e.mode}}});tt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(n,e,r){var{parser:i}=n,o=r[0],s=Ut(e[0],"size"),a=Ut(e[1],"size");return{type:"rule",mode:i.mode,shift:o&&Ut(o,"size").value,width:s.value,height:a.value}},htmlBuilder(n,e){var r=xe.makeSpan(["mord","rule"],[],e),i=Cr(n.width,e),o=Cr(n.height,e),s=n.shift?Cr(n.shift,e):0;return r.style.borderRightWidth=Je(i),r.style.borderTopWidth=Je(o),r.style.bottom=Je(s),r.width=i,r.height=o+s,r.depth=-s,r.maxFontSize=o*1.125*e.sizeMultiplier,r},mathmlBuilder(n,e){var r=Cr(n.width,e),i=Cr(n.height,e),o=n.shift?Cr(n.shift,e):0,s=e.color&&e.getColor()||"black",a=new Ve.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",Je(r)),a.setAttribute("height",Je(i));var l=new Ve.MathNode("mpadded",[a]);return o>=0?l.setAttribute("height",Je(o)):(l.setAttribute("height",Je(o)),l.setAttribute("depth",Je(-o))),l.setAttribute("voffset",Je(o)),l}});function $me(n,e,r){for(var i=ni(n,e,!1),o=e.sizeMultiplier/r.sizeMultiplier,s=0;s<i.length;s++){var a=i[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(i[s].classes,e.sizingClasses(r)):i[s].classes[a+1]==="reset-size"+e.size&&(i[s].classes[a+1]="reset-size"+r.size),i[s].height*=o,i[s].depth*=o}return xe.makeFragment(i)}var NJ=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],vgt=(n,e)=>{var r=e.havingSize(n.size);return $me(n.body,r,e)};tt({type:"sizing",names:NJ,props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{breakOnTokenText:r,funcName:i,parser:o}=n,s=o.parseExpression(!1,r);return{type:"sizing",mode:o.mode,size:NJ.indexOf(i)+1,body:s}},htmlBuilder:vgt,mathmlBuilder:(n,e)=>{var r=e.havingSize(n.size),i=vs(n.body,r),o=new Ve.MathNode("mstyle",i);return o.setAttribute("mathsize",Je(r.sizeMultiplier)),o}});tt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(n,e,r)=>{var{parser:i}=n,o=!1,s=!1,a=r[0]&&Ut(r[0],"ordgroup");if(a)for(var l="",c=0;c<a.body.length;++c){var u=a.body[c];if(l=u.text,l==="t")o=!0;else if(l==="b")s=!0;else{o=!1,s=!1;break}}else o=!0,s=!0;var d=e[0];return{type:"smash",mode:i.mode,body:d,smashHeight:o,smashDepth:s}},htmlBuilder:(n,e)=>{var r=xe.makeSpan([],[mn(n.body,e)]);if(!n.smashHeight&&!n.smashDepth)return r;if(n.smashHeight&&(r.height=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].height=0;if(n.smashDepth&&(r.depth=0,r.children))for(var o=0;o<r.children.length;o++)r.children[o].depth=0;var s=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return xe.makeSpan(["mord"],[s],e)},mathmlBuilder:(n,e)=>{var r=new Ve.MathNode("mpadded",[qn(n.body,e)]);return n.smashHeight&&r.setAttribute("height","0px"),n.smashDepth&&r.setAttribute("depth","0px"),r}});tt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,r){var{parser:i}=n,o=r[0],s=e[0];return{type:"sqrt",mode:i.mode,body:s,index:o}},htmlBuilder(n,e){var r=mn(n.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=xe.wrapFragment(r,e);var i=e.fontMetrics(),o=i.defaultRuleThickness,s=o;e.style.id<It.TEXT.id&&(s=e.fontMetrics().xHeight);var a=o+s/4,l=r.height+r.depth+a+o,{span:c,ruleWidth:u,advanceWidth:d}=Ku.sqrtImage(l,e),h=c.height-u;h>r.height+r.depth+a&&(a=(a+h-r.height-r.depth)/2);var f=c.height-r.height-a-u;r.style.paddingLeft=Je(d);var m=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+f)},{type:"elem",elem:c},{type:"kern",size:u}]},e);if(n.index){var v=e.havingStyle(It.SCRIPTSCRIPT),x=mn(n.index,v,e),b=.6*(m.height-m.depth),w=xe.makeVList({positionType:"shift",positionData:-b,children:[{type:"elem",elem:x}]},e),S=xe.makeSpan(["root"],[w]);return xe.makeSpan(["mord","sqrt"],[S,m],e)}else return xe.makeSpan(["mord","sqrt"],[m],e)},mathmlBuilder(n,e){var{body:r,index:i}=n;return i?new Ve.MathNode("mroot",[qn(r,e),qn(i,e)]):new Ve.MathNode("msqrt",[qn(r,e)])}});var jJ={display:It.DISPLAY,text:It.TEXT,script:It.SCRIPT,scriptscript:It.SCRIPTSCRIPT};tt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n,e){var{breakOnTokenText:r,funcName:i,parser:o}=n,s=o.parseExpression(!0,r),a=i.slice(1,i.length-5);return{type:"styling",mode:o.mode,style:a,body:s}},htmlBuilder(n,e){var r=jJ[n.style],i=e.havingStyle(r).withFont("");return $me(n.body,i,e)},mathmlBuilder(n,e){var r=jJ[n.style],i=e.havingStyle(r),o=vs(n.body,i),s=new Ve.MathNode("mstyle",o),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=a[n.style];return s.setAttribute("scriptlevel",l[0]),s.setAttribute("displaystyle",l[1]),s}});var xgt=function(e,r){var i=e.base;if(i)if(i.type==="op"){var o=i.limits&&(r.style.size===It.DISPLAY.size||i.alwaysHandleSupSub);return o?m1:null}else if(i.type==="operatorname"){var s=i.alwaysHandleSupSub&&(r.style.size===It.DISPLAY.size||i.limits);return s?Fme:null}else{if(i.type==="accent")return yn.isCharacterBox(i.base)?ez:null;if(i.type==="horizBrace"){var a=!e.sub;return a===i.isOver?Rme:null}else return null}else return null};Mm({type:"supsub",htmlBuilder(n,e){var r=xgt(n,e);if(r)return r(n,e);var{base:i,sup:o,sub:s}=n,a=mn(i,e),l,c,u=e.fontMetrics(),d=0,h=0,f=i&&yn.isCharacterBox(i);if(o){var m=e.havingStyle(e.style.sup());l=mn(o,m,e),f||(d=a.height-m.fontMetrics().supDrop*m.sizeMultiplier/e.sizeMultiplier)}if(s){var v=e.havingStyle(e.style.sub());c=mn(s,v,e),f||(h=a.depth+v.fontMetrics().subDrop*v.sizeMultiplier/e.sizeMultiplier)}var x;e.style===It.DISPLAY?x=u.sup1:e.style.cramped?x=u.sup3:x=u.sup2;var b=e.sizeMultiplier,w=Je(.5/u.ptPerEm/b),S=null;if(c){var _=n.base&&n.base.type==="op"&&n.base.name&&(n.base.name==="\\oiint"||n.base.name==="\\oiiint");(a instanceof Oa||_)&&(S=Je(-a.italic))}var P;if(l&&c){d=Math.max(d,x,l.depth+.25*u.xHeight),h=Math.max(h,u.sub2);var A=u.defaultRuleThickness,T=4*A;if(d-l.depth-(c.height-h)<T){h=T-(d-l.depth)+c.height;var E=.8*u.xHeight-(d-l.depth);E>0&&(d+=E,h-=E)}var L=[{type:"elem",elem:c,shift:h,marginRight:w,marginLeft:S},{type:"elem",elem:l,shift:-d,marginRight:w}];P=xe.makeVList({positionType:"individualShift",children:L},e)}else if(c){h=Math.max(h,u.sub1,c.height-.8*u.xHeight);var $=[{type:"elem",elem:c,marginLeft:S,marginRight:w}];P=xe.makeVList({positionType:"shift",positionData:h,children:$},e)}else if(l)d=Math.max(d,x,l.depth+.25*u.xHeight),P=xe.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:l,marginRight:w}]},e);else throw new Error("supsub must have either sup or sub.");var z=ej(a,"right")||"mord";return xe.makeSpan([z],[a,xe.makeSpan(["msupsub"],[P])],e)},mathmlBuilder(n,e){var r=!1,i,o;n.base&&n.base.type==="horizBrace"&&(o=!!n.sup,o===n.base.isOver&&(r=!0,i=n.base.isOver)),n.base&&(n.base.type==="op"||n.base.type==="operatorname")&&(n.base.parentIsSupSub=!0);var s=[qn(n.base,e)];n.sub&&s.push(qn(n.sub,e)),n.sup&&s.push(qn(n.sup,e));var a;if(r)a=i?"mover":"munder";else if(n.sub)if(n.sup){var u=n.base;u&&u.type==="op"&&u.limits&&e.style===It.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(e.style===It.DISPLAY||u.limits)?a="munderover":a="msubsup"}else{var c=n.base;c&&c.type==="op"&&c.limits&&(e.style===It.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===It.DISPLAY)?a="munder":a="msub"}else{var l=n.base;l&&l.type==="op"&&l.limits&&(e.style===It.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===It.DISPLAY)?a="mover":a="msup"}return new Ve.MathNode(a,s)}});Mm({type:"atom",htmlBuilder(n,e){return xe.mathsym(n.text,n.mode,e,["m"+n.family])},mathmlBuilder(n,e){var r=new Ve.MathNode("mo",[Da(n.text,n.mode)]);if(n.family==="bin"){var i=JL(n,e);i==="bold-italic"&&r.setAttribute("mathvariant",i)}else n.family==="punct"?r.setAttribute("separator","true"):(n.family==="open"||n.family==="close")&&r.setAttribute("stretchy","false");return r}});var Bme={mi:"italic",mn:"normal",mtext:"normal"};Mm({type:"mathord",htmlBuilder(n,e){return xe.makeOrd(n,e,"mathord")},mathmlBuilder(n,e){var r=new Ve.MathNode("mi",[Da(n.text,n.mode,e)]),i=JL(n,e)||"italic";return i!==Bme[r.type]&&r.setAttribute("mathvariant",i),r}});Mm({type:"textord",htmlBuilder(n,e){return xe.makeOrd(n,e,"textord")},mathmlBuilder(n,e){var r=Da(n.text,n.mode,e),i=JL(n,e)||"normal",o;return n.mode==="text"?o=new Ve.MathNode("mtext",[r]):/[0-9]/.test(n.text)?o=new Ve.MathNode("mn",[r]):n.text==="\\prime"?o=new Ve.MathNode("mo",[r]):o=new Ve.MathNode("mi",[r]),i!==Bme[o.type]&&o.setAttribute("mathvariant",i),o}});var u9={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},d9={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Mm({type:"spacing",htmlBuilder(n,e){if(d9.hasOwnProperty(n.text)){var r=d9[n.text].className||"";if(n.mode==="text"){var i=xe.makeOrd(n,e,"textord");return i.classes.push(r),i}else return xe.makeSpan(["mspace",r],[xe.mathsym(n.text,n.mode,e)],e)}else{if(u9.hasOwnProperty(n.text))return xe.makeSpan(["mspace",u9[n.text]],[],e);throw new We('Unknown type of space "'+n.text+'"')}},mathmlBuilder(n,e){var r;if(d9.hasOwnProperty(n.text))r=new Ve.MathNode("mtext",[new Ve.TextNode("")]);else{if(u9.hasOwnProperty(n.text))return new Ve.MathNode("mspace");throw new We('Unknown type of space "'+n.text+'"')}return r}});var OJ=()=>{var n=new Ve.MathNode("mtd",[]);return n.setAttribute("width","50%"),n};Mm({type:"tag",mathmlBuilder(n,e){var r=new Ve.MathNode("mtable",[new Ve.MathNode("mtr",[OJ(),new Ve.MathNode("mtd",[of(n.body,e)]),OJ(),new Ve.MathNode("mtd",[of(n.tag,e)])])]);return r.setAttribute("width","100%"),r}});var DJ={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},IJ={"\\textbf":"textbf","\\textmd":"textmd"},bgt={"\\textit":"textit","\\textup":"textup"},RJ=(n,e)=>{var r=n.font;if(r){if(DJ[r])return e.withTextFontFamily(DJ[r]);if(IJ[r])return e.withTextFontWeight(IJ[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(bgt[r])};tt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(n,e){var{parser:r,funcName:i}=n,o=e[0];return{type:"text",mode:r.mode,body:Dr(o),font:i}},htmlBuilder(n,e){var r=RJ(n,e),i=ni(n.body,r,!0);return xe.makeSpan(["mord","text"],i,r)},mathmlBuilder(n,e){var r=RJ(n,e);return of(n.body,r)}});tt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:r}=n;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(n,e){var r=mn(n.body,e),i=xe.makeLineSpan("underline-line",e),o=e.fontMetrics().defaultRuleThickness,s=xe.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:o},{type:"elem",elem:i},{type:"kern",size:3*o},{type:"elem",elem:r}]},e);return xe.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(n,e){var r=new Ve.MathNode("mo",[new Ve.TextNode("")]);r.setAttribute("stretchy","true");var i=new Ve.MathNode("munder",[qn(n.body,e),r]);return i.setAttribute("accentunder","true"),i}});tt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(n,e){var{parser:r}=n;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(n,e){var r=mn(n.body,e),i=e.fontMetrics().axisHeight,o=.5*(r.height-i-(r.depth+i));return xe.makeVList({positionType:"shift",positionData:o,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(n,e){return new Ve.MathNode("mpadded",[qn(n.body,e)],["vcenter"])}});tt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(n,e,r){throw new We("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(n,e){for(var r=LJ(n),i=[],o=e.havingStyle(e.style.text()),s=0;s<r.length;s++){var a=r[s];a==="~"&&(a="\\textasciitilde"),i.push(xe.makeSymbol(a,"Typewriter-Regular",n.mode,o,["mord","texttt"]))}return xe.makeSpan(["mord","text"].concat(o.sizingClasses(e)),xe.tryCombineChars(i),o)},mathmlBuilder(n,e){var r=new Ve.TextNode(LJ(n)),i=new Ve.MathNode("mtext",[r]);return i.setAttribute("mathvariant","monospace"),i}});var LJ=n=>n.body.replace(/ /g,n.star?"":""),Dh=ume,Hme=`[ \r
	]`,wgt="\\\\[a-zA-Z@]+",kgt="\\\\[^\uD800-\uDFFF]",Sgt="("+wgt+")"+Hme+"*",Cgt=`\\\\(
|[ \r	]+
?)[ \r	]*`,ij="[-]",_gt=new RegExp(ij+"+$"),Agt="("+Hme+"+)|"+(Cgt+"|")+"([!-\\[\\]---]"+(ij+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(ij+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Sgt)+("|"+kgt+")");class zJ{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Agt,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Vs("EOF",new es(this,r,r));var i=this.tokenRegex.exec(e);if(i===null||i.index!==r)throw new We("Unexpected character: '"+e[r]+"'",new Vs(e[r],new es(this,r,r+1)));var o=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[o]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Vs(o,new es(this,r,this.tokenRegex.lastIndex))}}class Tgt{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new We("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,i){if(i===void 0&&(i=!1),i){for(var o=0;o<this.undefStack.length;o++)delete this.undefStack[o][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var Pgt=Nme;K("\\noexpand",function(n){var e=n.popToken();return n.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});K("\\expandafter",function(n){var e=n.popToken();return n.expandOnce(!0),{tokens:[e],numArgs:0}});K("\\@firstoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[0],numArgs:0}});K("\\@secondoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[1],numArgs:0}});K("\\@ifnextchar",function(n){var e=n.consumeArgs(3);n.consumeSpaces();var r=n.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});K("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");K("\\TextOrMath",function(n){var e=n.consumeArgs(2);return n.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var FJ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};K("\\char",function(n){var e=n.popToken(),r,i="";if(e.text==="'")r=8,e=n.popToken();else if(e.text==='"')r=16,e=n.popToken();else if(e.text==="`")if(e=n.popToken(),e.text[0]==="\\")i=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new We("\\char` missing argument");i=e.text.charCodeAt(0)}else r=10;if(r){if(i=FJ[e.text],i==null||i>=r)throw new We("Invalid base-"+r+" digit "+e.text);for(var o;(o=FJ[n.future().text])!=null&&o<r;)i*=r,i+=o,n.popToken()}return"\\@char{"+i+"}"});var lz=(n,e,r,i)=>{var o=n.consumeArg().tokens;if(o.length!==1)throw new We("\\newcommand's first argument must be a macro name");var s=o[0].text,a=n.isDefined(s);if(a&&!e)throw new We("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!a&&!r)throw new We("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var l=0;if(o=n.consumeArg().tokens,o.length===1&&o[0].text==="["){for(var c="",u=n.expandNextToken();u.text!=="]"&&u.text!=="EOF";)c+=u.text,u=n.expandNextToken();if(!c.match(/^\s*[0-9]+\s*$/))throw new We("Invalid number of arguments: "+c);l=parseInt(c),o=n.consumeArg().tokens}return a&&i||n.macros.set(s,{tokens:o,numArgs:l}),""};K("\\newcommand",n=>lz(n,!1,!0,!1));K("\\renewcommand",n=>lz(n,!0,!1,!1));K("\\providecommand",n=>lz(n,!0,!0,!0));K("\\message",n=>{var e=n.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});K("\\errmessage",n=>{var e=n.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});K("\\show",n=>{var e=n.popToken(),r=e.text;return console.log(e,n.macros.get(r),Dh[r],Xn.math[r],Xn.text[r]),""});K("\\bgroup","{");K("\\egroup","}");K("~","\\nobreakspace");K("\\lq","`");K("\\rq","'");K("\\aa","\\r a");K("\\AA","\\r A");K("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");K("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");K("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");K("","\\mathscr{B}");K("","\\mathscr{E}");K("","\\mathscr{F}");K("","\\mathscr{H}");K("","\\mathscr{I}");K("","\\mathscr{L}");K("","\\mathscr{M}");K("","\\mathscr{R}");K("","\\mathfrak{C}");K("","\\mathfrak{H}");K("","\\mathfrak{Z}");K("\\Bbbk","\\Bbb{k}");K("","\\cdotp");K("\\llap","\\mathllap{\\textrm{#1}}");K("\\rlap","\\mathrlap{\\textrm{#1}}");K("\\clap","\\mathclap{\\textrm{#1}}");K("\\mathstrut","\\vphantom{(}");K("\\underbar","\\underline{\\text{#1}}");K("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');K("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");K("\\ne","\\neq");K("","\\neq");K("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");K("","\\notin");K("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");K("","\\perp");K("","\\mathclose{!\\mkern-0.8mu!}");K("","\\notni");K("","\\ulcorner");K("","\\urcorner");K("","\\llcorner");K("","\\lrcorner");K("","\\copyright");K("","\\textregistered");K("","\\textregistered");K("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');K("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');K("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');K("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');K("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");K("","\\vdots");K("\\varGamma","\\mathit{\\Gamma}");K("\\varDelta","\\mathit{\\Delta}");K("\\varTheta","\\mathit{\\Theta}");K("\\varLambda","\\mathit{\\Lambda}");K("\\varXi","\\mathit{\\Xi}");K("\\varPi","\\mathit{\\Pi}");K("\\varSigma","\\mathit{\\Sigma}");K("\\varUpsilon","\\mathit{\\Upsilon}");K("\\varPhi","\\mathit{\\Phi}");K("\\varPsi","\\mathit{\\Psi}");K("\\varOmega","\\mathit{\\Omega}");K("\\substack","\\begin{subarray}{c}#1\\end{subarray}");K("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");K("\\boxed","\\fbox{$\\displaystyle{#1}$}");K("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");K("\\implies","\\DOTSB\\;\\Longrightarrow\\;");K("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");K("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");K("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var $J={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};K("\\dots",function(n){var e="\\dotso",r=n.expandAfterFuture().text;return r in $J?e=$J[r]:(r.slice(0,4)==="\\not"||r in Xn.math&&["bin","rel"].includes(Xn.math[r].group))&&(e="\\dotsb"),e});var cz={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};K("\\dotso",function(n){var e=n.future().text;return e in cz?"\\ldots\\,":"\\ldots"});K("\\dotsc",function(n){var e=n.future().text;return e in cz&&e!==","?"\\ldots\\,":"\\ldots"});K("\\cdots",function(n){var e=n.future().text;return e in cz?"\\@cdots\\,":"\\@cdots"});K("\\dotsb","\\cdots");K("\\dotsm","\\cdots");K("\\dotsi","\\!\\cdots");K("\\dotsx","\\ldots\\,");K("\\DOTSI","\\relax");K("\\DOTSB","\\relax");K("\\DOTSX","\\relax");K("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");K("\\,","\\tmspace+{3mu}{.1667em}");K("\\thinspace","\\,");K("\\>","\\mskip{4mu}");K("\\:","\\tmspace+{4mu}{.2222em}");K("\\medspace","\\:");K("\\;","\\tmspace+{5mu}{.2777em}");K("\\thickspace","\\;");K("\\!","\\tmspace-{3mu}{.1667em}");K("\\negthinspace","\\!");K("\\negmedspace","\\tmspace-{4mu}{.2222em}");K("\\negthickspace","\\tmspace-{5mu}{.277em}");K("\\enspace","\\kern.5em ");K("\\enskip","\\hskip.5em\\relax");K("\\quad","\\hskip1em\\relax");K("\\qquad","\\hskip2em\\relax");K("\\tag","\\@ifstar\\tag@literal\\tag@paren");K("\\tag@paren","\\tag@literal{({#1})}");K("\\tag@literal",n=>{if(n.macros.get("\\df@tag"))throw new We("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});K("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");K("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");K("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");K("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");K("\\newline","\\\\\\relax");K("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var qme=Je(bc["Main-Regular"][84][1]-.7*bc["Main-Regular"][65][1]);K("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+qme+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");K("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+qme+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");K("\\hspace","\\@ifstar\\@hspacer\\@hspace");K("\\@hspace","\\hskip #1\\relax");K("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");K("\\ordinarycolon",":");K("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");K("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');K("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');K("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');K("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');K("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');K("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');K("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');K("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');K("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');K("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');K("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');K("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');K("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');K("","\\dblcolon");K("","\\eqcolon");K("","\\coloneqq");K("","\\eqqcolon");K("","\\Coloneqq");K("\\ratio","\\vcentcolon");K("\\coloncolon","\\dblcolon");K("\\colonequals","\\coloneqq");K("\\coloncolonequals","\\Coloneqq");K("\\equalscolon","\\eqqcolon");K("\\equalscoloncolon","\\Eqqcolon");K("\\colonminus","\\coloneq");K("\\coloncolonminus","\\Coloneq");K("\\minuscolon","\\eqcolon");K("\\minuscoloncolon","\\Eqcolon");K("\\coloncolonapprox","\\Colonapprox");K("\\coloncolonsim","\\Colonsim");K("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");K("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");K("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");K("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");K("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");K("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");K("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");K("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");K("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");K("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");K("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");K("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");K("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");K("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");K("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");K("\\ngeqq","\\html@mathml{\\@ngeqq}{}");K("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");K("\\nleqq","\\html@mathml{\\@nleqq}{}");K("\\nleqslant","\\html@mathml{\\@nleqslant}{}");K("\\nshortmid","\\html@mathml{\\@nshortmid}{}");K("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");K("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");K("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");K("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");K("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");K("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");K("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");K("\\imath","\\html@mathml{\\@imath}{}");K("\\jmath","\\html@mathml{\\@jmath}{}");K("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");K("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");K("","\\llbracket");K("","\\rrbracket");K("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");K("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");K("","\\lBrace");K("","\\rBrace");K("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");K("","\\minuso");K("\\darr","\\downarrow");K("\\dArr","\\Downarrow");K("\\Darr","\\Downarrow");K("\\lang","\\langle");K("\\rang","\\rangle");K("\\uarr","\\uparrow");K("\\uArr","\\Uparrow");K("\\Uarr","\\Uparrow");K("\\N","\\mathbb{N}");K("\\R","\\mathbb{R}");K("\\Z","\\mathbb{Z}");K("\\alef","\\aleph");K("\\alefsym","\\aleph");K("\\Alpha","\\mathrm{A}");K("\\Beta","\\mathrm{B}");K("\\bull","\\bullet");K("\\Chi","\\mathrm{X}");K("\\clubs","\\clubsuit");K("\\cnums","\\mathbb{C}");K("\\Complex","\\mathbb{C}");K("\\Dagger","\\ddagger");K("\\diamonds","\\diamondsuit");K("\\empty","\\emptyset");K("\\Epsilon","\\mathrm{E}");K("\\Eta","\\mathrm{H}");K("\\exist","\\exists");K("\\harr","\\leftrightarrow");K("\\hArr","\\Leftrightarrow");K("\\Harr","\\Leftrightarrow");K("\\hearts","\\heartsuit");K("\\image","\\Im");K("\\infin","\\infty");K("\\Iota","\\mathrm{I}");K("\\isin","\\in");K("\\Kappa","\\mathrm{K}");K("\\larr","\\leftarrow");K("\\lArr","\\Leftarrow");K("\\Larr","\\Leftarrow");K("\\lrarr","\\leftrightarrow");K("\\lrArr","\\Leftrightarrow");K("\\Lrarr","\\Leftrightarrow");K("\\Mu","\\mathrm{M}");K("\\natnums","\\mathbb{N}");K("\\Nu","\\mathrm{N}");K("\\Omicron","\\mathrm{O}");K("\\plusmn","\\pm");K("\\rarr","\\rightarrow");K("\\rArr","\\Rightarrow");K("\\Rarr","\\Rightarrow");K("\\real","\\Re");K("\\reals","\\mathbb{R}");K("\\Reals","\\mathbb{R}");K("\\Rho","\\mathrm{P}");K("\\sdot","\\cdot");K("\\sect","\\S");K("\\spades","\\spadesuit");K("\\sub","\\subset");K("\\sube","\\subseteq");K("\\supe","\\supseteq");K("\\Tau","\\mathrm{T}");K("\\thetasym","\\vartheta");K("\\weierp","\\wp");K("\\Zeta","\\mathrm{Z}");K("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");K("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");K("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");K("\\bra","\\mathinner{\\langle{#1}|}");K("\\ket","\\mathinner{|{#1}\\rangle}");K("\\braket","\\mathinner{\\langle{#1}\\rangle}");K("\\Bra","\\left\\langle#1\\right|");K("\\Ket","\\left|#1\\right\\rangle");var Vme=n=>e=>{var r=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var c=h=>f=>{n&&(f.macros.set("|",a),o.length&&f.macros.set("\\|",l));var m=h;if(!h&&o.length){var v=f.future();v.text==="|"&&(f.popToken(),m=!0)}return{tokens:m?o:i,numArgs:0}};e.macros.set("|",c(!1)),o.length&&e.macros.set("\\|",c(!0));var u=e.consumeArg().tokens,d=e.expandTokens([...s,...u,...r]);return e.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};K("\\bra@ket",Vme(!1));K("\\bra@set",Vme(!0));K("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");K("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");K("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");K("\\angln","{\\angl n}");K("\\blue","\\textcolor{##6495ed}{#1}");K("\\orange","\\textcolor{##ffa500}{#1}");K("\\pink","\\textcolor{##ff00af}{#1}");K("\\red","\\textcolor{##df0030}{#1}");K("\\green","\\textcolor{##28ae7b}{#1}");K("\\gray","\\textcolor{gray}{#1}");K("\\purple","\\textcolor{##9d38bd}{#1}");K("\\blueA","\\textcolor{##ccfaff}{#1}");K("\\blueB","\\textcolor{##80f6ff}{#1}");K("\\blueC","\\textcolor{##63d9ea}{#1}");K("\\blueD","\\textcolor{##11accd}{#1}");K("\\blueE","\\textcolor{##0c7f99}{#1}");K("\\tealA","\\textcolor{##94fff5}{#1}");K("\\tealB","\\textcolor{##26edd5}{#1}");K("\\tealC","\\textcolor{##01d1c1}{#1}");K("\\tealD","\\textcolor{##01a995}{#1}");K("\\tealE","\\textcolor{##208170}{#1}");K("\\greenA","\\textcolor{##b6ffb0}{#1}");K("\\greenB","\\textcolor{##8af281}{#1}");K("\\greenC","\\textcolor{##74cf70}{#1}");K("\\greenD","\\textcolor{##1fab54}{#1}");K("\\greenE","\\textcolor{##0d923f}{#1}");K("\\goldA","\\textcolor{##ffd0a9}{#1}");K("\\goldB","\\textcolor{##ffbb71}{#1}");K("\\goldC","\\textcolor{##ff9c39}{#1}");K("\\goldD","\\textcolor{##e07d10}{#1}");K("\\goldE","\\textcolor{##a75a05}{#1}");K("\\redA","\\textcolor{##fca9a9}{#1}");K("\\redB","\\textcolor{##ff8482}{#1}");K("\\redC","\\textcolor{##f9685d}{#1}");K("\\redD","\\textcolor{##e84d39}{#1}");K("\\redE","\\textcolor{##bc2612}{#1}");K("\\maroonA","\\textcolor{##ffbde0}{#1}");K("\\maroonB","\\textcolor{##ff92c6}{#1}");K("\\maroonC","\\textcolor{##ed5fa6}{#1}");K("\\maroonD","\\textcolor{##ca337c}{#1}");K("\\maroonE","\\textcolor{##9e034e}{#1}");K("\\purpleA","\\textcolor{##ddd7ff}{#1}");K("\\purpleB","\\textcolor{##c6b9fc}{#1}");K("\\purpleC","\\textcolor{##aa87ff}{#1}");K("\\purpleD","\\textcolor{##7854ab}{#1}");K("\\purpleE","\\textcolor{##543b78}{#1}");K("\\mintA","\\textcolor{##f5f9e8}{#1}");K("\\mintB","\\textcolor{##edf2df}{#1}");K("\\mintC","\\textcolor{##e0e5cc}{#1}");K("\\grayA","\\textcolor{##f6f7f7}{#1}");K("\\grayB","\\textcolor{##f0f1f2}{#1}");K("\\grayC","\\textcolor{##e3e5e6}{#1}");K("\\grayD","\\textcolor{##d6d8da}{#1}");K("\\grayE","\\textcolor{##babec2}{#1}");K("\\grayF","\\textcolor{##888d93}{#1}");K("\\grayG","\\textcolor{##626569}{#1}");K("\\grayH","\\textcolor{##3b3e40}{#1}");K("\\grayI","\\textcolor{##21242c}{#1}");K("\\kaBlue","\\textcolor{##314453}{#1}");K("\\kaGreen","\\textcolor{##71B307}{#1}");var Wme={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Mgt{constructor(e,r,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Tgt(Pgt,r.macros),this.mode=i,this.stack=[]}feed(e){this.lexer=new zJ(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,i,o;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:o,end:i}=this.consumeArg(["]"])}else({tokens:o,start:r,end:i}=this.consumeArg());return this.pushToken(new Vs("EOF",i.loc)),this.pushTokens(o),new Vs("",es.range(r,i))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],i=e&&e.length>0;i||this.consumeSpaces();var o=this.future(),s,a=0,l=0;do{if(s=this.popToken(),r.push(s),s.text==="{")++a;else if(s.text==="}"){if(--a,a===-1)throw new We("Extra }",s)}else if(s.text==="EOF")throw new We("Unexpected end of input in a macro argument, expected '"+(e&&i?e[l]:"}")+"'",s);if(e&&i)if((a===0||a===1&&e[l]==="{")&&s.text===e[l]){if(++l,l===e.length){r.splice(-l,l);break}}else l=0}while(a!==0||i);return o.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:o,end:s}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new We("The length of delimiters doesn't match the number of args!");for(var i=r[0],o=0;o<i.length;o++){var s=this.popToken();if(i[o]!==s.text)throw new We("Use of the macro doesn't match its definition",s)}}for(var a=[],l=0;l<e;l++)a.push(this.consumeArg(r&&r[l+1]).tokens);return a}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new We("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),i=r.text,o=r.noexpand?null:this._getExpansion(i);if(o==null||e&&o.unexpandable){if(e&&o==null&&i[0]==="\\"&&!this.isDefined(i))throw new We("Undefined control sequence: "+i);return this.pushToken(r),!1}this.countExpansion(1);var s=o.tokens,a=this.consumeArgs(o.numArgs,o.delimiters);if(o.numArgs){s=s.slice();for(var l=s.length-1;l>=0;--l){var c=s[l];if(c.text==="#"){if(l===0)throw new We("Incomplete placeholder at end of macro body",c);if(c=s[--l],c.text==="#")s.splice(l+1,1);else if(/^[1-9]$/.test(c.text))s.splice(l,2,...a[+c.text-1]);else throw new We("Not a valid argument number",c)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Vs(e)]):void 0}expandTokens(e){var r=[],i=this.stack.length;for(this.pushTokens(e);this.stack.length>i;)if(this.expandOnce(!0)===!1){var o=this.stack.pop();o.treatAsRelax&&(o.noexpand=!1,o.treatAsRelax=!1),r.push(o)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(i=>i.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var i=this.lexer.catcodes[e];if(i!=null&&i!==13)return}var o=typeof r=="function"?r(this):r;if(typeof o=="string"){var s=0;if(o.indexOf("#")!==-1)for(var a=o.replace(/##/g,"");a.indexOf("#"+(s+1))!==-1;)++s;for(var l=new zJ(o,this.settings),c=[],u=l.lex();u.text!=="EOF";)c.push(u),u=l.lex();c.reverse();var d={tokens:c,numArgs:s};return d}return o}isDefined(e){return this.macros.has(e)||Dh.hasOwnProperty(e)||Xn.math.hasOwnProperty(e)||Xn.text.hasOwnProperty(e)||Wme.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Dh.hasOwnProperty(e)&&!Dh[e].primitive}}var BJ=/^[]/,s4=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),h9={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},HJ={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class k7{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Mgt(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new We("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Vs("}")),this.gullet.pushTokens(e);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,i}parseExpression(e,r){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var o=this.fetch();if(k7.endOfExpression.indexOf(o.text)!==-1||r&&o.text===r||e&&Dh[o.text]&&Dh[o.text].infix)break;var s=this.parseAtom(r);if(s){if(s.type==="internal")continue}else break;i.push(s)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(e){for(var r=-1,i,o=0;o<e.length;o++)if(e[o].type==="infix"){if(r!==-1)throw new We("only one infix operator per group",e[o].token);r=o,i=e[o].replaceWith}if(r!==-1&&i){var s,a,l=e.slice(0,r),c=e.slice(r+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},c.length===1&&c[0].type==="ordgroup"?a=c[0]:a={type:"ordgroup",mode:this.mode,body:c};var u;return i==="\\\\abovefrac"?u=this.callFunction(i,[s,e[r],a],[]):u=this.callFunction(i,[s,a],[]),[u]}else return e}handleSupSubscript(e){var r=this.fetch(),i=r.text;this.consume(),this.consumeSpaces();var o;do{var s;o=this.parseGroup(e)}while(((s=o)==null?void 0:s.type)==="internal");if(!o)throw new We("Expected group after '"+i+"'",r);return o}formatUnsupportedCmd(e){for(var r=[],i=0;i<e.length;i++)r.push({type:"textord",mode:"text",text:e[i]});var o={type:"text",mode:this.mode,body:r},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[o]};return s}parseAtom(e){var r=this.parseGroup("atom",e);if(r?.type==="internal"||this.mode==="text")return r;for(var i,o;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(r&&r.type==="op"){var a=s.text==="\\limits";r.limits=a,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=s.text==="\\limits");else throw new We("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(i)throw new We("Double superscript",s);i=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(o)throw new We("Double subscript",s);o=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(i)throw new We("Double superscript",s);var l={type:"textord",mode:this.mode,text:"\\prime"},c=[l];for(this.consume();this.fetch().text==="'";)c.push(l),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:c}}else if(s4[s.text]){var u=BJ.test(s.text),d=[];for(d.push(new Vs(s4[s.text])),this.consume();;){var h=this.fetch().text;if(!s4[h]||BJ.test(h)!==u)break;d.unshift(new Vs(s4[h])),this.consume()}var f=this.subparse(d);u?o={type:"ordgroup",mode:"math",body:f}:i={type:"ordgroup",mode:"math",body:f}}else break}return i||o?{type:"supsub",mode:this.mode,base:r,sup:i,sub:o}:r}parseFunction(e,r){var i=this.fetch(),o=i.text,s=Dh[o];if(!s)return null;if(this.consume(),r&&r!=="atom"&&!s.allowedInArgument)throw new We("Got function '"+o+"' with no arguments"+(r?" as "+r:""),i);if(this.mode==="text"&&!s.allowedInText)throw new We("Can't use function '"+o+"' in text mode",i);if(this.mode==="math"&&s.allowedInMath===!1)throw new We("Can't use function '"+o+"' in math mode",i);var{args:a,optArgs:l}=this.parseArguments(o,s);return this.callFunction(o,a,l,i,e)}callFunction(e,r,i,o,s){var a={funcName:e,parser:this,token:o,breakOnTokenText:s},l=Dh[e];if(l&&l.handler)return l.handler(a,r,i);throw new We("No function handler for "+e)}parseArguments(e,r){var i=r.numArgs+r.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var o=[],s=[],a=0;a<i;a++){var l=r.argTypes&&r.argTypes[a],c=a<r.numOptionalArgs;(r.primitive&&l==null||r.type==="sqrt"&&a===1&&s[0]==null)&&(l="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",l,c);if(c)s.push(u);else if(u!=null)o.push(u);else throw new We("Null argument, please report this as a bug")}return{args:o,optArgs:s}}parseGroupOfType(e,r,i){switch(r){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,r);case"hbox":{var o=this.parseArgumentGroup(i,"text");return o!=null?{type:"styling",mode:o.mode,body:[o],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",i);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(i)throw new We("A primitive argument cannot be optional");var a=this.parseGroup(e);if(a==null)throw new We("Expected group as "+e,this.fetch());return a}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new We("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var i=this.gullet.scanArgument(r);if(i==null)return null;for(var o="",s;(s=this.fetch()).text!=="EOF";)o+=s.text,this.consume();return this.consume(),i.text=o,i}parseRegexGroup(e,r){for(var i=this.fetch(),o=i,s="",a;(a=this.fetch()).text!=="EOF"&&e.test(s+a.text);)o=a,s+=o.text,this.consume();if(s==="")throw new We("Invalid "+r+": '"+i.text+"'",i);return i.range(o,s)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var i=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!i)throw new We("Invalid color: '"+r.text+"'",r);var o=i[0];return/^[0-9a-f]{6}$/i.test(o)&&(o="#"+o),{type:"color-token",mode:this.mode,color:o}}parseSizeGroup(e){var r,i=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",i=!0);var o=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!o)throw new We("Invalid size: '"+r.text+"'",r);var s={number:+(o[1]+o[2]),unit:o[3]};if(!tme(s))throw new We("Invalid unit: '"+s.unit+"'",r);return{type:"size",mode:this.mode,value:s,isBlank:i}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var i=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(e,r){var i=this.gullet.scanArgument(e);if(i==null)return null;var o=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:i.loc,body:s};return r&&this.switchMode(o),a}parseGroup(e,r){var i=this.fetch(),o=i.text,s;if(o==="{"||o==="\\begingroup"){this.consume();var a=o==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,a),c=this.fetch();this.expect(a),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:es.range(i,c),body:l,semisimple:o==="\\begingroup"||void 0}}else if(s=this.parseFunction(r,e)||this.parseSymbol(),s==null&&o[0]==="\\"&&!Wme.hasOwnProperty(o)){if(this.settings.throwOnError)throw new We("Undefined control sequence: "+o,i);s=this.formatUnsupportedCmd(o),this.consume()}return s}formLigatures(e){for(var r=e.length-1,i=0;i<r;++i){var o=e[i],s=o.text;s==="-"&&e[i+1].text==="-"&&(i+1<r&&e[i+2].text==="-"?(e.splice(i,3,{type:"textord",mode:"text",loc:es.range(o,e[i+2]),text:"---"}),r-=2):(e.splice(i,2,{type:"textord",mode:"text",loc:es.range(o,e[i+1]),text:"--"}),r-=1)),(s==="'"||s==="`")&&e[i+1].text===s&&(e.splice(i,2,{type:"textord",mode:"text",loc:es.range(o,e[i+1]),text:s+s}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var i=r.slice(5),o=i.charAt(0)==="*";if(o&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new We(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:o}}HJ.hasOwnProperty(r[0])&&!Xn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=HJ[r[0]]+r.slice(1));var s=_gt.exec(r);s&&(r=r.substring(0,s.index),r==="i"?r="":r==="j"&&(r=""));var a;if(Xn[this.mode][r]){this.settings.strict&&this.mode==="math"&&QN.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var l=Xn[this.mode][r].group,c=es.range(e),u;if(y0t.hasOwnProperty(l)){var d=l;u={type:"atom",mode:this.mode,family:d,loc:c,text:r}}else u={type:l,mode:this.mode,loc:c,text:r};a=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(eme(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),a={type:"textord",mode:"text",loc:es.range(e),text:r};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var f=s[0][h];if(!h9[f])throw new We("Unknown accent ' "+f+"'",e);var m=h9[f][this.mode]||h9[f].text;if(!m)throw new We("Accent "+f+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:es.range(e),label:m,isStretchy:!1,isShifty:!0,base:a}}return a}}k7.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var uz=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new k7(e,r);delete i.gullet.macros.current["\\df@tag"];var o=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new We("\\tag works only in display equations");o=[{type:"tag",mode:"text",body:o,tag:i.subparse([new Vs("\\df@tag")])}]}return o},Ume=function(e,r,i){r.textContent="";var o=dz(e,i).toNode();r.appendChild(o)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Ume=function(){throw new We("KaTeX doesn't work in quirks mode.")});var Egt=function(e,r){var i=dz(e,r).toMarkup();return i},Ngt=function(e,r){var i=new UL(r);return uz(e,i)},Kme=function(e,r,i){if(i.throwOnError||!(e instanceof We))throw e;var o=xe.makeSpan(["katex-error"],[new Oa(r)]);return o.setAttribute("title",e.toString()),o.setAttribute("style","color:"+i.errorColor),o},dz=function(e,r){var i=new UL(r);try{var o=uz(e,i);return $0t(o,e,i)}catch(s){return Kme(s,e,i)}},jgt=function(e,r){var i=new UL(r);try{var o=uz(e,i);return B0t(o,e,i)}catch(s){return Kme(s,e,i)}},Ogt="0.16.27",Dgt={Span:Dw,Anchor:YL,SymbolNode:Oa,SvgNode:ud,PathNode:rf,LineNode:JN},Gme={version:Ogt,render:Ume,renderToString:Egt,ParseError:We,SETTINGS_SCHEMA:hS,__parse:Ngt,__renderToDomTree:dz,__renderToHTMLTree:jgt,__setFontMetrics:c0t,__defineSymbol:j,__defineFunction:tt,__defineMacro:K,__domTree:Dgt};class S7{constructor(e){this.#i=!1,this.onShow=()=>{},this.onHide=()=>{},this.#c=r=>{Ic(r,this.element,{placement:this.#n.placement??"top",middleware:[WI(),gm(this.#s),Fit(this.#l),...this.#r],...this.#n}).then(({x:i,y:o})=>{Object.assign(this.element.style,{left:`${i}px`,top:`${o}px`})}).catch(console.error)},this.#d=r=>this.#a!==r.dom.parentElement,this.#f=(r,i)=>{const{state:o,composing:s}=r,{selection:a,doc:l}=o,{ranges:c}=a,u=Math.min(...c.map(m=>m.$from.pos)),d=Math.max(...c.map(m=>m.$to.pos)),h=i&&i.doc.eq(l)&&i.selection.eq(a);if(this.#i||((this.#a??r.dom.parentElement??document.body).appendChild(this.element),this.#i=!0),s||h)return;if(this.#o?.(),this.#o=void 0,!this.#e(r,i)){this.hide();return}const f={getBoundingClientRect:()=>_3(r,u,d),contextElement:r.dom};this.#d(r)?this.#o=bZ(f,this.element,()=>this.#c(f)):this.#c(f),this.show()},this.update=(r,i)=>{this.#u(r,i)},this.destroy=()=>{this.#o?.(),this.#u.cancel()},this.show=(r,i)=>{if(this.element.dataset.show="true",r){this.#o?.(),this.#o=void 0;const o={...r,contextElement:i?.dom};i&&this.#d(i)?this.#o=bZ(o,this.element,()=>this.#c(o)):this.#c(o)}this.onShow()},this.hide=()=>{this.element.dataset.show!=="false"&&(this.element.dataset.show="false",this.onHide())},this.element=e.content,this.#t=e.debounce??200,this.#e=e.shouldShow??this.#h,this.#s=e.offset,this.#l=e.shift,this.#r=e.middleware??[],this.#n=e.floatingUIOptions??{},this.#a=e.root,this.element.dataset.show="false",this.#u=qb(this.#f,this.#t)}#t;#e;#r;#n;#a;#i;#o;#s;#l;#u;#c;#d;#f;#h(e){const{doc:r,selection:i}=e.state,{empty:o,from:s,to:a}=i,l=!r.textBetween(s,a).length&&e.state.selection instanceof xt,c=this.element.contains(document.activeElement),u=!e.hasFocus()&&!c,d=!e.editable;return!(u||o||l||d)}}function C7(n){const e=En({},`${n}_TOOLTIP_SPEC`),r=Kr(o=>{const s=o.get(e.key);return new ar({key:new lr(`${n}_TOOLTIP`),...s})}),i=[e,r];return i.key=e.key,i.pluginKey=r.key,e.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${n}`},r.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${n}`},i}function Igt(){return{enter:{mathFlow:n,mathFlowFenceMeta:e,mathText:s},exit:{mathFlow:o,mathFlowFence:i,mathFlowFenceMeta:r,mathFlowValue:l,mathText:a,mathTextData:l}};function n(c){const u={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[u]}},c)}function e(){this.buffer()}function r(){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,u.meta=c}function i(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function o(c){const u=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),d=this.stack[this.stack.length-1];d.type,this.exit(c),d.value=u;const h=d.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:u}),this.data.mathFlowInside=void 0}function s(c){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},c),this.buffer()}function a(c){const u=this.resume(),d=this.stack[this.stack.length-1];d.type,this.exit(c),d.value=u,d.data.hChildren.push({type:"text",value:u})}function l(c){this.config.enter.data.call(this,c),this.config.exit.data.call(this,c)}}function Rgt(n){let e=(n||{}).singleDollarTextMath;return e==null&&(e=!0),i.peek=o,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:r,inlineMath:i}};function r(s,a,l,c){const u=s.value||"",d=l.createTracker(c),h="$".repeat(Math.max(rte(u,"$")+1,2)),f=l.enter("mathFlow");let m=d.move(h);if(s.meta){const v=l.enter("mathFlowMeta");m+=d.move(l.safe(s.meta,{after:`
`,before:m,encode:["$"],...d.current()})),v()}return m+=d.move(`
`),u&&(m+=d.move(u+`
`)),m+=d.move(h),f(),m}function i(s,a,l){let c=s.value||"",u=1;for(e||u++;new RegExp("(^|[^$])"+"\\$".repeat(u)+"([^$]|$)").test(c);)u++;const d="$".repeat(u);/[^ \r\n]/.test(c)&&(/^[ \r\n]/.test(c)&&/[ \r\n]$/.test(c)||/^\$|\$$/.test(c))&&(c=" "+c+" ");let h=-1;for(;++h<l.unsafe.length;){const f=l.unsafe[h];if(!f.atBreak)continue;const m=l.compilePattern(f);let v;for(;v=m.exec(c);){let x=v.index;c.codePointAt(x)===10&&c.codePointAt(x-1)===13&&x--,c=c.slice(0,x)+" "+c.slice(v.index+1)}}return d+c+d}function o(){return"$"}}const Lgt={tokenize:zgt,concrete:!0,name:"mathFlow"},qJ={tokenize:Fgt,partial:!0};function zgt(n,e,r){const i=this,o=i.events[i.events.length-1],s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let a=0;return l;function l(S){return n.enter("mathFlow"),n.enter("mathFlowFence"),n.enter("mathFlowFenceSequence"),c(S)}function c(S){return S===36?(n.consume(S),a++,c):a<2?r(S):(n.exit("mathFlowFenceSequence"),tn(n,u,"whitespace")(S))}function u(S){return S===null||_t(S)?h(S):(n.enter("mathFlowFenceMeta"),n.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||_t(S)?(n.exit("chunkString"),n.exit("mathFlowFenceMeta"),h(S)):S===36?r(S):(n.consume(S),d)}function h(S){return n.exit("mathFlowFence"),i.interrupt?e(S):n.attempt(qJ,f,b)(S)}function f(S){return n.attempt({tokenize:w,partial:!0},b,m)(S)}function m(S){return(s?tn(n,v,"linePrefix",s+1):v)(S)}function v(S){return S===null?b(S):_t(S)?n.attempt(qJ,f,b)(S):(n.enter("mathFlowValue"),x(S))}function x(S){return S===null||_t(S)?(n.exit("mathFlowValue"),v(S)):(n.consume(S),x)}function b(S){return n.exit("mathFlow"),e(S)}function w(S,_,P){let A=0;return tn(S,T,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function T($){return S.enter("mathFlowFence"),S.enter("mathFlowFenceSequence"),E($)}function E($){return $===36?(A++,S.consume($),E):A<a?P($):(S.exit("mathFlowFenceSequence"),tn(S,L,"whitespace")($))}function L($){return $===null||_t($)?(S.exit("mathFlowFence"),_($)):P($)}}}function Fgt(n,e,r){const i=this;return o;function o(a){return a===null?e(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?r(a):e(a)}}function $gt(n){let r=(n||{}).singleDollarTextMath;return r==null&&(r=!0),{tokenize:i,resolve:Bgt,previous:Hgt,name:"mathText"};function i(o,s,a){let l=0,c,u;return d;function d(x){return o.enter("mathText"),o.enter("mathTextSequence"),h(x)}function h(x){return x===36?(o.consume(x),l++,h):l<2&&!r?a(x):(o.exit("mathTextSequence"),f(x))}function f(x){return x===null?a(x):x===36?(u=o.enter("mathTextSequence"),c=0,v(x)):x===32?(o.enter("space"),o.consume(x),o.exit("space"),f):_t(x)?(o.enter("lineEnding"),o.consume(x),o.exit("lineEnding"),f):(o.enter("mathTextData"),m(x))}function m(x){return x===null||x===32||x===36||_t(x)?(o.exit("mathTextData"),f(x)):(o.consume(x),m)}function v(x){return x===36?(o.consume(x),c++,v):c===l?(o.exit("mathTextSequence"),o.exit("mathText"),s(x)):(u.type="mathTextData",m(x))}}}function Bgt(n){let e=n.length-4,r=3,i,o;if((n[r][1].type==="lineEnding"||n[r][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=r;++i<e;)if(n[i][1].type==="mathTextData"){n[e][1].type="mathTextPadding",n[r][1].type="mathTextPadding",r+=2,e-=2;break}}for(i=r-1,e++;++i<=e;)o===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(o=i):(i===e||n[i][1].type==="lineEnding")&&(n[o][1].type="mathTextData",i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),e-=i-o-2,i=o+2),o=void 0);return n}function Hgt(n){return n!==36||this.events[this.events.length-1][1].type==="characterEscape"}function qgt(n){return{flow:{36:Lgt},text:{36:$gt(n)}}}const Vgt={};function Wgt(n){const e=this,r=n||Vgt,i=e.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(qgt(r)),s.push(Igt()),a.push(Rgt(r))}var Ugt=Object.defineProperty,VJ=Object.getOwnPropertySymbols,Kgt=Object.prototype.hasOwnProperty,Ggt=Object.prototype.propertyIsEnumerable,WJ=(n,e,r)=>e in n?Ugt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ygt=(n,e)=>{for(var r in e||(e={}))Kgt.call(e,r)&&WJ(n,r,e[r]);if(VJ)for(var r of VJ(e))Ggt.call(e,r)&&WJ(n,r,e[r]);return n};function Em(n,e){return Object.assign(n,{meta:Ygt({package:"@milkdown/components"},e)}),n}var Zgt=Object.defineProperty,UJ=Object.getOwnPropertySymbols,Xgt=Object.prototype.hasOwnProperty,Jgt=Object.prototype.propertyIsEnumerable,KJ=(n,e,r)=>e in n?Zgt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,hz=(n,e)=>{for(var r in e||(e={}))Xgt.call(e,r)&&KJ(n,r,e[r]);if(UJ)for(var r of UJ(e))Jgt.call(e,r)&&KJ(n,r,e[r]);return n};const Qgt={mode:"preview"},fd=En(hz({},Qgt),"linkTooltipStateCtx");Em(fd,{displayName:"State<link-tooltip>",group:"LinkTooltip"});const e1t={addLink:()=>{},editLink:()=>{},removeLink:()=>{}},Lg=En(hz({},e1t),"linkTooltipAPICtx");Em(fd,{displayName:"API<link-tooltip>",group:"LinkTooltip"});const t1t={linkIcon:"",editButton:"",removeButton:"",confirmButton:"Confirm ",onCopyLink:()=>{},inputPlaceholder:"Paste link..."},zg=En(hz({},t1t),"linkTooltipConfigCtx");Em(fd,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});const Yme=zt("ToggleLink",n=>()=>e=>{const{doc:r,selection:i}=e,o=bl.type(n);return r.rangeHasMark(i.from,i.to,o)?(n.get(Lg.key).removeLink(i.from,i.to),!0):(n.get(Lg.key).addLink(i.from,i.to),!0)}),Rw=C7("LINK_PREVIEW");Em(Rw[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"});Em(Rw[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});const _7=C7("LINK_EDIT");Em(_7[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"});Em(_7[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"});function hx({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}hx.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const n1t=qi({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:n,src:e,onConfirm:r,onCancel:i}){const o=mt(e);$p(e,l=>{o.value=l});const s=()=>{r(o.value)},a=l=>{l.stopPropagation(),l.key==="Enter"&&(l.preventDefault(),s()),l.key==="Escape"&&(l.preventDefault(),i())};return()=>Ae("div",{class:"link-edit"},Ae("input",{class:"input-area",placeholder:n.value.inputPlaceholder,onKeydown:a,onInput:l=>{o.value=l.target.value},value:o.value}),o.value?Ae(hx,{class:"button confirm",icon:n.value.confirmButton,onClick:s}):null)}});var r1t=Object.defineProperty,i1t=Object.defineProperties,o1t=Object.getOwnPropertyDescriptors,GJ=Object.getOwnPropertySymbols,s1t=Object.prototype.hasOwnProperty,a1t=Object.prototype.propertyIsEnumerable,Zme=n=>{throw TypeError(n)},YJ=(n,e,r)=>e in n?r1t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,a4=(n,e)=>{for(var r in e||(e={}))s1t.call(e,r)&&YJ(n,r,e[r]);if(GJ)for(var r of GJ(e))a1t.call(e,r)&&YJ(n,r,e[r]);return n},ZJ=(n,e)=>i1t(n,o1t(e)),Xme=(n,e,r)=>e.has(n)||Zme("Cannot "+r),wr=(n,e,r)=>(Xme(n,e,"read from private field"),r?r.call(n):e.get(n)),pu=(n,e,r)=>e.has(n)?Zme("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),Gf=(n,e,r,i)=>(Xme(n,e,"write to private field"),e.set(n,r),r),uv,uh,dh,pS,dv,mS,rp,oj,gS;const XJ={from:-1,to:-1,mark:null};class l1t{constructor(e,r){this.ctx=e,pu(this,uv),pu(this,uh),pu(this,dh,a4({},XJ)),pu(this,pS),pu(this,dv),pu(this,mS,mt("")),pu(this,rp,()=>{wr(this,uh).hide(),this.ctx.update(fd.key,s=>ZJ(a4({},s),{mode:"preview"})),Gf(this,dh,a4({},XJ))}),pu(this,oj,s=>{const a=this.ctx.get(fn),{from:l,to:c,mark:u}=wr(this,dh),d=bl.type(this.ctx),h=La.sanitize(s);if(u&&u.attrs.href===h){wr(this,rp).call(this);return}const f=a.state.tr;u&&f.removeMark(l,c,u),f.addMark(l,c,d.create({href:h})),a.dispatch(f),wr(this,rp).call(this)}),pu(this,gS,(s,a,l)=>{const c=this.ctx.get(zg.key);wr(this,dv).value=c,wr(this,mS).value=s,this.ctx.update(fd.key,d=>ZJ(a4({},d),{mode:"edit"}));const u=this.ctx.get(fn);u.dispatch(u.state.tr.setSelection(xt.create(u.state.doc,a,l))),wr(this,uh).show({getBoundingClientRect:()=>_3(u,a,l)},u),requestAnimationFrame(()=>{var d;(d=wr(this,uv).querySelector("input"))==null||d.focus()})}),this.update=s=>{const{state:a}=s,{selection:l}=a;if(!(l instanceof xt))return;const{from:c,to:u}=l;c===wr(this,dh).from&&u===wr(this,dh).to||wr(this,rp).call(this)},this.destroy=()=>{wr(this,pS).unmount(),wr(this,uh).destroy(),wr(this,uv).remove()},this.addLink=(s,a)=>{Gf(this,dh,{from:s,to:a,mark:null}),wr(this,gS).call(this,"",s,a)},this.editLink=(s,a,l)=>{Gf(this,dh,{from:a,to:l,mark:s}),wr(this,gS).call(this,s.attrs.href,a,l)},this.removeLink=(s,a)=>{const l=this.ctx.get(fn),c=l.state.tr;c.removeMark(s,a,bl.type(this.ctx)),l.dispatch(c),wr(this,rp).call(this)},Gf(this,dv,mt(this.ctx.get(zg.key)));const i=document.createElement("div");i.className="milkdown-link-edit";const o=Ll(n1t,{config:wr(this,dv),src:wr(this,mS),onConfirm:wr(this,oj),onCancel:wr(this,rp)});o.mount(i),Gf(this,pS,o),Gf(this,uv,i),Gf(this,uh,new S7({content:i,debounce:0,shouldShow:()=>!1})),wr(this,uh).onHide=()=>{requestAnimationFrame(()=>{r.dom.focus({preventScroll:!0})})},wr(this,uh).update(r)}}uv=new WeakMap;uh=new WeakMap;dh=new WeakMap;pS=new WeakMap;dv=new WeakMap;mS=new WeakMap;rp=new WeakMap;oj=new WeakMap;gS=new WeakMap;var c1t=Object.defineProperty,u1t=Object.defineProperties,d1t=Object.getOwnPropertyDescriptors,JJ=Object.getOwnPropertySymbols,h1t=Object.prototype.hasOwnProperty,f1t=Object.prototype.propertyIsEnumerable,QJ=(n,e,r)=>e in n?c1t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,p1t=(n,e)=>{for(var r in e||(e={}))h1t.call(e,r)&&QJ(n,r,e[r]);if(JJ)for(var r of JJ(e))f1t.call(e,r)&&QJ(n,r,e[r]);return n},m1t=(n,e)=>u1t(n,d1t(e));function g1t(n){let e;n.update(Lg.key,r=>m1t(p1t({},r),{addLink:(i,o)=>{e?.addLink(i,o)},editLink:(i,o,s)=>{e?.editLink(i,o,s)},removeLink:(i,o)=>{e?.removeLink(i,o)}})),n.set(_7.key,{view:r=>(e=new l1t(n,r),e)})}function y1t(n,e,r,i,o){let s={start:-1,end:-1};return r.nodesBetween(i,o,(a,l)=>{if(s.start>-1)return!1;s.start===-1&&n.isInSet(a.marks)&&e===a&&(s={start:l,end:l+Math.max(a.textContent.length,1)})}),s}function v1t(n,e,r){const i=e.posAtCoords({left:r.clientX,top:r.clientY});if(!i)return;const{pos:o}=i,s=e.state.doc.nodeAt(o);if(!s)return;const a=s.marks.find(c=>c.type===bl.mark.type(n));if(!(!a||!Rw.pluginKey()))return{show:!0,pos:o,node:s,mark:a}}const x1t=qi({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:n,src:e,onEdit:r,onRemove:i}){const o=l=>{l.preventDefault(),l.stopPropagation(),r.value()},s=l=>{l.preventDefault(),l.stopPropagation(),i.value()},a=l=>{l.preventDefault();const c=e.value;navigator.clipboard&&c&&navigator.clipboard.writeText(c).then(()=>{n.value.onCopyLink(c)}).catch(u=>console.error(u))};return()=>Ae("div",{class:"link-preview"},Ae(hx,{class:"button link-icon",icon:n.value.linkIcon,onClick:a}),Ae("a",{href:e.value,target:"_blank",class:"link-display"},e.value),Ae(hx,{class:"button link-edit-button",icon:n.value.editButton,onClick:o}),Ae(hx,{class:"button link-remove-button",icon:n.value.removeButton,onClick:s}))}});var Jme=n=>{throw TypeError(n)},Qme=(n,e,r)=>e.has(n)||Jme("Cannot "+r),cn=(n,e,r)=>(Qme(n,e,"read from private field"),r?r.call(n):e.get(n)),Zo=(n,e,r)=>e.has(n)?Jme("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),ah=(n,e,r,i)=>(Qme(n,e,"write to private field"),e.set(n,r),r),ip,Qa,hv,fv,yS,vS,xS,pv,bS,mv,wS,kS,SS,gv;class b1t{constructor(e,r){this.ctx=e,Zo(this,ip),Zo(this,Qa),Zo(this,hv,this.ctx.use(fd.key)),Zo(this,fv),Zo(this,yS,mt("")),Zo(this,vS,mt(()=>{})),Zo(this,xS,mt(()=>{})),Zo(this,pv),Zo(this,bS),Zo(this,mv,!1),Zo(this,wS,({mode:i})=>{i==="edit"&&cn(this,gv).call(this)}),Zo(this,kS,()=>{ah(this,mv,!0)}),Zo(this,SS,()=>{ah(this,mv,!1)}),Zo(this,gv,()=>{cn(this,Qa).hide(),cn(this,Qa).element.removeEventListener("mouseenter",cn(this,kS)),cn(this,Qa).element.removeEventListener("mouseleave",cn(this,SS))}),this.show=(i,o,s,a)=>{cn(this,fv).value=this.ctx.get(zg.key),cn(this,yS).value=i.attrs.href,cn(this,vS).value=()=>{this.ctx.get(Lg.key).editLink(i,o,s)},cn(this,xS).value=()=>{this.ctx.get(Lg.key).removeLink(o,s),cn(this,gv).call(this)},cn(this,Qa).show({getBoundingClientRect:()=>a},cn(this,bS)),cn(this,Qa).element.addEventListener("mouseenter",cn(this,kS)),cn(this,Qa).element.addEventListener("mouseleave",cn(this,SS))},this.hide=()=>{cn(this,mv)||cn(this,gv).call(this)},this.update=()=>{},this.destroy=()=>{cn(this,pv).unmount(),cn(this,hv).off(cn(this,wS)),cn(this,Qa).destroy(),cn(this,ip).remove()},ah(this,bS,r),ah(this,fv,mt(this.ctx.get(zg.key))),ah(this,pv,Ll(x1t,{config:cn(this,fv),src:cn(this,yS),onEdit:cn(this,vS),onRemove:cn(this,xS)})),ah(this,ip,document.createElement("div")),cn(this,ip).className="milkdown-link-preview",cn(this,pv).mount(cn(this,ip)),ah(this,Qa,new S7({debounce:0,content:cn(this,ip),shouldShow:()=>!1})),cn(this,Qa).update(r),ah(this,hv,e.use(fd.key)),cn(this,hv).on(cn(this,wS))}}ip=new WeakMap;Qa=new WeakMap;hv=new WeakMap;fv=new WeakMap;yS=new WeakMap;vS=new WeakMap;xS=new WeakMap;pv=new WeakMap;bS=new WeakMap;mv=new WeakMap;wS=new WeakMap;kS=new WeakMap;SS=new WeakMap;gv=new WeakMap;function w1t(n){let e;const i=Hb((s,a)=>{if(!e||!s.hasFocus()||n.get(fd.key).mode==="edit")return;const c=v1t(n,s,a);if(c){const u=s.state.doc.resolve(c.pos),d=y1t(c.mark,c.node,s.state.doc,u.before(),u.after()),h=d.start,f=d.end;e.show(c.mark,h,f,_3(s,h,f));return}e.hide()},50),o=()=>{setTimeout(()=>{e?.hide()},50)};n.set(Rw.key,{props:{handleDOMEvents:{mousemove:i,mouseleave:o}},view:s=>(e=new b1t(n,s),e)})}function k1t(n){w1t(n),g1t(n)}const S1t=[fd,Lg,zg,Rw,_7,Yme].flat();var C1t=Object.defineProperty,eQ=Object.getOwnPropertySymbols,_1t=Object.prototype.hasOwnProperty,A1t=Object.prototype.propertyIsEnumerable,tQ=(n,e,r)=>e in n?C1t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,T1t=(n,e)=>{for(var r in e||(e={}))_1t.call(e,r)&&tQ(n,r,e[r]);if(eQ)for(var r of eQ(e))A1t.call(e,r)&&tQ(n,r,e[r]);return n};function e0e(n,e){return Object.assign(n,{meta:T1t({package:"@milkdown/components"},e)}),n}const P1t={renderLabel:({label:n,listType:e,checked:r})=>r==null?e==="bullet"?"":n:r?"":""},A7=En(P1t,"listItemBlockConfigCtx");e0e(A7,{displayName:"Config<list-item-block>",group:"ListItemBlock"});function t0e({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}t0e.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const M1t=qi({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:n,checked:e,listType:r,config:i,readonly:o,setAttr:s,onMount:a,selected:l}){const c=f=>{f!=null&&f instanceof Element&&a(f)},u=f=>{f.stopPropagation(),f.preventDefault(),e.value!=null&&s("checked",!e.value)},d=Eg(()=>i.renderLabel({label:n.value,listType:r.value,checked:e.value,readonly:o.value})),h=Eg(()=>e.value==null?r.value==="bullet"?"bullet":"ordered":e.value?"checked":"unchecked");return()=>Ae("li",{class:Vt("list-item",l.value&&"ProseMirror-selectednode")},Ae("div",{class:"label-wrapper",onPointerdown:u,contenteditable:!1},Ae(t0e,{class:Vt("label",o.value&&"readonly",h.value),icon:d.value})),Ae("div",{class:"children",ref:c}))}}),n0e=pw(Rl.node,n=>(e,r,i)=>{const o=document.createElement("div");o.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const a=mt(e.attrs.label),l=mt(e.attrs.checked),c=mt(e.attrs.listType),u=mt(!r.editable),d=n.get(A7.key),h=mt(!1),f=(_,P)=>{if(!r.editable)return;const A=i();A!=null&&(r.hasFocus()||r.focus(),r.dispatch(r.state.tr.setNodeAttribute(A,_,P)))},m=l1(()=>{h.value?o.classList.add("selected"):o.classList.remove("selected")});let v=0;const b=Ll(M1t,{label:a,checked:l,listType:c,readonly:u,config:d,selected:h,setAttr:f,onMount:_=>{const{anchor:P,head:A}=r.state.selection;_.appendChild(s);const T=r.state.doc.resolve(P),E=r.state.doc.resolve(A);v=requestAnimationFrame(()=>{if(cancelAnimationFrame(v),!T.doc.eq(r.state.doc))return;const L=new xt(T,E);r.dispatch(r.state.tr.setSelection(L))})}});b.mount(o);const w=_=>{c.value=_.attrs.listType,a.value=_.attrs.label,l.value=_.attrs.checked,u.value=!r.editable};w(e);let S=e;return{dom:o,contentDOM:s,update:_=>_.type!==e.type?!1:(_.sameMarkup(S)&&_.content.eq(S.content)||(S=_,w(_)),!0),ignoreMutation:_=>!o||!s?!0:_.type==="selection"?!1:s===_.target&&_.type==="attributes"?!0:!s.contains(_.target),selectNode:()=>{h.value=!0},deselectNode:()=>{h.value=!1},destroy:()=>{m(),b.unmount(),o.remove(),s.remove()}}});e0e(n0e,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const E1t=[A7,n0e];var N1t=Object.defineProperty,nQ=Object.getOwnPropertySymbols,j1t=Object.prototype.hasOwnProperty,O1t=Object.prototype.propertyIsEnumerable,rQ=(n,e,r)=>e in n?N1t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,D1t=(n,e)=>{for(var r in e||(e={}))j1t.call(e,r)&&rQ(n,r,e[r]);if(nQ)for(var r of nQ(e))O1t.call(e,r)&&rQ(n,r,e[r]);return n};function r0e(n,e){return Object.assign(n,{meta:D1t({package:"@milkdown/components"},e)}),n}var I1t=Object.defineProperty,iQ=Object.getOwnPropertySymbols,R1t=Object.prototype.hasOwnProperty,L1t=Object.prototype.propertyIsEnumerable,oQ=(n,e,r)=>e in n?I1t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,z1t=(n,e)=>{for(var r in e||(e={}))R1t.call(e,r)&&oQ(n,r,e[r]);if(iQ)for(var r of iQ(e))L1t.call(e,r)&&oQ(n,r,e[r]);return n};const F1t={renderButton:n=>{switch(n){case"add_row":return"+";case"add_col":return"+";case"delete_row":return"-";case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":return"=";case"row_drag_handle":return"="}}},T7=En(z1t({},F1t),"tableBlockConfigCtx");r0e(T7,{displayName:"Config<table-block>",group:"TableBlock"});function ec({icon:n,class:e,onClick:r}){return Ae("span",{class:Vt("milkdown-icon",e),onPointerdown:r,innerHTML:n?La.sanitize(n.trim()):void 0})}ec.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};function i0e(n){const{dragPreviewRef:e,tableWrapperRef:r,contentWrapperRef:i,yLineHandleRef:o,xLineHandleRef:s,colHandleRef:a,rowHandleRef:l}=n,c=e.value;if(!c)return;const u=r.value;if(!u)return;const d=i.value;if(!d)return;const h=d.querySelector("tbody");if(!h)return;const f=c.querySelector("tbody");if(!f)return;const m=o.value;if(!m)return;const v=s.value;if(!v)return;const x=a.value;if(!x)return;const b=l.value;return b?{preview:c,wrapper:u,content:d,contentRoot:h,previewRoot:f,yHandle:m,xHandle:v,colHandle:x,rowHandle:b}:void 0}function o0e(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function s0e(n,e,r,i,o){const{width:s,height:a}=i.querySelector("tbody").getBoundingClientRect();if(n==="y"){const c=i.querySelectorAll("tr")[o];if(!c)return;r.appendChild(c.cloneNode(!0));const u=c.getBoundingClientRect().height;Object.assign(e.style,{width:`${s}px`,height:`${u}px`}),e.dataset.show="true";return}if(n==="x"){const l=i.querySelectorAll("tr");let c;Array.from(l).forEach(u=>{const d=u.children[o];if(!d)return;c===void 0&&(c=d.getBoundingClientRect().width);const h=d.parentElement.cloneNode(!1),f=d.cloneNode(!0);h.appendChild(f),r.appendChild(h)}),Object.assign(e.style,{width:`${c}px`,height:`${a}px`}),e.dataset.show="true";return}}function $1t(n,e){return r=>{l0e(n,r,e,i=>{a0e("y",r,i,n);const{preview:o,content:s,previewRoot:a}=i;o0e(a);const{hoverIndex:l}=n,[c]=l.value;s0e("y",o,a,s,c)})}}function B1t(n,e){return r=>{l0e(n,r,e,i=>{a0e("x",r,i,n);const{preview:o,content:s,previewRoot:a}=i,{hoverIndex:l}=n,[c,u]=l.value;o0e(a),s0e("x",o,a,s,u)})}}function a0e(n,e,r,i){const{xHandle:o,yHandle:s,colHandle:a,rowHandle:l,preview:c}=r;o.dataset.displayType=n==="y"?"indicator":"none",s.dataset.displayType=n==="x"?"indicator":"none",n==="y"?(a.dataset.show="false",sQ(l)):(l.dataset.show="false",sQ(a));const{hoverIndex:u,dragInfo:d}=i,[h,f]=u.value;d.value={startCoords:[e.clientX,e.clientY],startIndex:n==="y"?h:f,endIndex:n==="y"?h:f,type:n==="y"?"row":"col"},c.dataset.direction=n==="y"?"vertical":"horizontal"}function l0e(n,e,r,i){const o=r?.get(fn);if(!o?.editable)return;e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.effectAllowed="move");const s=i0e(n);s&&requestAnimationFrame(()=>{i(s)})}function sQ(n){var e;(e=n.querySelector(".button-group"))==null||e.setAttribute("data-show","false")}function sj(n,e){for(let r=0;r<n.childCount;r++)if(n.child(r)===e)return r;return-1}function H1t(n,e){var r,i,o;if(e)try{const s=e.posAtCoords({left:n.clientX,top:n.clientY});if(!s)return;const a=s?.inside;if(a==null||a<0)return;const l=e.state.doc.resolve(a),c=e.state.doc.nodeAt(a);if(!c)return;const u=["table_cell","table_header"],d=["table_row","table_header_row"],h=u.includes(c.type.name)?c:(r=kc(b=>u.includes(b.type.name))(l))==null?void 0:r.node,f=(i=kc(b=>d.includes(b.type.name))(l))==null?void 0:i.node,m=(o=kc(b=>b.type.name==="table")(l))==null?void 0:o.node;if(!h||!f||!m)return;const v=sj(f,h);return[sj(m,f),v]}catch{return}}function P7(n,[e,r]){const i=n.value;if(!i)return;const o=i.querySelectorAll("tr"),s=o[e];if(!s)return;const a=o[0];if(!a)return;const l=a.children[r];if(!l)return;const c=s.children[r];if(c)return{row:s,col:c,headerCol:l}}function q1t(n,e,r){if(!r||!e)return;const{selection:i}=e.state;if(!(i instanceof Hn))return;const{$from:o}=i,s=c1(o);if(!(!s||s.node!==r)){if(i.isColSelection()){const{$head:a}=i,l=a.index(a.depth-1);fz({refs:n,index:[0,l],before:c=>{var u;(u=c.querySelector(".button-group"))==null||u.setAttribute("data-show","true")}});return}if(i.isRowSelection()){const{$head:a}=i,l=kc(u=>u.type.name==="table_row"||u.type.name==="table_header_row")(a);if(!l)return;const c=sj(s.node,l.node);pz({refs:n,index:[c,0],before:u=>{var d;c>0&&((d=u.querySelector(".button-group"))==null||d.setAttribute("data-show","true"))}})}}}function fz({refs:n,index:e,before:r,after:i}){const{contentWrapperRef:o,colHandleRef:s,hoverIndex:a}=n,l=s.value;if(!l)return;a.value=e;const c=P7(o,e);if(!c)return;const{headerCol:u}=c;l.dataset.show="true",r&&r(l),Ic(u,l,{placement:"top"}).then(({x:d,y:h})=>{Object.assign(l.style,{left:`${d}px`,top:`${h}px`}),i&&i(l)}).catch(console.error)}function pz({refs:n,index:e,before:r,after:i}){const{contentWrapperRef:o,rowHandleRef:s,hoverIndex:a}=n,l=s.value;if(!l)return;a.value=e;const c=P7(o,e);if(!c)return;const{row:u}=c;l.dataset.show="true",r&&r(l),Ic(u,l,{placement:"left"}).then(({x:d,y:h})=>{Object.assign(l.style,{left:`${d}px`,top:`${h}px`}),i&&i(l)}).catch(console.error)}function c0e(n,e,r){const i=r==="x"?"left":"top",o=r==="x"?"right":"bottom",s=n.length-1,a=n.findIndex((c,u)=>{const d=c.getBoundingClientRect(),h=d[i],f=d[o];return h<=e&&e<=f||u===s&&e>f||u===0&&e<h}),l=n[a];return l?[l,a]:void 0}function V1t(n,e){const r=n.querySelector("tr");if(!r)return;const i=Array.from(r.children);return c0e(i,e,"x")}function W1t(n,e){const r=Array.from(n.querySelectorAll("tr"));return c0e(r,e,"y")}function U1t(n){return qb(e=>{const r=i0e(n);if(!r)return;const{preview:i,content:o,contentRoot:s,xHandle:a,yHandle:l}=r,{dragInfo:c,hoverIndex:u}=n;if(i.dataset.show==="false")return;const d=P7(n.contentWrapperRef,u.value);if(!d||!s.querySelector("tr"))return;const f=c.value;if(!f||!s.offsetParent)return;const m=s.offsetParent.offsetTop,v=s.offsetParent.offsetLeft;if(f.type==="col"){const x=d.col.getBoundingClientRect().width,{left:b,width:w}=s.getBoundingClientRect(),S=v-b,_=e.clientX+S-x/2,[P]=f.startCoords,A=P<e.clientX?"right":"left";i.style.top=`${m}px`;const T=_<b+S-20?b+S-20:_>b+w+S-x+20?b+w+S-x+20:_;i.style.left=`${T}px`;const E=V1t(s,e.clientX);if(E){const[L,$]=E,z=l.getBoundingClientRect().width,B=o.getBoundingClientRect();f.endIndex=$,Ic(L,l,{placement:A==="left"?"left":"right",middleware:[gm(A==="left"?-1*z:0)]}).then(({x:D})=>{l.dataset.show="true",Object.assign(l.style,{height:`${B.height}px`,left:`${D}px`,top:`${m}px`})}).catch(console.error)}}else if(f.type==="row"){const x=d.row.getBoundingClientRect().height,{top:b,height:w}=s.getBoundingClientRect(),S=m-b,_=e.clientY+S-x/2,[P,A]=f.startCoords,T=A<e.clientY?"down":"up",E=_<b+S-20?b+S-20:_>b+w+S-x+20?b+w+S-x+20:_;i.style.top=`${E}px`,i.style.left=`${v}px`;const L=W1t(s,e.clientY);if(L){const[$,z]=L,B=a.getBoundingClientRect().height,D=o.getBoundingClientRect();f.endIndex=z,Ic($,a,{placement:T==="up"?"top":"bottom",middleware:[gm(T==="up"?-1*B:0)]}).then(({y:Y})=>{a.dataset.show="true",Object.assign(a.style,{width:`${D.width}px`,top:`${Y}px`})}).catch(console.error)}}},20)}function K1t(n,e,r){const{dragPreviewRef:i,yLineHandleRef:o,xLineHandleRef:s,dragInfo:a}=n,l=$1t(n,e),c=B1t(n,e),u=()=>{const f=i.value;if(!f||f.dataset.show==="false")return;const m=f?.querySelector("tbody");for(;m?.firstChild;)m?.removeChild(m.firstChild);f&&(f.dataset.show="false")},d=()=>{var f;const m=i.value;if(!m)return;const v=o.value;if(!v)return;const x=s.value;if(!x)return;const b=a.value;if(!b||!e||m.dataset.show==="false"||!n.colHandleRef.value||!n.rowHandleRef.value||(v.dataset.show="false",x.dataset.show="false",b.startIndex===b.endIndex))return;const _=e.get(ht),P={from:b.startIndex,to:b.endIndex,pos:((f=r?.())!=null?f:0)+1};if(b.type==="col"){_.call(kp.key,{pos:P.pos,index:b.startIndex}),_.call(vL.key,P);const A=[0,b.endIndex];fz({refs:n,index:A})}else{_.call(wp.key,{pos:P.pos,index:b.startIndex}),_.call(yL.key,P);const A=[b.endIndex,0];pz({refs:n,index:A})}requestAnimationFrame(()=>{e.get(fn).focus()})},h=U1t(n);return xw(()=>{window.addEventListener("dragover",h),window.addEventListener("dragend",u),window.addEventListener("drop",d)}),bw(()=>{window.removeEventListener("dragover",h),window.removeEventListener("dragend",u),window.removeEventListener("drop",d)}),{dragRow:l,dragCol:c}}function G1t(n,e,r){const{xLineHandleRef:i,contentWrapperRef:o,colHandleRef:s,rowHandleRef:a,hoverIndex:l,lineHoverIndex:c}=n;return{onAddRow:()=>{var x,b,w;if(!e)return;const S=i.value;if(!S)return;const[_]=c.value;if(_<0||!e.get(fn).editable)return;const P=Array.from((b=(x=o.value)==null?void 0:x.querySelectorAll("tr"))!=null?b:[]),A=e.get(ht),T=((w=r?.())!=null?w:0)+1;P.length===_?(A.call(wp.key,{pos:T,index:_-1}),A.call(SL.key)):(A.call(wp.key,{pos:T,index:_}),A.call(kL.key)),A.call(wp.key,{pos:T,index:_}),S.dataset.show="false"},onAddCol:()=>{var x,b,w,S;if(!e||!i.value)return;const[P,A]=c.value;if(A<0||!e.get(fn).editable)return;const T=Array.from((w=(b=(x=o.value)==null?void 0:x.querySelector("tr"))==null?void 0:b.children)!=null?w:[]),E=e.get(ht),L=((S=r?.())!=null?S:0)+1;T.length===A?(E.call(kp.key,{pos:L,index:A-1}),E.call(wL.key)):(E.call(kp.key,{pos:L,index:A}),E.call(bL.key)),E.call(kp.key,{pos:L,index:A})},selectCol:()=>{var x,b;if(!e)return;const[w,S]=l.value,_=e.get(ht),P=((x=r?.())!=null?x:0)+1;_.call(kp.key,{pos:P,index:S});const A=(b=s.value)==null?void 0:b.querySelector(".button-group");A&&(A.dataset.show=A.dataset.show==="true"?"false":"true")},selectRow:()=>{var x,b;if(!e)return;const[w,S]=l.value,_=e.get(ht),P=((x=r?.())!=null?x:0)+1;_.call(wp.key,{pos:P,index:w});const A=(b=a.value)==null?void 0:b.querySelector(".button-group");A&&w>0&&(A.dataset.show=A.dataset.show==="true"?"false":"true")},deleteSelected:x=>{if(!e||!e.get(fn).editable)return;x.preventDefault(),x.stopPropagation(),e.get(ht).call(xL.key),requestAnimationFrame(()=>{e.get(fn).focus()})},onAlign:x=>b=>{if(!e||!e.get(fn).editable)return;b.preventDefault(),b.stopPropagation(),e.get(ht).call(CL.key,x),requestAnimationFrame(()=>{e.get(fn).focus()})}}}function Y1t(n,e){return qb(r=>{if(!e?.editable)return;const{contentWrapperRef:i,yLineHandleRef:o,xLineHandleRef:s,colHandleRef:a,rowHandleRef:l,hoverIndex:c,lineHoverIndex:u}=n,d=o.value;if(!d)return;const h=s.value;if(!h)return;const f=i.value;if(!f)return;const m=l.value;if(!m)return;const v=a.value;if(!v)return;const x=H1t(r,e);if(!x)return;const b=P7(i,x);if(!b)return;const[w,S]=x,_=b.col.getBoundingClientRect(),P=Math.abs(r.clientX-_.left)<8,A=Math.abs(_.right-r.clientX)<8,T=Math.abs(r.clientY-_.top)<8,E=Math.abs(_.bottom-r.clientY)<8,L=P||A||T||E,$=m.querySelector(".button-group"),z=v.querySelector(".button-group");if($&&($.dataset.show="false"),z&&(z.dataset.show="false"),L){const B=f.getBoundingClientRect();m.dataset.show="false",v.dataset.show="false",h.dataset.displayType="tool",d.dataset.displayType="tool";const D=d.getBoundingClientRect().width,Y=h.getBoundingClientRect().height;P||A?(u.value[1]=P?S:S+1,Ic(b.col,d,{placement:P?"left":"right",middleware:[gm(P?-1*D:0)]}).then(({x:I})=>{d.dataset.show="true",Object.assign(d.style,{height:`${B.height}px`,left:`${I}px`})}).catch(console.error)):d.dataset.show="false",x[0]!==0&&(T||E)?(u.value[0]=T?w:w+1,Ic(b.row,h,{placement:T?"top":"bottom",middleware:[gm(T?-1*Y:0)]}).then(({y:I})=>{h.dataset.show="true",Object.assign(h.style,{width:`${B.width}px`,top:`${I}px`})}).catch(console.error)):h.dataset.show="false";return}u.value=[-1,-1],d.dataset.show="false",h.dataset.show="false",m.dataset.show="true",v.dataset.show="true",pz({refs:n,index:x}),fz({refs:n,index:x}),c.value=x},20)}function Z1t(n){return()=>{const{rowHandleRef:e,colHandleRef:r,yLineHandleRef:i,xLineHandleRef:o}=n;setTimeout(()=>{const s=e.value;if(!s)return;const a=r.value;if(!a)return;const l=i.value;if(!l)return;const c=o.value;c&&(s.dataset.show="false",a.dataset.show="false",l.dataset.show="false",c.dataset.show="false")},200)}}function X1t(n,e){const r=Y1t(n,e),i=Z1t(n);return{pointerMove:r,pointerLeave:i}}const J1t=qi({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:n,node:e,ctx:r,getPos:i,config:o,onMount:s}){const a=mt(),l=D=>{D!=null&&(D instanceof HTMLElement?(a.value=D,s(D)):a.value=void 0)},c=mt(),u=mt(),d=mt(),h=mt(),f=mt(),m=mt(),w={dragPreviewRef:m,tableWrapperRef:f,contentWrapperRef:a,yLineHandleRef:h,xLineHandleRef:d,colHandleRef:c,rowHandleRef:u,hoverIndex:mt([0,0]),lineHoverIndex:mt([-1,-1]),dragInfo:mt()},{pointerLeave:S,pointerMove:_}=X1t(w,n),{dragRow:P,dragCol:A}=K1t(w,r,i),{onAddRow:T,onAddCol:E,selectCol:L,selectRow:$,deleteSelected:z,onAlign:B}=G1t(w,r,i);return xw(()=>{requestAnimationFrame(()=>{n.editable&&q1t(w,n,e.value)})}),()=>Ae("div",{onDragstart:D=>D.preventDefault(),onDragover:D=>D.preventDefault(),onDragleave:D=>D.preventDefault(),onPointermove:_,onPointerleave:S},Ae("div",{"data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:A,onClick:L,onPointerdown:D=>D.stopPropagation(),onPointermove:D=>D.stopPropagation(),ref:c},Ae(ec,{icon:o.renderButton("col_drag_handle")}),Ae("div",{"data-show":"false",class:"button-group",onPointermove:D=>D.stopPropagation()},Ae("button",{type:"button",onPointerdown:B("left")},Ae(ec,{icon:o.renderButton("align_col_left")})),Ae("button",{type:"button",onPointerdown:B("center")},Ae(ec,{icon:o.renderButton("align_col_center")})),Ae("button",{type:"button",onPointerdown:B("right")},Ae(ec,{icon:o.renderButton("align_col_right")})),Ae("button",{type:"button",onPointerdown:z},Ae(ec,{icon:o.renderButton("delete_col")})))),Ae("div",{"data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:P,onClick:$,onPointerdown:D=>D.stopPropagation(),onPointermove:D=>D.stopPropagation(),ref:u},Ae(ec,{icon:o.renderButton("row_drag_handle")}),Ae("div",{"data-show":"false",class:"button-group",onPointermove:D=>D.stopPropagation()},Ae("button",{type:"button",onPointerdown:z},Ae(ec,{icon:o.renderButton("delete_row")})))),Ae("div",{class:"table-wrapper",ref:f},Ae("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:m},Ae("table",null,Ae("tbody",null))),Ae("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:D=>D.stopPropagation(),ref:d},Ae("button",{type:"button",onClick:T,class:"add-button"},Ae(ec,{icon:o.renderButton("add_row")}))),Ae("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:D=>D.stopPropagation(),ref:h},Ae("button",{type:"button",onClick:E,class:"add-button"},Ae(ec,{icon:o.renderButton("add_col")}))),Ae("table",{ref:l,class:"children"})))}});var u0e=n=>{throw TypeError(n)},Q1t=(n,e,r)=>e.has(n)||u0e("Cannot "+r),eyt=(n,e,r)=>e.has(n)?u0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),tyt=(n,e,r)=>(Q1t(n,e,"access private method"),r),aj,d0e;class nyt{constructor(e,r,i,o){this.ctx=e,this.node=r,this.view=i,this.getPos=o,eyt(this,aj);const s=document.createElement("div");s.className="milkdown-table-block";const a=document.createElement("tbody");this.contentDOM=a,a.setAttribute("data-content-dom","true"),a.classList.add("content-dom"),this.nodeRef=AC(r);const l=Ll(J1t,{view:i,ctx:e,getPos:o,config:e.get(T7.key),onMount:c=>{c.appendChild(a)},node:this.nodeRef});l.mount(s),this.app=l,this.dom=s}update(e){return e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)?!1:(this.node=e,this.nodeRef.value=e,!0)}stopEvent(e){if(e.type==="drop"||e.type.startsWith("drag"))return!0;if(e.type==="mousedown"||e.type==="pointerdown"){if(e.target instanceof Element&&e.target.closest("button"))return!0;const r=e.target;if(r instanceof HTMLElement&&(r.closest("th")||r.closest("td"))){const i=e;return tyt(this,aj,d0e).call(this,i)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:e.type==="selection"?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}aj=new WeakSet;d0e=function(n){const e=this.view;if(!e.editable)return!1;const{state:r,dispatch:i}=e,o=e.posAtCoords({left:n.clientX,top:n.clientY});if(!o)return!1;const s=r.doc.resolve(o.inside),a=kc(u=>u.type.name==="table_cell"||u.type.name==="table_header")(s);if(!a)return!1;if(r.selection instanceof xt){const u=kc(d=>d.type.name==="table_cell"||d.type.name==="table_header")(r.selection.$from);if(u?.node===a.node)return!1}const{from:l}=a,c=Tt.create(r.doc,l+1);return r.selection.eq(c)?!1:(r.selection instanceof Hn?setTimeout(()=>{i(r.tr.setSelection(c).scrollIntoView())},20):requestAnimationFrame(()=>{i(r.tr.setSelection(c).scrollIntoView())}),!0)};const h0e=pw(pf.node,n=>(e,r,i)=>new nyt(n,e,r,i));r0e(h0e,{displayName:"NodeView<table-block>",group:"TableBlock"});const ryt=[T7,h0e];function lj(n){if(!n)return!1;if(Array.isArray(n))return n.length>1?!1:lj(n[0]);const e=n.content;return e?lj(e):n.type==="text"}function iyt(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-clipboard",...e}}),n}const f0e=Kr(n=>{const e=n.get(vl);n.update(qv,o=>({...o,editable:o.editable??(()=>!0)}));const r=new lr("MILKDOWN_CLIPBOARD");return new ar({key:r,props:{handlePaste:(o,s)=>{const a=n.get(H0),l=o.props.editable?.(o.state),{clipboardData:c}=s;if(!l||!c||o.state.selection.$from.node().type.spec.code)return!1;const d=c.getData("text/plain"),h=c.getData("vscode-editor-data");if(h){const S=JSON.parse(h)?.mode;if(d&&S){const{tr:_}=o.state,P=F8e("code_block",e);return _.replaceSelectionWith(P.create({language:S})).setSelection(xt.near(_.doc.resolve(Math.max(0,_.selection.from-2)))).insertText(d.replace(/\r\n?/g,`
`)),o.dispatch(_),!0}}const f=c.getData("text/html");if(f.length===0&&d.length===0)return!1;const m=Gp.fromSchema(e);let v;if(f.length===0){const w=a(d);if(!w||typeof w=="string")return!1;v=bm.fromSchema(e).serializeFragment(w.content)}else{const w=document.createElement("template");w.innerHTML=f,v=w.content.cloneNode(!0),w.remove()}const x=m.parseSlice(v),b=L8e(x);if(b)return o.dispatch(o.state.tr.replaceSelectionWith(b,!0)),!0;try{return o.dispatch(o.state.tr.replaceSelection(x)),!0}catch{return!1}},clipboardTextSerializer:o=>{const s=n.get(q0);if(lj(o.content.toJSON()))return o.content.textBetween(0,o.content.size,`

`);const l=e.topNodeType.createAndFill(void 0,o.content);return l?s(l):""}}})});iyt(f0e,{displayName:"Prose<clipboard>"});function g1(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...e}}),n}const mz=zt("Undo",()=>()=>h7);g1(mz,{displayName:"Command<undo>"});const gz=zt("Redo",()=>()=>Og);g1(gz,{displayName:"Command<redo>"});const yz=En({},"historyProviderConfig");g1(yz,{displayName:"Ctx<historyProviderConfig>"});const p0e=Kr(n=>eft(n.get(yz.key)));g1(p0e,{displayName:"Ctx<historyProviderPlugin>"});const vz=ys("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const e=n.get(ht);return()=>e.call(mz.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const e=n.get(ht);return()=>e.call(gz.key)}}});g1(vz.ctx,{displayName:"KeymapCtx<history>"});g1(vz.shortcuts,{displayName:"Keymap<history>"});const oyt=[yz,p0e,vz,mz,gz].flat();function syt(n,e){const{doc:r,selection:i}=n;if(!r||!i||!(i instanceof xt||i instanceof cs))return n;const{to:o}=i,s=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return n.insertText(s,o)}const M7=En({type:"space",size:2},"indentConfig");M7.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const m0e=yde(n=>({Tab:(e,r)=>{const i=n.get(M7.key),{tr:o}=e,s=syt(o,i);return s.docChanged?(r?.(s),!0):!1}}));m0e.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const ayt=[M7,m0e];class g0e{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const YC=rn(new g0e,"listener"),lyt=new lr("MILKDOWN_LISTENER"),y0e=n=>(n.inject(YC,new g0e),async()=>{await n.wait(Ep);const e=n.get(YC),{listeners:r}=e;r.beforeMount.forEach(c=>c(n)),await n.wait(Hv);const i=n.get(q0);let o=null,s=null,a=null;const l=new ar({key:lyt,view:()=>({destroy:()=>{r.destroy.forEach(c=>c(n))}}),props:{handleDOMEvents:{focus:()=>(r.focus.forEach(c=>c(n)),!1),blur:()=>(r.blur.forEach(c=>c(n)),!1)}},state:{init:(c,u)=>{o=u.doc,s=i(u.doc)},apply:c=>{const u=c.selection;return(!a&&u||a&&!u.eq(a))&&(r.selectionUpdated.forEach(h=>{h(n,u,a)}),a=u),!(c.docChanged||c.storedMarksSet)||c.getMeta("addToHistory")===!1?void 0:Hb(()=>{const{doc:h}=c;if(r.updated.length>0&&o&&!o.eq(h)&&r.updated.forEach(f=>{f(n,h,o)}),r.markdownUpdated.length>0&&o&&!o.eq(h)){const f=i(h);r.markdownUpdated.forEach(m=>{m(n,f,s)}),s=f}o=h},200)()}}});n.update(Zu,c=>c.concat(l)),await n.wait(D4),r.mounted.forEach(c=>c(n))});y0e.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const xz=En({shouldAppend:n=>!(!n||["heading","paragraph"].includes(n.type.name)),getNode:n=>n.schema.nodes.paragraph.create()},"trailingConfig");xz.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const v0e=Kr(n=>{const e=new lr("MILKDOWN_TRAILING"),{shouldAppend:r,getNode:i}=n.get(xz.key),o=new ar({key:e,state:{init:(s,a)=>{const l=a.tr.doc.lastChild;return r(l,a)},apply:(s,a,l,c)=>{if(!s.docChanged)return a;const u=s.doc.lastChild;return r(u,c)}},appendTransaction:(s,a,l)=>{const{doc:c,tr:u}=l,d=i?.(l),h=o.getState(l),f=c.content.size;if(!(!h||!d))return u.insert(f,d)}});return o});v0e.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const cyt=[xz,v0e];var jn=(n=>(n.CodeMirror="code-mirror",n.ListItem="list-item",n.LinkTooltip="link-tooltip",n.Cursor="cursor",n.ImageBlock="image-block",n.BlockEdit="block-edit",n.Toolbar="toolbar",n.Placeholder="placeholder",n.Table="table",n.Latex="latex",n))(jn||{});const uyt={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},dyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,hyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,fyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,pyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,myt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,gyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,yyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,vyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,xyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,x0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,b0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,w0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,bz=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,k0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,byt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,aQ=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,wz=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,wyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,kyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Syt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Cyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,_yt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Ayt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,cj=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Tyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,Pyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,Myt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Eyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,uj=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Nyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,dj=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,S0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,jyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,Oyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Dyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Iyt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,C0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,_0e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,Ryt={[jn.CodeMirror]:{theme:Vrt,languages:Ort,expandIcon:x0e,searchIcon:S0e,clearSearchIcon:b0e,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:n=>n?wz:_0e}},Lyt=rn([],"FeaturesCtx"),zyt=rn({},"CrepeCtx");function Fyt(n){return n.get("CrepeCtx")}function E7(n){return n.use("FeaturesCtx")}function Yc(n){return e=>{E7(e).update(r=>r.includes(n)?r:[...r,n])}}function A0e(n){return n.$from.parent.type.name==="code_block"}function T0e(n){var e;const r=(e=n.$from.node(n.$from.depth-1))==null?void 0:e.type;return r?.name==="list_item"}var P0e=n=>{throw TypeError(n)},M0e=(n,e,r)=>e.has(n)||P0e("Cannot "+r),My=(n,e,r)=>(M0e(n,e,"read from private field"),r?r.call(n):e.get(n)),lQ=(n,e,r)=>e.has(n)?P0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),$yt=(n,e,r,i)=>(M0e(n,e,"write to private field"),e.set(n,r),r),T0,CS;class E0e{constructor(){lQ(this,T0,[]),this.clear=()=>($yt(this,T0,[]),this),lQ(this,CS,e=>{const r={group:e,addItem:(i,o)=>{const s={...o,key:i};return e.items.push(s),r},clear:()=>(e.items=[],r)};return r}),this.addGroup=(e,r)=>{const o={key:e,label:r,items:[]};return My(this,T0).push(o),My(this,CS).call(this,o)},this.getGroup=e=>{const r=My(this,T0).find(i=>i.key===e);if(!r)throw new Error(`Group with key ${e} not found`);return My(this,CS).call(this,r)},this.build=()=>My(this,T0)}}T0=new WeakMap;CS=new WeakMap;function Byt(n,e,r){var i,o,s,a,l,c,u,d,h,f,m,v,x,b,w,S,_,P,A,T,E,L,$,z,B,D,Y,I,U,Z,te,J,oe,q,G,re,V,ve,ke,pe,me,Me,le,ze,nt,F,X,ie,de,fe,be,Pe,Ie,Le,Ne,at,Ze,ct,bt,ge,Ee,Xe,Ct,Mt,an,Vn,Wn,Yr,dn,Xt,Rr,yr,Md,$a,$o,Ba,Ha,vf,xf,Qn,Xs,Ed,Nd,Js,Zc,qa,Nm,Zr,lo,$l,Xc,jd,bf,Bo,xs,Od,Dd,wf,kf,wt,ae,He,ut,An,Wt,er,Er,co,Ho,Id,vr,Bl,Vi,zw,qo,Fw,$w,Bw,Sf;const Va=r&&E7(r).get(),Cf=Va?.includes(jn.Latex),jm=Va?.includes(jn.ImageBlock),j7=Va?.includes(jn.Table),_f=new E0e;if(e?.textGroup!==null){const hn=_f.addGroup("text",(o=(i=e?.textGroup)==null?void 0:i.label)!=null?o:"Text");((s=e?.textGroup)==null?void 0:s.text)!==null&&hn.addItem("text",{label:(c=(l=(a=e?.textGroup)==null?void 0:a.text)==null?void 0:l.label)!=null?c:"Text",icon:(h=(d=(u=e?.textGroup)==null?void 0:u.text)==null?void 0:d.icon)!=null?h:Dyt,onRun:kt=>{const Pt=kt.get(ht),ln=Il.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln})}}),((f=e?.textGroup)==null?void 0:f.h1)!==null&&hn.addItem("h1",{label:(x=(v=(m=e?.textGroup)==null?void 0:m.h1)==null?void 0:v.label)!=null?x:"Heading 1",icon:(S=(w=(b=e?.textGroup)==null?void 0:b.h1)==null?void 0:w.icon)!=null?S:wyt,onRun:kt=>{const Pt=kt.get(ht),ln=Ds.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln,attrs:{level:1}})}}),((_=e?.textGroup)==null?void 0:_.h2)!==null&&hn.addItem("h2",{label:(T=(A=(P=e?.textGroup)==null?void 0:P.h2)==null?void 0:A.label)!=null?T:"Heading 2",icon:($=(L=(E=e?.textGroup)==null?void 0:E.h2)==null?void 0:L.icon)!=null?$:kyt,onRun:kt=>{const Pt=kt.get(ht),ln=Ds.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln,attrs:{level:2}})}}),((z=e?.textGroup)==null?void 0:z.h3)!==null&&hn.addItem("h3",{label:(Y=(D=(B=e?.textGroup)==null?void 0:B.h3)==null?void 0:D.label)!=null?Y:"Heading 3",icon:(Z=(U=(I=e?.textGroup)==null?void 0:I.h3)==null?void 0:U.icon)!=null?Z:Syt,onRun:kt=>{const Pt=kt.get(ht),ln=Ds.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln,attrs:{level:3}})}}),((te=e?.textGroup)==null?void 0:te.h4)!==null&&hn.addItem("h4",{label:(q=(oe=(J=e?.textGroup)==null?void 0:J.h4)==null?void 0:oe.label)!=null?q:"Heading 4",icon:(V=(re=(G=e?.textGroup)==null?void 0:G.h4)==null?void 0:re.icon)!=null?V:Cyt,onRun:kt=>{const Pt=kt.get(ht),ln=Ds.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln,attrs:{level:4}})}}),((ve=e?.textGroup)==null?void 0:ve.h5)!==null&&hn.addItem("h5",{label:(me=(pe=(ke=e?.textGroup)==null?void 0:ke.h5)==null?void 0:pe.label)!=null?me:"Heading 5",icon:(ze=(le=(Me=e?.textGroup)==null?void 0:Me.h5)==null?void 0:le.icon)!=null?ze:_yt,onRun:kt=>{const Pt=kt.get(ht),ln=Ds.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln,attrs:{level:5}})}}),((nt=e?.textGroup)==null?void 0:nt.h6)!==null&&hn.addItem("h6",{label:(ie=(X=(F=e?.textGroup)==null?void 0:F.h6)==null?void 0:X.label)!=null?ie:"Heading 6",icon:(be=(fe=(de=e?.textGroup)==null?void 0:de.h6)==null?void 0:fe.icon)!=null?be:Ayt,onRun:kt=>{const Pt=kt.get(ht),ln=Ds.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln,attrs:{level:6}})}}),((Pe=e?.textGroup)==null?void 0:Pe.quote)!==null&&hn.addItem("quote",{label:(Ne=(Le=(Ie=e?.textGroup)==null?void 0:Ie.quote)==null?void 0:Le.label)!=null?Ne:"Quote",icon:(ct=(Ze=(at=e?.textGroup)==null?void 0:at.quote)==null?void 0:Ze.icon)!=null?ct:Nyt,onRun:kt=>{const Pt=kt.get(ht),ln=o1.type(kt);Pt.call(_i.key),Pt.call(iv.key,{nodeType:ln})}}),((bt=e?.textGroup)==null?void 0:bt.divider)!==null&&hn.addItem("divider",{label:(Xe=(Ee=(ge=e?.textGroup)==null?void 0:ge.divider)==null?void 0:Ee.label)!=null?Xe:"Divider",icon:(an=(Mt=(Ct=e?.textGroup)==null?void 0:Ct.divider)==null?void 0:Mt.icon)!=null?an:byt,onRun:kt=>{const Pt=kt.get(ht),ln=s1.type(kt);Pt.call(_i.key),Pt.call(ov.key,{nodeType:ln})}})}if(e?.listGroup!==null){const hn=_f.addGroup("list",(Wn=(Vn=e?.listGroup)==null?void 0:Vn.label)!=null?Wn:"List");((Yr=e?.listGroup)==null?void 0:Yr.bulletList)!==null&&hn.addItem("bullet-list",{label:(Rr=(Xt=(dn=e?.listGroup)==null?void 0:dn.bulletList)==null?void 0:Xt.label)!=null?Rr:"Bullet List",icon:($a=(Md=(yr=e?.listGroup)==null?void 0:yr.bulletList)==null?void 0:Md.icon)!=null?$a:gyt,onRun:kt=>{const Pt=kt.get(ht),ln=Am.type(kt);Pt.call(_i.key),Pt.call(iv.key,{nodeType:ln})}}),(($o=e?.listGroup)==null?void 0:$o.orderedList)!==null&&hn.addItem("ordered-list",{label:(vf=(Ha=(Ba=e?.listGroup)==null?void 0:Ba.orderedList)==null?void 0:Ha.label)!=null?vf:"Ordered List",icon:(Xs=(Qn=(xf=e?.listGroup)==null?void 0:xf.orderedList)==null?void 0:Qn.icon)!=null?Xs:Eyt,onRun:kt=>{const Pt=kt.get(ht),ln=Tm.type(kt);Pt.call(_i.key),Pt.call(iv.key,{nodeType:ln})}}),((Ed=e?.listGroup)==null?void 0:Ed.taskList)!==null&&hn.addItem("task-list",{label:(Zc=(Js=(Nd=e?.listGroup)==null?void 0:Nd.taskList)==null?void 0:Js.label)!=null?Zc:"Task List",icon:(Zr=(Nm=(qa=e?.listGroup)==null?void 0:qa.taskList)==null?void 0:Nm.icon)!=null?Zr:Iyt,onRun:kt=>{const Pt=kt.get(ht),ln=Rl.type(kt);Pt.call(_i.key),Pt.call(iv.key,{nodeType:ln,attrs:{checked:!1}})}})}if(e?.advancedGroup!==null){const hn=_f.addGroup("advanced",($l=(lo=e?.advancedGroup)==null?void 0:lo.label)!=null?$l:"Advanced");((Xc=e?.advancedGroup)==null?void 0:Xc.image)!==null&&jm&&hn.addItem("image",{label:(Bo=(bf=(jd=e?.advancedGroup)==null?void 0:jd.image)==null?void 0:bf.label)!=null?Bo:"Image",icon:(Dd=(Od=(xs=e?.advancedGroup)==null?void 0:xs.image)==null?void 0:Od.icon)!=null?Dd:cj,onRun:kt=>{const Pt=kt.get(ht),ln=i7.type(kt);Pt.call(_i.key),Pt.call(ov.key,{nodeType:ln})}}),((wf=e?.advancedGroup)==null?void 0:wf.codeBlock)!==null&&hn.addItem("code",{label:(ae=(wt=(kf=e?.advancedGroup)==null?void 0:kf.codeBlock)==null?void 0:wt.label)!=null?ae:"Code",icon:(An=(ut=(He=e?.advancedGroup)==null?void 0:He.codeBlock)==null?void 0:ut.icon)!=null?An:w0e,onRun:kt=>{const Pt=kt.get(ht),ln=Rc.type(kt);Pt.call(_i.key),Pt.call(yu.key,{nodeType:ln})}}),((Wt=e?.advancedGroup)==null?void 0:Wt.table)!==null&&j7&&hn.addItem("table",{label:(co=(Er=(er=e?.advancedGroup)==null?void 0:er.table)==null?void 0:Er.label)!=null?co:"Table",icon:(vr=(Id=(Ho=e?.advancedGroup)==null?void 0:Ho.table)==null?void 0:Id.icon)!=null?vr:Oyt,onRun:kt=>{const Pt=kt.get(ht),ln=kt.get(fn);Pt.call(_i.key);const{from:bn}=ln.state.selection;Pt.call(ov.key,{nodeType:fL(kt,3,3)}),Pt.call(Yde.key,{pos:bn})}}),((Bl=e?.advancedGroup)==null?void 0:Bl.math)!==null&&Cf&&hn.addItem("math",{label:(qo=(zw=(Vi=e?.advancedGroup)==null?void 0:Vi.math)==null?void 0:zw.label)!=null?qo:"Math",icon:(Bw=($w=(Fw=e?.advancedGroup)==null?void 0:Fw.math)==null?void 0:$w.icon)!=null?Bw:C0e,onRun:kt=>{const Pt=kt.get(ht),ln=Rc.type(kt);Pt.call(_i.key),Pt.call(ov.key,{nodeType:ln,attrs:{language:"LaTex"}})}})}(Sf=e?.buildMenu)==null||Sf.call(e,_f);let Jc=_f.build();n&&(Jc=Jc.map(hn=>{const kt=hn.items.filter(Pt=>Pt.label.toLowerCase().includes(n.toLowerCase()));return{...hn,items:kt}}).filter(hn=>hn.items.length>0));const y1=Jc.flatMap(hn=>hn.items);return y1.forEach((hn,kt)=>{Object.assign(hn,{index:kt})}),Jc.reduce((hn,kt)=>{const Pt=hn+kt.items.length;return Object.assign(kt,{range:[hn,Pt]}),Pt},0),{groups:Jc,size:y1.length}}const Hyt=qi({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:n,show:e,filter:r,hide:i,config:o}){const s=mt(),a=Eg(()=>Byt(r.value,o,n)),l=mt(0),c=mt({x:-999,y:-999}),u=x=>{const{x:b,y:w}=x;c.value={x:b,y:w}};$p([a,e],()=>{const{size:x}=a.value;x===0&&e.value?i():l.value>=x&&(l.value=0)});const d=(x,b)=>{const w=l.value,S=typeof x=="function"?x(w):x;b?.(S),l.value=S},h=x=>{var b,w;const S=(b=s.value)==null?void 0:b.querySelector(`[data-index="${x}"]`),_=(w=s.value)==null?void 0:w.querySelector(".menu-groups");!S||!_||(_.scrollTop=S.offsetTop-_.offsetTop)},f=x=>{const b=a.value.groups.flatMap(w=>w.items).at(x);b&&n&&b.onRun(n),i()},m=x=>{const{size:b,groups:w}=a.value;if(x.key==="Escape"){x.preventDefault(),i?.();return}if(x.key==="ArrowDown")return x.preventDefault(),d(S=>S<b-1?S+1:S,h);if(x.key==="ArrowUp")return x.preventDefault(),d(S=>S<=0?S:S-1,h);if(x.key==="ArrowLeft")return x.preventDefault(),d(S=>{const _=w.find(A=>A.range[0]<=S&&A.range[1]>S);if(!_)return S;const P=w[w.indexOf(_)-1];return P?P.range[1]-1:S},h);if(x.key==="ArrowRight")return x.preventDefault(),d(S=>{const _=w.find(A=>A.range[0]<=S&&A.range[1]>S);if(!_)return S;const P=w[w.indexOf(_)+1];return P?P.range[0]:S},h);x.key==="Enter"&&(x.preventDefault(),f(l.value))},v=x=>b=>{const w=c.value;if(!w)return;const{x:S,y:_}=b;S===w.x&&_===w.y||d(x)};return l1(()=>{e.value?window.addEventListener("keydown",m,{capture:!0}):window.removeEventListener("keydown",m,{capture:!0})}),bw(()=>{window.removeEventListener("keydown",m,{capture:!0})}),()=>Ae("div",{ref:s,onPointerdown:x=>x.preventDefault()},Ae("nav",{class:"tab-group"},Ae("ul",null,a.value.groups.map(x=>Ae("li",{key:x.key,onPointerdown:()=>d(x.range[0],h),class:l.value>=x.range[0]&&l.value<x.range[1]?"selected":""},x.label)))),Ae("div",{class:"menu-groups",onPointermove:u},a.value.groups.map(x=>Ae("div",{key:x.key,class:"menu-group"},Ae("h6",null,x.label),Ae("ul",null,x.items.map(b=>Ae("li",{key:b.key,"data-index":b.index,class:l.value===b.index?"hover":"",onPointerenter:v(b.index),onPointerdown:()=>{var w,S;(S=(w=s.value)==null?void 0:w.querySelector(`[data-index="${b.index}"]`))==null||S.classList.add("active")},onPointerup:()=>{var w,S;(S=(w=s.value)==null?void 0:w.querySelector(`[data-index="${b.index}"]`))==null||S.classList.remove("active"),f(b.index)}},Ae(Ng,{icon:b.icon}),Ae("span",null,b.label))))))))}});var N0e=n=>{throw TypeError(n)},j0e=(n,e,r)=>e.has(n)||N0e("Cannot "+r),Xa=(n,e,r)=>(j0e(n,e,"read from private field"),r?r.call(n):e.get(n)),Ey=(n,e,r)=>e.has(n)?N0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),Yf=(n,e,r,i)=>(j0e(n,e,"write to private field"),e.set(n,r),r),yv,_S,AS,xu,P0;const O0e=Wat("CREPE_MENU"),kz=En({show:()=>{},hide:()=>{}},"menuAPICtx");function qyt(n,e){n.set(O0e.key,{view:r=>new Vyt(n,r,e)})}class Vyt{constructor(e,r,i){Ey(this,yv),Ey(this,_S),Ey(this,AS),Ey(this,xu),Ey(this,P0,null),this.update=d=>{Xa(this,xu).update(d)},this.show=d=>{Yf(this,P0,d),Xa(this,AS).value="",Xa(this,xu).show()},this.hide=()=>{Yf(this,P0,null),Xa(this,xu).hide()},this.destroy=()=>{Xa(this,xu).destroy(),Xa(this,_S).unmount(),Xa(this,yv).remove()};const o=document.createElement("div");o.classList.add("milkdown-slash-menu");const s=mt(!1),a=mt("");Yf(this,AS,a);const l=this.hide,c=Ll(Hyt,{ctx:e,config:i,show:s,filter:a,hide:l});Yf(this,_S,c),c.mount(o),Yf(this,yv,o);const u=this;Yf(this,xu,new Uat({content:Xa(this,yv),debounce:20,shouldShow(d){if(A0e(d.state.selection)||T0e(d.state.selection))return!1;const h=this.getContent(d,m=>["paragraph","heading"].includes(m.type.name));if(h==null||!Wyt(d.state.selection))return!1;const f=Xa(u,P0);if(a.value=h.startsWith("/")?h.slice(1):h,typeof f=="number"){const m=d.state.doc.nodeSize-2,v=Math.min(f,m);return d.state.doc.resolve(v).node()!==d.state.doc.resolve(d.state.selection.from).node()?(Yf(u,P0,null),!1):!0}return!!h.startsWith("/")},offset:10})),Xa(this,xu).onShow=()=>{s.value=!0},Xa(this,xu).onHide=()=>{s.value=!1},this.update(r),e.set(kz.key,{show:d=>this.show(d),hide:()=>this.hide()})}}yv=new WeakMap;_S=new WeakMap;AS=new WeakMap;xu=new WeakMap;P0=new WeakMap;function Wyt(n){if(!(n instanceof xt))return!1;const{$head:e}=n,r=e.parent;return e.parentOffset===r.content.size}const Uyt=qi({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(n){const e=mt();return()=>Ae(gi,null,Ae("div",{ref:e,class:"operation-item",onPointerdown:r=>{var i;r.preventDefault(),r.stopPropagation(),(i=e.value)==null||i.classList.add("active")},onPointerup:r=>{var i;r.preventDefault(),r.stopPropagation(),(i=e.value)==null||i.classList.remove("active"),n.onAdd()}},Ae(Ng,{icon:n.addIcon})),Ae("div",{class:"operation-item"},Ae(Ng,{icon:n.handleIcon})))}});var D0e=n=>{throw TypeError(n)},I0e=(n,e,r)=>e.has(n)||D0e("Cannot "+r),Zf=(n,e,r)=>(I0e(n,e,"read from private field"),r?r.call(n):e.get(n)),l4=(n,e,r)=>e.has(n)?D0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),c4=(n,e,r,i)=>(I0e(n,e,"write to private field"),e.set(n,r),r),TS,op,PS,MS;class Kyt{constructor(e,r){l4(this,TS),l4(this,op),l4(this,PS),l4(this,MS),this.update=()=>{Zf(this,op).update()},this.destroy=()=>{Zf(this,op).destroy(),Zf(this,TS).remove(),Zf(this,PS).unmount()},this.onAdd=()=>{const u=Zf(this,MS),d=u.get(fn);d.hasFocus()||d.focus();const{state:h,dispatch:f}=d,m=Zf(this,op).active;if(!m)return;const x=m.$pos.pos+m.node.nodeSize;let b=h.tr.insert(x,Il.type(u).create());b=b.setSelection(xt.near(b.doc.resolve(x))),f(b.scrollIntoView()),Zf(this,op).hide(),u.get(kz.key).show(b.selection.from)};var i,o,s;c4(this,MS,e);const a=document.createElement("div");a.classList.add("milkdown-block-handle");const l=Ll(Uyt,{onAdd:this.onAdd,addIcon:(i=r?.handleAddIcon)!=null?i:uj,handleIcon:(o=r?.handleDragIcon)!=null?o:Myt});l.mount(a),c4(this,PS,l),c4(this,TS,a);const c=(s=r?.blockHandle)!=null?s:{};c4(this,op,new qit({ctx:e,content:a,getOffset:()=>16,getPlacement:({active:u,blockDom:d})=>{if(u.node.type.name==="heading")return"left";let h=0;u.node.descendants(P=>{h+=P.childCount});const f=u.el,m=f.getBoundingClientRect(),v=d.getBoundingClientRect(),x=window.getComputedStyle(f),b=Number.parseInt(x.paddingTop,10)||0,w=Number.parseInt(x.paddingBottom,10)||0,S=m.height-b-w,_=v.height;return h>2||_<S?"left-start":"left"},...c})),this.update()}}TS=new WeakMap;op=new WeakMap;PS=new WeakMap;MS=new WeakMap;function Gyt(n,e){n.set(B6.key,{filterNodes:r=>!kc(o=>["table","blockquote","math_inline"].includes(o.type.name))(r)}),n.set(V6.key,{view:()=>new Kyt(n,e)})}const Yyt=(n,e)=>{n.config(Yc(jn.BlockEdit)).config(r=>Gyt(r,e)).config(r=>qyt(r,e)).use(kz).use(V6).use(O0e)},Zyt=(n,e={})=>{n.config(Yc(jn.CodeMirror)).config(r=>{const{languages:i=[],theme:o}=e,s=[t1.of(ype.concat(Wht)),tmt];o&&s.push(o),e.extensions&&s.push(...e.extensions),r.update(Mw.key,a=>{var l;return{extensions:s,languages:i,expandIcon:e.expandIcon||x0e,searchIcon:e.searchIcon||S0e,clearSearchIcon:e.clearSearchIcon||b0e,searchPlaceholder:e.searchPlaceholder||"Search language",copyText:e.copyText||"Copy",copyIcon:e.copyIcon||k0e,onCopy:e.onCopy||(()=>{}),noResultText:e.noResultText||"No result",renderLanguage:e.renderLanguage||a.renderLanguage,renderPreview:e.renderPreview||a.renderPreview,previewToggleButton:c=>{var u,d;const h=((u=e.previewToggleIcon)==null?void 0:u.call(e,c))||(c?wz:_0e),f=((d=e.previewToggleText)==null?void 0:d.call(e,c))||(c?"Edit":"Hide");return[h,f].map(m=>m.trim()).join(" ")},previewLabel:e.previewLabel||a.previewLabel,previewLoading:e.previewLoading||a.previewLoading,previewOnlyByDefault:(l=e.previewOnlyByDefault)!=null?l:a.previewOnlyByDefault}})}).use(mft)},Xyt=(n,e)=>{if(n.config(Yc(jn.Cursor)).config(i=>{i.update(p7.key,()=>{var o,s;return{class:"crepe-drop-cursor",width:(o=e?.width)!=null?o:4,color:(s=e?.color)!=null?s:!1}})}).use(bmt),e?.virtual===!1)return;const r=wmt();n.use(Kr(()=>r))},Jyt=(n,e)=>{n.config(Yc(jn.ImageBlock)).config(r=>{r.update(m7.key,i=>{var o,s,a,l,c,u;return{uploadButton:(o=e?.inlineUploadButton)!=null?o:"Upload",imageIcon:(s=e?.inlineImageIcon)!=null?s:cj,confirmButton:(a=e?.inlineConfirmButton)!=null?a:bz,uploadPlaceholderText:(l=e?.inlineUploadPlaceholderText)!=null?l:"or paste link",onUpload:(u=(c=e?.inlineOnUpload)!=null?c:e?.onUpload)!=null?u:i.onUpload,proxyDomURL:e?.proxyDomURL}}),r.update(r7.key,i=>{var o,s,a,l,c,u,d,h;return{uploadButton:(o=e?.blockUploadButton)!=null?o:"Upload file",imageIcon:(s=e?.blockImageIcon)!=null?s:cj,captionIcon:(a=e?.blockCaptionIcon)!=null?a:yyt,confirmButton:(l=e?.blockConfirmButton)!=null?l:"Confirm",captionPlaceholderText:(c=e?.blockCaptionPlaceholderText)!=null?c:"Write Image Caption",uploadPlaceholderText:(u=e?.blockUploadPlaceholderText)!=null?u:"or paste link",onUpload:(h=(d=e?.blockOnUpload)!=null?d:e?.onUpload)!=null?h:i.onUpload,proxyDomURL:e?.proxyDomURL}})}).use(jlt).use(Imt)},Qyt=Rc.extendSchema(n=>e=>{const r=n(e);return{...r,toMarkdown:{match:r.toMarkdown.match,runner:(i,o)=>{var s,a;if(((s=o.attrs.language)!=null?s:"").toLowerCase()==="latex")i.addNode("math",void 0,((a=o.content.firstChild)==null?void 0:a.text)||"");else return r.toMarkdown.runner(i,o)}}}}),vv="math_inline",Tb=Ir(vv,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${vv}"]`,getAttrs:n=>{var e;return{value:(e=n.dataset.value)!=null?e:""}}}],toDOM:n=>{const e=n.attrs.value,r=document.createElement("span");return r.dataset.type=vv,r.dataset.value=e,Gme.render(e,r,{throwOnError:!1}),r},parseMarkdown:{match:n=>n.type==="inlineMath",runner:(n,e,r)=>{n.addNode(r,{value:e.value})}},toMarkdown:{match:n=>n.type.name===vv,runner:(n,e)=>{n.addNode("inlineMath",void 0,e.attrs.value)}}})),R0e=zt("ToggleLatex",n=>()=>(e,r)=>{const{hasNode:i,pos:o,target:s}=Zte(e,Tb.type(n)),{selection:a,doc:l,tr:c}=e;if(!i){const m=l.textBetween(a.from,a.to);let v=c.replaceSelectionWith(Tb.type(n).create({value:m}));return r&&r(v.setSelection(Tt.create(v.doc,a.from))),!0}const{from:u,to:d}=a;if(!s||o<0)return!1;let h=c.delete(o,o+1);const f=s.attrs.value;return h=h.insertText(f,o),r&&r(h.setSelection(xt.create(h.doc,u,d+f.length-1))),!0}),cQ=C7("INLINE_LATEX"),evt=qi({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(n){const e=i=>{if(!(!i||!(i instanceof HTMLElement))){for(;i.firstChild;)i.removeChild(i.firstChild);n.innerView.value&&i.appendChild(n.innerView.value.dom)}},r=i=>{i.preventDefault(),n.updateValue.value()};return()=>Ae("div",{class:"container"},n.innerView&&Ae("div",{ref:e}),Ae("button",{type:"button",onPointerdown:r},Ae(Ng,{icon:n.config.inlineEditConfirm})))}});var L0e=n=>{throw TypeError(n)},z0e=(n,e,r)=>e.has(n)||L0e("Cannot "+r),ui=(n,e,r)=>(z0e(n,e,"read from private field"),r?r.call(n):e.get(n)),lh=(n,e,r)=>e.has(n)?L0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),u4=(n,e,r,i)=>(z0e(n,e,"write to private field"),e.set(n,r),r),xv,M0,ES,sp,bv,wv,hj,fj;class tvt{constructor(e,r,i){this.ctx=e,lh(this,xv),lh(this,M0),lh(this,ES),lh(this,sp,AC(null)),lh(this,bv,AC(()=>{})),lh(this,wv),lh(this,hj,()=>{ui(this,sp).value&&(ui(this,sp).value.destroy(),ui(this,sp).value=null)}),lh(this,fj,s=>{const l=(()=>{const{selection:c,schema:u}=s.state;if(c.empty||!(c instanceof Tt))return!1;const d=c.node;if(d.type.name!==vv)return!1;const h=c.from,f=u.nodes.paragraph.create(null,u.text(d.attrs.value)),m=new cO(ui(this,ES),{state:Kj.create({doc:f,schema:new Lee({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},text:{group:"inline"}}}),plugins:[Jte({"Mod-z":h7,"Mod-Z":Og,"Mod-y":Og,Enter:()=>(ui(this,bv).value(),!0)})]})});return ui(this,sp).value=m,ui(this,bv).value=()=>{const{tr:v}=s.state;v.setNodeAttribute(h,"value",m.state.doc.textContent),s.dispatch(v),requestAnimationFrame(()=>{s.focus()})},!0})();return l||ui(this,hj).call(this),l}),this.update=(s,a)=>{ui(this,M0).update(s,a)},this.destroy=()=>{ui(this,wv).unmount(),ui(this,M0).destroy(),ui(this,xv).remove()};const o=document.createElement("div");o.className="milkdown-latex-inline-edit",u4(this,xv,o),u4(this,wv,Ll(evt,{config:i,innerView:ui(this,sp),updateValue:ui(this,bv)})),ui(this,wv).mount(o),u4(this,M0,new S7({debounce:0,content:ui(this,xv),shouldShow:ui(this,fj),offset:10,floatingUIOptions:{placement:"bottom"}})),ui(this,M0).update(r),u4(this,ES,document.createElement("div"))}}xv=new WeakMap;M0=new WeakMap;ES=new WeakMap;sp=new WeakMap;bv=new WeakMap;wv=new WeakMap;hj=new WeakMap;fj=new WeakMap;const nvt=so(n=>P8e(/(?:\$)([^$]+)(?:\$)$/,Tb.type(n),{getAttr:e=>{var r;return{value:(r=e[1])!=null?r:""}}})),rvt=so(n=>Qj(/^\$\$[\s\n]$/,Rc.type(n),()=>({language:"LaTeX"}))),ivt=qc("remarkMath",()=>Wgt);function ovt(n){return af(n,"math",(e,r,i)=>{const{value:o}=e,s={type:"code",lang:"LaTeX",value:o};i.children.splice(r,1,s)})}const svt=qc("remarkMathBlock",()=>()=>ovt),avt=(n,e)=>{n.config(Yc(jn.Latex)).config(r=>{if(!E7(r).get().includes(jn.CodeMirror))throw new Error("You need to enable CodeMirror to use LaTeX feature");r.update(Mw.key,s=>({...s,renderPreview:(a,l,c)=>{if(a.toLowerCase()==="latex"&&l.length>0)return lvt(l,e?.katexOptions);const u=s.renderPreview;return u(a,l,c)}})),r.set(cQ.key,{view:s=>{var a;return new tvt(r,s,{inlineEditConfirm:(a=e?.inlineEditConfirm)!=null?a:bz,...e})}})}).use(ivt).use(svt).use(Tb).use(cQ).use(nvt).use(rvt).use(Qyt).use(R0e)};function lvt(n,e){return Gme.renderToString(n,{...e,throwOnError:!1,displayMode:!0})}const cvt=(n,e)=>{n.config(Yc(jn.LinkTooltip)).config(k1t).config(r=>{r.update(zg.key,i=>{var o,s,a,l,c,u;return{...i,linkIcon:(o=e?.linkIcon)!=null?o:k0e,editButton:(s=e?.editButton)!=null?s:wz,removeButton:(a=e?.removeButton)!=null?a:dj,confirmButton:(l=e?.confirmButton)!=null?l:bz,inputPlaceholder:(c=e?.inputPlaceholder)!=null?c:"Paste link...",onCopyLink:(u=e?.onCopyLink)!=null?u:(()=>{})}})}).use(S1t)};function uvt(n,e){n.set(A7.key,{renderLabel:({label:r,listType:i,checked:o})=>{var s,a,l;return o==null?i==="bullet"?(s=e?.bulletIcon)!=null?s:myt:r:o?(a=e?.checkBoxCheckedIcon)!=null?a:vyt:(l=e?.checkBoxUncheckedIcon)!=null?l:xyt}})}const dvt=(n,e)=>{n.config(Yc(jn.ListItem)).config(r=>uvt(r,e)).use(E1t)};function hvt(n){var e;return n.childCount<=1&&!((e=n.firstChild)!=null&&e.content.size)}function fvt(n,e){const{selection:r}=n;if(!r.empty)return null;const i=r.$anchor,o=i.parent;if(o.content.size>0||kc(l=>l.type.name==="table")(i))return null;const a=i.before();return No.node(a,a+o.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const pj=En({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),pvt=Kr(n=>new ar({key:new lr("CREPE_PLACEHOLDER"),props:{decorations:e=>{var r;if(Fyt(n).readonly)return null;const o=n.get(pj.key);if(o.mode==="doc"&&!hvt(e.doc)||A0e(e.selection)||T0e(e.selection))return null;const s=(r=o.text)!=null?r:"Please enter...",a=fvt(e,s);return a?Ln.create(e.doc,[a]):null}}})),mvt=(n,e)=>{n.config(Yc(jn.Placeholder)).config(r=>{e&&r.update(pj.key,i=>({...i,...e}))}).use(pvt).use(pj)},gvt=(n,e)=>{n.config(Yc(jn.Table)).config(r=>{r.update(T7.key,i=>({...i,renderButton:o=>{var s,a,l,c,u,d,h,f,m;switch(o){case"add_row":return(s=e?.addRowIcon)!=null?s:uj;case"add_col":return(a=e?.addColIcon)!=null?a:uj;case"delete_row":return(l=e?.deleteRowIcon)!=null?l:dj;case"delete_col":return(c=e?.deleteColIcon)!=null?c:dj;case"align_col_left":return(u=e?.alignLeftIcon)!=null?u:hyt;case"align_col_center":return(d=e?.alignCenterIcon)!=null?d:dyt;case"align_col_right":return(h=e?.alignRightIcon)!=null?h:fyt;case"col_drag_handle":return(f=e?.colDragHandleIcon)!=null?f:aQ;case"row_drag_handle":return(m=e?.rowDragHandleIcon)!=null?m:aQ}}}))}).use(ryt)};function yvt(n,e){var r,i,o,s,a,l,c;const u=new E0e;u.addGroup("formatting","Formatting").addItem("bold",{icon:(r=n?.boldIcon)!=null?r:pyt,active:m=>m.get(ht).call(b0.key,i1.type(m)),onRun:m=>{m.get(ht).call(U6.key)}}).addItem("italic",{icon:(i=n?.italicIcon)!=null?i:Tyt,active:m=>m.get(ht).call(b0.key,Cm.type(m)),onRun:m=>{m.get(ht).call(W6.key)}}).addItem("strikethrough",{icon:(o=n?.strikethroughIcon)!=null?o:jyt,active:m=>m.get(ht).call(b0.key,u1.type(m)),onRun:m=>{m.get(ht).call(s7.key)}});const d=u.addGroup("function","Function");d.addItem("code",{icon:(s=n?.codeIcon)!=null?s:w0e,active:m=>m.get(ht).call(b0.key,zu.type(m)),onRun:m=>{m.get(ht).call(K6.key)}});const h=e&&E7(e).get();return h?.includes(jn.Latex)&&d.addItem("latex",{icon:(a=n?.latexIcon)!=null?a:C0e,active:m=>m.get(ht).call(Gde.key,Tb.type(m)),onRun:m=>{m.get(ht).call(R0e.key)}}),d.addItem("link",{icon:(l=n?.linkIcon)!=null?l:Pyt,active:m=>m.get(ht).call(b0.key,bl.type(m)),onRun:m=>{m.get(ht).call(Yme.key)}}),(c=n?.buildToolbar)==null||c.call(n,u),u.build()}const vvt=qi({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(n){const{ctx:e,config:r}=n,i=a=>l=>{l.preventDefault(),e&&a(e)};function o(a){return n.selection.value,e.get(lM).status!==QS.Created?!1:a(e)}const s=Eg(()=>yvt(r,e));return()=>Ae(gi,null,s.value.map(a=>a.items.map(l=>Ae("button",{type:"button",class:Vt("toolbar-item",e&&o(l.active)&&"active"),onPointerdown:i(l.onRun)},Ae(Ng,{icon:l.icon})))).reduce((a,l,c)=>(c===0?a.push(...l):a.push(Ae("div",{class:"divider"}),...l),a),[]))}});var F0e=n=>{throw TypeError(n)},$0e=(n,e,r)=>e.has(n)||F0e("Cannot "+r),_s=(n,e,r)=>($0e(n,e,"read from private field"),r?r.call(n):e.get(n)),Ny=(n,e,r)=>e.has(n)?F0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),d4=(n,e,r,i)=>($0e(n,e,"write to private field"),e.set(n,r),r),hh,kv,NS,Sv,Cv;const uQ=C7("CREPE_TOOLBAR");class xvt{constructor(e,r,i){Ny(this,hh),Ny(this,kv),Ny(this,NS),Ny(this,Sv),Ny(this,Cv,mt(!1)),this.update=(a,l)=>{_s(this,hh).update(a,l),_s(this,Sv).value=a.state.selection},this.destroy=()=>{_s(this,hh).destroy(),_s(this,NS).unmount(),_s(this,kv).remove()},this.hide=()=>{_s(this,hh).hide()};const o=document.createElement("div");o.className="milkdown-toolbar",d4(this,Sv,AC(r.state.selection));const s=Ll(vvt,{ctx:e,hide:this.hide,config:i,selection:_s(this,Sv),show:_s(this,Cv)});s.mount(o),d4(this,kv,o),d4(this,NS,s),d4(this,hh,new S7({content:_s(this,kv),debounce:20,offset:10,shouldShow(a){const{doc:l,selection:c}=a.state,{empty:u,from:d,to:h}=c,f=!l.textBetween(d,h).length&&c instanceof xt,m=!(c instanceof xt),v=a.dom.getRootNode().activeElement,x=o.contains(v),b=!a.hasFocus()&&!x,w=!a.editable;return!(b||m||u||f||w)}})),_s(this,hh).onShow=()=>{_s(this,Cv).value=!0},_s(this,hh).onHide=()=>{_s(this,Cv).value=!1},this.update(r)}}hh=new WeakMap;kv=new WeakMap;NS=new WeakMap;Sv=new WeakMap;Cv=new WeakMap;const bvt=(n,e)=>{n.config(Yc(jn.Toolbar)).config(r=>{r.set(uQ.key,{view:i=>new xvt(r,i,e)})}).use(uQ)};function wvt(n,e,r){switch(n){case jn.CodeMirror:return Zyt(e,r);case jn.ListItem:return dvt(e,r);case jn.LinkTooltip:return cvt(e,r);case jn.ImageBlock:return Jyt(e,r);case jn.Cursor:return Xyt(e,r);case jn.BlockEdit:return Yyt(e,r);case jn.Placeholder:return mvt(e,r);case jn.Toolbar:return bvt(e,r);case jn.Table:return gvt(e,r);case jn.Latex:return avt(e,r)}}var B0e=n=>{throw TypeError(n)},H0e=(n,e,r)=>e.has(n)||B0e("Cannot "+r),As=(n,e,r)=>(H0e(n,e,"read from private field"),r?r.call(n):e.get(n)),f9=(n,e,r)=>e.has(n)?B0e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),p9=(n,e,r,i)=>(H0e(n,e,"write to private field"),e.set(n,r),r),Ps,jS,_v;class kvt{constructor({root:e,defaultValue:r=""}={}){f9(this,Ps),f9(this,jS),f9(this,_v,!0),this.addFeature=(o,s)=>(o(As(this,Ps),s),this),this.create=()=>As(this,Ps).create(),this.destroy=()=>As(this,Ps).destroy(),this.setReadonly=o=>(p9(this,_v,!o),As(this,Ps).action(s=>{As(this,Ps).status===QS.Created&&s.get(fn).setProps({editable:()=>!o})}),this),this.getMarkdown=()=>As(this,Ps).action(Yrt()),this.on=o=>As(this,Ps).status!==QS.Created?(As(this,Ps).config(s=>{const a=s.get(YC);o(a)}),this):(As(this,Ps).action(s=>{const a=s.get(YC);o(a)}),this);var i;p9(this,jS,(i=typeof e=="string"?document.querySelector(e):e)!=null?i:document.body),p9(this,Ps,uO.make().config(o=>{o.inject(zyt,this),o.inject(Lyt,[])}).config(o=>{o.set(I4,As(this,jS)),o.set(E4,r),o.set(qv,{editable:()=>As(this,_v)}),o.update(M7.key,s=>({...s,size:4}))}).use(pot).use(y0e).use(oyt).use(ayt).use(cyt).use(f0e).use(Lfe))}get editor(){return As(this,Ps)}get readonly(){return!As(this,_v)}}Ps=new WeakMap;jS=new WeakMap;_v=new WeakMap;class mj extends kvt{constructor({features:e={},featureConfigs:r={},...i}={}){super(i);const o=eOe(r,Ryt);Object.entries({...uyt,...e}).filter(([,a])=>a).map(([a])=>a).forEach(a=>{const l=o[a];wvt(a,this.editor,l)})}}mj.Feature=jn;const Svt=({query:n,position:e,onSelect:r,onClose:i})=>{const{t:o}=qt("common"),{citations:s}=pi(),a=M.useRef(null),l=s.filter(c=>{const u=n.toLowerCase();return c.id.toLowerCase().includes(u)||c.author.toLowerCase().includes(u)||c.title.toLowerCase().includes(u)||c.year.includes(u)}).slice(0,10);return M.useEffect(()=>{const c=d=>{a.current&&!a.current.contains(d.target)&&i()},u=d=>{d.key==="Escape"&&i()};return document.addEventListener("mousedown",c),document.addEventListener("keydown",u),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",u)}},[i]),l.length===0?p.jsx("div",{ref:a,className:"citation-autocomplete-menu",style:{top:e.top,left:e.left},children:p.jsx("div",{className:"citation-autocomplete-empty",children:o("milkdownEditor.noCitationFound")})}):p.jsx("div",{ref:a,className:"citation-autocomplete-menu",style:{top:e.top,left:e.left},children:l.map(c=>p.jsxs("button",{className:"citation-autocomplete-item",onClick:()=>r(c.id),children:[p.jsxs("span",{className:"citation-key",children:["@",c.id]}),p.jsxs("span",{className:"citation-info",children:[c.author," (",c.year,")"]}),p.jsx("span",{className:"citation-title",children:c.title})]},c.id))})},Cvt=()=>{const{t:n}=qt("common"),{content:e,filePath:r,setContent:i,settings:o,pendingFootnoteScroll:s,clearPendingFootnoteScroll:a}=Pn(),{currentTheme:l}=d3(),c=M.useRef(null),u=M.useRef(null),d=M.useRef(!1),h=M.useRef(e),[f,m]=M.useState(!1),[v,x]=M.useState(!1),[b,w]=M.useState(""),[S,_]=M.useState({top:0,left:0}),P=M.useRef(null);M.useEffect(()=>{h.current=e},[e]);const A=M.useCallback(L=>{const $=u.current;if(!$?.editor||!f)return!1;try{return $.editor.action(L),!0}catch(z){return console.warn("[MilkdownEditor] Editor action failed:",z),!1}},[f]);M.useEffect(()=>{if(!c.current)return;m(!1),u.current&&(console.log("[MilkdownEditor] Destroying old editor for new file"),u.current.destroy(),u.current=null),console.log("[MilkdownEditor] Initializing Crepe editor for file:",r);const L=`# ${n("milkdownEditor.welcome")}

${n("milkdownEditor.startWriting")}`,$=n("milkdownEditor.placeholder"),z=new mj({root:c.current,defaultValue:h.current||L,featureConfigs:{[mj.Feature.Placeholder]:{text:$}}});return z.editor.use(Lfe),z.on(B=>{B.markdownUpdated((D,Y,I)=>{Y!==I&&(d.current=!0,i(Y),setTimeout(()=>{d.current=!1},50))})}),z.create().then(()=>{console.log("[MilkdownEditor] Crepe editor created successfully"),u.current=z,Pn.setState({milkdownEditor:z.editor}),setTimeout(()=>{m(!0),console.log("[MilkdownEditor] Editor is now ready")},100)}).catch(B=>{console.error("[MilkdownEditor] Failed to create editor:",B)}),()=>{console.log("[MilkdownEditor] Destroying Crepe editor on unmount"),m(!1),z.destroy(),u.current=null}},[r,i,n]);const T=M.useRef(e);M.useEffect(()=>{const L=u.current;if(!(!L?.editor||!f)&&!d.current&&e!==T.current){console.log("[MilkdownEditor] Syncing external content change"),d.current=!0;try{L.editor.action(Zrt(e)),T.current=e}catch($){console.warn("[MilkdownEditor] Failed to sync content:",$)}setTimeout(()=>{d.current=!1},100)}},[e,f]),M.useEffect(()=>{const L=z=>{A(B=>{const D=B.get(fn),{state:Y}=D,{tr:I,selection:U}=Y;I.insertText(z,U.from,U.to),D.dispatch(I),D.focus()})};return window.electron.editor.onInsertText(L)},[A]),M.useEffect(()=>{const L=()=>{f&&A(z=>{const B=z.get(fn),{state:D}=B,{selection:Y}=D,I=Y.from,U=Math.max(0,I-50),te=D.doc.textBetween(U,I,`
`).match(/\[@([a-zA-Z0-9_-]*)$/);if(te){const J=te[1]||"";w(J);const oe=B.coordsAtPos(I),q=c.current?.getBoundingClientRect();q&&_({top:oe.bottom-q.top+5,left:oe.left-q.left}),P.current=I-te[0].length,x(!0)}else x(!1),P.current=null})},$=c.current;if($)return $.addEventListener("keyup",L),()=>{$.removeEventListener("keyup",L)}},[f,A]);const E=M.useCallback(L=>{if(P.current===null)return;const $=P.current;A(z=>{const B=z.get(fn),{state:D}=B,{selection:Y}=D,I=D.tr.replaceWith($,Y.from,D.schema.text(`[@${L}]`));B.dispatch(I),B.focus()}),x(!1),P.current=null},[A]);return M.useEffect(()=>{const L=c.current;if(L){L.style.setProperty("--editor-font-size",`${o.fontSize}px`);const $={system:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",jetbrains:"'JetBrains Mono', 'Consolas', monospace",fira:"'Fira Code', 'Consolas', monospace",source:"'Source Code Pro', 'Consolas', monospace",cascadia:"'Cascadia Code', 'Consolas', monospace"};L.style.setProperty("--editor-font-family",$[o.fontFamily]||$.system)}},[o.fontSize,o.fontFamily]),M.useEffect(()=>{if(s===null||!f)return;const L=setTimeout(()=>{A($=>{const z=$.get(fn),{state:B}=z;try{let D=-1;const Y=/\[\^\d+\]:\s*$/;if(B.doc.descendants((I,U)=>I.isText&&I.text&&I.text.match(Y)?(D=U+I.text.length,!1):!0),D>0){const I=B.doc.resolve(D),U=B.selection.constructor.near(I),Z=B.tr.setSelection(U);z.dispatch(Z),z.focus(),setTimeout(()=>{const te=z.coordsAtPos(D);if(te&&c.current){const J=c.current.getBoundingClientRect(),oe=te.top-J.top-100+c.current.scrollTop;c.current.scrollTo({top:Math.max(0,oe),behavior:"smooth"})}},50),console.log("[MilkdownEditor] Cursor positioned at footnote definition, pos:",D)}else console.log("[MilkdownEditor] Footnote definition not found, scrolling to bottom"),c.current&&c.current.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}catch(D){console.warn("[MilkdownEditor] Failed to scroll to footnote:",D),c.current&&c.current.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}}),a()},300);return()=>clearTimeout(L)},[s,f,A,a]),M.useEffect(()=>{const L=c.current;if(!L||!f)return;const $=z=>{const B=z.target,D=B.closest('sup[data-type="footnote_reference"]');if(D){z.preventDefault(),z.stopPropagation();const I=D.textContent?.trim();if(!I)return;L.querySelector('dl[data-type="footnote_definition"] dt');const U=L.querySelectorAll('dl[data-type="footnote_definition"]');for(const Z of U){const te=Z.querySelector("dt");if(te&&te.textContent?.trim()===I){const J=`fnref-${I}`;D.setAttribute("id",J),Z.scrollIntoView({behavior:"smooth",block:"center"}),Z.classList.add("footnote-highlight"),setTimeout(()=>Z.classList.remove("footnote-highlight"),1500);return}}console.log("[MilkdownEditor] Footnote definition not found for:",I);return}const Y=B.closest('dl[data-type="footnote_definition"] > dt');if(Y){z.preventDefault(),z.stopPropagation();const I=Y.textContent?.trim();if(!I)return;const U=L.querySelectorAll('sup[data-type="footnote_reference"]');for(const Z of U)if(Z.textContent?.trim()===I){Z.scrollIntoView({behavior:"smooth",block:"center"}),Z.classList.add("footnote-highlight"),setTimeout(()=>Z.classList.remove("footnote-highlight"),1500);return}console.log("[MilkdownEditor] Footnote reference not found for:",I)}};return L.addEventListener("click",$),()=>L.removeEventListener("click",$)},[f]),p.jsx("div",{ref:c,className:`milkdown-editor-container ${l==="dark"?"milkdown-dark":"milkdown-light"}`,children:v&&p.jsx(Svt,{query:b,position:S,onSelect:E,onClose:()=>x(!1)})})};function dQ(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function _vt(n){if(Array.isArray(n))return n}function Avt(n,e,r){return(e=Ovt(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Tvt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Pvt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hQ(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function fQ(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hQ(Object(r),!0).forEach(function(i){Avt(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):hQ(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Mvt(n,e){if(n==null)return{};var r,i,o=Evt(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Evt(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function Nvt(n,e){return _vt(n)||Tvt(n,e)||Dvt(n,e)||Pvt()}function jvt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ovt(n){var e=jvt(n,"string");return typeof e=="symbol"?e:e+""}function Dvt(n,e){if(n){if(typeof n=="string")return dQ(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dQ(n,e):void 0}}function Ivt(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function pQ(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function mQ(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pQ(Object(r),!0).forEach(function(i){Ivt(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):pQ(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Rvt(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return function(i){return e.reduceRight(function(o,s){return s(o)},i)}}function Av(n){return function e(){for(var r=this,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return o.length>=n.length?n.apply(this,o):function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return e.apply(r,[].concat(o,l))}}}function ZC(n){return{}.toString.call(n).includes("Object")}function Lvt(n){return!Object.keys(n).length}function Pb(n){return typeof n=="function"}function zvt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Fvt(n,e){return ZC(e)||qh("changeType"),Object.keys(e).some(function(r){return!zvt(n,r)})&&qh("changeField"),e}function $vt(n){Pb(n)||qh("selectorType")}function Bvt(n){Pb(n)||ZC(n)||qh("handlerType"),ZC(n)&&Object.values(n).some(function(e){return!Pb(e)})&&qh("handlersType")}function Hvt(n){n||qh("initialIsRequired"),ZC(n)||qh("initialType"),Lvt(n)&&qh("initialContent")}function qvt(n,e){throw new Error(n[e]||n.default)}var Vvt={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},qh=Av(qvt)(Vvt),h4={changes:Fvt,selector:$vt,handler:Bvt,initial:Hvt};function Wvt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h4.initial(n),h4.handler(e);var r={current:n},i=Av(Gvt)(r,e),o=Av(Kvt)(r),s=Av(h4.changes)(n),a=Av(Uvt)(r);function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return h4.selector(u),u(r.current)}function c(u){Rvt(i,o,s,a)(u)}return[l,c]}function Uvt(n,e){return Pb(e)?e(n.current):e}function Kvt(n,e){return n.current=mQ(mQ({},n.current),e),e}function Gvt(n,e,r){return Pb(e)?e(n.current):Object.keys(r).forEach(function(i){var o;return(o=e[i])===null||o===void 0?void 0:o.call(e,n.current[i])}),r}var Yvt={create:Wvt},Zvt={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Xvt(n){return function e(){for(var r=this,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return o.length>=n.length?n.apply(this,o):function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return e.apply(r,[].concat(o,l))}}}function Jvt(n){return{}.toString.call(n).includes("Object")}function Qvt(n){return n||gQ("configIsRequired"),Jvt(n)||gQ("configType"),n.urls?(ext(),{paths:{vs:n.urls.monacoBase}}):n}function ext(){console.warn(q0e.deprecation)}function txt(n,e){throw new Error(n[e]||n.default)}var q0e={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},gQ=Xvt(txt)(q0e),nxt={config:Qvt},rxt=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return function(o){return r.reduceRight(function(s,a){return a(s)},o)}};function V0e(n,e){return Object.keys(e).forEach(function(r){e[r]instanceof Object&&n[r]&&Object.assign(e[r],V0e(n[r],e[r]))}),fQ(fQ({},n),e)}var ixt={type:"cancelation",msg:"operation is manually canceled"};function m9(n){var e=!1,r=new Promise(function(i,o){n.then(function(s){return e?o(ixt):i(s)}),n.catch(o)});return r.cancel=function(){return e=!0},r}var oxt=["monaco"],sxt=Yvt.create({config:Zvt,isInitialized:!1,resolve:null,reject:null,monaco:null}),W0e=Nvt(sxt,2),Lw=W0e[0],N7=W0e[1];function axt(n){var e=nxt.config(n),r=e.monaco,i=Mvt(e,oxt);N7(function(o){return{config:V0e(o.config,i),monaco:r}})}function lxt(){var n=Lw(function(e){var r=e.monaco,i=e.isInitialized,o=e.resolve;return{monaco:r,isInitialized:i,resolve:o}});if(!n.isInitialized){if(N7({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),m9(g9);if(window.monaco&&window.monaco.editor)return U0e(window.monaco),n.resolve(window.monaco),m9(g9);rxt(cxt,dxt)(hxt)}return m9(g9)}function cxt(n){return document.body.appendChild(n)}function uxt(n){var e=document.createElement("script");return n&&(e.src=n),e}function dxt(n){var e=Lw(function(i){var o=i.config,s=i.reject;return{config:o,reject:s}}),r=uxt("".concat(e.config.paths.vs,"/loader.js"));return r.onload=function(){return n()},r.onerror=e.reject,r}function hxt(){var n=Lw(function(r){var i=r.config,o=r.resolve,s=r.reject;return{config:i,resolve:o,reject:s}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(r){var i=r.m||r;U0e(i),n.resolve(i)},function(r){n.reject(r)})}function U0e(n){Lw().monaco||N7({monaco:n})}function fxt(){return Lw(function(n){var e=n.monaco;return e})}var g9=new Promise(function(n,e){return N7({resolve:n,reject:e})}),K0e={config:axt,init:lxt,__getMonacoInstance:fxt},pxt={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},y9=pxt,mxt={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},gxt=mxt;function yxt({children:n}){return _a.createElement("div",{style:gxt.container},n)}var vxt=yxt,xxt=vxt;function bxt({width:n,height:e,isEditorReady:r,loading:i,_ref:o,className:s,wrapperProps:a}){return _a.createElement("section",{style:{...y9.wrapper,width:n,height:e},...a},!r&&_a.createElement(xxt,null,i),_a.createElement("div",{ref:o,style:{...y9.fullWidth,...!r&&y9.hide},className:s}))}var wxt=bxt,G0e=M.memo(wxt);function kxt(n){M.useEffect(n,[])}var Y0e=kxt;function Sxt(n,e,r=!0){let i=M.useRef(!0);M.useEffect(i.current||!r?()=>{i.current=!1}:n,e)}var Os=Sxt;function fx(){}function L0(n,e,r,i){return Cxt(n,i)||_xt(n,e,r,i)}function Cxt(n,e){return n.editor.getModel(Z0e(n,e))}function _xt(n,e,r,i){return n.editor.createModel(e,r,i?Z0e(n,i):void 0)}function Z0e(n,e){return n.Uri.parse(e)}function Axt({original:n,modified:e,language:r,originalLanguage:i,modifiedLanguage:o,originalModelPath:s,modifiedModelPath:a,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:u="light",loading:d="Loading...",options:h={},height:f="100%",width:m="100%",className:v,wrapperProps:x={},beforeMount:b=fx,onMount:w=fx}){let[S,_]=M.useState(!1),[P,A]=M.useState(!0),T=M.useRef(null),E=M.useRef(null),L=M.useRef(null),$=M.useRef(w),z=M.useRef(b),B=M.useRef(!1);Y0e(()=>{let U=K0e.init();return U.then(Z=>(E.current=Z)&&A(!1)).catch(Z=>Z?.type!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>T.current?I():U.cancel()}),Os(()=>{if(T.current&&E.current){let U=T.current.getOriginalEditor(),Z=L0(E.current,n||"",i||r||"text",s||"");Z!==U.getModel()&&U.setModel(Z)}},[s],S),Os(()=>{if(T.current&&E.current){let U=T.current.getModifiedEditor(),Z=L0(E.current,e||"",o||r||"text",a||"");Z!==U.getModel()&&U.setModel(Z)}},[a],S),Os(()=>{let U=T.current.getModifiedEditor();U.getOption(E.current.editor.EditorOption.readOnly)?U.setValue(e||""):e!==U.getValue()&&(U.executeEdits("",[{range:U.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),U.pushUndoStop())},[e],S),Os(()=>{T.current?.getModel()?.original.setValue(n||"")},[n],S),Os(()=>{let{original:U,modified:Z}=T.current.getModel();E.current.editor.setModelLanguage(U,i||r||"text"),E.current.editor.setModelLanguage(Z,o||r||"text")},[r,i,o],S),Os(()=>{E.current?.editor.setTheme(u)},[u],S),Os(()=>{T.current?.updateOptions(h)},[h],S);let D=M.useCallback(()=>{if(!E.current)return;z.current(E.current);let U=L0(E.current,n||"",i||r||"text",s||""),Z=L0(E.current,e||"",o||r||"text",a||"");T.current?.setModel({original:U,modified:Z})},[r,e,o,n,i,s,a]),Y=M.useCallback(()=>{!B.current&&L.current&&(T.current=E.current.editor.createDiffEditor(L.current,{automaticLayout:!0,...h}),D(),E.current?.editor.setTheme(u),_(!0),B.current=!0)},[h,u,D]);M.useEffect(()=>{S&&$.current(T.current,E.current)},[S]),M.useEffect(()=>{!P&&!S&&Y()},[P,S,Y]);function I(){let U=T.current?.getModel();l||U?.original?.dispose(),c||U?.modified?.dispose(),T.current?.dispose()}return _a.createElement(G0e,{width:m,height:f,isEditorReady:S,loading:d,_ref:L,className:v,wrapperProps:x})}var Txt=Axt;M.memo(Txt);function Pxt(n){let e=M.useRef();return M.useEffect(()=>{e.current=n},[n]),e.current}var Mxt=Pxt,f4=new Map;function Ext({defaultValue:n,defaultLanguage:e,defaultPath:r,value:i,language:o,path:s,theme:a="light",line:l,loading:c="Loading...",options:u={},overrideServices:d={},saveViewState:h=!0,keepCurrentModel:f=!1,width:m="100%",height:v="100%",className:x,wrapperProps:b={},beforeMount:w=fx,onMount:S=fx,onChange:_,onValidate:P=fx}){let[A,T]=M.useState(!1),[E,L]=M.useState(!0),$=M.useRef(null),z=M.useRef(null),B=M.useRef(null),D=M.useRef(S),Y=M.useRef(w),I=M.useRef(),U=M.useRef(i),Z=Mxt(s),te=M.useRef(!1),J=M.useRef(!1);Y0e(()=>{let G=K0e.init();return G.then(re=>($.current=re)&&L(!1)).catch(re=>re?.type!=="cancelation"&&console.error("Monaco initialization: error:",re)),()=>z.current?q():G.cancel()}),Os(()=>{let G=L0($.current,n||i||"",e||o||"",s||r||"");G!==z.current?.getModel()&&(h&&f4.set(Z,z.current?.saveViewState()),z.current?.setModel(G),h&&z.current?.restoreViewState(f4.get(s)))},[s],A),Os(()=>{z.current?.updateOptions(u)},[u],A),Os(()=>{!z.current||i===void 0||(z.current.getOption($.current.editor.EditorOption.readOnly)?z.current.setValue(i):i!==z.current.getValue()&&(J.current=!0,z.current.executeEdits("",[{range:z.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),z.current.pushUndoStop(),J.current=!1))},[i],A),Os(()=>{let G=z.current?.getModel();G&&o&&$.current?.editor.setModelLanguage(G,o)},[o],A),Os(()=>{l!==void 0&&z.current?.revealLine(l)},[l],A),Os(()=>{$.current?.editor.setTheme(a)},[a],A);let oe=M.useCallback(()=>{if(!(!B.current||!$.current)&&!te.current){Y.current($.current);let G=s||r,re=L0($.current,i||n||"",e||o||"",G||"");z.current=$.current?.editor.create(B.current,{model:re,automaticLayout:!0,...u},d),h&&z.current.restoreViewState(f4.get(G)),$.current.editor.setTheme(a),l!==void 0&&z.current.revealLine(l),T(!0),te.current=!0}},[n,e,r,i,o,s,u,d,h,a,l]);M.useEffect(()=>{A&&D.current(z.current,$.current)},[A]),M.useEffect(()=>{!E&&!A&&oe()},[E,A,oe]),U.current=i,M.useEffect(()=>{A&&_&&(I.current?.dispose(),I.current=z.current?.onDidChangeModelContent(G=>{J.current||_(z.current.getValue(),G)}))},[A,_]),M.useEffect(()=>{if(A){let G=$.current.editor.onDidChangeMarkers(re=>{let V=z.current.getModel()?.uri;if(V&&re.find(ve=>ve.path===V.path)){let ve=$.current.editor.getModelMarkers({resource:V});P?.(ve)}});return()=>{G?.dispose()}}return()=>{}},[A,P]);function q(){I.current?.dispose(),f?h&&f4.set(s,z.current.saveViewState()):z.current.getModel()?.dispose(),z.current.dispose()}return _a.createElement(G0e,{width:m,height:v,isEditorReady:A,loading:c,_ref:B,className:x,wrapperProps:b})}var Nxt=Ext,jxt=M.memo(Nxt),Oxt=jxt;const Dxt=()=>{const{content:n,setContent:e,settings:r,setMonacoEditor:i}=Pn();pi();const{currentTheme:o}=d3(),s=M.useRef(null);M.useEffect(()=>{const u=window.electron.editor.onInsertText(d=>{if(s.current){const h=s.current.getSelection();if(h){s.current.executeEdits("insert-citation",[{range:h,text:d}]);const f={lineNumber:h.startLineNumber,column:h.startColumn+d.length};s.current.setPosition(f),s.current.focus()}}});return()=>{u()}},[]),M.useEffect(()=>()=>{i(null)},[i]);const a=(u,d)=>{s.current=u,i(u),d.languages.setLanguageConfiguration("markdown",{wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyCode.KeyB,()=>{Pn.getState().insertFormatting("bold")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyCode.KeyI,()=>{Pn.getState().insertFormatting("italic")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyCode.KeyL,()=>{Pn.getState().insertFormatting("link")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyCode.Quote,()=>{Pn.getState().insertFormatting("citation")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KeyT,()=>{Pn.getState().insertFormatting("table")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KeyF,()=>{Pn.getState().insertFormatting("footnote")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KeyQ,()=>{Pn.getState().insertFormatting("blockquote")}),u.addCommand(d.KeyMod.CtrlCmd|d.KeyMod.Shift|d.KeyCode.KeyS,()=>{Pn.getState().toggleStats()}),d.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:(h,f)=>{const m=h.getWordUntilPosition(f),v={startLineNumber:f.lineNumber,endLineNumber:f.lineNumber,startColumn:m.startColumn,endColumn:m.endColumn};if(h.getValueInRange({startLineNumber:f.lineNumber,startColumn:1,endLineNumber:f.lineNumber,endColumn:f.column}).endsWith("[@")){const b=pi.getState().citations;return b.length===0?{suggestions:[{label:"Aucune citation",kind:d.languages.CompletionItemKind.Text,insertText:"",range:v,documentation:"Importez votre bibliographie depuis le panneau Bibliographie"}]}:{suggestions:b.map(S=>{const _=[`${S.author} (${S.year})`,S.title,S.journal||S.publisher||S.booktitle||""].filter(Boolean).join(`
`);return{label:`@${S.id}`,kind:d.languages.CompletionItemKind.Reference,insertText:`${S.id}]`,range:v,documentation:_,detail:S.shortTitle||S.title,sortText:`${S.author}_${S.year}`}})}}return{suggestions:[]}}})},l=u=>{e(u||"")},c=()=>{switch(r.fontFamily){case"system":return"'SF Mono', 'Monaco', 'Consolas', 'Ubuntu Mono', monospace";case"jetbrains":return"'JetBrains Mono', 'Consolas', monospace";case"fira":return"'Fira Code', 'Consolas', monospace";case"source":return"'Source Code Pro', 'Consolas', monospace";case"cascadia":return"'Cascadia Code', 'Consolas', monospace";default:return"'SF Mono', 'Monaco', 'Consolas', 'Ubuntu Mono', monospace"}};return p.jsx("div",{className:"markdown-editor",children:p.jsx(Oxt,{height:"100%",defaultLanguage:"markdown",value:n,onChange:l,onMount:a,theme:o==="dark"?"vs-dark":"light",options:{fontSize:r.fontSize,wordWrap:r.wordWrap?"on":"off",minimap:{enabled:r.showMinimap},lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,formatOnPaste:!0,formatOnType:!0,rulers:[80,120],renderWhitespace:"selection",cursorBlinking:"smooth",smoothScrolling:!0,fontFamily:c(),fontLigatures:r.fontFamily!=="system"}})})},Ixt=()=>{const{content:n}=Pn(),e=M.useMemo(()=>{const r=n.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/\[@[^\]]+\]/g,"").trim(),o=r.split(/\s+/).filter(d=>d.length>0).length,s=r.replace(/\s/g,"").length,a=r.length,l=n.split(`

`).filter(d=>d.trim().length>0).length,c=(n.match(/\[@[^\]]+\]/g)||[]).length,u=(n.match(/\[\^\d+\]/g)||[]).length/2;return{wordCount:o,charCount:s,charWithSpacesCount:a,paragraphs:l,citations:c,footnotes:u}},[n]);return p.jsxs("div",{className:"document-stats",children:[p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"mots"}),p.jsx("span",{className:"stat-value",children:e.wordCount.toLocaleString()})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"car."}),p.jsx("span",{className:"stat-value",children:e.charCount.toLocaleString()})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"car. esp."}),p.jsx("span",{className:"stat-value",children:e.charWithSpacesCount.toLocaleString()})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"par."}),p.jsx("span",{className:"stat-value",children:e.paragraphs})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"cit."}),p.jsx("span",{className:"stat-value",children:e.citations})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"notes"}),p.jsx("span",{className:"stat-value",children:e.footnotes})]})]})},Rxt={granularity:"paragraph",maxResults:5,similarityThreshold:0,collectionFilter:null,useReranking:!0,useContextualEmbedding:!0,sourceType:"secondary"},f0={current:0,total:0,status:"",percentage:0},yf=El((n,e)=>({results:new Map,selectedSegmentId:null,isAnalyzing:!1,progress:f0,error:null,options:Rxt,isPanelOpen:!1,analyze:async r=>{Ye.store("Similarity","Starting analysis",{textLength:r.length});const{options:i}=e();n({isAnalyzing:!0,error:null,progress:{...f0,status:"Dmarrage de l'analyse..."}});try{const o=window.electron.similarity.onProgress(a=>{Ye.store("Similarity","Progress update",a),n({progress:a})});Ye.ipc("similarity.analyze",{textLength:r.length,options:i});const s=await window.electron.similarity.analyze(r,i);if(Ye.ipc("similarity.analyze response",{success:s.success}),o(),s.success&&s.results){const a=new Map;for(const l of s.results)a.set(l.segmentId,l);n({results:a,isAnalyzing:!1,progress:{...f0,percentage:100,status:"Analyse termine"}}),Ye.store("Similarity","Analysis complete",{segments:a.size,totalRecommendations:s.results.reduce((l,c)=>l+c.recommendations.length,0)})}else throw new Error(s.error||"Unknown error during analysis")}catch(o){Ye.error("Similarity",o),n({isAnalyzing:!1,error:o.message||"Erreur lors de l'analyse",progress:f0})}},cancelAnalysis:async()=>{Ye.store("Similarity","Cancelling analysis");try{await window.electron.similarity.cancel(),n({isAnalyzing:!1,progress:f0})}catch(r){Ye.error("Similarity","Cancel failed",r)}},clearResults:async()=>{Ye.store("Similarity","Clearing results");try{await window.electron.similarity.clearCache(),n({results:new Map,selectedSegmentId:null,progress:f0,error:null})}catch(r){Ye.error("Similarity","Clear cache failed",r)}},selectSegment:r=>{Ye.store("Similarity","Selecting segment",{segmentId:r}),n({selectedSegmentId:r}),r&&n({isPanelOpen:!0})},setOptions:r=>{Ye.store("Similarity","Updating options",r),n(i=>({options:{...i.options,...r}}))},togglePanel:()=>{n(r=>({isPanelOpen:!r.isPanelOpen}))},openPanel:()=>{n({isPanelOpen:!0})},closePanel:()=>{n({isPanelOpen:!1,selectedSegmentId:null})},loadCachedResults:async()=>{Ye.store("Similarity","Loading cached results");try{const r=await window.electron.similarity.getAllResults();if(r.success&&r.results){const i=new Map;for(const o of r.results)i.set(o.segmentId,o);n({results:i}),Ye.store("Similarity","Cached results loaded",{segments:i.size})}}catch(r){Ye.error("Similarity","Failed to load cached results",r)}},setProgress:r=>{n({progress:r})},setError:r=>{n({error:r})}})),X0e=()=>{const{results:n}=yf();return Array.from(n.values()).sort((e,r)=>e.segment.startLine-r.segment.startLine)},Lxt=()=>{const{results:n}=yf();return n.size>0},zxt=()=>{const{results:n}=yf();let e=0;return n.forEach(r=>{e+=r.recommendations.length}),e},Fxt=()=>{const{t:n}=qt("common"),{progress:e,cancelAnalysis:r}=yf();return p.jsxs("div",{className:"similarity-progress",children:[p.jsxs("div",{className:"similarity-progress-header",children:[p.jsx("span",{className:"similarity-progress-icon",children:""}),p.jsxs("div",{className:"similarity-progress-info",children:[p.jsx("div",{className:"similarity-progress-status",children:e.status}),e.currentSegment&&p.jsx("div",{className:"similarity-progress-segment",children:e.currentSegment})]}),p.jsxs("div",{className:"similarity-progress-percentage",children:[e.percentage,"%"]})]}),p.jsx("div",{className:"similarity-progress-bar",children:p.jsx("div",{className:"similarity-progress-fill",style:{width:`${e.percentage}%`}})}),p.jsxs("div",{className:"similarity-progress-footer",children:[p.jsxs("span",{className:"similarity-progress-count",children:[e.current," / ",e.total," ",n("similarity.segments")]}),p.jsxs("button",{className:"similarity-cancel-btn",onClick:r,title:n("common.cancel"),children:[p.jsx(Vr,{size:14}),n("common.cancel")]})]})]})},$xt=({recommendation:n})=>{const{t:e}=qt("common"),{insertTextAtCursor:r}=Pn(),[i,o]=M.useState(!1),{pdfId:s,title:a,authors:l,similarity:c,chunkPreview:u,zoteroKey:d,pageNumber:h,sourceType:f,sourceId:m,archive:v,date:x}=n,b=f==="primary",w=Math.round(c*100),S=()=>w>=80?"similarity-high":w>=60?"similarity-medium":"similarity-low",_=async()=>{if(b){Ye.component("SimilarityCard","Opening primary source",{sourceId:m,title:a});try{const A=await window.electron.tropy.getSource(m||"");if(A.success&&A.source&&(console.log("Primary source:",A.source),A.source.photos&&A.source.photos.length>0)){const T=A.source.photos[0];T.path&&await window.electron.shell.openPath(T.path)}}catch(A){Ye.error("SimilarityCard","Failed to open primary source",A)}}else{Ye.component("SimilarityCard","Opening PDF",{pdfId:s,title:a});try{const A=await window.electron.pdf.getDocument(s);A.success&&A.document?.fileURL?(await window.electron.shell.openPath(A.document.fileURL),Ye.component("SimilarityCard","PDF opened",{path:A.document.fileURL})):(Ye.error("SimilarityCard","Document not found or no file path",{pdfId:s}),alert(`Could not find PDF file for: ${a}`))}catch(A){Ye.error("SimilarityCard","Failed to open PDF",A),alert(`Failed to open PDF: ${a}`)}}},P=()=>{Ye.component("SimilarityCard","Inserting citation",{zoteroKey:d,title:a});let A;d?A=`[@${d}]`:A=`[${a.length>30?a.substring(0,30)+"...":a}]`,r(A)};return p.jsxs("div",{className:`similarity-card ${b?"primary-source":"secondary-source"}`,children:[p.jsx("div",{className:`similarity-card-badge ${b?"badge-primary":"badge-secondary"}`,children:b?p.jsxs(p.Fragment,{children:[p.jsx(Ih,{size:12}),p.jsx("span",{children:e("similarity.badge.primary","Primary")})]}):p.jsxs(p.Fragment,{children:[p.jsx(Ac,{size:12}),p.jsx("span",{children:e("similarity.badge.secondary","Secondary")})]})}),p.jsxs("div",{className:"similarity-card-header",children:[p.jsxs("div",{className:"similarity-card-info",children:[p.jsx("div",{className:"similarity-card-title",title:a,children:a}),l&&l.length>0&&p.jsx("div",{className:"similarity-card-authors",children:l.join(", ")}),b&&(v||x)&&p.jsxs("div",{className:"similarity-card-meta",children:[v&&p.jsx("span",{className:"similarity-card-archive",children:v}),x&&p.jsx("span",{className:"similarity-card-date",children:x})]})]}),p.jsxs("div",{className:`similarity-card-score ${S()}`,children:[w,"%"]})]}),u&&p.jsx("button",{className:"similarity-card-preview-toggle",onClick:()=>o(!i),children:i?p.jsxs(p.Fragment,{children:[p.jsx(TQ,{size:14}),e("similarity.hidePreview")]}):p.jsxs(p.Fragment,{children:[p.jsx(Vp,{size:14}),e("similarity.showPreview")]})}),i&&u&&p.jsxs("div",{className:"similarity-card-preview",children:[p.jsx("p",{className:"similarity-card-preview-text",children:u}),h&&p.jsx("span",{className:"similarity-card-page",children:e("similarity.page",{page:h})})]}),p.jsxs("div",{className:"similarity-card-actions",children:[p.jsxs("button",{className:"similarity-card-action",onClick:_,title:b?e("similarity.openSource","Open Source"):e("similarity.openPDF"),children:[p.jsx(z0,{size:14}),b?e("similarity.openSource","Open"):e("similarity.openPDF")]}),p.jsxs("button",{className:"similarity-card-action",onClick:P,title:e("similarity.insertCitation"),children:[p.jsx(txe,{size:14}),e("similarity.insertCitation")]})]})]})},Bxt=()=>{const{selectedSegmentId:n,selectSegment:e}=yf(),r=X0e();return p.jsx("div",{className:"similarity-results",children:r.map(i=>p.jsx(Hxt,{result:i,isSelected:n===i.segmentId,onSelect:()=>e(n===i.segmentId?null:i.segmentId)},i.segmentId))})},Hxt=({result:n,isSelected:e,onSelect:r})=>{const{t:i}=qt("common"),{segment:o,recommendations:s}=n,a=()=>o.title?o.title:o.content.substring(0,60).replace(/\n/g," ")+(o.content.length>60?"...":""),l=()=>s.length===0?"badge-empty":s.length>=3?"badge-good":"badge-partial";return p.jsxs("div",{className:`similarity-segment ${e?"selected":""}`,children:[p.jsxs("div",{className:"similarity-segment-header",onClick:r,children:[p.jsx("div",{className:"similarity-segment-chevron",children:e?p.jsx(Vp,{size:16}):p.jsx(QC,{size:16})}),p.jsx("div",{className:"similarity-segment-icon",children:p.jsx(Po,{size:14})}),p.jsxs("div",{className:"similarity-segment-info",children:[p.jsx("div",{className:"similarity-segment-title",children:a()}),p.jsxs("div",{className:"similarity-segment-meta",children:[i(`similarity.type.${o.type}`),"  ",i("similarity.lines",{start:o.startLine+1,end:o.endLine+1})]})]}),p.jsx("div",{className:`similarity-segment-badge ${l()}`,children:s.length})]}),e&&p.jsx("div",{className:"similarity-segment-content",children:s.length>0?p.jsx("div",{className:"similarity-recommendations",children:s.map((c,u)=>p.jsx($xt,{recommendation:c},`${c.pdfId}-${u}`))}):p.jsxs("div",{className:"similarity-no-recommendations",children:[p.jsx("span",{className:"similarity-no-recommendations-icon",children:""}),p.jsx("span",{className:"similarity-no-recommendations-text",children:i("similarity.noRecommendations")})]})})]})},qxt=({onClose:n})=>{const{t:e}=qt("common"),{options:r,setOptions:i}=yf(),o=d=>{i({granularity:d})},s=d=>{i({sourceType:d})},a=d=>{const h=parseInt(d.target.value,10);h>=1&&h<=20&&i({maxResults:h})},l=d=>{const h=parseFloat(d.target.value);h>=0&&h<=1&&i({similarityThreshold:h})},c=d=>{i({useReranking:d.target.checked})},u=d=>{i({useContextualEmbedding:d.target.checked})};return p.jsx("div",{className:"similarity-options-overlay",onClick:n,children:p.jsxs("div",{className:"similarity-options-modal",onClick:d=>d.stopPropagation(),children:[p.jsxs("div",{className:"similarity-options-header",children:[p.jsx("h3",{className:"similarity-options-title",children:e("similarity.optionsTitle")}),p.jsx("button",{className:"similarity-options-close",onClick:n,children:p.jsx(Vr,{size:18})})]}),p.jsxs("div",{className:"similarity-options-content",children:[p.jsxs("div",{className:"similarity-option-group",children:[p.jsxs("div",{className:"similarity-option-label-wrapper",children:[p.jsx("label",{className:"similarity-option-label",children:e("similarity.granularity")}),p.jsx(sc,{content:e("similarity.help.granularity")})]}),p.jsx("p",{className:"similarity-option-description",children:e("similarity.granularityDescription")}),p.jsxs("div",{className:"similarity-option-buttons",children:[p.jsxs("button",{className:`similarity-option-btn ${r.granularity==="section"?"active":""}`,onClick:()=>o("section"),children:[p.jsx("span",{className:"similarity-option-btn-icon",children:""}),p.jsx("span",{className:"similarity-option-btn-label",children:e("similarity.granularity.section")})]}),p.jsxs("button",{className:`similarity-option-btn ${r.granularity==="paragraph"?"active":""}`,onClick:()=>o("paragraph"),children:[p.jsx("span",{className:"similarity-option-btn-icon",children:""}),p.jsx("span",{className:"similarity-option-btn-label",children:e("similarity.granularity.paragraph")})]}),p.jsxs("button",{className:`similarity-option-btn ${r.granularity==="sentence"?"active":""}`,onClick:()=>o("sentence"),children:[p.jsx("span",{className:"similarity-option-btn-icon",children:""}),p.jsx("span",{className:"similarity-option-btn-label",children:e("similarity.granularity.sentence")})]})]})]}),p.jsxs("div",{className:"similarity-option-group",children:[p.jsxs("div",{className:"similarity-option-label-wrapper",children:[p.jsx("label",{className:"similarity-option-label",children:e("similarity.sourceType","Source Type")}),p.jsx(sc,{content:e("similarity.help.sourceType","Choose which sources to search: secondary sources (PDFs from bibliography) or primary sources (Tropy archives).")})]}),p.jsx("p",{className:"similarity-option-description",children:e("similarity.sourceTypeDescription","Select which type of sources to search")}),p.jsxs("div",{className:"similarity-option-buttons",children:[p.jsxs("button",{className:`similarity-option-btn ${r.sourceType==="secondary"?"active":""}`,onClick:()=>s("secondary"),children:[p.jsx("span",{className:"similarity-option-btn-icon",children:""}),p.jsx("span",{className:"similarity-option-btn-label",children:e("similarity.sourceType.secondary","Secondary")})]}),p.jsxs("button",{className:`similarity-option-btn ${r.sourceType==="primary"?"active":""}`,onClick:()=>s("primary"),children:[p.jsx("span",{className:"similarity-option-btn-icon",children:""}),p.jsx("span",{className:"similarity-option-btn-label",children:e("similarity.sourceType.primary","Primary")})]}),p.jsxs("button",{className:`similarity-option-btn ${r.sourceType==="both"?"active":""}`,onClick:()=>s("both"),children:[p.jsx("span",{className:"similarity-option-btn-icon",children:""}),p.jsx("span",{className:"similarity-option-btn-label",children:e("similarity.sourceType.both","Both")})]})]})]}),p.jsxs("div",{className:"similarity-option-group",children:[p.jsxs("div",{className:"similarity-option-label-wrapper",children:[p.jsx("label",{className:"similarity-option-label",children:e("similarity.maxResults")}),p.jsx(sc,{content:e("similarity.help.maxResults")})]}),p.jsx("p",{className:"similarity-option-description",children:e("similarity.maxResultsDescription")}),p.jsxs("div",{className:"similarity-option-slider",children:[p.jsx("input",{type:"range",min:"1",max:"10",value:r.maxResults,onChange:a,className:"similarity-slider"}),p.jsx("span",{className:"similarity-slider-value",children:r.maxResults})]})]}),p.jsxs("div",{className:"similarity-option-group",children:[p.jsxs("div",{className:"similarity-option-label-wrapper",children:[p.jsx("label",{className:"similarity-option-label",children:e("similarity.threshold")}),p.jsx(sc,{content:e("similarity.help.threshold")})]}),p.jsx("p",{className:"similarity-option-description",children:e("similarity.thresholdDescription")}),p.jsxs("div",{className:"similarity-option-slider",children:[p.jsx("input",{type:"range",min:"0",max:"0.1",step:"0.005",value:r.similarityThreshold,onChange:l,className:"similarity-slider"}),p.jsx("span",{className:"similarity-slider-value",children:r.similarityThreshold===0?e("similarity.noFilter"):`${(r.similarityThreshold*100).toFixed(1)}%`})]})]}),p.jsxs("div",{className:"similarity-option-group",children:[p.jsxs("div",{className:"similarity-option-label-wrapper",children:[p.jsx("label",{className:"similarity-option-label",children:e("similarity.reranking")}),p.jsx(sc,{content:e("similarity.help.reranking")})]}),p.jsx("p",{className:"similarity-option-description",children:e("similarity.rerankingDescription")}),p.jsxs("div",{className:"similarity-option-toggle",children:[p.jsx("input",{type:"checkbox",id:"reranking-toggle",checked:r.useReranking,onChange:c,className:"similarity-checkbox"}),p.jsx("label",{htmlFor:"reranking-toggle",className:"similarity-toggle-label",children:r.useReranking?e("similarity.rerankingEnabled"):e("similarity.rerankingDisabled")})]})]}),p.jsxs("div",{className:"similarity-option-group",children:[p.jsxs("div",{className:"similarity-option-label-wrapper",children:[p.jsx("label",{className:"similarity-option-label",children:e("similarity.contextualEmbedding")}),p.jsx(sc,{content:e("similarity.help.contextualEmbedding")})]}),p.jsx("p",{className:"similarity-option-description",children:e("similarity.contextualEmbeddingDescription")}),p.jsxs("div",{className:"similarity-option-toggle",children:[p.jsx("input",{type:"checkbox",id:"contextual-toggle",checked:r.useContextualEmbedding,onChange:u,className:"similarity-checkbox"}),p.jsx("label",{htmlFor:"contextual-toggle",className:"similarity-toggle-label",children:r.useContextualEmbedding?e("similarity.contextualEnabled"):e("similarity.contextualDisabled")})]})]})]}),p.jsx("div",{className:"similarity-options-footer",children:p.jsx("button",{className:"similarity-options-done",onClick:n,children:e("common.done")})})]})})},Vxt=()=>{const{t:n}=qt("common"),{isPanelOpen:e,closePanel:r,isAnalyzing:i,error:o,analyze:s,clearResults:a,loadCachedResults:l}=yf(),{content:c}=Pn(),u=X0e(),d=Lxt(),h=zxt(),[f,m]=_a.useState(!1);if(M.useEffect(()=>{e&&l()},[e,l]),!e)return null;const v=()=>{Ye.component("SimilarityPanel","Starting analysis"),c.trim().length>0?s(c):alert(n("similarity.emptyDocument"))},x=()=>{Ye.component("SimilarityPanel","Clearing results"),window.confirm(n("similarity.clearConfirm"))&&a()};return p.jsxs("div",{className:"similarity-panel",children:[p.jsxs("div",{className:"similarity-panel-header",children:[p.jsxs("div",{className:"similarity-panel-title-wrapper",children:[p.jsx("h3",{className:"similarity-panel-title",children:n("similarity.title")}),p.jsx(sc,{content:n("similarity.help")})]}),p.jsxs("div",{className:"similarity-panel-actions",children:[p.jsx("button",{className:"similarity-icon-btn",onClick:()=>m(!0),title:n("similarity.options"),children:p.jsx(vj,{size:16})}),d&&p.jsx("button",{className:"similarity-icon-btn",onClick:x,title:n("similarity.clear"),children:p.jsx(Gu,{size:16})}),p.jsx("button",{className:"similarity-icon-btn",onClick:r,title:n("common.close"),children:p.jsx(Vr,{size:16})})]})]}),p.jsxs("div",{className:"similarity-panel-content",children:[o&&p.jsxs("div",{className:"similarity-error",children:[p.jsx("span",{className:"similarity-error-icon",children:""}),p.jsx("span",{className:"similarity-error-message",children:o})]}),i&&p.jsx(Fxt,{}),!i&&p.jsx(p.Fragment,{children:d?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"similarity-summary",children:[p.jsx("span",{className:"similarity-summary-text",children:n("similarity.summary",{segments:u.length,recommendations:h})}),p.jsx("button",{className:"similarity-refresh-btn",onClick:v,title:n("similarity.refresh"),children:p.jsx(ul,{size:14})})]}),p.jsx(Bxt,{})]}):p.jsxs("div",{className:"similarity-empty",children:[p.jsx("div",{className:"similarity-empty-icon",children:""}),p.jsx("p",{className:"similarity-empty-text",children:n("similarity.emptyState")}),p.jsx("button",{className:"similarity-analyze-btn",onClick:v,disabled:c.trim().length===0,children:n("similarity.analyze")})]})})]}),f&&p.jsx(qxt,{onClose:()=>m(!1)})]})};function Wxt(){const{isDirty:n,filePath:e,settings:r,saveFile:i}=Pn(),{autoSave:o,autoSaveDelay:s}=r,a=M.useRef(null),l=M.useRef(!1),c=M.useCallback(async()=>{if(l.current)return;const u=Pn.getState();if(!(!u.isDirty||!u.filePath||!u.settings.autoSave)){l.current=!0,Ye.store("AutoSave","Auto-saving document",{filePath:u.filePath});try{await i(),Ye.store("AutoSave","Document auto-saved successfully")}catch(d){Ye.error("AutoSave",d)}finally{l.current=!1}}},[i]);M.useEffect(()=>{if(a.current&&(clearTimeout(a.current),a.current=null),!(!o||!n||!e))return a.current=setTimeout(()=>{c()},s),()=>{a.current&&(clearTimeout(a.current),a.current=null)}},[o,s,n,e,c])}const Uxt=()=>{const{t:n}=qt("common"),{loadFile:e,saveFile:r,setContent:i,content:o,insertFormatting:s,editorMode:a,toggleEditorMode:l}=Pn(),{citations:c}=pi(),{openPanel:u,isPanelOpen:d}=yf();Wxt();const h=()=>{Ye.component("EditorPanel","handleNewFile clicked"),window.confirm(n("toolbar.newFileConfirm"))&&(i(""),Ye.component("EditorPanel","New file created"))},f=async()=>{Ye.component("EditorPanel","handleOpenFile clicked");try{const w=await window.electron.dialog.openFile({properties:["openFile"],filters:[{name:n("toolbar.markdown"),extensions:["md","markdown"]},{name:n("project.allFiles"),extensions:["*"]}]});!w.canceled&&w.filePaths.length>0&&(Ye.component("EditorPanel","Loading file",{path:w.filePaths[0]}),await e(w.filePaths[0]),Ye.component("EditorPanel","File loaded successfully"))}catch(w){Ye.error("EditorPanel",w),alert(n("toolbar.openError"))}},m=async()=>{Ye.component("EditorPanel","handleSaveFile clicked");try{await r(),Ye.component("EditorPanel","File saved successfully")}catch(w){if(w.message.includes("No file path")){Ye.component("EditorPanel","No file path, showing save dialog");const S=await window.electron.dialog.saveFile({filters:[{name:n("toolbar.markdown"),extensions:["md"]},{name:n("project.allFiles"),extensions:["*"]}]});!S.canceled&&S.filePath&&(Ye.component("EditorPanel","Saving file as",{path:S.filePath}),await Pn.getState().saveFileAs(S.filePath),Ye.component("EditorPanel","File saved successfully"))}else Ye.error("EditorPanel",w),alert(n("toolbar.saveError"))}},v=()=>{Ye.component("EditorPanel","handleCitation clicked"),s("citation")},x=()=>{Ye.component("EditorPanel","handleFootnote clicked"),s("footnote")},b=()=>{Ye.component("EditorPanel","handleCheckCitations clicked");const S=(o.match(/\[@([^\]]+)\]/g)||[]).map(T=>T.replace(/\[@|]/g,"")),_=c.map(T=>T.id),P=S.filter(T=>!_.includes(T)),A=S.filter((T,E)=>S.indexOf(T)!==E);if(P.length===0&&A.length===0)alert("Toutes les citations sont valides !");else{let T="";P.length>0&&(T+=`Citations manquantes dans la bibliographie:
${P.join(", ")}

`),A.length>0&&(T+=`Citations en double:
${[...new Set(A)].join(", ")}`),alert(T)}};return p.jsxs("div",{className:"editor-panel",children:[p.jsxs("div",{className:"editor-toolbar",children:[p.jsxs("div",{className:"toolbar-section",children:[p.jsx("button",{className:"toolbar-btn",onClick:h,title:n("toolbar.newFile"),children:p.jsx(Po,{size:18,strokeWidth:1.5})}),p.jsx("button",{className:"toolbar-btn",onClick:f,title:n("toolbar.open"),children:p.jsx($g,{size:18,strokeWidth:1.5})}),p.jsx("button",{className:"toolbar-btn",onClick:m,title:n("toolbar.save"),children:p.jsx(r3,{size:18,strokeWidth:1.5})})]}),p.jsxs("div",{className:"toolbar-section",children:[p.jsx("button",{className:"toolbar-btn",onClick:v,title:n("toolbar.citation"),children:p.jsx(Ac,{size:18,strokeWidth:1.5})}),p.jsx("button",{className:"toolbar-btn",onClick:x,title:n("toolbar.footnote"),children:p.jsx(dxe,{size:18,strokeWidth:1.5})})]}),p.jsxs("div",{className:"toolbar-section",children:[p.jsx("button",{className:"toolbar-btn",onClick:b,title:n("toolbar.checkCitations"),children:p.jsx(Fu,{size:18,strokeWidth:1.5})}),p.jsx("button",{className:`toolbar-btn ${d?"active":""}`,onClick:u,title:n("similarity.title"),children:p.jsx(yj,{size:18,strokeWidth:1.5})})]}),p.jsxs("div",{className:"toolbar-section toolbar-section-right",children:[p.jsx("button",{className:`toolbar-btn ${a==="wysiwyg"?"active":""}`,onClick:()=>a!=="wysiwyg"&&l(),title:n("toolbar.wysiwygMode"),children:p.jsx(e3,{size:18,strokeWidth:1.5})}),p.jsx("button",{className:`toolbar-btn ${a==="source"?"active":""}`,onClick:()=>a!=="source"&&l(),title:n("toolbar.sourceMode"),children:p.jsx(cve,{size:18,strokeWidth:1.5})})]})]}),p.jsxs("div",{className:"editor-content",children:[a==="wysiwyg"?p.jsx(Cvt,{}):p.jsx(Dxt,{}),p.jsx(Ixt,{})]}),p.jsx(Vxt,{})]})},J0e=El(n=>({isRebuilding:!1,progress:{current:0,total:100,status:"",percentage:0},setRebuildProgress:e=>{n({isRebuilding:e.percentage<100,progress:e})},resetProgress:()=>{n({isRebuilding:!1,progress:{current:0,total:100,status:"",percentage:0}})}}));typeof window<"u"&&window.electron.project.onRebuildProgress(n=>{J0e.getState().setRebuildProgress(n)});function Kxt(){const{isRebuilding:n,progress:e}=J0e();return n?p.jsx("div",{className:"rebuild-modal-overlay",children:p.jsxs("div",{className:"rebuild-modal",children:[p.jsxs("div",{className:"rebuild-modal-header",children:[p.jsx("h2",{children:"Building Search Indexes"}),p.jsx("p",{className:"rebuild-modal-subtitle",children:"Optimizing search performance for your corpus..."})]}),p.jsxs("div",{className:"rebuild-modal-body",children:[p.jsx("div",{className:"rebuild-progress-bar-container",children:p.jsx("div",{className:"rebuild-progress-bar",style:{width:`${e.percentage}%`}})}),p.jsxs("div",{className:"rebuild-progress-info",children:[p.jsxs("span",{className:"rebuild-progress-percentage",children:[e.percentage,"%"]}),p.jsx("span",{className:"rebuild-progress-status",children:e.status})]}),p.jsx("div",{className:"rebuild-info-box",children:p.jsx("p",{children:"This process runs once when opening a project with existing documents. Future searches will be significantly faster."})})]})]})}):null}const Gxt=({error:n,resetErrorBoundary:e})=>p.jsx("div",{role:"alert",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"2rem",backgroundColor:"#f8f9fa"},children:p.jsxs("div",{style:{maxWidth:"600px",padding:"2rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsx("h1",{style:{color:"#dc3545",marginBottom:"1rem"},children:"Oops! Something went wrong"}),p.jsx("p",{style:{marginBottom:"1rem",color:"#6c757d"},children:"The application encountered an unexpected error. Please try reloading or contact support if the problem persists."}),p.jsxs("details",{style:{marginBottom:"1.5rem"},children:[p.jsx("summary",{style:{cursor:"pointer",color:"#007bff",marginBottom:"0.5rem"},children:"Error details"}),p.jsxs("pre",{style:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"4px",overflow:"auto",fontSize:"0.875rem",color:"#dc3545"},children:[n.message,n.stack&&`

`+n.stack]})]}),p.jsx("button",{onClick:e,style:{padding:"0.5rem 1.5rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},onMouseOver:r=>r.currentTarget.style.backgroundColor="#0056b3",onMouseOut:r=>r.currentTarget.style.backgroundColor="#007bff",children:"Try again"})]})});function Yxt(){const{saveCurrentFile:n,loadFile:e,createNewFile:r,insertFormatting:i,togglePreview:o,toggleStats:s}=Pn(),{createProject:a,loadProject:l}=zc(),{searchCitations:c,citations:u}=pi();M.useEffect(()=>{if(!window.electron||!window.electron.ipcRenderer){console.warn("Electron API not available, skipping menu shortcuts setup");return}const d=()=>{r()},h=async()=>{try{const Z=await window.electron.dialog.openFile({filters:[{name:"Markdown",extensions:["md","markdown"]}]});!Z.canceled&&Z.filePaths&&Z.filePaths.length>0&&await e(Z.filePaths[0])}catch(Z){console.error("Failed to open file:",Z)}},f=async()=>{const{filePath:Z}=Pn.getState();if(Z)n();else try{const te=await window.electron.dialog.saveFile({filters:[{name:"Markdown",extensions:["md","markdown"]}],defaultPath:"document.md"});!te.canceled&&te.filePath&&await Pn.getState().saveFileAs(te.filePath)}catch(te){console.error("Failed to save file:",te)}},m=()=>{window.dispatchEvent(new CustomEvent("show-create-project-dialog"))},v=()=>{window.dispatchEvent(new CustomEvent("show-open-project-dialog"))},x=()=>{window.dispatchEvent(new CustomEvent("show-pdf-export-dialog"))},b=()=>{i("bold")},w=()=>{i("italic")},S=()=>{i("link")},_=()=>{i("citation")},P=()=>{i("table")},A=()=>{i("footnote")},T=()=>{i("blockquote")},E=()=>{s()},L=()=>{const{content:Z}=Pn.getState(),J=(Z.match(/\[@([^\]]+)\]/g)||[]).map(re=>re.replace(/\[@|]/g,"")),oe=u.map(re=>re.id),q=J.filter(re=>!oe.includes(re)),G=J.filter((re,V)=>J.indexOf(re)!==V);if(q.length===0&&G.length===0)alert(" Toutes les citations sont valides !");else{let re="";q.length>0&&(re+=` Citations manquantes dans la bibliographie:
${q.join(", ")}

`),G.length>0&&(re+=` Citations en double:
${[...new Set(G)].join(", ")}`),alert(re)}},$=()=>{o()},z=(Z,te)=>{window.dispatchEvent(new CustomEvent("switch-panel",{detail:te}))},B=()=>{window.dispatchEvent(new CustomEvent("show-bibtex-import-dialog"))},D=()=>{window.dispatchEvent(new CustomEvent("focus-citation-search"))},Y=()=>{window.dispatchEvent(new CustomEvent("show-zotero-connect-dialog"))},I=()=>{window.dispatchEvent(new CustomEvent("show-settings-modal"))},U=()=>{window.dispatchEvent(new CustomEvent("show-about-dialog"))};return window.electron.ipcRenderer.on("menu:new-file",d),window.electron.ipcRenderer.on("menu:open-file",h),window.electron.ipcRenderer.on("menu:save-file",f),window.electron.ipcRenderer.on("menu:new-project",m),window.electron.ipcRenderer.on("menu:open-project",v),window.electron.ipcRenderer.on("menu:export-pdf",x),window.electron.ipcRenderer.on("menu:format-bold",b),window.electron.ipcRenderer.on("menu:format-italic",w),window.electron.ipcRenderer.on("menu:insert-link",S),window.electron.ipcRenderer.on("menu:insert-citation",_),window.electron.ipcRenderer.on("menu:insert-table",P),window.electron.ipcRenderer.on("menu:insert-footnote",A),window.electron.ipcRenderer.on("menu:insert-blockquote",T),window.electron.ipcRenderer.on("menu:toggle-stats",E),window.electron.ipcRenderer.on("menu:check-citations",L),window.electron.ipcRenderer.on("menu:toggle-preview",$),window.electron.ipcRenderer.on("menu:switch-panel",z),window.electron.ipcRenderer.on("menu:import-bibtex",B),window.electron.ipcRenderer.on("menu:search-citations",D),window.electron.ipcRenderer.on("menu:connect-zotero",Y),window.electron.ipcRenderer.on("menu:open-settings",I),window.electron.ipcRenderer.on("menu:about",U),()=>{window.electron.ipcRenderer.removeListener("menu:new-file",d),window.electron.ipcRenderer.removeListener("menu:open-file",h),window.electron.ipcRenderer.removeListener("menu:save-file",f),window.electron.ipcRenderer.removeListener("menu:new-project",m),window.electron.ipcRenderer.removeListener("menu:open-project",v),window.electron.ipcRenderer.removeListener("menu:export-pdf",x),window.electron.ipcRenderer.removeListener("menu:format-bold",b),window.electron.ipcRenderer.removeListener("menu:format-italic",w),window.electron.ipcRenderer.removeListener("menu:insert-link",S),window.electron.ipcRenderer.removeListener("menu:insert-citation",_),window.electron.ipcRenderer.removeListener("menu:insert-table",P),window.electron.ipcRenderer.removeListener("menu:insert-footnote",A),window.electron.ipcRenderer.removeListener("menu:insert-blockquote",T),window.electron.ipcRenderer.removeListener("menu:toggle-stats",E),window.electron.ipcRenderer.removeListener("menu:check-citations",L),window.electron.ipcRenderer.removeListener("menu:toggle-preview",$),window.electron.ipcRenderer.removeListener("menu:switch-panel",z),window.electron.ipcRenderer.removeListener("menu:import-bibtex",B),window.electron.ipcRenderer.removeListener("menu:search-citations",D),window.electron.ipcRenderer.removeListener("menu:connect-zotero",Y),window.electron.ipcRenderer.removeListener("menu:open-settings",I),window.electron.ipcRenderer.removeListener("menu:about",U)}},[n,e,r,i,o,s,a,l,c,u])}function Zxt(){Yxt(),d3();const n=vee(o=>o.initializeLanguage),e=zc(o=>o.loadProject),r=Pn(o=>o.updateSettings),i=Pn(o=>o.initializeEditorMode);return M.useEffect(()=>{n(),(async()=>{try{const s=await window.electron.config.get("editor");s&&(r({fontSize:s.fontSize,wordWrap:s.wordWrap,showMinimap:s.showMinimap,fontFamily:s.fontFamily,defaultEditorMode:s.defaultEditorMode||"wysiwyg"}),i())}catch(s){console.error("Failed to load editor settings:",s)}})()},[n,e,r,i]),p.jsxs(U1e,{FallbackComponent:Gxt,onReset:()=>{window.location.reload()},onError:(o,s)=>{console.error("Error caught by boundary:",o,s)},children:[p.jsx(lQe,{centerPanel:p.jsx(Uxt,{})}),p.jsx(Kxt,{})]})}V1e.createRoot(document.getElementById("root")).render(p.jsx(_a.StrictMode,{children:p.jsx(Zxt,{})}));export{bp as A,un as B,Npe as C,Ce as D,rt as E,Ag as F,Srt as G,cQe as H,Rn as I,Fnt as J,pN as L,Wbt as N,bce as P,fa as T,Hnt as a,ewt as b,Jbt as c,Uft as d,Fi as e,Qnt as f,Zbt as g,Xbt as h,Zue as i,Qbt as j,twt as k,De as l,Oo as m,nn as n,hI as o,Kbt as p,Fn as q,wa as r,Dnt as s,je as t,Gue as u,e1 as v,Jnt as w,hf as x,t1 as y,j6 as z};
